TCID;ID;Title;Description;Author;Importance;Pos/Neg;Automation;TCMS Case ID;#;Step;Expected Result;Type;_polarion
1;RHEL-111042;[detach-device] detach-device with specified mac or pci or both (negative) -- bug 872028 1343919;Detach a interface will macth the mac address or pci address or both. If specify both the mac and pci address in a detach, the interface will be detached successfully only when the two both can macth. If only specify mac, the detach will be successfully when there is only one interface match the mac. A single pci address can also be a match.;Yalan Zhang (yalzhang);High;Negative;Manual Only;;1;check the error message when detach;​​;Test Case;RedHatEnterpriseLinux7/RHEL-111042
1;;;;;;;;;2;"prepare a running domain with below interface
 # virsh dumpxml rhel7.4 | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:8c:2a:67'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
     <interface type='direct'>
       <mac address='52:54:00:44:ff:e4'/>
       <source dev='eno1' mode='vepa'/>
       <target dev='macvtap0'/>
       <model type='rtl8139'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL-111042
1;;;;;;;;;3;"Scenario 1: by right mac + wrong pci address(the pci for other interface) -> should failed with significative error
 # cat net4.xml 
 <interface type='network'>
       <mac address='52:54:00:8c:2a:67'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet1'/>
       <model type='rtl8139'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 # virsh detach-device rhel7.4 net4.xml 
​​";"error: Failed to detach device from net4.xml
 error: operation failed: no device matching MAC address 52:54:00:8c:2a:67 found on 0000:00:03.0";;RedHatEnterpriseLinux7/RHEL-111042
1;;;;;;;;;4;login guest to check the interface still exists;​​;;RedHatEnterpriseLinux7/RHEL-111042
1;;;;;;;;;5;"Scenario 2: by wrong mac + right pci address  -> failed with significative error
 # cat net5.xml 
 <interface type='network'>
 <mac address='52:54:00:44:ff:e4'/>
        <source network='default' bridge='virbr0'/>
        <target dev='vnet1'/>
        <model type='rtl8139'/>
        <alias name='net1'/>
        <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
      </interface>
 # virsh detach-device rhel7.4 net5.xml 
​​";"error: Failed to detach device from net5.xml
 error: operation failed: no device matching MAC address 52:54:00:44:ff:e4 found on 0000:00:09.0";;RedHatEnterpriseLinux7/RHEL-111042
1;;;;;;;;;6;login guest to check the interface still exists;​​;;RedHatEnterpriseLinux7/RHEL-111042
1;;;;;;;;;7;"Scenario 5: no mac or pci address
 If there is only one interface 
 # virsh dumpxml rhel7.4 | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:8c:2a:67'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
 # cat net6.xml 
 <interface type='network'>
       <source network='default' bridge='virbr0'/>
     </interface>
 # virsh detach-device rhel7.4 net6.xml 
​​";Device detached successfully;;RedHatEnterpriseLinux7/RHEL-111042
1;;;;;;;;;8;login guest to check the interface do not exists;​​;;RedHatEnterpriseLinux7/RHEL-111042
1;;;;;;;;;9;"If there are multiple interfaces
 # virsh dumpxml rhel7.4 | grep /interface -B12
 ......
     <interface type='network'>
       <mac address='52:54:00:8c:2a:67'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
     <interface type='bridge'>
       <mac address='52:54:00:76:80:63'/>
       <source bridge='ovsbr0'/>
       <virtualport type='openvswitch'>
         <parameters interfaceid='7df5562b-2f1a-4eeb-b0b3-7d331b6b7ed3'/>
       </virtualport>
       <target dev='vnet1'/>
       <model type='rtl8139'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # cat net6.xml 
 <interface type='network'>
       <source network='default' bridge='virbr0'/>
     </interface>
 
 # virsh detach-device rhel7.4 net6.xml
​​";"error: Failed to detach device from net6.xml
 error: operation failed: multiple matching devices found";;RedHatEnterpriseLinux7/RHEL-111042
1;;;;;;;;;10;login guest to check the interface still exists;​​;;RedHatEnterpriseLinux7/RHEL-111042
1;;;;;;;;;11;"Scenario 6: no mac and wrong pci
 # cat net8.xml 
 <interface type='network'>
       <source network='default'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x11' function='0x0'/>
     </interface>
 
 # virsh detach-device rhel7.4 net8.xml 
​​";"error: Failed to detach device from net8.xml
 error: operation failed: no device found on 0000:00:11.0";;RedHatEnterpriseLinux7/RHEL-111042
1;;;;;;;;;12;login guest to check the interface still exists;​​;;RedHatEnterpriseLinux7/RHEL-111042
1;;;;;;;;;13;"Scenario 7: no PCI and wrong mac
 # cat net9.xml 
 <interface type='network'>
       <source network='default'/>
  <mac address='52:54:00:76:80:66'/>
       <model type='rtl8139'/>
     </interface>
 # virsh detach-device rhel7.4 net9.xml 
​​";"error: Failed to detach device from net9.xml
 error: operation failed: no device matching MAC address 52:54:00:76:80:66 found
 
​​";;RedHatEnterpriseLinux7/RHEL-111042
1;;;;;;;;;14;login guest to check the interface still exists;​​;;RedHatEnterpriseLinux7/RHEL-111042
1;;;;;;;;;15;"Scenario 8: detach-interface when there are multiple interface with the same mac
 # virsh dumpxml rhel7.4 | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:8c:2a:67'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
     <interface type='network'>
       <mac address='52:54:00:8c:2a:67'/>
       <source network='isolated' bridge='virbr2'/>
       <target dev='vnet1'/>
       <model type='rtl8139'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL-111042
1;;;;;;;;;16;" # cat net11.xml 
 <interface type='network'>
       <mac address='52:54:00:8c:2a:67'/>
       <source network='isolated' bridge='virbr2'/>
     </interface>
 
 # virsh detach-device rhel7.4 net11.xml ";" error: Failed to detach device from net11.xml
 error: operation failed: multiple devices matching MAC address 52:54:00:8c:2a:67 found
 
​​";;RedHatEnterpriseLinux7/RHEL-111042
1;;;;;;;;;17;"# virsh detach-interface rhel7.4 network --mac 52:54:00:8c:2a:67
 
 
​​";"error: Domain has multiple interfaces matching MAC address 52:54:00:8c:2a:67. You must use detach-device and specify the device pci address to remove it.
 error: Failed to detach interface";;RedHatEnterpriseLinux7/RHEL-111042
1;;;;;;;;;18;login guest to check the 2 interface still exists;​​;;RedHatEnterpriseLinux7/RHEL-111042
2;RHEL-111045;Reload virtlogd when guest with file-backend chardev is running;"Verify that virtlogd can be reloaded successfully when guest with file-backend chardev is running, and the previous FD is still opened after reloading.
Bug 1430988 - Permission denied when reloading virtlogd";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set virtlogd as the log handler:
 
 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.
 
 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 
 
 (Re)start libvirtd
 # systemctl restart libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL-111045
2;;;;;;;;;2;Start a guest with file-backend chardev(e.g. file-backend console device);​​;;RedHatEnterpriseLinux7/RHEL-111045
2;;;;;;;;;3;"Check the opened FD of the backend file:
 # lsof /var/log/libvirt/qemu/log 
​​";"Output:
 COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
 virtlogd 1520 root   14w   REG  253,0     2333 3426 /var/log/libvirt/qemu/log";;RedHatEnterpriseLinux7/RHEL-111045
2;;;;;;;;;4;"Reload virtlogd:
 # systemctl reload virtlogd";​​;;RedHatEnterpriseLinux7/RHEL-111045
2;;;;;;;;;5;"Check the virtlogd status:
 # systemctl status virtlogd";virtlogd is active;;RedHatEnterpriseLinux7/RHEL-111045
2;;;;;;;;;6;"Check the opened FD of the backend file again:
 # lsof /var/log/libvirt/qemu/log 
​​";"The file is still opened by virtlogd.
 
 Output:
 COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
 virtlogd 1520 root   11w   REG  253,0    50652 3426 /var/log/libvirt/qemu/log";;RedHatEnterpriseLinux7/RHEL-111045
2;;;;;;;;;7;"Shutdown guest(to produce some console log) and check the content of backend file:
 1) # tailf /var/log/libvirt/qemu/log
 2) # virsh shutdown $guest";"New console log is recorded in the backend file when guest shuts down.
 
 For example:
 [  OK  ] Deactivated swap /dev/disk/by-id/dm...KSk5woq1L01eXoh1zR5kL80tPAnozRD.
 [  OK  ] Deactivated swap /dev/disk/by-id/dm-name-rhel-swap.
 [  OK  ] Deactivated swap /dev/dm-1.
 [  OK  ] Deactivated swap /dev/mapper/rhel-swap.
 [  OK  ] Unmounted /boot.
 [  OK  ] Reached target Unmount All Filesystems.
 [  OK  ] Stopped target Local File Systems (Pre).
 [  OK  ] Stopped Create Static Device Nodes in /dev.
          Stopping Create Static Device Nodes in /dev...
 [  OK  ] Stopped Remount Root and Kernel File Systems.
          Stopping Remount Root and Kernel File Systems...
 [  OK  ] Reached target Shutdown.
 dracut Warning: Killing all remaining processes
 Powering off.
 [  945.178285] Power down.";;RedHatEnterpriseLinux7/RHEL-111045
3;RHEL-111051;[domifaddr] domifaddr for bridge and network type interface - bug 1600468;"test the virsh command, they should be full supported for bridge type interface 
domiflist domain [--inactive]
domifaddr domain [interface] [--full] [--source lease|agent]
domifstat domain interface-device domifaddr only support the type which get ip address by dnsmasq managed by libvirt, that is network type, for others it will return null";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;" start a guest with bridge and network type interface
 # virsh start rhel7
 Domain rhel7 started
 
 # virsh dumpxml rhel7 | grep /interface -B7
     <interface type='bridge'>
       <mac address='52:54:00:c0:ff:fe'/>
       <source bridge='br0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
     <interface type='network'>
       <mac address='52:54:00:76:82:b1'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet1'/>
       <model type='virtio'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
 
 # brctl show
 bridge name bridge id STP enabled interfaces
 br0 8000.52540091ce0c no eno1
 vnet0
 virbr0 8000.5254005b50d9 yes virbr0-nic
 vnet1";​​;Test Case;RedHatEnterpriseLinux7/RHEL-111051
3;;;;;;;;;2;" login guest to ensure the 2 interface both get ip address
 (if do not get ip, use dhclient to apply one)
 # ifconfig";" eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 10.66.5.77  netmask 255.255.252.0  broadcast 10.66.7.255
         inet6 fe80::5054:ff:fec0:fffe  prefixlen 64  scopeid 0x20<link>
         ether 52:54:00:c0:ff:fe  txqueuelen 1000  (Ethernet)
         RX packets 279  bytes 23585 (23.0 KiB)
         RX errors 0  dropped 43  overruns 0  frame 0
         TX packets 8  bytes 1632 (1.5 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
 
 eth1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 192.168.122.216  netmask 255.255.255.0  broadcast 192.168.122.255
         inet6 fe80::5054:ff:fe76:82b1  prefixlen 64  scopeid 0x20<link>
         ether 52:54:00:76:82:b1  txqueuelen 1000  (Ethernet)
         RX packets 77  bytes 6535 (6.3 KiB)
         RX errors 0  dropped 5  overruns 0  frame 0
         TX packets 68  bytes 6894 (6.7 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0";;RedHatEnterpriseLinux7/RHEL-111051
3;;;;;;;;;3;domifaddr;​​;;RedHatEnterpriseLinux7/RHEL-111051
3;;;;;;;;;4;"login guest to set a ip alias for eth1
 IN GUEST:
 # ifconfig eth0:1 173.173.173.173 netmask 255.255.255.0 up

 # ip a show eth0
 2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP qlen 1000
     link/ether 52:54:00:c0:ff:fe brd ff:ff:ff:ff:ff:ff
     inet 10.66.70.123/23 brd 10.66.71.255 scope global dynamic eth0
        valid_lft 83997sec preferred_lft 83997sec
     inet 173.173.173.173/24 brd 173.173.173.255 scope global eth0:1
        valid_lft forever preferred_lft forever
     inet6 2620:52:0:4246:5054:ff:fec0:fffe/64 scope global mngtmpaddr dynamic 
        valid_lft 2591977sec preferred_lft 604777sec
     inet6 fe80::5054:ff:fec0:fffe/64 scope link 
        valid_lft forever preferred_lft forever

";" 
";;RedHatEnterpriseLinux7/RHEL-111051
3;;;;;;;;;5;"1. no option
 IN HOST:
 # virsh domifaddr rhel7

 (without option default to --lease)
";"Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  vnet1      52:54:00:76:82:b1    ipv4         192.168.122.216/24

 (only the network type interface list out)";;RedHatEnterpriseLinux7/RHEL-111051
3;;;;;;;;;6;"check the libvirtd log for error
 # grep error /var/log/libvirt/libvirtd.log";"should be no error like:
 ""error : virFileReadAll:1460 : Failed to open file '/var/lib/libvirt/dnsmasq/br0.status': No such file or directory 
 ""
 Bug 1600468 - domifaddr should not query non-existing file for interface from host bridge network";;RedHatEnterpriseLinux7/RHEL-111051
3;;;;;;;;;7;"2. by id
 check other options for domain, interface
 # virsh domid rhel7
 31
 
 # virsh domuuid rhel7
 84f83c75-db81-4205-98dd-2105392ea488
 
 # virsh domifaddr 31 
 
​​";" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  vnet1      52:54:00:76:82:b1    ipv4         192.168.122.216/24";;RedHatEnterpriseLinux7/RHEL-111051
3;;;;;;;;;8;"3. by uuid
 # virsh domifaddr 84f83c75-db81-4205-98dd-2105392ea488
​​";" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  vnet1      52:54:00:76:82:b1    ipv4         192.168.122.216/24";;RedHatEnterpriseLinux7/RHEL-111051
3;;;;;;;;;9;"4. by uuid with interface and source lease option
 
 # virsh domifaddr 84f83c75-db81-4205-98dd-2105392ea488  vnet1 --source lease
 
​​";" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  vnet1      52:54:00:76:82:b1    ipv4         192.168.122.216/24
​​";;RedHatEnterpriseLinux7/RHEL-111051
3;;;;;;;;;10;"5. by uuid with source agent option
 
 # virsh domifaddr 84f83c75-db81-4205-98dd-2105392ea488  --source agent
 
 
 
 
   
​​";" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  lo         00:00:00:00:00:00    ipv4         127.0.0.1/8
  -          -                    ipv6         ::1/128
  eth0       52:54:00:c0:ff:fe    N/A          N/A
  eth1       52:54:00:76:82:b1    ipv4         192.168.122.216/24
  -          -                    ipv6         fe80::5054:ff:fe76:82b1/64";;RedHatEnterpriseLinux7/RHEL-111051
3;;;;;;;;;11;"6.  by uuid with source agent and interface option
 
 # virsh domifaddr 84f83c75-db81-4205-98dd-2105392ea488 eth0  --source agent";" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  eth0       52:54:00:c0:ff:fe    N/A          N/A
​​";;RedHatEnterpriseLinux7/RHEL-111051
3;;;;;;;;;12;"8.  # virsh domifaddr rhel7 --source lease

  

";"Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  vnet1      52:54:00:76:82:b1    ipv4         192.168.122.216/24

 (same as step 7)";;RedHatEnterpriseLinux7/RHEL-111051
3;;;;;;;;;13;"9. # virsh domifaddr rhel7 --source agent

 (make sure the guest agent is running or you will not get the result, check by:
 # virsh dumpxml rhel7 | grep -A3 -B3 agent
      <alias name='serial0'/>
     </console>
     <channel type='unix'>
       <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/domain-2-rhel7/org.qemu.guest_agent.0'/>
       <target type='virtio' name='org.qemu.guest_agent.0' state='connected'/>
       <alias name='channel0'/>
       <address type='virtio-serial' controller='0' bus='0' port='1'/>
     </channel>
 )";"Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  lo         00:00:00:00:00:00    ipv4         127.0.0.1/8
  -          -                    ipv6         ::1/128
  eth0       52:54:00:c0:ff:fe    ipv4         10.66.70.123/23
  -          -                    ipv6         2620:52:0:4246:5054:ff:fec0:fffe/64
  -          -                    ipv6         fe80::5054:ff:fec0:fffe/64
  -          -                    ipv4         173.173.173.173/24
  eth1       52:54:00:76:82:b1    ipv4         192.168.122.216/24
  -          -                    ipv6         fe80::5054:ff:fe76:82b1/64


 (return all the interfaces on the guest point of view)
";;RedHatEnterpriseLinux7/RHEL-111051
3;;;;;;;;;14;"10. # virsh domifaddr rhel7 --source agent --full

";" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  lo         00:00:00:00:00:00    ipv4         127.0.0.1/8
  lo         00:00:00:00:00:00    ipv6         ::1/128
  eth0       52:54:00:c0:ff:fe    ipv4         10.66.70.123/23
  eth0       52:54:00:c0:ff:fe    ipv6         2620:52:0:4246:5054:ff:fec0:fffe/64
  eth0       52:54:00:c0:ff:fe    ipv6         fe80::5054:ff:fec0:fffe/64
  eth0       52:54:00:c0:ff:fe    ipv4         173.173.173.173/24
  eth1       52:54:00:76:82:b1    ipv4         192.168.122.216/24
  eth1       52:54:00:76:82:b1    ipv6         fe80::5054:ff:fe76:82b1/64

 (the full content will be list, not '-' in step 9)";;RedHatEnterpriseLinux7/RHEL-111051
4;RHEL-111053;[domifstat] check interface statistics by domifstat with duplicate mac or unknown interface or unsupported type - bug 1497396;"domifstat: unavailable for some types of interface which don't have representation in the host, only support interface type = bridge/ network / direct
";Yalan Zhang (yalzhang);Low;Negative;Not Automated;;1; domifstat; ;Test Case;RedHatEnterpriseLinux7/RHEL-111053
4;;;;;;;;;2;"1. prepare a running vm with 2 interface share the same mac address
 # virsh dumpxml rhel7 | grep /interface -B7
     <interface type='bridge'>
       <mac address='52:54:00:c0:ff:fe'/>
       <source bridge='br0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
     <interface type='network'>
       <mac address='52:54:00:c0:ff:fe'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet1'/>
       <model type='virtio'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL-111053
4;;;;;;;;;3;"2. by mac with duplicate mac
 # virsh domiflist rhel7 
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet0      bridge     br0        virtio      52:54:00:c0:ff:fe
 vnet1      network    default    virtio      52:54:00:c0:ff:fe

 # virsh domifstat rhel7 52:54:00:c0:ff:fe


";"52:54:00:2e:d4:37 rx_bytes 1844
 52:54:00:2e:d4:37 rx_packets 31
 52:54:00:2e:d4:37 rx_errs 0
 52:54:00:2e:d4:37 rx_drop 0
 52:54:00:2e:d4:37 tx_bytes 0
 52:54:00:2e:d4:37 tx_packets 0
 52:54:00:2e:d4:37 tx_errs 0
 52:54:00:2e:d4:37 tx_drop 0
 
 it will also matches the first interface with the mac，
 just as  # virsh domifstat avocado-vt-vm1 vnet";;RedHatEnterpriseLinux7/RHEL-111053
4;;;;;;;;;4;"3. for unknown interface
 # virsh domifstat rhel7 vnet9";"error: Failed to get interface stats rhel7 vnet9
 error: invalid argument: 'vnet9' is not a known interface";;RedHatEnterpriseLinux7/RHEL-111053
4;;;;;;;;;5;"4. attach an user type interface 
 # cat user.xml 
 <interface type='user'>
  <model type='virtio'/>
     <mac address=""00:11:22:33:44:55""/>
 <target dev='user_target'/>
     <ip family='ipv4' address='172.17.2.0' prefix='24'/>
     <ip family='ipv6' address='2001:db8:ac10:fd01::' prefix='64'/>
  </interface>

 # virsh attach-device rhel7 user.xml
 Device attached successfully

 # virsh domiflist rhel7 
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet0      bridge     br0        virtio      52:54:00:c0:ff:fe
 vnet1      network    default    virtio      52:54:00:c0:ff:fe
 user_target user       -          virtio      00:11:22:33:44:55

 # virsh domifstat rhel7 00:11:22:33:44:55
";"error: Failed to get interface stats rhel7 00:11:22:33:44:55
 error: internal error: /proc/net/dev: Interface not found";;RedHatEnterpriseLinux7/RHEL-111053
4;;;;;;;;;6;"# virsh domifstat rhel7 user_target
​​";"error: Failed to get interface stats rhel7 user_target
 error: internal error: /proc/net/dev: Interface not found";;RedHatEnterpriseLinux7/RHEL-111053
5;RHEL-111075;"[Vlan]Define the interface with vlan with name ""vlan0001""    --bug 1286890 1447339";"Define the interface with vlan with name ""vlan0001""";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;" 1.Prepare a  xml file as below
 # cat vlan0001.xml
 <interface type='vlan' name='vlan0001'>
 <start mode='onboot'/>
 <protocol family='ipv4'>
 <ip address='192.168.177.2' prefix='24'/>
 </protocol>
 <vlan tag='1'>
 <interface name='eno1'/>
 </vlan>
 </interface>";​​;Test Case;RedHatEnterpriseLinux7/RHEL-111075
5;;;;;;;;;2;"2.Define the interface 
 # virsh iface-define vlan0001.xml
​​";"Output:
 Interface vlan0001 defined from vlan0001.xml";;RedHatEnterpriseLinux7/RHEL-111075
5;;;;;;;;;3;"3.Check the interface list 
 # virsh iface-list --all
​​";"Output:
  Name                 State      MAC Address
 ---------------------------------------------------
  eno1                 active     44:37:e6:95:03:e4
  lo                   active     00:00:00:00:00:00
  vlan0001             inactive ";;RedHatEnterpriseLinux7/RHEL-111075
5;;;;;;;;;4;"4. Check the dumpxml of interface 
 # virsh iface-dumpxml vlan0001
​​";"Output:
 <interface type='vlan' name='vlan0001'>
   <start mode='onboot'/>
   <protocol family='ipv4'>
     <ip address='192.168.177.2' prefix='24'/>
   </protocol>
   <vlan tag='0001'>
     <interface name='eno1'/>
   </vlan>
 </interface>";;RedHatEnterpriseLinux7/RHEL-111075
5;;;;;;;;;5;"5. Start the interface 
 # virsh iface-start vlan0001
​​";"Output:
 Interface vlan0001 started";;RedHatEnterpriseLinux7/RHEL-111075
5;;;;;;;;;6;"6. Check the dumpxml of interface 
 # virsh iface-dumpxml vlan0001
​​";"Output:
 <interface type='vlan' name='vlan0001'>
   <protocol family='ipv4'>
     <ip address='192.168.177.2' prefix='24'/>
   </protocol>
   <protocol family='ipv6'>
     <ip address='fe80::4637:e6ff:fe95:3e4' prefix='64'/>
   </protocol>
   <link speed='100' state='up'/>
   <vlan tag='1'>
     <interface name='eno1'/>
   </vlan>
 </interface>";;RedHatEnterpriseLinux7/RHEL-111075
6;RHEL-111107;"[Vlan] Define the interface with vlan with name ""eno1.1""    --bug 1286890 1447339";"Define the interface with vlan with name ""eno1.1"" 
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;" 1.Prepare a xml file as below
 # cat  eno1.1.xml
 <interface type='vlan' name='eno1.1'>
 <start mode='onboot'/>
 <protocol family='ipv4'>
 <ip address='192.168.177.4' prefix='24'/>
 </protocol>
 <vlan tag='1'>
 <interface name='eno1'/>
 </vlan>
 </interface>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-111107
6;;;;;;;;;2;"2. Define the interface 
 # virsh iface-define eno1.1.xml
​​";"Output:
 Interface vlan1 defined from eno1.1.xml";;RedHatEnterpriseLinux7/RHEL-111107
6;;;;;;;;;3;"2. Check the interface list 
 # virsh iface-list --all
​​";"Output:
 
 Name                 State      MAC Address
 ---------------------------------------------------
  eno1                 active     44:37:e6:95:03:e4
  eno1.1               inactive   
  lo                   active     00:00:00:00:00:00";;RedHatEnterpriseLinux7/RHEL-111107
6;;;;;;;;;4;"3.Check the dumpxml of interface 
 # virsh iface-dumpxml eno1.1
​​";"Output:
 <interface type='vlan' name='eno1.1'>
   <start mode='onboot'/>
   <protocol family='ipv4'>
     <ip address='192.168.177.4' prefix='24'/>
   </protocol>
   <vlan tag='1'>
     <interface name='eno1'/>
   </vlan>
 </interface>";;RedHatEnterpriseLinux7/RHEL-111107
6;;;;;;;;;5;"4. Start the interface  
 # virsh iface-start eno1.1
​​";"Output:
 Interface eno1.1 started";;RedHatEnterpriseLinux7/RHEL-111107
6;;;;;;;;;6;"5. Check the interface list
 # virsh iface-list --all
​​";"Output:
  Name                 State      MAC Address
 ---------------------------------------------------
  eno1                 active     44:37:e6:95:03:e4
  eno1.1               active     44:37:e6:95:03:e4
  lo                   active     00:00:00:00:00:00";;RedHatEnterpriseLinux7/RHEL-111107
7;RHEL-111108;[domif-getlink] domif-getlink, domif-setlink, domiftune, domifstat test while there are duplicate mac - bug 1497396;duplicate mac will report error as it don't know which one is count, the error message should be clear.;Yalan Zhang (yalzhang);Low;Positive;Not Automated;;1;"1. start a guest with 2 interface connected to 2 networks and they share the same mac address
 # virsh dumpxml rhel7 | grep /interface -B9
     </controller>
     <interface type='network'>
       <mac address='52:54:00:11:0c:ff'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <mtu size='9000'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
     <interface type='network'>
       <mac address='52:54:00:11:0c:ff'/>
       <source network='open' bridge='virbr4'/>
       <target dev='vnet1'/>
       <model type='rtl8139'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0c' function='0x0'/>
     </interface>
";"libvirt will not check if there are 2 interface use the same mac, refer to
 Bug 1538876 - Duplicated interfaces with same MAC will be assigned to same IP in VM (closed not a bug)";Test Case;RedHatEnterpriseLinux7/RHEL-111108
7;;;;;;;;;2;"get the interface name and mac
 # virsh domiflist rhel7
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet0      network    default    virtio      52:54:00:11:0c:ff
 vnet1      network    open       rtl8139     52:54:00:11:0c:ff

 # virsh domif-getlink rhel7 vnet0
 vnet0 up
";​​;;RedHatEnterpriseLinux7/RHEL-111108
7;;;;;;;;;3;"2.  domif-getlink by mac will fail
 # virsh domif-getlink rhel7 52:54:00:11:0c:ff";"error: multiple matching interfaces found

 (check the error message is reasonable)";;RedHatEnterpriseLinux7/RHEL-111108
7;;;;;;;;;4;"3. domif-setlink
  # virsh domif-setlink rhel7 52:54:00:11:0c:ff down";"will match the first interface match the mac,  As devel replied ""Since we cannot change the APIs (we would break the ABI), there's not much we can do here. I'd say these results are expected then."" refer to  https://bugzilla.redhat.com/show_bug.cgi?id=1497396#c10 

 # virsh dumpxml rhel | grep /interface -B9
     <interface type='network'>
       <mac address='52:54:00:11:0c:ff'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <link state='down'/>
       <mtu size='9000'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
     <interface type='network'>
       <mac address='52:54:00:11:0c:ff'/>
       <source network='open' bridge='virbr1'/>
       <target dev='vnet1'/>
       <model type='rtl8139'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0c' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL-111108
7;;;;;;;;;5;"4. # virsh domif-getlink  rhel7  vnet0
 # virsh domif-getlink  rhel7  vnet1";"vnet0 down
 vnet1 up";;RedHatEnterpriseLinux7/RHEL-111108
7;;;;;;;;;6;"5. domiftune
 # virsh domiftune rhel7 52:54:00:11:0c:ff --inbound 100,200,128 --outbound 50,100,256

 # virsh domiftune rhel7 52:54:00:11:0c:ff
 inbound.average: 100
 inbound.peak   : 200
 inbound.burst  : 128
 inbound.floor  : 0
 outbound.average: 50
 outbound.peak  : 100
 outbound.burst : 256";"will match the first interface match the mac,

 # virsh dumpxml rhel | grep /interface -B13
     <interface type='network'>
       <mac address='52:54:00:11:0c:ff'/>
       <source network='default' bridge='virbr0'/>
       <bandwidth>
         <inbound average='100' peak='200' burst='128'/>
         <outbound average='50' peak='100' burst='256'/>
       </bandwidth>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <link state='down'/>
       <mtu size='9000'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
     <interface type='network'>
       <mac address='52:54:00:11:0c:ff'/>
       <source network='open' bridge='virbr1'/>
       <target dev='vnet1'/>
       <model type='rtl8139'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0c' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL-111108
7;;;;;;;;;7;"6. domifstat
 # virsh domifstat rhel 52:54:00:11:0c:ff; virsh domifstat rhel vnet0;  virsh domifstat rhel vnet1

";"will match the first interface match the mac, check the domifstat by mac output is similar as vnet0, not vnet1

 52:54:00:11:0c:ff rx_bytes 9176
 52:54:00:11:0c:ff rx_packets 172
 52:54:00:11:0c:ff rx_errs 0
 52:54:00:11:0c:ff rx_drop 0
 52:54:00:11:0c:ff tx_bytes 0
 52:54:00:11:0c:ff tx_packets 0
 52:54:00:11:0c:ff tx_errs 0
 52:54:00:11:0c:ff tx_drop 0


 vnet0 rx_bytes 9176
 vnet0 rx_packets 172
 vnet0 rx_errs 0
 vnet0 rx_drop 0
 vnet0 tx_bytes 0
 vnet0 tx_packets 0
 vnet0 tx_errs 0
 vnet0 tx_drop 0


 vnet1 rx_bytes 9176
 vnet1 rx_packets 172
 vnet1 rx_errs 0
 vnet1 rx_drop 0
 vnet1 tx_bytes 12696
 vnet1 tx_packets 68
 vnet1 tx_errs 0
 vnet1 tx_drop 0";;RedHatEnterpriseLinux7/RHEL-111108
8;RHEL-111109;"[Vlan] Define the interface with vlan with name ""eno1.0001""    --bug 1286890 1447339";"Define the interface with vlan with name ""eno1.0001"" 
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;" 1. Prepare a xml file as below
 # cat  eno1.0001.xml
 <interface type='vlan' name='eno1.0001'>
 <start mode='onboot'/>
 <protocol family='ipv4'>
 <ip address='192.168.177.3' prefix='24'/>
 </protocol>
 <vlan tag='1'>
 <interface name='eno1'/>
 </vlan>
 </interface>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-111109
8;;;;;;;;;2;"2.Define the interface 
 # virsh iface-define eno1.0001.xml
​​";"Output:
 Interface eno1.0001 defined from eno1.0001.xml";;RedHatEnterpriseLinux7/RHEL-111109
8;;;;;;;;;3;"3.Check the interface list 
 # virsh iface-list --all
​​";"Output:
  Name                 State      MAC Address
 ---------------------------------------------------
  eno1                 active     44:37:e6:95:03:e4
  eno1.1               inactive   
  lo                   active     00:00:00:00:00:00";;RedHatEnterpriseLinux7/RHEL-111109
8;;;;;;;;;4;"4.Check the dumpxml of interface
 # virsh iface-dumpxml eno1.1
​​";"Output:
 <interface type='vlan' name='eno1.1'>
   <start mode='onboot'/>
   <protocol family='ipv4'>
     <ip address='192.168.177.3' prefix='24'/>
   </protocol>
   <vlan tag='1'>
     <interface name='eno1'/>
   </vlan>
 </interface>";;RedHatEnterpriseLinux7/RHEL-111109
9;RHEL-111112;"[Vlan] Define the interface with vlan with name ""eth0.1""    --bug 1286890 1447339";"Define the interface with vlan with name ""eth0.1""  
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;" 1.Prepare a xml file as below
 # cat eth0.1.xml
 <interface type='vlan' name='eth0.1'>
 <start mode='onboot'/>
 <protocol family='ipv4'>
 <ip address='192.168.177.1' prefix='24'/>
 </protocol>
 <vlan tag='1'>
 <interface name='eno1'/>
 </vlan>
 </interface>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-111112
9;;;;;;;;;2;"2.Define the interface 
 # virsh iface-define eth0.1.xml
​​";"Output:
 Interface eth0.1 defined from eth0.1.xml";;RedHatEnterpriseLinux7/RHEL-111112
9;;;;;;;;;3;"3.Check the interface list 
 # virsh iface-list --all
​​";"Output:
 
 Name                 State      MAC Address
 ---------------------------------------------------
  eno1                 active     44:37:e6:95:03:e4
  eno1.1               inactive   
  lo                   active     00:00:00:00:00:00";;RedHatEnterpriseLinux7/RHEL-111112
9;;;;;;;;;4;"4.Check the dumpxml of interface 
 # virsh iface-dumpxml eno1.1
​​";"Output:
 <interface type='vlan' name='eno1.1'>
   <start mode='onboot'/>
   <protocol family='ipv4'>
     <ip address='192.168.177.1' prefix='24'/>
   </protocol>
   <vlan tag='1'>
     <interface name='eno1'/>
   </vlan>
 </interface>";;RedHatEnterpriseLinux7/RHEL-111112
10;RHEL-111113;"[Vlan] Define the interface with vlan with name ""vlan""    --bug 1286890 1447339";"Define the interface with vlan with name ""vlan"" 
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;" 1.Prepare a xml file as below
 # cat vlan.xml
 <interface type='vlan' name='vlan'>
 <start mode='onboot'/>
 <protocol family='ipv4'>
 <ip address='192.168.177.1' prefix='24'/>
 </protocol>
 <vlan tag='1'>
 <interface name='eno1'/>
 </vlan>
 </interface>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-111113
10;;;;;;;;;2;"2.Define the interface 
 # virsh iface-define vlan.xml
​​";"Output:
 Interface vlan defined from vlan.xml";;RedHatEnterpriseLinux7/RHEL-111113
10;;;;;;;;;3;"3.Check the interface list
 # virsh iface-list --all
​​";"Output: 
 Name                 State      MAC Address
 ---------------------------------------------------
  eno1                 active     44:37:e6:95:03:e4
  lo                       active     00:00:00:00:00:00
  vlan                   inactive   
​​";;RedHatEnterpriseLinux7/RHEL-111113
10;;;;;;;;;4;"4.Check the dumpxml of  interface 
 # virsh iface-dumpxml vlan
​​";"Output:
 error: XML error: vlan interface misses the tag attribute
 
 Should update the case when the bug fixed  
 https://bugzilla.redhat.com/show_bug.cgi?id=1447339 ";;RedHatEnterpriseLinux7/RHEL-111113
11;RHEL-111114;[Vlan][iface-edit] Change the interface name when the interface with vlan tag  -- bug 1286890;"Change the interface name when the interface with vlan tag 
 Note:
 The name of interface eth0.1 can not be changed to eth0.2 or eth0.0005, I add the comment and needinfo the dev to check if it is a bug.
 
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;" 1. Check the interface list 
 # virsh iface-list --all
​​";" Output:
 Name                 State      MAC Address
 ---------------------------------------------------
  eno1                 active     44:37:e6:95:03:e4
  lo                   active     00:00:00:00:00:00
  vlan1                inactive   
​​";Test Case;RedHatEnterpriseLinux7/RHEL-111114
11;;;;;;;;;2;"2. Change the interface name 
 # virsh iface-edit vlan1
 <===edit vlan1 to vlan2
​​";"Output:
 Interface vlan2 XML configuration edited.";;RedHatEnterpriseLinux7/RHEL-111114
11;;;;;;;;;3;"3. Check the interface list 
 # virsh iface-list --all
​​";"Output:
  Name                 State      MAC Address
 ---------------------------------------------------
  eno1                 active     44:37:e6:95:03:e4
  lo                   active     00:00:00:00:00:00
  vlan1                inactive   
  vlan2                inactive ";;RedHatEnterpriseLinux7/RHEL-111114
11;;;;;;;;;4;"4.Check the dumpxml of interface  vlan1
 # virsh iface-dumpxml vlan1
​​";"Output:
 <interface type='vlan' name='vlan1'>
   <start mode='onboot'/>
   <protocol family='ipv4'>
     <ip address='192.168.177.1' prefix='24'/>
   </protocol>
   <vlan tag='1'>
     <interface name='eno1'/>
   </vlan>
 </interface>";;RedHatEnterpriseLinux7/RHEL-111114
11;;;;;;;;;5;"5. Check the dumpxml of interface vlan2
 # virsh iface-dumpxml vlan2
​​";"Output:
 <interface type='vlan' name='vlan2'>
   <start mode='onboot'/>
   <protocol family='ipv4'>
     <ip address='192.168.177.1' prefix='24'/>
   </protocol>
   <vlan tag='2'>
     <interface name='eno1'/>
   </vlan>
 </interface>";;RedHatEnterpriseLinux7/RHEL-111114
11;;;;;;;;;6;"6.Start the interface 
 # virsh iface-start vlan1
 # virsh iface-start vlan2
​​";"Output:
 Interface vlan1 started
 Interface vlan2 started";;RedHatEnterpriseLinux7/RHEL-111114
12;RHEL-111115;Assign memory device backed by hugepages but no memoryBacking is set - bug 1455819;"Assign memory device backed by hugepages but no memoryBacking is set - bug 1455819    
";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"0. Enable hugepages
 # sysctl vm.nr_hugepages=600
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-111115
12;;;;;;;;;2;"1. Prepare a vm without <memoryBacking> but a dimm device using hugepage
 # virsh dumpxml rhel7
 ...
 <maxMemory slots='16' unit='KiB'>2124800</maxMemory>
  <memory unit='KiB'>1155072</memory>
  <currentMemory unit='KiB'>1048576</currentMemory>
  <vcpu placement='static' current='1'>16</vcpu>
 ...
 <cpu>
    <numa>
      <cell id='0' cpus='0-7' memory='512000' unit='KiB'/>
      <cell id='1' cpus='8-15' memory='512000' unit='KiB'/>
    </numa>
  </cpu>
 ...
 <devices>
   <memory model='dimm'>
      <source>
        <nodemask>0</nodemask>
        <pagesize unit='KiB'>2048</pagesize>
      </source>
      <target>
        <size unit='KiB'>131072</size>
        <node>1</node>
      </target>
      <address type='dimm' slot='1'/>
    </memory>
 ...
 </devices>
​​";​​;;RedHatEnterpriseLinux7/RHEL-111115
12;;;;;;;;;3;"# ll /dev/hugepages/libvirt/qemu/ -dZ
 
 (the permission is root:root)
​​";drwxr-xr-x. root root system_u:object_r:hugetlbfs_t:s0 /dev/hugepages/libvirt/qemu/;;RedHatEnterpriseLinux7/RHEL-111115
12;;;;;;;;;4;"2. the guest can start successfully.
 # virsh start rhel7
​​";Domain rhel7 started;;RedHatEnterpriseLinux7/RHEL-111115
12;;;;;;;;;5;"# ll /dev/hugepages/libvirt/qemu/ -Z
​​";drwx------. qemu qemu system_u:object_r:svirt_image_t:s0:c81,c895 8-rhel7;;RedHatEnterpriseLinux7/RHEL-111115
12;;;;;;;;;6;"3. attach a dimm
 # cat dimm.xml 
 <memory model='dimm'>
      <source>
        <nodemask>0</nodemask>
        <pagesize unit='KiB'>2048</pagesize>
      </source>
      <target>
        <size unit='KiB'>131072</size>
        <node>0</node>
      </target>
    </memory>
 
 # virsh attach-device rhel7 dimm.xml";Device attached successfully;;RedHatEnterpriseLinux7/RHEL-111115
12;;;;;;;;;7;4.check the xml,the memory attached successfully.;​​;;RedHatEnterpriseLinux7/RHEL-111115
13;RHEL-111116;[virtual desktop][vnc] Qemu vnc server should listen on both ipv4 and ipv6 addresses;If use vnc display, qemu should listen on both ipv4 and ipv6 address;Zhiyi Guo (zhguo);Medium;Positive;Manual Only;;1;"launch qemu by cli:
 /usr/libexec/qemu-kvm -qmp tcp:0:8888,server,nowait -vnc :10";qemu can launch without error;Test Case;RedHatEnterpriseLinux7/RHEL-111116
13;;;;;;;;;2;"Query builtin vnc server listen on both ipv4 and ipv6 address:
 { ""execute"": ""qmp_capabilities"" }
 { ""execute"": ""query-vnc-servers""}";"output looks like:
 {""return"": [{""auth"": ""none"", ""clients"": [], ""server"": [{""auth"": ""none"", ""family"": ""ipv6"", ""service"": ""5910"", ""host"": ""::"", ""websocket"": false}, {""auth"": ""none"", ""family""
 : ""ipv4"", ""service"": ""5910"", ""host"": ""0.0.0.0"", ""websocket"": false}], ""id"": ""default""}]}
 
 It prompts you it is listening on both ipv6 and ipv4 address";;RedHatEnterpriseLinux7/RHEL-111116
13;;;;;;;;;3;# netstat -ant | grep 5910;"Result show vnc server listen on both ipv6 and ipv4
 tcp        0      0 0.0.0.0:5910            0.0.0.0:*               LISTEN     
 tcp6       0      0 :::5910                 :::*                    LISTEN     ";;RedHatEnterpriseLinux7/RHEL-111116
14;RHEL-111124;[virtual network] define a network with forward mode 'open' - bug 846810;basic test for open type network, negative test;Yalan Zhang (yalzhang);Medium;Positive;Automated;;1;" Various xml
 1. prepare a xml without bridge element
 # cat open1
 <network>
   <name>open</name>
   <forward mode='open'/>
 <ip address='192.168.200.1' netmask='255.255.255.0'/>
 </network>
 # virsh net-define open1
 Network open defined from open1
 # virsh net-dumpxml open
";" <network>
   <name>open</name>
   <uuid>f14099df-89ce-487e-927e-a7a7708329cc</uuid>
   <forward mode='open'/>
    <bridge name='virbr1' stp='on' delay='0'/> 
   <mac address='52:54:00:c7:28:f6'/>
   <ip address='192.168.200.1' netmask='255.255.255.0'>
   </ip>
 </network>
 
 (the bridge element will be generated automatically)";Test Case;RedHatEnterpriseLinux7/RHEL-111124
14;;;;;;;;;2;"2. no mac
 # cat open1
 <network>
   <name>open</name>
   <forward mode='open'/>
  <bridge name=""virbr2"" stp=""on"" delay=""0"" />
  <ip address='192.168.200.1'  netmask='255.255.255.0'/>
 </network>
";"
​​";;RedHatEnterpriseLinux7/RHEL-111124
14;;;;;;;;;3;# virsh net-define open1;Network open defined from open1;;RedHatEnterpriseLinux7/RHEL-111124
14;;;;;;;;;4;# virsh net-dumpxml open;"<network>
   <name>open</name>
   <uuid>606f737a-8cd4-4aa5-a9f0-622e85f80899</uuid>
   <forward mode='open'/>
   <bridge name='virbr2' stp='on' delay='0'/>
   <mac address='52:54:00:b0:01:ce'/>
   <ip address='192.168.200.1' netmask='255.255.255.0'>
   </ip>
 </network>
 
 (the mac address will be added automatically)";;RedHatEnterpriseLinux7/RHEL-111124
15;RHEL-111141;[bridge][iface-bridge/iface-unbridge] Define/Undefine a bridge  via iface-bridge/iface-unbridge with  stp=on;"This case needs a private network， you can test with the interface in vm
 
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;" 1.Check the interface list 
 # virsh iface-list --all
​​";"Output:
   Name                 State      MAC Address
 ---------------------------------------------------
  ens3                 active     52:54:00:12:13:64
  lo                   active     00:00:00:00:00:00
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL-111141
15;;;;;;;;;2;"2.Define the bridge 
 # virsh iface-bridge ens3 br0";"Output:
 Created bridge br0 with attached device ens3
 Bridge interface br0 started";;RedHatEnterpriseLinux7/RHEL-111141
15;;;;;;;;;3;"3. Check the interface list
 # virsh iface-list --all
​​";"Output:
  Name                 State      MAC Address
 ---------------------------------------------------
  br0                  active     52:54:00:12:13:64
  lo                   active     00:00:00:00:00:00";;RedHatEnterpriseLinux7/RHEL-111141
15;;;;;;;;;4;"4.Check the dumpxml of interface
 # virsh iface-dumpxml br0
​​";"Output:
 <interface type='bridge' name='br0'>
   <protocol family='ipv4'>
     <ip address='192.168.122.244' prefix='24'/>
   </protocol>
   <protocol family='ipv6'>
     <ip address='fe80::5054:ff:fe12:1364' prefix='64'/>
   </protocol>
   <bridge>
     <interface type='ethernet' name='ens3'>
       <link speed='100' state='up'/>
       <mac address='52:54:00:12:13:64'/>
     </interface>
   </bridge>
 </interface>";;RedHatEnterpriseLinux7/RHEL-111141
15;;;;;;;;;5;"5. Check the config of interface. 
 # cat /etc/sysconfig/network-scripts/ifcfg-br06.
​​";"Output:
 DEVICE=""br0""
 ONBOOT=""yes""
 TYPE=""Bridge""
 BOOTPROTO=""none""
 IPADDR=""192.168.122.244""
 NETMASK=""255.255.255.0""
 STP=""on""
 DELAY=""0""";;RedHatEnterpriseLinux7/RHEL-111141
15;;;;;;;;;6;"6.  Undefine the bridge
 # virsh iface-unbridge br0
​​";"Output:
 Device ens3 un-attached from bridge br0
 Interface ens3 started";;RedHatEnterpriseLinux7/RHEL-111141
15;;;;;;;;;7;"7. Check the interface list 
 # virsh iface-list --all
​​";"Output:
  Name                 State      MAC Address
 ---------------------------------------------------
  ens3                 active     52:54:00:12:13:64
  lo                   active     00:00:00:00:00:00";;RedHatEnterpriseLinux7/RHEL-111141
16;RHEL-111145;[bridge][iface-bridge/iface-unbridge] Define/Undefine a bridge  via iface-bridge/iface-unbridge  with --delay 5  and stp=on;Define/Undefine a bridge with --delay 5  when stp=on;Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;" 1.Check the interface list
 # virsh iface-list --all";" Output:
   Name                 State      MAC Address
 ---------------------------------------------------
  ens3                 active     52:54:00:12:13:64
  lo                   active     00:00:00:00:00:00";Test Case;RedHatEnterpriseLinux7/RHEL-111145
16;;;;;;;;;2;"2.Define the bridge
 # virsh iface-bridge ens3 br0  --delay 5";"Output:
 Created bridge br0 with attached device ens3
 Bridge interface br0 started
 
 Note： when print : Created bridge br0 with attached device ens3, will wait 5s then print 
 the ""Bridge interface br0 started""
​​";;RedHatEnterpriseLinux7/RHEL-111145
16;;;;;;;;;3;"3. Check the config of bridge 
 # cat /etc/sysconfig/network-scripts/ifcfg-br0
​​";"Output:
 DEVICE=""br0""
 ONBOOT=""yes""
 TYPE=""Bridge""
 BOOTPROTO=""none""
 IPADDR=""192.168.122.244""
 NETMASK=""255.255.255.0""
 STP=""on""
 DELAY=""5""
​​";;RedHatEnterpriseLinux7/RHEL-111145
16;;;;;;;;;4;"4.Check the interface list 
 # virsh iface-list --all
​​";"Output:
  Name                 State      MAC Address
 ---------------------------------------------------
  br0                  active     52:54:00:12:13:64
  lo                   active     00:00:00:00:00:00";;RedHatEnterpriseLinux7/RHEL-111145
16;;;;;;;;;5;"5. Undefine the bridge
 # virsh iface-unbridge  br0
​​";"Output:
 Device ens3 un-attached from bridge br0
 Interface ens3 started";;RedHatEnterpriseLinux7/RHEL-111145
16;;;;;;;;;6;"6. Check the interface list 
 # virsh iface-list --all
​​";"Output:
  Name                 State      MAC Address
 ---------------------------------------------------
  ens3                 active     52:54:00:12:13:64
  lo                   active     00:00:00:00:00:00";;RedHatEnterpriseLinux7/RHEL-111145
17;RHEL-111166;Interface begin-commit -rollback transaction --bug 1364391;"Interface begin-reboot transaction
- Create interface config with iface-begin, modify the interface with iface-edit, 
 commit it. 
Rollback the interface , the previous status before performing iface-begin can not be restored. 
 
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;For begin- commint -rollback transaction:;​​;Test Case;RedHatEnterpriseLinux7/RHEL-111166
17;;;;;;;;;2;"1. Check the interface list 
 #virsh iface-list
​​";"Output:
 Name State MAC Address
 --------------------------------------------
 eth0 active 00:21:9b:7d:d2:b1
 lo active 00:00:00:00:00:00";;RedHatEnterpriseLinux7/RHEL-111166
17;;;;;;;;;3;"2.Check the config of interface 
 # cat /etc/sysconfig/network-scripts/ifcfg-eth0";"Output:
 DEVICE=eth0
 ONBOOT=yes
 BOOTPROTO=dhcp
 HWADDR=""00:21:9b:7d:d2:b1""";;RedHatEnterpriseLinux7/RHEL-111166
17;;;;;;;;;4;"3. Do the begin operation
 #virsh iface-begin
​​";"Output:
 Network config change transaction started";;RedHatEnterpriseLinux7/RHEL-111166
17;;;;;;;;;5;"4.Destroy/undefine the interface eth0
 #virsh iface-destroy eth0
 #virsh iface-undefine eth0";"Output:
 Interface eth0 destroyed
 Interface eth0 undefine";;RedHatEnterpriseLinux7/RHEL-111166
17;;;;;;;;;6;"5. Check the interface list
 # virsh iface-list";"Output:
 Name State MAC Address
 --------------------------------------------
 lo active 00:00:00:00:00:00d";;RedHatEnterpriseLinux7/RHEL-111166
17;;;;;;;;;7;"6. Do the commit operation
 #virsh iface-commit
​​";"Output:
 Network config change transaction committed";;RedHatEnterpriseLinux7/RHEL-111166
17;;;;;;;;;8;"7. Do the rollback operation
 # virsh iface-rollback";"Output:
 error: Failed to rollback network config change transaction
 error: Requested operation is not valid: failed to rollback transaction: Operation invalid in this state - Running '/etc/rc.d/init.d/netcf-transaction change-rollback' operation is invalid in this state";;RedHatEnterpriseLinux7/RHEL-111166
17;;;;;;;;;9;"8.Check the interface list 
 # virsh iface-list
​​";"Output:
 Name State MAC Address
 --------------------------------------------
 lo active 00:00:00:0
 
 interface change commit, and can't rollback";;RedHatEnterpriseLinux7/RHEL-111166
18;RHEL-111167;Interface begin-reboot   transaction --bug 1364391;"Interface begin-reboot transaction
- Create interface config with iface-begin, modify the interface with iface-edit, but do not commit it. 
Reboot the host. 
After the host has rebooted, the previous status before performing iface-begin can be restored.   
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;"1.Check the interface list 
 #virsh iface-list
​​";"Output:
 Name State MAC Address
 --------------------------------------------
 eth0 active 00:21:9b:7d:d2:b1
 lo active 00:00:00:00:00:00";Test Case;RedHatEnterpriseLinux7/RHEL-111167
18;;;;;;;;;2;"2.Check the config of interface 
 # cat /etc/sysconfig/network-scripts/ifcfg-eth0
​​";"Output:
 DEVICE=eth0
 ONBOOT=yes
 BOOTPROTO=dhcp
 HWADDR=""00:21:9b:7d:d2:b1""";;RedHatEnterpriseLinux7/RHEL-111167
18;;;;;;;;;3;"3.Do the begin operation
 #virsh iface-begin
​​";"Output:
 Network config change transaction started";;RedHatEnterpriseLinux7/RHEL-111167
18;;;;;;;;;4;"4.Destroy/undefine the interface eth0
 #virsh iface-destroy eth0
 #virsh iface-undefine eth0
​​";"Output:
 Interface eth0 destroyed
 Interface eth0 undefine";;RedHatEnterpriseLinux7/RHEL-111167
18;;;;;;;;;5;"5. Check the interface list 
 # virsh iface-list
​​";"Output:
 Name State MAC Address
 --------------------------------------------
 lo active 00:00:00:00:00:00d";;RedHatEnterpriseLinux7/RHEL-111167
18;;;;;;;;;6;"6. Reboot the machine
 # reboot
​​";​​;;RedHatEnterpriseLinux7/RHEL-111167
18;;;;;;;;;7;"7. Check the interface list
 #virsh iface-list
​​";"Output:
 Name State MAC Address
 --------------------------------------------
 eth0 inactive 00:21:9b:7d:d2:b1  <== change the state to inactive for bug 1364391
 lo active 00:00:00:00:00:00";;RedHatEnterpriseLinux7/RHEL-111167
18;;;;;;;;;8;"8.Check the config of interface
 # cat /etc/sysconfig/network-scripts/ifcfg-eth0
​​";"Output:
 DEVICE=eth0
 ONBOOT=yes
 BOOTPROTO=dhcp
 HWADDR=""00:21:9b:7d:d2:b1""";;RedHatEnterpriseLinux7/RHEL-111167
19;RHEL-111168;Interface begin-commit -reboot  transaction --bug 1364391;"Interface begin-commit -reboot  transaction 
- Create interface config with iface-begin, modify the interface with iface-edit, 
 commit it. 
Reboot , the previous status before performing iface-begin can not be restored.
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;"For begin- commint -reboot  transaction: 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-111168
19;;;;;;;;;2;"1. Check the interface list
 #virsh iface-list";"Output:
 Name State MAC Address
 --------------------------------------------
 eth0 active 00:21:9b:7d:d2:b1
 lo active 00:00:00:00:00:00";;RedHatEnterpriseLinux7/RHEL-111168
19;;;;;;;;;3;"2.Check the config of interface
 # cat /etc/sysconfig/network-scripts/ifcfg-eth0";"Output:
 DEVICE=eth0
 ONBOOT=yes
 BOOTPROTO=dhcp
 HWADDR=""00:21:9b:7d:d2:b1""";;RedHatEnterpriseLinux7/RHEL-111168
19;;;;;;;;;4;"3.Do the begin operation
 #virsh iface-begin";"Output:
 Network config change transaction started";;RedHatEnterpriseLinux7/RHEL-111168
19;;;;;;;;;5;"4.Destroy/undefine the interface eth0
 #virsh iface-destroy eth0
 #virsh iface-undefine eth0";"Output:
 Interface eth0 destroyed
 Interface eth0 undefine";;RedHatEnterpriseLinux7/RHEL-111168
19;;;;;;;;;6;"5. Check the interface list
 # virsh iface-list";"Output:
 Name State MAC Address
 --------------------------------------------
 lo active 00:00:00:00:00:00d";;RedHatEnterpriseLinux7/RHEL-111168
19;;;;;;;;;7;"Commit the change:
 # virsh iface-commit
​​";"Output:
 Network config change transaction commited
​​";;RedHatEnterpriseLinux7/RHEL-111168
19;;;;;;;;;8;"6.Reboot the system
 # reboot
​​";​​;;RedHatEnterpriseLinux7/RHEL-111168
19;;;;;;;;;9;"7.Check the interface list
 # virsh iface-list";"Output:
 Name State MAC Address
 --------------------------------------------
 lo active 00:00:00:00:00:00d";;RedHatEnterpriseLinux7/RHEL-111168
20;RHEL-111404;Attach / detach direct type interface with VF passthrough mode;"Attach/detach  the macvtap interface  to guest 
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;"1.Check the device list  to get 1 VF's name
  # ip l 
 18: enp134s16f3: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000
     link/ether e2:97:eb:3f:ed:18 brd ff:ff:ff:ff:ff:ff
 19: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 52:54:00:3b:3e:02, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off";" 
​​";Test Case;RedHatEnterpriseLinux7/RHEL-111404
20;;;;;;;;;2;"2.  Prepare the xml info 
 <interface type='direct'>
 <mac address='7a:3d:d6:18:19:76'/>
 <source dev='enp3s16f5' mode='passthrough'/>
 </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL-111404
20;;;;;;;;;3;"3. Attach the interface to guest
 #  virsh attach-device vm1  interface.xml
​​";"Output:
 Device attached successfully";;RedHatEnterpriseLinux7/RHEL-111404
20;;;;;;;;;4;"4. Check the interface xml of guest 
 # virsh dumpxml rhel7 | grep interface -A6
 
 
​​";"Output:
     <interface type='network'>
       <mac address='52:54:00:12:13:64'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL-111404
20;;;;;;;;;5;"5. Login in the guest and check the device
 # lspci
​​";"Output:
 00:01.3 Bridge: Intel Corporation 82371AB/EB/MB PIIX4 ACPI (rev 03)
​​";;RedHatEnterpriseLinux7/RHEL-111404
20;;;;;;;;;6;"login guest and check it can get ip adress and have access to outside (only when the PF have link)
 # ping www.baidu.com";​​;;RedHatEnterpriseLinux7/RHEL-111404
20;;;;;;;;;7;"6. Prepare the device xml as below and detach the device
 # cat macvtap.xml 
    <interface type='network'>
       <mac address='52:54:00:12:13:64'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh detach-device rhel7 macvtap.xml
​​";"Output:
 Device detached successfully
 
​​";;RedHatEnterpriseLinux7/RHEL-111404
20;;;;;;;;;8;"7. Check the interface xml of guest
 # virsh dumpxml rhel7 | grep interface -A6";"Output:  nothing
 #
​​";;RedHatEnterpriseLinux7/RHEL-111404
20;;;;;;;;;9;"8. Login the guest and check the device
 # lspci
​​";"Output:  nothing
 #";;RedHatEnterpriseLinux7/RHEL-111404
21;RHEL-111502;[virtual desktop]some video device can set default display resolution;Some devices like qxl-vga and virtio-vga now support set default resolution;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;"Boot guest with virtio-vga device and set default display resolution:
 /usr/libexec/qemu-kvm -name virtio-vga -m 2G -machine pc,accel=kvm \
         -cpu Skylake-Client,enforce \
         -smp 4 \
         -serial unix:/tmp/console1,server,nowait \
         -monitor stdio \
         -device virtio-vga,id=vga1,yres=1080,xres=1920 \
         -drive file=rhel75-64-virtio.qcow2,if=none,id=drive-scsi-disk0,format=qcow2,cache=none,werror=stop,rer
 ror=stop -device virtio-scsi-pci,id=scsi0,addr=04 -device scsi-hd,drive=drive-scsi-disk0,bus=scsi0.0,scsi-id=0
 ,lun=0,id=scsi-disk0,bootindex=1 \
         -netdev tap,id=idinWyYp,vhost=on -device virtio-net-pci,mac=42:ce:a9:d2:4d:d8,id=idlbq7eA,netdev=idinW
 yYp \
         -vnc :0 \";Guest can boot without error. No calltrace happen in guest dmesg. Default guest resolution may change to 1920x1080 or no changes, this depend on guest driver;Test Case;RedHatEnterpriseLinux7/RHEL-111502
21;;;;;;;;;2;Switch to spice display and retest step 1;​​;;RedHatEnterpriseLinux7/RHEL-111502
21;;;;;;;;;3;Switch virtio-vga to qxl-vga and retest step 1-2;​​;;RedHatEnterpriseLinux7/RHEL-111502
22;RHEL-112120;[Hyper-V][hyperv-daemons]Checked the selinux rules for all the hyperv-daemons;Checked the selinux rules for all the hyperv-daemons;Yaju Cao (yacao);High;Positive;Automated;467887;1;"1. Execute command ""systemctl | grep hyperv""";"check the result with the command below after finishing all cases about
 hyperv-deamons:

 ausearch -m avc | grep -i hypervkvpd
 ausearch -m avc | grep -i hypervkfcopyd
 ausearch -m avc | grep -i hypervvssd
 ausearch -m user_avc | grep -i hypervkvpd
 ausearch -m user_avc | grep -i hypervkfcopyd
 ausearch -m user_avc | grep -i hypervvssd

 the results are nulll.
";Test Case;RedHatEnterpriseLinux7/RHEL-112120
22;;;;;;;;;2;"2. make sure the guest is running by enforcing,
 #getenforce
 Enforcing";​​;;RedHatEnterpriseLinux7/RHEL-112120
22;;;;;;;;;3;3. make sure the selinux of hyperv daemons service has been allowed.;​​;;RedHatEnterpriseLinux7/RHEL-112120
23;RHEL-112122;[Hyper-V][SR-IOV][Intel 10G]Verify the bonding network support arbitrary MTU size (MTU > 1500) (2016 ONLY);Verify the bonding network support arbitrary MTU size (MTU > 1500) (2016 ONLY);Yaju Cao (yacao);High;Positive;Not Automated;467656;1;"Follow How to configure SR-IOV with Hyper-V to setup two VMs with SR-IOV capable NIC.
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-112122
23;;;;;;;;;2;"Please change the eth0 (bonding interface) IP address to what you prefered. In this case, VM1' IP address is set to 192.168.99.101, and VM2's IP address is set to 192.168.99.102.
";"# ifcfg-eth0
 DEVICE=eth0
 TYPE=Ethernet
 BOOTPROTO=static
 ONBOOT=yes
 NM_CONTROLLED=no
 PEERDNS=yes
 IPV6INIT=yes
 IPADDR=192.168.99.101
 NETMASK=255.255.255.0";;RedHatEnterpriseLinux7/RHEL-112122
23;;;;;;;;;3;"Modify the MTU value of the VM A and VM B, set MTU as larger than 1500, the maximum value is 65520
 For example, change it to 9000
 Add ""MTU=9000"" into /etc/sysconfig/network-scripts/ifcfg-eth0
​​";"# ifcfg-eth0
 DEVICE=eth0
 TYPE=Ethernet
 BOOTPROTO=static
 ONBOOT=yes
 NM_CONTROLLED=no
 PEERDNS=yes
 IPV6INIT=yes
 IPADDR=192.168.99.101
 NETMASK=255.255.255.0
 MTU=9000";;RedHatEnterpriseLinux7/RHEL-112122
23;;;;;;;;;4;Reboot two VMs;​​;;RedHatEnterpriseLinux7/RHEL-112122
23;;;;;;;;;5;"Check the MTU value on VM A and VM B via ""ip address"".";MTU is changed to the set value;;RedHatEnterpriseLinux7/RHEL-112122
23;;;;;;;;;6;"Ping the VM B from VM A. Note: the -s value is equal to MTU-28
 # ping -s 8972 ${eth0 ip address of VM B} -M do";"Successfully ping the other VM.
​​";;RedHatEnterpriseLinux7/RHEL-112122
23;;;;;;;;;7;"In VM B , capture the packets, check if it is fragmented.
 #tcpdump -n -v -i eth0";"Check the packet is not fragmented, it should be like below:
 17:28:49.643736 IP (tos 0x0, ttl 64, id 0, offset 0, flags [Hyper-V][DF], proto ICMP (1), length 9000)
 VM A > VM B: ICMP echo request, id 10875, seq 5862, length 8980
 17:28:49.643767 IP (tos 0x0, ttl 64, id 24242, offset 0, flags [Hyper-V][none], proto ICMP (1), length 9000)
 VM B > VM A: ICMP echo reply, id 10875, seq 5862, length 8980";;RedHatEnterpriseLinux7/RHEL-112122
24;RHEL-112123;[Hyper-V][SR-IOV][Intel 10G]Verify the bonding network support arbitrary MTU size (MTU < 1500) (2016 ONLY);"Verify the bonding network support arbitrary MTU size (MTU < 1500) (2016 ONLY)
";Yaju Cao (yacao);High;Positive;Not Automated;467656;1;"Follow How to configure SR-IOV with Hyper-V to setup two VMs with SR-IOV capable NIC.
";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-112123
24;;;;;;;;;2;Please change the eth0 (bonding interface) IP address to what you prefered. In this case, VM1' IP address is set to 192.168.99.101, and VM2's IP address is set to 192.168.99.102.;"# ifcfg-eth0
 DEVICE=eth0
 TYPE=Ethernet
 BOOTPROTO=static
 ONBOOT=yes
 NM_CONTROLLED=no
 PEERDNS=yes
 IPV6INIT=yes
 IPADDR=192.168.99.101
 NETMASK=255.255.255.0";;RedHatEnterpriseLinux7/RHEL-112123
24;;;;;;;;;3;"Modify the MTU value of the VM A and VM B, set MTU smaller than 1500
 For example, change it to 100
 Add ""MTU=100"" into /etc/sysconfig/network-scripts/ifcfg-eth0
​​";"# ifcfg-eth0
 DEVICE=eth0
 TYPE=Ethernet
 BOOTPROTO=static
 ONBOOT=yes
 NM_CONTROLLED=no
 PEERDNS=yes
 IPV6INIT=yes
 IPADDR=192.168.99.101
 NETMASK=255.255.255.0
 MTU=100";;RedHatEnterpriseLinux7/RHEL-112123
24;;;;;;;;;4;Reboot two VMs;"
​​";;RedHatEnterpriseLinux7/RHEL-112123
24;;;;;;;;;5;"Check the MTU value on VM A and VM B via ""ip address"".";MTU is changed to the set value;;RedHatEnterpriseLinux7/RHEL-112123
24;;;;;;;;;6;# ping -s 1600 -M do -I eth0 -c 2 <eth0 ip address of VM B>;"ping: local error: Message too long, mtu=100
 ping: local error: Message too long, mtu=100";;RedHatEnterpriseLinux7/RHEL-112123
24;;;;;;;;;7;"Ping the VM B from VM A. Note: the -s value is equal to MTU-28
 # ping -s 72 <bond0 ip address of VM B> -M do";"Successfully ping the other VM.
​​";;RedHatEnterpriseLinux7/RHEL-112123
24;;;;;;;;;8;"In VM B , capture the packets, check if it is fragmented.
 #tcpdump -n -v -i eth0";"Check the packet is not fragmented, it should be like below:
 17:28:49.643736 IP (tos 0x0, ttl 64, id 0, offset 0, flags [Hyper-V][DF], proto ICMP (1), length 100)
 VM A > VM B: ICMP echo request, id 10875, seq 5862, length 80
 17:28:49.643767 IP (tos 0x0, ttl 64, id 24242, offset 0, flags [Hyper-V][none], proto ICMP (1), length 100)
 VM B > VM A: ICMP echo reply, id 10875, seq 5862, length 80";;RedHatEnterpriseLinux7/RHEL-112123
25;RHEL-112124;[Hyper-V][SR-IOV][Intel 10G]Verify the bonding interface in access mode (2016 ONLY);Verify the bonding interface in access mode (2016 ONLY);Yaju Cao (yacao);High;Positive;Not Automated;467656;1;"Follow How to configure SR-IOV with Hyper-V to setup two VMs with SR-IOV capable NIC.
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-112124
25;;;;;;;;;2;Please change the eth0 (bonding interface) IP address to what you prefered. In this case, VM1' IP address is set to 192.168.99.101, and VM2's IP address is set to 192.168.99.102.;"# ifcfg-eth0
 DEVICE=eth0
 TYPE=Ethernet
 BOOTPROTO=static
 ONBOOT=yes
 NM_CONTROLLED=no
 PEERDNS=yes
 IPV6INIT=yes
 IPADDR=192.168.99.101
 NETMASK=255.255.255.0";;RedHatEnterpriseLinux7/RHEL-112124
25;;;;;;;;;3;Reboot two VMs;​​;;RedHatEnterpriseLinux7/RHEL-112124
25;;;;;;;;;4;"Ping the VM B from VM A.
 # ping 192.168.99.101";"Successfully ping VM A.
​​";;RedHatEnterpriseLinux7/RHEL-112124
25;;;;;;;;;5;"Change VM A's network adapter setting to make it into VLAN 10.
 Network Adapter -> VLAN ID -> checking ""Enable virtual LAN identification"" -> entering ""10"" in blank box under ""The VLAN identifier specifies the virutal LAN that this virtual machine will use for all network communications through this network adapter""";The ping output stopped and ping packet lost.;;RedHatEnterpriseLinux7/RHEL-112124
25;;;;;;;;;6;"Change VM B's network adapter setting to make it into VLAN 10.
 Network Adapter -> VLAN ID -> checking ""Enable virtual LAN identification"" -> entering ""10"" in blank box under ""The VLAN identifier specifies the virutal LAN that this virtual machine will use for all network communications through this network adapter""";"The ping output restarted and no ping packet lost.


";;RedHatEnterpriseLinux7/RHEL-112124
26;RHEL-112125;[Hyper-V][SR-IOV][Intel 10G]Change MTU and Channel multi-times for a SR-IOV enabled interface (2016 ONLY);Change MTU and Channel multi-times for a SR-IOV enabled interface (2016 ONLY);Yaju Cao (yacao);High;Positive;Not Automated;;1;Follow How to configure SR-IOV with Hyper-V to setup a VM with SR-IOV capable NIC.;A VM with SR-IOV capable NIC installed.;Test Case;RedHatEnterpriseLinux7/RHEL-112125
26;;;;;;;;;2;Login VM and make sure that there's a VF interface.;"Like interface enP42097p0s2
​​";;RedHatEnterpriseLinux7/RHEL-112125
26;;;;;;;;;3;"Run the following two shell scripts for one hour:
 # cat setchannels.sh
 while true; do ethtool -L eth0 combined 4; ethtool -L eth0 combined 8; done
 # cat mtutest.sh
 while true; do ip link set dev eth0 mtu 2600; ip link set dev eth0 mtu 1500; done";"There should be no cal trace from dmesg output.
​​";;RedHatEnterpriseLinux7/RHEL-112125
27;RHEL-112126;[Hyper-V][SR-IOV][Intel 10G]Boot with SR-IOV enabled and disable SR-IOV in runtime (2016 ONLY);Boot with SR-IOV enabled and disable SR-IOV in runtime (2016 ONLY);Yaju Cao (yacao);High;Positive;Not Automated;;1; Follow How to configure SR-IOV with Hyper-V to setup a VM with SR-IOV capable NIC.; A VM with SR-IOV capable NIC.;Test Case;RedHatEnterpriseLinux7/RHEL-112126
27;;;;;;;;;2;"Boot VM.
​​";"Run command ""dmesg | grep ixgbevf"", and you'll find a line of output, which includes ""Intel(R) 10 Gigabit PCI Express Virtual Function Network Dirver""
 Run command ""lsmod | grep ixgbevf"", there should have this module loaded.
 Ping a host connected with this VM, no packet loss.";;RedHatEnterpriseLinux7/RHEL-112126
27;;;;;;;;;3;"From Hyper-V Manager UI, go to VM setting UI. Find SR-IOV capable network adapter, go to Hardware Acceleration section, unselect the ""Enable SR-IOV"" check box. 
 
 Note: 
 When enable SR-IOV, there will be 2 network adapters, both of eth0 and enP3p0s2 are UP. 
 When disable SR-IOV, it will remove enP3p0s2 adapter.
​​";"There should not have been any crash happened at VM, and data path should switch back to netvsc adapter (no SR-IOV capable).
 Check points:
 
* Run command ""dmesg | grep ixgbevf"", there should be a output like ""Adapter removed"".
* Run command ""dmesg | grep hv_netvsc"", there should be some lines of output:
  * VF down
  * Data path switched from VF
  * VF unregistering
* Ping a host connected with this VM, no packet loss.
";;RedHatEnterpriseLinux7/RHEL-112126
28;RHEL-112127;[Hyper-V][SR-IOV][Intel 10G]Boot with SR-IOV disabled and enable SR-IOV in runtime (2016 ONLY);Boot with SR-IOV disabled and enable SR-IOV in runtime (2016 ONLY);Yaju Cao (yacao);High;Positive;Not Automated;;1;"Follow How to configure SR-IOV with Hyper-V to setup a VM with SR-IOV capable NIC except unselect ""Enable SR-IOV"" check box under Hardware Acceleration section.";A VM with SR-IOV capable, but with SR-IOV disabled. ;Test Case;RedHatEnterpriseLinux7/RHEL-112127
28;;;;;;;;;2;"Boot VM, check VF module and NIC interface status.
 For Intel 10G NIC, its VF driver is module 'ixgbevf'";"Run command ""dmesg | grep ixgbevf"", there's nothing got output.
 Run command ""lsmod | grep ixgbevf"" there's no this module loaded.
 NIC should show use hv_netvsc module
 Ping a host connected with this VM, no packet loss.";;RedHatEnterpriseLinux7/RHEL-112127
28;;;;;;;;;3;"From Hyper-V Manager UI, go to VM setting UI. Find SR-IOV capable network adapter, go to Hardware Acceleration section, select the ""Enable SR-IOV"" check box.";"There should not have been any crash happened at VM, and data path should switch to VF (SR-IOV capable).
 Check points:
 
* Run command ""dmesg | grep ixgbevf"", there should be a output like ""Intel(R) 10 Gigabit PCI Express Virtual Function Network Dirver"".
* Run command ""lsmod | grep ixgbevf"", there should have this module loaded.
* Run command ""dmesg | grep hv_netvsc"", there should some lines of output like:
  * VF registering
  * Data path switched to VF
";;RedHatEnterpriseLinux7/RHEL-112127
28;;;;;;;;;4;Up the VF NIC interface and run Ping test;Ping a host connected with this VM, no packet loss.;;RedHatEnterpriseLinux7/RHEL-112127
29;RHEL-112129;[Hyper-V][SR-IOV][Reliability][Intel 10G]Enable and disable SR-IOV multiple times on SR-IOV capable adapter (2016 ONLY);When guest is running,  configure a SR-IOV network adapter on the guest, and keep enable/disable SR-IOV function multiple times. After complete, verify guest network and SR-IOV could still work well;Yaju Cao (yacao);High;Positive;Not Automated;;1;Follow How to configure SR-IOV with Hyper-V to setup a VM with SR-IOV capable NIC.; A VM with SR-IOV capable NIC installed.;Test Case;RedHatEnterpriseLinux7/RHEL-112129
29;;;;;;;;;2;"Download ""loopIov.ps1"" from Attachments to host which hosts the VM created in the first stop.";​​;;RedHatEnterpriseLinux7/RHEL-112129
29;;;;;;;;;3;Change the $vmName and $loopTimes to your favorite.;​​;;RedHatEnterpriseLinux7/RHEL-112129
29;;;;;;;;;4;Run this script.;No crash happened during the script running;;RedHatEnterpriseLinux7/RHEL-112129
30;RHEL-112130;[Hyper-V][SR-IOV][Performance][Intel 10G]Test 10G network IPv6 throughput (2016 ONLY);Test 10G network IPv6 throughput (2016 ONLY);Yaju Cao (yacao);Medium;Positive;Manual Only;;1;Follow How to configure SR-IOV with Hyper-V to setup two VMs with SR-IOV capable NIC at two hosts.;Two VMs with SR-IOV capable NIC at two hosts.;Test Case;RedHatEnterpriseLinux7/RHEL-112130
30;;;;;;;;;2;On two VMs, set the vCPU as 8 processors, Memory at least 2G.;​​;;RedHatEnterpriseLinux7/RHEL-112130
30;;;;;;;;;3;"Set eth0 (bonding interface) static IPv6 address, such as FD00::1/64
 ifcfg-eth0:
 =================================
 Name=eth0
 DEVICE=eth0
 ONBOOT=yes
 NETBOOT=yes
 IPV6INIT=yes
 BOOTPROTO=static
 TYPE=Ethernet
 PREFIX=24
 IPV6ADDR= FD00::1/64
 ==================================
  
 the other host ip set as FD00::2/64
 
 You can setup multiple network adapters at the same time,if cannot connect to network, please check followings
 
* Configuration file has DEVICE, and DEVICE name is correct.
* Use following commands to make interface eth0 up.
# systemctl stop NetworkManager
 # systemctl stop network
 # systemctl start network
 # ifdown eth0
 # ifup eth0
 # ip addr

 if still cannot connect, please check the firewall status.
 # systemctl stop firewalld.service";​​;;RedHatEnterpriseLinux7/RHEL-112130
30;;;;;;;;;4;Install iperf3 on both VMs;​​;;RedHatEnterpriseLinux7/RHEL-112130
30;;;;;;;;;5;"On one of VM side, run ""iperf3 -s"" as server";​​;;RedHatEnterpriseLinux7/RHEL-112130
30;;;;;;;;;6;"On the other VM side, known as Client side run the following command:
 # for f in `seq 1 10`; do iperf3 -t 30 -Z -P16 -c {iperf3 server IP} -w16M -O10 | grep SUM | grep sender; sleep 10; done

 Note: for ipv6 bonding not support, https://access.redhat.com/solutions/2204901 ";Record the throughput result, it should be about 8~9 Gbps.;;RedHatEnterpriseLinux7/RHEL-112130
31;RHEL-112131;[Hyper-V][SR-IOV][Performance][Intel 10G]Test 10G network IPv4 throughput (2016 ONLY);Test 10G network IPv4 throughput (2016 ONLY);Yaju Cao (yacao);Medium;Positive;Manual Only;;1;"Follow How to configure SR-IOV with Hyper-V to setup two VMs with SR-IOV capable NIC at two hosts.
 ";Two VMs with SR-IOV capable NIC at two hosts.;Test Case;RedHatEnterpriseLinux7/RHEL-112131
31;;;;;;;;;2;On two VMs, set the vCPU as 8 processors, Memory at least 2G.;​​;;RedHatEnterpriseLinux7/RHEL-112131
31;;;;;;;;;3;"Set the eth0 (bonding interface) with static IPv4 address, such as 192.1.1.1/24
 
 ifcfg-eth0
 =================================
 Name=eth0
 DEVICE=eth0
 ONBOOT=yes
 NETBOOT=yes
 IPV6INIT=yes
 BOOTPROTO=static
 TYPE=Ethernet
 IPADDR=192.168.1.1
 NETMASK=255.255.255.0
 ================================
 the other host ip is IPADDR=192.168.1.2
 
 if cannot connect to network, please check followings:
 
* config file has DEVICE, and DEVICE name is correct.
* Use following commands to make interface eth0 up.
# systemctl stop NetworkManager
 # systemctl stop network
 # systemctl start network
 # ifdown eth0
 # ifup eth0
 # ip addr

 if still cannot connect, please check the firewall status.
 # systemctl stop firewalld.service";​​;;RedHatEnterpriseLinux7/RHEL-112131
31;;;;;;;;;4;Install iperf3 on both VMs;​​;;RedHatEnterpriseLinux7/RHEL-112131
31;;;;;;;;;5;"On one of VM side, run ""iperf3 -s"" as server";​​;;RedHatEnterpriseLinux7/RHEL-112131
31;;;;;;;;;6;"On the other VM side, known as Client side run the following command:
 # for f in `seq 1 10`; do iperf3 -t 30 -Z -P16 -c {iperf3 server IP} -w16M -O10 | grep SUM | grep sender; sleep 10; done";Record the throughput result, it should be about 8~9 Gbps.;;RedHatEnterpriseLinux7/RHEL-112131
32;RHEL-112132;[Hyper-V][SR-IOV][Migration][Intel 10G]Live migration to host without SR-IOV supported (2016 ONLY);Live migration to host without SR-IOV supported (2016 ONLY);Yaju Cao (yacao);Medium;Positive;Manual Only;;1; Follow How to configure SR-IOV with Hyper-V to setup a VM with SR-IOV capable NIC.;​​;Test Case;RedHatEnterpriseLinux7/RHEL-112132
32;;;;;;;;;2;Login VM and make sure that there's a VF interface.;"Like interface enP3p0s2. Call it VM1
";;RedHatEnterpriseLinux7/RHEL-112132
32;;;;;;;;;3;"Setup another VM in destination host, which is the host the VM will be migrated to.
​​";"Let's call it VM2
​​";;RedHatEnterpriseLinux7/RHEL-112132
32;;;;;;;;;4;"Make sure VM2 does not have SR-IOV support.
​​";​​;;RedHatEnterpriseLinux7/RHEL-112132
32;;;;;;;;;5;Please change the eth0 (bonding interface) IP address to what you prefered. In this case, VM1' IP address is set to 192.168.99.101, and VM2's IP address is set to 192.168.99.102.;"# ifcfg-eth0
 DEVICE=eth0
 TYPE=Ethernet
 BOOTPROTO=static
 ONBOOT=yes
 NM_CONTROLLED=no
 PEERDNS=yes
 IPV6INIT=yes
 IPADDR=192.168.99.101
 NETMASK=255.255.255.0";;RedHatEnterpriseLinux7/RHEL-112132
32;;;;;;;;;6;Reboot VM;​​;;RedHatEnterpriseLinux7/RHEL-112132
32;;;;;;;;;7;Make sure the destination host has SR-IOV disabled switch with the same name as source host SR-IOV switch;​​;;RedHatEnterpriseLinux7/RHEL-112132
32;;;;;;;;;8;Ping VM2 from VM1;Successful ping.;;RedHatEnterpriseLinux7/RHEL-112132
32;;;;;;;;;9;"Enable LIve Migration on destination host.
 Hyper-V Settings -> Live Migrations -> checking ""Enable incoming and outgoing live migrations"" check box
 Hyper-V Settings -> Live Migrations -> select ""Use any available network for live migration""";​​;;RedHatEnterpriseLinux7/RHEL-112132
32;;;;;;;;;10;Login into host which served VM just configured above.;​​;;RedHatEnterpriseLinux7/RHEL-112132
32;;;;;;;;;11;"PS C:> Move-VM <VM Name> <destination host name> -IncludeStorage -DestinationStoragePath <path to storage the migrated VM>

 For example:
 Move-VM rhel7.3-g2-0729 2016P5-196-220 -IncludeStorage -DestinationStoragePath c:\users\vdcadmin\Documents\";"The VM migrated to destination host without error or crash
 Stop ping in VM1, the ping result should be 100% success, no package loss.";;RedHatEnterpriseLinux7/RHEL-112132
33;RHEL-112133;[Hyper-V][SR-IOV][Migration][Intel 10G]Live migration to host with SR-IOV supported (2016 ONLY);Live migration with SR-IOV support.;Yaju Cao (yacao);Medium;Positive;Manual Only;;1;Follow How to configure SR-IOV with Hyper-V to setup a VM with SR-IOV capable NIC.;A VM with SR-IOV capable NIC installed.;Test Case;RedHatEnterpriseLinux7/RHEL-112133
33;;;;;;;;;2;Login VM and make sure that there's a VF interface.;Like interface enP3p0s2;;RedHatEnterpriseLinux7/RHEL-112133
33;;;;;;;;;3;Please change the eth0 (bonding interface) IP address to what you prefered. In this case, VM1' IP address is set to 192.168.99.101, and VM2's IP address is set to 192.168.99.102.;"# ifcfg-eth0
 DEVICE=eth0
 TYPE=Ethernet
 BOOTPROTO=static
 ONBOOT=yes
 NM_CONTROLLED=no
 PEERDNS=yes
 IPV6INIT=yes
 IPADDR=192.168.99.101
 NETMASK=255.255.255.0";;RedHatEnterpriseLinux7/RHEL-112133
33;;;;;;;;;4;Reboot VM;​​;;RedHatEnterpriseLinux7/RHEL-112133
33;;;;;;;;;5;"Make sure the destination host has SR-IOV enabled switch with the same name as source host SR-IOV switch
​​";​​;;RedHatEnterpriseLinux7/RHEL-112133
33;;;;;;;;;6;"Ping VM2 from VM1
​​";"Successful ping.
​​";;RedHatEnterpriseLinux7/RHEL-112133
33;;;;;;;;;7;"Enable LIve Migration on destination host.
 Hyper-V Settings -> Live Migrations -> checking ""Enable incoming and outgoing live migrations"" check box
 Hyper-V Settings -> Live Migrations -> select ""Use any available network for live migration""";​​;;RedHatEnterpriseLinux7/RHEL-112133
33;;;;;;;;;8;Login into host which served VM just configured above.;​​;;RedHatEnterpriseLinux7/RHEL-112133
33;;;;;;;;;9;"PS C:> Move-VM <VM Name> <destination host name> -IncludeStorage -DestinationStoragePath <path to storage the migrated VM>
 
 For example:
 Move-VM rhel7.3-g2-0729 2016P5-196-220 -IncludeStorage -DestinationStoragePath c:\users\vdcadmin\Documents\";"The VM migrated to destination host without error or crash
 Stop ping in VM1, the ping result should be 100% success, no package loss.";;RedHatEnterpriseLinux7/RHEL-112133
34;RHEL-112418;[guest agent][domtime][--now] Set domain's system UTC time to host UTC time via guest agent;"Verify set and get domain's system time via guest agent can be done successfully.
";Fangge Jin (fjin);High;Positive;Automated;;1;"start the guest
 # virsh start rhel7
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-112418
34;;;;;;;;;2;"Make sure qemu guest agent is running in guest.
 # systemctl status qemu-guest-agent ";​​;;RedHatEnterpriseLinux7/RHEL-112418
34;;;;;;;;;3;"sync the guest time with the host
 # virsh domtime rhel7 --now
 
 # echo $?
 0
 
​​";"The guest and host should have the same system time
​​";;RedHatEnterpriseLinux7/RHEL-112418
34;;;;;;;;;4;"# virsh domtime rhel7 --pretty
 Time: 2014-10-31 03:24:08
 
 # date -u
 Fri Oct 31 11:24:09 CST 2014";​​;;RedHatEnterpriseLinux7/RHEL-112418
35;RHEL-112419;[guest agent][domtime][--now] Set domain's system UTC time to host UTC time via guest agent after domain suspend&resume;"Verify set and get domain's system time via guest agent can be done successfully.
";Fangge Jin (fjin);High;Positive;Automated;;1;"start the guest
 # virsh start rhel7
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-112419
35;;;;;;;;;2;"Make sure qemu guest agent is running in guest.
 # systemctl status qemu-guest-agent ";​​;;RedHatEnterpriseLinux7/RHEL-112419
35;;;;;;;;;3;"suspend the guest
 #virsh suspend rhel7";​​;;RedHatEnterpriseLinux7/RHEL-112419
35;;;;;;;;;4;"wait 1minute, resume the guest and check the guest time
 #virsh resume rhel7
 
 #virsh domtime rhel7 --pretty
 Time: 2014-10-31 03:30:39
 
 #date -u
 Fri Oct 31 03:31:43 UTC 2014";"4.The guest's time will almost later 1minutes than the host
 
​​";;RedHatEnterpriseLinux7/RHEL-112419
35;;;;;;;;;5;"sync the guest time with host
 #virsh domtime rhel7 --now";​​;;RedHatEnterpriseLinux7/RHEL-112419
35;;;;;;;;;6;"# virsh domtime rhel7 --pretty
 Time: 2014-10-31 03:35:01
 
 # date -u
 Fri Oct 31 03:35:04 UTC 2014";After sync the guest time with the host, they should have almost the same time;;RedHatEnterpriseLinux7/RHEL-112419
36;RHEL-112420;[guest agent][domtime][--now] Set domain's system UTC time to host UTC time via guest agent after domain managedsave&start;"Verify set and get domain's system time via guest agent can be done successfully.
";Fangge Jin (fjin);High;Positive;Automated;;1;"start the guest
 # virsh start rhel7
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-112420
36;;;;;;;;;2;"Make sure qemu guest agent is running in guest.
 # systemctl status qemu-guest-agent ";​​;;RedHatEnterpriseLinux7/RHEL-112420
36;;;;;;;;;3;"Do managedsave for the guest wait 1 minutes and restore the guest
 #virsh managedsave rhel7
 
 #virsh start rhel7
 
​​";​​;;RedHatEnterpriseLinux7/RHEL-112420
36;;;;;;;;;4;"sync the guest time with host
 #virsh domtime rhel7 --now
 
 #virsh domtime rhel7 --pretty
 
 #date -u";After sync the guest time with the host, they should have almost the same time;;RedHatEnterpriseLinux7/RHEL-112420
37;RHEL-112421;[guest agent][domtime][--sync] Set domain's system UTC time to domain's RTC time via guest agent;"Verify set and get domain's system time via guest agent can be done successfully. 
Bug 1183874 - Windows guest(win7/win2012) guest time not sync immediately after execute "" virsh domtime $name --sync""";Fangge Jin (fjin);High;Positive;Automated;;1;"start the guest
 # virsh start rhel7
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-112421
37;;;;;;;;;2;"Make sure qemu guest agent is running in guest.
 # systemctl status qemu-guest-agent ";​​;;RedHatEnterpriseLinux7/RHEL-112421
37;;;;;;;;;3;"Set guest system time which is same as the hardware time.
 For RHEL guest:
 guest# date -s ""2007-08-03 14:15:00""
 Fri Aug 3 14:15:00 CST 2007

 guest# date
 Fri Aug 3 14:15:02 CST 2007

 guest# hwclock
 Fri 31 Oct 2014 12:54:01 PM CST -0.393082 seconds

 
 For windows, you can open powershell with admin and set time by following command:
 > Set-Date -date ""6/1/2006 8:30 AM""
";The hardware time and the system time wasn't the same inside the guest;;RedHatEnterpriseLinux7/RHEL-112421
37;;;;;;;;;4;"sync the system time with the hardware time
 #virsh domtime rhel7 --sync";​​;;RedHatEnterpriseLinux7/RHEL-112421
37;;;;;;;;;5;"Login the guest:
 guest# date
 Fri Oct 31 12:58:13 CST 2014
 
 guest# hwclock
 Fri 31 Oct 2014 12:58:16 PM CST -0.211342 seconds";the system time has sync with the hardware time;;RedHatEnterpriseLinux7/RHEL-112421
38;RHEL-112474;[cold-plug/unplug] coldplug / unplug vcpu with order defined, then restart libvirtd - bug 1370357;coldplug/unplug with vcpu order defined, the order will be cleared.;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;S1: coldplug;​​;Test Case;RedHatEnterpriseLinux7/RHEL-112474
38;;;;;;;;;2;"1. prepare a inactive vm with cpu order defined
 # virsh dumpxml vm1
 ...
  <vcpu placement='auto' current='3'>12</vcpu>
  <vcpus>
    <vcpu id='0' enabled='yes' hotpluggable='no' order='1'/>
    <vcpu id='1' enabled='yes' hotpluggable='yes' order='2'/>
    <vcpu id='2' enabled='yes' hotpluggable='yes' order='3'/>
    <vcpu id='3' enabled='no' hotpluggable='yes'/>
    <vcpu id='4' enabled='no' hotpluggable='yes'/>
    <vcpu id='5' enabled='no' hotpluggable='yes'/>
    <vcpu id='6' enabled='no' hotpluggable='yes'/>
    <vcpu id='7' enabled='no' hotpluggable='yes'/>
    <vcpu id='8' enabled='no' hotpluggable='yes'/>
    <vcpu id='9' enabled='no' hotpluggable='yes'/>
    <vcpu id='10' enabled='no' hotpluggable='yes'/>
    <vcpu id='11' enabled='no' hotpluggable='yes'/>
  </vcpus>
​​";​​;;RedHatEnterpriseLinux7/RHEL-112474
38;;;;;;;;;3;"2. # virsh setvcpus vm1  5 --config
   # virsh dumpxml vm1";"<vcpus>
    <vcpu id='0' enabled='yes' hotpluggable='no'/>
    <vcpu id='1' enabled='yes' hotpluggable='yes'/>
    <vcpu id='2' enabled='yes' hotpluggable='yes'/>
    <vcpu id='3' enabled='yes' hotpluggable='yes'/>
    <vcpu id='4' enabled='yes' hotpluggable='yes'/>
    <vcpu id='5' enabled='no'  hotpluggable='yes'/>
    <vcpu id='6' enabled='no'  hotpluggable='yes'/>
    <vcpu id='7' enabled='no'  hotpluggable='yes'/>
    <vcpu id='8' enabled='no'  hotpluggable='yes'/>
    <vcpu id='9' enabled='no'  hotpluggable='yes'/>
    <vcpu id='10' enabled='no' hotpluggable='yes'/>
    <vcpu id='11' enabled='no' hotpluggable='yes'/>
  </vcpus>
 
 (4 and 5 are enabled, and the order info will be cleared)";;RedHatEnterpriseLinux7/RHEL-112474
38;;;;;;;;;4;"3. # service libvirtd restart
 Redirecting to /bin/systemctl restart  libvirtd.service
 # virsh list --all
​​";"Id    Name                           State
 ----------------------------------------------------
 -     vm1                            shut off

 (the vm still there, do not disappear)";;RedHatEnterpriseLinux7/RHEL-112474
38;;;;;;;;;5;S2: clodunplug;​​;;RedHatEnterpriseLinux7/RHEL-112474
38;;;;;;;;;6;"1. prepare a inactive vm with cpu order defined
 # virsh dumpxml vm1
 ...
  <vcpu placement='auto' current='3'>12</vcpu>
  <vcpus>
    <vcpu id='0' enabled='yes' hotpluggable='no' order='1'/>
    <vcpu id='1' enabled='yes' hotpluggable='yes' order='2'/>
    <vcpu id='2' enabled='yes' hotpluggable='yes' order='3'/>
    <vcpu id='3' enabled='no' hotpluggable='yes'/>
    <vcpu id='4' enabled='no' hotpluggable='yes'/>
    <vcpu id='5' enabled='no' hotpluggable='yes'/>
    <vcpu id='6' enabled='no' hotpluggable='yes'/>
    <vcpu id='7' enabled='no' hotpluggable='yes'/>
    <vcpu id='8' enabled='no' hotpluggable='yes'/>
    <vcpu id='9' enabled='no' hotpluggable='yes'/>
    <vcpu id='10' enabled='no' hotpluggable='yes'/>
    <vcpu id='11' enabled='no' hotpluggable='yes'/>
  </vcpus>";​​;;RedHatEnterpriseLinux7/RHEL-112474
38;;;;;;;;;7;"2. # virsh setvcpus rhel7 2 --config
 # virsh dumpxml rhel7 | grep /vcpus -B14";"  <vcpu placement='auto' current='2'>12</vcpu>
   <vcpus>
     <vcpu id='0' enabled='yes' hotpluggable='no'/>
     <vcpu id='1' enabled='yes' hotpluggable='yes'/>
     <vcpu id='2' enabled='no' hotpluggable='yes'/>
     <vcpu id='3' enabled='no' hotpluggable='yes'/>
     <vcpu id='4' enabled='no' hotpluggable='yes'/>
     <vcpu id='5' enabled='no' hotpluggable='yes'/>
     <vcpu id='6' enabled='no' hotpluggable='yes'/>
     <vcpu id='7' enabled='no' hotpluggable='yes'/>
     <vcpu id='8' enabled='no' hotpluggable='yes'/>
     <vcpu id='9' enabled='no' hotpluggable='yes'/>
     <vcpu id='10' enabled='no' hotpluggable='yes'/>
     <vcpu id='11' enabled='no' hotpluggable='yes'/>
   </vcpus>
 
 (order cleared)";;RedHatEnterpriseLinux7/RHEL-112474
39;RHEL-112507;[send-key] Send key to a shutdown guest;"Verify that send key to a shutdown guest will fail and virsh prints clear error message, and other operation towards guest can be done successfully
 Bug 746268 - Some libvirt APIs fail to release job on failure";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;Prepare a inactive guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL-112507
39;;;;;;;;;2;# virsh send-key rhel6 22;"# virsh send-key rhel6 22
 error: Requested operation is not valid: domain is not running";;RedHatEnterpriseLinux7/RHEL-112507
39;;;;;;;;;3;# virsh start rhel6;Guest can be started successfully;;RedHatEnterpriseLinux7/RHEL-112507
40;RHEL-113000;[Qos][vhostuser] Test bandwidth in vhostuser type interface - bug 1524230 need update;"1. start guest when Qos set, check by tc, test the outbound and inbound for vm; 2. domiflist, domiftune, domifstat, domif-getlink,domif-setlink, domifaddr; 3. update the Qos by update-device, then check by tc, restart libvirtd   Bug 1524230 - vhostuser type interface do not support bandwidth, but no warning message";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;" 1. start a vm with bandwidth set in interface
    <interface type='vhostuser'>
       <mac address='52:54:00:69:33:29'/>
       <source type='unix' path='/var/run/openvswitch/vhost-user1' mode='client'/>
       <bandwidth>
         <inbound average='1000' peak='5000' burst='1024'/>
         <outbound average='128' peak='256' burst='256'/>
       </bandwidth>
       <target dev='vhost-user1'/>
       <model type='virtio'/>
       <driver name='vhost' txmode='iothread' ioeventfd='on' event_idx='off' queues='4' rx_queue_size='1024' tx_queue_size='1024'>
         <host csum='off' gso='off' tso4='off' tso6='off' ecn='off' ufo='off' mrg_rxbuf='off'/>
         <guest csum='off' tso4='off' tso6='off' ecn='off' ufo='off'/>
       </driver>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113000
40;;;;;;;;;2;"# virsh domiflist vhost1
​​";"Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vhost-user1 vhostuser  -          virtio      52:54:00:69:33:29";;RedHatEnterpriseLinux7/RHEL-113000
40;;;;;;;;;3;"# virsh domiftune vhost1 vhost-user1
 
 
​​";"inbound.average: 1000
 inbound.peak   : 5000
 inbound.burst  : 1024
 inbound.floor  : 0
 outbound.average: 128
 outbound.peak  : 256
 outbound.burst : 256
 
 need update";;RedHatEnterpriseLinux7/RHEL-113000
41;RHEL-113001;[Qos][ethernet] Set bandwidth in ethernet type interface;ethernet type interface support Qos setting;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;" 1. start a guest without any interface
 
 and prepare the xml as below:
 # cat interface.xml
 <interface type='ethernet'>
       <mac address='52:54:00:18:31:70'/>
       <bandwidth>
         <inbound average='1000' peak='5000' burst='1024'/>
         <outbound average='128' peak='256' burst='256'/>
       </bandwidth>
       <script path='/etc/qemu-ifup'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113001
41;;;;;;;;;2;"2. Attach the interface xml to guest 
 # virsh attach-device rhel interface.xml 
​​";"Output:
 Device attached successfully";;RedHatEnterpriseLinux7/RHEL-113001
41;;;;;;;;;3;"3. Check the interface 
 # virsh dumpxml rhel | grep /interface -B11
 
 
​​";"Output:    
 <interface type='ethernet'>
       <mac address='52:54:00:18:31:70'/>
       <bandwidth>
         <inbound average='1000' peak='5000' burst='1024'/>
         <outbound average='128' peak='256' burst='256'/>
       </bandwidth>
       <script path='/etc/qemu-ifup'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL-113001
41;;;;;;;;;4;4.  # virsh domiflist rhel;"Output:
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet0      ethernet   -          rtl8139     52:54:00:18:31:70";;RedHatEnterpriseLinux7/RHEL-113001
41;;;;;;;;;5;5.# virsh domiftune rhel vnet0;"Output:
 inbound.average: 1000
 inbound.peak   : 5000
 inbound.burst  : 1024
 inbound.floor  : 0
 outbound.average: 128
 outbound.peak  : 256
 outbound.burst : 256
​​";;RedHatEnterpriseLinux7/RHEL-113001
42;RHEL-113002;[Qos][ovs] set bandwidth in bridge type interface connected to ovs - bug 1510237 need update;ovs support set Qos, and update on the fly Bug 1510237 - Libvirt should use ovs-vsctl for setting QoS for TAPs plugged into ovs;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. install openvswitch package, start the service
 # rpm -q openvswitch
 openvswitch-2.8.0-2.el7fdb.x86_64
 # systemctl start openvswitch
 
 create an ovs bridge and add one physical interface to the ovs
 # ovs-vsctl add-br ovsbr0
 # ovs-vsctl add-port ovsbr0 eno1
 # ifconfig eno1 0
 # dhclient ovsbr0";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113002
42;;;;;;;;;2;"2. start one vm with bridge type interface connected to ovs with bandwidth defined
 # virsh edit rhel7
 ...
    <interface type='bridge'>
       <mac address='52:54:00:b9:8a:05'/>
       <source bridge='ovsbr0'/>
       <virtualport type='openvswitch'>
         <parameters interfaceid='c6996eca-91ea-4034-8dea-a35374d02db9'/>
       </virtualport>
       <bandwidth>
         <inbound average='1000' peak='5000' burst='1024'/>
         <outbound average='128' peak='256' burst='256'/>
       </bandwidth>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 ...
 # virsh start rhel7";the guest can start;;RedHatEnterpriseLinux7/RHEL-113002
42;;;;;;;;;3;"3. # virsh domiflist rhel7
​​";"Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet0      bridge     ovsbr0     rtl8139     52:54:00:b9:8a:05 ";;RedHatEnterpriseLinux7/RHEL-113002
42;;;;;;;;;4;"4. # virsh domiftune rhel7 vnet0
​​";"inbound.average: 1000
 inbound.peak   : 5000
 inbound.burst  : 1024
 inbound.floor  : 0
 outbound.average: 128
 outbound.peak  : 256
 outbound.burst : 256";;RedHatEnterpriseLinux7/RHEL-113002
42;;;;;;;;;5;"5. # tc -d class show dev vnet0
 
​​";"class htb 1:1 root leaf 2: prio 0 quantum 85 rate 8Mbit ceil 40Mbit linklayer ethernet burst 1Mb/1 mpu 0b cburst 1600b/1 mpu 0b level 0 
 
 (for inbound)";;RedHatEnterpriseLinux7/RHEL-113002
42;;;;;;;;;6;6. # tc -d filter show dev vnet0 parent ffff:;"should have output ....
 filter protocol all pref 49152 u32 
 filter protocol all pref 49152 u32 fh 800: ht divisor 1 
 filter protocol all pref 49152 u32 fh 800::800 order 2048 key ht 800 bkt 0 flowid :1 not_in_hw 
   match 00000000/00000000 at 0
  police 0x1 rate 1024Kbit burst 256Kb mtu 64Kb action drop overhead 0b linklayer ethernet 
     ref 1 bind 1
​​";;RedHatEnterpriseLinux7/RHEL-113002
42;;;;;;;;;7;"7. # virsh domiftune rhel7 vnet0 500,600,128 200,300,256
 # virsh domiftune rhel7 vnet0";"inbound.average: 500
 inbound.peak   : 600
 inbound.burst  : 128
 inbound.floor  : 0
 outbound.average: 200
 outbound.peak  : 300
 outbound.burst : 256";;RedHatEnterpriseLinux7/RHEL-113002
42;;;;;;;;;8;"8. # tc -d class show dev vnet0
 
​​";class htb 1:1 root leaf 2: prio 0 quantum 42 rate 4Mbit ceil 4800Kbit linklayer ethernet burst 128Kb/1 mpu 0b cburst 1599b/1 mpu 0b level 0 ;;RedHatEnterpriseLinux7/RHEL-113002
42;;;;;;;;;9;"9. # tc -d filter show dev vnet0 parent ffff:
 
 
​​";"filter protocol all pref 49152 u32 
 filter protocol all pref 49152 u32 fh 800: ht divisor 1 
 filter protocol all pref 49152 u32 fh 800::800 order 2048 key ht 800 bkt 0 flowid :1 
   match 00000000/00000000 at 0
  police 0x4 rate 1600Kbit burst 256Kb mtu 64Kb action drop overhead 0b linklayer ethernet 
 ref 1 bind 1";;RedHatEnterpriseLinux7/RHEL-113002
42;;;;;;;;;10;"10. restart libvirtd, then check
 # tc -d class show dev vnet0
 # tc -d filter show dev vnet0 parent ffff:
 # virsh domiftune rhel7 vnet0";the output should be not change from step 8.9.7;;RedHatEnterpriseLinux7/RHEL-113002
42;;;;;;;;;11;"11. hotplug one interface with bandwidth setting, check the settings by tc
 start a vm with no interface exists, then do the hotplug
 
 # cat net.xml
 <interface type='bridge'>
        <mac address='52:54:00:b9:8a:05'/>
        <source bridge='ovsbr0'/>
        <virtualport type='openvswitch'>
          <parameters interfaceid='c6996eca-91ea-4034-8dea-a35374d02db9'/>
        </virtualport>
        <bandwidth>
          <inbound average='1000' peak='5000' burst='1024'/>
          <outbound average='128' peak='256' burst='256'/>
        </bandwidth>
        <model type='rtl8139'/>
        <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
      </interface>
 
 # virsh attach-device rhel7 net.xml
 Device attached successfully
​​";​​;;RedHatEnterpriseLinux7/RHEL-113002
42;;;;;;;;;12;"# virsh domiflist rhel7
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet0      bridge     ovsbr0     rtl8139     52:54:00:b9:8a:05
 
 # virsh domiftune rhel7 vnet0
 inbound.average: 1000
 inbound.peak   : 5000
 inbound.burst  : 1024
 inbound.floor  : 0
 outbound.average: 128
 outbound.peak  : 256
 outbound.burst : 256";​​;;RedHatEnterpriseLinux7/RHEL-113002
42;;;;;;;;;13;"# tc -d class show dev vnet0
​​";class htb 1:1 root leaf 2: prio 0 quantum 85 rate 8Mbit ceil 40Mbit linklayer ethernet burst 1Mb/1 mpu 0b cburst 1600b/1 mpu 0b level 0 ;;RedHatEnterpriseLinux7/RHEL-113002
42;;;;;;;;;14;"# tc -d filter show dev vnet0 parent ffff:
 
​​";"filter protocol all pref 49152 u32 
 filter protocol all pref 49152 u32 fh 800: ht divisor 1 
 filter protocol all pref 49152 u32 fh 800::800 order 2048 key ht 800 bkt 0 flowid :1 
   match 00000000/00000000 at 0
  police 0x7 rate 1024Kbit burst 256Kb mtu 64Kb action drop overhead 0b linklayer ethernet 
 ref 1 bind 1";;RedHatEnterpriseLinux7/RHEL-113002
42;;;;;;;;;15;"restart libvirtd, then check 
 # virsh domiftune rhel7 vnet0
 # tc -d class show dev vnet0
 # tc -d filter show dev vnet0 parent ffff:";should be no change;;RedHatEnterpriseLinux7/RHEL-113002
42;;;;;;;;;16;save and restore the vm, check again by above 3 commands, should be no change;​​;;RedHatEnterpriseLinux7/RHEL-113002
43;RHEL-113047;[Hyper-V][Memory]Remote TLB flush test;Verify there is performance improvement in mapping memory after enable remote TLB;Yaju Cao (yacao);Medium;Positive;Manual Only;;1;"Setup 3 VM Guests on one host as following:
 Guest A: CPU core number set to 40, Installed with RHEL7.4
 Guest B: CPU core number set to 40, Installed with RHEL7.5
   ( kernel version later than 3.10.0-759.el7 )
 Guest C: CPU core number set to 40,  Any OS version, Installed with ""stress""
";;Test Case;RedHatEnterpriseLinux7/RHEL-113047
43;;;;;;;;;2;"On Guest A: Check TLB support in dmesg:
 # dmesg | grep 'remote TLB'  dmesg | grep 'remote TLB' ";[    0.000000] Hyper-V: Using ext hypercall for remote TLB flush;;RedHatEnterpriseLinux7/RHEL-113047
43;;;;;;;;;3;"On Guest C: run stress to keep CPU starving during the test.
 # stress --cpu 40
";​​;;RedHatEnterpriseLinux7/RHEL-113047
43;;;;;;;;;4;"On Guest A: compile and run benchmarking:
 # gcc pthread_mmap.c -o pthread_mmap -lpthread
 # time ./pthread_mmap /bin/bash
"; ;;RedHatEnterpriseLinux7/RHEL-113047
43;;;;;;;;;5;"On Guest B: Repeat step 3 on guest B, compile and run benchmarking:
 # gcc pthread_mmap.c -o pthread_mmap -lpthread
 # time ./pthread_mmap /bin/bash
";"Time spent on Guest B is significantly less than which in Guest A.

 Guest A:
 real 0m38.747s
 user 0m0.849s
 sys 0m44.230s

 Guest B:
 real 0m31.061s
 user 0m0.890s
 sys 0m30.774s";;RedHatEnterpriseLinux7/RHEL-113047
44;RHEL-113059;"[Watchdog device] Start a guest with ""ib700"" watchdog - isa address type";"Verify that guest can be defined and started successfully with ib700 watchdog and isa address type
Bug 1509908 - Guest fails to start when set ib700 watchdog address type to isa";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or Define a guest with ib700 watchdog and address type=isa
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113059
44;;;;;;;;;2;"Dump inactive guest xml:
 # virsh dumpxml $guest |grep '<watchdog' -A 2
​​";"Same as configured xml.
 
 Output:
     <watchdog model='ib700' action='pause'>
       <address type='isa' iobase='0x505'/>
     </watchdog>
​​";;RedHatEnterpriseLinux7/RHEL-113059
44;;;;;;;;;3;"Start guest:
 # virsh start $guest
​​";​​;;RedHatEnterpriseLinux7/RHEL-113059
44;;;;;;;;;4;"Dump active guest xml:
 # virsh dumpxml $guest
​​";"Alias is generated, other parts are same as inactive xml.
 
 Output:
     <watchdog model='ib700' action='pause'>
       <address type='isa' iobase='0x505'/>
     </watchdog>
​​";;RedHatEnterpriseLinux7/RHEL-113059
44;;;;;;;;;5;"Check qemu command line:
 # ps aux|grep watchdog
​​";<need update after bug 1509908 is fixed>;;RedHatEnterpriseLinux7/RHEL-113059
45;RHEL-113060;"[Watchdog device] Define a guest with ""ib700"" watchdog - invalid address type";Verify that guest can't be defined successfully with ib700 watchdog and invalid address type;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Define a guest with ib700 watchdog and invalid address type:
 # # virsh define /tmp/foo.xml 
 
​​";" Define fails.
 
 Output:
 error: Failed to define domain from /tmp/foo.xml
 error: unsupported configuration: ib700 model of watchog can go only on ISA bus";Test Case;RedHatEnterpriseLinux7/RHEL-113060
46;RHEL-113061;"[Watchdog device] Start a guest with ""ib700"" watchdog - no address";Verify that guest can be defined and started successfully with ib700 watchdog and no specified address type;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or Define a guest with ib700 watchdog and no specified address type
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113061
46;;;;;;;;;2;"Dump inactive guest xml:
 # virsh dumpxml $guest |grep '<watchdog'";"Same as configured xml.
 
 Output:
     <watchdog model='ib700' action='pause'/>";;RedHatEnterpriseLinux7/RHEL-113061
46;;;;;;;;;3;"Start guest:
 # virsh start $guest";"
​​";;RedHatEnterpriseLinux7/RHEL-113061
46;;;;;;;;;4;"Dump active guest xml:
 # virsh dumpxml $guest";"Alias is generated, other parts are same as inactive xml.
 
 Output:
 ...
     <watchdog model='ib700' action='pause'>
       <alias name='watchdog0'/>
     </watchdog>";;RedHatEnterpriseLinux7/RHEL-113061
46;;;;;;;;;5;"Check qemu command line:
 # ps aux|grep watchdog";"Output:
 ...-device ib700,id=watchdog0 -watchdog-action pause...";;RedHatEnterpriseLinux7/RHEL-113061
47;RHEL-113062;"[Watchdog device] Start a guest with ""i6300esb"" watchdog - pci address type";Verify that guest can be defined and started successfully with i6300esb watchdog and pci address type;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or Define a guest with ib700 watchdog and address type=pci
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113062
47;;;;;;;;;2;"Dump inactive guest xml:
 # virsh dumpxml $guest |grep '<watchdog' -A 2
​​";"PCI address is generated in xml.
 
 Output:
     <watchdog model='i6300esb' action='pause'>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>
     </watchdog>
​​";;RedHatEnterpriseLinux7/RHEL-113062
47;;;;;;;;;3;"Start guest:
 # virsh start $guest
​​";​​;;RedHatEnterpriseLinux7/RHEL-113062
47;;;;;;;;;4;"Dump active guest xml:
 # virsh dumpxml $guest
​​";"Alias is generated, other parts are same as inactive xml.
 
 Output:
     <watchdog model='i6300esb' action='pause'>
       <alias name='watchdog0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>
     </watchdog>
​​";;RedHatEnterpriseLinux7/RHEL-113062
47;;;;;;;;;5;"Check qemu command line:
 # ps aux|grep watchdog
​​";"The watchdog address is same as in dumpxml.
 
 Output:
 ...-device i6300esb,id=watchdog0,bus=pci.0,addr=0x6 -watchdog-action pause...";;RedHatEnterpriseLinux7/RHEL-113062
48;RHEL-113063;"[Watchdog device] Define a guest with ""i6300esb"" watchdog - invalid address type";Verify that guest can't be defined successfully with i6300esb watchdog and invalid address type;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Define a guest with i6300esb watchdog and invalid address type:
 # virsh define /tmp/watchdog.xml 
​​";"Define fails.
 
 Output:
 error: Failed to define domain from /tmp/watchdog.xml
 error: unsupported configuration: i6300esb model of watchog can go only on PCI bus ";Test Case;RedHatEnterpriseLinux7/RHEL-113063
49;RHEL-113064;"[Watchdog device] Start a guest with ""i6300esb"" watchdog - no address";Verify that guest can be defined and started successfully with i6300esb watchdog and no specified address type;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or Define a guest with ib700 watchdog and no address type
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113064
49;;;;;;;;;2;"Dump inactive guest xml:
 # virsh dumpxml $guest |grep '<watchdog' -A 2
​​";"PCI address is generated in xml.
 
 Output:
     <watchdog model='i6300esb' action='pause'>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>
     </watchdog>
​​";;RedHatEnterpriseLinux7/RHEL-113064
49;;;;;;;;;3;"Start guest:
 # virsh start $guest
​​";​​;;RedHatEnterpriseLinux7/RHEL-113064
49;;;;;;;;;4;"Dump active guest xml:
 # virsh dumpxml $guest
​​";"Alias is generated, other parts are same as inactive xml.
 
 Output:
     <watchdog model='i6300esb' action='pause'>
       <alias name='watchdog0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>
     </watchdog>
​​";;RedHatEnterpriseLinux7/RHEL-113064
49;;;;;;;;;5;"Check qemu command line:
 # ps aux|grep watchdog
​​";"The watchdog address is same as in dumpxml.
 
 Output:
 ...-device i6300esb,id=watchdog0,bus=pci.0,addr=0x6 -watchdog-action pause...";;RedHatEnterpriseLinux7/RHEL-113064
50;RHEL-113122;"[Watchdog device] Hot-plug ""i6300esb"" watchdog device -- New for RHEL7.6";"Verify that ""i6300esb"" watchdog can be hot-plugged successfully and it takes effect at run-time
 Bug 1447169 - [RFE] Support hotplugging/unplugging of i6300esb watchdog";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Start a guest without watchdog device 
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-113122
50;;;;;;;;;2;"
 1. Hotplug a watchdog device:
 
* # virsh attach-device rhel76 /tmp/watchdog.xml
";Device attached successfully;;RedHatEnterpriseLinux7/RHEL-113122
50;;;;;;;;;3;"Scenario 1:
​​";​​;;RedHatEnterpriseLinux7/RHEL-113122
50;;;;;;;;;4;"2. Check watchdog in dumpxml:
 
* # virsh dumpxml rhel76 | grep '<watchdog' -A3
";"    <watchdog model='i6300esb' action='inject-nmi'>
       <alias name='ua-7996c8dc-a4fa-4012-b76f-043d20144263'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </watchdog>
​​";;RedHatEnterpriseLinux7/RHEL-113122
50;;;;;;;;;5;"3. Check watchdog inside guest:
 
* For i6300esb:
   # lspci | grep -i watchdog
";00:09.0 System peripheral: Intel Corporation 6300ESB Watchdog Timer;;RedHatEnterpriseLinux7/RHEL-113122
50;;;;;;;;;6;"4. Monitor guest event:
 # virsh event rhel7.3 --all
​​";​​;;RedHatEnterpriseLinux7/RHEL-113122
50;;;;;;;;;7;"5. Trigger watchdog, refer to: How to trigger watchdog 
 Wait for some time, guest will receive a NMI. Check the guest terminal.
​​";"[root@localhost ~]# [  216.057090] Uhhuh. NMI received for unknown reason 30 on CPU 0.
 [  216.058071] Do you have a strange power saving mode enabled?
 [  216.058968] Dazed and confused, but trying to continue
 
 Message from syslogd@localhost at Jul  9 11:21:27 ...
  kernel:Uhhuh. NMI received for unknown reason 30 on CPU 0.
 
 Message from syslogd@localhost at Jul  9 11:21:27 ...
  kernel:Do you have a strange power saving mode enabled?
 
 Message from syslogd@localhost at Jul  9 11:21:27 ...
  kernel:Dazed and confused, but trying to continue
 
​​";;RedHatEnterpriseLinux7/RHEL-113122
50;;;;;;;;;8;Check output of virsh event;"event 'watchdog' for domain rhel76: inject-nmi
 events received: 1
​​";;RedHatEnterpriseLinux7/RHEL-113122
50;;;;;;;;;9;"Scenario 2:
​​";​​;;RedHatEnterpriseLinux7/RHEL-113122
50;;;;;;;;;10;"restart libvirtd 
 # systemctl restart libvirtd
 
 The following steps are the same with step2-5";"The result should be the same with the ones in step2-5
​​";;RedHatEnterpriseLinux7/RHEL-113122
51;RHEL-113123;"[Watchdog device] Hot-unplug ""i6300esb"" watchdog device";"Verify that ""i6300esb"" watchdog can be hot-unplugged successfully.
 Bug 1447169";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Prepare a running guest with ""i6300esb"" watchdog device.
 
 Note:
 Should test all the xml configuration for i6300esb watchdog, refer to cases in chapter 3.4.1
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113123
51;;;;;;;;;2;"Dump guest xml and save the watchdog part into a file:
 
* # virsh dumpxml foo=1 |grep '<watchdog' -A3 > /tmp/watchdog.xml
";​​;;RedHatEnterpriseLinux7/RHEL-113123
51;;;;;;;;;3;"Hot-unplug the watchdog:
 
* # virsh detach-device foo=1 /tmp/watchdog.xml
";"Output:
Device detached successfully


";;RedHatEnterpriseLinux7/RHEL-113123
51;;;;;;;;;4;"* # virsh dumpxml foo=1 |grep '<watchdog' -A3
";Nothing output.;;RedHatEnterpriseLinux7/RHEL-113123
52;RHEL-113138;[Watchdog device] Hot-plug the second watchdog device;"Verify that hot-plug two watchdog devices will fail
";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" Prepare a running guest with a watchdog device
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113138
52;;;;;;;;;2;"Hotplug another watchdog to guest:
 # virsh attach-device $guest /tmp/watchdog.xml
​​";"Attach fails.
 
 Output:
 error: Failed to attach device from /tmp/watchdog.xml
 error: Requested operation is not valid: domain already has a watchdog";;RedHatEnterpriseLinux7/RHEL-113138
52;;;;;;;;;3;"Check watchdog in active xml:
 # virsh dumpxml foo|grep '<watchdog' 
​​";"Only one watchdog device exists.
​​";;RedHatEnterpriseLinux7/RHEL-113138
53;RHEL-113139;[Watchdog device] Hot-unplug non-existing watchdog device;"Verify that hot-unplug a non-existing watchdog device will fail.
";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" Prepare a running guest without watchdog device
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113139
53;;;;;;;;;2;"Hot-unplug watchdog device:
 # virsh detach-device $guest /tmp/unplug.xml
​​";"Hot-unplug fails.
 
 Output:
 error: Failed to detach device from /tmp/unplug.xml
 error: Requested operation is not valid: watchdog device not present in domain configuration
​​";;RedHatEnterpriseLinux7/RHEL-113139
54;RHEL-113141;[Watchdog device] Define a guest with multiple watchdog devices (not supported);"Verify that a guest can only have one watchdog device
";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Define a guest with multiple watchdog devices:
 
​​";"Define fails.
 
 Output:
 error: Failed to define domain from /tmp/foo.xml
 error: internal error: only a single watchdog device is supported
​​";Test Case;RedHatEnterpriseLinux7/RHEL-113141
55;RHEL-113214;[Watchdog device] Cold-plug the second watchdog device;"Verify that cold-plug two watchdog devices will fail
";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Prepare a persistent guest with a watchdog device.
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113214
55;;;;;;;;;2;"Coldplug another watchdog to guest:
 # virsh attach-device foo /tmp/watchdog.xml --config
 
​​";"Attach fails.
 
 Output:
 error: Failed to attach device from /tmp/watchdog.xml
 error: Requested operation is not valid: domain already has a watchdog
​​";;RedHatEnterpriseLinux7/RHEL-113214
56;RHEL-113215;[Watchdog device] Cold-unplug non-existing watchdog device;"Verify that colu-unplug a non-existing watchdog device will fail.
";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" Prepare a persistent guest without watchdog device
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113215
56;;;;;;;;;2;"Cold-unplg watchdog device:
 # virsh detach-device $guest /tmp/unplug.xml --config";"Cold-unplug fails.
 
 Output:
 error: Failed to detach device from /tmp/unplug.xml
 error: operation failed: domain has no watchdog";;RedHatEnterpriseLinux7/RHEL-113215
57;RHEL-113361;[qemu] [*_tls_x509_cert_dir] Don't specify the default_tls_x509_cert_dir and  *_tls_x509_cert_dir when default path for *_tls_x509_cert_dir doesn't exist;Verify that the default path for default_tls_x509_cert_dir will take effect when don't specify default_tls_x509_cert_dir and *_tls_x509_cert_dir,  and the default path for *_tls_x509_cert_dir doesn't exist;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Start guest
​​";"Guest starts successfully.
​​";Test Case;RedHatEnterpriseLinux7/RHEL-113361
57;;;;;;;;;2;"Check whether the configuration takes effect:
 1) For vnc/spice/chardev, check the qemu command line
 
 2) For migrate:
 2-1)  Rename the desired tls cert dir and do migration with option --tls:
 # mv /etc/pki/qemu /etc/pki/qemu1
 
 
 # virsh migrate $guest qemu+ssh://{target ip}/system --live --verbose --tls
 
 2-2) Rename the desired tls cert dir back and do migration with option --tls again:
 # mv /etc/pki/qemu1 /etc/pki/qemu
 
 # virsh migrate $guest qemu+ssh://{target ip}/system --live --verbose --tls
​​";"1) For vnc/spice/chardev, /etc/pki/qemu is used as the cert dir for them
 
 2) For migrate:
 2-1) migration failed. And report error that can't find certificates.
 
 2-2) migration succeed.
​​";;RedHatEnterpriseLinux7/RHEL-113361
58;RHEL-113364;[qemu] [*_tls_x509_cert_dir] Specify the default_tls_x509_cert_dir and  don't specify *_tls_x509_cert_dir when default path for *_tls_x509_cert_dir doesn't exist;"Verify that the default path for default_tls_x509_cert_dir will take effect when specify default_tls_x509_cert_dir and don't specify *_tls_x509_cert_dir,  and the default path for *_tls_x509_cert_dir doesn't exist
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Retest the steps in case RHEL-113361 with /etc/pki/qemu replaced by the desired directory
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113364
59;RHEL-113365;[qemu] [*_tls_x509_cert_dir] Specify the default_tls_x509_cert_dir and don't specify *_tls_x509_cert_dir when default path for *_tls_x509_cert_dir  exists;"Verify that the default path for *_tls_x509_cert_dir will take effect when specify default_tls_x509_cert_dir and don't specify *_tls_x509_cert_dir,  and the default path for *_tls_x509_cert_dir doesn't exist
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;Retest the steps in case RHEL-113361 with /etc/pki/qemu replaced by the desired directory ;​​;Test Case;RedHatEnterpriseLinux7/RHEL-113365
60;RHEL-113366;[qemu] [*_tls_x509_cert_dir] Specify both the default_tls_x509_cert_dir and *_tls_x509_cert_dir;"Verify that the configured path for *_tls_x509_cert_dir will take effect when specify both default_tls_x509_cert_dir and *_tls_x509_cert_dir
";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Retest the steps in case RHEL-113361 with /etc/pki/qemu replaced by the desired directory
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113366
61;RHEL-113367;[Hyper-V][Network]GRO IPv4  check;GRO offload check, when large packet received, network GRO will assemble small packet before sending to kernel. Check it for IPv4 transmit;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;" 1. Install RHEL guest, add Hyper-V network adapter, check GRO status
 # ethtool -k eth0        
  ";"GRO is enabled by default
   generic-receive-offload: on";Test Case;RedHatEnterpriseLinux7/RHEL-113367
61;;;;;;;;;2;"2. On another system, dd a large file and scp to the RHEL guest via IPv4 address.
 # dd if=/dev/urandom of=Big_File bs=1024k count=2048
";​​;;RedHatEnterpriseLinux7/RHEL-113367
61;;;;;;;;;3;"3. While scp is sending, check packet length in RHEL guest
 # tcpdump -i eth0 tcp and src {IP address of sending side}";Packet length should be longer, e.g. about 64k, but not as fragmented as length 1448(MTU 1500).;;RedHatEnterpriseLinux7/RHEL-113367
61;;;;;;;;;4;"4. Disable GRO in the RHEL guest
 # ethtool -K eth0 gro off";generic-receive-offload: off;;RedHatEnterpriseLinux7/RHEL-113367
61;;;;;;;;;5;5. Run step 3 and step 4 again;"Packet length should be fragmented as length 1448(MTU 1500). e.g.
IP (tos 0x8, ttl 64, id 32042, offset 0, flags [DF], proto TCP (6), length 1500)
     10.73.199.75.59630 > 10.73.199.9.22: Flags [.], cksum 0xc159 (correct), seq 1068998289:1068999737, ack 1899110, win 1424, options [nop,nop,TS val 621742830 ecr 547787], length 1448";;RedHatEnterpriseLinux7/RHEL-113367
62;RHEL-113368;[Hyper-V][Network]GRO IPv6 check;GRO offload check, when large packet received, network GRO will assemble small packet before sending to kernel. This case check for IPv6 transmit;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;"1. Install RHEL guest, add Hyper-V network adapter, check GRO status
 # ethtool -k eth0        ";" GRO is enabled by default
   generic-receive-offload: on";Test Case;RedHatEnterpriseLinux7/RHEL-113368
62;;;;;;;;;2;2. On another system, dd a large file and scp to the RHEL guest via IPv6 address.;​​;;RedHatEnterpriseLinux7/RHEL-113368
62;;;;;;;;;3;"3. While scp is sending, check packet length in RHEL guest
 # tcpdump -i eth0 tcp and src {IP address of sending side}";Packet length should be longer, e.g. about 64k, but not as fragmented as length 1428(MTU 1500).;;RedHatEnterpriseLinux7/RHEL-113368
62;;;;;;;;;4;"4. Disable GRO in the RHEL guest
 # ethtool -K eth0 gro off";generic-receive-offload: off;;RedHatEnterpriseLinux7/RHEL-113368
62;;;;;;;;;5;5. Run step 3 and step 4 again;Packet length should be fragmented as length 1428(MTU 1500).;;RedHatEnterpriseLinux7/RHEL-113368
63;RHEL-113369;[Hyper-V][Network][Reliability]GRO disable/enable change ;Check after disable and enable GRO feature, network should still work normal.;Yaju Cao (yacao);Low;Positive;Manual Only;;1;"1. Install RHEL guest, add Hyper-V network adapter, check GRO status, check free memory
 # ethtool -k eth0
 # free -m        ";" GRO is enabled by default
   generic-receive-offload: on";Test Case;RedHatEnterpriseLinux7/RHEL-113369
63;;;;;;;;;2;"2. Keep changing GRO status 
 While true; do ethtool -K eth0 gro off; sleep 3s; ethtool -K eth0 gro on; sleep 3s; done";​​;;RedHatEnterpriseLinux7/RHEL-113369
63;;;;;;;;;3;"3. After long time (e.g. 24 hours), make sure
 
 a. No memory leak. free memory is not much larger than step 1
 b. Network can still work well. 
​​";​​;;RedHatEnterpriseLinux7/RHEL-113369
64;RHEL-113373;[qemu] [*_tls_x509_cert_dir] Don't specify the default_tls_x509_cert_dir and   *_tls_x509_cert_dir when default path for *_tls_x509_cert_dir  exists;"Verify that the default path for *_tls_x509_cert_dir will take effect when don't specify default_tls_x509_cert_dir and *_tls_x509_cert_dir,  and the default path for *_tls_x509_cert_dir exists
";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Retest the steps in case RHEL-113361 with /etc/pki/qemu replaced by the desired directory
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113373
65;RHEL-113375;[SR-IOV] Prepare: intel X710 network adapters  --bug 1489263;"https://mojo.redhat.com/docs/DOC-178216 
 The case is to prepare the environment for SRIOV testing with intel X710 card";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;"Do the test case as below
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-113375
65;;;;;;;;;2;RHEL7-18505 - [SR-IOV] Hotplug/unplug VF with managed='yes' - bug 844287, 843016 ;"
​​";;RedHatEnterpriseLinux7/RHEL-113375
65;;;;;;;;;3;RHEL7-18525 - [Hot-plug] Attach VF from inactive network to running guest (negative) - bug 1002438 ;"
​​";;RedHatEnterpriseLinux7/RHEL-113375
65;;;;;;;;;4;RHEL7-18529 - [SR-IOV] Attach/detach interfaces from macvtap network with passthrough mode ;"
​​";;RedHatEnterpriseLinux7/RHEL-113375
65;;;;;;;;;5;RHEL7-98410 - [interface hotplug] [hostdev] attach hostdev interface/device with different elements/attributes - bug 997561 ;"
​​";;RedHatEnterpriseLinux7/RHEL-113375
65;;;;;;;;;6;RHEL7-18501 - [PF passthrough] Hot-plug PF to vm ;"
​​";;RedHatEnterpriseLinux7/RHEL-113375
65;;;;;;;;;7;RHEL7-18499 - [PCI assignment] Hot unplug PF ;"
​​";;RedHatEnterpriseLinux7/RHEL-113375
65;;;;;;;;;8;RHEL7-18508 - [SR-IOV] Reboot guest with assigned VF ;"
​​";;RedHatEnterpriseLinux7/RHEL-113375
66;RHEL-113377;IDM-SSSD-TC: ad_provider: ad_login_attr: Default behaviour by login with sAMAccountName;" Default behaviour by login with sAMAccountName

";Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-113377
67;RHEL-113378;IDM-SSSD-TC: ad_provider: ad_login_attr: Verify user login with userPrincipalName; Verify user login with userPrincipalName;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-113378
68;RHEL-113379;IDM-SSSD-TC: ad_provider: ad_login_attr: Verify user login using sssd domain name;Verify user login using sssd domain name;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-113379
69;RHEL-113380;IDM-SSSD-TC: ad_provider: ad_login_attr: Verify login attributes with fully qualified names;Verify login attributes with fully qualified names;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-113380
70;RHEL-113381;IDM-SSSD-TC: ad_provider: ad_login_attr: Verify login attributes with upper case names;Verify login attributes with upper case names;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-113381
71;RHEL-113384;[qemu] [*_tls_x509_cert_dir] Specify the default_tls_x509_cert_dir to non-existing path;"Verify that libvirtd will fail to start when default_tls_x509_cert_dir is set to non-existing path
";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"1. Set default_tls_x509_cert_dir to non-existing path in qemu.conf. 
 For example:
 default_tls_x509_cert_dir = ""/etc/pki/qemu-dada""

 # file /etc/pki/qemu-dada
 /etc/pki/qemu-dada: cannot open (No such file or directory)";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113384
71;;;;;;;;;2;"Restart libvirtd
​​";​​;;RedHatEnterpriseLinux7/RHEL-113384
71;;;;;;;;;3;"Check libvirtd status
​​";"libvirtd is not active
​​";;RedHatEnterpriseLinux7/RHEL-113384
72;RHEL-113385;[qemu] [*_tls_x509_cert_dir] Specify  *_tls_x509_cert_dir to non-existing path;Verify that libvirtd will fail to start when *_tls_x509_cert_dir is set to non-existing path;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"1. Set one of the *_tls_x509_cert_dir to non-existing path in qemu.conf. 
 For example:
 vnc_tls_x509_cert_dir = ""/etc/pki/libvirt-vnc-dada""

 # file /etc/pki/libvirt-vnc-dada
 /etc/pki/libvirt-vnc-dada: cannot open (No such file or directory)

 Note: this case should be run for multiple times, test one *_tls_x509_cert_dir parameter at one time";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113385
72;;;;;;;;;2;"Restart libvirtd
​​";​​;;RedHatEnterpriseLinux7/RHEL-113385
72;;;;;;;;;3;"Check libvirtd status
​​";"libvirtd is not active
​​";;RedHatEnterpriseLinux7/RHEL-113385
73;RHEL-113423;[Hyper-V][Network]GRO check after change MTU;;Yaju Cao (yacao);Low;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-113423
74;RHEL-113542;bug 1365500;"bug 1365500    

";Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-113542
75;RHEL-113673;[host-passthrough] Check feature policy for host-passthrough  mode with host supported feature avx  - Bug 1515677;"force The virtual CPU will claim the feature is supported regardless of it being supported by host CPU.
 require Guest creation will fail unless the feature is supported by host CPU.
 optional The feature will be supported by virtual CPU if and only if it is supported by host CPU.
 disable The feature will not be supported by virtual CPU.
 forbid Guest creation will fail if the feature is supported by host CPU.
 
Performance for host-passthrough: 
feature policy | libvirt check? | qemu support host not support | qemu support host support | qemu not support
force | N | xx=on, guest no such flag | xx=on | not start
require | Y | not start | xx=on | ditto
optional | Y | xx=off | xx=on | ditto
disable | N | xx=off | xx=off | ditto
forbid | Y | xx=off | not start | ditto
Test coverage and setting: 
1. set the xml;
2. start guest, and check the qemu commandline
3. login guest to check the feature
4. restart libvirtd, check again
5. save / restore, check again
6. managedsave / start, check again
7. migration, then check on target host 
for host-passthrough with default check=none";Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1;"Scenario 1: 
 avx: on host support avx"; ;Test Case;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;2;force;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;3;"1. # virsh edit rhel7
 ...
  <cpu mode='host-passthrough'>
     <feature policy='force' name='avx'/>
   </cpu>
 ...

 # virsh dumpxml rhel7 | grep /cpu -B2";" <cpu mode='host-passthrough' check='none'>
     <feature policy='force' name='avx'/>
   </cpu>
";;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;4;"2. # virsh start rhel7
 Domain rhel7 started

 # ps aux | grep avx
";"...-cpu host,avx=on...


 (guest can start successfully, with avx=on in qemu command line)";;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;5;"3. login guest to check the cpu flags
 # cat /proc/cpuinfo | grep avx

";"flags : ... avx ...

 (the feature avx exists on guest)";;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;6;4. restart libvirtd, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;7;5. save / restore, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;8;6. managedsave / start, check the xml, and qemu command line, there is no changes;cover bug 1207095;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;9;7. do migration to intel host, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;10;require;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;11;"1. # virsh edit rhel7
 ...
  <cpu mode='host-passthrough'>
     <feature policy='require' name='avx'/>
   </cpu>
 ...

 # virsh dumpxml rhel7 | grep /cpu -B2";" <cpu mode='host-passthrough' check='none'>
     <feature policy='require' name='avx'/>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;12;"2. start the guest and check the qemu command line
 # virsh start rhel7
 # ps aux | grep avx";"...-cpu host,avx=on...

 (guest can start successfully, with avx=on in qemu command line)";;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;13;"3. login guest to check the cpu flags, avx exists
 # cat /proc/cpuinfo | grep avx";"flags : ... avx ...

 (the feature avx exists on guest)";;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;14;4. restart libvirtd, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;15;5. save / restore, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;16;6. managedsave / start, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;17;7. do migration to intel host, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;18;optional;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;19;"1. # virsh edit rhel7
   <cpu mode='host-passthrough' check='none'>
     <feature policy='optional' name='avx'/>
   </cpu>";​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;20;"2. # virsh start rhel7
 Domain rhel7 started

 # ps aux | grep rhel7
";... -cpu host....;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;21;"3. login guest to check the cpu flags, avx exists
 # cat /proc/cpuinfo | grep avx";avx exists;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;22;4. restart libvirtd, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;23;5. save / restore, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;24;6. managedsave / start, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;25;7. do migration to intel host, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;26;disable;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;27;"1. # virsh edit rhel7
   <cpu mode='host-passthrough' check='none'>
     <feature policy='disable' name='avx'/>
   </cpu>

 # virsh dumpxml rhel7 | grep /cpu -B2";"<cpu mode='host-passthrough' check='none'>
     <feature policy='disable' name='avx'/>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;28;"2. # virsh start rhel7
 Domain rhel7 started

 # ps aux | grep rhel7";...-cpu host,avx=off...;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;29;"3. check on guest, the avx not exists
 # cat /proc/cpuinfo | grep avx";no output, guest do not has avx feature;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;30;4. restart libvirtd, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;31;5. save / restore, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;32;6. managedsave / start, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;33;7. do migration to intel host, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;34;forbid  - need update  Bug 1515677;​​;;RedHatEnterpriseLinux7/RHEL-113673
75;;;;;;;;;35;"1. # virsh edit rhel7
   <cpu mode='host-passthrough' check='none'>
     <feature policy='forbid' name='avx'/>
   </cpu>

 # virsh dumpxml rhel7 | grep /cpu -B2";​​;;RedHatEnterpriseLinux7/RHEL-113673
76;RHEL-113676;[partial] Check feature policy with avx feature (qemu and host both support) + check=partial;"force The virtual CPU will claim the feature is supported regardless of it being supported by host CPU.
 require Guest creation will fail unless the feature is supported by host CPU.
 optional The feature will be supported by virtual CPU if and only if it is supported by host CPU.
 disable The feature will not be supported by virtual CPU.
 forbid Guest creation will fail if the feature is supported by host CPU.
 
feature policy | qemu support host support RHEL-113676 avx
force | start with xx=on
require | start with xx=on
optional | start with xx=on, the 'optional' change to 'require' in xml,
disable | start with xx=off
forbid | can not start";Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1;"Scenario 1: 
 avx: on host support avx
 Set vm cpu mode as mode 
 (can be host-model, host-passthrough, custom, and the xml as below:

 <cpu mode='host-passthrough' check='partial'>
 <feature policy='force' name='avx'/>
 </cpu>

 <cpu mode='host-model' check='partial'>
     <feature policy='force' name='avx'/>
   </cpu>

 <cpu mode='custom' check='partial'>
     <model fallback='allow'>core2duo</model>
 <feature policy='force' name='avx'/>
   </cpu>
 )"; ;Test Case;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;2;force;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;3;"# virsh dumpxml rhel7 | grep /cpu -B3
  ";"host-passthrough:
    <cpu mode='host-passthrough' check='partial'>
     <feature policy='force' name='avx'/>
   </cpu>

 host-model:
  <cpu mode='host-model' check='partial'>
     <model fallback='allow'/>
     <feature policy='force' name='avx'/>
   </cpu>

 custom:
   <cpu mode='custom' match='exact' check='partial'>
     <model fallback='allow'>core2duo</model>
     <feature policy='force' name='avx'/>
   </cpu>
";;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;4;"2. # virsh start rhel7
 Domain rhel7 started

 # virsh dumpxml rhel7 | grep /cpu -B11
";"host-passthrough:
   <cpu mode='host-passthrough' check='partial'>
     <feature policy='force' name='avx'/>
   </cpu>
 
 host-model:
 <cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>SandyBridge</model>
     <vendor>Intel</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ss'/>
     <feature policy='require' name='pcid'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='require' name='arat'/>
     <feature policy='require' name='tsc_adjust'/>
     <feature policy='require' name='xsaveopt'/>
     <feature policy='force' name='avx'/>
   </cpu>
 
 custom:
  <cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>core2duo</model>
     <feature policy='force' name='avx'/>
     <feature policy='require' name='ss'/>
     <feature policy='disable' name='monitor'/>
     <feature policy='require' name='cx16'/>
     <feature policy='require' name='x2apic'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='require' name='lahf_lm'/>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;5;# ps aux | grep avx;"host-passthrough:
 -cpu host,avx=on,
 
 host-model:
 ...-cpu SandyBridge,vme=on,ss=on,pcid=on,hypervisor=on,
 arat=on,tsc_adjust=on,xsaveopt=on,avx=on...
 
 custom:
 -cpu core2duo,avx=on,
 
 (guest can start successfully, with avx=on in qemu command line)";;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;6;"3. login guest to check the cpu flags
 # cat /proc/cpuinfo | grep avx

";"flags : ... avx ...

 (the feature avx exists on guest)";;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;7;4. restart libvirtd, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;8;5. save / restore, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;9;6. managedsave / start, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;10;7. do migration to intel host, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;11;require;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;12;"1. # virsh edit rhel7
 ...
 <cpu mode='host-model'>
     <feature policy='require' name='avx'/>
   </cpu>
 ...

 # virsh dumpxml rhel7 | grep /cpu -B2";"  <cpu mode='host-model' check='partial'>
     <model fallback='allow'/>
     <feature policy='require' name='avx'/>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;13;"2. start the guest and check the qemu command line
 # virsh start rhel7
 # virsh dumpxml rhel7
";"<cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>SandyBridge</model>
     <vendor>Intel</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ss'/>
     <feature policy='require' name='pcid'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='require' name='arat'/>
     <feature policy='require' name='tsc_adjust'/>
     <feature policy='require' name='xsaveopt'/>
     <feature policy='require' name='avx'/>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;14;# ps aux | grep avx;" -cpu SandyBridge,vme=on,ss=on,pcid=on,hypervisor=on,
 arat=on,tsc_adjust=on,xsaveopt=on,avx=on
 
 (guest can start successfully, with avx=on in qemu command line)";;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;15;"3. login guest to check the cpu flags, avx exists
 # cat /proc/cpuinfo | grep avx";"flags : ... avx ...

 (the feature avx exists on guest)";;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;16;4. restart libvirtd, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;17;5. save / restore, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;18;6. managedsave / start, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;19;7. do migration to intel host, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;20;optional;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;21;"1. # virsh edit rhel7
   <cpu mode='host-model'>
     <feature policy='optional' name='avx'/>
   </cpu>";​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;22;"2. # virsh start rhel7
 Domain rhel7 started
 # virsh dumpxml rhel7 | grep /cpu -B11




";"<cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>SandyBridge</model>
     <vendor>Intel</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ss'/>
     <feature policy='require' name='pcid'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='require' name='arat'/>
     <feature policy='require' name='tsc_adjust'/>
     <feature policy='require' name='xsaveopt'/>
     <feature policy='require' name='avx'/>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;23;# ps aux | grep rhel7;" -cpu SandyBridge,vme=on,ss=on,pcid=on,hypervisor=on,arat=on,
 tsc_adjust=on,xsaveopt=on,avx=on ";;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;24;"3. login guest to check the cpu flags, avx exists
 # cat /proc/cpuinfo | grep avx";avx exists;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;25;4. restart libvirtd, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;26;5. save / restore, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;27;6. managedsave / start, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;28;7. do migration to intel host, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;29;disable;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;30;"1. # virsh edit rhel7
   <cpu mode='host-model'>
     <feature policy='disable' name='avx'/>
   </cpu>

 # virsh dumpxml rhel7 | grep /cpu -B2";"# virsh dumpxml rhel7  | grep /cpu -B3
   <cpu mode='host-model' check='partial'>
     <model fallback='allow'/>
     <feature policy='disable' name='avx'/>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;31;"2. # virsh start rhel7
 Domain rhel7 started

 # virsh dumpxml rhel7
";" <cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>SandyBridge</model>
     <vendor>Intel</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ss'/>
     <feature policy='require' name='pcid'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='require' name='arat'/>
     <feature policy='require' name='tsc_adjust'/>
     <feature policy='require' name='xsaveopt'/>
     <feature policy='disable' name='avx'/>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;32;# ps aux | grep rhel7;"... -cpu SandyBridge,vme=on,ss=on,pcid=on,hypervisor=on,arat=on,
 tsc_adjust=on,xsaveopt=on,avx=off ...";;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;33;"3. check on guest, the avx not exists
 # cat /proc/cpuinfo | grep avx";no output;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;34;4. restart libvirtd, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;35;5. save / restore, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;36;6. managedsave / start, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;37;7. do migration to intel host, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;38;forbid;​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;39;"1. # virsh edit rhel7
  <cpu mode='host-model'>
     <feature policy='forbid' name='avx'/>
   </cpu>

 # virsh dumpxml rhel7 | grep /cpu -B3";"  <cpu mode='host-model' check='partial'>
     <model fallback='allow'/>
     <feature policy='forbid' name='avx'/>
   </cpu>
 
​​";;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;40;"2. # virsh start rhel7
";"error: Failed to start domain rhel7
 error: the CPU is incompatible with host CPU: Host CPU provides forbidden features: avx";;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;41;"change the cpu mode to custom + check=partial, and redo the steps, the result should be the same, and you can also refer to the table in description
 # virsh edit rhel
 ...
 <cpu mode='custom' check='partial'>
 <model fallback='allow'>core2duo</model>  ==> use the model which your host fully support
 <cpu>";​​;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;42;force;start with '-cpu,.....avx=on...';;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;43;require;start with '-cpu,.....avx=on...';;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;44;optional;start with '-cpu,.....avx=on...' policy change to require in xml;;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;45;disable;start with '-cpu,.....avx=off...';;RedHatEnterpriseLinux7/RHEL-113676
76;;;;;;;;;46;forbid;"error: Failed to start domain rhel7
 error: the CPU is incompatible with host CPU: Host CPU provides forbidden features: avx";;RedHatEnterpriseLinux7/RHEL-113676
77;RHEL-113694;[partial check] Check feature policy for cr8legacy feature (qemu support, host not support) + check=partial;"continue with above case 
feature policy | host not support RHEL-113694  cr8legacy
force | xx=on, force change to disable in xml
require | cat not start
optional | start with xx=off, the optional change to disable in xml
disable | start with xx=off
forbid | start with xx=off";Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1;"Scenario 2: 
 cr8legacy: on intel host which to not support this feature

 set vm cpu mode 
 can be host-model, host-passthrough, custom"; ;Test Case;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;2;force;​​;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;3;"1. # virsh edit rhel7
 ...
   <cpu mode='host-model'>
     <feature policy='force' name='cr8legacy'/>
   </cpu>
 ...
 # virsh dumpxml rhel7 | grep /cpu -B3
  ";"  <cpu mode='host-model' check='partial'>
     <model fallback='allow'/>
     <feature policy='force' name='cr8legacy'/>
   </cpu>
";;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;4;"2. # virsh start rhel7
 Domain rhel7 started

 # virsh dumpxml rhel7 | grep /cpu -B11
";"<cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>SandyBridge</model>
     <vendor>Intel</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ss'/>
     <feature policy='require' name='pcid'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='require' name='arat'/>
     <feature policy='require' name='tsc_adjust'/>
     <feature policy='require' name='xsaveopt'/>
     <feature policy='disable' name='cr8legacy'/>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;5;# ps aux | grep cr8legacy;"...-cpu SandyBridge,vme=on,ss=on,pcid=on,hypervisor=on,arat=on,
 tsc_adjust=on,xsaveopt=on,cr8legacy=on ...
 
 (guest can start successfully, with cr8legacy=on  in qemu command line)";;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;6;"3. login guest to check the cpu flags
 # cat /proc/cpuinfo | grep cr8legacy

";no output;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;7;4. restart libvirtd, check the xml, and qemu command line, there is no changes;xml is disable, and qemu command line is cr8legacy=on;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;8;5. save / restore, check the xml, and qemu command line;the xml not change keep as disable, qemu commandline change to cr8legacy=off;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;9;6. managedsave / start, check the xml, and qemu command line;the xml not change keep as disable, qemu commandline change to cr8legacy=off;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;10;7. do migration to intel host, check the xml, and qemu command line, there is no changes;the xml not change keep as disable, qemu commandline change to cr8legacy=off;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;11;require;​​;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;12;"1. # virsh edit rhel7
 ...
  <cpu mode='host-model'>
     <feature policy='require' name='cr8legacy'/>
   </cpu>
 ...

 # virsh dumpxml rhel7 | grep /cpu -B3";" <cpu mode='host-model' check='partial'>
     <model fallback='allow'/>
     <feature policy='require' name='cr8legacy'/>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;13;"2. start the guest
 # virsh start rhel7

";"error: Failed to start domain rhel7
 error: the CPU is incompatible with host CPU: Host CPU does not provide required features: cr8legacy";;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;14;optional;​​;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;15;"1. # virsh edit rhel7
   <cpu mode='host-model'>
     <feature policy='optional' name='cr8legacy'/>
   </cpu>";​​;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;16;"2. # virsh start rhel7
 Domain rhel7 started
 # virsh dumpxml rhel7 | grep /cpu -B11




";"  <cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>SandyBridge</model>
     <vendor>Intel</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ss'/>
     <feature policy='require' name='pcid'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='require' name='arat'/>
     <feature policy='require' name='tsc_adjust'/>
     <feature policy='require' name='xsaveopt'/>
    <feature policy='disable' name='cr8legacy'/>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;17;# ps aux | grep rhel7;"  -cpu SandyBridge,vme=on,ss=on,pcid=on,hypervisor=on,arat=on,
 tsc_adjust=on,xsaveopt=on,cr8legacy=off ";;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;18;"3. login guest to check the cpu flags, cr8legacy exists
 # cat /proc/cpuinfo | grep cr8legacy";do not exists;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;19;4. restart libvirtd, check the xml, and qemu command line, there is no changes;no change with step 2, for xml and for qemu command line;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;20;5. save / restore, check the xml, and qemu command line, there is no changes;no change with step 2, for xml and for qemu command line;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;21;6. managedsave / start, check the xml, and qemu command line, there is no changes;no change with step 2, for xml and for qemu command line;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;22;7. do migration to intel host, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;23;disable;​​;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;24;"1. # virsh edit rhel7
   <cpu mode='host-model'>
     <feature policy='disable' name='cr8legacy'/>
   </cpu>

 # virsh dumpxml rhel7 | grep /cpu -B2";"# virsh dumpxml rhel7  | grep /cpu -B3
   <cpu mode='host-model' check='partial'>
     <model fallback='allow'/>
     <feature policy='disable' name='cr8legacy'/>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;25;"2. # virsh start rhel7
 Domain rhel7 started

 # virsh dumpxml rhel7 | grep /cpu -B11
";" <cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>SandyBridge</model>
     <vendor>Intel</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ss'/>
     <feature policy='require' name='pcid'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='require' name='arat'/>
     <feature policy='require' name='tsc_adjust'/>
     <feature policy='require' name='xsaveopt'/>
     <feature policy='disable' name='cr8legacy'/>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;26;# ps aux | grep rhel7;"... -cpu SandyBridge,vme=on,ss=on,pcid=on,hypervisor=on,arat=on,
 tsc_adjust=on,xsaveopt=on,cr8legacy=off  ...";;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;27;"3. check on guest, the avx not exists
 # cat /proc/cpuinfo | grep avx";no output;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;28;4. restart libvirtd, check the xml, and qemu command line, there is no changes;no change for qemu command line and xml;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;29;5. save / restore, check the xml, and qemu command line, there is no changes;no change for qemu command line and xml;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;30;6. managedsave / start, check the xml, and qemu command line, there is no changes;no change for qemu command line and xml;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;31;7. do migration to intel host, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;32;forbid;​​;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;33;"1. # virsh edit rhel7
  <cpu mode='host-model'>
     <feature policy='forbid' name='cr8legacy'/>
   </cpu>

 # virsh dumpxml rhel7 | grep /cpu -B3";"  <cpu mode='host-model' check='partial'>
     <model fallback='allow'/>
     <feature policy='forbid' name='cr8legacy'/>
   </cpu>
 
​​";;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;34;"2. # virsh start rhel7
 Domain rhel7 started

 # virsh dumpxml rhel7 | grep /cpu -B11


";"  <cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>SandyBridge</model>
     <vendor>Intel</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ss'/>
     <feature policy='require' name='pcid'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='require' name='arat'/>
     <feature policy='require' name='tsc_adjust'/>
     <feature policy='require' name='xsaveopt'/>
     <feature policy='forbid' name='cr8legacy'/>
   </cpu>
 
 guest can start as host do not support cr8legacy";;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;35;check qemu command line;"-cpu SandyBridge,vme=on,ss=on,pcid=on,hypervisor=on,arat=on,
 tsc_adjust=on,xsaveopt=on,cr8legacy=off";;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;36;3. restart libvirtd, check the xml, and qemu command line, there is no changes;no change for qemu command line and xml;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;37;4. save / restore, check the xml, and qemu command line, there is no changes;no change for qemu command line and xml;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;38;5. managedsave / start, check the xml, and qemu command line, there is no changes;no change for qemu command line and xml;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;39;6. do migration to intel host, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;40;"change the cpu mode to custom + check=partial, and redo the steps, the result should be the same, and you can also refer to the table in description
 # virsh edit rhel
 ...
 <cpu mode='custom' check='partial'>
 <model fallback='allow'>core2duo</model>  ==> use the model which your host fully support
 <cpu>";​​;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;41;force;"vm start with xml change to disable, and qemu comandline is xx=on
 after migration, save->restore, managedsave,  qemu commandline also change to '-cpu, xx=off'";;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;42;require;can not start;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;43;optional;vm start with xml change to disable,and qemu comandline is xx=off;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;44;disable;vm start with xml is disable,and qemu comandline is xx=off;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;45;forbid;vm start with xml is forbid,and qemu comandline is xx=off;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;46;"change the cpu mode to host-passthrough + check=partial, and redo the steps, the result should be the same, and you can also refer to the table in description
 # virsh edit rhel
 ...
 <cpu mode='host-passthrough' check='partial'/>
 ...";​​;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;47;force;"vm start with xml change to disable, and qemu comandline is '-cpu, xx=on'
 after migration, save->restore, managedsave,  qemu commandline also change to '-cpu, xx=off'
 
 (current not change to disable, need to udpate)";;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;48;require;"can not start
 
 (current can start, need to udpate)";;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;49;optional;need to update (current vm start and xml is still optional,and qemu comandline has no such flag);;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;50;disable;start with -cpu, xx=off, xml is disable;;RedHatEnterpriseLinux7/RHEL-113694
77;;;;;;;;;51;forbid;start with -cpu, xx=off, xml is forbid;;RedHatEnterpriseLinux7/RHEL-113694
78;RHEL-113697;[host-passthrough] Check feature policy for host-passthrough mode with cr8legacy feature which host do not support - Bug 1515677;continue with above case;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"Scenario 2: 
 cr8legacy: on intel host which to not support this feature"; ;Test Case;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;2;force;​​;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;3;"1. # virsh edit rhel7
 ...
  <cpu mode='host-passthrough'>
     <feature policy='force' name='cr8legacy'/>
   </cpu>
 ...
 # virsh dumpxml rhel7 | grep /cpu -B3
  ";"   <cpu mode='host-passthrough' check='none'>
     <feature policy='force' name='cr8legacy'/>
   </cpu>


";;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;4;"2. # virsh start rhel7
 Domain rhel7 started

 # virsh dumpxml rhel7 | grep /cpu -B2
";" <cpu mode='host-passthrough' check='none'>
     <feature policy='force' name='cr8legacy'/>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;5;# ps aux | grep cr8legacy;"...-cpu host,cr8legacy=on...
 
 (guest can start successfully, with cr8legacy=on  in qemu command line)";;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;6;# cat /var/log/libvirt/qemu/rhel7.log | grep cr8legacy;warning: host doesn't support requested feature: CPUID.80000001H:ECX.cr8legacy [bit 4];;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;7;"3. login guest to check the cpu flags
 # cat /proc/cpuinfo | grep cr8legacy

";no output;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;8;4. restart libvirtd, check the xml, and qemu command line, there is no changes;no change for cpu qemu command line and xml;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;9;5. save / restore, check the xml, and qemu command line, there is no changes;no change for cpu qemu command line and xml;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;10;6. managedsave / start, check the xml, and qemu command line, there is no changes;"no change for cpu qemu command line and xml
 cover bug 1207095";;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;11;7. do migration to intel host, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;12;require - need update Bug 1515677;​​;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;13;"1. # virsh edit rhel7
 ...
  <cpu mode='host-passthrough'>
     <feature policy='require' name='cr8legacy'/>
   </cpu>
 ...

 # virsh dumpxml rhel7 | grep /cpu -B2";"  <cpu mode='host-passthrough' check='none'>
     <feature policy='require' name='cr8legacy'/>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;14;"2. start the guest and check the qemu command line
 # virsh start rhel7
";" should not start successfully, need update
 
​​";;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;15;optional;​​;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;16;"1. # virsh edit rhel7
  <cpu mode='host-passthrough'>
     <feature policy='optional' name='cr8legacy'/>
   </cpu>";​​;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;17;"2. # virsh start rhel7
 Domain rhel7 started
 # virsh dumpxml rhel7 | grep /cpu -B2

";"  <cpu mode='host-passthrough' check='none'>
     <feature policy='optional' name='cr8legacy'/>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;18;# ps aux | grep rhel7;-cpu host;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;19;"3. login guest to check the cpu flags, avx exists
 # cat /proc/cpuinfo | grep cr8legacy";cr8legacy do not exists as host do not support;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;20;4. restart libvirtd, check the xml, and qemu command line, there is no changes;the xml and qemu command line do not change;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;21;5. save / restore, check the xml, and qemu command line, there is no changes;the xml and qemu command line do not change;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;22;6. managedsave / start, check the xml, and qemu command line, there is no changes;the xml and qemu command line do not change;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;23;7. do migration to intel host, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;24;disable;​​;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;25;"1. # virsh edit rhel7
   <cpu mode='host-passthrough'>
     <feature policy='disable' name='cr8legacy'/>
   </cpu>

 # virsh dumpxml rhel7 | grep /cpu -B2";" <cpu mode='host-passthrough' check='none'>
     <feature policy='disable' name='cr8legacy'/>
   </cpu>

";;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;26;"2. # virsh start rhel7
 Domain rhel7 started

 # virsh dumpxml rhel7 | grep /cpu -B2
";"  <cpu mode='host-passthrough' check='none'>
     <feature policy='disable' name='cr8legacy'/>
   </cpu>
​​";;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;27;# ps aux | grep rhel7;-cpu host,cr8legacy=off ;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;28;"3. check on guest, the avx not exists
 # cat /proc/cpuinfo | grep avx";no output;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;29;4. restart libvirtd, check the xml, and qemu command line, there is no changes;the xml and qemu command line do not change;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;30;5. save / restore, check the xml, and qemu command line, there is no changes;the xml and qemu command line do not change;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;31;6. managedsave / start, check the xml, and qemu command line, there is no changes;the xml and qemu command line do not change;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;32;7. do migration to intel host, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;33;forbid ;​​;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;34;"1. # virsh edit rhel7
  <cpu mode='host-passthrough'>
     <feature policy='forbid' name='cr8legacy'/>
   </cpu>

 # virsh dumpxml rhel7 | grep /cpu -B3";"  <cpu mode='host-passthrough' check='none'>
     <feature policy='forbid' name='cr8legacy'/>
   </cpu>
 
 
​​";;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;35;"2. # virsh start rhel7
 Domain rhel7 started
 # virsh dumpxml rhel7 | grep /cpu -B2
";" <cpu mode='host-passthrough' check='none'>
     <feature policy='forbid' name='cr8legacy'/>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;36;3. # ps aux | grep rhel7;-cpu host,cr8legacy=off;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;37;4. restart libvirtd, check the xml, and qemu command line, there is no changes;the xml and qemu command line do not change;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;38;5. save / restore, check the xml, and qemu command line, there is no changes;the xml and qemu command line do not change;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;39;6. managedsave / start, check the xml, and qemu command line, there is no changes;the xml and qemu command line do not change;;RedHatEnterpriseLinux7/RHEL-113697
78;;;;;;;;;40;7. do migration to intel host, check the xml, and qemu command line, there is no changes;​​;;RedHatEnterpriseLinux7/RHEL-113697
79;RHEL-113841;Detect host CPU model by asking QEMU - S6: TCG + host-model + invalid flags;Check if libvirt detect cpu model from qemu instead of host;Yalan Zhang (yalzhang);Medium;Negative;Manual Only;;1;" S6: TCG + host-model + invalid flags
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113841
79;;;;;;;;;2;" # virsh dumpxml r7
 <domain type='qemu'>
 ...
   <cpu mode='host-model' check='full'>
     <model fallback='allow'/>
     <feature policy='require' name='svmss'/>
 ...
 
​​";​​;;RedHatEnterpriseLinux7/RHEL-113841
79;;;;;;;;;3; # virsh start r7;"error: Failed to start domain r7
 error: unsupported configuration: unknown CPU feature: svmss";;RedHatEnterpriseLinux7/RHEL-113841
80;RHEL-113842;Detect host CPU model by asking QEMU- S5: Tcg + host-model + check=full;Check if libvirt detect cpu model from qemu instead of host;Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1; S5: Tcg + host-model + check=full;​​;Test Case;RedHatEnterpriseLinux7/RHEL-113842
80;;;;;;;;;2;" 1. with host do not support feature 
 # cat /proc/cpuinfo | grep rtm
 --> no output
 
 # virsh dumpxml r7
 <domain type='qemu'>
 ...
   <cpu mode='host-model' check='full'>
     <model fallback='allow'/>
     <feature policy='require' name='rtm'/>
     <numa>
       <cell id='0' cpus='0-2' memory='524288' unit='KiB'/>
       <cell id='1' cpus='3-5' memory='524288' unit='KiB'/>
     </numa>
   </cpu>
 ...
​​";​​;;RedHatEnterpriseLinux7/RHEL-113842
80;;;;;;;;;3;# virsh start r7;"error: Failed to start domain r7
 error: operation failed: guest CPU doesn't match specification: missing features: rtm";;RedHatEnterpriseLinux7/RHEL-113842
80;;;;;;;;;4;"2.  with host and qemu support feature
 # virsh domcapabilities  | grep svm
       <feature policy='require' name='svm'/>
 
  # virsh dumpxml r7
 <domain type='qemu'>
 ...
   <cpu mode='host-model' check='full'>
     <model fallback='allow'/>
     <feature policy='require' name='svm'/> --> host support
     <numa>
       <cell id='0' cpus='0-2' memory='524288' unit='KiB'/>
       <cell id='1' cpus='3-5' memory='524288' unit='KiB'/>
     </numa>
   </cpu>
 ...
​​";​​;;RedHatEnterpriseLinux7/RHEL-113842
80;;;;;;;;;5;# virsh start r7;Domain r7 started;;RedHatEnterpriseLinux7/RHEL-113842
80;;;;;;;;;6;"# virsh dumpxml r7
 
 
 
 
 
 
 
 
​​";"...
   <cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>Opteron_G4</model>
     <vendor>AMD</vendor>
     ......
     <feature policy='require' name='svm'/>
     <numa>
       <cell id='0' cpus='0-2' memory='524288' unit='KiB'/>
       <cell id='1' cpus='3-5' memory='524288' unit='KiB'/>
     </numa>
   </cpu>
 ...";;RedHatEnterpriseLinux7/RHEL-113842
80;;;;;;;;;7;# ps aux|grep qemu;"qemu     20331  101  1.2 2378380 402496 ?      Sl   00:12   0:29 ... -cpu Opteron_G4,acpi=on,ss=on,monitor=on,movbe=on,hypervisor=on,
 arat=on,fsgsbase=on,bmi1=on,smep=on,bmi2=on,erms=on,mpx=on,
 adx=on,smap=on,clflushopt=on,pku=on,ospke=on,xsaveopt=on,
 xgetbv1=on,mmxext=on,3dnowext=on,3dnow=on,cr8legacy=on,
 avx=off,misalignsse=off,3dnowprefetch=off,xop=off,fma4=off,svm=on";;RedHatEnterpriseLinux7/RHEL-113842
80;;;;;;;;;8;" login guest to check cpu flags
 # cat /proc/cpuinfo | grep Flags|uniq";"IN GUEST:
 
 Flags:                 fpu de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush acpi mmx fxsr sse sse2 ss syscall nx mmxext pdpe1gb lm 3dnowext 3dnow art rep_good nopl extd_apicid eagerfpu pni pclmulqdq monitor ssse3 cx16 sse4_1 sse4_2 movbe popcnt aes xsave hypervisor lahf_lm svm cr8_legacy abm sse4a fsgsbase bmi1 smep bmi2 erms mpx adx smap clflushopt xsaveopt xgetbv1 arat";;RedHatEnterpriseLinux7/RHEL-113842
81;RHEL-113843;Detect host CPU model by asking QEMU- S4: not exists feature;Check if libvirt detect cpu model from qemu instead of host;Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1; S4: not exsits feature;​​;Test Case;RedHatEnterpriseLinux7/RHEL-113843
81;;;;;;;;;2;"1.  # virsh dumpxml r7 |grep -A3 host-
   <cpu mode='host-passthrough' check='full'>
     <feature policy='require' name='svms'/>   <---- not exist
     <numa>
       <cell id='0' cpus='0-2' memory='524288' unit='KiB'/>
";​​;;RedHatEnterpriseLinux7/RHEL-113843
81;;;;;;;;;3;# virsh start r7 ;"error: Failed to start domain rhel
 error: unsupported configuration: unknown CPU feature: svms";;RedHatEnterpriseLinux7/RHEL-113843
81;;;;;;;;;4;"2. # virsh dumpxml rhel 
 <cpu mode='host-model' check='none'>
     <model fallback='allow'/>
     <feature policy='disable' name='svms'/>
";​​;;RedHatEnterpriseLinux7/RHEL-113843
81;;;;;;;;;5;# virsh start rhel7;"error: Failed to start domain rhel
 error: unsupported configuration: unknown CPU feature: svms

";;RedHatEnterpriseLinux7/RHEL-113843
81;;;;;;;;;6;"3. # virsh edit rhel  
 <cpu mode='custom' match='exact' check='none'>
     <model fallback='allow'>core2duo</model>
     <feature policy='disable' name='cmt'/>  --> feature exists but not supported by qemu
   </cpu>
​​";​​;;RedHatEnterpriseLinux7/RHEL-113843
81;;;;;;;;;7;"# virsh start rhel
 
​​";"error: Failed to start domain rhel
 error: internal error: process exited while connecting to monitor: 2017-11-24T10:29:19.268643Z qemu-kvm: -chardev pty,id=charserial0: char device redirected to /dev/pts/3 (label charserial0)
 2017-11-24T10:29:19.287473Z qemu-kvm: can't apply global core2duo-x86_64-cpu.cmt=off: Property '.cmt' not found
​​";;RedHatEnterpriseLinux7/RHEL-113843
82;RHEL-113844;Detect host CPU model by asking QEMU - S3: Start a guest with host-model and a guest unsupported flags with require policy;Check if libvirt detect cpu model from qemu instead of host;Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1;"S3: start a guest with host-model and a guest unsupported flags:
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113844
82;;;;;;;;;2;"1. check is none (no check from libvirt side)
 
 # virsh dumpxml r7 --inactive |grep -A5 host-model
   <cpu mode='host-model' check='none'>
     <model fallback='allow'/>
     <feature policy='require' name='svm'/>
     <numa>
       <cell id='0' cpus='0-2' memory='524288' unit='KiB'/>
       <cell id='1' cpus='3-5' memory='524288' unit='KiB'/>
​​";​​;;RedHatEnterpriseLinux7/RHEL-113844
82;;;;;;;;;3;"# virsh start r7
 Domain r7 started";​​;;RedHatEnterpriseLinux7/RHEL-113844
82;;;;;;;;;4;# virsh dumpxml r7 |grep -A20 custom;"<cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>Opteron_G5</model>
     <vendor>AMD</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='x2apic'/>
     <feature policy='require' name='tsc-deadline'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='require' name='arat'/>
     <feature policy='require' name='tsc_adjust'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='disable' name='rdtscp'/>
     <feature policy='disable' name='svm'/>        <--- move to disable
     <numa>
       <cell id='0' cpus='0-2' memory='524288' unit='KiB'/>
       <cell id='1' cpus='3-5' memory='524288' unit='KiB'/>
     </numa>";;RedHatEnterpriseLinux7/RHEL-113844
82;;;;;;;;;5;# ps aux|grep qemu;"qemu     17954 13.7  1.2 2021404 404260 ?      Sl   23:32   0:25 .... -cpu Opteron_G5,vme=on,x2apic=on,tsc-deadline=on,
 hypervisor=on,arat=on,tsc_adjust=on,
 bmi1=on,mmxext=on,fxsr_opt=on,
 cmp_legacy=on,cr8legacy=on,osvw=on,
 rdtscp=off,svm=on
​​";;RedHatEnterpriseLinux7/RHEL-113844
82;;;;;;;;;6;"2. check is partial (libvirt will check if feature name is supported by host):
 
 # virsh dumpxml r7 |grep -A3 host-model
   <cpu mode='host-model' check='partial'>
     <model fallback='allow'/>
     <feature policy='require' name='mpx'/>
     <numa>
​​";​​;;RedHatEnterpriseLinux7/RHEL-113844
82;;;;;;;;;7;# virsh capabilities |grep mpx;no outputs;;RedHatEnterpriseLinux7/RHEL-113844
82;;;;;;;;;8;# virsh start r7;"error: Failed to start domain r7
 error: the CPU is incompatible with host CPU: Host CPU does not provide required features: mpx";;RedHatEnterpriseLinux7/RHEL-113844
82;;;;;;;;;9;" 3. check is full (guest fail to start if the vcpu flags not match xml):
 
 # virsh dumpxml r7 |grep -A3 host-model
   <cpu mode='host-model' check='full'>
     <model fallback='allow'/>
     <feature policy='require' name='svm'/>
     <numa>
​​";​​;;RedHatEnterpriseLinux7/RHEL-113844
82;;;;;;;;;10;# virsh start r7;"error: Failed to start domain r7
 error: operation failed: guest CPU doesn't match specification: missing features: svm";;RedHatEnterpriseLinux7/RHEL-113844
83;RHEL-113845;Detect host CPU model by asking QEMU - S2: Start guest with host-model;Check if libvirt detect cpu model from qemu instead of host;Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1;"S2: start a guest with host-model:
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113845
83;;;;;;;;;2;"1. guest xml
 
   <cpu mode='host-model' check='full'>
     <model fallback='allow'/>
     <numa>
       <cell id='0' cpus='0-2' memory='524288' unit='KiB'/>
       <cell id='1' cpus='3-5' memory='524288' unit='KiB'/>
     </numa>
   </cpu>
 
​​";​​;;RedHatEnterpriseLinux7/RHEL-113845
83;;;;;;;;;3;"2. start guest
 
 # virsh start r7
 Domain r7 started
​​";​​;;RedHatEnterpriseLinux7/RHEL-113845
83;;;;;;;;;4;"3. recheck xml:
 
 # virsh dumpxml r7
 
​​";"...
   <cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>Opteron_G5</model>
     <vendor>AMD</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='x2apic'/>
     <feature policy='require' name='tsc-deadline'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='require' name='arat'/>
     <feature policy='require' name='tsc_adjust'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='disable' name='rdtscp'/>
     <feature policy='disable' name='svm'/>
     <numa>
       <cell id='0' cpus='0-2' memory='524288' unit='KiB'/>
       <cell id='1' cpus='3-5' memory='524288' unit='KiB'/>
     </numa>
   </cpu>
 ...";;RedHatEnterpriseLinux7/RHEL-113845
83;;;;;;;;;5;"4. check qemu command line
 # ps aux|grep qemu
 
 
 
​​";"qemu     17388 20.3  1.4 2029600 460316 ?      Sl   23:26   0:25 .... -cpu Opteron_G5,vme=on,x2apic=on,tsc-deadline=on,hypervisor=on,arat=on,tsc_adjust=on,bmi1=on,mmxext=on,
 fxsr_opt=on,cmp_legacy=on,cr8legacy=on,osvw=on,rdtscp=off,svm=off";;RedHatEnterpriseLinux7/RHEL-113845
83;;;;;;;;;6;"5. login guest check guest cpu flags:
 
 # lscpu |grep Flags
 
​​";Flags:                 fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 syscall nx mmxext fxsr_opt pdpe1gb lm art rep_good nopl extd_apicid pni pclmulqdq ssse3 fma cx16 sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx f16c hypervisor lahf_lm cmp_legacy cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw xop fma4 tbm tsc_adjust bmi1 arat;;RedHatEnterpriseLinux7/RHEL-113845
84;RHEL-113859;[full check] Check feature policy for cr8legacy feature (qemu support, host not support) + check=full (Iterable);"performance for check=full 
feature policy | qemu support host not support RHEL-113694  cr8legacy
force | can not start error: Failed to start domain rhel error: operation failed: guest CPU doesn't match specification: missing features: cr8legacy
require | can not start error: Failed to start domain rhel error: operation failed: guest CPU doesn't match specification: missing features: cr8legacy
optional | start with cr8legacy=off, xml change to disable
disable | start with cr8legacy=off
forbid | start with cr8legacy=off";Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1;"host-model
 <cpu mode='host-model' check='full'>
 <feature policy='xx' name='cr8legacy'/>
 </cpu>
 
 host-passthrough
 <cpu mode='host-passthrough' check='full'>
 <feature policy='xx' name='cr8legacy'/>
 </cpu>
 
 custom
 <cpu mode='custom' match='minimum' check='full'>
 <model fallback='allow'>core2duo</model>  ==> use the model which your host fully support
 <feature policy='xx' name='cr8legacy'/>
 <cpu>";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113859
84;;;;;;;;;2;"1. set the xml with mode  as above with check=full, and choose one feature do not support on your host, see 'cr8legacy'
​​";​​;;RedHatEnterpriseLinux7/RHEL-113859
84;;;;;;;;;3;2. force;"can not start with error
 
 error: Failed to start domain rhel
 error: operation failed: guest CPU doesn't match specification: missing features: cr8legacy";;RedHatEnterpriseLinux7/RHEL-113859
84;;;;;;;;;4;3. require;"can not start with error
 
 error: Failed to start domain rhel
 error: operation failed: guest CPU doesn't match specification: missing features: cr8legacy";;RedHatEnterpriseLinux7/RHEL-113859
84;;;;;;;;;5;4. optional;start with cr8legacy=off, xml change to disable;;RedHatEnterpriseLinux7/RHEL-113859
84;;;;;;;;;6;5. disable;start with cr8legacy=off;;RedHatEnterpriseLinux7/RHEL-113859
84;;;;;;;;;7;6. forbid;start with cr8legacy=off;;RedHatEnterpriseLinux7/RHEL-113859
85;RHEL-113860;[full check] Check feature policy for avx feature (qemu support, host  support) + check=full (Iterable);"performance for check=full 
feature policy | qemu support host support RHEL-113676 avx
force | start with avx=on
require | start with avx=on
optional | start with avx=on
disable | start with avx=off
forbid | start with avx=off";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;" host-model
 <cpu mode='host-model' check='full'>
 <feature policy='xx' name='cr8legacy'/>
 </cpu>
 
 host-passthrough
 <cpu mode='host-passthrough' check='full'>
 <feature policy='xx' name='cr8legacy'/>
 </cpu>
 
 custom
 <cpu mode='custom'  match='minimum' check='full'>
 <model fallback='allow'>core2duo</model>  ==> use the model which your host fully support
 <feature policy='xx' name='cr8legacy'/>
 <cpu>";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113860
85;;;;;;;;;2; 1. set the xml with one of the mode  as above, and choose one feature do support on your host, see 'avx';​​;;RedHatEnterpriseLinux7/RHEL-113860
85;;;;;;;;;3; 2. force; start with avx=on;;RedHatEnterpriseLinux7/RHEL-113860
85;;;;;;;;;4; 3. require; start with avx=on;;RedHatEnterpriseLinux7/RHEL-113860
85;;;;;;;;;5; 4. optional; start with avx=on;;RedHatEnterpriseLinux7/RHEL-113860
85;;;;;;;;;6; 5. disable; start with avx=off;;RedHatEnterpriseLinux7/RHEL-113860
85;;;;;;;;;7;6. forbid ; start with avx=off;;RedHatEnterpriseLinux7/RHEL-113860
86;RHEL-113928;[cpu-stats] Provide cpu statistics information  - Bug 1331228;cpu-stats domain [--total] [start] [count]  it provides the host cpu statistics;Yalan Zhang (yalzhang);Medium;Positive;Automated;;1;"Below steps   -Bug 1331228
 prepare a vm with 4 vcpus
  <vcpu placement='static'>4</vcpu>

 # virsh cpu-stats rhel7.4
";"error: Failed to retrieve CPU statistics for domain 'rhel7.4'
 error: Requested operation is not valid: domain is not running

 (the error message is sensible)";Test Case;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;2;"# virsh start rhel7.4
 Domain rhel7.4 started

 # virsh cpu-stats rh7.2
";"CPU0:
    cpu_time             8.133394075 seconds
    vcpu_time            7.614799103 seconds
 CPU1:
    cpu_time             8.736083836 seconds
    vcpu_time            8.023468680 seconds
 CPU2:
    cpu_time             7.717729821 seconds
    vcpu_time            7.020648041 seconds
 CPU3:
    cpu_time             9.465514535 seconds
    vcpu_time            8.454502046 seconds
 Total:
    cpu_time            34.052722267 seconds
    user_time            1.190000000 seconds
    system_time         14.220000000 seconds

 (Default it shows stats for all host CPUs)";;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;3;# virsh cpu-stats rhel7.4 --total;"Total:
 cpu_time            14.441240851 seconds
 user_time            0.530000000 seconds
 system_time          3.010000000 seconds
";;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;4;"# virsh cpu-stats rhel7.4 --start 2


";"CPU2:
 cpu_time             1.218183019 seconds
 vcpu_time            1.166724969 seconds
 CPU3:
 cpu_time             0.775328113 seconds
 vcpu_time            0.708230082 seconds";;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;5;"# virsh cpu-stats rh7.2 --start 4

";"error: Start CPU 4 is out of range (min: 0, max: 3)

 (check the error message is reasonable)";;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;6;"# virsh cpu-stats rh7.2 --start -1

";"error: Invalid value for start CPU

 (check the error message is reasonable)";;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;7;"# virsh cpu-stats rh7.2 --start 6555234

";error: Start CPU 6555234 is out of range (min: 0, max: 3);;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;8;"# virsh cpu-stats rh7.2 --start sdf
";"error: Numeric value 'sdf' for <start> option is malformed or out of range
";;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;9;"# virsh cpu-stats rh7.2 --start ' '
";error: Numeric value ' ' for <start> option is malformed or out of range;;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;10;"# virsh cpu-stats rh7.2 --start ''

";error: Numeric value '' for <start> option is malformed or out of range;;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;11;"set cpuset in the xml
  <vcpu placement='static' cpuset='1-2' current='2'>4</vcpu>
 then start the guest";​​;;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;12;"# virsh vcpuinfo rhel7.4

";"VCPU:           0
 CPU:            1
 State:          running
 CPU time:       6.7s
 CPU Affinity:   -yy-

 VCPU:           1
 CPU:            1
 State:          running
 CPU time:       0.4s
 CPU Affinity:   -yy-";;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;13;"# virsh cpu-stats rhel7.4 
";"CPU0:
 cpu_time             0.000000000 seconds
 vcpu_time            0.000000000 seconds
 CPU1:
 cpu_time             6.552257983 seconds
 vcpu_time            6.307789100 seconds
 CPU2:
 cpu_time             4.364623101 seconds
 vcpu_time            4.170468881 seconds
 CPU3:
 cpu_time             0.000000000 seconds
 vcpu_time            0.000000000 seconds
 Total:
 cpu_time            10.916881084 seconds
 user_time            0.310000000 seconds
 system_time          1.310000000 seconds

 (the vcpu_time for cpu0 and cpu3 is 0 as guest bind to cpu1-2)";;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;14;"* Below steps are only for PPC *  -Bug 1249441
          Start a guest on PPC
          # virsh list --all
";" Id    Name                           State
          ----------------------------------------------------
           10    guest                          running";;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;15;"Get the cpu statistic of guest on PPC.

          # virsh cpu-stats vm2";Results are like those in Setup.;;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;16;"Get cpu statistic info using --start <num> (num should be >= 32).

          # virsh cpu-stats --domain vm2 --start 32";No any error messages and the output should be with correct start_cpu option provided.;;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;17;Repeat above step with any other num, such as 152,;No any error messages and the output should be with correct start_cpu option provided if the number is valid;;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;18;Repeat above step with number which is larger than max_num, or negativevirsh cpu-stats vm2 --start 78 --count -1;"There should be meaningful error message shown
 error: Invalid value for number of CPUs to show";;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;19;virsh cpu-stats vm2 --start -78 --count 3;error: Invalid value for start CPU;;RedHatEnterpriseLinux7/RHEL-113928
86;;;;;;;;;20;virsh cpu-stats 2 --start 60 --count 0;<no output>;;RedHatEnterpriseLinux7/RHEL-113928
87;RHEL-113944;[guestvcpus] enable / disable specific guest vcpu by guest agent;Test the command guestvcpus;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"# virsh edit rhel7.4 
 <vcpu placement='static' cpuset='0-3' current='2'>4</vcpu>
 
 # virsh start rhel7.4
 Domain rhel7.4 started";​​;Test Case;RedHatEnterpriseLinux7/RHEL-113944
87;;;;;;;;;2;"# virsh vcpucount rhel7.4
 maximum      config         4
 maximum      live           4
 current      config         2
 current      live           2
 
 # virsh vcpucount rhel7.4 --guest
 2";​​;;RedHatEnterpriseLinux7/RHEL-113944
87;;;;;;;;;3;"1. disable specific vcpu
 
 # virsh guestvcpus rhel7.4 1 --disable
 # virsh vcpucount rhel7.4 --guest
 1
 
 check on guest
 # cat /proc/cpuinfo | grep processor | wc -l
 1";​​;;RedHatEnterpriseLinux7/RHEL-113944
87;;;;;;;;;4;"2. operate on the not config vcpu
 
 # virsh guestvcpus rhel7.4  2 --enable
​​";error: invalid argument: guest is missing vCPUs '2';;RedHatEnterpriseLinux7/RHEL-113944
87;;;;;;;;;5;"3. enable vcpu
 # virsh guestvcpus rhel7.4  1 --enable
 # virsh vcpucount rhel7.4 --guest
 2
 
 check on guest, there are 2 vcpus
 # cat /proc/cpuinfo | grep processor | wc -l
 2";​​;;RedHatEnterpriseLinux7/RHEL-113944
87;;;;;;;;;6;"4. disable vcpu0
 # virsh guestvcpus rhel7.4  0 --disable
 
 check on guest, only cpu1 is there";​​;;RedHatEnterpriseLinux7/RHEL-113944
87;;;;;;;;;7;"5. disable the last vcpu
 # virsh guestvcpus rhel7.4  1 --disable";"error: internal error: unable to execute QEMU agent command 'guest-set-vcpus': pwrite(""/sys/devices/system/cpu/cpu1//online""): Device or resource busy";;RedHatEnterpriseLinux7/RHEL-113944
88;RHEL-113951;[domxml-to-native][--domain] Convert domain XML config to a native guest configuration format - specified domain;"Test matrix:
 
 | --domain name | --domain uuid | --domain id
running | Yes | Yes | Yes
shutoff | Yes | Yes | -";Fangge Jin (fjin);High;Positive;Automated;;1;Prepare a running/shuoff guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL-113951
88;;;;;;;;;2;"Convert domain xml to qemu argv by specifying domain name:
 # virsh domxml-to-native qemu-argv --domain rhel7";"Get output like below:
 LC_ALL=C PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin QEMU_AUDIO_DRV=spice /usr/libexec/qemu-kvm -name guest=rhel7,debug-threads=on -object secret,id=masterKey0,format=raw,file=/var/lib/libvirt/qemu/domain--1-rhel7/master-key.aes -machine pc-i440fx-rhel7.5.0,accel=kvm,usb=off,vmport=off,dump-guest-core=off -cpu IvyBridge,hypervisor=on,arat=on,xsaveopt=on -m 1024 -realtime mlock=off -smp 1,sockets=1,cores=1,threads=1 -uuid 46d007ef-f1cf-4251-99f1-4724404217e6 -no-user-config -nodefaults -chardev socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain--1-rhel7/monitor.sock,server,nowait -mon chardev=charmonitor,id=monitor,mode=control -rtc base=utc,driftfix=slew -global kvm-pit.lost_tick_policy=delay -no-hpet -no-shutdown -global PIIX4_PM.disable_s3=1 -global PIIX4_PM.disable_s4=1 -boot strict=on -device ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x5.0x7 -device ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x5 -device ich9-usb-uhci2,masterbus=usb.0,firstport=2,bus=pci.0,addr=0x5.0x1 -device ich9-usb-uhci3,masterbus=usb.0,firstport=4,bus=pci.0,addr=0x5.0x2 -device virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x6 -drive file=/var/lib/libvirt/images/RHEL-7.5-x86_64-latest.qcow2,format=qcow2,if=none,id=drive-virtio-disk0 -device virtio-blk-pci,scsi=off,bus=pci.0,addr=0x9,drive=drive-virtio-disk0,id=virtio-disk0,bootindex=1 -drive file=/var/lib/libvirt/images/test.qcow2,format=qcow2,if=none,id=drive-virtio-disk1 -device virtio-blk-pci,scsi=off,bus=pci.0,addr=0x8,drive=drive-virtio-disk1,id=virtio-disk1 -drive file=/var/lib/libvirt/images/test1.qcow2,format=qcow2,if=none,id=drive-virtio-disk2 -device virtio-blk-pci,scsi=off,bus=pci.0,addr=0xa,drive=drive-virtio-disk2,id=virtio-disk2 -netdev tap,fd=25,id=hostnet0 -device rtl8139,netdev=hostnet0,id=net0,mac=52:54:00:14:1d:fe,bus=pci.0,addr=0x3 -chardev pty,id=charserial0 -device isa-serial,chardev=charserial0,id=serial0 -chardev spicevmc,id=charchannel0,name=vdagent -device virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0 -chardev socket,id=charchannel1,path=/var/lib/libvirt/qemu/channel/target/domain--1-rhel7/org.qemu.guest_agent.0,server,nowait -device virtserialport,bus=virtio-serial0.0,nr=2,chardev=charchannel1,id=channel1,name=org.qemu.guest_agent.0 -spice port=5901,tls-port=5902,addr=127.0.0.1,disable-ticketing,x509-dir=/etc/pki/libvirt-spice,seamless-migration=on -device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vram64_size_mb=0,vgamem_mb=16,max_outputs=1,bus=pci.0,addr=0x2 -device intel-hda,id=sound0,bus=pci.0,addr=0x4 -device hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -chardev spicevmc,id=charredir0,name=usbredir -device usb-redir,chardev=charredir0,id=redir0,bus=usb.0,port=1 -chardev spicevmc,id=charredir1,name=usbredir -device usb-redir,chardev=charredir1,id=redir1,bus=usb.0,port=2 -device virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x7 -msg timestamp=on
 
​​";;RedHatEnterpriseLinux7/RHEL-113951
88;;;;;;;;;3;"Convert domain xml to qemu argv by specifying domain uuid:
 # virsh domxml-to-native qemu-argv --domain `virsh domuuid rhel7`";"
 Same as last step";;RedHatEnterpriseLinux7/RHEL-113951
88;;;;;;;;;4;"Convert domain xml to qemu argv by specifying domain id:
 (only for running guest)
 # virsh domxml-to-native qemu-argv --domain `virsh domid rhel7`";"
 
 Same as last step";;RedHatEnterpriseLinux7/RHEL-113951
89;RHEL-113960;[Hyper-V][Network]Change queue weight by ethtool -X;For VM with multiqueue, change queue weight, and check receive packet effect;Yaju Cao (yacao);;Positive;Manual Only;;1;Boot VM with multiple vCPU, and add a Network Adapter for test; ;Test Case;RedHatEnterpriseLinux7/RHEL-113960
89;;;;;;;;;2;"Check NIC default queue weight. By default, each queue is given equal weight.
 # ethtool -x eth1";"e.g. VM with 8 vCPUs,
 #ethtool -x eth1
 RX flow hash indirection table for eth1 with 8 RX ring(s):
     0:      0     1     2     3     4     5     6     7
     8:      0     1     2     3     4     5     6     7
    16:      0     1     2     3     4     5     6     7
    24:      0     1     2     3     4     5     6     7
    32:      0     1     2     3     4     5     6     7
    40:      0     1     2     3     4     5     6     7
    48:      0     1     2     3     4     5     6     7
    56:      0     1     2     3     4     5     6     7
    64:      0     1     2     3     4     5     6     7
    72:      0     1     2     3     4     5     6     7
    80:      0     1     2     3     4     5     6     7
    88:      0     1     2     3     4     5     6     7
    96:      0     1     2     3     4     5     6     7
   104:      0     1     2     3     4     5     6     7
   112:      0     1     2     3     4     5     6     7
   120:      0     1     2     3     4     5     6     7
 RSS hash key:
 6d:5a:56:da:25....
 RSS hash function:
     toeplitz: on
     xor: off
     crc32: off
";;RedHatEnterpriseLinux7/RHEL-113960
89;;;;;;;;;3;"Disable specific queue. E.g. to disable queue 3 and 7:
 # ethtool -X eth1 weight 1 1 1 0 1 1 1 0


";"No queue 3 and 7 shown in table any more.
 # ethtool -x eth1
 RX flow hash indirection table for eth1 with 8 RX ring(s):
     0:      0     0     0     0     0     0     0     0
     8:      0     0     0     0     0     0     0     0
    16:      0     0     0     0     0     1     1     1
    24:      1     1     1     1     1     1     1     1
    32:      1     1     1     1     1     1     1     1
    40:      1     1     2     2     2     2     2     2
    48:      2     2     2     2     2     2     2     2
    56:      2     2     2     2     2     2     2     2
    64:      4     4     4     4     4     4     4     4
    72:      4     4     4     4     4     4     4     4
    80:      4     4     4     4     4     5     5     5
    88:      5     5     5     5     5     5     5     5
    96:      5     5     5     5     5     5     5     5
   104:      5     5     6     6     6     6     6     6
   112:      6     6     6     6     6     6     6     6
   120:      6     6     6     6     6     6     6     6
";;RedHatEnterpriseLinux7/RHEL-113960
89;;;;;;;;;4;"Send packet to VM (e.g. iperf3 from another VM), verify disabled queue will not receive packet any more.
 # ethtool -S eth1|grep rx_queue_3
";"Received packets on the queue won't increase as packets transmit to VM.

";;RedHatEnterpriseLinux7/RHEL-113960
89;;;;;;;;;5;"Change queue weight again. E.g. to balance among all 8 queues
 # ethtool -X eth1 equal 8";Queue weight changed to be same as default;;RedHatEnterpriseLinux7/RHEL-113960
89;;;;;;;;;6;"Send packet to VM (e.g. iperf3 from another VM), verify change effect.
 # ethtool -S eth1|grep rx_queue_3";Received packets are consistent with queue weight.;;RedHatEnterpriseLinux7/RHEL-113960
90;RHEL-114197;IDM-SSSD-TC: proxy_provider: misc: sssd runs out of available child slots and starts queuing requests in proxy mode bz1368467;"sssd runs out of available child slots and starts queuing requests in proxy mode bz1368467

";Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114197
91;RHEL-114198;IDM-SSSD-TC: ldap_provider: secrets_service: SSSD logs error upon adding secrets section bz1380395;SSSD logs error upon adding secrets section bz1380395;Amith Kumar Peethambaran (apeetham);Low;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114198
92;RHEL-114199;IDM-SSSD-TC: ldap_provider: inmemory_cache: Add a configuration option to SSSD to disable the memory cache bz1484376;"Add a configuration option to SSSD to disable the memory cache bz1484376

";Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114199
93;RHEL-114228;KN-TC: bonding/modes/mode6;KN-TC: bonding/modes/mode6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114228
94;RHEL-114229;KN-TC: team/sanity_check;KN-TC: team/sanity_check;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114229
95;RHEL-114230;KN-TC: team/module_load_unload;KN-TC: team/module_load_unload;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114230
96;RHEL-114231;KN-TC: team/libteam;KN-TC: team/libteam;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114231
97;RHEL-114232;KN-TC: team/runners/activebackup;KN-TC: team/runners/activebackup;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114232
98;RHEL-114233;KN-TC: team/runners/broadcast;KN-TC: team/runners/broadcast;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114233
99;RHEL-114234;KN-TC: team/runners/loadbalance;KN-TC: team/runners/loadbalance;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114234
100;RHEL-114235;KN-TC: team/runners/roundrobin;KN-TC: team/runners/roundrobin;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114235
101;RHEL-114236;KN-TC: team/runners/lacp;KN-TC: team/runners/lacp;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114236
102;RHEL-114237;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable-vlan-diff;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable-vlan-diff;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114237
103;RHEL-114238;KN-TC: bridge/bridge_1417289;KN-TC: bridge/bridge_1417289;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114238
104;RHEL-114239;KN-TC: nic/sanity_check FUNC=/LOCALWATCHDOG/avc;KN-TC: nic/sanity_check FUNC=/LOCALWATCHDOG/avc;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114239
105;RHEL-114240;KN-TC: openvswitch/topo FUNC=ovs-test-vlan1;KN-TC: openvswitch/topo FUNC=ovs-test-vlan1;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114240
106;RHEL-114241;KN-TC: openvswitch/topo FUNC=/LOCALWATCHDOG/avc;KN-TC: openvswitch/topo FUNC=/LOCALWATCHDOG/avc;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114241
107;RHEL-114242;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-id0;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-id0;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114242
108;RHEL-114243;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-id0;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-id0;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114243
109;RHEL-114244;KN-TC: openvswitch/topo FUNC=ovs-test-geneve-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-geneve-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114244
110;RHEL-114245;KN-TC: openvswitch/topo FUNC=ovs-test-geneve1-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-geneve1-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114245
111;RHEL-114246;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-geneve-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-geneve-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114246
112;RHEL-114247;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-geneve1-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-geneve1-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114247
113;RHEL-114248;KN-TC: openvswitch/topo FUNC=ovs-test-vm-geneve-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-vm-geneve-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114248
114;RHEL-114249;KN-TC: openvswitch/topo FUNC=ovs-test-vm-geneve1-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-vm-geneve1-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114249
115;RHEL-114250;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-geneve-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-geneve-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114250
116;RHEL-114251;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-geneve1-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-geneve1-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114251
117;RHEL-114252;KN-TC: nic/functions/offload FUNC=/LOCALWATCHDOG/avc;KN-TC: nic/functions/offload FUNC=/LOCALWATCHDOG/avc;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114252
118;RHEL-114254;KN-TC: nic/sanity_check FUNC=/LOCALWATCHDOG/dmesg/avc;KN-TC: nic/sanity_check FUNC=/LOCALWATCHDOG/dmesg/avc;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114254
119;RHEL-114296;KN-TC: openvswitch/topo FUNC=/LOCALWATCHDOG/dmesg/avc;KN-TC: openvswitch/topo FUNC=/LOCALWATCHDOG/dmesg/avc;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114296
120;RHEL-114297;KN-TC: vnic/sriov FUNC=sriov-test-vfname;KN-TC: vnic/sriov FUNC=sriov-test-vfname;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114297
121;RHEL-114298;KN-TC: vnic/sriov FUNC=sriov-test-hostdev-vmvf-remote;KN-TC: vnic/sriov FUNC=sriov-test-hostdev-vmvf-remote;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114298
122;RHEL-114299;KN-TC: vnic/sriov FUNC=sriov-test-bz1489964;KN-TC: vnic/sriov FUNC=sriov-test-bz1489964;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114299
123;RHEL-114300;KN-TC: vnic/sriov FUNC=sriov-test-vmvf1vf2-remote;KN-TC: vnic/sriov FUNC=sriov-test-vmvf1vf2-remote;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114300
124;RHEL-114301;KN-TC: vnic/sriov FUNC=sriov-test-spoofchk;KN-TC: vnic/sriov FUNC=sriov-test-spoofchk;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114301
125;RHEL-114302;KN-TC: vnic/sriov FUNC=sriov-test-bz1493953;KN-TC: vnic/sriov FUNC=sriov-test-bz1493953;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114302
126;RHEL-114303;KN-TC: vnic/sriov FUNC=sriov-test-bz1483396;KN-TC: vnic/sriov FUNC=sriov-test-bz1483396;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114303
127;RHEL-114304;KN-TC: openvswitch/topo FUNC=ovs-test-vxlan-mtu-check;KN-TC: openvswitch/topo FUNC=ovs-test-vxlan-mtu-check;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114304
128;RHEL-114305;KN-TC: nic/functions/consistent_interface_name;KN-TC: nic/functions/consistent_interface_name;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114305
129;RHEL-114360;AZURE-TC:[SR-IOV]Create a VM with 128 vCPUs and 8 SR-IOV NICs;AZURE-TC:[SR-IOV]Create a VM with 128 vCPUs and 8 SR-IOV NICs;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"Prepare 8 SR-IOV NICs in one Virtual Network
​​";"# for i in {1..8};do az network nic create --vnet-name walaautoarmeastus2pre --subnet walaautoarmeastus2pre -g walaautoarmeastus2pre -n walasriovNIC0$i --accelerated-networking;done
​​";Test Case;RedHatEnterpriseLinux7/RHEL-114360
129;;;;;;;;;2;"Create a VM(Standard_M128s) with 8 SR-IOV NICs.
​​";"# az vm create -g walaautoarmwestus -n wala75sriov8 --image ""https://walaautoimages.blob.core.windows.net/vhds/RHEL-7.5-20171130.0-wala-2.2.18-1.vhd"" --nics walasriovNIC0{1..8} --size Standard_M128s --use-unmanaged-disk --storage-account walaautoarmwestus --storage-container-name vhds --os-type linux --admin-username azureuser --ssh-key-value /root/.ssh/id_rsa.pub";;RedHatEnterpriseLinux7/RHEL-114360
129;;;;;;;;;3;"Add ifcfg-ethx for the 8 NICs, and up them.
​​";"
​​";;RedHatEnterpriseLinux7/RHEL-114360
129;;;;;;;;;4;"Set a public IP to the 8th NIC, and ping outside from this NIC
​​";"# ping -I eth7 www.baidu.com
​​";;RedHatEnterpriseLinux7/RHEL-114360
129;;;;;;;;;5;config ;"
​​";;RedHatEnterpriseLinux7/RHEL-114360
130;RHEL-114362;AZURE-TC:[SR-IOV] Create a VM with both standard NIC and SR-IOV NIC;AZURE-TC:[SR-IOV] Create a VM with both standard NIC and SR-IOV NIC  ;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"Prepare 2 NICs in the same VNet. nic1 is standard NIC, nic2 is SR-IOV(accelerate-networking)
 Then create a VM wit these 2 nics attached
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-114362
130;;;;;;;;;2;Inside the VM, create ifcfg-eth1. Then up eth1.;"Can up eth1 without error
​​";;RedHatEnterpriseLinux7/RHEL-114362
130;;;;;;;;;3;"Ping to another VM in the same vnet. 
​​";"Can ping to the other VM
​​";;RedHatEnterpriseLinux7/RHEL-114362
130;;;;;;;;;4;config ;​​;;RedHatEnterpriseLinux7/RHEL-114362
131;RHEL-114364;AZURE-TC:[SR-IOV] Attach/Detach SR-IOV NIC offline;"AZURE-TC:[SR-IOV] Attach/Detach SR-IOV NIC offline    
";Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;" Prepare a VM(Standard_A1)
 Prepare a NIC(nic2) in the same VNet with the NIC(nic1) on VM";​​;Test Case;RedHatEnterpriseLinux7/RHEL-114364
131;;;;;;;;;2;Stop(deallocate) the VM. Then attach nic2 to the VM;​​;;RedHatEnterpriseLinux7/RHEL-114364
131;;;;;;;;;3;"Start VM. Add ifcfg-eth1 for nic2
 # cp -a ifcfg-eth0 ifcfg-eth1;sed -i 's/eth0/eth1/g' ifcfg/eth1";​​;;RedHatEnterpriseLinux7/RHEL-114364
131;;;;;;;;;4;Up eth1. Then ping another VM(VM2) in the same VNet from eth1;"Can connect to VM2
 # ping -I eth1 VM2";;RedHatEnterpriseLinux7/RHEL-114364
131;;;;;;;;;5;Stop(deallocate) the VM. Then detach nic2;​​;;RedHatEnterpriseLinux7/RHEL-114364
131;;;;;;;;;6;Start VM. Check if the eth1 is removed.;"# ifconfig eth1
 eth1: error fetching interface information: Device not found";;RedHatEnterpriseLinux7/RHEL-114364
131;;;;;;;;;7;config ;​​;;RedHatEnterpriseLinux7/RHEL-114364
132;RHEL-114370;AZURE-TC:[Network] Attach/Detach NIC offline;"AZURE-TC:[Network] Attach/Detach NIC offline    
";Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"Prepare a VM(Standard_A1)
 Prepare a NIC(nic2) in the same VNet with the NIC(nic1) on VM
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-114370
132;;;;;;;;;2;"Stop(deallocate) the VM. Then attach nic2 to the VM
​​";​​;;RedHatEnterpriseLinux7/RHEL-114370
132;;;;;;;;;3;"Start VM. Add ifcfg-eth1 for nic2
 # cp -a ifcfg-eth0 ifcfg-eth1;sed -i 's/eth0/eth1/g' ifcfg/eth1
​​";​​;;RedHatEnterpriseLinux7/RHEL-114370
132;;;;;;;;;4;"Up eth1. Then ping another VM(VM2) in the same VNet from eth1
​​";"Can connect to VM2
 # ping -I eth1 VM2
​​";;RedHatEnterpriseLinux7/RHEL-114370
132;;;;;;;;;5;Stop(deallocate) the VM. Then detach nic2;​​;;RedHatEnterpriseLinux7/RHEL-114370
132;;;;;;;;;6;"Start VM. Check if the eth1 is removed.
​​";"# ifconfig eth1
 eth1: error fetching interface information: Device not found
​​";;RedHatEnterpriseLinux7/RHEL-114370
132;;;;;;;;;7;config ;​​;;RedHatEnterpriseLinux7/RHEL-114370
133;RHEL-114378;[NUMA][NFV] configure guest NUMA node locality for guest PCI devices (i444fx)-- bug 1103314;NUMA][NFV] configure guest NUMA node locality for guest PCI devices -- bug 1103314[NUMA][NFV] configure guest NUMA node locality for guest PCI devices -- bug 1103314;Yalan Zhang (yalzhang);High;Positive;Manual Only;;1;"scenario 1: Test a guest interface with i440fx machine type
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-114378
133;;;;;;;;;2;"1. configure guest as NUMA topology
 # virsh dumpxml rhel7.0-rhel
 <domain type='kvm'>
   <name>rhel7.0-rhel</name>
   <uuid>67c7a123-5415-4136-af62-a2ee098ba6cd</uuid>
   <maxMemory slots='16' unit='KiB'>15243264</maxMemory>
   <memory unit='KiB'>1179648</memory>
   <currentMemory unit='KiB'>1179648</currentMemory>
   <vcpu placement='static' current='5'>10</vcpu>
 ...
   <cpu>
     <numa>
       <cell id='0' cpus='0-2' memory='524288' unit='KiB'/>
       <cell id='1' cpus='3-5' memory='524288' unit='KiB'/>
     </numa>
   </cpu>
 ...";​​;;RedHatEnterpriseLinux7/RHEL-114378
133;;;;;;;;;3;"2. Add a pci-expander-bus controller in xml:
     <controller type='pci' index='1' model='pci-expander-bus'>
       <model name='pxb'/>
       <target chassisNr='254' busNr='254'>
 <node>1</node>
       </target>
       <alias name='pci.1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0c' function='0x0'/>
     </controller>
 
 3. Add a device on pci-expander-bus controller:
 
  <interface type='network'>
       <mac address='52:54:00:af:19:fb'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x01' slot='0x0b' function='0x0'/>
     </interface>
 
 (the interface connect to the pci-expander-bus which bind to node 1 of the guest)";​​;;RedHatEnterpriseLinux7/RHEL-114378
133;;;;;;;;;4;"4. start guest and check device numa node in guest:
 IN GUEST:
 
 # cat /sys/devices/pci0000\:fe/0000\:fe\:00.0/0000\:ff\:0b.0/numa_node 
​​";"1
 
 (the interface should bind to node 1)";;RedHatEnterpriseLinux7/RHEL-114378
133;;;;;;;;;5;Scenario 2: Use a vf to retest this with i440fx machine type;​​;;RedHatEnterpriseLinux7/RHEL-114378
133;;;;;;;;;6;"1. check host vf numa node info:
 # virsh nodedev-dumpxml pci_0000_86_10_1
 <device>
  <name>pci_0000_86_10_1</name>
  <path>/sys/devices/pci0000:80/0000:80:01.0/0000:86:10.1</path>
  <parent>pci_0000_80_01_0</parent>
  <driver>
    <name>ixgbevf</name>
  </driver>
  <capability type='pci'>
    <domain>0</domain>
    <bus>134</bus>
    <slot>16</slot>
    <function>1</function>
    <product id='0x10ed'>82599 Ethernet Controller Virtual Function</product>
    <vendor id='0x8086'>Intel Corporation</vendor>
    <capability type='phys_function'>
      <address domain='0x0000' bus='0x86' slot='0x00' function='0x1'/>
    </capability>
    <iommuGroup number='83'>
      <address domain='0x0000' bus='0x86' slot='0x10' function='0x1'/>
    </iommuGroup>
    <numa node='1'/>
    <pci-express>
      <link validity='cap' port='0' width='0'/>
      <link validity='sta' width='0'/>
    </pci-express>
  </capability>
 </device>
 
 2. prepare a guest xml with network which use host vf:
 <domain type='kvm'>
  <name>r7-lhuang</name>
  <uuid>09143880-044e-4a38-82cc-234c274c2c19</uuid>
  <maxMemory slots='16' unit='KiB'>25600000</maxMemory>
  <memory unit='KiB'>2621440</memory>
  <currentMemory unit='KiB'>2621440</currentMemory>
  <memtune>
    <hard_limit unit='KiB'>111111111111111</hard_limit>
  </memtune>
  <memoryBacking>
    <hugepages>
      <page size='2048' unit='KiB' nodeset='0-1'/>
    </hugepages>
    <locked/>
  </memoryBacking>
  <vcpu placement='static'>4</vcpu>
  <numatune>
    <memory mode='strict' nodeset='1'/>
  </numatune>
 ...
  <cpu mode='host-model'>
    <model fallback='forbid'/>
    <numa>
      <cell id='0' cpus='0-1' memory='1048576' unit='KiB' memAccess='shared'/>
      <cell id='1' cpus='2-3' memory='1048576' unit='KiB' memAccess='shared'/>
    </numa>
  </cpu>
 ...
    <controller type='pci' index='1' model='pci-expander-bus'>
      <model name='pxb'/>
      <target busNr='254'>
        <node>1</node>
      </target>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
    </controller>
 ...
    <interface type='network'>
      <mac address='52:54:00:fd:48:b3'/>
      <source network='default'/>
      <model type='rtl8139'/>
      <address type='pci' domain='0x0000' bus='0x01' slot='0x00' function='0x0'/>
    </interface>
    <interface type='hostdev' managed='yes'>
      <mac address='52:54:00:20:51:94'/>
      <source>
        <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x1'/>
      </source>
      <address type='pci' domain='0x0000' bus='0x01' slot='0x09' function='0x0'/>
    </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL-114378
133;;;;;;;;;7;"3. start guest and check qemu cmdline:
 # virsh start r7-lhuang
 Domain r7-lhuang started
 # ps aux|grep  r7-lhuang
​​";"...
 -device pxb,bus_nr=254,id=pci.1,numa_node=1,bus=pci.0,addr=0x3
 ...
 -device vfio-pci,host=86:10.1,id=hostdev0,bus=pci.1,addr=0x9
 ...";;RedHatEnterpriseLinux7/RHEL-114378
133;;;;;;;;;8;"4. login guest and check guest interface numa node info:
 IN GUEST:
 # lspci
 ...
 fe:00.0 PCI bridge: Red Hat, Inc. QEMU PCI-PCI bridge
 ff:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL-8100/8101L/8139 PCI Fast Ethernet Adapter (rev 20)
 ff:09.0 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)
 # cat /sys/devices/pci0000\:fe/0000\:fe\:00.0/0000\:ff\:09.0/numa_node 
 1
 # cat /sys/devices/pci0000\:fe/0000\:fe\:00.0/0000\:ff\:00.0/numa_node 
 1";the 2 interfaces are both bind to node 1;;RedHatEnterpriseLinux7/RHEL-114378
134;RHEL-114425;[emulatorpin] reset emulatorpin on a running domain - bug 1227180;should test on the host whose cpu number is multiple of 8.;Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1;"5. test for emulatorpin (bug 1227180)
 should test on the host whose cpu number is multiple of 8.";​​;Test Case;RedHatEnterpriseLinux7/RHEL-114425
134;;;;;;;;;2;"5.1. # virsh nodecpumap 
 CPUs present: 32 
 CPUs online: 32 
 CPU map: yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy";​​;;RedHatEnterpriseLinux7/RHEL-114425
134;;;;;;;;;3;"5.2. set cpuset like this in xml: 
 <vcpu placement='static' cpuset='0-30'>4</vcpu>";​​;;RedHatEnterpriseLinux7/RHEL-114425
134;;;;;;;;;4;"5.3. start guest and check emulatorpin: 
 # virsh emulatorpin rhel7.0-rhel";"emulator: CPU Affinity ---------------------------------- 
 *: 0-30";;RedHatEnterpriseLinux7/RHEL-114425
134;;;;;;;;;5;"5.4. bind emulator to all cpu: 
 # virsh emulatorpin rhel7.0-rhel 0-31";​​;;RedHatEnterpriseLinux7/RHEL-114425
134;;;;;;;;;6;5.5. # virsh emulatorpin rhel7.0-rhel;"emulator: CPU Affinity 
 ---------------------------------- *: 0-31";;RedHatEnterpriseLinux7/RHEL-114425
134;;;;;;;;;7;5.6. recheck the xml:;"<cputune> 
 <emulatorpin cpuset='0-31'/> 
 </cputune>";;RedHatEnterpriseLinux7/RHEL-114425
135;RHEL-114427;[iothread] iothread setting in cputune section negtive test - bug 1366484 1316384;[CPU Management] som negative scenarios for cputune - bug 1366484 1316384;Yalan Zhang (yalzhang);Medium;Negative;Not Automated;;1;"1. no <iothreads> defined, but below iothreadsched added into the xml
       
 # virsh edit rhel7.2
         <cputune>
            <iothreadsched iothreads='1' scheduler='idle'/>
          </cputune>
 
        error: unsupported configuration: Cannot find 'iothread' : 1
        Failed. Try again? [y,n,i,f,?]:  ====> press 'i'
        error: unsupported configuration: Cannot find 'iothread' : 1
        Failed. Try again? [y,n,f,?]";​​;Test Case;RedHatEnterpriseLinux7/RHEL-114427
135;;;;;;;;;2;"2. use iothread which do not defined
 
 # virsh edit rhel7.2
         <iothreads>1</iothreads>
          <cputune>
            <iothreadsched iothreads='2' scheduler='idle'/>
          </cputune>
 
        error: unsupported configuration: Cannot find 'iothread' : 2
        Failed. Try again? [y,n,i,f,?]:";if do not define the iothreadid, the id will start by 1;;RedHatEnterpriseLinux7/RHEL-114427
135;;;;;;;;;3;"3. iothreadpin use the undefined id
 
 # virsh edit rhel
        <iothreads>1</iothreads>
        <iothreadids>
            <iothread id=""2""/>
          </iothreadids>
          <cputune>
         <iothreadpin iothread=""1"" cpuset=""1""/>
        </cputune>
 
        error: unsupported configuration: Cannot find 'iothread' : 1
        Failed. Try again? [y,n,i,f,?]: 
 
 # virsh edit rhel
          <iothreads>1</iothreads>
          <iothreadids>
            <iothread id='2'/>
          </iothreadids>
          <cputune>
            <iothreadpin iothread='2' cpuset='0'/>
          </cputune>
 
 # virsh start rhel
 Domain rhel started
​​";"set iothread out of range, failed and the error message is reasonable
​​";;RedHatEnterpriseLinux7/RHEL-114427
135;;;;;;;;;4;"4. set the cpuset out of range, vm can not start
 # virsh edit rhel
          <iothreads>1</iothreads>
          <iothreadids>
            <iothread id='2'/>
          </iothreadids>
          <cputune>
            <iothreadpin iothread='2' cpuset='100'/>
          </cputune>
 
 # virsh start rhel";"error: Failed to start domain rhel
 error: Unable to write to '/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d12\x2drhel.scope/iothread2/cpuset.cpus': Numerical result out of range
 
​​";;RedHatEnterpriseLinux7/RHEL-114427
135;;;;;;;;;5;"5.  on iothread defined, but iothread setting in cputune
 # virsh edit rhel
        <cputune>
     <iothread_quota>1000</iothread_quota>
 <iothread_period>5000</iothread_period>
        </cputune>
 
 # virsh schedinfo rhel
 Scheduler      : posix
 cpu_shares     : 0
 vcpu_period    : 0
 vcpu_quota     : 0
 emulator_period: 0
 emulator_quota : 0
 global_period  : 0
 global_quota   : 0
 iothread_period: 5000
 iothread_quota : 1000
 
 # virsh start rhel
 Domain rhel started
 
 # virsh schedinfo rhel
 Scheduler      : posix
 cpu_shares     : 1024
 vcpu_period    : 100000
 vcpu_quota     : -1
 emulator_period: 100000
 emulator_quota : -1
 global_period  : 100000
 global_quota   : -1
 iothread_period: 100000
 iothread_quota : -1
 
​​";"after start, the setting will be invalid
​​";;RedHatEnterpriseLinux7/RHEL-114427
136;RHEL-114428;[cpuset][vcpupin] Set vcpupin setting for none exists vcpu - bug 1366484 1316384;[CPU Management] som negative scenarios for cputune - bug 1366484 1316384;Yalan Zhang (yalzhang);Medium;Negative;Not Automated;;1;"# virsh dumpxml r7.2
 <vcpu placement='static' current='3'>4</vcpu>
 
 (1) maxcpu is 4, so the vcpu list should be vcpu 0, vcpu 1, vcpu 2, vcpu 3(not enabled)
 (vcpu number = maxvcpu number -1)
 
 add xml info as below to the guest xml
  <cputune>
    <vcpupin vcpu='3' cpuset='3'/>
  </cputune>
 
 # virsh dumpxml  r7.2 | grep vcpu -A 4
​​";"  <vcpu placement='static' current='3'>4</vcpu>
  <cputune>
    <vcpupin vcpu='3' cpuset='3'/>
  </cputune>
 
 
 (the setting exists)
​​";Test Case;RedHatEnterpriseLinux7/RHEL-114428
136;;;;;;;;;2;"(2) for non-exists vcpu, see vcpu 4 
 (vcpu number=maxvcpu number)
 
 add xml info as below to the guest xml
  <cputune>
    <vcpupin vcpu='4' cpuset='3'/>
  </cputune>
 
 # virsh dumpxml  r7.2 | grep vcpu -A 4";" <vcpu placement='static' current='3'>4</vcpu>
  <os>
    <type arch='x86_64' machine='pc-i440fx-rhel7.2.0'>hvm</type>
    <boot dev='hd'/>
  </os>
 
 (check the setting is ignored as the vcpu does not exists)";;RedHatEnterpriseLinux7/RHEL-114428
136;;;;;;;;;3;"(3)vcpupin vcpu number > maxvcpunumber
 add xml info as below to the guest xml
 
   <cputune>
    <vcpupin vcpu='5' cpuset='3'/>
  </cputune>
 
 # virsh dumpxml  r7.2 | grep vcpu -A 4
​​";" <vcpu placement='static' current='3'>4</vcpu>
  <os>
    <type arch='x86_64' machine='pc-i440fx-rhel7.2.0'>hvm</type>
    <boot dev='hd'/>
  </os>
 
 (check the setting is ignored)";;RedHatEnterpriseLinux7/RHEL-114428
136;;;;;;;;;4;"(4) when guest is running, vcpupin for pin none exists vcpu
 # virsh vcpupin rhel 5 1
 error: invalid argument: vcpu 5 is out of range of live cpu count 4
 
 # virsh vcpupin rhel
 VCPU: CPU Affinity
 ----------------------------------
    0: 0-3
    1: 0-3
    2: 0-3
    3: 0-3
​​";(need update);;RedHatEnterpriseLinux7/RHEL-114428
136;;;;;;;;;5;"(5) set cpuset as non-exists cpu
 <cputune>
 <vcpupin vcpu='0' cpuset='100'/>
 </cputune>
 
 # virsh start rhel
​​";"error: Failed to start domain rhel
 error: Unable to write to '/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d30\x2drhel.scope/vcpu0/cpuset.cpus': Numerical result out of range
 
 
 (need update)";;RedHatEnterpriseLinux7/RHEL-114428
136;;;;;;;;;6;"# virsh edit rhel
  <cputune>
     <vcpupin vcpu='1' cpuset='0,^0'/>
   </cputune>
 
 error: unsupported configuration: Invalid value of 'cpuset': 0,^0
 Failed. Try again? [y,n,i,f,?]:";​​;;RedHatEnterpriseLinux7/RHEL-114428
136;;;;;;;;;7;"(6) # virsh edit rhel
  <vcpu placement='static' current='2' cpuset='0'>4</vcpu>
   <cputune>
     <vcpupin vcpu='0' cpuset='2'/>
     <vcpupin vcpu='0' cpuset='3'/>
   </cputune>
 
 error: internal error: duplicate vcpupin for vcpu '0'
 Failed. Try again? [y,n,i,f,?]: 
​​";​​;;RedHatEnterpriseLinux7/RHEL-114428
136;;;;;;;;;8;"(7) # virsh edit rhel
   <vcpu placement='static' current='2' cpuset='0'>4</vcpu>
   <cputune>
     <vcpupin vcpu='0' cpuset='2-3'/>
     <vcpupin vcpu='1' cpuset='1,3'/>
     <vcpupin vcpu='3' cpuset='1-3,^2'/>
   </cputune>
 
 # virsh vcpupin rhel";"VCPU: CPU Affinity
 ----------------------------------
    0: 2-3
    1: 1,3
    2: 0
    3: 1,3";;RedHatEnterpriseLinux7/RHEL-114428
137;RHEL-114431;[vcpupin] vcpupin with --current when guest is active / inactive;[vcpupin] vcpupin/emulatorpin with --current when guest is active / inactive  vcpuinfo domain [--pretty];Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1;S1: when guest is running;​​;Test Case;RedHatEnterpriseLinux7/RHEL-114431
137;;;;;;;;;2;"1. prepare a guest with
  <vcpu placement='static' cpuset='2-3' current='2'>4</vcpu>
 then start the guest
 # virsh start rhel
 # virsh vcpupin rhel 
 VCPU: CPU Affinity
 ----------------------------------
    0: 2-3
    1: 2-3
    2: 2-3
    3: 2-3
 # virsh vcpuinfo rhel
 VCPU:           0
 CPU:            2
 State:          running
 CPU time:       10.8s
 CPU Affinity:   --yy
 
 VCPU:           1
 CPU:            3
 State:          running
 CPU time:       3.5s
 CPU Affinity:   --yy";​​;;RedHatEnterpriseLinux7/RHEL-114431
137;;;;;;;;;3;"2. # virsh vcpupin rhel 1 1 --current
 # virsh vcpupin rhel 2 2 --current
 # virsh vcpupin rhel 3 3 --current";​​;;RedHatEnterpriseLinux7/RHEL-114431
137;;;;;;;;;4;"3. # virsh vcpupin rhel
 # virsh vcpupin rhel --live
 # virsh vcpupin rhel --current
 
 
​​";"VCPU: CPU Affinity
 ----------------------------------
    0: 2-3
    1: 1
    2: 2
    3: 3
 (the output both are the same as above)";;RedHatEnterpriseLinux7/RHEL-114431
137;;;;;;;;;5;# virsh vcpupin rhel --config;"VCPU: CPU Affinity
 ----------------------------------
    0: 2-3
    1: 2-3
    2: 2-3
    3: 2-3
​​";;RedHatEnterpriseLinux7/RHEL-114431
137;;;;;;;;;6;"4. # virsh destroy rhel
 Domain rhel destroyed
 
 # virsh start rhel
 Domain rhel started
 
 # virsh vcpupin rhel --current
​​";"VCPU: CPU Affinity
 ----------------------------------
    0: 2-3
    1: 2-3
    2: 2-3
    3: 2-3";;RedHatEnterpriseLinux7/RHEL-114431
137;;;;;;;;;7;S2: when guest is inactive;​​;;RedHatEnterpriseLinux7/RHEL-114431
137;;;;;;;;;8;"1. prepare inactive guest with below setting
 <vcpu placement='static' cpuset='2-3' current='2'>4</vcpu>
 # virsh vcpupin rhel 0 0,1 --current
 # virsh vcpupin rhel 1 0-2,^1 --current
 # virsh vcpupin rhel 2 0-2,^1,3 --current
 # virsh vcpupin rhel 3 r --current";Test kinds of format of cpulist, should be no error;;RedHatEnterpriseLinux7/RHEL-114431
137;;;;;;;;;9;# virsh vcpupin rhel;"VCPU: CPU Affinity
 ----------------------------------
    0: 0-1
    1: 0,2
    2: 0,2-3
    3: 0-3";;RedHatEnterpriseLinux7/RHEL-114431
137;;;;;;;;;10;"# virsh start rhel
 Domain rhel started
 
 # virsh vcpuinfo rhel --pretty";"VCPU:           0
 CPU:            1
 State:          running
 CPU time:       9.5s
 CPU Affinity:   0-1 (out of 4)
 
 VCPU:           1
 CPU:            0
 State:          running
 CPU time:       2.0s
 CPU Affinity:   0,2 (out of 4)";;RedHatEnterpriseLinux7/RHEL-114431
137;;;;;;;;;11;"# virsh setvcpus rhel 4
 # virsh vcpuinfo rhel --pretty";"VCPU:           0
 CPU:            1
 State:          running
 CPU time:       9.6s
 CPU Affinity:   0-1 (out of 4)
 
 VCPU:           1
 CPU:            0
 State:          running
 CPU time:       2.2s
 CPU Affinity:   0,2 (out of 4)
 
 VCPU:           2
 CPU:            2
 State:          running
 CPU time:       0.0s
 CPU Affinity:   0,2-3 (out of 4)
 
 VCPU:           3
 CPU:            3
 State:          running
 CPU time:       0.0s
 CPU Affinity:   0-3 (out of 4)";;RedHatEnterpriseLinux7/RHEL-114431
138;RHEL-114432;[vcpupin] vcpupin with --live when guest is active / inactive (--live --config, --current is exclusive);[vcpupin] vcpupin/emulatorpin with --live when guest is active / inactive (--live --config, --current is exclusive);Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;S1: guest is running;​​;Test Case;RedHatEnterpriseLinux7/RHEL-114432
138;;;;;;;;;2;"1. guest is running with below setting
 <vcpu placement='static' cpuset='2-3' current='2'>4</vcpu>
 
 # virsh start rhel
 Domain rhel started
 
 # virsh vcpupin rhel
 VCPU: CPU Affinity
 ----------------------------------
    0: 2-3
    1: 2-3
    2: 2-3
    3: 2-3";​​;;RedHatEnterpriseLinux7/RHEL-114432
138;;;;;;;;;3;"2. # virsh vcpupin rhel 0 0 --live
 # virsh vcpupin rhel 1 r --live
 # virsh vcpupin rhel 2 r --live
 # virsh vcpupin rhel 3 0-3,^2,^1 --live";​​;;RedHatEnterpriseLinux7/RHEL-114432
138;;;;;;;;;4;3. # virsh vcpupin rhel;"VCPU: CPU Affinity
 ----------------------------------
    0: 0
    1: 0-3
    2: 0-3
    3: 0,3";;RedHatEnterpriseLinux7/RHEL-114432
138;;;;;;;;;5;4. # virsh vcpupin rhel --config;"VCPU: CPU Affinity
 ----------------------------------
    0: 2-3
    1: 2-3
    2: 2-3
    3: 2-3";;RedHatEnterpriseLinux7/RHEL-114432
138;;;;;;;;;6;"# virsh destroy rhel
 virDomain rhel destroyed
 
 # virsh dumpxml rhel ";" <vcpu placement='static' cpuset='2-3' current='2'>4</vcpu>
 no cputune about the vcpupin info";;RedHatEnterpriseLinux7/RHEL-114432
138;;;;;;;;;7;S2: guest is inactive;​​;;RedHatEnterpriseLinux7/RHEL-114432
138;;;;;;;;;8;# virsh vcpupin rhel 1 0 --live;error: Requested operation is not valid: domain is not running;;RedHatEnterpriseLinux7/RHEL-114432
138;;;;;;;;;9;S3: --current is exclusive;​​;;RedHatEnterpriseLinux7/RHEL-114432
138;;;;;;;;;10;"when guest is inactive
 # virsh vcpupin rhel 1 0 --config --current";error: Options --current and --config are mutually exclusive;;RedHatEnterpriseLinux7/RHEL-114432
138;;;;;;;;;11;"when guest is running
 # virsh vcpupin rhel 1 1 --live --current";error: Options --current and --live are mutually exclusive;;RedHatEnterpriseLinux7/RHEL-114432
138;;;;;;;;;12;S4: --live with --config;​​;;RedHatEnterpriseLinux7/RHEL-114432
138;;;;;;;;;13;"when guest is running
 # virsh vcpupin rhel
 VCPU: CPU Affinity
 ----------------------------------
    0: 2-3
    1: 2-3
    2: 2-3
    3: 2-3";​​;;RedHatEnterpriseLinux7/RHEL-114432
138;;;;;;;;;14;# virsh vcpupin rhel 1 1 --live --config;​​;;RedHatEnterpriseLinux7/RHEL-114432
138;;;;;;;;;15;"# virsh vcpupin rhel 1
 VCPU: CPU Affinity
 ----------------------------------
    1: 1
​​";"VCPU: CPU Affinity
 ----------------------------------
    1: 1";;RedHatEnterpriseLinux7/RHEL-114432
138;;;;;;;;;16;# virsh vcpupin rhel 1 --config;"VCPU: CPU Affinity
 ----------------------------------
    1: 1";;RedHatEnterpriseLinux7/RHEL-114432
138;;;;;;;;;17;"# virsh destroy rhel
 Domain rhel destroyed
 # virsh start rhel
 Domain rhel started
 
 # virsh vcpupin rhel
​​";"VCPU: CPU Affinity
 ----------------------------------
    0: 2-3
    1: 1
    2: 2-3
    3: 2-3";;RedHatEnterpriseLinux7/RHEL-114432
139;RHEL-114447;KN-TC: nic/functions/offload FUNC=/failed to turn on ufo, ufo test fail;KN-TC: nic/functions/offload FUNC=/failed to turn on ufo, ufo test fail;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114447
140;RHEL-114477;[event-test.py] Run event-test.py with invalid argument;Run event-test.py with invalid argument;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"run event-test.py with incorrect argument as following:
 # python /usr/share/doc/libvirt-python-3.9.0/examples/event-test.py  -a";"A prompt about incorrect argument is printed out.
 
 Output:
 option -a not recognized
 usage: event-test.py [-hdl] [uri]
    uri will default to qemu:///system
    --help, -h   Print this help message
    --debug, -d  Print debug output
    --loop=TYPE, -l   Choose event-loop-implementation (native, poll, asyncio)
    --timeout=SECS  Quit after SECS seconds running";Test Case;RedHatEnterpriseLinux7/RHEL-114477
141;RHEL-114490;[emulatorpin][vcpupin][iothreadpin] emulatorpin with vcpu placement is auto - bug 1308317;Allow setting pinning of emulator/iohtread with automatic placement;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"Test on a numa node > 1 host
 
 1. prepare a guest with auto placement vcpu element
 # virsh dumpxml r7
 ..
  <vcpu placement='auto' current='6'>10</vcpu>
  <numatune>
    <memory mode='strict' placement='auto'/>
  </numatune>
 <iothreads>1</iothreads>
  <iothreadids>
     <iothread id=""1""/>
 </iothreadids>
 ..
 2. start guest
 # virsh start r7
 Domain r7 started
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-114490
141;;;;;;;;;2;"3. check iothread, vcpupin, emulatorpin:
 # virsh vcpupin r7
 VCPU: CPU Affinity
 ----------------------------------
   0: 0,2,4,6,8,10,12,14,16,18,20,22
   1: 0,2,4,6,8,10,12,14,16,18,20,22
   2: 0,2,4,6,8,10,12,14,16,18,20,22
   3: 0,2,4,6,8,10,12,14,16,18,20,22
   4: 0,2,4,6,8,10,12,14,16,18,20,22
   5: 0,2,4,6,8,10,12,14,16,18,20,22
   6: 0,2,4,6,8,10,12,14,16,18,20,22
   7: 0,2,4,6,8,10,12,14,16,18,20,22
   8: 0,2,4,6,8,10,12,14,16,18,20,22
   9: 0,2,4,6,8,10,12,14,16,18,20,22
 
 # virsh emulatorpin r7
 emulator: CPU Affinity
 ----------------------------------
       *: 0,2,4,6,8,10,12,14,16,18,20,22
 
 # virsh iothreadinfo r7
 IOThread ID     CPU Affinity   
 ---------------------------------------------------
 1               0,2,4,6,8,10,12,14,16,18,20,22";the iothread, vcpu and emulator binded toseveral nodes, and the results should be the same;;RedHatEnterpriseLinux7/RHEL-114490
141;;;;;;;;;3;"4. live change the bind:
 # virsh vcpupin r7 0 1-10
 # virsh vcpupin r7";"VCPU: CPU Affinity
 ----------------------------------
 0: 1-10
   1: 0,2,4,6,8,10,12,14,16,18,20,22
   2: 0,2,4,6,8,10,12,14,16,18,20,22
   3: 0,2,4,6,8,10,12,14,16,18,20,22
   4: 0,2,4,6,8,10,12,14,16,18,20,22
   5: 0,2,4,6,8,10,12,14,16,18,20,22
   6: 0,2,4,6,8,10,12,14,16,18,20,22
   7: 0,2,4,6,8,10,12,14,16,18,20,22
   8: 0,2,4,6,8,10,12,14,16,18,20,22
   9: 0,2,4,6,8,10,12,14,16,18,20,22";;RedHatEnterpriseLinux7/RHEL-114490
141;;;;;;;;;4;"# virsh emulatorpin r7
 emulator: CPU Affinity
 ----------------------------------
       *: 0,2,4,6,8,10,12,14,16,18,20,22
 # virsh emulatorpin r7 0-23
​​";​​;;RedHatEnterpriseLinux7/RHEL-114490
141;;;;;;;;;5;# virsh emulatorpin r7;"emulator: CPU Affinity
 ----------------------------------
       *: 0-23";;RedHatEnterpriseLinux7/RHEL-114490
141;;;;;;;;;6;"# virsh iothreadpin r7 1 1
​​";​​;;RedHatEnterpriseLinux7/RHEL-114490
141;;;;;;;;;7;# virsh iothreadinfo r7;"IOThread ID     CPU Affinity   
 ---------------------------------------------------
 1               1";;RedHatEnterpriseLinux7/RHEL-114490
141;;;;;;;;;8;"5. change config for a running guest:
 # virsh emulatorpin r7 20 --config
​​";​​;;RedHatEnterpriseLinux7/RHEL-114490
141;;;;;;;;;9;# virsh emulatorpin r7 --config;"emulator: CPU Affinity
 ----------------------------------
       *: 20";;RedHatEnterpriseLinux7/RHEL-114490
141;;;;;;;;;10;# virsh vcpupin r7 1 0 --config;​​;;RedHatEnterpriseLinux7/RHEL-114490
141;;;;;;;;;11;"# virsh vcpupin r7 1 --config 
​​";"VCPU: CPU Affinity
 ----------------------------------
 ...
  1: 0
 ...";;RedHatEnterpriseLinux7/RHEL-114490
141;;;;;;;;;12;# virsh iothreadpin r7 1 0 --config;​​;;RedHatEnterpriseLinux7/RHEL-114490
141;;;;;;;;;13;# virsh iothreadinfo r7 --config;"IOThread ID     CPU Affinity   
 ---------------------------------------------------
 1               0";;RedHatEnterpriseLinux7/RHEL-114490
142;RHEL-114491;[emulatorpin] check the Cpus_allowed_list for emulator's thread after emulatorpin - bug 871312;emulatorpin should return the Cpus_allowed_list of qemu'main thread;Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1;"1. start guest with cpuset, check emulatorpin info is same to cpuset
 
 # virsh edit rhel6.2
 ......
 <vcpu placement='static' cpuset='2-3' current='1'>7</vcpu>
 ......
 # virsh start rhel6.2
 Domain rhel6.2 started
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-114491
142;;;;;;;;;2;# virsh emulatorpin rhel6.2;"emulator: CPU Affinity
 ----------------------------------
 *: 2-3";;RedHatEnterpriseLinux7/RHEL-114491
142;;;;;;;;;3;"# pidof qemu-kvm
 30119
 
 # grep Cpus_allowed_list /proc/30119/task/*/status";"/proc/30119/task/30119/status:Cpus_allowed_list:    2-3
 /proc/30119/task/30141/status:Cpus_allowed_list:    2-3
 /proc/30119/task/30142/status:Cpus_allowed_list:    2-3
 ...";;RedHatEnterpriseLinux7/RHEL-114491
142;;;;;;;;;4;"2. change the emulatorpin affinity then check again
 # virsh emulatorpin rhel 1
 # grep Cpus_allowed_list /proc/3227/task/*/status";"/proc/3227/task/3227/status:Cpus_allowed_list: 1
 .....
​​";;RedHatEnterpriseLinux7/RHEL-114491
143;RHEL-114501;[emulator_quota][emulator_period] Check the boundry of emulator_quota and emulator_period;The optional emulator_period element specifies the enforcement interval(unit: microseconds). Within emulator_period, emulator threads(those excluding vcpus) of the domain will not be allowed to consume more than emulator_quota worth of runtime. The value should be in range [1000, 1000000]. A period with value 0 means no value.The optional emulator_quota element specifies the maximum allowed bandwidth(unit: microseconds) for domain's emulator threads(those excluding vcpus). A domain with emulator_quota as any negative value indicates that the domain has infinite bandwidth for emulator threads (those excluding vcpus), which means that it is not bandwidth controlled. The value should be in range [1000, 18446744073709551] or less than 0. A quota with value 0 means no value.;Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-114501
144;RHEL-114504;[period] positive settings for period / emulator_period / iothread_period (iterable);"
xml element | schedinfo operand | positive | negative
shares(RHEL7-17917) | cpu_shares | 0,1 will change to 2;2-262144;larger than 262144  change to 262144;negative value change to 262144 | 
period / emulator_period / iothread_period/global_period | vcpu_period/emulator_period/iothread_period/global_period | 0,[1000, 1000000] | [~,-1],[1,999],[1000001~],non-numerical  
quota/emulator_quota/iothread_quota/global_quota | vcpu_quota/emulator_quota/iothread_quota/global_quota | less than 0, 0, [1000, 18446744073709551](less than 0 means infinite bandwidth, 0 means no value) | [1,999],[18446744073709552,~],non-numerical";Yalan Zhang (yalzhang);Low;Positive;Not Automated;;1;"set iteration: the PERIOD  can be
 vcpu_period / period in xml
 emulator_period
 iothread_period

 if test iothread_period, should have iothread defined in vm's xml";​​;Test Case;RedHatEnterpriseLinux7/RHEL-114504
144;;;;;;;;;2;"# virsh start rhel
 Domain rhel started

 # virsh schedinfo rhel 
 Scheduler      : posix
 cpu_shares     : 1024
 vcpu_period    : 100000
 vcpu_quota     : -1
 emulator_period: 100000
 emulator_quota : -1
 global_period  : 100000
 global_quota   : -1
 iothread_period: 100000
 iothread_quota : -1";default is 100000;;RedHatEnterpriseLinux7/RHEL-114504
144;;;;;;;;;3;"The value should be in range [1000, 1000000]. A period with value 0 means no value. 

 # virsh schedinfo rhel --set PERIOD=0
";" Scheduler      : posix
 cpu_shares     : 1024
 vcpu_period    : 100000
 vcpu_quota     : -1
 emulator_period: 100000
 emulator_quota : -1
 global_period  : 100000
 global_quota   : -1
 iothread_period: 100000
 iothread_quota : -1";;RedHatEnterpriseLinux7/RHEL-114504
144;;;;;;;;;4;"# virsh schedinfo rhel --set PERIOD=1000
";"for vcpu_period:

 Scheduler      : posix
 cpu_shares     : 1024
 vcpu_period    : 1000
 vcpu_quota     : -1
 emulator_period: 100000
 emulator_quota : -1
 global_period  : 100000
 global_quota   : -1
 iothread_period: 100000
 iothread_quota : -1";;RedHatEnterpriseLinux7/RHEL-114504
144;;;;;;;;;5;"set below info in vm's xml
 for vcpu_period
  <cputune>
     <period>1000000</period>
   </cputune>

 for others
  <cputune>
 <PERIOD>1000000</PERIOD>
  </cputune>

 # virsh start rhel
 virsh Domain rhel started

 # virsh schedinfo rhel
";"for vcpu_period
 Scheduler      : posix
 cpu_shares     : 1024
 vcpu_period    : 1000000
 vcpu_quota     : -1
 emulator_period: 100000
 emulator_quota : -1
 global_period  : 100000
 global_quota   : -1
 iothread_period: 100000
 iothread_quota : -1
";;RedHatEnterpriseLinux7/RHEL-114504
145;RHEL-114505;[iothread] define iothread in domain xml;"define iothread in domain xml    

";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"S1: only define id
 
 # virsh edit rhel
 <iothreadids>
     <iothread id='6'/>
   </iothreadids>
   <cputune>
     <iothreadsched iothreads='6' scheduler='idle'/>
   </cputune>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-114505
145;;;;;;;;;2;# virsh dumpxml rhel;"<iothreads>1</iothreads>
   <iothreadids>
     <iothread id='6'/>
   </iothreadids>
   <cputune>
     <iothreadsched iothreads='6' scheduler='idle'/>
   </cputune>";;RedHatEnterpriseLinux7/RHEL-114505
145;;;;;;;;;3;"S2: only define number of iothread
 
 # virsh edit rhel
 ...
 <iothreads>5</iothreads>
 ...
 # virsh start rhel
 Domain rhel started";the iothread id will start by 1 by default;;RedHatEnterpriseLinux7/RHEL-114505
145;;;;;;;;;4;"# virsh iothreadinfo rhel
 
​​";" IOThread ID     CPU Affinity   
 ---------------------------------------------------
  1               0-3
  3               0-3
  4               0-3
  5               0-3
  2               0-3";;RedHatEnterpriseLinux7/RHEL-114505
145;;;;;;;;;5;# virsh dumpxml rhel | grep iothread;<iothreads>5</iothreads>;;RedHatEnterpriseLinux7/RHEL-114505
145;;;;;;;;;6;"S3:  define both iothread number and id
 # virsh edit rhel
   <iothreads>5</iothreads>
  <iothreadids>
     <iothread id=""2""/>
     <iothread id=""4""/>
     <iothread id=""6""/>
     <iothread id=""8""/>
   </iothreadids>
​​";​​;;RedHatEnterpriseLinux7/RHEL-114505
145;;;;;;;;;7;# virsh iothreadinfo rhel;" IOThread ID     CPU Affinity   
 ---------------------------------------------------
  1               0-3
  2               0-3
  4               0-3
  6               0-3
  8               0-3";;RedHatEnterpriseLinux7/RHEL-114505
145;;;;;;;;;8;"# virsh edit rhel
  <iothreads>3</iothreads>
   <iothreadids>
     <iothread id='2'/>
     <iothread id='4'/>
     <iothread id='6'/>
     <iothread id='8'/>
     <iothread id='1'/>
     <iothread id='3'/>
     <iothread id='5'/>
   </iothreadids>
 
 Domain rhel XML configuration edited.
 # virsh dumpxml rhel
​​";" <iothreads>7</iothreads>
   <iothreadids>
     <iothread id='2'/>
     <iothread id='4'/>
     <iothread id='6'/>
     <iothread id='8'/>
     <iothread id='1'/>
     <iothread id='3'/>
     <iothread id='5'/>
   </iothreadids>
 
​​";;RedHatEnterpriseLinux7/RHEL-114505
146;RHEL-114562;[iothreaddel] remove the IOThread will fail while it is being used by disk;If an IOThread is currently assigned to a disk resource such as via the attach-disk command, then the attempt to remove the IOThread will fail.;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"# qemu-img create -f qcow2 /var/lib/libvirt/images/2nd_disk.qcow2 30M 
 Formatting '/var/lib/libvirt/images/2nd_disk.qcow2', fmt=qcow2 size=31457280 cluster_size=65536 lazy_refcounts=off refcount_bits=16
 
 # virsh start rhel
 Domain rhel started";​​;Test Case;RedHatEnterpriseLinux7/RHEL-114562
146;;;;;;;;;2;"# virsh attach-disk rhel /var/lib/libvirt/images/2nd_disk.qcow2 vdb --iothread 1
​​";"error: Failed to attach disk
 error: unsupported configuration: Disk iothread '1' not defined in iothreadid";;RedHatEnterpriseLinux7/RHEL-114562
146;;;;;;;;;3;# virsh iothreadadd rhel 1;​​;;RedHatEnterpriseLinux7/RHEL-114562
146;;;;;;;;;4;"# virsh attach-disk rhel /var/lib/libvirt/images/2nd_disk.qcow2 vdb --iothread 1
 
 
​​";"Disk attached successfully
 
 # virsh dumpxml rhel
 ...
    <disk type='file' device='disk'>
       <driver name='qemu' type='raw' iothread='1'/>
       <source file='/var/lib/libvirt/images/2nd_disk.qcow2'/>
       <backingStore/>
       <target dev='vdb' bus='virtio'/>
       <alias name='virtio-disk1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0c' function='0x0'/>
     </disk>
 ...";;RedHatEnterpriseLinux7/RHEL-114562
146;;;;;;;;;5;"# virsh iothreaddel rhel 1
 
​​";error: invalid argument: cannot remove IOThread 1 since it is being used by disk 'vdb';;RedHatEnterpriseLinux7/RHEL-114562
146;;;;;;;;;6;"# virsh detach-disk rhel /var/lib/libvirt/images/2nd_disk.qcow2
 Disk detached successfully";​​;;RedHatEnterpriseLinux7/RHEL-114562
146;;;;;;;;;7;"# virsh iothreaddel rhel 1
 # virsh iothreadinfo rhel
 No IOThreads found for the domain";​​;;RedHatEnterpriseLinux7/RHEL-114562
147;RHEL-114619;[cpuset] set cpu placement to auto or keep as default, or set cpu affinity in cputune;"The optional attribute placement can be used to indicate the CPU placement mode for domain process. The value can be either ""static"" or ""auto"", but defaults to placement of numatune or ""static"" if cpuset is specified.";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. set cpuset with placement is auto
 # virsh edit rhel
 <vcpu placement='auto' cpuset='1' current='1'>4</vcpu>";"Using ""auto"" indicates the domain process will be pinned to the advisory nodeset from querying numad and the value of attribute cpuset will be ignored if it's specified.";Test Case;RedHatEnterpriseLinux7/RHEL-114619
147;;;;;;;;;2;# virsh dumpxml rhel;" <vcpu placement='auto' current='1'>4</vcpu>
   <numatune>
     <memory mode='strict' placement='auto'/>
   </numatune>
 ....
 (the cpuset is ignored, and numatune add automatically)";;RedHatEnterpriseLinux7/RHEL-114619
147;;;;;;;;;3;"2. # virsh edit rhel
 <vcpu cpuset='1' current='1'>4</vcpu>";​​;;RedHatEnterpriseLinux7/RHEL-114619
147;;;;;;;;;4;# virsh dumpxml rhel;" <vcpu placement='static' cpuset='1' current='1'>4</vcpu>
 
 (default to static if cpuset is set)";;RedHatEnterpriseLinux7/RHEL-114619
147;;;;;;;;;5;"3. # virsh edit rhel
  <vcpu placement='static' cpuset='1'  current='1'>2</vcpu>
   <iothreads>1</iothreads>
   <iothreadids>
     <iothread id='1'/>
   </iothreadids>
   <cputune>
     <vcpupin vcpu='0' cpuset='3'/>
     <emulatorpin cpuset='2'/>
     <iothreadpin iothread='1' cpuset='2'/>
   </cputune>
 
 # virsh start rhel";​​;;RedHatEnterpriseLinux7/RHEL-114619
147;;;;;;;;;6;"# virsh vcpupin rhel
 VCPU: CPU Affinity
 ----------------------------------
    0: 3
    1: 1
 
 # virsh iothreadinfo rhel
  IOThread ID     CPU Affinity   
 ---------------------------------------------------
  1               2
 
 # virsh emulatorpin rhel
 emulator: CPU Affinity
 ----------------------------------
        *: 2";cpuset will be override when the affinity set in cputune;;RedHatEnterpriseLinux7/RHEL-114619
148;RHEL-115003;[vcpusched] define/edit a vm with a vcpus='0, ^0' in <vcpusched> - bug 1210545;libvirtd should not crash with such negative setting;Yalan Zhang (yalzhang);Medium;Negative;Not Automated;;1;"1.add a line in guest xml like this: <vcpusched vcpus='0,^0' scheduler='fifo' priority='1'/>
 
 # virsh edit r6 
 error: unsupported configuration: 'vcpus' scheduler bitmap '0,^0' is empty
 Failed. Try again? [y,n,i,f,?]: ";"it a invalid setting, should not pass validation
 
 
 
 (refer to bug 1210545)";Test Case;RedHatEnterpriseLinux7/RHEL-115003
148;;;;;;;;;2;"2. also test with iothreadsched:
 <iothreadsched iothreads='0,^0' scheduler='batch'/> 
 
 # virsh edit r6 
 error: unsupported configuration: 'iothreads' scheduler bitmap '0,^0' is empty
 Failed. Try again? [y,n,i,f,?]: ";can not validate;;RedHatEnterpriseLinux7/RHEL-115003
149;RHEL-115010;[vcpusched][iothreadsched] schedulers used on non-real-time kernel;priority is ignored for non-real-time schedulers;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. edit vm's xml as below:
 # virsh edit rhel
   <vcpu placement='auto' current='6'>10</vcpu>
   <iothreads>2</iothreads>
  <cputune>
     <vcpupin vcpu='0' cpuset='1'/>
     <vcpusched vcpus='1' scheduler='batch' priority='4'/>
     <vcpusched vcpus='3,6' scheduler='idle' priority='8'/>
     <vcpusched vcpus='4-5,^5' scheduler='idle' priority='89'/>
     <vcpusched vcpus='5' scheduler='rr' priority='8'/>
     <vcpusched vcpus='8-9' scheduler='fifo' priority='88'/>
     <iothreadsched iothreads='1' scheduler='fifo' priority='1'/>
     <iothreadsched iothreads='2' scheduler='rr' priority='1'/>
   </cputune>
 
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element cputune in interleave
 Invalid sequence in interleave
 Element domain failed to validate content
 
 Failed. Try again? [y,n,i,f,?]:   --> press 'i'";​​;Test Case;RedHatEnterpriseLinux7/RHEL-115010
149;;;;;;;;;2;"# virsh dumpxml rhel | grep /cputune -B11
 
 
​​";"  <cputune>
     <vcpupin vcpu='0' cpuset='1'/>
     <vcpusched vcpus='1' scheduler='batch'/>
     <vcpusched vcpus='3' scheduler='idle'/>
     <vcpusched vcpus='4' scheduler='idle'/>
     <vcpusched vcpus='5' scheduler='rr' priority='8'/>
     <vcpusched vcpus='6' scheduler='idle'/>
     <vcpusched vcpus='8' scheduler='fifo' priority='88'/>
     <vcpusched vcpus='9' scheduler='fifo' priority='88'/>
     <iothreadsched iothreads='1' scheduler='fifo' priority='1'/>
     <iothreadsched iothreads='2' scheduler='rr' priority='1'/>
   </cputune>
 
 (only the priority for rr and fifo exists, the priority for batch, idle are ignored)";;RedHatEnterpriseLinux7/RHEL-115010
149;;;;;;;;;3;"# virsh start rhel
 error: Failed to start domain rhel
 error: Cannot set scheduler parameters for pid 24030: Operation not permitted";​​;;RedHatEnterpriseLinux7/RHEL-115010
149;;;;;;;;;4;"delete the rr / fifo schedulers, then guest start succeed
 # virsh edit rhel
   <vcpu placement='auto' current='6'>10</vcpu>
   <iothreads>2</iothreads>
   <cputune>
     <vcpusched vcpus='1' scheduler='batch'/>
     <vcpusched vcpus='3-4' scheduler='idle'/>
 <iothreadsched iothreads='1' scheduler='batch'/>
 <iothreadsched iothreads='2' scheduler='idle'/>
   </cputune>
 
 # virsh start rhel
 Domain rhel started";guest start successfully;;RedHatEnterpriseLinux7/RHEL-115010
149;;;;;;;;;5;"find the thread id of vcpu1, vcpu2, iothread1, iothread2
 
 # pidof qemu-kvm
 25891
 
 # head -v  /proc/25891/task/*/comm
 ==> /proc/25891/task/25891/comm <==
 qemu-kvm
 
 ==> /proc/25891/task/25985/comm <==
 qemu-kvm
 
 ==> /proc/25891/task/25986/comm <==
 IO iothread1
 
 ==> /proc/25891/task/25987/comm <==
 IO iothread2
 
 ==> /proc/25891/task/25997/comm <==
 CPU 0/KVM
 
 ==> /proc/25891/task/25998/comm <==
 CPU 1/KVM
 
 ==> /proc/25891/task/26000/comm <==
 CPU 2/KVM
 
 ==> /proc/25891/task/26004/comm <==
 CPU 3/KVM
 
 ==> /proc/25891/task/26005/comm <==
 CPU 4/KVM
 
 ==> /proc/25891/task/26006/comm <==
 CPU 5/KVM
 
 ==> /proc/25891/task/26039/comm <==
 SPICE Worker";​​;;RedHatEnterpriseLinux7/RHEL-115010
149;;;;;;;;;6;"# chrt -p 25998
​​";"pid 25998's current scheduling policy: SCHED_BATCH
 pid 25998's current scheduling priority: 0";;RedHatEnterpriseLinux7/RHEL-115010
149;;;;;;;;;7;# chrt -p 26004;"pid 26004's current scheduling policy: SCHED_IDLE
 pid 26004's current scheduling priority: 0";;RedHatEnterpriseLinux7/RHEL-115010
149;;;;;;;;;8;# chrt -p 25986;"pid 25986's current scheduling policy: SCHED_BATCH
 pid 25986's current scheduling priority: 0";;RedHatEnterpriseLinux7/RHEL-115010
149;;;;;;;;;9;# chrt -p 25987;"pid 25987's current scheduling policy: SCHED_IDLE
 pid 25987's current scheduling priority: 0
​​";;RedHatEnterpriseLinux7/RHEL-115010
150;RHEL-115014;[quota] negative settings for quota / emulator_quota / iothread_quota (iterable);"
xml element | schedinfo operand | positive | negative 
shares(RHEL7-17917) | cpu_shares | 0,1 will change to 2;2-262144;larger than 262144  change to 262144;negative value change to 262144 | 
period / emulator_period / iothread_period(this case for negative) | vcpu_period | 0,[1000, 1000000] | [~,-1],[1,999],[1000001~],non-numerical  
quota/emulator_quota/iothread_quota(this case for negative) | vcpu_quota | less than 0, 0, [1000, 18446744073709551](less than 0 means infinite bandwidth, 0 means no value) | [1,999],[18446744073709552,~],non-numerical";Yalan Zhang (yalzhang);Low;Negative;Not Automated;;1;"set iteration, the QUOTA  can be 
 vcpu_quota / quota in xml
 emulator_quota
 iothread_quota
 
 if test iothread_quota, should have iothread defined in vm's xml";​​;Test Case;RedHatEnterpriseLinux7/RHEL-115014
150;;;;;;;;;2;"# virsh start rhel
 Domain rhel started
 
 # virsh schedinfo rhel 
 Scheduler      : posix
 cpu_shares     : 1024
 vcpu_period    : 100000
 vcpu_quota     : -1
 emulator_period: 100000
 emulator_quota : -1
 global_period  : 100000
 global_quota   : -1
 iothread_period: 100000
 iothread_quota : -1";​​;;RedHatEnterpriseLinux7/RHEL-115014
150;;;;;;;;;3;"The value should be in range [1000, 18446744073709551] or less than 0. 
 
 # virsh schedinfo rhel --set QUOTA=40";"Scheduler      : posix
 error: invalid argument: value of 'QUOTA ' is out of range [1000, 18446744073709551]";;RedHatEnterpriseLinux7/RHEL-115014
150;;;;;;;;;4;"# virsh schedinfo rhel --set QUOTA=18446744073709552


";"Scheduler      : posix
 error: invalid argument: value of 'QUOTA ' is out of range [1000, 18446744073709551]";;RedHatEnterpriseLinux7/RHEL-115014
150;;;;;;;;;5;"# virsh schedinfo rhel --set QUOTA=sdf

";"Scheduler      : posix
 error: invalid argument: Invalid value for field 'QUOTA ': expected long long
";;RedHatEnterpriseLinux7/RHEL-115014
150;;;;;;;;;6;"set in xml
   <cputune>
 <QUOTA >500</QUOTA >  
 </cputune>

 # virsh edit rhel
 error: unsupported configuration: Value of cputune quota must be in range [1000, 18446744073709551]
 Failed. Try again? [y,n,i,f,?]: 
 error: unsupported configuration: Value of cputune quota must be in range [1000, 18446744073709551]
 Failed. Try again? [y,n,f,?]: 

  ";​​;;RedHatEnterpriseLinux7/RHEL-115014
150;;;;;;;;;7;"set as sdf
 # virsh edit rhel
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element cputune in interleave
 Invalid sequence in interleave
 Element domain failed to validate content

 Failed. Try again? [y,n,i,f,?]: 
 error: XML error: can't parse cputune quota value
 Failed. Try again? [y,n,f,?]: 

";​​;;RedHatEnterpriseLinux7/RHEL-115014
150;;;;;;;;;8;" <cputune>
     <QUOTA >18446744073709552</QUOTA >
   </cputune>

 # virsh edit rhel
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element cputune in interleave
 Invalid sequence in interleave
 Element domain failed to validate content

 Failed. Try again? [y,n,i,f,?]: 
 error: unsupported configuration: Value of cputune quota must be in range [1000, 18446744073709551]
 Failed. Try again? [y,n,f,?]: 
";​​;;RedHatEnterpriseLinux7/RHEL-115014
151;RHEL-115015;[quota] positive settings for quota /emulator_quota/iothread_quota (iterable);"less than 0, 0, [1000, 18446744073709551]

(less than 0 means infinite bandwidth, 0 means no value)
xml element | schedinfo operand | positive | negative
shares(RHEL7-17917) | cpu_shares | 0,1 will change to 2;2-262144;larger than 262144  change to 262144;negative value change to 262144 | 
period / emulator_period / iothread_period/global_quota | vcpu_period/emulator_quota/iothread_quota/global_quota | 0,[1000, 1000000] | [~,-1],[1,999],[1000001~],non-numerical  
quota/emulator_quota/iothread_quota/global_quota | vcpu_quota/emulator_quota/iothread_quota/global_quota | less than 0, 0, [1000, 18446744073709551](less than 0 means infinite bandwidth, 0 means no value) | [1,999],[18446744073709552,~],non-numerical";Yalan Zhang (yalzhang);Low;Positive;Not Automated;;1;"set iteration, the QUOTA  can be 
 vcpu_quota(quota in xml)
 emulator_quota
 iothread_quota

 if test iothread_quota, should have iothread defined in vm's xml";​​;Test Case;RedHatEnterpriseLinux7/RHEL-115015
151;;;;;;;;;2;"# virsh start rhel
 Domain rhel started

 # virsh schedinfo rhel 
 Scheduler      : posix
 cpu_shares     : 1024
 vcpu_period    : 100000
 vcpu_quota     : -1
 emulator_period: 100000
 emulator_quota : -1
 global_period  : 100000
 global_quota   : -1
 iothread_period: 100000
 iothread_quota : -1";default is 100000;;RedHatEnterpriseLinux7/RHEL-115015
151;;;;;;;;;3;"A domain with quota as any negative value indicates that the domain has infinite bandwidth, which means that it is not bandwidth controlled.
 less than 0

 # virsh schedinfo rhel --set QUOTA=-8

";" Scheduler      : posix
 cpu_shares     : 1024
 vcpu_period    : 100000
 vcpu_quota     : -1
 emulator_period: 100000
 emulator_quota : -1
 global_period  : 100000
 global_quota   : -1
 iothread_period: 100000
 iothread_quota : -1";;RedHatEnterpriseLinux7/RHEL-115015
151;;;;;;;;;4;"A quota with value 0 means no value.
 set to 0

 # virsh schedinfo rhel --set QUOTA=0

";"Scheduler      : posix
 cpu_shares     : 1024
 vcpu_period    : 100000
 vcpu_quota     : -1
 emulator_period: 100000
 emulator_quota : -1
 global_period  : 100000
 global_quota   : -1
 iothread_period: 100000
 iothread_quota : -1";;RedHatEnterpriseLinux7/RHEL-115015
151;;;;;;;;;5;"# virsh schedinfo rhel --set QUOTA=1000

";"for vcpu_quota
 Scheduler      : posix
 cpu_shares     : 1024
 vcpu_period    : 100000
 vcpu_quota     : 1000
 emulator_period: 100000
 emulator_quota : -1
 global_period  : 100000
 global_quota   : -1
 iothread_period: 100000
 iothread_quota : -1";;RedHatEnterpriseLinux7/RHEL-115015
151;;;;;;;;;6;"# virsh schedinfo rhel --set QUOTA=80000

";"check the corresponding output from the schedinfo, should be what we set

 for vcpu_quota
 Scheduler      : posix
 cpu_shares     : 1024
 vcpu_period    : 100000
 vcpu_quota     : 80000
 emulator_period: 100000
 emulator_quota : -1
 global_period  : 100000
 global_quota   : -1
 iothread_period: 100000
 iothread_quota : -1";;RedHatEnterpriseLinux7/RHEL-115015
151;;;;;;;;;7;"# virsh schedinfo rhel --set QUOTA=18446744073709551

";"check the corresponding output from the schedinfo, should be what we set

 for vcpu_quota
 Scheduler      : posix
 cpu_shares     : 1024
 vcpu_period    : 100000
 vcpu_quota     : 18446744073709551
 emulator_period: 100000
 emulator_quota : -1
 global_period  : 100000
 global_quota   : -1
 iothread_period: 100000
 iothread_quota : -1";;RedHatEnterpriseLinux7/RHEL-115015
151;;;;;;;;;8;"set in xml as -9, 0, 18446744073709551
   <cputune>
 <QUOTA>-9</QUOTA>  
 </cputune>

 # virsh edit rhel
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element cputune in interleave
 Invalid sequence in interleave
 Element domain failed to validate content

 Failed. Try again? [y,n,i,f,?]: 
 Domain rhel XML configuration edited.

 # virsh start rhel
 # virsh dumpxml rhel | grep /cputune -B2
   <cputune>
     <QUOTA>-9</QUOTA>
   </cputune>
";guest can start successfully;;RedHatEnterpriseLinux7/RHEL-115015
151;;;;;;;;;9;# virsh schedinfo rhel;"check the corresponding output from the schedinfo, should be what we set
 
 for vcpu_quota
 Scheduler      : posix
 cpu_shares     : 1024
 vcpu_period    : 100000
 vcpu_quota     : -1
 emulator_period: 100000
 emulator_quota : -1
 global_period  : 100000
 global_quota   : -1
 iothread_period: 100000
 iothread_quota : -1";;RedHatEnterpriseLinux7/RHEL-115015
151;;;;;;;;;10;"set as 0, it is ignored
   <cputune>
     <QUOTA>0</QUOTA>
   </cputune>
 # virsh dumpxml rhel | grep /cputune -B2
 #";​​;;RedHatEnterpriseLinux7/RHEL-115015
151;;;;;;;;;11;"set as 18446744073709551, guest can start successfully

 # virsh dumpxml rhel | grep /cputune -B2
   <cputune>
     <QUOTA>18446744073709551</QUOTA>
   </cputune>



";​​;;RedHatEnterpriseLinux7/RHEL-115015
151;;;;;;;;;12;# virsh schedinfo rhel ;"Scheduler      : posix
 cpu_shares     : 1024
 vcpu_period    : 100000
 vcpu_quota     : 18446744073709551
 emulator_period: 100000
 emulator_quota : -1
 global_period  : 100000
 global_quota   : -1
 iothread_period: 100000
 iothread_quota : -1";;RedHatEnterpriseLinux7/RHEL-115015
152;RHEL-115016;[period] negative settings for period / iothread_period /emulator_period (iterable);"
xml element | schedinfo operand | positive | negative
shares(RHEL7-17917) | cpu_shares | 0,1 will change to 2;2-262144;larger than 262144  change to 262144;negative value change to 262144 | 
period / emulator_period / iothread_period | vcpu_period | 0,[1000, 1000000] | [~,-1],[1,999],[1000001~],non-numerical  
quota/emulator_quota/iothread_quota | vcpu_quota | less than 0, 0, [1000, 18446744073709551](less than 0 means infinite bandwidth, 0 means no value) | [1,999],[18446744073709552,~],non-numerical";Yalan Zhang (yalzhang);Low;Negative;Not Automated;;1;"set iteration: the PERIOD  can be
 vcpu_period (period in xml)
 emulator_period
 iothread_period
 
 if test iothread_period, should have iothread defined in vm's xml";​​;Test Case;RedHatEnterpriseLinux7/RHEL-115016
152;;;;;;;;;2;"# virsh start rhel
 Domain rhel started
 
 # virsh schedinfo rhel 
 Scheduler      : posix
 cpu_shares     : 1024
 vcpu_period    : 100000
 vcpu_quota     : -1
 emulator_period: 100000
 emulator_quota : -1
 global_period  : 100000
 global_quota   : -1
 iothread_period: 100000
 iothread_quota : -1";​​;;RedHatEnterpriseLinux7/RHEL-115016
152;;;;;;;;;3;"# virsh schedinfo rhel --set  PERIOD=-3
 # virsh schedinfo rhel --set  PERIOD=1
 # virsh schedinfo rhel --set  PERIOD=1000001

 # virsh schedinfo rhel --set  PERIOD=sdf";"when set as -3, 1, 1000001, the error message as below
 Scheduler      : posix
 error: invalid argument: value of ' PERIOD' is out of range [1000, 1000000]

 when set as sdf
 Scheduler      : posix
 error: invalid argument: Invalid value for field ' PERIOD ': expected unsigned long long";;RedHatEnterpriseLinux7/RHEL-115016
152;;;;;;;;;4;"set perios as -9, 1, 1000001, ssf in xml like as below
  <cputune>
     < PERIOD >-9</ PERIOD >
   </cputune>


";"the xml can not save successfully with clear error message

 # virsh edit rhel
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element cputune in interleave
 Invalid sequence in interleave
 Element domain failed to validate content

 Failed. Try again? [y,n,i,f,?]:  --> press 'i'
 error: unsupported configuration: Value of cputune period must be in range [1000, 1000000]
 Failed. Try again? [y,n,f,?]: 


 when set as sdf
 # virsh edit rhel
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element cputune in interleave
 Invalid sequence in interleave
 Element domain failed to validate content

 Failed. Try again? [y,n,i,f,?]: 
 error: XML error: can't parse cputune period value
 Failed. Try again? [y,n,f,?]: 
";;RedHatEnterpriseLinux7/RHEL-115016
153;RHEL-115425;[libvirtd][qemu-attach] Attach a qemu process to libvirtd -- bug 1350688;"Test qemu attach with existing pid

<dzheng> Duplicated to below which is already marked 'automated'. So which should be used??
RHEL7-17071 - [qemu-attach]Attach an externally launched QEMU process to the libvirt QEMU driver ";Yan Fu (yafu);High;Positive;Not Automated;;1;"1.#pgrep libvirtd
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-115425
153;;;;;;;;;2;"2.Start a qemu-kvm process:
 #/usr/libexec/qemu-kvm -m 1024 -drive file=/var/lib/libvirt/images/test.img,index=0 -monitor unix:/tmp/ff,server,nowait -name r7 --uuid 1fdf7c78-866a-4dcf-b017-5a9299682e1f &
​​";"Output:
 [1] 31049
 VNC server running on '10.66.4.148;5900'";;RedHatEnterpriseLinux7/RHEL-115425
153;;;;;;;;;3;3.#virsh qemu-attach 31049;"Output:
 Domain r7 attached to pid 31049";;RedHatEnterpriseLinux7/RHEL-115425
153;;;;;;;;;4;"4.Check libvirtd's pid 
 #pgrep libvirtd";4.The pid is the same as step 1.;;RedHatEnterpriseLinux7/RHEL-115425
154;RHEL-115506;[hotplug][console] serial console do not support hotplug/ hot-unplug - bug 1447183 need update;serial console do not support hotplug and hotunplug, the error message should be clear ;Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1;" 1.Start a guest with serial console device:
 
* #virsh dumpxml rhel7.3-min
...
 <console type='pty' tty='/dev/pts/13'>
      <source path='/dev/pts/13'/>
      <target type='serial' port='0'/>
      <alias name='serial0'/>
    </console>
 ...
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-115506
154;;;;;;;;;2;"2.Prepare the console device xml:
 
* #cat console.xml
<console type='pty' tty='/dev/pts/13'>
      <source path='/dev/pts/13'/>
      <target type='serial' port='0'/>
      <alias name='serial0'/>
    </console>";​​;;RedHatEnterpriseLinux7/RHEL-115506
154;;;;;;;;;3;"3.Detach the console device from the guest:
 #virsh detach-device rhel7.3-min console.xml
 
​​";should failed with clear error;;RedHatEnterpriseLinux7/RHEL-115506
154;;;;;;;;;4;"4.Check the active xml of the guest, the console device is not detached actually:
 #virsh dumpxml rhel7.3-min
 ...
 <console type='pty' tty='/dev/pts/13'>
      <source path='/dev/pts/13'/>
      <target type='serial' port='0'/>
      <alias name='serial0'/>
    </console>
 ...";​​;;RedHatEnterpriseLinux7/RHEL-115506
154;;;;;;;;;5;"5.Detach the console device with --config, it failed:
 
* # virsh detach-device rhel7.3-min console.xml  --config
error: Failed to detach device from console.xml
 error: Requested operation is not valid: detaching serial console is not supported";​​;;RedHatEnterpriseLinux7/RHEL-115506
155;RHEL-115507;[console] Support virtio console devices generating virtio-serial address - bug 1447505 - not supported yet;"the bug is not fixed yet
";Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-115507
156;RHEL-115537;[spice] [spice_auto_unix_socket] Do managedsave&restore with spice listening on an auto-generated unix socket;Bug 1511407 - listen type changed to 'none' after managedsave/restore guest with spice listening on an auto-generated unix socket ;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;Do case RHEL7-60225 ;​​;Test Case;RedHatEnterpriseLinux7/RHEL-115537
156;;;;;;;;;2;"Do managedsave&restore, and check spice listen type:
 1) # virsh managedsave rhel7.4
 
 2) # virsh managedsave-dumpxml rhel7.4 |grep -a2
 
 3) # virsh start rhel7.4
 
 4) # virsh dumpxml rhel7.4 | grep gra -a2";"2) After managedsave, the dumpxml is as below:
 ... 
 <graphics type='spice' autoport='yes'>
  <listen type='address'/> 
 </graphics> 
 ...
 
 4) After restore, the graphic listen type is ""socket"", the dumpxml is as below:
 ...
     <graphics type='spice'>
       <listen type='socket' socket='/var/lib/libvirt/qemu/domain-2-rhel7-min/spice.sock'/>
     </graphics>
 ...";;RedHatEnterpriseLinux7/RHEL-115537
157;RHEL-115565;[console][file] Test seclabel with file type console device- bug 1371828 1528628 - need update;Bug 1528628 - seclabel element can not be successfully validated in character devices, but the setting can exposed in live xml Bug 1371828 - Should failed to validate XML if no model name with seclabel{comment:14};Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1;"Scenario 1: seclabel relabel='no'
 
 1. add below device into guest's xml
 
* # virsh edit rhel
...
 <console type='file'>
       <source path='/var/log/libvirt/test.log' append='on'>
        <seclabel relabel='no'>
         </seclabel>
       </source>
       <target type='virtio' port='1'/>
     </console>
 ...

 
* # virsh start rhel
"; need update after Bug 1371828 - Should failed to validate XML if no model name with seclabel;Test Case;RedHatEnterpriseLinux7/RHEL-115565
157;;;;;;;;;2;"Scenario 2: seclabel relabel='yes' + dac
 
 1. add below device into guest's xml
 
* # virsh edit rhel
...
 <console type='file'>
       <source path='/var/log/libvirt/test.log' append='on'>
         <seclabel model='dac' relabel='yes'>
           <label>107:107</label>
         </seclabel>
       </source>
       <target type='virtio' port='1'/>
     </console>
...";xml can validated;;RedHatEnterpriseLinux7/RHEL-115565
157;;;;;;;;;3;"2.
* # virsh start rhel
Domain rhel started
";guest can start;;RedHatEnterpriseLinux7/RHEL-115565
157;;;;;;;;;4;"3. 
 
* # ll -Z /var/log/libvirt/test.log
-rw-------. qemu qemu system_u:object_r:virt_log_t:s0  /var/log/libvirt/test.log";​​;;RedHatEnterpriseLinux7/RHEL-115565
157;;;;;;;;;5;"Scenario 3: seclabel relabel='yes' + static

 <console type='file'>
 <source path='/var/log/libvirt/test.log' append='on'>
 <seclabel model='dac' relabel='no'/>
 </source>
 <target type='virtio' port='1'/>
 </console> ";​​;;RedHatEnterpriseLinux7/RHEL-115565
157;;;;;;;;;6;"Scenario 4: seclabel relabel='yes' + selinux

<console type='file'>
 <source path='/var/log/libvirt/test.log' append='on'>
 <seclabel relabel='yes'/>
 </source>
 <target type='virtio' port='1'/>
 </console>
";​​;;RedHatEnterpriseLinux7/RHEL-115565
158;RHEL-115566;[serial] hotplug and unplug for pci serial device - bug 1528610 need update;Bug 1528610 - hotplug pty serial device with pci-serial type will add console device automatically, but can not be connected;Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-115566
159;RHEL-115585;[serial][file][hotplug] hotplug a file type serial device - bug 1529688 - need update;Bug 1529688  hotplug a file type serial device fail as Permission denied;Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1;"# virsh start pc
 # ll -Z  /var/log/libvirt/vm-serial.log
 -rw-------. root root system_u:object_r:virt_log_t:s0  /var/log/libvirt/vm-serial.log
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-115585
159;;;;;;;;;2;"# cat serial.xml 
 <serial type='file'>
      <source path='/var/log/libvirt/vm-serial.log' append='on'/>
      <target type='pci-serial' port='1'>
        <model name='pci-serial'/>
      </target>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
    </serial>
​​";​​;;RedHatEnterpriseLinux7/RHEL-115585
159;;;;;;;;;3;# virsh attach-device pc serial.xml;"should be succeed, do not fail like:
 
 error: Failed to attach device from serial.xml
 error: internal error: unable to execute QEMU command 'chardev-add': Could not open '/var/log/libvirt/vm-serial.log': Permission denied";;RedHatEnterpriseLinux7/RHEL-115585
160;RHEL-116060;[virtio-scsi][iommu] virtio-scsi with iommu and ats attributes;"virtio device can have iommu and ats attributes in the driver element
";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"prepare a q35 guest with below content
 
* # virsh edit q35
<features>
  ...
     <ioapic driver='qemu'/>
   </features>
 ...
  <controller type='virtio-serial' index='0'>
       <driver iommu='on' ats='on'/>
       <address type='pci' domain='0x0000' bus='0x04' slot='0x00' function='0x0'/>
     </controller>
 ...
  <iommu model='intel'>
       <driver intremap='on' iotlb='on'/>
     </iommu>
 ...";​​;Test Case;RedHatEnterpriseLinux7/RHEL-116060
160;;;;;;;;;2;"* # cat scsi_controller.xml
<controller type='scsi' index='0' model='virtio-scsi'>
 <driver queues='2' cmd_per_lun='2'  max_sectors='100'  ioeventfd='on'  iothread='2' iommu='on' ats='on'/>
     </controller>

* # virsh attach-device q35 scsi_controller.xml  --config
Device attached successfully

 
* # virsh start q35
Domain q35 started";guest works ok, not hang;;RedHatEnterpriseLinux7/RHEL-116060
160;;;;;;;;;3;"* # cat scsi.disk
<disk type='file'>
 <source file='/var/lib/libvirt/images/pc-1.qcow2'/>
 <target dev='sda' bus='scsi'/>
 </disk>

 
* # virsh attach-device q35 scsi.disk
Device attached successfully

 
* on guest 
* # lsblk
NAME          MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
 sda             8:0    0 192.5K  0 disk 
 ...
";guest works ok, not hang;;RedHatEnterpriseLinux7/RHEL-116060
161;RHEL-116061;[virtio-serial][iommu] virtio-serial controller with iommu and ats attributes;]virtio-serial controller with iommu and ats attributes;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"* # virsh edit q35 
<features>
  ...
     <ioapic driver='qemu'/>
   </features>
 ...
  <controller type='virtio-serial' index='0'>
       <driver iommu='on' ats='on'/>
       <address type='pci' domain='0x0000' bus='0x04' slot='0x00' function='0x0'/>
     </controller>
 ...
  <iommu model='intel'>
       <driver intremap='on' iotlb='on'/>
     </iommu>
...
* # virsh start q35
";guest start successfully, and work well;Test Case;RedHatEnterpriseLinux7/RHEL-116061
161;;;;;;;;;2;"* # cat channel.xml 
<channel type='pty'>
 <target type='virtio'/>
 </channel>

 
* # virsh attach-device q35 channel.xml 
Device attached successfully

​​";​​;;RedHatEnterpriseLinux7/RHEL-116061
161;;;;;;;;;3;"on guest 
 
* # echo a > /dev/vport1p3
 
 on host
* # cat /dev/pts/3
a";the channel function works well;;RedHatEnterpriseLinux7/RHEL-116061
161;;;;;;;;;4;"* # cat pty.xml
<channel type='pty'>
       <source path='/dev/pts/3'/>
       <target type='virtio' state='disconnected'/>
       <alias name='channel2'/>
       <address type='virtio-serial' controller='0' bus='0' port='3'/>
     </channel>
* # virsh detach-device q35 pty.xml
Device detached successfully";can be hotunpluged;;RedHatEnterpriseLinux7/RHEL-116061
161;;;;;;;;;5;"delete the iommu device
 
* # virsh start q35
Domain q35 started
";​​;;RedHatEnterpriseLinux7/RHEL-116061
161;;;;;;;;;6;" <controller type='virtio-serial' index='0'>
       <driver iommu='on' ats='off'/>
       <alias name='ua-731ed86a-d49a-4336-9720-97cf959176d4'/>
       <address type='pci' domain='0x0000' bus='0x04' slot='0x00' function='0x0'/>
     </controller>";"guest start 
​​";;RedHatEnterpriseLinux7/RHEL-116061
162;RHEL-116064;[fdc] fdc controller and floppy device connected to the fdc controller;check guest can start with fdc controller and the device connected to the controller;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"when guest is running
 
 
* # cat fdc.xml
<controller type='fdc'/>

 
* # virsh attach-device rhel7.4 fdc.xml 
error: Failed to attach device from fdc.xmlk
 error: Operation not supported: 'fdc' controller cannot be hot plugged.
";"do not support hotplug
​​";Test Case;RedHatEnterpriseLinux7/RHEL-116064
162;;;;;;;;;2;"* # virsh destroy rhel7.4
Domain rhel7.4 destroyed

 
* # virsh attach-device  rhel7.4  fdc.xml --config
Device attached successfully

 
* # virsh dumpxml rhel7.4 | grep fdc
    <controller type='fdc' index='0'/>

​​";"support coldplug
​​";;RedHatEnterpriseLinux7/RHEL-116064
162;;;;;;;;;3;"* # virsh start rhel7.4
* # virsh dumpxml rhel7.4 | grep fdc  -A1
    <controller type='fdc' index='0'>
       <alias name='fdc0'/>
     </controller>";​​;;RedHatEnterpriseLinux7/RHEL-116064
162;;;;;;;;;4;"* # cat fdc2.xml
<controller type='fdc' index='0'>
       <alias name='fdc0'/>
     </controller>

* # virsh detach-device rhel7.4 fdc2.xml
error: Failed to detach device from fdc2.xml
 error: Operation not supported: 'fdc' controller cannot be hot unplugged.
";"do not support hotunplug
​​";;RedHatEnterpriseLinux7/RHEL-116064
162;;;;;;;;;5;"* # virsh detach-device rhel7.4 fdc2.xml --config
Device detached successfully
";"cold unplug is ok
​​";;RedHatEnterpriseLinux7/RHEL-116064
162;;;;;;;;;6;"* device(floppy) connected to the fdc controller
";floppy device hotplug isn't supported by libvirt;;RedHatEnterpriseLinux7/RHEL-116064
162;;;;;;;;;7;"* when there is no fdc controller in the xml, coldplug a floppy device with fdc bus will add a fdc controller automatically

 
* # cat floppy.xml
<disk type='file' device='floppy'>
       <driver name='qemu' type='raw'/>
       <target dev='fda' bus='fdc'/>
     </disk>

 
* # virsh attach-device rhel7.4 floppy.xml --config
Device attached successfully

 
* # virsh dumpxml rhel7.4
<disk type='file' device='floppy'>
       <driver name='qemu' type='raw'/>
       <target dev='fda' bus='fdc'/>
       <address type='drive' controller='0' bus='0' target='0' unit='0'/>
     </disk>
 ...
  <controller type='fdc' index='0'/>";​​;;RedHatEnterpriseLinux7/RHEL-116064
162;;;;;;;;;8;"* # virsh start rhel7.4
Domain rhel7.4 started";"guest start successfully
​​";;RedHatEnterpriseLinux7/RHEL-116064
162;;;;;;;;;9;"login the guest and check blk deivce
 
* # lsblk
NAME          MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
 fd0             2:0    1   4K  0 disk
 vda           252:0    0  10G  0 disk

​​";"there is fd device
​​";;RedHatEnterpriseLinux7/RHEL-116064
162;;;;;;;;;10;"* # cat floppy.xml
<disk type='file' device='floppy'>
       <target dev='fda' bus='fdc'/>
       <alias name='fdc0-0-0'/>
       <address type='drive' controller='0' bus='0' target='0' unit='0'/>
     </disk>

 
* # virsh detach-device rhel7.4 floppy.xml
error: Failed to detach device from floppy.xml
 error: Operation not supported: disk device type 'floppy' cannot be detached
";​​;;RedHatEnterpriseLinux7/RHEL-116064
162;;;;;;;;;11;"
 
* # virsh detach-device rhel7.4 floppy.xml --config
Device detached successfully

 
 
* # virsh dumpxml rhel7.4 --inactive | grep /disk -B9
===> no fda device";"the floppy device can be coldunplug and coldpluged
​​";;RedHatEnterpriseLinux7/RHEL-116064
163;RHEL-116067;[sata] sata controller and device connected to the controller;cdrom and disk can connected to sata controller;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"prepare an inactive guest without sata controller
 
* # virsh dumpxml rhel7.4 | grep sata
";"no output
 ";Test Case;RedHatEnterpriseLinux7/RHEL-116067
163;;;;;;;;;2;"* # cat sata_controller.xml
<controller type='sata'/>

 
* # virsh attach-device rhel7.4 stata_controller.xml --config
Device attached successfully

 
* # virsh dumpxml rhel7.4 | grep sata -A2
    <controller type='sata' index='0'>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </controller>

 
* # qemu-img create  -f qcow2 /var/lib/libvirt/images/pc-2.qcow2 200M

 
* # cat disk.xml
<disk type='file' device='disk'>
       <source file='/var/lib/libvirt/images/pc-2.qcow2'/>
       <target dev='sda' bus='sata'/>
     </disk>

 
* # virsh dumpxml rhel7.4
...
 <controller type='sata' index='0'>
       <alias name='sata0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </controller>
 ...
  <disk type='file' device='disk'>
       <driver name='qemu' type='raw'/>
       <source file='/var/lib/libvirt/images/pc-2.qcow2'/>
       <backingStore/>
       <target dev='sda' bus='sata'/>
       <alias name='sata0-0-0'/>
       <address type='drive' controller='0' bus='0' target='0' unit='0'/>
     </disk>
";​​;;RedHatEnterpriseLinux7/RHEL-116067
163;;;;;;;;;3;"cdrom can also be sata
​​";​​;;RedHatEnterpriseLinux7/RHEL-116067
164;RHEL-116076;[ccid] ccid controller connected to usb hub - Bug 1375402 need update;ccid controller is connected to usb address and support smartcard devices;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1.  prepare guest xml with 1 usb3 controller, and 3 devices connected to the controller. 
 
* # virsh dumpxml pc
<controller type='usb' index='0' model='nec-xhci'>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/>
    </controller>
 ...
 <input type='tablet' bus='usb'>
      <address type='usb' bus='0' port='1'/>
    </input>
 <redirdev bus='usb' type='spicevmc'>
      <address type='usb' bus='0' port='2'/>
    </redirdev>
    <redirdev bus='usb' type='spicevmc'>
      <address type='usb' bus='0' port='3'/>
    </redirdev>";​​;Test Case;RedHatEnterpriseLinux7/RHEL-116076
164;;;;;;;;;2;"2.  edit the xml to add 1 ccid controller and 1 usb disk
 
* # virsh edit pc
...
   <disk type='file' device='disk'>
      <driver name='qemu' type='raw'/>
      <source file='/var/lib/libvirt/images/pc-2.qcow2'/>
      <target dev='sdx' bus='usb'/>
    </disk>
 <controller type='ccid'>
 <alias name='ua-c80aba6e-b6d8-448b-ab6e-8c7b5c29f353'/>
 </controller>
...
​​";"
​​";;RedHatEnterpriseLinux7/RHEL-116076
164;;;;;;;;;3;"As usb3 only support 4 ports, a hub will be added, and the usb disk and ccid controller will attached to the hub
 
 
* # virsh dumpxml pc
";"Output:
 ...
  <disk type='file' device='disk'>
      <driver name='qemu' type='raw'/>
      <source file='/var/lib/libvirt/images/pc-2.qcow2'/>
      <target dev='sdx' bus='usb'/>
      <address type='usb' bus='0' port='4.1'/>
    </disk>
    <controller type='ccid' index='0'>
      <address type='usb' bus='0' port='4.2'/>
    </controller>
 ...
  <hub type='usb'>
      <address type='usb' bus='0' port='4'/>
    </hub>";;RedHatEnterpriseLinux7/RHEL-116076
164;;;;;;;;;4;"3. start the guest
 
* # virsh start pc

​​";"guest can start successfully, need update since the bug 1375402 not fixed yet
 
 ccid controller can not be attached to usb hub";;RedHatEnterpriseLinux7/RHEL-116076
165;RHEL-116077;[ide] ide controller and disk/cdrom connected to ide controller;;Yalan Zhang (yalzhang);;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116077
166;RHEL-116350;Connect session mode by tls;;Yan Fu (yafu);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116350
167;RHEL-116351;set tls_priority to disable ssl3.0;"set tls_priority to disable ssl3.0
";Yan Fu (yafu);High;Positive;Manual Only;;1;" Scenerio1 Test the tls_priority config in the libvirtd.conf:
 0.Prepare the tls env between hostA and hostB,refer to the case below;
 RHEL7-18274 - [remote access] [tls] Prepare the ipv4 tls env 
 1.Set tls_priority to disable SSL3.0 in libvirtd.conf and restart libvirtd service:
   tls_priority=""NORMAL:!VERS-SSL3.0"" ";​​;Test Case;RedHatEnterpriseLinux7/RHEL-116351
167;;;;;;;;;2;2.$ virsh -c qemu+tls://yafu@yafu-laptop:16524/session?tls_priority=NORMAL:-VERS-ALL:+VERS-SSL3.0;"2.
 error: failed to connect to the hypervisor
 error: authentication failed: TLS handshake failed A packet with illegal or unsupported version was received.";;RedHatEnterpriseLinux7/RHEL-116351
167;;;;;;;;;3;"3.Override TLS priority in URI to use other tls protocol other than ssl3.0:
 $ virsh -c qemu+tls://yafu@yafu-laptop:16524/session?tls_priority=NORMAL:-VERS-ALL:+VERS-TLS1.0";"3.
 Welcome to virsh, the virtualization interactive terminal.

 Type:  'help' for help with commands
        'quit' to quit

 virsh #";;RedHatEnterpriseLinux7/RHEL-116351
167;;;;;;;;;4;"4.Override TLS priority in URI with wrong value:
 $ virsh -c qemu+tls://yafu@yafu-laptop:16524/session?tls_priority=NORMAL:-VERS-ALL:+VERS-SSL4.0";"error: failed to connect to the hypervisor
 error: Failed to set TLS session priority to NORMAL:-VERS-ALL:+VERS-SSL4.0: The request is invalid.";;RedHatEnterpriseLinux7/RHEL-116351
168;RHEL-116364;IDM-SSSD-TC: ldap_provider: cache_performance: User login time statistics for member of 200 groups;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116364
169;RHEL-116365;IDM-SSSD-TC: ldap_provider: cache_performance: User login time statistics for member of 500 groups;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116365
170;RHEL-116366;IDM-SSSD-TC: ldap_provider: cache_performance: User login time statistics for member of 1000 groups;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116366
171;RHEL-116367;IDM-SSSD-TC: ldap_provider: cache_performance: User login time statistics for member of 1500 groups;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116367
172;RHEL-116368;IDM-SSSD-TC: ldap_provider: cache_performance: User login time statistics for member of 2000 groups;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116368
173;RHEL-116369;IDM-SSSD-TC: ldap_provider: cache_performance: User login time statistics for member of 3000 groups ;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116369
174;RHEL-116370;IDM-SSSD-TC: ldap_provider: cache_performance: ID cmd time statistics for member of 200 groups;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116370
175;RHEL-116371;IDM-SSSD-TC: ldap_provider: cache_performance: ID cmd time statistics for member of 500 groups;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116371
176;RHEL-116372;IDM-SSSD-TC: ldap_provider: cache_performance: ID cmd time statistics for member of 1000 groups;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116372
177;RHEL-116373;IDM-SSSD-TC: ldap_provider: cache_performance: ID cmd time statistics for member of 1500 groups;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116373
178;RHEL-116374;IDM-SSSD-TC: ldap_provider: cache_performance: ID cmd time statistics for member of 2000 groups;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116374
179;RHEL-116375;IDM-SSSD-TC: ldap_provider: cache_performance: ID cmd time statistics for member of 3000 groups;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116375
180;RHEL-116376;IDM-SSSD-TC: ldap_provider: cache_performance: Time statistics for listing files owned by 200 users;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116376
181;RHEL-116377;IDM-SSSD-TC: ldap_provider: cache_performance: Time statistics for listing files owned by 500 users;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116377
182;RHEL-116378;IDM-SSSD-TC: ldap_provider: cache_performance: Time statistics for listing files owned by 1000 users;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116378
183;RHEL-116379;IDM-SSSD-TC: ldap_provider: cache_performance: Time statistics for listing files owned by 1500 users;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116379
184;RHEL-116380;IDM-SSSD-TC: ldap_provider: cache_performance: Time statistics for listing files owned by 2000 users;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116380
185;RHEL-116381;IDM-SSSD-TC: ldap_provider: cache_performance: Time statistics for listing files owned by 3000 users;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116381
186;RHEL-116475;report error when set access='shared' with no numa nodes - bug 1448149;"report error when set access='shared' with no numa nodes - bug 1448149    

";Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116475
187;RHEL-116710;[Nodedev][Mellanox] Add switchdev NIC capability to nodedev for Mellanox ConnectX-4/5* cards - Bug 1469552;nodedev-dumpxml: Add switchdev NIC capability to nodedev;Jingjing Shao (jishao);High;Positive;Not Automated;;1;" 1. Create the vf  and check the vfs
 # echo 4 > /sys/devices/pci0000:20/0000:20:03.0/0000:21:00.1/sriov_numvfs
 # virsh nodedev-list --tree
​​";" Output: |   +- pci_0000_21_00_1
  |   |   |
  |   |   +- net_ens4f1_24_8a_07_91_ea_1d
  |   |     
  |   +- pci_0000_21_01_2
  |   |   |
  |   |   +- net_enp33s1f2_46_ee_f0_5d_62_19
  |   |     
  |   +- pci_0000_21_01_3
  |   |   |
  |   |   +- net_enp33s1f3_66_6a_e9_85_a5_f3
  |   |     
  |   +- pci_0000_21_01_4
  |   |   |
  |   |   +- net_enp33s1f4_7e_49_76_53_52_d1
  |   |     
  |   +- pci_0000_21_01_5
  |       |
  |       +- net_enp33s1f5_22_1e_a1_87_ce_e5";Test Case;RedHatEnterpriseLinux7/RHEL-116710
187;;;;;;;;;2;"2. Check the capability features of NIC 
 # virsh nodedev-dumpxml net_ens4f1_24_8a_07_91_ea_1d
 # virsh nodedev-dumpxml net_enp33s1f2_46_ee_f0_5d_62_19
​​";"Output:# virsh nodedev-dumpxml net_ens4f1_24_8a_07_91_ea_1d
<device>
  <name>net_ens4f1_24_8a_07_91_ea_1d</name>
  <path>/sys/devices/pci0000:20/0000:20:03.0/0000:21:00.1/net/ens4f1</path>
  <parent>pci_0000_21_00_1</parent>
  <capability type='net'>
    <interface>ens4f1</interface>
    <address>24:8a:07:91:ea:1d</address>
    <link state='down'/>
    <feature name='rx'/>
    <feature name='tx'/>
    <feature name='sg'/>
    <feature name='tso'/>
    <feature name='gso'/>
    <feature name='gro'/>
    <feature name='rxvlan'/>
    <feature name='txvlan'/>
    <feature name='rxhash'/>
    <feature name='txudptnl'/>
    <capability type='80203'/>
  </capability>
</device>

<pre># virsh nodedev-dumpxml net_enp33s1f2_46_ee_f0_5d_62_19
<device>
  <name>net_enp33s1f2_46_ee_f0_5d_62_19</name>
  <path>/sys/devices/pci0000:20/0000:20:03.0/0000:21:01.2/net/enp33s1f2</path>
  <parent>pci_0000_21_01_2</parent>
  <capability type='net'>
    <interface>enp33s1f2</interface>
    <address>46:ee:f0:5d:62:19</address>
    <link state='down'/>
    <feature name='rx'/>
    <feature name='tx'/>
    <feature name='sg'/>
    <feature name='tso'/>
    <feature name='gso'/>
    <feature name='gro'/>
    <feature name='rxvlan'/>
    <feature name='txvlan'/>
    <feature name='rxhash'/>
    <feature name='rdma'/>
    <capability type='80203'/>
  </capability>
</device>";;RedHatEnterpriseLinux7/RHEL-116710
187;;;;;;;;;3;"3.Do the configuration to support switchdev Offload
 # echo 0000:21:01.2 > /sys/bus/pci/drivers/mlx5_core/unbind
# echo 0000:21:01.3 > /sys/bus/pci/drivers/mlx5_core/unbind
# echo 0000:21:01.4 > /sys/bus/pci/drivers/mlx5_core/unbind
# echo 0000:21:01.5 > /sys/bus/pci/drivers/mlx5_core/unbind

# devlink dev eswitch set pci/0000:21:00.1 mode switchdev
# ethtool -K ens4f1  hw-tc-offload on

# echo  0000:21:01.2 > /sys/bus/pci/drivers/mlx5_core/bind
# echo  0000:21:01.3 > /sys/bus/pci/drivers/mlx5_core/bind
# echo  0000:21:01.4 > /sys/bus/pci/drivers/mlx5_core/bind
# echo  0000:21:01.5 > /sys/bus/pci/drivers/mlx5_core/bind";​​;;RedHatEnterpriseLinux7/RHEL-116710
187;;;;;;;;;4;"4. Check the node devices feature again
 # virsh nodedev-dumpxml net_ens4f1_24_8a_07_91_ea_1d
 # virsh nodedev-dumpxml net_enp33s1f2_46_ee_f0_5d_62_19
​​";"Output:# virsh nodedev-dumpxml net_ens4f1_24_8a_07_91_ea_1d
<device>
  <name>net_ens4f1_24_8a_07_91_ea_1d</name>
  <path>/sys/devices/pci0000:20/0000:20:03.0/0000:21:00.1/net/ens4f1</path>
  <parent>pci_0000_21_00_1</parent>
  <capability type='net'>
    <interface>ens4f1</interface>
    <address>24:8a:07:91:ea:1d</address>
    <link state='down'/>
    <feature name='rx'/>
    <feature name='tx'/>
    <feature name='sg'/>
    <feature name='tso'/>
    <feature name='gso'/>
    <feature name='gro'/>
    <feature name='rxvlan'/>
    <feature name='txvlan'/>
    <feature name='rxhash'/>
    <feature name='txudptnl'/>
    <feature name='switchdev'/>  <=====add the switchdev feature
    <capability type='80203'/>
  </capability>
</device>
 # virsh nodedev-dumpxml net_enp33s1f2_46_ee_f0_5d_62_19
<device>
  <name>net_enp33s1f2_46_ee_f0_5d_62_19</name>
  <path>/sys/devices/pci0000:20/0000:20:03.0/0000:21:01.2/net/enp33s1f2</path>
  <parent>pci_0000_21_01_2</parent>
  <capability type='net'>
    <interface>enp33s1f2</interface>
    <address>46:ee:f0:5d:62:19</address>
    <link state='down'/>
    <feature name='rx'/>
    <feature name='tx'/>
    <feature name='sg'/>
    <feature name='tso'/>
    <feature name='gso'/>
    <feature name='gro'/>
    <feature name='rxvlan'/>
    <feature name='txvlan'/>
    <feature name='rxhash'/>
    <feature name='rdma'/>
   <feature name='switchdev'/>   <=====add the switchdev feature
    <capability type='80203'/>
  </capability>
</device>";;RedHatEnterpriseLinux7/RHEL-116710
188;RHEL-116801;IDM-SSSD-TC: krb_provider: krb_sudo: pam sss set KRB5CCNAME with sudo logins bz1324486;"TC : pam sss set KRB5CCNAME with sudo logins bz1324486
Code link : http://git.app.eng.bos.redhat.com/git/sssd-qe-tests.git/tree/client/krb_provider/krb_sudo ";Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-116801
189;RHEL-117283;[Hyper-V][Network]Change MAC address in VM with MAC Spoofing enabled;;Yaju Cao (yacao);;Positive;Not Automated;;1;Open VM Hyper-V Manger Settings, select Network Adapter -> MAC address, check 'Enable MAC address spoofing', and Apply changes;Enabled without error;Test Case;RedHatEnterpriseLinux7/RHEL-117283
189;;;;;;;;;2;"In VM, change ifcfg-ethx setting, ensure MACADDR is valid, not used by any others, and make sure HWADDR is not configured.  e.g.
 DEVICE=eth1  
 BOOTPROTO=dhcp  
 #HWADDR=00:15:5D:C4:63:10
 MACADDR=00:15:5D:C4:63:88";​​;;RedHatEnterpriseLinux7/RHEL-117283
189;;;;;;;;;3;Restart network service, or ifdown / ifup ethx to make above changes work.;"NIC MAC is changed to as your configured MACADDR.
 2: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000
     link/ether 00:15:5d:c4:63:88 brd ff:ff:ff:ff:ff:ff ";;RedHatEnterpriseLinux7/RHEL-117283
189;;;;;;;;;4;Test network ping;can ping successfully ;;RedHatEnterpriseLinux7/RHEL-117283
190;RHEL-117284;[Hyper-V][Network]Change MAC address in VM with MAC Spoofing disabled;;Yaju Cao (yacao);;Positive;Not Automated;;1;Open VM Hyper-V Manger Settings, select Network Adapter -> MAC address, uncheck 'Enable MAC address spoofing', and Apply changes;Disabled without error;Test Case;RedHatEnterpriseLinux7/RHEL-117284
190;;;;;;;;;2;"In VM, change ifcfg-ethx setting, ensure MACADDR is valid, not used by any others, and make sure HWADDR is not configured.  e.g.
 DEVICE=eth1  
 BOOTPROTO=dhcp  
 #HWADDR=00:15:5D:C4:63:10
 MACADDR=00:15:5D:C4:63:88";​​;;RedHatEnterpriseLinux7/RHEL-117284
190;;;;;;;;;3;Restart network service, or ifdown / ifup ethx to make above changes work.;"NIC MAC is changed to as your configured MACADDR.
 2: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000
     link/ether 00:15:5d:c4:63:88 brd ff:ff:ff:ff:ff:ff ";;RedHatEnterpriseLinux7/RHEL-117284
190;;;;;;;;;4;Test network ping;failed to ping ;;RedHatEnterpriseLinux7/RHEL-117284
191;RHEL-117322;[console][tcp][unix] Set 'reconnect' parameter on TCP chardev backends - bug 1254971;"Bug 1254971 - RFE: support setting 'reconnect' parameter on TCP chardev backends (for USB redir and all other chardev users)     For character device with type unix or tcp the source has an optional element reconnect which configures reconnect timeout if the connection is lost. There are two attributes, enabled where possible values are ""yes"" and ""no"" and timeout which is in seconds. The reconnect attribute is valid only for connect mode. ";Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1; For tcp;​​;Test Case;RedHatEnterpriseLinux7/RHEL-117322
191;;;;;;;;;2;"1. add below device into guest's xml
 
* # virsh edit rhel
...
 <serial type='tcp'>
       <source mode='connect' host='127.0.0.1' service='2445'>
         <reconnect enabled='yes' timeout='60'/>
       </source>
       <protocol type='raw'/>
       <target type='isa-serial' port='1'>
         <model name='isa-serial'/>
       </target>
     </serial>
 ...

 
* # virsh start rhel
Domain rhel started
";​​;;RedHatEnterpriseLinux7/RHEL-117322
191;;;;;;;;;3;2. issue a tcp server on 127.0.0.1:2445 in 60s, it can connect;​​;;RedHatEnterpriseLinux7/RHEL-117322
191;;;;;;;;;4;For unix;​​;;RedHatEnterpriseLinux7/RHEL-117322
191;;;;;;;;;5;"1. add below device into guest's xml
 
* # virsh edit rhel7.4
...
 <serial type='unix'>
       <source mode='connect' path='/var/lib/libvirt/qemu/foo'>
         <reconnect enabled='yes' timeout='30'/>
       </source>
       <target type='isa-serial' port='0'>
         <model name='isa-serial'/>
       </target>
     </serial>
 ...";the xml can be validated;;RedHatEnterpriseLinux7/RHEL-117322
192;RHEL-117324;[libvirtd][config] Set max_client_requests to invalid value - 0;Set max_client_requests to invalid value;Yan Fu (yafu);Medium;Negative;Manual Only;;1;" 1.Modify max_client_requests value to 0 in /etc/libvirt/libvirtd.conf and restart libvirtd service:
 
* #cat /etc/libvirt/libvirtd.conf
max_client_requests = 0

 
* #systemctl restart libvirtd
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-117324
192;;;;;;;;;2;"2.Use virsh client to connect libvirtd:
 #virsh list
 
​​";"2.The cmd will hang
​​";;RedHatEnterpriseLinux7/RHEL-117324
193;RHEL-117343;[channel][pty][unix] Hot-plug/unplug the virtio channel to/from guest - bug 887348,1396597;Hot-plug/unplug the virtio channel to/from guest - bug 887348,1396597;Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1;"Scenario 1: hot-plug the channel device (virtio+pty)
 6.1 hot-plug the channel device
 
* # virsh attach-device rhel7-2 channel-pty-virtio.xml
Device attached successfully";​​;Test Case;RedHatEnterpriseLinux7/RHEL-117343
193;;;;;;;;;2;"6.2 verify the dumpxml
 
* # virsh dumpxml rhel7-2 |grep -A 4 ""<channel""
";"Output:
   <channel type='pty'>
       <source path='/dev/pts/5'/>
       <target type='virtio' name='arbitrary.virtio.serial.port.name'/>
       <alias name='channel2'/>
       <address type='virtio-serial' controller='0' bus='0' port='3'/>
     </channel>";;RedHatEnterpriseLinux7/RHEL-117343
193;;;;;;;;;3;"6.3 hot-unplug the virtio pty channel
 
* # virsh detach-device rhel7-2 channel-pty-virtio-detach.xml
Device detached successfully";​​;;RedHatEnterpriseLinux7/RHEL-117343
193;;;;;;;;;4;"Scenario 2: hot-plug the channel device (virtio + unix)
 7.1 hot-plug the channel device to guest.
 
* # virsh attach-device rhel7-2 channel-unix-virtio.xml
Device attached successfully";​​;;RedHatEnterpriseLinux7/RHEL-117343
193;;;;;;;;;5;"7.2 check the dumpxml, make sure the channel is hot-pluged.
 
* # virsh dumpxml rhel7-2|grep -A 4 ""<channel""
";"Output:
 <channel type='unix'>
       <source mode='bind' path='/var/lib/libvirt/qemu/f16x86_64.agent'/>
       <target type='virtio' name='org.qemu.guest_agent.2'/>
       <alias name='channel2'/>
       <address type='virtio-serial' controller='0' bus='0' port='3'/>
     </channel>";;RedHatEnterpriseLinux7/RHEL-117343
193;;;;;;;;;6;"7.3 unplug the device
 
* # virsh detach-device rhel7-2 channel-unix-virtio.xml
Device detached successfully";​​;;RedHatEnterpriseLinux7/RHEL-117343
194;RHEL-117419;"[update-device][driver][iommu] update virtio driver attributes ""iommu"", ""ats""  (not support) - bug 1538879";Bug 1538879 - update-device can not update “<driver iommu='on' ats='on'/>” in interface section while the command report successfully;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;" Setup:
 On host, add ""iommu=pt  intel_iommu=on"" to kernel line
 Steps to Reproduce:
 1.Start a q35 guest with iommu config
 ...
 <os>
    <type arch='x86_64' machine='pc-q35-rhel7.5.0'>hvm</type>
 </os>
 ...
 <features>
 <ioapic driver='qemu'/>
 </features>
 ...
 <iommu model='intel'>
  <driver intremap='on' caching_mode='on' eim='on' iotlb='on'/>
 </iommu>
 ...
 <interface type='network'>
 <mac address='52:54:00:f5:c6:22'/>
 <source network='default' bridge='virbr0'/>
 <target dev='vnet0'/>
 <model type='virtio'/>
 <alias name='net0'/>
 <address type='pci' domain='0x0000' bus='0x02' slot='0x00' function='0x0'/>
 </interface>
 ...
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-117419
194;;;;;;;;;2;"2. update interface info by update-device
 # cat interface.xml
    <interface type='network'>
      <mac address='52:54:00:f5:c6:22'/>
       <driver iommu='on' ats='on'/>
      <source network='default' bridge='virbr0'/>
      <target dev='vnet0'/>
      <model type='virtio'/>
      <alias name='net0'/>
      <address type='pci' domain='0x0000' bus='0x02' slot='0x00' function='0x0'/>
    </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL-117419
194;;;;;;;;;3;# virsh update-device ovmf interface.xml;"error: Failed to update device from inter.xml
 error: Operation not supported: cannot modify virtio network device driver attributes";;RedHatEnterpriseLinux7/RHEL-117419
194;;;;;;;;;4;"3.Check the interface info
 # virsh dumpxml ovmf | grep interface -B10
    ";"<interface type='network'>
      <mac address='52:54:00:f5:c6:22'/>
      <source network='default' bridge='virbr0'/>
      <target dev='vnet0'/>
      <model type='virtio'/>
      <alias name='net0'/>     
 <address type='pci' domain='0x0000' bus='0x02' slot='0x00' function='0x0'/>
    </interface>";;RedHatEnterpriseLinux7/RHEL-117419
195;RHEL-117420;[driver][iommu][ats] use IOMMU for Virtio interface model - bug 1283251;Bug 1283251 - [RFE] Libvirt - config Qemu to use IOMMU for Virtio;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"On intel host, add ""iommu=pt"" to kernel line, then restart the host (iommu='pt' is needed for enable iommu for virtio interface)
 1) add ""iommu=pt"" into kernel command line
 # vim /etc/default/grub
 2) # grub2-mkconfig -o /boot/grub2/grub.cfg
 3) reboot

 Note: find a host support EPT as Bug 1348092
 
 1.Start a q35 guest with iommu config
 ...
 <os>
     <type arch='x86_64' machine='pc-q35-rhel7.5.0'>hvm</type>
 </os>
 ...
 <features>
 <ioapic driver='qemu'/>
 </features>
 ...
 <devices>
 <iommu model='intel'>
   <driver intremap='on' caching_mode='on' eim='on' iotlb='on'/>
 </iommu>
 ...
 <interface type='network'>
  <mac address='52:54:00:f5:c6:22'/>
  <source network='default'/>
  <driver iommu='on' ats='on'/>
  <model type='virtio'/>
 </interface>
 ...
 </devices>";xml can validate;Test Case;RedHatEnterpriseLinux7/RHEL-117420
195;;;;;;;;;2;2. start the guest;guest start successfully;;RedHatEnterpriseLinux7/RHEL-117420
195;;;;;;;;;3;"3. check the qemu command line
 # ps aux | grep ats";"...
 -netdev tap,fd=27,id=hostnet0,vhost=on,vhostfd=29
 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:54:00:7e:6c:83,
 bus=pci.1,addr=0x0,
 iommu_platform=on,ats=on ";;RedHatEnterpriseLinux7/RHEL-117420
195;;;;;;;;;4;4. login guest to check the interface network function, should be ok;​​;;RedHatEnterpriseLinux7/RHEL-117420
196;RHEL-117609;[pvticketlocks] test kvm feature kvm_pv_unhalt with old qemu or kernel (negative)- bug 1008989;negative test;Yalan Zhang (yalzhang);Medium;Negative;Manual Only;;1;"Negative testing:
 1. Not available in qemu side
 # rpm -q libvirt qemu-kvm kernel
 libvirt-1.1.1-12.el7.x86_64
 qemu-kvm-1.5.3-8.el7.x86_64 (old)
 kernel-3.10.0-48.el7.x86_64
 
 # virsh dumpxml r7 | grep features -aA8
 <features>
 <acpi/>
 <apic/>
 <pae/>
 <pvspinlock state='on'/>
 </features>
 ...";​​;Test Case;RedHatEnterpriseLinux7/RHEL-117609
196;;;;;;;;;2;"# virsh start r7
 error: Failed to start domain r7
 error: unsupported configuration: host doesn't support paravirtual spinlocks";guest can not start;;RedHatEnterpriseLinux7/RHEL-117609
196;;;;;;;;;3;"# virsh edit r7
 Domain r7 XML configuration edited.
 # virsh dumpxml r7 | grep features -aA8
 <features>
 <acpi/>
 <apic/>
 <pae/>
 <pvspinlock state='off'/>
 </features>
 ...
 # virsh start r7
 Domain r7 started";guest can start with <pvspinlock state='off'/>;;RedHatEnterpriseLinux7/RHEL-117609
196;;;;;;;;;4;"# ps aux | grep r7
 qemu 2809 81.2 0.1 1643100 33228 ? Sl 15:49 0:04 /usr/libexec/qemu-kvm -name r7 -S -machine pc-i440fx-rhel7.0.0,accel=kvm,usb=off -cpu qemu64,-kvm_pv_unhalt -m 1024 -realtime mlock=off -smp 1,sockets=1,cores=1,threads=1 -uuid 4e9c9325-fec3-4b6b-ad95-71f026c75a69 -no-user-config -...";not something like kvm_pv_unhalt;;RedHatEnterpriseLinux7/RHEL-117609
196;;;;;;;;;5;"2. Not available in the kernel of host
 # rpm -q libvirt qemu-kvm kernel
 libvirt-1.1.1-12.el7.x86_64
 qemu-kvm-1.5.3-18.el7.x86_64
 kernel-3.10.0-0.rc7.64.el7.x86_64(old)
 
 # virsh dumpxml r7 | grep features -aA8
 <features>
 <acpi/>
 <apic/>
 <pae/>
 <pvspinlock state='on'/>
 </features>
 ...
 # virsh start r7
 error: Failed to start domain r7
 error: unsupported configuration: host doesn't support paravirtual spinlocks";guest can not start with <pvspinlock state='on'/>;;RedHatEnterpriseLinux7/RHEL-117609
196;;;;;;;;;6;"# virsh dumpxml r7 | grep features -aA8
 <features>
 <acpi/>
 <apic/>
 <pae/>
 <pvspinlock state='off'/>
 </features>
 ...
 # virsh start r7
 Domain r7 started";​​;;RedHatEnterpriseLinux7/RHEL-117609
196;;;;;;;;;7;"[root@ibm-x3650m3-03 ~]# ps aux | grep r7
 qemu 9360 91.6 0.1 1645444 33432 ? Sl 15:30 0:05 /usr/libexec/qemu-kvm -name r7 -S -machine pc-i440fx-rhel7.0.0,accel=kvm,usb=off -cpu qemu64,-kvm_pv_unhalt -m 1024 -realtime mlock=off -smp 1,sockets=1,cores=1,threads=1 -uuid 4e9c9325-fec3-4b6b-ad95-71f026c75a69 -no-user-config -...";​​;;RedHatEnterpriseLinux7/RHEL-117609
197;RHEL-117610;[L3 cache] invalid setting for virtual L3 cache info for vcpus - bug 1428952, 1447612;this case is the negative scenarios ;Yalan Zhang (yalzhang);Medium;Negative;Not Automated;;1;"S8 invalid cases

 1. passthrough + host-model
   <cpu mode='host-model' check='partial'>
 <cache mode='passthrough'/>

 # virsh edit r7
 error: unsupported configuration: CPU cache mode 'passthrough' can only be used with 'host-passthrough' CPUs
 Failed. Try again? [y,n,i,f,?]:";​​;Test Case;RedHatEnterpriseLinux7/RHEL-117610
197;;;;;;;;;2;"2. cache level 2
 <cpu...>
 <cache level='2' mode='emulate'/>

 # virsh edit r7
 error: unsupported configuration: CPU cache mode 'emulate' can only be used with level='3'
 Failed. Try again? [y,n,i,f,?]: 
";​​;;RedHatEnterpriseLinux7/RHEL-117610
197;;;;;;;;;3;"3. cache level 3 + disable
 <cache level='3' mode='disable'/>

 # virsh edit r7
 error: unsupported configuration: unsupported CPU cache level for mode 'disable'
 Failed. Try again? [y,n,i,f,?]:";​​;;RedHatEnterpriseLinux7/RHEL-117610
198;RHEL-117662;persistent attach scsi controller without index specified - Bug 1344899 need update;"Bug 1344899 - Failed to attach scsi controller with option ""--config --live"" when index attribute isn't specified in XML";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;" 1. Start a domxml without scsi controller.
 # virsh start avocado-vt-vm1
 Domain avocado-vt-vm1 started
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-117662
198;;;;;;;;;2;"2. Hot-plug a scsi controller device without index.
 # cat ctl.xml
 <controller model=""virtio-scsi"" type=""scsi"" />";​​;;RedHatEnterpriseLinux7/RHEL-117662
198;;;;;;;;;3;# virsh attach-device avocado-vt-vm1 ctl.xml --config --live;"should not fail like
 ""error: Failed to attach device from con.xml
 error: internal error: Cannot parse controller index -1""";;RedHatEnterpriseLinux7/RHEL-117662
198;;;;;;;;;4;# virsh attach-device avocado-vt-vm1 ctl.xml --persistent;"should not fail like
 ""error: Failed to attach device from con.xml
 error: internal error: Cannot parse controller index -1""";;RedHatEnterpriseLinux7/RHEL-117662
199;RHEL-117702;[Migration][--offline][--persistent] Migrate vm definition - guest disk cache != none or directsync;"Bug 1449715 - Offline migration should not fail with error ""Migration may lead to data corruption if disks use cache != none""";Fangge Jin (fjin);High;Positive;Not Automated;;1;"1.Prepare a guest xml with disk cache!=none|directsync
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-117702
199;;;;;;;;;2;"2. Do offline migration:
 
* # virsh migrate rhel7.4 qemu+ssh://10.66.144.45/system --offline --persistent
";​​;;RedHatEnterpriseLinux7/RHEL-117702
199;;;;;;;;;3;"3. On target host, list guest:
 
* # virsh list --all
";Guest rhel7.4 is listed on target host.;;RedHatEnterpriseLinux7/RHEL-117702
200;RHEL-117703;[Migration][--copy-storage-all] Copy the whole image chain for storage migration - pre-create a smaller disk image on destination manually;Migration will fail if disk image on target host is smaller than on source host.;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;Start a guest on source host whose disk image is only accessible on source host.;​​;Test Case;RedHatEnterpriseLinux7/RHEL-117703
200;;;;;;;;;2;"Pre-create a empty image on target host with smaller size than source host:
 
* # qemu-img create /IMAGE_DIR/guest.img A_SMALLER_IMAGE_SIZE
";​​;;RedHatEnterpriseLinux7/RHEL-117703
200;;;;;;;;;3;"Do migration:
 
* # virsh migrate r7raw qemu+ssh://10.66.6.6/system --live --verbose --copy-storage-all
  ";"The migration starts and proceeds, when the disk size reached the virtual size on the target, the migration failed.
 
 Output:
     error: internal error: info migration reply was missing return status";;RedHatEnterpriseLinux7/RHEL-117703
201;RHEL-117704;[Migration][--copy-storage-all] Storage migration with all kinds of cache mode for guest disk;"Bug 913363 - ""error: Unsafe migration:"" should not be reported for local storage.
 All cache mode for disk:
* none
* directsync
* writeback
* unsafe
* writethrough
* default
* without cache element in domain xml
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1. Start a guest whose disk image is on local disk(which is not accessible on target host):
 
 ...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw' cache='writethrough'/>
 <source file='/var/lib/libvirt/images/rhel62.img'/>
 <target dev='vda' bus='virtio'/>
 </disk>
 ...

Note:
 
 
* The disks should not have <shareable/> flag.
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-117704
201;;;;;;;;;2;"Do migration with --copy-storage-all and without --unsafe
 
* #virsh migrate --live --copy-storage-all guest qemu+ssh://{dest ip}/system
";Migration succeeds ;;RedHatEnterpriseLinux7/RHEL-117704
201;;;;;;;;;3;Retest with all kinds of cache mode;Migration succeeds for all kinds of cache modes;;RedHatEnterpriseLinux7/RHEL-117704
202;RHEL-117814;Check virtlogd log when client disconnects;When guest starts, libvirtd will write qemu log into /var/log/libvirt/qemu/$guest.log via virtlogd, which means libvirtd is a client of virtlogd. No error/warning log should occur for virtlogd when libvirtd disconnects.;Fangge Jin (fjin);High;Positive;Not Automated;;1;" Start a guest:
  #virsh start rhel7.3";​​;Test Case;RedHatEnterpriseLinux7/RHEL-117814
202;;;;;;;;;2;"Check virtlogd log.
 1) Check journal log if you didn't configure virtlogd log_outputs(in /etc/libvirt/virtlogd.conf):
   # journalctl | grep virtlogd | grep -E 'warning | error'
 
 2) Or check the specified log_outputs for virtlogd";"No error/warning log in virtlogd log.
 
 For example:
 Feb 06 01:16:46 hp-z800-06.qe.lab.eng.nay.redhat.com virtlogd[31136]: End of file while reading data: Input/output error";;RedHatEnterpriseLinux7/RHEL-117814
203;RHEL-117832;[config][qemu-lockd.conf]Restart libvirtd with negative value for parameters which require positive integer in qemu-lockd.conf;"Check libvirt should disallow negative value for options needed positive value in virtlockd.conf
 
";Yan Fu (yafu);High;Negative;Manual Only;;1;"1.Enable lock_manager and restart libvirtd:
* #/etc/libvirt/qemu.conf
lock_manager = ""lockd""

 
* #systemctl restart libvirtd
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-117832
203;;;;;;;;;2;"2. Set the following parameters to negative value in /etc/libvirt/qemu-lockd.conf.
 (Test one parameter at one time)
 
*  auto_disk_leases = -2
* require_lease_for_disks = -10
";​​;;RedHatEnterpriseLinux7/RHEL-117832
203;;;;;;;;;3;"3.Restart libvirtd service:
 
* #systemctl restart libvirtd
* # systemctl status libvirtd
";"3.Restart libvirtd service
 #systemctl restart libvirtd

 Output:
 #systemctl status libvirtd
 ● libvirtd.service - Virtualization daemon
    Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; enabled; vendor preset: enabled)
    Active: inactive (dead) since Wed 2015-10-28 14:06:29 CST; 3s ago
      Docs: man:libvirtd(8)
            http://libvirt.org
   Process: 14895 ExecReload=/bin/kill -HUP $MAINPID (code=exited, status=0/SUCCESS)
   Process: 23777 ExecStart=/usr/sbin/libvirtd $LIBVIRTD_ARGS (code=exited, status=0/SUCCESS)
  Main PID: 23777 (code=exited, status=0/SUCCESS)";;RedHatEnterpriseLinux7/RHEL-117832
203;;;;;;;;;4;"4.Check the log in the syslog:
 
* #cat /var/log/messages
";"4.Could see libvirtd error log about the invalid value:
 Feb  6 17:20:17 localhost libvirtd: 18917: error : virConfGetValueBool:1041 : internal error: /etc/libvirt/qemu-lockd.conf: expected a bool for 'auto_disk_leases' parameter
 Feb  6 17:20:17 localhost libvirtd: 18917: error : virStateInitialize:775 : Initialization of QEMU state driver failed: internal error: /etc/libvirt/qemu-lockd.conf: expected a bool for 'auto_disk_leases' parameter
 Feb  6 17:20:17 localhost libvirtd: 18917: error : daemonRunStateInit:837 : Driver state initialization failed
​​";;RedHatEnterpriseLinux7/RHEL-117832
204;RHEL-117834;[libvirtd]Start libvirtd in foreground with invalid option;Negative test for invalid option;Yan Fu (yafu);Medium;Negative;Manual Only;;1;" 1.Start libvirtd with non-existing option:
 $libvirtd -aklkt";"1. Print help message:
 libvirtd: invalid option -- 'a'
 
 Usage:
   libvirtd [options]
 
 Options:
   -h | --help            Display program help:
   -v | --verbose         Verbose messages.
   -d | --daemon          Run as a daemon & write PID file.
   -l | --listen          Listen for TCP/IP connections.
   -t | --timeout <secs>  Exit after timeout period.
   -f | --config <file>   Configuration file.
   -V | --version         Display version information.
   -p | --pid-file <file> Change name of PID file.
 
 libvirt management daemon:
 
   Default paths:
 
     Configuration file (unless overridden by -f):
       $XDG_CONFIG_HOME/libvirt/libvirtd.conf
 
     Sockets:
       $XDG_RUNTIME_DIR/libvirt/libvirt-sock
 
     TLS:
       CA certificate:     $HOME/.pki/libvirt/cacert.pem
       Server certificate: $HOME/.pki/libvirt/servercert.pem
       Server private key: $HOME/.pki/libvirt/serverkey.pem
 
     PID file:
       $XDG_RUNTIME_DIR/libvirt/libvirtd.pid";Test Case;RedHatEnterpriseLinux7/RHEL-117834
205;RHEL-117835;negative scenarios about enable virtual L3 cache info on unsupported qemu version;Test with a qemu-kvm which version < 2.9.0  https://bugzilla.redhat.com/show_bug.cgi?id=1428952#c11  (this feature supported on rhel7.4  and backported to rhel7.3.z(libvirt-2.0.0-10.el7_3.9 + qemu-kvm-rhev-2.6.0-28.el7_3.8));Yalan Zhang (yalzhang);Medium;Negative;Not Automated;;1;"Test with a qemu-kvm unsupported l3-cache and host-cache-info:
 qemu-kvm-rhev-2.6.0-28.el7_3.7.x86_64 (https://brewweb.engineering.redhat.com/brew/buildinfo?buildID=544288 )

 1. l3-cache
  <cpu>
     <cache level='3' mode='emulate'/>
 ...

 # virsh start r7
";"

 error: Failed to start domain test
 error: internal error: process exited while connecting to monitor: 2018-02-06T10:04:26.274808Z qemu-kvm: can't apply global qemu64-x86_64-cpu.l3-cache=on: Property '.l3-cache' not found

 (guest can not start and the error message is clear)
";Test Case;RedHatEnterpriseLinux7/RHEL-117835
205;;;;;;;;;2;"2. test on unsupported qemu-kvm
 Test on  qemu-kvm-1.5.3-156.el7.x86_64
 (https://brewweb.engineering.redhat.com/brew/buildinfo?buildID=654905 )

 l3-cache:

  <cpu>
     <cache level='3' mode='emulate'/>
 ...

 # virsh start r7";"error: Failed to start domain rhel
 error: internal error: process exited while connecting to monitor: 2018-02-27T03:49:52.175681Z qemu-kvm: unrecognized feature l3-cache

 (guest can not start and the error message is clear)
";;RedHatEnterpriseLinux7/RHEL-117835
205;;;;;;;;;3;"3. test on unsupported qemu-kvm
 Test on  qemu-kvm-1.5.3-156.el7.x86_64
 (https://brewweb.engineering.redhat.com/brew/buildinfo?buildID=654905 )

 host-cache-info:

 <cpu mode='host-passthrough' check='none'>
     <cache mode='passthrough'/>

 # virsh start r7
";"error: Failed to start domain r7
 error: internal error: qemu unexpectedly closed the monitor: 2017-05-09T05:58:32.526720Z qemu-kvm: unrecognized feature host-cache-info

 (guest can not start and the error message is clear)

  ";;RedHatEnterpriseLinux7/RHEL-117835
205;;;;;;;;;4;"3. test on unsupported qemu-kvm
 disable:
 no setting about cache

 # virsh start r7
 Domain r7 started";​​;;RedHatEnterpriseLinux7/RHEL-117835
206;RHEL-117836;[libvirtd][config] Set max_client_requests to valid value;"Set max_client_requests to valid value
 
";Yan Fu (yafu);High;Positive;Manual Only;;1;"1.Modify max_cient_requests to 2 and restart libvirtd service:
 
* #cat /etc/libvirt/libvirtd.conf
max_client_requests=2

 
* #systecmctl restart libvirtd
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-117836
206;;;;;;;;;2;"2.Use virsh client to connect libvirtd:
 #virsh";"2.# virsh
 Welcome to virsh, the virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virsh #";;RedHatEnterpriseLinux7/RHEL-117836
207;RHEL-117873;[L3 cache] present virtual L3 cache info for vcpus for host-passthrough cpu mode - bug 1428952, 1447612;Libvirt support change cpu cache setttings;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"S3: host-passthrough + l3
 
 1. modify the guest xml like this:
 
   <cpu mode='host-passthrough' check='partial'>
     <cache level='3' mode='emulate'/>
   </cpu>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-117873
207;;;;;;;;;2;"2.  start guest and recheck guest xml and qemu cmdline:
 
 # virsh start r7
 Domain r7 started
 
 # virsh dumpxml r7 |grep -a1 cache
   <cpu mode='host-passthrough' check='partial'>
     <cache level='3' mode='emulate'/>
   </cpu>
 
 # ps aux|grep qemu
 qemu     12834 44.4  1.1 2204684 360968 ?      Sl   23:24   0:25 ..... -cpu host,l3-cache=on,host-cache-info=off";"l3-cache=on,host-cache-info=off in qemu command line
 
​​";;RedHatEnterpriseLinux7/RHEL-117873
207;;;;;;;;;3;3. restart libvirtd and recheck guest;​​;;RedHatEnterpriseLinux7/RHEL-117873
207;;;;;;;;;4;"4. login guest and check cache:
 
 # lscpu |grep cache";"L1d cache:             64K
 L1i cache:             64K
 L2 cache:              512K
 L3 cache:              16384K

 (L3 cache in guest)";;RedHatEnterpriseLinux7/RHEL-117873
207;;;;;;;;;5;"S4: host-passthrough + passthrough
 
 1. modify the guest xml like this:
   <cpu mode='host-passthrough' check='partial'>
     <cache mode='passthrough'/>
   </cpu>
​​";"
​​";;RedHatEnterpriseLinux7/RHEL-117873
207;;;;;;;;;6;"2. start guest and recheck guest xml & qemu cmdline:
 
 # virsh start r7
 Domain r7 started
 
 # virsh dumpxml r7 |grep -a1 cache
   <cpu mode='host-passthrough' check='partial'>
     <cache mode='passthrough'/>
   </cpu>
 
 # ps aux|grep qemu
 qemu     13158 95.5  1.1 2146228 387888 ?      Sl   23:30   0:25 ..... -cpu host,host-cache-info=on,l3-cache=off";"1. host-cache-info=on,l3-cache=off in qemu command line
​​";;RedHatEnterpriseLinux7/RHEL-117873
207;;;;;;;;;7;3. restart libvirtd and recheck guest;​​;;RedHatEnterpriseLinux7/RHEL-117873
207;;;;;;;;;8;"4. login guest and check cache info:
 
 # lscpu |grep cache";"L1d cache:             16K
 L1i cache:             64K
 L2 cache:              2048K
 L3 cache:              12288K

 cache info should be the same as the host, check on host by
 # lscpu | grep cache";;RedHatEnterpriseLinux7/RHEL-117873
207;;;;;;;;;9;"S5: host-passthrough + disable
 
 1. modify the guest xml like this:
 
   <cpu mode='host-passthrough' check='partial'>
     <cache mode='disable'/>
   </cpu>
​​";​​;;RedHatEnterpriseLinux7/RHEL-117873
207;;;;;;;;;10;"2. start guest and recheck guest xml & qemu cmdline:
 
 # virsh start r7
 Domain r7 started
 
 # virsh dumpxml r7 |grep -a1 cache
   <cpu mode='host-passthrough' check='partial'>
     <cache mode='disable'/>
   </cpu>
 
 # ps aux|grep qemu
 qemu     13479 84.7  1.1 2159544 366840 ?      Sl   23:37   0:26 ... -cpu host,host-cache-info=off,l3-cache=off";host-cache-info=off,l3-cache=off  in qemu command line;;RedHatEnterpriseLinux7/RHEL-117873
207;;;;;;;;;11;3. restart libvirtd and recheck guest;​​;;RedHatEnterpriseLinux7/RHEL-117873
207;;;;;;;;;12;"4. login guest and check cache info:
 
 # lscpu |grep cache
​​";"L1d cache:             64K
 L1i cache:             64K
 L2 cache:              512K
 
 (guest has no L3 cache)";;RedHatEnterpriseLinux7/RHEL-117873
208;RHEL-117874;[L3 cache] present virtual L3 cache info for vcpus for default cpu model - bug 1428952, 1447612;Libvirt support change cpu cache setttings;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"S6: default cpu mode + l3
 
 1. modify guest xml like this:
 
   <cpu>
     <cache level='3' mode='emulate'/>
   </cpu>
 
 2. start guest and recheck guest xml & qemu cmdline:
 # virsh dumpxml r7 |grep -a1 cache
   <cpu>
     <cache level='3' mode='emulate'/>
   </cpu>
 
 # ps aux |grep qemu
 qemu     13779 76.1  1.2 2156472 395268 ?      Sl   23:42   0:23 .... -cpu qemu64,l3-cache=on 
​​";"l3-cache=on
 
 there is L3 cache";Test Case;RedHatEnterpriseLinux7/RHEL-117874
208;;;;;;;;;2;"3. restart libvirtd and recheck guest
​​";​​;;RedHatEnterpriseLinux7/RHEL-117874
208;;;;;;;;;3;"4. login guest and check cache info:
 
 # lscpu |grep cache";"L1d cache:             64K
 L1i cache:             64K
 L2 cache:              512K
 L3 cache:              16384K";;RedHatEnterpriseLinux7/RHEL-117874
208;;;;;;;;;4;"S7: default cpu mode + disable
 
 1. modify guest xml like this:
 
   <cpu>
     <cache mode='disable'/>
   </cpu>
 
​​";"
 
​​";;RedHatEnterpriseLinux7/RHEL-117874
208;;;;;;;;;5;"2. start guest and recheck guest xml & qemu cmdline:
 
 # virsh dumpxml r7 |grep -a1 cache
   <cpu>
     <cache mode='disable'/>
   </cpu>
 
 # ps aux |grep qemu
 qemu     14107 92.8  0.1 2120612 44808 ?       Sl   23:48   0:04 ...... -cpu qemu64,l3-cache=off";l3-cache=off  in qemu command line;;RedHatEnterpriseLinux7/RHEL-117874
208;;;;;;;;;6;"3. restart libvirtd and recheck guest
​​";​​;;RedHatEnterpriseLinux7/RHEL-117874
208;;;;;;;;;7;"4. login guest and check cache info:
 
 # lscpu |grep cache";"L1d cache:             64K
 L1i cache:             64K
 L2 cache:              512K
 (no L3 cache)";;RedHatEnterpriseLinux7/RHEL-117874
209;RHEL-117920;[Broadwell-noTSX] Verify Haswell-noTSX/Broadwell-noTSX cpu model can be detected in a right way - bug 1199446;Also need test with Broadwell which remove hle and rtm features, it should works as expect.;Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1;1. check # virsh capabilities;host cpu detect as Broadwell-noTSX;Test Case;RedHatEnterpriseLinux7/RHEL-117920
209;;;;;;;;;2;"2. start guest with model Broadwell
 
  <cpu mode='custom' match='exact'>
    <model fallback='allow'>Broadwell</model>";fail to start with clear error message;;RedHatEnterpriseLinux7/RHEL-117920
209;;;;;;;;;3;"3. start guest with host-model, check live xml the model and qemu command line
 
 <cpu mode='host-model'>
 ...";guest model is Broadwell-noTSX;;RedHatEnterpriseLinux7/RHEL-117920
209;;;;;;;;;4;"4. start guest with Broadwell-noTSX model, guest can start, check live xml and qemu commandline
 
 <cpu mode='custom' match='exact'>
    <model fallback='forbid'>Broadwell-noTSX</model>
 ...";guest can start and qemu comment line shows the cpu is Broadwell-noTSX;;RedHatEnterpriseLinux7/RHEL-117920
210;RHEL-117928;[Migration][--copy-storage-all] Copy the whole image chain for storage migration - multiple disks - local storage - without <shareable/> - without backing chain - file type;Bug 1493828 - [RHOSP10] Live migration of instances with config-drive fails occasionally after updating to qemu 2.9;Fangge Jin (fjin);Critical;Positive;Not Automated;;1;"Prepare a guest with multiple disks of file type that're only accessible on local host.
 For example:
 
* # virsh domblklist rhel7
Target     Source
 ------------------------------------------------
 vda        /var/lib/libvirt/images/RHEL-7.5-x86_64-latest.qcow2
 vdb        /var/lib/libvirt/images/test.qcow2
 vdc        /var/lib/libvirt/images/test1.qcow2";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-117928
210;;;;;;;;;2;Start guest;"
​​";;RedHatEnterpriseLinux7/RHEL-117928
210;;;;;;;;;3;"Check disk image on target host:
 
* # file /var/lib/libvirt/images/RHEL-7.5-x86_64-latest.qcow2
* # file /var/lib/libvirt/images/test.qcow2
* # file /var/lib/libvirt/images/test1.qcow2
";Files don't exist.;;RedHatEnterpriseLinux7/RHEL-117928
210;;;;;;;;;4;"Do live migration with --copy-storage-all:
 
* # virsh migrate rhel7 qemu+ssh://{target_ip}/system --live --copy-storage-all --verbose
";Migration succeeds;;RedHatEnterpriseLinux7/RHEL-117928
210;;;;;;;;;5;"Check guest on source host:
 
* # virsh list
";Guest is not running on source host;;RedHatEnterpriseLinux7/RHEL-117928
210;;;;;;;;;6;"Check guest on target host:
 
* # virsh list
";Guest is running on target host;;RedHatEnterpriseLinux7/RHEL-117928
210;;;;;;;;;7;Do disk I/O operation in guest;All of guest disk can be read/written;;RedHatEnterpriseLinux7/RHEL-117928
210;;;;;;;;;8;Repeat migration with --copy-storage-all for 10 times;Migration succeeds for each time;;RedHatEnterpriseLinux7/RHEL-117928
211;RHEL-117976;[Hyper-V][Network] Check network supported features after change MTU/channel/ring parameters;When change network mtu, channel, or ring parameters, network adapters will be reset, in this condition, some network features (e.g. GRO) may be changed unexpectedly.;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;Check default netvsc driver supported features:# ethtool -k > ethtool-default;​​;Test Case;RedHatEnterpriseLinux7/RHEL-117976
211;;;;;;;;;2;"Change netvsc MTU/channel/ring parameters
 # ip link set dev eth0 mtu 3000
 OR # ethtool -L eth0 combined 2
 OR # ethtool -G eth0 rx 1024";Changed successfully;;RedHatEnterpriseLinux7/RHEL-117976
211;;;;;;;;;3;"Check netvsc features again
 # ethtool -k > ethtool-test";​​;;RedHatEnterpriseLinux7/RHEL-117976
211;;;;;;;;;4;"Compare the ethtool-default and ethtool-test
 # diff ethtool-default ethtool-test";There should be no change;;RedHatEnterpriseLinux7/RHEL-117976
212;RHEL-118540;[cross migration] host-model guest cannot migrate after update libvirt - bug 1470582 - S2;host-model guest cannot migrate after update libvirt, there is a change since rhel7.4, the case is to test the migration from rhel7.3(before the change) to current release, ;Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1;"S2: guest migrate to 7.3 host -> update to 7.4(current release)  -> migrate to 7.4(current release) 

 setup:
 src: rhel7.3 (libvirt-2.0.0-10.el7.x86_64 + qemu-kvm-rhev-2.6.0-28.el7_3.3.x86_64)
 target: current release
 1. prepare 3 guest on rhel7.3 host, which have custom, host-model and host-passthrough cpu:

 # virsh dumpxml r7-mig
 ...
   <cpu mode='custom' match='minimum'>
     <model fallback='allow'>Opteron_G5</model>
     <feature policy='disable' name='invtsc'/>
 ...

 # virsh dumpxml r7-mig2
 ...
   <cpu mode='host-model'>
     <model fallback='allow'/>
 ...

 # virsh dumpxml r7-mig3
 ...
   <cpu mode='host-passthrough'>
 ...

";​​;Test Case;RedHatEnterpriseLinux7/RHEL-118540
212;;;;;;;;;2;"2. start and migrate to 7.3 host:

 # virsh start r7-mig3
 Domain r7-mig3 started

 # virsh start r7-mig2
 Domain r7-mig2 started

 # virsh start r7-mig
 Domain r7-mig started

 # virsh migrate r7-mig qemu+ssh://target/system --live

 # virsh migrate r7-mig2 qemu+ssh://target/system --live

 # virsh migrate r7-mig3 qemu+ssh://target/system --live";migration succeed;;RedHatEnterpriseLinux7/RHEL-118540
212;;;;;;;;;3;"3. check the guest xml in target:
";"# virsh dumpxml r7-mig

   <cpu mode='custom' match='exact'>
     <model fallback='allow'>Opteron_G5</model>
     <feature policy='disable' name='invtsc'/>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ht'/>
     <feature policy='require' name='monitor'/>
     <feature policy='require' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='require' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='require' name='ibs'/>
     <feature policy='require' name='skinit'/>
     <feature policy='require' name='wdt'/>
     <feature policy='require' name='lwp'/>
 ...

 # virsh dumpxml r7-mig2
 ...
   <cpu mode='host-model'>
     <model fallback='allow'>Opteron_G5</model>
     <vendor>AMD</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ht'/>
     <feature policy='require' name='monitor'/>
     <feature policy='require' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='require' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='require' name='ibs'/>
     <feature policy='require' name='skinit'/>
     <feature policy='require' name='wdt'/>
     <feature policy='require' name='lwp'/>
     <feature policy='require' name='tce'/>
     <feature policy='require' name='nodeid_msr'/>
     <feature policy='require' name='topoext'/>
     <feature policy='require' name='perfctr_core'/>
     <feature policy='require' name='perfctr_nb'/>
 ...

 # virsh dumpxml r7-mig3
 ...
   <cpu mode='host-passthrough'>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ht'/>
     <feature policy='require' name='monitor'/>
     <feature policy='require' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='require' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='require' name='ibs'/>
     <feature policy='require' name='skinit'/>
     <feature policy='require' name='wdt'/>
     <feature policy='require' name='lwp'/>
     <feature policy='require' name='tce'/>
     <feature policy='require' name='nodeid_msr'/>
     <feature policy='require' name='topoext'/>
     <feature policy='require' name='perfctr_core'/>
     <feature policy='require' name='perfctr_nb'/>
 ...
";;RedHatEnterpriseLinux7/RHEL-118540
212;;;;;;;;;4;"4. update target and source host to 7.4 (pls replace with current release):

 # yum update libvirt* qemu*
";​​;;RedHatEnterpriseLinux7/RHEL-118540
212;;;;;;;;;5;"5. recheck guest xml:



";"# virsh dumpxml r7-mig |grep -A28 '<cpu'
   <cpu mode='custom' match='exact' check='partial'>
     <model fallback='allow'>Opteron_G5</model>
     <feature policy='disable' name='invtsc'/>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ht'/>
     <feature policy='require' name='monitor'/>
     <feature policy='require' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='require' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='require' name='ibs'/>
     <feature policy='require' name='skinit'/>
     <feature policy='require' name='wdt'/>
     <feature policy='require' name='lwp'/>
     <feature policy='require' name='tce'/>
     <feature policy='require' name='nodeid_msr'/>
     <feature policy='require' name='topoext'/>
     <feature policy='require' name='perfctr_core'/>
     <feature policy='require' name='perfctr_nb'/>

 # virsh dumpxml r7-mig2 |grep -A28 '<cpu'
   <cpu mode='custom' match='exact' check='full'>
     <model fallback='allow'>Opteron_G5</model>
     <vendor>AMD</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='disable' name='ht'/>
     <feature policy='disable' name='monitor'/>
     <feature policy='disable' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='disable' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='disable' name='ibs'/>
     <feature policy='disable' name='skinit'/>
     <feature policy='disable' name='wdt'/>
     <feature policy='disable' name='lwp'/>
     <feature policy='disable' name='tce'/>
     <feature policy='disable' name='nodeid_msr'/>
     <feature policy='disable' name='topoext'/>
     <feature policy='disable' name='perfctr_core'/>
     <feature policy='disable' name='perfctr_nb'/>
     <feature policy='require' name='x2apic'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='disable' name='rdtscp'/>
     <feature policy='disable' name='svm'/>

 # virsh dumpxml r7-mig3 |grep -A28 '<cpu'
   <cpu mode='host-passthrough' check='none'>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ht'/>
     <feature policy='require' name='monitor'/>
     <feature policy='require' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='require' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='require' name='ibs'/>
     <feature policy='require' name='skinit'/>
     <feature policy='require' name='wdt'/>
     <feature policy='require' name='lwp'/>
     <feature policy='require' name='tce'/>
     <feature policy='require' name='nodeid_msr'/>
     <feature policy='require' name='topoext'/>
     <feature policy='require' name='perfctr_core'/>
     <feature policy='require' name='perfctr_nb'/>
";;RedHatEnterpriseLinux7/RHEL-118540
212;;;;;;;;;6;9. migrate to source host:;​​;;RedHatEnterpriseLinux7/RHEL-118540
212;;;;;;;;;7;"10. recheck the guest xml:





";"# virsh dumpxml r7-mig |grep -A28 '<cpu'
   <cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>Opteron_G5</model>
     <feature policy='disable' name='invtsc'/>
     <feature policy='require' name='vme'/>
     <feature policy='disable' name='ht'/>
     <feature policy='disable' name='monitor'/>
     <feature policy='disable' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='disable' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='disable' name='ibs'/>
     <feature policy='disable' name='skinit'/>
     <feature policy='disable' name='wdt'/>
     <feature policy='disable' name='lwp'/>
     <feature policy='disable' name='tce'/>
     <feature policy='disable' name='nodeid_msr'/>
     <feature policy='disable' name='topoext'/>
     <feature policy='disable' name='perfctr_core'/>
     <feature policy='disable' name='perfctr_nb'/>
     <feature policy='require' name='x2apic'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='disable' name='rdtscp'/>
     <feature policy='disable' name='svm'/>

 # virsh dumpxml r7-mig2 |grep -A28 '<cpu'
   <cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>Opteron_G5</model>
     <vendor>AMD</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='disable' name='ht'/>
     <feature policy='disable' name='monitor'/>
     <feature policy='disable' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='disable' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='disable' name='ibs'/>
     <feature policy='disable' name='skinit'/>
     <feature policy='disable' name='wdt'/>
     <feature policy='disable' name='lwp'/>
     <feature policy='disable' name='tce'/>
     <feature policy='disable' name='nodeid_msr'/>
     <feature policy='disable' name='topoext'/>
     <feature policy='disable' name='perfctr_core'/>
     <feature policy='disable' name='perfctr_nb'/>
     <feature policy='require' name='x2apic'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='disable' name='rdtscp'/>
     <feature policy='disable' name='svm'/>


 # virsh dumpxml r7-mig3
   <cpu mode='host-passthrough' check='none'>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ht'/>
     <feature policy='require' name='monitor'/>
     <feature policy='require' name='osxsave'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='require' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='require' name='ibs'/>
     <feature policy='require' name='skinit'/>
     <feature policy='require' name='wdt'/>
     <feature policy='require' name='lwp'/>
     <feature policy='require' name='nodeid_msr'/>
     <feature policy='require' name='topoext'/>
     <feature policy='require' name='perfctr_core'/>
     <feature policy='require' name='perfctr_nb'/>
   </cpu>
";;RedHatEnterpriseLinux7/RHEL-118540
213;RHEL-118541;[cross migration] host-model guest cannot migrate after update libvirt - bug 1470582 - S3;host-model guest cannot migrate after update libvirt, there is a change since rhel7.4, the case is to test the migration from rhel7.3(before the change) to current release, ;Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1;"S3: start guest on 7.3 -> update to 7.4 (current release) -> migrate guest to 7.4(current release)  host with --xml

 src: rhel7.3  ( libvirt-2.0.0-10.el7.x86_64  + qemu-kvm-rhev-2.6.0-28.el7_3.3.x86_64)
 target: current release
 1. prepare 3 guest on src host with rhel7.3, which have custom, host-model and host-passthrough cpu:

 # virsh dumpxml r7-mig
 ...
   <cpu mode='custom' match='minimum'>
     <model fallback='allow'>Opteron_G5</model>
     <feature policy='disable' name='invtsc'/>
 ...

 # virsh dumpxml r7-mig2
 ...
   <cpu mode='host-model'>
     <model fallback='allow'/>
 ...

 # virsh dumpxml r7-mig3
 ...
   <cpu mode='host-passthrough'>
 ...

";​​;Test Case;RedHatEnterpriseLinux7/RHEL-118541
213;;;;;;;;;2;"2. start guest:

 # virsh start r7-mig3
 Domain r7-mig3 started

 # virsh start r7-mig2
 Domain r7-mig2 started

 # virsh start r7-mig
 Domain r7-mig started

";​​;;RedHatEnterpriseLinux7/RHEL-118541
213;;;;;;;;;3;"3. update libvirt to 7.4:

 yum update libvirt* qemu*";​​;;RedHatEnterpriseLinux7/RHEL-118541
213;;;;;;;;;4;"4. recheck guest xml:

";"# virsh dumpxml r7-mig
   <cpu mode='custom' match='minimum' check='partial'>
     <model fallback='allow'>Opteron_G5</model>
     <feature policy='disable' name='invtsc'/>
     <numa>
       <cell id='0' cpus='0-2' memory='524288' unit='KiB'/>
       <cell id='1' cpus='3-5' memory='524288' unit='KiB'/>
     </numa>
   </cpu>

 # virsh dumpxml r7-mig2
   <cpu mode='custom' match='exact' check='full'>
     <model fallback='allow'>Opteron_G5</model>
     <vendor>AMD</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='disable' name='ht'/>
     <feature policy='disable' name='monitor'/>
     <feature policy='disable' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='disable' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='disable' name='ibs'/>
     <feature policy='disable' name='skinit'/>
     <feature policy='disable' name='wdt'/>
     <feature policy='disable' name='lwp'/>
     <feature policy='disable' name='tce'/>
     <feature policy='disable' name='nodeid_msr'/>
     <feature policy='disable' name='topoext'/>
     <feature policy='disable' name='perfctr_core'/>
     <feature policy='disable' name='perfctr_nb'/>
     <feature policy='require' name='x2apic'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='disable' name='rdtscp'/>
     <feature policy='disable' name='svm'/>

 # virsh dumpxml r7-mig3
   <cpu mode='host-passthrough' check='none'>
     <numa>
       <cell id='0' cpus='0-2' memory='524288' unit='KiB'/>
       <cell id='1' cpus='3-5' memory='524288' unit='KiB'/>
     </numa>
   </cpu>";;RedHatEnterpriseLinux7/RHEL-118541
213;;;;;;;;;5;"5. migrate to rhel7.4 host the --xml (same cpu with source):
 # virsh dumpxml r7-mig2 --migratable > /tmp/r7-mig2.xml
 # virsh migrate r7-mig2 qemu+ssh://target/system --live --xml /tmp/r7-mig2.xml

 # virsh dumpxml r7-mig --migratable > /tmp/r7-mig.xml
 # virsh migrate r7-mig qemu+ssh://target/system --live --xml /tmp/r7-mig.xml

 # virsh dumpxml r7-mig3 --migratable > /tmp/r7-mig3.xml
 # virsh migrate r7-mig3 qemu+ssh://target/system --live --xml /tmp/r7-mig3.xml";​​;;RedHatEnterpriseLinux7/RHEL-118541
213;;;;;;;;;6;"6. recheck guest one the target host:

";"# virsh dumpxml r7-mig | grep -A28 '<cpu'
 <cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>Opteron_G5</model>
     <feature policy='require' name='vme'/>
     <feature policy='disable' name='ht'/>
     <feature policy='disable' name='monitor'/>
     <feature policy='disable' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='disable' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='disable' name='ibs'/>
     <feature policy='disable' name='skinit'/>
     <feature policy='disable' name='wdt'/>
     <feature policy='disable' name='lwp'/>
     <feature policy='disable' name='tce'/>
     <feature policy='disable' name='nodeid_msr'/>
     <feature policy='disable' name='topoext'/>
     <feature policy='disable' name='perfctr_core'/>
     <feature policy='disable' name='perfctr_nb'/>
     <feature policy='disable' name='invtsc'/>
     <feature policy='require' name='x2apic'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='disable' name='rdtscp'/>
     <feature policy='disable' name='svm'/>

 # virsh dumpxml r7-mig2 | grep -A28 '<cpu'
   <cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>Opteron_G5</model>
     <vendor>AMD</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='disable' name='ht'/>
     <feature policy='disable' name='monitor'/>
     <feature policy='disable' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='disable' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='disable' name='ibs'/>
     <feature policy='disable' name='skinit'/>
     <feature policy='disable' name='wdt'/>
     <feature policy='disable' name='lwp'/>
     <feature policy='disable' name='tce'/>
     <feature policy='disable' name='nodeid_msr'/>
     <feature policy='disable' name='topoext'/>
     <feature policy='disable' name='perfctr_core'/>
     <feature policy='disable' name='perfctr_nb'/>
     <feature policy='require' name='x2apic'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='disable' name='rdtscp'/>
     <feature policy='disable' name='svm'/>

 # virsh dumpxml r7-mig3 | grep -A28 '<cpu'
   <cpu mode='host-passthrough' check='none'>
     <numa>
       <cell id='0' cpus='0-2' memory='524288' unit='KiB'/>
       <cell id='1' cpus='3-5' memory='524288' unit='KiB'/>
     </numa>
   </cpu>
";;RedHatEnterpriseLinux7/RHEL-118541
213;;;;;;;;;7;"7. migrate back to source:

 # virsh dumpxml r7-mig3 --migratable > /tmp/r7-mig3.xml
 # virsh migrate r7-mig3 qemu+ssh://source/system --live --xml /tmp/r7-mig3.xml

 # virsh dumpxml r7-mig2 --migratable > /tmp/r7-mig2.xml
 # virsh migrate r7-mig2 qemu+ssh://source/system --live --xml /tmp/r7-mig2.xml

 # virsh dumpxml r7-mig --migratable > /tmp/r7-mig.xml
 # virsh migrate r7-mig qemu+ssh://source/system --live --xml /tmp/r7-mig.xml
";​​;;RedHatEnterpriseLinux7/RHEL-118541
213;;;;;;;;;8;"8. recheck guest in the source host:


";"# virsh dumpxml r7-mig2 |grep -A28 ""<cpu""
   <cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>Opteron_G5</model>
     <vendor>AMD</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='disable' name='ht'/>
     <feature policy='disable' name='monitor'/>
     <feature policy='disable' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='disable' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='disable' name='ibs'/>
     <feature policy='disable' name='skinit'/>
     <feature policy='disable' name='wdt'/>
     <feature policy='disable' name='lwp'/>
     <feature policy='disable' name='tce'/>
     <feature policy='disable' name='nodeid_msr'/>
     <feature policy='disable' name='topoext'/>
     <feature policy='disable' name='perfctr_core'/>
     <feature policy='disable' name='perfctr_nb'/>
     <feature policy='require' name='x2apic'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='disable' name='rdtscp'/>
     <feature policy='disable' name='svm'/>

 # virsh dumpxml r7-mig |grep -A28 ""<cpu""
   <cpu mode='custom' match='exact' check='full'>
     <model fallback='forbid'>Opteron_G5</model>
     <feature policy='require' name='vme'/>
     <feature policy='disable' name='ht'/>
     <feature policy='disable' name='monitor'/>
     <feature policy='disable' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='disable' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='disable' name='ibs'/>
     <feature policy='disable' name='skinit'/>
     <feature policy='disable' name='wdt'/>
     <feature policy='disable' name='lwp'/>
     <feature policy='disable' name='tce'/>
     <feature policy='disable' name='nodeid_msr'/>
     <feature policy='disable' name='topoext'/>
     <feature policy='disable' name='perfctr_core'/>
     <feature policy='disable' name='perfctr_nb'/>
     <feature policy='disable' name='invtsc'/>
     <feature policy='require' name='x2apic'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='disable' name='rdtscp'/>
     <feature policy='disable' name='svm'/>

 # virsh dumpxml r7-mig3 |grep -A28 ""<cpu""
   <cpu mode='host-passthrough' check='none'>
     <numa>
       <cell id='0' cpus='0-2' memory='524288' unit='KiB'/>
       <cell id='1' cpus='3-5' memory='524288' unit='KiB'/>
     </numa>
   </cpu>
";;RedHatEnterpriseLinux7/RHEL-118541
214;RHEL-118542;[cross migration] host-model guest cannot migrate after update libvirt - bug 1470582 - S4;host-model guest cannot migrate after update libvirt, there is a change since rhel7.4, the case is to test the migration from rhel7.3(before the change) to current release,;Yalan Zhang (yalzhang);Medium;Positive;Manual Only;;1;"S4: guest migrate from 7.3 host -> update to 7.4(current release)   -> migrate to 7.4 (current release) with --xml
 
 setup before testing:
 src: rhel7.3 (qemu-kvm-rhev-2.6.0-28.el7_3.3.x86_64 + libvirt-2.0.0-10.el7.x86_64)
 target: rhel7.3
 1. prepare 3 guest on src, which have custom, host-model and host-passthrough cpu:
 src: rhel7.3
 target: rhel7.3
 
 # virsh dumpxml r7-mig
 ...
   <cpu mode='custom' match='minimum'>
     <model fallback='allow'>Opteron_G5</model>
     <feature policy='disable' name='invtsc'/>
 ...
 
 # virsh dumpxml r7-mig2
 ...
   <cpu mode='host-model'>
     <model fallback='allow'/>
 ...
 
 # virsh dumpxml r7-mig3
 ...
   <cpu mode='host-passthrough'>
 ...
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-118542
214;;;;;;;;;2;"2. start and migrate to 7.3 host:
 
 
 # virsh start r7-mig3
 Domain r7-mig3 started
 
 # virsh start r7-mig2
 Domain r7-mig2 started
 
 # virsh start r7-mig
 Domain r7-mig started
 
 # virsh migrate r7-mig qemu+ssh://target/system --live
 
 # virsh migrate r7-mig2 qemu+ssh://target/system --live
 
 # virsh migrate r7-mig3 qemu+ssh://target/system --live";​​;;RedHatEnterpriseLinux7/RHEL-118542
214;;;;;;;;;3;"3. check the guest xml in target:
 
 # virsh dumpxml r7-mig3
 ...
   <cpu mode='host-passthrough'>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ht'/>
     <feature policy='require' name='monitor'/>
     <feature policy='require' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='require' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='require' name='ibs'/>
     <feature policy='require' name='skinit'/>
     <feature policy='require' name='wdt'/>
     <feature policy='require' name='lwp'/>
     <feature policy='require' name='tce'/>
     <feature policy='require' name='nodeid_msr'/>
     <feature policy='require' name='topoext'/>
     <feature policy='require' name='perfctr_core'/>
     <feature policy='require' name='perfctr_nb'/>
 ...
 
 # virsh dumpxml r7-mig2
 ...
   <cpu mode='host-model'>
     <model fallback='allow'>Opteron_G5</model>
     <vendor>AMD</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ht'/>
     <feature policy='require' name='monitor'/>
     <feature policy='require' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='require' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='require' name='ibs'/>
     <feature policy='require' name='skinit'/>
     <feature policy='require' name='wdt'/>
     <feature policy='require' name='lwp'/>
     <feature policy='require' name='tce'/>
     <feature policy='require' name='nodeid_msr'/>
     <feature policy='require' name='topoext'/>
     <feature policy='require' name='perfctr_core'/>
     <feature policy='require' name='perfctr_nb'/>
 ...
 
 # virsh dumpxml r7-mig
   <cpu mode='custom' match='exact'>
     <model fallback='allow'>Opteron_G5</model>
     <feature policy='disable' name='invtsc'/>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ht'/>
     <feature policy='require' name='monitor'/>
     <feature policy='require' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='require' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='require' name='ibs'/>
     <feature policy='require' name='skinit'/>
     <feature policy='require' name='wdt'/>
     <feature policy='require' name='lwp'/>";​​;;RedHatEnterpriseLinux7/RHEL-118542
214;;;;;;;;;4;"4. update target and source host to 7.4:
 
 # yum update libvirt* qemu*";​​;;RedHatEnterpriseLinux7/RHEL-118542
214;;;;;;;;;5;"5. recheck guest xml:
 
 # virsh dumpxml r7-mig |grep -A28 '<cpu'
   <cpu mode='custom' match='exact' check='partial'>
     <model fallback='allow'>Opteron_G5</model>
     <feature policy='disable' name='invtsc'/>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ht'/>
     <feature policy='require' name='monitor'/>
     <feature policy='require' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='require' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='require' name='ibs'/>
     <feature policy='require' name='skinit'/>
     <feature policy='require' name='wdt'/>
     <feature policy='require' name='lwp'/>
     <feature policy='require' name='tce'/>
     <feature policy='require' name='nodeid_msr'/>
     <feature policy='require' name='topoext'/>
     <feature policy='require' name='perfctr_core'/>
     <feature policy='require' name='perfctr_nb'/>
 
 # virsh dumpxml r7-mig2 |grep -A28 '<cpu'
   <cpu mode='custom' match='exact' check='full'>
     <model fallback='allow'>Opteron_G5</model>
     <vendor>AMD</vendor>
     <feature policy='require' name='vme'/>
     <feature policy='disable' name='ht'/>
     <feature policy='disable' name='monitor'/>
     <feature policy='disable' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='disable' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='disable' name='ibs'/>
     <feature policy='disable' name='skinit'/>
     <feature policy='disable' name='wdt'/>
     <feature policy='disable' name='lwp'/>
     <feature policy='disable' name='tce'/>
     <feature policy='disable' name='nodeid_msr'/>
     <feature policy='disable' name='topoext'/>
     <feature policy='disable' name='perfctr_core'/>
     <feature policy='disable' name='perfctr_nb'/>
     <feature policy='require' name='x2apic'/>
     <feature policy='require' name='hypervisor'/>
     <feature policy='disable' name='rdtscp'/>
     <feature policy='disable' name='svm'/>
 
 # virsh dumpxml r7-mig3 |grep -A28 '<cpu'
   <cpu mode='host-passthrough' check='none'>
     <feature policy='require' name='vme'/>
     <feature policy='require' name='ht'/>
     <feature policy='require' name='monitor'/>
     <feature policy='require' name='osxsave'/>
     <feature policy='require' name='bmi1'/>
     <feature policy='require' name='mmxext'/>
     <feature policy='require' name='fxsr_opt'/>
     <feature policy='require' name='cmp_legacy'/>
     <feature policy='require' name='extapic'/>
     <feature policy='require' name='cr8legacy'/>
     <feature policy='require' name='osvw'/>
     <feature policy='require' name='ibs'/>
     <feature policy='require' name='skinit'/>
     <feature policy='require' name='wdt'/>
     <feature policy='require' name='lwp'/>
     <feature policy='require' name='tce'/>
     <feature policy='require' name='nodeid_msr'/>
     <feature policy='require' name='topoext'/>
     <feature policy='require' name='perfctr_core'/>
     <feature policy='require' name='perfctr_nb'/>
​​";​​;;RedHatEnterpriseLinux7/RHEL-118542
214;;;;;;;;;6;"9. migrate to source host:
 
 # virsh dumpxml r7-mig --migratable > /tmp/r7-mig.xml
 # virsh migrate r7-mig qemu+ssh://source/system --live --xml /tmp/r7-mig.xml
 
 # virsh dumpxml r7-mig2 --migratable > /tmp/r7-mig2.xml
 # virsh migrate r7-mig2 qemu+ssh://source/system --live --xml /tmp/r7-mig2.xml
 
 # virsh dumpxml r7-mig3 --migratable > /tmp/r7-mig3.xml
 # virsh migrate r7-mig3 qemu+ssh://source/system --live --xml /tmp/r7-mig3.xml
​​";​​;;RedHatEnterpriseLinux7/RHEL-118542
214;;;;;;;;;7;"10. recheck the guest xml:
 
 # virsh dumpxml r7-mig |grep -A28 '<cpu'
  <cpu mode='custom' match='exact' check='full'>
    <model fallback='forbid'>Opteron_G5</model>
    <feature policy='disable' name='invtsc'/>
    <feature policy='require' name='vme'/>
    <feature policy='disable' name='ht'/>
    <feature policy='disable' name='monitor'/>
    <feature policy='disable' name='osxsave'/>
    <feature policy='require' name='bmi1'/>
    <feature policy='require' name='mmxext'/>
    <feature policy='require' name='fxsr_opt'/>
    <feature policy='require' name='cmp_legacy'/>
    <feature policy='disable' name='extapic'/>
    <feature policy='require' name='cr8legacy'/>
    <feature policy='require' name='osvw'/>
    <feature policy='disable' name='ibs'/>
    <feature policy='disable' name='skinit'/>
    <feature policy='disable' name='wdt'/>
    <feature policy='disable' name='lwp'/>
    <feature policy='disable' name='tce'/>
    <feature policy='disable' name='nodeid_msr'/>
    <feature policy='disable' name='topoext'/>
    <feature policy='disable' name='perfctr_core'/>
    <feature policy='disable' name='perfctr_nb'/>
    <feature policy='require' name='x2apic'/>
    <feature policy='require' name='hypervisor'/>
    <feature policy='disable' name='rdtscp'/>
    <feature policy='disable' name='svm'/>
 
 # virsh dumpxml r7-mig2 |grep -A28 '<cpu'
  <cpu mode='custom' match='exact' check='full'>
    <model fallback='forbid'>Opteron_G5</model>
    <vendor>AMD</vendor>
    <feature policy='require' name='vme'/>
    <feature policy='disable' name='ht'/>
    <feature policy='disable' name='monitor'/>
    <feature policy='disable' name='osxsave'/>
    <feature policy='require' name='bmi1'/>
    <feature policy='require' name='mmxext'/>
    <feature policy='require' name='fxsr_opt'/>
    <feature policy='require' name='cmp_legacy'/>
    <feature policy='disable' name='extapic'/>
    <feature policy='require' name='cr8legacy'/>
    <feature policy='require' name='osvw'/>
    <feature policy='disable' name='ibs'/>
    <feature policy='disable' name='skinit'/>
    <feature policy='disable' name='wdt'/>
    <feature policy='disable' name='lwp'/>
    <feature policy='disable' name='tce'/>
    <feature policy='disable' name='nodeid_msr'/>
    <feature policy='disable' name='topoext'/>
    <feature policy='disable' name='perfctr_core'/>
    <feature policy='disable' name='perfctr_nb'/>
    <feature policy='require' name='x2apic'/>
    <feature policy='require' name='hypervisor'/>
    <feature policy='disable' name='rdtscp'/>
    <feature policy='disable' name='svm'/>
 
 # virsh dumpxml r7-mig |grep -A28 '<cpu'
  <cpu mode='custom' match='exact' check='full'>
    <model fallback='forbid'>Opteron_G5</model>
    <feature policy='disable' name='invtsc'/>
    <feature policy='require' name='vme'/>
    <feature policy='disable' name='ht'/>
    <feature policy='disable' name='monitor'/>
    <feature policy='disable' name='osxsave'/>
    <feature policy='require' name='bmi1'/>
    <feature policy='require' name='mmxext'/>
    <feature policy='require' name='fxsr_opt'/>
    <feature policy='require' name='cmp_legacy'/>
    <feature policy='disable' name='extapic'/>
    <feature policy='require' name='cr8legacy'/>
    <feature policy='require' name='osvw'/>
    <feature policy='disable' name='ibs'/>
    <feature policy='disable' name='skinit'/>
    <feature policy='disable' name='wdt'/>
    <feature policy='disable' name='lwp'/>
    <feature policy='disable' name='tce'/>
    <feature policy='disable' name='nodeid_msr'/>
    <feature policy='disable' name='topoext'/>
    <feature policy='disable' name='perfctr_core'/>
    <feature policy='disable' name='perfctr_nb'/>
    <feature policy='require' name='x2apic'/>
    <feature policy='require' name='hypervisor'/>
    <feature policy='disable' name='rdtscp'/>
    <feature policy='disable' name='svm'/>
 
​​";"
 cpu sections are updated";;RedHatEnterpriseLinux7/RHEL-118542
214;;;;;;;;;8;11. check the qemu command and log in guest log;​​;;RedHatEnterpriseLinux7/RHEL-118542
215;RHEL-118570;[Migration][-dname][--xml][--p2p] Change live domain xml on destination when do live migration - p2p migration;virDomainMigrateToURI3 API is used by virsh client now( since libvirt-xxx);Fangge Jin (fjin);Medium;Positive;Not Automated;;1; Retest RHEL-130624 for p2p migration;​​;Test Case;RedHatEnterpriseLinux7/RHEL-118570
216;RHEL-119497;IDM-SSSD-TC: ldap_provider: cache_performance: Group lookup stats with 200 users in a group;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-119497
217;RHEL-119498;IDM-SSSD-TC: ldap_provider: cache_performance: Group lookup stats with 500 users in a group;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-119498
218;RHEL-119634;IDM-SSSD-TC: ldap_provider: cache_performance: Group lookup stats with 1000 users in a group;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-119634
219;RHEL-119635;IDM-SSSD-TC: ldap_provider: cache_performance: Group lookup stats with 1500 users in a group;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-119635
220;RHEL-119636;IDM-SSSD-TC: ldap_provider: cache_performance: Group lookup stats with 2000 users in a group;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-119636
221;RHEL-119637;IDM-SSSD-TC: ldap_provider: cache_performance: Group lookup stats with 3000 users in a group;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-119637
222;RHEL-119638;IDM-SSSD-TC: ldap_provider: cache_performance: Verify user login time when 100 users attempt simultaneous login;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-119638
223;RHEL-119639;IDM-SSSD-TC: ldap_provider: cache_performance: Verify user login time when 200 users attempt simultaneous login;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-119639
224;RHEL-119640;IDM-SSSD-TC: ldap_provider: cache_performance: Verify user login time when 500 users attempt simultaneous login;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-119640
225;RHEL-119641;IDM-SSSD-TC: ldap_provider: cache_performance: Verify user login time when 1000 users attempt simultaneous login;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-119641
226;RHEL-120193;* The disks with </shareable> will be skipped * The disks with </readonly> will...;"* The disks with </shareable> will be skipped
* The disks with </readonly> will be skipped
";Fangge Jin (fjin);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-120193
227;RHEL-120194;[Migration][--migrateuri] Specify migrate URI for live migration - tunnelled migration  - not supported;Tunnelled migration with specified migrateuri;Fangge Jin (fjin);Low;Negative;Not Automated;;1;"* # virsh migrate --live --p2p --tunnelled --migrateuri $target_uri rhel6 qemu+ssh://$target_ip/system --verbose
";"Output:
 error: argument unsupported: migration URI is not supported by tunnelled migration";Test Case;RedHatEnterpriseLinux7/RHEL-120194
228;RHEL-120195;[Migration][--listen-address] Specify an invalid listen address for incoming migration connections;"Specify an invalid listen address for incoming migration connections
 Bug 1018267 - Libvirt crashes during migration 
 Bug 1049338 - listen address attribute ignored by peer-to-peer migration";Fangge Jin (fjin);High;Negative;Automated;;1;# virsh migrate --live qq qemu+ssh://$ip/system --verbose --listen-address 01.3.4.4;"Migration failed .
 
 Output:
 error: internal error: early end of file from monitor: possible problem:
 qemu-kvm: -incoming tcp:01.3.4.4:49152: Failed to bind socket: Cannot assign requested address";Test Case;RedHatEnterpriseLinux7/RHEL-120195
229;RHEL-120197;[Migration] Specify a listen address for incoming migration connections - by configuring parameter migration_address;"""migration_address"" (on qemu.conf of target host) indicates the listen address of qemu migration on target host;
Test matrix: see test plan
 
* # Override the listen address for all incoming migrations. Defaults to
* # 0.0.0.0, or :: if both host and qemu are capable of IPv6.
* #migration_address = ""0.0.0.0""
Bug 1015215 - RFE: provide a way to specify a listen address for incoming migration connections";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" Set migration_address to target's ip on target host:
 
 
* # vim /etc/libvirt/qemu.conf
migration_address = 10.66.4.136
* # systemctl restart libvirtd
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-120197
229;;;;;;;;;2;Start a guest on source host;​​;;RedHatEnterpriseLinux7/RHEL-120197
229;;;;;;;;;3;"Do migration:
 
* # virsh migrate --live qemu+ssh://$ip/system $guest
";Migration succeeds;;RedHatEnterpriseLinux7/RHEL-120197
230;RHEL-120199;[Migration][--compressed] Live migration with memory compression - multiple compression methods;Multithread compression and XBZRLE compression can be used together.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;Start a guest on source host.;​​;Test Case;RedHatEnterpriseLinux7/RHEL-120199
230;;;;;;;;;2;"Start live migration with --compressed and multiple compression methods:
 
* # virsh migrate --live rhel6 qemu+ssh://{target ip}/system --compressed --comp-methods xbzrle,mt --comp-mt-level 2 --comp-mt-threads 4 --comp-mt-dthreads 3 --comp-xbzrle-cache 134217728
";​​;;RedHatEnterpriseLinux7/RHEL-120199
230;;;;;;;;;3;"After migration completes, get domain job info :
 
* # virsh domjobinfo rhel6 --completed
";"Output:
 Job type:         Completed   
 Operation:        Outgoing migration
 Time elapsed:     2221         ms
 Time elapsed w/o network: 2198         ms
 Data processed:   89.283 MiB
 Data remaining:   0.000 B
 Data total:       1.126 GiB
 Memory processed: 89.283 MiB
 Memory remaining: 0.000 B
 Memory total:     1.126 GiB
 Memory bandwidth: 52.251 MiB/s
 Dirty rate:       0            pages/s
 Page size:        4096         bytes
 Iteration:        3           
 Constant pages:   231144      
 Normal pages:     65405       
 Normal data:      255.488 MiB
 Total downtime:   85           ms
 Downtime w/o network: 62           ms
 Setup time:       9            ms
 Compression cache: 128.000 MiB
 Compressed data:  0.000 B
 Compressed pages: 0            
 Compression cache misses: 757          
 Compression overflows: 0  ";;RedHatEnterpriseLinux7/RHEL-120199
230;;;;;;;;;4;Check source libvirtd.log;"Output:
 2018-05-08 02:05:48.153+0000: 14965: info : qemuMonitorSend:1076 : QEMU_MONITOR_SEND_MSG: mon=0x7f9378014ef0 msg={""execute"":""migrate-set-capabilities"",""arguments"":{""capabilities"":[{""capability"":""xbzrle"",""state"":true}]},""id"":""libvirt-38""}

 2018-05-08 02:05:48.154+0000: 14965: info : qemuMonitorSend:1076 : QEMU_MONITOR_SEND_MSG: mon=0x7f9378014ef0 msg={""execute"":""migrate-set-capabilities"",""arguments"":{""capabilities"":[{""capability"":""compress"",""state"":true}]},""id"":""libvirt-39""}

 2018-05-08 02:05:48.156+0000: 14965: info : qemuMonitorSend:1076 : QEMU_MONITOR_SEND_MSG: mon=0x7f9378014ef0 msg={""execute"":""migrate-set-cache-size"",""arguments"":{""value"":134217728},""id"":""libvirt-40""}

 2018-05-08 02:05:48.163+0000: 14965: info : qemuMonitorSend:1076 : QEMU_MONITOR_SEND_MSG: mon=0x7f9378014ef0 msg={""execute"":""migrate-set-parameters"",""arguments"":{""compress-level"":2,""compress-threads"":4,""decompress-threads"":3,""tls-creds"":"""",""tls-hostname"":""""},""id"":""libvirt-45""}";;RedHatEnterpriseLinux7/RHEL-120199
231;RHEL-120208;[Migration][event] Check event during live migration - migration fails due to I/O error - test with qemu-kvm-rhev - bug 1212077;N/A;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;On source host, start a guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL-120208
231;;;;;;;;;2;"On both source and target host, monitor the guest event:
 
* # virsh event V --loop --all
";​​;;RedHatEnterpriseLinux7/RHEL-120208
231;;;;;;;;;3;"On source host, do live migration with --abort-on-error and produce I/O error during migration.
 
* # virsh migrate V qemu+ssh://10.66.6.6/system --live --abort-on-error

* For how to produce I/O error, refer to:
RHEL7-16714 - [Storage][negative] check guest status when overcommit the disk
";"Migration fails.
 
 Output:
 Migration: [  2 %]error: internal error: qemu unexpectedly closed the monitor: 2017-07-01T01:18:08.946053Z qemu-kvm: -chardev pty,id=charserial0: char device redirected to /dev/pts/6 (label charserial0)
 2017-07-01T01:18:27.055897Z qemu-kvm: load of migration failed: Input/output error";;RedHatEnterpriseLinux7/RHEL-120208
231;;;;;;;;;4;"On source host, check the output of ""virsh event V --loop --all"" 
 
​​";"event 'io-error' for domain V: /var/lib/libvirt/images/mypool/disk1.img (virtio-disk1) pause
 event 'io-error-reason' for domain V: /var/lib/libvirt/images/mypool/disk1.img (virtio-disk1) pause due to enospc
 event 'lifecycle' for domain V: Suspended I/O Error
 ...
 event 'lifecycle' for domain V: Resumed Unpaused
 event 'lifecycle' for domain V: Suspended Migrated
 event 'lifecycle' for domain V: Resumed Migrated";;RedHatEnterpriseLinux7/RHEL-120208
231;;;;;;;;;5;"On target host, check the output of ""virsh event V --loop --all"" 
​​";"event 'agent-lifecycle' for domain V: state: 'disconnected' reason: 'domain started'
 event 'lifecycle' for domain V: Started Migrated
 event 'lifecycle' for domain V: Stopped Failed";;RedHatEnterpriseLinux7/RHEL-120208
231;;;;;;;;;6;"On source host, check libvirtd log:
 
 
* # grep -E 'qemuProcessHandleMigrationStatus|qemuMonitorGetMigrationStats' /var/log/libvirt/libvirtd.log
";"""qemuMonitorGetMigrationStats'"" doesn't appear every 50ms in libvirt log, this means Libvirtd get events for migration status changes, instead of polling for the status every 50ms().
 
 Output:
 2015-08-21 10:50:15.676+0000: 14267: debug : qemuProcessHandleMigrationStatus:1535 : Migration of domain 0x7f4d30229550 V changed state to setup
 2015-08-21 10:50:15.680+0000: 14267: debug : qemuProcessHandleMigrationStatus:1535 : Migration of domain 0x7f4d30229550 V changed state to active
 2015-08-21 10:50:17.871+0000: 14267: debug : qemuProcessHandleMigrationStatus:1535 : Migration of domain 0x7f4d30229550 V changed state to cancelling
 2015-08-21 10:50:17.871+0000: 14267: debug : qemuProcessHandleMigrationStatus:1535 : Migration of domain 0x7f4d30229550 V changed state to cancelled";;RedHatEnterpriseLinux7/RHEL-120208
231;;;;;;;;;7;"On target host, check libvirtd log:
 
 
* # grep -E 'qemuProcessHandleMigrationStatus|qemuMonitorGetMigrationStats' /var/log/libvirt/libvirtd.log
";"""qemuMonitorGetMigrationStats'"" doesn't appear every 50ms in libvirt log, this means Libvirtd get events for migration status changes, instead of polling for the status every 50ms().
 
 Output:
 2015-08-21 10:50:15.647+0000: 5107: debug : qemuProcessHandleMigrationStatus:1532 : Migration of domain 0x7f596401ea50 V changed state to active
 2015-08-21 10:50:17.782+0000: 5107: debug : qemuProcessHandleMigrationStatus:1532 : Migration of domain 0x7f596401ea50 V changed state to failed";;RedHatEnterpriseLinux7/RHEL-120208
232;RHEL-120209;[Migration][event] Check event during live migration - migration fails - test with qemu-kvm-rhev - bug 1212077;Check libvirtd listens QMP events for migration status changes;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;On source host, start a guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL-120209
232;;;;;;;;;2;"On both source and target host, monitor the guest event:
 
* # virsh event V --loop --all
";​​;;RedHatEnterpriseLinux7/RHEL-120209
232;;;;;;;;;3;"Do migration, and break network before migration completes:
 
* # virsh migrate V qemu+ssh://10.66.6.6/system --live --p2p
* Before migration completes:
  
* # iptables -A INPUT -s 10.66.6.6 -j DROP
* Wait 30s, check migration status
";"Migration fails.
 
 Output:
 error: operation failed: Lost connection to destination host
​​";;RedHatEnterpriseLinux7/RHEL-120209
232;;;;;;;;;4;"On source host, check the output of ""virsh event V --loop --all"" ";"Output:
 event 'migration-iteration' for domain V: iteration: '1'";;RedHatEnterpriseLinux7/RHEL-120209
232;;;;;;;;;5;"On target host, check the output of ""virsh event V --loop --all""  
​​";"Output:
 event 'agent-lifecycle' for domain V: state: 'disconnected' reason: 'domain started'
 event 'lifecycle' for domain V: Started Migrated
 event 'lifecycle' for domain V: Stopped Destroyed";;RedHatEnterpriseLinux7/RHEL-120209
232;;;;;;;;;6;"On source host, check libvirtd log:
 
* # grep -E 'qemuProcessHandleMigrationStatus|qemuMonitorGetMigrationStats' /var/log/libvirt/libvirtd.log
";"""qemuMonitorGetMigrationStats'"" doesn't appear every 50ms in libvirt log, this means Libvirtd get events for migration status changes, instead of polling for the status every 50ms().
 
 Output:
 2017-06-02 11:04:55.710+0000: 27011: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7f8dc82c3c40 V changed state to setup
 2017-06-02 11:04:55.724+0000: 27011: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7f8dc82c3c40 V changed state to active
 2017-06-02 11:05:29.823+0000: 27011: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7f8dc82c3c40 V changed state to cancelling
 2017-06-02 11:05:29.833+0000: 27011: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7f8dc82c3c40 V changed state to cancelled
​​";;RedHatEnterpriseLinux7/RHEL-120209
232;;;;;;;;;7;"On target host, check libvirtd log: 
* # grep -E 'qemuProcessHandleMigrationStatus|qemuMonitorGetMigrationStats' /var/log/libvirt/libvirtd.log
";"""qemuMonitorGetMigrationStats'"" doesn't appear every 50ms in libvirt log, this means Libvirtd get events for migration status changes, instead of polling for the status every 50ms().
 
 Output:
 2017-06-02 11:04:55.644+0000: 36195: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7f5aa033de50 V changed state to setup
 2017-06-02 11:04:55.707+0000: 36195: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7f5aa033de50 V changed state to active";;RedHatEnterpriseLinux7/RHEL-120209
233;RHEL-120210;[Migration][event] Check event during live migration - migration succeeds with I/O error - test with qemu-kvm-rhev - bug 1212077;N/A;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;On source host, start a guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL-120210
233;;;;;;;;;2;"On both source and target host, monitor the guest event:
 
* # virsh event V --loop --all
";​​;;RedHatEnterpriseLinux7/RHEL-120210
233;;;;;;;;;3;"On source host, do live migration and produce I/O error during migration.
 
* # virsh migrate V qemu+ssh://10.66.6.6/system --live
* For how to produce I/O error, refer to:
RHEL7-16714 - [Storage][negative] check guest status when overcommit the disk
";Migration succeeds;;RedHatEnterpriseLinux7/RHEL-120210
233;;;;;;;;;4;"On source host, check the output of ""virsh event V --loop --all"" ";"event 'io-error' for domain V: /var/lib/libvirt/images/mypool/disk1.img (virtio-disk1) pause
 event 'io-error-reason' for domain V: /var/lib/libvirt/images/mypool/disk1.img (virtio-disk1) pause due to enospc
 event 'lifecycle' for domain V: Suspended I/O Error
 event 'io-error' for domain V: /var/lib/libvirt/images/mypool/disk1.img (virtio-disk1) pause
 event 'io-error-reason' for domain V: /var/lib/libvirt/images/mypool/disk1.img (virtio-disk1) pause due to enospc
 event 'migration-iteration' for domain V: iteration: '2'
 event 'migration-iteration' for domain V: iteration: '3'
 event 'migration-iteration' for domain V: iteration: '4'
 event 'lifecycle' for domain V: Stopped Migrated
 event 'job-completed' for domain V:
     operation: 5
     time_elapsed: 248552
     time_elapsed_net: 248548
     downtime: 106
     downtime_net: 102
     setup_time: 34
     data_total: 1208827904
     data_processed: 263095365
     data_remaining: 0
     memory_total: 1208827904
     memory_processed: 263095365
     memory_remaining: 0
     memory_bps: 1082165
     memory_constant: 258641
     memory_normal: 63535
     memory_normal_bytes: 260239360
     memory_dirty_rate: 0
     memory_iteration: 4
     disk_total: 0
     disk_processed: 0
     disk_remaining: 0";;RedHatEnterpriseLinux7/RHEL-120210
233;;;;;;;;;5;"On target host, check the output of ""virsh event V --loop --all"" ";"Output:
 event 'agent-lifecycle' for domain V: state: 'disconnected' reason: 'domain started'
 event 'lifecycle' for domain V: Started Migrated
 event 'agent-lifecycle' for domain V: state: 'disconnected' reason: 'channel event'
 event 'lifecycle' for domain V: Resumed Unpaused
 event 'lifecycle' for domain V: Resumed Migrated
 event 'agent-lifecycle' for domain V: state: 'connected' reason: 'channel event' ";;RedHatEnterpriseLinux7/RHEL-120210
233;;;;;;;;;6;"On source host, check libvirtd log:
 
 
 
* # grep -E 'qemuProcessHandleMigrationStatus|qemuMonitorGetMigrationStats' /var/log/libvirt/libvirtd.log
";"""qemuMonitorGetMigrationStats'"" doesn't appear every 50ms in libvirt log, this means Libvirtd get events for migration status changes, instead of polling for the status every 50ms().
 
 Output:
 2017-07-01 01:02:28.247+0000: 1259: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7fdd0c011660 V changed state to setup
 2017-07-01 01:02:28.281+0000: 1259: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7fdd0c011660 V changed state to active
 2017-07-01 01:06:34.882+0000: 1259: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7fdd0c011660 V changed state to completed";;RedHatEnterpriseLinux7/RHEL-120210
233;;;;;;;;;7;"On target host, check libvirtd log:
 
 
 
* # grep -E 'qemuProcessHandleMigrationStatus|qemuMonitorGetMigrationStats' /var/log/libvirt/libvirtd.log
";"""qemuMonitorGetMigrationStats'"" doesn't appear every 50ms in libvirt log, this means Libvirtd get events for migration status changes, instead of polling for the status every 50ms().
 
 Output:
 2017-07-01 01:02:27.814+0000: 30648: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7f4788370bc0 V changed state to setup
 2017-07-01 01:02:28.240+0000: 30648: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7f4788370bc0 V changed state to active
 2017-07-01 01:06:34.893+0000: 30648: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7f4788370bc0 V changed state to completed";;RedHatEnterpriseLinux7/RHEL-120210
234;RHEL-120211;[Migration] Suspend&resume management app(virsh client) during Perform Phase of live migration - managed direct migration;Suspend&resume management app(virsh client) during normal live migration;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Disable the keepalive mech in both source and target.
 
* # vim /etc/libvirt/libvirtd.conf
keepalive_interval = -1

 
* # systemctl restart libvirtd
";"
 
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL-120211
234;;;;;;;;;2;On source host, start a guest with disk on shared storage;​​;;RedHatEnterpriseLinux7/RHEL-120211
234;;;;;;;;;3;"Migrate the guest from host1 to host2:
 
* # virsh migrate-setspeed vm1 1;  virsh migrate vm1 --live qemu+ssh://10.66.93.197/system --verbose
";​​;;RedHatEnterpriseLinux7/RHEL-120211
234;;;;;;;;;4;"Before migration completes, when the progress  is >=1% and << 100%(migration is in perform phase at this time), suspend virsh client by:
 
* Press ""Ctrl+Z""
";​​;;RedHatEnterpriseLinux7/RHEL-120211
234;;;;;;;;;5;Wait a while,(when the migration process is almost finished), check guest status.;"The guest on source and target are both in paused status. 
 
 (This is because the managed direct migration process is controlled by virsh client and can't complete without virsh client).";;RedHatEnterpriseLinux7/RHEL-120211
234;;;;;;;;;6;"Resume virsh client in foreground:
 
* # fg

​​";"The migration can continue to complete.
 
 Output:
 virsh migrate vm1 --live qemu+ssh://10.66.93.197/system --verbose
 Migration: [100%]";;RedHatEnterpriseLinux7/RHEL-120211
234;;;;;;;;;7;"After migration completes,check guest status on both hosts:
 
* #virsh list
";Guest is running on target host, and is shutoff or doesn't exist on source host(depends on whether it is persistent on source before migration);;RedHatEnterpriseLinux7/RHEL-120211
235;RHEL-120213;[Migration] Suspend&resume management app(virsh client) during Perform Phase of live migration - p2p migration;Suspend&resume management app(virsh client) during p2p live migration;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;On source host, start a guest with disk on shared storage;​​;Test Case;RedHatEnterpriseLinux7/RHEL-120213
235;;;;;;;;;2;"Migrate the guest from host1 to host2:
 
* # virsh migrate vm1 --live qemu+ssh://10.66.93.197/system --verbose --p2p
";​​;;RedHatEnterpriseLinux7/RHEL-120213
235;;;;;;;;;3;"Before migration completes, when the progress  is >=1% and << 100%(migration is in perform phase at this time), suspend virsh client by:
 
* Press ""Ctrl+Z"" 
";​​;;RedHatEnterpriseLinux7/RHEL-120213
235;;;;;;;;;4;Wait a while,(when the migration process is almost finished), check guest status.;"The guest is shutoff on source host and running on target host, which means that migration is completed successfully. 
 (This is because that p2p migration doesn't need virsh client any more after the migration is initiated ) ";;RedHatEnterpriseLinux7/RHEL-120213
236;RHEL-120232;[Migration] Migrate vm with  hotplugged disks;Migrate vm with hotplugged virtio NICs and hotplugged disks;Fangge Jin (fjin);High;Positive;Automated;;1;"1. Start a domain;
 # virsh start <domain>
 
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-120232
236;;;;;;;;;2;"2. Create a disk on shared storage;
 
* # dd if=/dev/zero of=/path/to/shared/disk2.dsk bs=1  count=1 seek=20G
";Make sure in guest user can write data to the disks.;;RedHatEnterpriseLinux7/RHEL-120232
236;;;;;;;;;3;"3. Hotplug a disk to the domain:
 
* # cat disk.xml
<disk type='file' device='disk'>
 <driver name='qemu' type='raw' **cache='none'**/>
 <source file='/path/to/shared/disk2.dsk'/>
 <target dev='vdb' bus='virtio'/>
 </disk>
* # virsh attach-device $guest disk.xml
";​​;;RedHatEnterpriseLinux7/RHEL-120232
236;;;;;;;;;4;"4. Live migrate the domain;
 
* # virsh migrate --live <domain> qemu+ssh://host2/system
";The live migration should successfully finish and the hotplugged disk should be accessible in the domain.;;RedHatEnterpriseLinux7/RHEL-120232
237;RHEL-120247;[Migration][--copy-storage-inc] Copy only the top image for storage migration - without backing chain - pre-create top image  on target manually;"Check migrate guest with option copy-storage-inc.
 Bug 1219541 - virsh migrate --copy-storage-all fails to preserve sparse disk image. So as to ""--copy-storate-inc""";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Prepare a non-shared source image file on source host, and create a image file on target host with same name and same size:
 
* #qemu-img create /var/lib/libvirt/images/RHEL-Server-6.3-64-virtio.qcow2 -f qcow2 20G
";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-120247
237;;;;;;;;;2;"On source host, start a guest with virtual disk ""/var/lib/libvirt/images/RHEL-Server-6.3-64-virtio.qcow2""";​​;;RedHatEnterpriseLinux7/RHEL-120247
237;;;;;;;;;3;"Check the image file info on source host:
 
* #qemu-img info /var/lib/libvirt/images/RHEL-Server-6.3-64-virtio.qcow2
";​​;;RedHatEnterpriseLinux7/RHEL-120247
237;;;;;;;;;4;"* # virsh migrate r7raw qemu+ssh://10.66.6.6/system --live --verbose --copy-storage-inc
";"Migration succeed.
​​";;RedHatEnterpriseLinux7/RHEL-120247
237;;;;;;;;;5;"Check the image file info on target host:
 
* #qemu-img info /var/lib/libvirt/images/RHEL-Server-6.3-64-virtio.qcow2
";"And the image file disk size on target host is same as source.
 
 Output:
 /var/lib/libvirt/images/RHEL-Server-6.3-64-virtio.qcow2
 file format: qcow2
 virtual size: 20G (21474836480 bytes)
 disk size: 2.9G
 cluster_size: 65536";;RedHatEnterpriseLinux7/RHEL-120247
237;;;;;;;;;6;Do disk I/O operation in guest;Guest disk can be read/written;;RedHatEnterpriseLinux7/RHEL-120247
238;RHEL-120248;[Migration][--copy-storage-inc] Copy only the top image for storage migration - without backing chain - pre-create a smaller top image on target manually;Migration will fail if image on target is smaller;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Prepare a non-shared source image file on source host, and create a image file on target host with same name and a smaller size:
 On source:
 
* #qemu-img create /var/lib/libvirt/images/RHEL-Server-6.3-64-virtio.qcow2 -f qcow2 20G
On target:
 
* #qemu-img create /var/lib/libvirt/images/RHEL-Server-6.3-64-virtio.qcow2 -f qcow2 10G (smaller than 20G)
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-120248
238;;;;;;;;;2;Start a guest with disk /var/lib/libvirt/images/RHEL-Server-6.3-64-virtio.qcow2;​​;;RedHatEnterpriseLinux7/RHEL-120248
238;;;;;;;;;3;"Do migration: 
 
* # virsh migrate r7raw qemu+ssh://10.66.6.6/system --live --verbose --copy-storage-inc
 ";"Migration failed because the image file on target host is smaller than source.
 
 Output:
      error: internal error: info migration reply was missing return status";;RedHatEnterpriseLinux7/RHEL-120248
239;RHEL-120249;[Migration][--copy-storage-inc] Copy only the top image for storage migration - with backing chain - without pre-creating image on target manually - not supported;"Storage migration with with --copy-storage-inc - without pre-creating inc image manually on target
 Bug 1249587 - ""migrate --copy-storage-inc"" doesn't handle the image backing file ";Fangge Jin (fjin);High;Negative;Not Automated;;1;"1. Prepare an image for guest installed with qcow2 type and put it in shared nfs
 
* #qemu-img info /nfs/RHEL-Server-6.3-64-virtio.qcow2 /var/lib/libvirt/migrate/RHEL-Server-6.3-64-virtio.qcow2
file format: qcow2
 virtual size: 20G (21474836480 bytes)
 disk size: 2.9G
 cluster_size: 65536";​​;Test Case;RedHatEnterpriseLinux7/RHEL-120249
239;;;;;;;;;2;"2. Create 2 image base on above image on source host in non-shared dir :
 
* # qemu-img create /var/lib/libvirt/images/rhel6u3-mig.qcow2 -f qcow2 -b /nfs/RHEL-Server-6.3-64-virtio.qcow2

 
* # qemu-img info /var/lib/libvirt/images/rhel6u3-mig.qcow2
image: /var/lib/libvirt/images/rhel6u3-mig.qcow2
 file format: qcow2
 virtual size: 20G (21474836480 bytes)
 disk size: 136K
 cluster_size: 65536
 backing file: /nfs/RHEL-Server-6.3-64-virtio.qcow2";​​;;RedHatEnterpriseLinux7/RHEL-120249
239;;;;;;;;;3;"3. Start a guest using virtual disk **/var/lib/libvirt/images/rhel6u3-mig.qcow2** on source host
 
* # virsh start rhel6u3
";​​;;RedHatEnterpriseLinux7/RHEL-120249
239;;;;;;;;;4;"Do migration:
 
* # virsh migrate --live --copy-storage-inc rhel6u3 qemu+ssh://{target ip}/system

​​";"Output:
 error: Operation not supported: pre-creation of storage targets for incremental storage migration is not supported";;RedHatEnterpriseLinux7/RHEL-120249
240;RHEL-120255;[Migration][--copy-storage-all] Copy the whole image chain for storage migration - one disk - remote shared storage - without <shareable/>;Storage migration will fail if disk is on shared nfs storage which are accessible on both hosts;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"On source host, prepare a guest with virtual disk on shared nfs storage:
 
* # virsh domblklist foo
Target     Source
 ------------------------------------------------
 vdb        /nfs/fjin/test1.qcow2";​​;Test Case;RedHatEnterpriseLinux7/RHEL-120255
240;;;;;;;;;2;"Make sure /nfs/fjin/test1.qcow2 is also accessible on target host:
 
* # file /nfs/fjin/test1.qcow2
";​​;;RedHatEnterpriseLinux7/RHEL-120255
240;;;;;;;;;3;"Do storage migration:
 
* # virsh migrate foo qemu+ssh://intel-i72600-03.qe.lab.eng.nay.redhat.com/system --copy-storage-all --live --verbose
";"Since RHEL7.5, migration fails because source and target qemu can't open vdb at the same time:
 
* error: internal error: unable to execute QEMU command 'nbd-server-add': Block node is read-only
Since RHEL7.5, migration can succeed only when the disk is raw format and has <shareable/> flag, but we don't need to test this:
 
*     <disk type='file' device='disk'>
       <driver name='qemu' type='raw' cache='none'/>
       <source file='/nfs/fjin/shareable.iso'/>
       <shareable/>

 Before RHEL7.5, migration can succeed.";;RedHatEnterpriseLinux7/RHEL-120255
241;RHEL-120256;[Migration][--copy-storage-all][raw] Storage migration with sparse raw image - pre-create disk image of same size on target host manually;"Check storage migration with sparse disk image.
 Bug 1219541 - virsh migrate --copy-storage-all fails to preserve sparse disk image ";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Start a guest with local image in sparse raw format:
* #  qemu-img info /var/lib/libvirt/images/V-raw.img 
image: /var/lib/libvirt/images/V-raw.imgfile 
 format: raw
 virtual size: 5.0G (5368709120 bytes)
 disk size: 3.6G

Note:
 For sparse raw img, disk size < virtual size
 ";​​;Test Case;RedHatEnterpriseLinux7/RHEL-120256
241;;;;;;;;;2;"On target, pre-create an raw image
* # qemu-img create V-raw.img 5g
Formatting 'V-raw.img', fmt=raw size=5368709120

* # qemu-img info /var/lib/libvirt/images/V-raw.img 
image: /var/lib/libvirt/images/V-raw.img
 file format: raw
 virtual size: 5.0G (5368709120 bytes)
 disk size: 0              
";​​;;RedHatEnterpriseLinux7/RHEL-120256
241;;;;;;;;;3;"Before migration, create a file in guest:
 
* # touch test
";​​;;RedHatEnterpriseLinux7/RHEL-120256
241;;;;;;;;;4;"Do copy-storage migration
* # virsh migrate V-raw --live qemu+ssh://{target_ip}/system --verbose  --copy-storage-all
";​​;;RedHatEnterpriseLinux7/RHEL-120256
241;;;;;;;;;5;"After migration, check image info on target host:
* # qemu-img info /var/lib/libvirt/images/V-raw.img 
       ";"disk size is smaller than 5G.
 
 Output:
 image: /var/lib/libvirt/images/V-raw.img
 file format: raw
 virtual size: 5.0G (5368709120 bytes)
 disk size: 1.3G    ";;RedHatEnterpriseLinux7/RHEL-120256
241;;;;;;;;;6;"After migration, check file in guest:
 
* # ls test
";File test exists;;RedHatEnterpriseLinux7/RHEL-120256
242;RHEL-120257;[Migration][--copy-storage-all] Cancel storage migration by Ctrl+C;[--copy-storage-all] Cancel storage migration by Ctrl+C;Fangge Jin (fjin);High;Positive;Automated;;1;"Start a guest on source host whose disk image is only accessible on source host.
 
 
* # virsh domblklist foo
Target     Source
 ------------------------------------------------
 vda        /var/lib/libvirt/images/full.qcow2";​​;Test Case;RedHatEnterpriseLinux7/RHEL-120257
242;;;;;;;;;2;"Do migration with
 
* # virsh migrate --verbose --live --persistent guest qemu+ssh://{target ip}/system --copy-storage-all
";​​;;RedHatEnterpriseLinux7/RHEL-120257
242;;;;;;;;;3;"During storage migration phase, check migration port on source or target:
 
* # netstat -tunap|grep 4915
";"Port 49153 is used for storage migation, which is in range 49152~49215
 
 Output(on target):
 tcp6       0      0 :::49152                :::*                    LISTEN      13585/qemu-kvm      
 tcp6       0      0 :::49153                :::*                    LISTEN      13585/qemu-kvm      
 tcp6       0      0 10.66.144.20:49153      10.66.144.32:56732      ESTABLISHED 13585/qemu-kvm    
 
 Output(on source):
 tcp        0 344388 10.66.144.32:56732       10.66.144.20:49153       ESTABLISHED 4192/qemu-kvm";;RedHatEnterpriseLinux7/RHEL-120257
242;;;;;;;;;4;Before migration completes, abort it with Ctrl+c;Migration should be canceled;;RedHatEnterpriseLinux7/RHEL-120257
242;;;;;;;;;5;"Do migration again: 
* # virsh migrate --verbose --live --persistent guest qemu+ssh://{target ip}/system --copy-storage-all
";Migration succeeds;;RedHatEnterpriseLinux7/RHEL-120257
242;;;;;;;;;6;"During storage migration phase, check migration port on source or target:
 
* # netstat -tunap|grep 4915
";Same port as last migration is used, which proves that migration port is released correctly when cancelling storage migration;;RedHatEnterpriseLinux7/RHEL-120257
243;RHEL-120258;[Migration][--copy-storage-inc] Cancel storage migration by Ctrl+C;[--copy-storage-inc] Cancel storage migration by Ctrl+C;Fangge Jin (fjin);Medium;Positive;Automated;;1;Retest case RHEL-120257 with --copy-storage-inc ;​​;Test Case;RedHatEnterpriseLinux7/RHEL-120258
244;RHEL-120259;[Migration][--copy-storage-inc][raw] Storage migration with sparse raw image - without pre-creating disk image on target host manually;[--copy-storage-inc] Storage migration with sparse raw image - without pre-creating disk image on target host manually;Fangge Jin (fjin);Medium;Positive;Automated;;1;Retest case RHEL7-19003 with --copy-storage-inc;​​;Test Case;RedHatEnterpriseLinux7/RHEL-120259
245;RHEL-120327;[Migration] Migrate vm with memory_size != total_of_numa_size - from older version to RHEL7.2(or newer version) -  qemu-kvm;Bug 1252685 - Migration from RHEL6 to RHEL7 failed when set memory size != total_of_numa_memory.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1.Prepare a running guest with the following settings on rhel7.0 host:
 
* XML example:
<memory unit='KiB'>1000448</memory>  
 <currentMemory unit='KiB'>1000000</currentMemory>   
 <cpu>     
   <numa>       
     <cell cpus='0-1' memory='1048576'/>     </numa>   
 </cpu>";​​;Test Case;RedHatEnterpriseLinux7/RHEL-120327
245;;;;;;;;;2;"Do migration:
* # virsh migrate test4 qemu+ssh://10.66.4.227/system --live --verbose
Migration: [100 %]
​​";​​;;RedHatEnterpriseLinux7/RHEL-120327
245;;;;;;;;;3;"After migration, check memory in dumpxml:
 
* # virsh dumpxml test4|grep -i memory

​​";"the memory size is not changed.
 
 Output:
   <memory unit='KiB'>1000448</memory>
   <currentMemory unit='KiB'>1000000</currentMemory>
       <cell id='0' cpus='0-1' memory='1048576' unit='KiB'/>";;RedHatEnterpriseLinux7/RHEL-120327
245;;;;;;;;;4;"And check the qemu command line:
 
* # ps aux|grep qemu-kvm
";"Output:
 /usr/libexec/qemu-kvm -name test4 -S -machine rhel6.6.0,accel=kvm,usb=off -m **977** -realtime mlock=off -smp 4,sockets=4,cores=1,threads=1 -numa node,nodeid=0,cpus=0-1,mem=1024";;RedHatEnterpriseLinux7/RHEL-120327
246;RHEL-120329;[Migration] Cross migration with macvtap network interface - bridge mode;Migrate vm with interface of bridge network - from RHEL6 to RHEL7;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Start a guest with interface of macvtap network on the rhel6 host
 
* #virsh dumpxml $guest_name
.....
 <interface type='network'>
 <mac address='52:54:00:26:ea:78'/>
 <source network='bridge-net'/>
 <target dev='macvtap0'/>
 <model type='virtio'/>
 <alias name='net0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 .....

​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-120329
246;;;;;;;;;2;"check the qemu command on rhel6 host 
* #ps -ef | grep $guest_name
";"Output:
 .......
 -device virtio-net-pci,__com_redhat_macvtap_compat=on,netdev=hostnet0,id=net0,mac=52:54:00:26:ea:78,bus=pci.0,addr=0x3
 .......";;RedHatEnterpriseLinux7/RHEL-120329
246;;;;;;;;;3;"migrate the guest to the target
 
* #virsh migrate --live $guest_name qemu+ssh://$target_ip/system --verbose
";"6. can migrate successful.
​​";;RedHatEnterpriseLinux7/RHEL-120329
246;;;;;;;;;4;"Check qemu command on RHEL7: 
* #ps -ef | grep $guest_name
";"But in qemu cmd line , no ""__com_redhat_macvtap_compat=on"" show on rhel7 host
 
 Output:
 
* -device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:54:00:15:5a:6f,bus=pci.0,addr=0x3
";;RedHatEnterpriseLinux7/RHEL-120329
247;RHEL-121205;[Migration][--offline][--persistent] Migrate vm definition - with memory device;Bug 1265049 - Offline migration failed with memory device when guest is shutoff.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Retest this case with memory device which has no address info: RHEL7-47439 - [Migration][--offline][--persistent] Migrate vm definition 
 
 Guest xml example:
  <maxMemory slots='16' unit='KiB'>152429568</maxMemory>
 …
     <numa>
      <cell id='0' cpus='0-3' memory='512000' unit='KiB'/>
      <cell id='1' cpus='4-7' memory='512000' unit='KiB'/>
     </numa>
 </cpu><memory model='dimm'>
    <target>
        <size unit='KiB'>256000</size>
        <node>0</node>
    </target>
 </memory>
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-121205
248;RHEL-122174;IDM-SSSD-TC: ldap_provider: failover: krb5provider One primary server down online after 30s;Verify TC : krb5provider One primary server down online after 30s;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122174
249;RHEL-122176;IDM-SSSD-TC: ldap_provider: failover: krb5provider IP Address in backup server;Verify TC : krb5provider IP Address in backup server;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122176
250;RHEL-122177;IDM-SSSD-TC: ldap_provider: failover: krb5provider Service lookup in primary;Verify TC : krb5provider Service lookup in primary;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122177
251;RHEL-122178;IDM-SSSD-TC: ldap_provider: failover: krb5provider Service lookup in backup server list;Verify TC : krb5provider Service lookup in backup server list;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122178
252;RHEL-122179;IDM-SSSD-TC: ldap_provider: failover: krb5provider Primary and Backup list empty;Verify TC : krb5provider Primary and Backup list empty;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122179
253;RHEL-122180;IDM-SSSD-TC: ldap_provider: failover: krb5provider Primary list is empty should default to Service lookup;Verify TC : krb5provider Primary list is empty should default to Service lookup;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122180
254;RHEL-122181;IDM-SSSD-TC: ldap_provider: failover: krb5provider Multiple Primary servers;Verify TC : krb5provider Multiple Primary servers;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122181
255;RHEL-122182;IDM-SSSD-TC: ldap_provider: failover: krb5provider Multiple Backup servers;Verify TC : krb5provider Multiple Backup servers;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122182
256;RHEL-122183;IDM-SSSD-TC: ldap_provider: failover: krb5provider Primary list has multiple servers and a service entry;Verify TC : krb5provider Primary list has multiple servers and a service entry;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122183
257;RHEL-122184;IDM-SSSD-TC: ldap_provider: failover: krb5provider Primary list has multiple servers and a service entry in between;Verify TC : krb5provider Primary list has multiple servers and a service entry in between;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122184
258;RHEL-122185;IDM-SSSD-TC: ldap_provider: failover: krb5provider Backup list has multiple servers and a service entry at the start;Verify TC : krb5provider Backup list has multiple servers and a service entry at the start;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122185
259;RHEL-122186;IDM-SSSD-TC: ldap_provider: failover: krb5provider Backup list has multiple krb5 servers and a service entry in between;Verify TC : krb5provider Backup list has multiple krb5 servers and a service entry in between;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122186
260;RHEL-122187;IDM-SSSD-TC: ldap_provider: failover: krb5provider Backup list has multiple krb5 servers and a service entry at the end;Verify TC : krb5provider Backup list has multiple krb5 servers and a service entry at the end;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122187
261;RHEL-122188;IDM-SSSD-TC: ldap_provider: failover: krb5provider Primary list has a typo and ends with service lookup;Verify TC : krb5provider Primary list has a typo and ends with service lookup;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122188
262;RHEL-122189;IDM-SSSD-TC: ldap_provider: failover: krb5provider Primary and Backup list has a typo and ends with appropriate uri bz921259;Verify TC : krb5provider Primary and Backup list has a typo and ends with appropriate uri bz921259;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122189
263;RHEL-122190;IDM-SSSD-TC: ldap_provider: failover: ldap chpass uri Server1 down Server2 online;Verify TC : ldap chpass uri Server1 down Server2 online;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122190
264;RHEL-122191;IDM-SSSD-TC: ldap_provider: failover: ldap chpass uri failover with single server different ports;Verify TC : ldap chpass uri failover with single server different ports;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122191
265;RHEL-122192;IDM-SSSD-TC: ldap_provider: failover: ldap chpass uri First Server in the list cannot be resolved;Verify TC : ldap chpass uri First Server in the list cannot be resolved;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122192
266;RHEL-122193;IDM-SSSD-TC: ldap_provider: failover: krb5 kpasswd Server1 down Server2 online;Verify TC : krb5 kpasswd Server1 down Server2 online;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122193
267;RHEL-122194;IDM-SSSD-TC: ldap_provider: failover: krb5 kpasswd failover with single server different ports;Verify TC : krb5 kpasswd failover with single server different ports;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122194
268;RHEL-122195;IDM-SSSD-TC: ldap_provider: failover: krb5 server Server1 down online after 96s;Verify TC : krb5 server Server1 down online after 96s;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122195
269;RHEL-122197;IDM-SSSD-TC: ldap_provider: failover: krb5 server failover with single server different ports;Verify TC : krb5 server failover with single server different ports;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122197
270;RHEL-122198;IDM-SSSD-TC: ldap_provider: failover: Infinite loop checking kerberos credentials bz795562;Verify TC : Infinite loop checking kerberos credentials bz795562;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122198
271;RHEL-122217;IDM-SSSD-TC: ldap_provider: failover: sssd does not try another server when unable to resolve hostname bz845251;Verify TC : sssd does not try another server when unable to resolve hostname bz845251;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122217
272;RHEL-122218;IDM-SSSD-TC: ldap_provider: failover: Failover does not happen from SRV to etc hosts bz1122873;Verify TC : Failover does not happen from SRV to etc hosts bz1122873;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122218
273;RHEL-122219;IDM-SSSD-TC: ldap_provider: failover: sssd does not handle kerberos server IP change bz721052;Verify TC : sssd does not handle kerberos server IP change bz721052;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122219
274;RHEL-122220;IDM-SSSD-TC: ldap_provider: failover: sssd is not closing sockets properly bz1313014;Verify TC : sssd is not closing sockets properly bz1313014;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122220
275;RHEL-122221;IDM-SSSD-TC: ldap_provider: failover: krb5 backup kpasswd Server1 down Server2 online;Verify TC : krb5 backup kpasswd Server1 down Server2 online;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122221
276;RHEL-122222;IDM-SSSD-TC: ldap_provider: failover: krb5 backup kpasswd failover with single server different ports;Verify TC : krb5 backup kpasswd failover with single server different ports;Amith Kumar Peethambaran (apeetham);High;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122222
277;RHEL-122223;IDM-SSSD-TC: ldap_provider: failover: Test Authentication Both Servers Available;Verify TC : Test Authentication Both Servers Available;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122223
278;RHEL-122224;IDM-SSSD-TC: ldap_provider: failover: Test Authentication Server 1 Unavailable;Verify TC : Test Authentication Server 1 Unavailable;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122224
279;RHEL-122225;IDM-SSSD-TC: ldap_provider: failover: Test Authentication Server 2 Unavailable;Verify TC : Test Authentication Server 2 Unavailable;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122225
280;RHEL-122226;IDM-SSSD-TC: ldap_provider: failover: Test Authentication Server 1 Unavailable Again;Verify TC : Test Authentication Server 1 Unavailable Again;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122226
281;RHEL-122227;IDM-SSSD-TC: ldap_provider: failover: Test Authentication Both Servers available Again;Verify TC : Test Authentication Both Servers available Again;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122227
282;RHEL-122228;IDM-SSSD-TC: ldap_provider: failover: iptables drop connection for server 1;Verify TC : iptables drop connection for server 1;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122228
283;RHEL-122229;IDM-SSSD-TC: ldap_provider: failover: iptables reject connection for server 1; Verity TC : ;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122229
284;RHEL-122230;IDM-SSSD-TC: ldap_provider: failover: ldap uri failover with single server different ports;Verify TC :;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122230
285;RHEL-122231;IDM-SSSD-TC: ldap_provider: failover: multiple srv records with same weight and priority bz1110247;Verify TC : multiple srv records with same weight and priority bz1110247;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122231
286;RHEL-122247;IDM-SSSD-TC: ldap_provider: failover: ldap connection expire timeout Single Domain;Verify TC : ldap connection expire timeout Single Domain;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122247
287;RHEL-122248;IDM-SSSD-TC: ldap_provider: failover: ldap connection expire timeout MultiDomain;Verfiy TC : ldap connection expire timeout MultiDomain;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122248
288;RHEL-122249;IDM-SSSD-TC: ldap_provider: failover: ldap chpass backup uri Server1 down Server2 online;Verify TC : ldap chpass backup uri Server1 down Server2 online;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122249
289;RHEL-122251;IDM-SSSD-TC: ldap_provider: failover: ldap chpass backup uri failover with single server different ports;Verify TC : ldap chpass backup uri failover with single server different ports;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122251
290;RHEL-122253;IDM-SSSD-TC: ldap_provider: failover: ldap chpass backup uri First Server in the list cannot be resolved;Verfiy TC : ldap chpass backup uri First Server in the list cannot be resolved;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122253
291;RHEL-122254;IDM-SSSD-TC: ldap_provider: failover: ldaprovider One primary server down online after 31s;Verify TC : ldaprovider One primary server down online after 31s;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122254
292;RHEL-122256;IDM-SSSD-TC: ldap_provider: failover: ldaprovider IP Address in backup server;Verify TC: ldaprovider IP Address in backup server;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122256
293;RHEL-122257;IDM-SSSD-TC: ldap_provider: failover: ldaprovider Service lookup in primary;Verify TC : ldaprovider Service lookup in primary;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122257
294;RHEL-122258;IDM-SSSD-TC: ldap_provider: failover: ldaprovider Service lookup in backup server list;Verify TC : ldaprovider Service lookup in backup server list;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122258
295;RHEL-122259;IDM-SSSD-TC: ldap_provider: failover: ldaprovider Primary and Backup list empty;Verify TC : ldaprovider Primary and Backup list empty;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122259
296;RHEL-122263;IDM-SSSD-TC: ldap_provider: failover: ldaprovider Primary list is empty should default to Service lookup;Verify TC : ldaprovider Primary list is empty should default to Service lookup;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122263
297;RHEL-122275;IDM-SSSD-TC: ldap_provider: failover: ldaprovider Multiple Primary servers;Verify TC : ldaprovider Multiple Primary servers;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122275
298;RHEL-122276;IDM-SSSD-TC: ldap_provider: failover: ldaprovider Multiple Backup servers;Verify TC : ldaprovider Multiple Backup servers;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122276
299;RHEL-122277;IDM-SSSD-TC: ldap_provider: failover: ldaprovider Primary list has multiple ldap uris and a service entry;Verify TC : ldaprovider Primary list has multiple ldap uris and a service entry;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122277
300;RHEL-122278;IDM-SSSD-TC: ldap_provider: failover: ldaprovider Primary list has multiple ldap uri and a service entry in between;Verify TC : ldaprovider Primary list has multiple ldap uri and a service entry in between;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122278
301;RHEL-122279;IDM-SSSD-TC: ldap_provider: failover: ldaprovider Backup list has multiple ldap uri and a service entry at the start;Verify TC : ldaprovider Backup list has multiple ldap uri and a service entry at the start;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122279
302;RHEL-122280;IDM-SSSD-TC: ldap_provider: failover: ldaprovider Backup list has multiple ldap uri and a service entry in between;Verify TC : ldaprovider Backup list has multiple ldap uri and a service entry in between;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122280
303;RHEL-122281;IDM-SSSD-TC: ldap_provider: failover: ldaprovider Backup list has multiple ldap uri and a service entry at the end;Verify TC : ldaprovider Backup list has multiple ldap uri and a service entry at the end;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122281
304;RHEL-122282;IDM-SSSD-TC: ldap_provider: failover: ldaprovider Primary list has a typo and ends with service lookup bz921259;Verify TC : ldaprovider Primary list has a typo and ends with service lookup bz921259;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122282
305;RHEL-122283;IDM-SSSD-TC: ldap_provider: failover: ldaprovider Primary and Backup list has a typo and ends with appropriate uri bz921259;Verify TC : ldaprovider Primary and Backup list has a typo and ends with appropriate uri bz921259;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122283
306;RHEL-122488;[Video devices] [virtio] Start a guest with virtio video -  default parameters;"Verify libvirt will set default parameters for virtio video when no parameters are set.
";Fangge Jin (fjin);High;Positive;Automated;;1;"Define or edit a guest with such setting:
 1) with virtio video
 2) don't set any parameter for the cirrus video";​​;Test Case;RedHatEnterpriseLinux7/RHEL-122488
306;;;;;;;;;2;"Dump guest xml:
 # virsh dumpxml vm";"Heads=1, and no memory related parameters in domain xml.
 
 Output:
 ...
     <video>
       <model type='virtio' heads='1' primary='yes'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0a' function='0x0'/>
     </video>
 ...";;RedHatEnterpriseLinux7/RHEL-122488
306;;;;;;;;;3;"Start guest
​​";​​;;RedHatEnterpriseLinux7/RHEL-122488
306;;;;;;;;;4;"Check qemu command line:
 # ps aux|grep qemu|grep virtio-vga
​​";"The qemu command line includes correct value for vram/heads:
 
 ... -device virtio-vga,id=video0,bus=pci.0,addr=0xa...
";;RedHatEnterpriseLinux7/RHEL-122488
306;;;;;;;;;5;"The following steps are optional:
​​";​​;;RedHatEnterpriseLinux7/RHEL-122488
306;;;;;;;;;6;"3. In guest, run "" lspci|grep VGA ""
 
​​";"Output:
 00:0a.0 VGA compatible controller: Red Hat, Inc. Virtio GPU (rev 01)";;RedHatEnterpriseLinux7/RHEL-122488
307;RHEL-122521;[Migration][--p2p] P2P migration - TLS destURI without sasl - virsh client on target host;N/A;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Start a guest on source(libn760.redhat.com)
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-122521
307;;;;;;;;;2;"do migration on target (libn755.redhat.com) host with command:
 
* # virsh -c qemu+tls://{source_hostname/ip}/system migrate --p2p guest qemu+tls://{target_hostname/ip}/system
";Migration succeeds;;RedHatEnterpriseLinux7/RHEL-122521
307;;;;;;;;;3;"Check guest status on both hosts:
 
* # virsh list --all
";Guest is running on target host;;RedHatEnterpriseLinux7/RHEL-122521
308;RHEL-122549;IDM-SSSD-TC: ldap_provider: failover: Read and use the TTL value when resolving a SRV query;"Verify TC : Read and use the TTL value when resolving a SRV query
This test case verifies bz1171378 and bz1199541

";Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-122549
309;RHEL-122571;AZURE-TC: Network;Azure-TC: [Network] Performance - iperf3 - Bandwidth;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;1. Prepare 2 VMs in the same size on Azure. One VM is client, the other one is server. The 2 VMs should be in the same virtual network and same subnet.;​​;Test Case;RedHatEnterpriseLinux7/RHEL-122571
309;;;;;;;;;2;"2. On the server VM, start the iperf3 server process:
 # iperf3 -s -p 8000 -D";​​;;RedHatEnterpriseLinux7/RHEL-122571
309;;;;;;;;;3;"3. On the client VM, use iperf3 client process to test the bandwidth:
 # iperf3 -c [Server Private IP] -i0 -V -p 8000 -t 30 -f m -b 0 -O 3 -Z -P [parallel] -u(only for udp) -l [buffer length] -w [window size] -M [MSS]";"...
 [ ID] Interval           Transfer     Bandwidth       Jitter    Lost/Total Datagrams
 ...
 [SUM]   0.00-4.98   sec  1.46 GBytes  2520 Mbits/sec  6.461 ms  73/24218 (0.3%)
 CPU Utilization: local/sender 28.5% (0.6%u/28.1%s), remote/receiver 14.8% (1.9%u/12.8%s)";;RedHatEnterpriseLinux7/RHEL-122571
309;;;;;;;;;4;4. Retry step 3 with different parallel/protocol/buffer length/window size/MSS.;​​;;RedHatEnterpriseLinux7/RHEL-122571
309;;;;;;;;;5;5. Retry step 3 and 4 with different VM size: A9,G5;​​;;RedHatEnterpriseLinux7/RHEL-122571
309;;;;;;;;;6;config;​​;;RedHatEnterpriseLinux7/RHEL-122571
310;RHEL-122572;AZURE-TC: Storage;"Azure-TC: [Storage] Performance - fio - Single disk/Multi-disk set as a RAID0 with filesystem - do ""read/write/randread/randwrite/rw/randrw"" block IO operation on single disk with filesystem, using 4k/16k/64k/256k block size and 1/8/64 iodepth.";Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"Prepare a VM, and attach a disk(1023G).
 Install fio in the VM.
 1. Login the VM. Format the disk and mount to a mount point.
 # fdisk /dev/sd*
 # mkfs.ext4 /dev/sd*1
 # mount /dev/sd*1 /mnt/newdisk1
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-122572
310;;;;;;;;;2;"2.
 # fio --rw=read --size=$diskSzie --bs=4k --iodepth=64 --ioscheduler=deadline --direct=1 --filename=/mnt/fio1 -ioengine=libaio --thread --group_reporting --numjobs=16 --name=test --runtime=1m --time_based ";​​;;RedHatEnterpriseLinux7/RHEL-122572
310;;;;;;;;;3;"3. repeat step 2 by different parameters
 *) rw, ""read write randread randwrite rw randrw""
 *) bs, ""4k 16k 64k 256k""
 *) iodepth, ""1 8 64""
";"In test result, we need to scratch the parameter: bw iops latency
 No regression";;RedHatEnterpriseLinux7/RHEL-122572
310;;;;;;;;;4;"4. repeat step1~3 with the VM size:
 Standard disk: D14_V2; D1_V2
 Premium: DS14; DS1";t;;RedHatEnterpriseLinux7/RHEL-122572
310;;;;;;;;;5;"5. Prepare a VM, and attach the max number of disks(each 1023G).
 Install fio in the VM.
 1. Login the VM. Format all the disk and set up all disks into a RAID0 group. Mount to a mount point.
 # mdadm -C --verbose /dev/md0 -l0 -n[disk number] /dev/sdc /dev/sdd ...
 Repeat step1~4";​​;;RedHatEnterpriseLinux7/RHEL-122572
310;;;;;;;;;6;config;​​;;RedHatEnterpriseLinux7/RHEL-122572
311;RHEL-122573;AZURE-TC: Validation;"Collect cpu, memory, cpu flags, boot up time(create/reboot) in different VM tiers and compare with Ubuntu
";Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"VM sizes:
         vm_size_list_general = [""B1s"", ""B8ms"", ""D2s_v3"", ""D64s_v3"", ""D2_v3"", ""D64_v3"", ""DS1_v2"", ""DS5_v2"", ""D1_v2"", ""D5_v2"", ""DS1"", ""DS4"", ""D1"", ""D4"", ""A1_v2"", ""A8m_v2"", ""A0"", ""A7"", ""Basic_A0"", ""Basic_A4""]
         vm_size_list_compute = [""F2s_v2"", ""F72s_v2"", ""F1s"", ""F16s"", ""F1"", ""F16""]
         vm_size_list_memory = [""E2s_v3"", ""E64s_v3"", ""E2_v3"", ""E64_v3"", ""M64s"", ""M128ms"", ""GS1"", ""GS5"", ""G1"", ""G5"", ""DS11_v2"", ""DS15_v2"", ""D11_v2"", ""D15_v2"", ""DS11"", ""DS14"", ""D11"", ""D14""]
         vm_size_list_memory_constrainedvCPUs = [""M128-32ms"", ""E64-32s_v3"", ""GS5-16"", ""DS14-8_v2""]
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-122573
311;;;;;;;;;2;config;​​;;RedHatEnterpriseLinux7/RHEL-122573
312;RHEL-122901;[Migration][domjobinfo] Query domain job info during and after live migration - transient domain;N/A;Fangge Jin (fjin);Low;Positive;Not Automated;;1;"Prepare a transient domain on source.
 
* # virsh create rhel.xml
Domain rhel created from rhel.xml";​​;Test Case;RedHatEnterpriseLinux7/RHEL-122901
312;;;;;;;;;2;" The following steps are same as RHEL7-17329 except one step:
 
 
* After migration completes, check domjobinfo on source host:
* # virsh domjobinfo rhel --completed
error: failed to get domain 'rhel'
 error: Domain not found: no domain with matching name 'rhel'
​​";​​;;RedHatEnterpriseLinux7/RHEL-122901
313;RHEL-122934;[update-device][boot order] update-device for interface defined with not supported live-update configurations - bug 1546971;Bug 1546971 - Cannot modify vNIC profile of running VM ---->  when we live update-device with a xml, the xml may include some old configs which do not support update-device. libvirt should pass the validate as we do not update the not-supported attributes this time.;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"1. start a vm with some 'not-supported' live update configurations defined in the interface, like mtu, driver, model type, boot order, target dev, rom

  # virsh dumpxml rhel | grep /interface -B18
     <interface type='network'>
       <mac address='52:54:00:1b:a5:b9'/>
       <source network='default' bridge='virbr0'/>
       <target dev='tar'/>
       <model type='virtio'/>
       <driver name='vhost' txmode='iothread' ioeventfd='on' event_idx='off' queues='5' rx_queue_size='256' tx_queue_size='256'>
         <host csum='off' gso='off' tso4='off' tso6='off' ecn='off' ufo='off' mrg_rxbuf='off'/>
         <guest csum='off' tso4='off' tso6='off' ecn='off' ufo='off'/>
       </driver>
       <tune>
         <sndbuf>1600</sndbuf>
       </tune>
       <link state='up'/>
       <mtu size='1500'/>
       <boot order='2'/>
       <alias name='ua-823c76fa-ee1d-4278-a613-2ba8ba179b61'/>
       <rom bar='on' file='/usr/share/ipxe/1af41000.rom'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>


 dump the xml into one file interface.xml, and just modify the 'link state'  which libvirt support its live update

  # virsh dumpxml rhel | grep /interface -B18 > interface.xml

 # vim interface.xml
 ...
 <link state='down'/>
 ...";​​;Test Case;RedHatEnterpriseLinux7/RHEL-122934
313;;;;;;;;;2;"2. update the interface
 # virsh update-device rhel interface.xml
 Device updated successfully
";"interface update successfully, should not report error like
 # virsh update-device rhel interface.xml
 error: Failed to update device from interface.xml
 error: unsupported configuration: boot order 2 is already used by another device";;RedHatEnterpriseLinux7/RHEL-122934
313;;;;;;;;;3;"3. # virsh dumpxml rhel 
";check the xml and compare with interface.xml, the link state is changed to down, other attributes do not change;;RedHatEnterpriseLinux7/RHEL-122934
314;RHEL-122940;[Migration][maxdowntime] Set and get max downtime for live migration - when guest is shutoff;As maxdowntime is set and queried by qemu monitor, so it can only be set and got when guest is running.;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;Prepare a shutoff guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL-122940
314;;;;;;;;;2;"Set maxdowntime:
 
* # virsh migrate-setmaxdowntime foo 100
";"Output:
 error: Requested operation is not valid: domain is not running";;RedHatEnterpriseLinux7/RHEL-122940
314;;;;;;;;;3;"Get maxdowntime:
 
* # virsh migrate-getmaxdowntime foo
";"Output:
 error: Requested operation is not valid: domain is not running";;RedHatEnterpriseLinux7/RHEL-122940
315;RHEL-122941;[Migration][maxdowntime] Do live migration with specified maxdowntime - set maxdowntime when guest is running and after migration starts;N/A;Fangge Jin (fjin);Critical;Positive;Not Automated;;1;"Start domain 'vm1' on host A
 
* # virsh start vm1
";"
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL-122941
315;;;;;;;;;2;"Add memory stress in guest:
 
* # stress --vm 27 --vm-bytes 256M --vm-keep --timeout 6000s
";​​;;RedHatEnterpriseLinux7/RHEL-122941
315;;;;;;;;;3;"Live migrate vm1 to host B:
 
* # virsh migrate --live vm1 qemu+ssh://{target ip}/system
";​​;;RedHatEnterpriseLinux7/RHEL-122941
315;;;;;;;;;4;"Before migration completes, get maxdowntime for migration:
 
* # virsh migrate-getmaxdowntime
300";​​;;RedHatEnterpriseLinux7/RHEL-122941
315;;;;;;;;;5;"Before migration completes, set maxdowntime for migration to small value: 
* 
* # virsh migrate-setmaxdowntime --domain vm1 --downtime 100
* # virsh migrate-getmaxdowntime vm1
100
Note: 100 means 100ms";The maxdowntime is set successfully.;;RedHatEnterpriseLinux7/RHEL-122941
315;;;;;;;;;6;"Wait for migration to complete and Check guest status during migration on source host.
 
 Note:
 If migration can't finish after many iterations, terminate the memory stress in guest.";"* Migration succeeds
* Guest status changes from running -> paused -> shutoff status on source host.
";;RedHatEnterpriseLinux7/RHEL-122941
315;;;;;;;;;7;"After migration completes, check domain job info:
 
* # virsh domjobinfo vm1 --completed
";"The total downtime should be around or less than 100ms.
 
 Output:
 Job type:         Completed   
 Operation:        Outgoing migration
 Time elapsed:     52346        ms
 Time elapsed w/o network: 52344        ms
 Data processed:   2.526 GiB
 Data remaining:   0.000 B
 Data total:       1008.820 MiB
 Memory processed: 2.526 GiB
 Memory remaining: 0.000 B
 Memory total:     1008.820 MiB
 Memory bandwidth: 50.027 MiB/s
 Dirty rate:       0            pages/s
 Page size:        4096         bytes
 Iteration:        6           
 Constant pages:   9027        
 Normal pages:     660880      
 Normal data:      2.521 GiB
 Total downtime:   157          ms
 Downtime w/o network: 155          ms
 Setup time:       6            ms";;RedHatEnterpriseLinux7/RHEL-122941
315;;;;;;;;;8;Check the /var/log/libvirt/libvirtd.log file on source host;"Qemu command 'migrate_set_downtime' should be executed successfully.
 
 Output:
 ...
 21:39:14.068: debug : qemuMonitorJSONCommandWithFd:217 : Send command
 '{""execute"":""migrate_set_downtime"",""arguments"":{""value"":0.100000}}' for write
 with FD -1
 ...";;RedHatEnterpriseLinux7/RHEL-122941
316;RHEL-122989;[Migration][speed] Do live migration with specified max bandwidth - set bandwidth when guest is running and after migration starts;"If users set migration bandwidth when guest is running, libvirt will set it both through qemu monitor and in vm private data structure. 
When user queries migration bandwidth, it is always retrieved from vm private data structure.";Fangge Jin (fjin);Critical;Positive;Not Automated;;1; Start a guest on source host;"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-122989
316;;;;;;;;;2;"Do live migration
 
* #time virsh migrate $guest --live qemu+ssh://{target ip}/system --verbose
";Migration can finish successfully;;RedHatEnterpriseLinux7/RHEL-122989
316;;;;;;;;;3;"During migration, get migration speed:
 
* # virsh migrate-getspeed $guest
8796093022207
";​​;;RedHatEnterpriseLinux7/RHEL-122989
316;;;;;;;;;4;"During migration, set migration speed:
 
* #virsh migrate-setspeed $guest 40
* #virsh migrate-getspeed $guest
40";Migration speed is set successfully.;;RedHatEnterpriseLinux7/RHEL-122989
316;;;;;;;;;5;"During migration, query domain job info:
 
* # virsh domjobinfo $guest
";"The memory bandwidth is less than or around 40 MiB/s.
 
 Output:
 Job type:         Unbounded   
 Operation:        Outgoing migration
 Time elapsed:     16862        ms
 Data processed:   162.322 MiB
 Data remaining:   843.238 MiB
 Data total:       1008.820 MiB
 Memory processed: 162.322 MiB
 Memory remaining: 843.238 MiB
 Memory total:     1008.820 MiB
 Memory bandwidth: 40.394 MiB/s
 Dirty rate:       0            pages/s
 Page size:        4096         bytes
 Iteration:        1           
 Constant pages:   918         
 Normal pages:     41471       
 Normal data:      161.996 MiB
 Expected downtime: 300          ms
 Setup time:       9            ms
​​";;RedHatEnterpriseLinux7/RHEL-122989
316;;;;;;;;;6;Check libvirtd log;"Output:
 2018-03-15 09:04:35.376+0000: 28799: info : qemuMonitorIOWrite:543 : QEMU_MONITOR_IO_WRITE: mon=0x7f5eb400d610 buf={""execute"":""migrate_set_speed"",""arguments"":{""value"":41943040},""id"":""libvirt-169""}
 
 Note:
 The value sent to qemu monitor is in Byte";;RedHatEnterpriseLinux7/RHEL-122989
317;RHEL-123073;[Migration][speed] Do live migration with specified max bandwidth - set bandwidth when guest is shutoff;"If user sets migration bandwidth when guest is shutoff, libvirt will store the bandwidth info in vm private data structure. Then user starts guest and do live migration. When live migration starts, libvirt will set migration bandwidth via qemu monitor.
When user queries migration bandwidth, it is always retrieved from vm private data structure.";Fangge Jin (fjin);High;Positive;Not Automated;;1;Prepare a shutoff guest on source host;​​;Test Case;RedHatEnterpriseLinux7/RHEL-123073
317;;;;;;;;;2;"Get migration bandwidth: 
* # virsh migrate-getspeed $guest
8796093022207";​​;;RedHatEnterpriseLinux7/RHEL-123073
317;;;;;;;;;3;"Set migration bandwidth: 
* #virsh migrate-setspeed $guest 30
* #virsh migrate-getspeed $guest
30

Note: 30 means 30MiB/s
​​";​​;;RedHatEnterpriseLinux7/RHEL-123073
317;;;;;;;;;4;"Start guest:
 
* # virsh start $guest
";​​;;RedHatEnterpriseLinux7/RHEL-123073
317;;;;;;;;;5;"Do live migration:
 
* #time virsh migrate $guest --live qemu+ssh://{target ip}/system --verbose
";Migration can finish successfully;;RedHatEnterpriseLinux7/RHEL-123073
317;;;;;;;;;6;"During migration, query domain job info:
 
* # virsh domjobinfo $guest
";"The memory bandwidth is less than or around 30 MiB/s.
 
 Output:
 Job type:         Unbounded   
 Operation:        Outgoing migration
 Time elapsed:     4507         ms
 Data processed:   126.089 MiB
 Data remaining:   62.195 MiB
 Data total:       1008.820 MiB
 Memory processed: 126.089 MiB
 Memory remaining: 62.195 MiB
 Memory total:     1008.820 MiB
 Memory bandwidth: 30.020 MiB/s
 Dirty rate:       0            pages/s
 Page size:        4096         bytes
 Iteration:        1           
 Constant pages:   210582      
 Normal pages:     31754       
 Normal data:      124.039 MiB
 Expected downtime: 300          ms
 Setup time:       11           ms";;RedHatEnterpriseLinux7/RHEL-123073
317;;;;;;;;;7;Check libvirtd log;"Output:
 2018-03-15 09:04:35.376+0000: 28799: info : qemuMonitorIOWrite:543 : QEMU_MONITOR_IO_WRITE: mon=0x7f5eb400d610 buf={""execute"":""migrate_set_speed"",""arguments"":{""value"":31457280},""id"":""libvirt-169""}
 
 Note:
 The value sent to qemu monitor is in Byte";;RedHatEnterpriseLinux7/RHEL-123073
318;RHEL-123136;[Migration][speed] Do live migration with default max bandwidth;The default max bandwidth for migration is 8796093022207 MiB/s.;Fangge Jin (fjin);High;Positive;Not Automated;;1;Start a guest on source host;​​;Test Case;RedHatEnterpriseLinux7/RHEL-123136
318;;;;;;;;;2;"Get migration bandwidth: 
* # virsh migrate-getspeed $guest
8796093022207
Note:
 8796093022207 is MiB/s
​​";​​;;RedHatEnterpriseLinux7/RHEL-123136
318;;;;;;;;;3;"Do live migration:
 
* #time virsh migrate $guest --live qemu+ssh://{target ip}/system --verbose
";Migration can finish successfully;;RedHatEnterpriseLinux7/RHEL-123136
318;;;;;;;;;4;"During migration, query domain job :
 
* # virsh domjobinfo $guest
";"The maximum network speed in our LAN is 1000Mb/s. So the max bandwidth can't be reached in our testing.
 
 Output:
 Job type:         Unbounded   
 Operation:        Outgoing migration
 Time elapsed:     116802       ms
 Data processed:   10.129 GiB
 Data remaining:   132.258 MiB
 Data total:       10.986 GiB
 Memory processed: 132.047 MiB
 Memory remaining: 132.258 MiB
 Memory total:     1008.820 MiB
 Memory bandwidth: 100.753 MiB/s
 Dirty rate:       0            pages/s
 Page size:        4096         bytes
 Iteration:        1           
 Constant pages:   191080      
 Normal pages:     33319       
 Normal data:      130.152 MiB
 Expected downtime: 300          ms
 Setup time:       13           ms";;RedHatEnterpriseLinux7/RHEL-123136
318;;;;;;;;;5;Check libvirtd log;"Output:
 2018-03-15 09:04:35.376+0000: 28799: info : qemuMonitorIOWrite:543 : QEMU_MONITOR_IO_WRITE: mon=0x7f5eb400d610 buf={""execute"":""migrate_set_speed"",""arguments"":{""value"":9223372036853727232},""id"":""libvirt-169""}
 
 Note:
 The value sent to qemu monitor is in Byte
 9223372036853727232 = 8796093022207*1024*1024";;RedHatEnterpriseLinux7/RHEL-123136
319;RHEL-123356;[maxCpus][pc] hotplug vcpu to maximum 240 - bug 1536306;Bug 1536306 - Part of the guest vcpus offline after hotplug 240 vcpus to guest  --> this is a kernel issue;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"** make sure your guest use the latest kernel **
 
 1. Start a rhel7.5 guest with max 240 vcpus, current 2 vcpus.
 <vcpu placement='static' current='2'>240</vcpu>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-123356
319;;;;;;;;;2;"2. Hotplug the vcpu to 240
 # virsh setvcpus r7-5 240 --live";hotplug succeed;;RedHatEnterpriseLinux7/RHEL-123356
319;;;;;;;;;3;"3. Check the guest xml, there are 240 enable vcpus.
 # virsh dumpxml r7-5|grep vcpu -A 5";"<vcpu placement='static'>240</vcpu>
  <vcpus>
    <vcpu id='0' enabled='yes' hotpluggable='no' order='1'/>
    <vcpu id='1' enabled='yes' hotpluggable='no' order='2'/>
    <vcpu id='2' enabled='yes' hotpluggable='yes' order='3'/>
    <vcpu id='3' enabled='yes' hotpluggable='yes' order='4'/>
    ......
    <vcpu id='239' enabled='yes' hotpluggable='yes' order='240'/>
  </vcpus>";;RedHatEnterpriseLinux7/RHEL-123356
319;;;;;;;;;4;"4. Login to the guest check the guest cpu, there are 240 online cpus. 
 # lscpu
​​";"Architecture:          x86_64
 CPU op-mode(s):        32-bit, 64-bit
 Byte Order:            Little Endian
 CPU(s):                240
 On-line CPU(s) list:   0-239
 ......
 (all vcpu should be online)";;RedHatEnterpriseLinux7/RHEL-123356
320;RHEL-123615;[Migration] Do live VM migration -  configure hostname to localhost.localdomain for target host;N/A;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;Start a guest on source host with disk located on nfs server;​​;Test Case;RedHatEnterpriseLinux7/RHEL-123615
320;;;;;;;;;2;"Migrate guest to target host:
 
* # virsh migrate --live $guest qemu+ssh://{hostB ip}/system
";"Report error:
 error: internal error: hostname on destination resolved to localhost, but migration requires an FQDN";;RedHatEnterpriseLinux7/RHEL-123615
320;;;;;;;;;3;"Migrate guest to target host with --migrateuri:
 
* # virsh migrate $guest qemu+ssh://{target_IP}/system --live --verbose --migrateuri tcp://{target_IP}
";Migration should succeed with no error;;RedHatEnterpriseLinux7/RHEL-123615
321;RHEL-123617;[Migration] Do live VM  migration - configure short hostname for target  host(without '.') - source can resolve target's hostname;N/A;Fangge Jin (fjin);High;Positive;Not Automated;;1;Start a guest on source host with disk located on nfs server;​​;Test Case;RedHatEnterpriseLinux7/RHEL-123617
321;;;;;;;;;2;"Migrate guest to target host::
 
* # virsh migrate $guest qemu+ssh://{target_IP}/system --live --verbose
";Migration should succeed with no error;;RedHatEnterpriseLinux7/RHEL-123617
321;;;;;;;;;3;"After migration completes, check guest status on source host:
 
* # virsh list --all
";Guest doesn't exist or is shutoff on source host.;;RedHatEnterpriseLinux7/RHEL-123617
321;;;;;;;;;4;"Check domain status on target host:
 
* # virsh list
 Id    Name                           State
 ----------------------------------------------------
  1     V                              running

 
* ping {guest_ip}
* Do some disk I/O operations in guest
";"Guest is running on target host and can respond 
";;RedHatEnterpriseLinux7/RHEL-123617
322;RHEL-123618;[Migration] Do live VM migration - configure hostname to localhost.localdomain for source host;N/A;Fangge Jin (fjin);High;Positive;Not Automated;;1;Start a guest on source host with disk located on nfs server;​​;Test Case;RedHatEnterpriseLinux7/RHEL-123618
322;;;;;;;;;2;"Migrate guest to target host:
 
* # virsh migrate $guest qemu+ssh://{target_IP}/system --live --verbose
";Migration should succeed with no error;;RedHatEnterpriseLinux7/RHEL-123618
322;;;;;;;;;3;"Check guest status on source hosts
 
* # virsh list
";Guest is shutoff or doesn't exist on source host;;RedHatEnterpriseLinux7/RHEL-123618
322;;;;;;;;;4;"Check guest status on target host:
 
* # virsh list
 Id    Name                           State
 ----------------------------------------------------
  1     V                              running

 
* ping {guest_ip}
* Do some disk I/O operations in guest
";"Guest is running on target host and can respond 
";;RedHatEnterpriseLinux7/RHEL-123618
323;RHEL-123619;"[Migration] Do live VM migration -  configure a short hostname for source host( without ""."" in hostname)";"Bug 729567 - Out of memory when DNS resolving fails during migration
 Bug 738915 - [FJ6.2 Bug]: [REG]While a host name is not resolved, live migration with migrateuri option fails. ";Fangge Jin (fjin);High;Positive;Not Automated;;1;Start a guest on source host with disk located on nfs server;​​;Test Case;RedHatEnterpriseLinux7/RHEL-123619
323;;;;;;;;;2;"Migrate guest to target host:
 
* # virsh migrate $guest qemu+ssh://{target_IP}/system --live --verbose
";Migration should succeed with no error;;RedHatEnterpriseLinux7/RHEL-123619
323;;;;;;;;;3;"After migration completes, check guest status on source host:
 
* # virsh list --all
";Guest doesn't exist or is shutoff on source host.;;RedHatEnterpriseLinux7/RHEL-123619
323;;;;;;;;;4;"Check domain status on target host:
 
* # virsh list
 Id    Name                           State
 ----------------------------------------------------
  1     V                              running

 
* ping {guest_ip}
* Do some disk I/O operations in guest
";"Guest is running on target host and can respond 
";;RedHatEnterpriseLinux7/RHEL-123619
324;RHEL-123620;"[Migration] Do live VM  migration - configure FQDN for source host(with ""."" in hostname)";N/A;Fangge Jin (fjin);High;Positive;Not Automated;;1;Start a guest on source host with disk located on nfs server;​​;Test Case;RedHatEnterpriseLinux7/RHEL-123620
324;;;;;;;;;2;"Migrate guest to target host:
 
* # virsh migrate $guest qemu+ssh://{target_IP}/system --live --verbose
";Migration should succeed with no error;;RedHatEnterpriseLinux7/RHEL-123620
324;;;;;;;;;3;"After migration completes, check guest status on source host:
 
* # virsh list --all
";Guest doesn't exist or is shutoff on source host.;;RedHatEnterpriseLinux7/RHEL-123620
324;;;;;;;;;4;"Check domain status on target host:
 
* # virsh list
 Id    Name                           State
 ----------------------------------------------------
  1     V                              running

 
* ping {guest_ip}
* Do some disk I/O operations in guest
";"Guest is running on target host and can respond 
";;RedHatEnterpriseLinux7/RHEL-123620
325;RHEL-123775;[Migration] Kill management app(virsh client) between Begin Phase and Perform Phase of live migration;"Bug 795305 - [FJ6.2 Bug]:[REG] terminate live migration with Ctrl+C; live migration of the same guest again fails";Fangge Jin (fjin);High;Positive;Manual Only;;1;"Note:
 This case is to test what will happen when migration is canceled at specific point. It is hard to catch this point, so we need the help of gdb. Because now migration have time limitation, so if you first do it and migration finished without break on second breakpoint, just do it again quickly (reduce the time of finding breakpoint line)
​​";"
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL-123775
325;;;;;;;;;2;Start guest on source host.;​​;;RedHatEnterpriseLinux7/RHEL-123775
325;;;;;;;;;3;"Start virsh using gdb, and set breakpoints before 
 
* # gdb virsh
* (gdb)br virDomainMigrateVersion3Full
* (gdb)r
";​​;;RedHatEnterpriseLinux7/RHEL-123775
325;;;;;;;;;4;"Do migration:
 
* virsh # migrate --live $guest qemu+ssh://{target_ip}/system --verbose
";Migration will stop at breakpoint;;RedHatEnterpriseLinux7/RHEL-123775
325;;;;;;;;;5;"Set another breakpoint just after ret = dconn->driver->domainMigratePrepare3Params 
 (This line is inside the function virDomainMigrateVersion3Full)
 
* (gdb) br 3062
(As the actual may change in new libvirt version, you can confirm the line with '(gdb) l')
 
* (gdb) c
";"Migration will stop at second breakpoint
 
 Note:
 If migration times out, redo the case.";;RedHatEnterpriseLinux7/RHEL-123775
325;;;;;;;;;6;"Quit gdb
 
* (gdb) q
";​​;;RedHatEnterpriseLinux7/RHEL-123775
325;;;;;;;;;7;"Do live migration again:
 
* # virsh migrate $guest qemu+ssh://{target_ip}/system --live --verbose
";"* Migration succeeds
* Should not get error like ""cannot acquire state change lock""
";;RedHatEnterpriseLinux7/RHEL-123775
326;RHEL-129845;[Migration] Reboot source host during live migration - virsh client on third host - enable libvirt-guests;N/A;Fangge Jin (fjin);High;Positive;Manual Only;;1;"Retest case RHEL7-17320 with extra steps:
 
* Start service libvirt-guests before migration
  * # systemctl start libvirt-guests
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-129845
326;;;;;;;;;2;"* Check guest status on source host after reboot source host
  * # virsh list --all --with-managed-save


​​";"Guest is saved.
 
 Output:
  Id    Name                           State
 ----------------------------------------------------
  -     foo                            shut off";;RedHatEnterpriseLinux7/RHEL-129845
326;;;;;;;;;3;"* Start guest on source host
  * # virsh start $guest
";Guest is restored to the state before rebooting host instead of fresh start;;RedHatEnterpriseLinux7/RHEL-129845
327;RHEL-130061;"[Migration] Kill SRC libvirtd at ""active"" status during Perform Phase of live migration";Bug 1561366 - DST libvirtd hangs sometimes if kill SRC libvirtd during tunnelled live migration - NEW;Fangge Jin (fjin);High;Negative;Not Automated;;1;"Start a domain;
 
* # virsh start <domain>
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-130061
327;;;;;;;;;2;"Start a live migration with low speed:
 
* # virsh migrate-setspeed <domain> 3
* # virsh migrate --live <domain> qemu+ssh://host2/system --verbose
";​​;;RedHatEnterpriseLinux7/RHEL-130061
327;;;;;;;;;3;"After guest data starts transfer(migration progress percent can be seen in terminal like:  [ 3 %]), and before source guest is paused, kill source libvirtd: 
 
  * 
* # kill -9 `pidof libvirtd`

";​​;;RedHatEnterpriseLinux7/RHEL-130061
327;;;;;;;;;4;Check migration status;"Migration fails and output error.
 
 Output:
 Migration: [ 46 %]error: Disconnected from qemu///system due to end of file
 error: End of file while reading data: Ncat: Broken pipe.: Input/output error";;RedHatEnterpriseLinux7/RHEL-130061
327;;;;;;;;;5;"Check guest status on target host:
 
* # virsh list
";Guest is not on target host.;;RedHatEnterpriseLinux7/RHEL-130061
327;;;;;;;;;6;"Check domain status on source host:
 
* # virsh list
 Id    Name                           State
 ----------------------------------------------------
  1     V                              running

 
* ping {guest_ip}
* Do some disk I/O operations in guest
";"Guest is running on source host and can respond 
";;RedHatEnterpriseLinux7/RHEL-130061
327;;;;;;;;;7;"Do migration again:
 
* # virsh migrate --live <domain> qemu+ssh://host2/system --verbose
";Migration succeeds;;RedHatEnterpriseLinux7/RHEL-130061
328;RHEL-130062;[Migration] Kill SRC libvirtd after Prepare Phase completes and before Perform Phase of live migration;"Kill source libvirtd during libvirt migration after Prepare Phase completes and before any data is transferred actually.
 Bug 728603 - guest may remain in existence on dst host if src libvirtd stopped during tunneled migration - ASSIGNED";Fangge Jin (fjin);High;Negative;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-130062
329;RHEL-130107;"[Migration] Kill SRC libvirtd after ""device"" status during Perform Phase of live migration";"Bug 1560854 - Guest is left paused on source host sometimes if kill source libvirtd during live migration         
Bug 1568407 - Guest is left paused on source host sometimes if kill source libvirtd during live migration due to QEMU image locking";Fangge Jin (fjin);High;Negative;Not Automated;;1;"Start a domain
 
* # virsh start <domain>
";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-130107
329;;;;;;;;;2;"Attach SRC libvirtd process to gdb and set breakpoint in function qemuMigrationPerformPhase:
 
* # gdb -p `pidof libvirtd`
* (gdb) l qemuMigrationPerformPhase
Note: in RHEL7.6, the function name changes to  qemuMigrationSrcPerformPhase
4993 {
 4994     virObjectEventPtr event = NULL;
 4995     int ret = -1;
 4996
 4997     /* If we didn't start the job in the begin phase, start it now. */
 4998     if (!(flags & VIR_MIGRATE_CHANGE_PROTECTION)) {
 4999         if (qemuMigrationJobStart(driver, vm, QEMU_ASYNC_JOB_MIGRATION_OUT) < 0)
 5000             goto cleanup;
 5001     } else if (!qemuMigrationJobIsActive(vm, QEMU_ASYNC_JOB_MIGRATION_OUT)) {
 5002         goto cleanup;
 (gdb) 
 5003     }
 5004
 5005     qemuMigrationJobStartPhase(driver, vm, QEMU_MIGRATION_PHASE_PERFORM3);
 5006     virCloseCallbacksUnset(driver->closeCallbacks, vm,
 5007                            qemuMigrationCleanup);
 5008
 5009     ret = doNativeMigrate(driver, vm, persist_xml, uri, cookiein, cookieinlen,
 5010                           cookieout, cookieoutlen,
 5011                           flags, resource, NULL, graphicsuri,
 5012                           nmigrate_disks, migrate_disks, compression, migParams);
 (gdb) 
 5013
 5014     if (ret < 0) {
 5015         if (qemuMigrationRestoreDomainState(conn, vm)) {
 5016             event = virDomainEventLifecycleNewFromObj(vm,
 5017                                                       VIR_DOMAIN_EVENT_RESUMED,
 5018                                                       VIR_DOMAIN_EVENT_RESUMED_MIGRATED);
 5019         }
 5020         goto endjob;
 5021     }
 5022

 
* (gdb) b qemu/qemu_migration.c:5014
 Breakpoint 1 at 0x7f0b71e30c1d: file qemu/qemu_migration.c, line 5014.
* (gdb) c
 Continuing.
";"
​​";;RedHatEnterpriseLinux7/RHEL-130107
329;;;;;;;;;3;" Do migration and Ctrl+Z when it is in perform phase(can see the progress percentage in shell):
 
* # virsh -c qemu+ssh://intel-i72600-03.qe.lab.eng.nay.redhat.com/system  ""migrate foo qemu+ssh://intel-e52650-16-2.englab.nay.redhat.com/system --live --verbose""
Migration: [  3 %]^Z
 [1]+  Stopped";"
​​";;RedHatEnterpriseLinux7/RHEL-130107
329;;;;;;;;;4;Wait until gdb hits breakpoint;"
​​";;RedHatEnterpriseLinux7/RHEL-130107
329;;;;;;;;;5;"Confirm migration has entered ""device"" status by checking source libvirtd.log";"Output:
 2018-07-27 01:41:19.388+0000: 9077: info : qemuMonitorJSONIOProcessLine:212 : QEMU_MONITOR_RECV_EVENT: mon=0x7fd1d4008260 event={""timestamp"": {""seconds"": 1532655679, ""microseconds"": 388296}, ""event"": ""MIGRATION"", ""data"": {""status"": ""device""}}
​​";;RedHatEnterpriseLinux7/RHEL-130107
329;;;;;;;;;6;" kill src libvirtd and quit gdb
 
* # pkill -9 libvirtd
* (gdb) q
";"
​​";;RedHatEnterpriseLinux7/RHEL-130107
329;;;;;;;;;7;"Recover ""virsh""
 
* # fg
";"Output:
 virsh -c qemu+ssh://intel-i72600-03.qe.lab.eng.nay.redhat.com/system ""migrate foo qemu+ssh://intel-e52650-16-2.englab.nay.redhat.com/system --live --verbose ""
 Migration: [100 %]error: Disconnected from qemu+ssh://intel-i72600-03.qe.lab.eng.nay.redhat.com/system due to end of file
 error: End of file while reading data: Ncat: Broken pipe.: Input/output error";;RedHatEnterpriseLinux7/RHEL-130107
329;;;;;;;;;8;"Check guest status on target host:
 
* # virsh list
";Guest is not on target host.;;RedHatEnterpriseLinux7/RHEL-130107
329;;;;;;;;;9;"Check domain status on source host:
 
* # virsh list
 Id    Name                           State
 ----------------------------------------------------
  1     V                              running

 
* ping {guest_ip}
* Do some disk I/O operations in guest
";"Guest is running on source host and can respond 
";;RedHatEnterpriseLinux7/RHEL-130107
329;;;;;;;;;10;"Do migration again:
 
* # virsh migrate --live <domain> qemu+ssh://host2/system --verbose
";Migration succeeds;;RedHatEnterpriseLinux7/RHEL-130107
330;RHEL-130259;[Migration] Kill qemu process on target host during Perform Phase of live migration;https://bugzilla.redhat.com/show_bug.cgi?id=1242904#c15 ;Fangge Jin (fjin);High;Negative;Not Automated;;1;"Retest case RHEL7-31564  with kill qemu process instead of libvirtd:
 
* # pkill -9 qemu-kvm
";"* Migration: [ 87 %]error: internal error: qemu unexpectedly closed the monitor: 2017-05-03T05:11:25.352567Z qemu-kvm: -chardev pty,id=charserial0: char device redirected to /dev/pts/6 (label charserial0) 2017-05-03T05:12:07.144431Z qemu-kvm: terminating on signal 15 from pid 74549 (<unknown process>)
";Test Case;RedHatEnterpriseLinux7/RHEL-130259
331;RHEL-130350;listing nwfilters for unprivileged daemon should not make libvirtd crash - bug 1522879;The unprivileged libvirtd does not support nwfilter config;Yalan Zhang (yalzhang);High;Positive;Manual Only;;1;"switch to a unprivileged account named test 
 # su - test
 
 $ virsh nwfilter-list;ps -ef | grep test | grep libvirtd | grep -v grep";"UUID                                  Name                 
 ------------------------------------------------------------------
 
 test     10000     1  0 15:24 ?        00:00:00 /usr/sbin/libvirtd --timeout=30
 
 
 (no nwfilter list out, and there is one libvirtd process owned by the unprevileged user. libvirtd should not crash)";Test Case;RedHatEnterpriseLinux7/RHEL-130350
332;RHEL-130437;[update-device] Remove the filterref filter for interface by update-device - bug 1202703;remove the referenced filter for the interface;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"**Scenario B, remove <filterref> without <parameter>**:
 [root@amd-b95-8-1 ~]# virsh dumpxml r65 | grep ""/interface"" -B7
 <interface type='network'>
 <mac address='52:54:00:6d:08:be'/>
 <source network='default'/>
 <target dev='vnet0'/>
 <filterref filter='clean-traffic'/>
 <alias name='net0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 
 [root@amd-b95-8-1 ~]# cat nic2.xml
 <interface type='network'>
 <mac address='52:54:00:6d:08:be'/>
 <source network='default'/>
 <target dev='vnet0'/>
 <alias name='net0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 
 [root@amd-b95-8-1 ~]# service libvirtd status
 libvirtd (pid 8347) is running...
 
​​";"For scenario B, remove <filterref> without <parameter>:
 **After doing update-device, libvirtd does not crash and the nwfilter can be removed from interface.**
 **";Test Case;RedHatEnterpriseLinux7/RHEL-130437
332;;;;;;;;;2;"[root@amd-b95-8-1 ~]# virsh update-device r65 nic2.xml
 Device updated successfully
 
 [root@amd-b95-8-1 ~]# service libvirtd status
 libvirtd (pid 8347) is running...";libvirtd should not crash and update-device return succeed;;RedHatEnterpriseLinux7/RHEL-130437
332;;;;;;;;;3;"check the xml, the filter is removed
 # virsh dumpxml r65 | grep /interface -B12";"<interface type='network'>
 <mac address='52:54:00:6d:08:be'/>
 <source network='default'/>
 <target dev='vnet0'/>
 <alias name='net0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>";;RedHatEnterpriseLinux7/RHEL-130437
332;;;;;;;;;4;check the rules, there should be no rules;"# ebtables -t nat -L
 Bridge table: nat
 
 Bridge chain: PREROUTING, entries: 1, policy: ACCEPT
 -j PREROUTING_direct
 
 Bridge chain: OUTPUT, entries: 1, policy: ACCEPT
 -j OUTPUT_direct
 
 Bridge chain: POSTROUTING, entries: 1, policy: ACCEPT
 -j POSTROUTING_direct
 
 Bridge chain: PREROUTING_direct, entries: 0, policy: RETURN
 
 Bridge chain: POSTROUTING_direct, entries: 0, policy: RETURN
 
 Bridge chain: OUTPUT_direct, entries: 0, policy: RETURN
​​";;RedHatEnterpriseLinux7/RHEL-130437
333;RHEL-130445;[update-device] add the filterref filter by update-device - Bug 1205042;add filterref filter for the interface;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"**Scenario C, add <filiterref> with <parameter>**:
 [root@amd-b95-8-1 ~]# virsh dumpxml r65 | grep ""/interface"" -B6
 <interface type='network'>
 <mac address='52:54:00:6d:08:be'/>
 <source network='default'/>
 <target dev='vnet0'/>
 <alias name='net0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 
 [root@amd-b95-8-1 ~]# vim nic1.xml
 [root@amd-b95-8-1 ~]# cat nic1.xml
 <interface type='network'>
 <mac address='52:54:00:6d:08:be'/>
 <source network='default'/>
 <target dev='vnet0'/>
 <alias name='net0'/>
 <filterref filter='clean-traffic'>
 <parameter name='IP' value='1.2.3.4'/>
 <parameter name='IP' value='1.2.3.5'/>
 </filterref>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 
 [root@amd-b95-8-1 ~]# virsh update-device r65 nic1.xml
 Device updated successfully
 
 [root@amd-b95-8-1 ~]# virsh dumpxml r65 | grep ""/interface"" -B10
 <interface type='network'>
 <mac address='52:54:00:6d:08:be'/>
 <source network='default'/>
 <target dev='vnet0'/>
 <filterref filter='clean-traffic'>
 <parameter name='IP' value='1.2.3.4'/>
 <parameter name='IP' value='1.2.3.5'/>
 </filterref>
 <alias name='net0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>";"**For scenario C, add <filiterref> with <parameter>**:
 After doing update-device
 [root@amd-b95-8-1 ~]# ebtables -t nat -L
 Bridge table: nat
 Bridge chain: PREROUTING, entries: 1, policy: ACCEPT
 -i vnet0 -j libvirt-I-vnet0
 Bridge chain: OUTPUT, entries: 0, policy: ACCEPT
 Bridge chain: POSTROUTING, entries: 1, policy: ACCEPT
 -o vnet0 -j libvirt-O-vnet0
 Bridge chain: libvirt-I-vnet0, entries: 9, policy: ACCEPT
 -j I-vnet0-mac
 -p IPv4 -j I-vnet0-ipv4-ip
 -p IPv4 -j ACCEPT
 -p ARP -j I-vnet0-arp-mac
 -p ARP -j I-vnet0-arp-ip
 -p ARP -j ACCEPT
 -p 0x8035 -j I-vnet0-rarp
 -p 0x835 -j ACCEPT
 -j DROP
 Bridge chain: libvirt-O-vnet0, entries: 4, policy: ACCEPT
 -p IPv4 -j O-vnet0-ipv4
 -p ARP -j ACCEPT
 -p 0x8035 -j O-vnet0-rarp
 -j DROP
 Bridge chain: I-vnet0-mac, entries: 2, policy: ACCEPT
 -s 52:54:0:6d:8:be -j RETURN
 -j DROP
 Bridge chain: I-vnet0-ipv4-ip, entries: 4, policy: ACCEPT
 -p IPv4 --ip-src 0.0.0.0 --ip-proto udp -j RETURN
 -p IPv4 --ip-src 1.2.3.4 -j RETURN
 -p IPv4 --ip-src 1.2.3.5 -j RETURN
 -j DROP
 Bridge chain: O-vnet0-ipv4, entries: 1, policy: ACCEPT
 -j ACCEPT
 Bridge chain: I-vnet0-arp-mac, entries: 2, policy: ACCEPT
 -p ARP --arp-mac-src 52:54:0:6d:8:be -j RETURN
 -j DROP
 Bridge chain: I-vnet0-arp-ip, entries: 3, policy: ACCEPT
 **-p ARP --arp-ip-src 1.2.3.4 -j RETURN **
 **-p ARP --arp-ip-src 1.2.3.5 -j RETURN **
 -j DROP
 Bridge chain: I-vnet0-rarp, entries: 2, policy: ACCEPT
 -p 0x8035 -s 52:54:0:6d:8:be -d Broadcast --arp-op Request_Reverse --arp-ip-src 0.0.0.0 --arp-ip-dst 0.0.0.0 --arp-mac-src 52:54:0:6d:8:be --arp-mac-dst 52:54:0:6d:8:be -j ACCEPT
 -j DROP
 Bridge chain: O-vnet0-rarp, entries: 2, policy: ACCEPT
 -p 0x8035 -d Broadcast --arp-op Request_Reverse --arp-ip-src 0.0.0.0 --arp-ip-dst 0.0.0.0 --arp-mac-src 52:54:0:6d:8:be --arp-mac-dst 52:54:0:6d:8:be -j ACCEPT
 -j DROP
 [root@amd-b95-8-1 ~]#
 **
 **";Test Case;RedHatEnterpriseLinux7/RHEL-130445
334;RHEL-130523;Dump network device xml info;Dump network device xml info;Jingjing Shao (jishao);High;Positive;Automated;;1;" 1.List the network device 
 # virsh nodedev-list --cap net
 
 
 
​​";" Output:
 net_eno1_44_37_e6_95_03_e4
 net_lo_00_00_00_00_00_00
 net_virbr0_nic_52_54_00_5a_14_cf";Test Case;RedHatEnterpriseLinux7/RHEL-130523
334;;;;;;;;;2;"2. # virsh nodedev-dumpxml net_eno1_44_37_e6_95_03_e4
​​";"Output:
 <device>
  <name>net_eno1_44_37_e6_95_03_e4</name>
  <path>/sys/devices/pci0000:00/0000:00:19.0/net/eno1</path>
   <parent>pci_0000_00_19_0</parent>
   <capability type='net'>
     <interface>eno1</interface>
     <address>44:37:e6:95:03:e4</address>
     <link speed='100' state='up'/>
     <feature name='rx'/>
     <feature name='tx'/>
     <feature name='sg'/>
     <feature name='gso'/>
     <feature name='gro'/>
     <feature name='rxvlan'/>
     <feature name='txvlan'/>
     <feature name='rxhash'/>
     <capability type='80203'/>
   </capability>
 </device>
 
 interface 
 address
 link (optional speed, state)
 feature(optional)
 rx,tx,sg, tso, ufo, gso, gro, lro, rxvlan, txvlan, ntuple, rxhash, rdma, txudptnl, switchdev, 
 capability  type = 80203/ 80211
​​";;RedHatEnterpriseLinux7/RHEL-130523
334;;;;;;;;;3;"3. # virsh nodedev-dumpxml net_eno1_44_37_e6_95_03_e4 > networkdevice.xml
     # virt-xml-validate  networkdevice.xml  nodedev
​​";"Output:
 networkdevice.xml   validates";;RedHatEnterpriseLinux7/RHEL-130523
335;RHEL-130526;Dump usb_device & usb xml info;"usb_device: Describes a device on the host's USB bus, based on its location within the bus, sub-elements includes: bus, device, product, vendor; usb: Describes a USB device, based on its advertised driver interface, sub-elements includes: number, class, subclass, protocol, description.
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;" 1. List usb_device 
 # virsh nodedev-list --cap usb_device
 
 
 
​​";" Output:
 usb_6_2
 usb_usb1
 usb_usb2
 usb_usb3
 usb_usb4
 usb_usb5
 usb_usb6
 usb_usb7
 usb_usb8";Test Case;RedHatEnterpriseLinux7/RHEL-130526
335;;;;;;;;;2;"2. Dump usb device xml info
 # virsh nodedev-dumpxml usb_usb1
​​";"Output:
 <device>
   <name>usb_usb1</name>  <path>/sys/devices/pci0000:00/0000:00:1a.7/usb1</path>
   <devnode type='dev'>/dev/bus/usb/001/001</devnode>
   <parent>pci_0000_00_1a_7</parent>
   <driver>
     <name>usb</name>
   </driver>
   <capability type='usb_device'>
     <bus>1</bus>
     <device>1</device>
     <product id='0x0002'>2.0 root hub</product>
     <vendor id='0x1d6b'>Linux Foundation</vendor>
   </capability>
 </device>
 
 (bus, device, product and  vendor should be exposed)
​​";;RedHatEnterpriseLinux7/RHEL-130526
335;;;;;;;;;3;for future reference (hub, mouse, keyboard);"# virsh nodedev-dumpxml usb_usb8
 <device>
   <name>usb_usb8</name>
  <path>/sys/devices/pci0000:00/0000:00:1d.2/usb8</path>
   <devnode type='dev'>/dev/bus/usb/008/001</devnode>
   <parent>pci_0000_00_1d_2</parent>
   <driver>
     <name>usb</name>
   </driver>
   <capability type='usb_device'>
     <bus>8</bus>
     <device>1</device>
     <product id='0x0001'>1.1 root hub</product>
     <vendor id='0x1d6b'>Linux Foundation</vendor>
   </capability>
 </device>
 
 # virsh nodedev-dumpxml usb_7_1
 <device>
   <name>usb_7_1</name>
   <path>/sys/devices/pci0000:00/0000:00:1d.1/usb7/7-1</path>
   <devnode type='dev'>/dev/bus/usb/007/002</devnode>
   <parent>usb_usb7</parent>
   <driver>
     <name>usb</name>
   </driver>
   <capability type='usb_device'>
     <bus>7</bus>
     <device>2</device>
     <product id='0x0324'>SK-2885 keyboard</product>
     <vendor id='0x03f0'>Hewlett-Packard</vendor>
   </capability>
 </device>
  
 # virsh nodedev-dumpxml usb_6_2
 <device>
   <name>usb_6_2</name>
   <path>/sys/devices/pci0000:00/0000:00:1d.0/usb6/6-2</path>
   <devnode type='dev'>/dev/bus/usb/006/003</devnode>
   <parent>usb_usb6</parent>
   <driver>
     <name>usb</name>
   </driver>
   <capability type='usb_device'>
     <bus>6</bus>
     <device>3</device>
     <product id='0xc018'>Optical Wheel Mouse</product>
     <vendor id='0x046d'>Logitech, Inc.</vendor>
   </capability>
 </device>
​​";;RedHatEnterpriseLinux7/RHEL-130526
335;;;;;;;;;4;"3. # virsh nodedev-dumpxml usb_usb1  > usb_device.xml
    # virt-xml-validate  usb_device.xml  nodedev";"Output: 
 usb_device.xml     validates";;RedHatEnterpriseLinux7/RHEL-130526
335;;;;;;;;;5;for usb;​​;;RedHatEnterpriseLinux7/RHEL-130526
335;;;;;;;;;6;# virsh nodedev-list --cap usb_device,usb;"usb_1_0_1_0
 usb_2_0_1_0
 usb_3_0_1_0
 usb_4_0_1_0
 usb_5_0_1_0
 usb_6_0_1_0
 usb_6_1
 usb_6_1_1_0
 usb_6_2
 usb_6_2_1_0
 usb_7_0_1_0
 usb_7_1
 usb_7_1_1_0
 usb_8_0_1_0
 usb_usb1  
 usb_usb2  
 usb_usb3   
 usb_usb4
 usb_usb5
 usb_usb6
 usb_usb7
 usb_usb8
 (both usb and usb_device are exposed)";;RedHatEnterpriseLinux7/RHEL-130526
335;;;;;;;;;7;# virsh nodedev-list --cap usb;"usb_1_0_1_0
 usb_2_0_1_0
 usb_3_0_1_0
 usb_4_0_1_0
 usb_5_0_1_0
 usb_6_0_1_0
 usb_6_1_1_0
 usb_6_2_1_0
 usb_7_0_1_0
 usb_7_1_1_0
 usb_8_0_1_0
 
 (only usb list here)";;RedHatEnterpriseLinux7/RHEL-130526
335;;;;;;;;;8;# virsh nodedev-dumpxml usb_7_0_1_0;"<device>
   <name>usb_7_0_1_0</name>
   <path>/sys/devices/pci0000:00/0000:00:1d.1/usb7/7-0:1.0</path>
   <parent>usb_usb7</parent>
   <driver>
     <name>hub</name>
   </driver>
   <capability type='usb'>
     <number>0</number>
     <class>9</class>
     <subclass>0</subclass>
     <protocol>0</protocol>
   </capability>
 </device>";;RedHatEnterpriseLinux7/RHEL-130526
335;;;;;;;;;9;# virsh nodedev-dumpxml usb_6_2_1_0;"<device>
   <name>usb_6_2_1_0</name>
   <path>/sys/devices/pci0000:00/0000:00:1d.0/usb6/6-2/6-2:1.0</path>
   <parent>usb_6_2</parent>
   <driver>
     <name>usbhid</name>
   </driver>
   <capability type='usb'>
     <number>0</number>
     <class>3</class>
     <subclass>1</subclass>
     <protocol>2</protocol>
   </capability>
 </device>
 exposed:
 number, class, subclass, protocol, description(optional)";;RedHatEnterpriseLinux7/RHEL-130526
335;;;;;;;;;10;# virsh nodedev-dumpxml usb_6_2_1_0 > usb_6_2_1_0;​​;;RedHatEnterpriseLinux7/RHEL-130526
335;;;;;;;;;11;"# virt-xml-validate usb_6_2_1_0
​​";usb_6_2_1_0 validates;;RedHatEnterpriseLinux7/RHEL-130526
336;RHEL-130527;Dump storage  xml info --bug 1566416;"Dump storage device xml info     
";Jingjing Shao (jishao);High;Positive;Not Automated;;1;" 1. List storage device
 # virsh nodedev-list --cap storage
​​";" Output:
 block_sda_WDC_WD2502ABYS_18B7A0_WD_WCAT19577395
 block_sr0_TSSTcorp_DVD_RW_SH_216AB_R8E568CC237566
​​";Test Case;RedHatEnterpriseLinux7/RHEL-130527
336;;;;;;;;;2;"2. Dump storage device xml info
 # virsh nodedev-dumpxml block_sda_WDC_WD2502ABYS_18B7A0_WD_WCAT19577395
​​";"Output:
 <device>
   <name>block_sda_WDC_WD2502ABYS_18B7A0_WD_WCAT19577395</name>
   <path>/sys/devices/pci0000:00/0000:00:1f.2/ata1/host0/target0:0:0/0:0:0:0/block/sda</path>
   <devnode type='dev'>/dev/sda</devnode>
   <devnode type='link'>/dev/disk/by-id/ata-WDC_WD2502ABYS-18B7A0_WD-WCAT19577395</devnode>
   <devnode type='link'>/dev/disk/by-id/wwn-0x50014ee101a501fa</devnode>
   <devnode type='link'>/dev/disk/by-path/pci-0000:00:1f.2-ata-1.0</devnode>
   <parent>scsi_0_0_0_0</parent>
   <capability type='storage'>
     <block>/dev/sda</block>
     <bus>ata</bus>
     <drive_type>disk</drive_type>
     <model>WDC WD2502ABYS-1</model>
     <vendor>ATA</vendor>
     <serial>WDC_WD2502ABYS-18B7A0_WD-WCAT19577395</serial>
     <size>250000000000</size>
     <logical_block_size>512</logical_block_size>
     <num_blocks>488281250</num_blocks>
   </capability>
 </device>
 
​​";;RedHatEnterpriseLinux7/RHEL-130527
336;;;;;;;;;3;"3. # virsh nodedev-dumpxml block_sda_WDC_WD2502ABYS_18B7A0_WD_WCAT19577395  > storage.xml
 # virt-xml-validate  storage.xml  nodedev
​​";"Output: 
 storage.xml   validates";;RedHatEnterpriseLinux7/RHEL-130527
336;;;;;;;;;4;"scenario 2: on system with HBA
 # virsh nodedev-list --cap storage
​​";"block_sda_3600605b004ff9e4017f7512d0e506535
 block_sdb_3600a0b80005b10ca00005ad456fd8d6d
 block_sdc_3600a0b80005b10ca00005ad656fd8d93
 block_sdd_3600a0b80005b10ca00005ad456fd8d6d
 block_sde_3600a0b80005b10ca00005ad656fd8d93
 block_sr0_IMM_Virtual_CD_DVD_20070221_15_0_0
 block_sr1_IBM_SATA_DEVICE_81Y3661_YM45_044072";;RedHatEnterpriseLinux7/RHEL-130527
336;;;;;;;;;5;# virsh nodedev-dumpxml block_sdb_3600a0b80005b10ca00005ad456fd8d6d;"<device>
   <name>block_sdb_3600a0b80005b10ca00005ad456fd8d6d</name>
   <path>/sys/devices/pci0000:00/0000:00:09.0/0000:18:00.1/host5/rport-5:0-0/target5:0:0/5:0:0:0/block/sdb</path>
   <devnode type='dev'>/dev/sdb</devnode>
   <devnode type='link'>/dev/disk/by-id/scsi-3600a0b80005b10ca00005ad456fd8d6d</devnode>
   <devnode type='link'>/dev/disk/by-id/wwn-0x600a0b80005b10ca00005ad456fd8d6d</devnode>
   <devnode type='link'>/dev/disk/by-path/pci-0000:18:00.1-fc-0x203500a0b85b0acc-lun-0</devnode>
   <parent>scsi_5_0_0_0</parent>
   <capability type='storage'>
     <block>/dev/sdb</block>
     <bus>scsi</bus>
     <drive_type>disk</drive_type>
     <model>1726-4xx  FAStT</model>
     <vendor>IBM</vendor>
     <serial>3600a0b80005b10ca00005ad456fd8d6d</serial>
     <size>42949672960</size>
     <logical_block_size>512</logical_block_size>
     <num_blocks>83886080</num_blocks>
   </capability>
 </device>
​​";;RedHatEnterpriseLinux7/RHEL-130527
336;;;;;;;;;6;# virsh nodedev-dumpxml block_sdb_3600a0b80005b10ca00005ad456fd8d6d > /tmp/test.xml;"
​​";;RedHatEnterpriseLinux7/RHEL-130527
336;;;;;;;;;7;# virt-xml-validate /tmp/test.xml;/tmp/test.xml validates;;RedHatEnterpriseLinux7/RHEL-130527
337;RHEL-130528;Dump drm xml info;"Dump drm device xml info     
";Jingjing Shao (jishao);High;Positive;Not Automated;;1;" 1. List drm device 
 # virsh nodedev-list --cap drm
​​";" Output:
 drm_card0
 drm_renderD128
​​";Test Case;RedHatEnterpriseLinux7/RHEL-130528
337;;;;;;;;;2;"2. Dump drm device xml info
 # virsh nodedev-dumpxml drm_card0
 
 
 
 
​​";"Output:
 <device>
   <name>drm_card0</name>
   <path>/sys/devices/pci0000:00/0000:00:02.0/drm/card0</path>
   <devnode type='dev'>/dev/dri/card0</devnode>
   <parent>pci_0000_00_02_0</parent>
   <capability type='drm'>
     <type>primary</type>
   </capability>
 </device>";;RedHatEnterpriseLinux7/RHEL-130528
337;;;;;;;;;3;"3. # virsh nodedev-dumpxml drm_card0  > drm.xml
 # virt-xml-validate  drm.xml   nodedev
​​";"Output: 
 drm.xml    validates";;RedHatEnterpriseLinux7/RHEL-130528
338;RHEL-130624;[Migration][--xml] Change live domain xml on target host when do live migration;N/A;Fangge Jin (fjin);High;Positive;Automated;;1;Start a guest on source host;​​;Test Case;RedHatEnterpriseLinux7/RHEL-130624
338;;;;;;;;;2;"Dump the domain xml into a file, and change something in the file. 
 
 For example, change graphic port from autoport=yes to autoport=no:
 
* # virsh dumpxml vm1 --migratable|grep graphics
<graphics type='spice' autoport='yes' listen='0.0.0.0'>
 </graphics>

 
*   # virsh dumpxml vm1 --migratable > /tmp/new.xml
* Update file new.xml as below:
<graphics type='spice' autoport='no' port='6666' listen='0.0.0.0'>
 </graphics>";​​;;RedHatEnterpriseLinux7/RHEL-130624
338;;;;;;;;;3;"Do migration with updated XML:
 
* # virsh migrate vm1 qemu+ssh://{target_ip}/system --live --verbose --xml /tmp/new.xml
";Migration succeeds;;RedHatEnterpriseLinux7/RHEL-130624
338;;;;;;;;;4;"After migration completes, check guest status on source host:
 
* # virsh list --all
";Guest doesn't exist or is shutoff on source host.;;RedHatEnterpriseLinux7/RHEL-130624
338;;;;;;;;;5;"Check domain status on target host:
 
* # virsh list
 Id    Name                           State
 ----------------------------------------------------
  1     vm1                              running
";"Guest is running on target host 
";;RedHatEnterpriseLinux7/RHEL-130624
338;;;;;;;;;6;"Check active domain xml on target host:
 
* # virsh dumpxml vm1|grep graphics
* # netstat -tunap|grep 6666
";The port is 6666.;;RedHatEnterpriseLinux7/RHEL-130624
338;;;;;;;;;7;"Destroy guest on target:
 
* # virsh destroy vm1
* # virsh list --all
";Guest disappears after it is destroyed.;;RedHatEnterpriseLinux7/RHEL-130624
339;RHEL-130633;[send-key]Send key to crash windows guest;Send key to crash windows guest;Yan Fu (yafu);High;Positive;Manual Only;;1;"1.Test codeset
 https://mirrorglass.englab.nay.redhat.com/XWiki/bin/view/Main/keymaps%20for%20 virsh%20send-key 
 
 1). Start a Windows guest
 2). Add the following new registory key at
 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\i8042prt\Parameters on Windows guest.
 
 key-name : ""CrashOnCtrlScroll""
 DWORD value: 1

On my win7 guest , it looks like
 Name Type Data
 Parameters | (Default) REG_SZ (value not set)
 | LayerDriver JPN REG_DWORD 0x00000001(1)
 | snip.........
 | CrashOnCtrlScroll REG_DWORD 0x0000001(1)
 It should be a DWORD value

3). Restart the Windows guest.
 
 4).After guest start fully , test linux codeset
 #virsh send-key win2008 --codeset linux 0x61 0x46 0x46
 
 5). Test atset3 codeset
 #virsh send-key win2008 --codeset atset3 0x58 0x5f 0x5f
 
 6). Test xt_kbd codeset
 #virsh send-key win2008 --codeset xt_kbd 0x11d 0x46 0x46
 
 7).Test win32 codeset
 #virsh send-key win2008 --codeset win32 0xa3 0x91 0x91
 
 8). Test usb codeset
 #virsh send-key win2008 \--codeset usb 0xe4 0x47 0x47
 
 9). Test rfb codeset
 #virsh send-key win2008 --codeset rfb 0x9d 0x46 0x46"; 1.The guest crashed.;Test Case;RedHatEnterpriseLinux7/RHEL-130633
340;RHEL-130637;[qemu-monitor-command] Libvirt could deliver human monitor commands to guest Lib...;"[qemu-monitor-command] Libvirt could deliver human monitor commands to guest
Libvirt could deliver human monitor commands to guest with different formates";Yan Fu (yafu);Medium;Positive;Automated;;1;" 1. Prepare a running guest
 # virsh list --all
  Id Name                 State
 ----------------------------------
   1 rhel6                running
 
 2. # virsh qemu-monitor-command rhel6 --hmp 'info kvm'
 3. # virsh qemu-monitor-command rhel6 \
 
 '{""execute"":""human-monitor-command"",""arguments"":{""command-line"":""info kvm""}}'
 
 4. # virsh qemu-monitor-command rhel6 --hmp  ""info cpus""
 
 5# virsh qemu-monitor-command rhel6 --pretty --cmd '{""execute"":""human-monitor-
 command"",""arguments"":{""command-line"":""info kvm""}}'
​​";" 2. Output
 
 kvm support: enabled
 
 3. Output
 
 {""return"":""kvm support: enabled\r\n"",""id"":""libvirt-149""}
 
 
 4. output
 * CPU #0: pc=0xffffffff8006c389 (halted) thread_id=11047 
   CPU #1: pc=0xffffffff8006c389 (halted) thread_id=11048 
 
 5. Output
 
 {
     ""return"": ""kvm support: enabled\r\n"",
     ""id"": ""libvirt-11""
 }
 
  
​​";Test Case;RedHatEnterpriseLinux7/RHEL-130637
341;RHEL-131317;[disk format][luks] Support to create and install luks image;Create a luks format image, and verify that guest can boot up with this image;Yilin Zhang (yilzhang);High;Positive;Not Automated;;1;"1. Create a luks format image
 # qemu-img create -f luks $BASE_KEY -o key-secret=sec0 $BASE 20G";"No error, output is like following:
 Formatting 'base.luks', fmt=luks size=21474836480 key-secret=sec0
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131317
341;;;;;;;;;2;"2. Get information of the image
 # qemu-img info $BASE";"image: base.luks
 file format: luks
 virtual size: 20G (21474836480 bytes)
 disk size: 256K
 encrypted: yes
 Format specific information:
     ivgen alg: plain64
     hash alg: sha256
     cipher alg: aes-256
     uuid: a044de9c-6a40-47c5-adf0-5190054444d5
     cipher mode: xts
     slots:
         [0]:
             active: true
             iters: 1074360
             key offset: 4096
             stripes: 4000
         [1]:
             active: false
             key offset: 262144
         [2]:
             active: false
             key offset: 520192
         [3]:
             active: false
             key offset: 778240
         [4]:
             active: false
             key offset: 1036288
         [5]:
             active: false
             key offset: 1294336
         [6]:
             active: false
             key offset: 1552384
         [7]:
             active: false
             key offset: 1810432
     payload offset: 2068480
     master key iters: 273066";;RedHatEnterpriseLinux7/RHEL-131317
341;;;;;;;;;3;"3. Install guest with the image
 ......
 -object secret,id=sec0,data=base \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=luks,file=base.luks,key-secret=sec0 \
 -device scsi-hd,id=image1,drive=drive_image1 \
 ......";"Install successfully.
​​";;RedHatEnterpriseLinux7/RHEL-131317
342;RHEL-131382;set alias for serial devices - bug 1566525;from rhel7.5, libvirt support to set custom alias for multiple devices;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;" 1. prepare an inactive vm, and modify the xml to use uuid as alias for serial pty device
 # virsh edit rhel
 ...
 <serial type='pty'>
      <source path='/dev/pts/1'/>
      <target type='isa-serial' port='0'>
        <model name='isa-serial'/>
      </target>
      <alias name='ua-c60aba6e-b6d8-448b-ab6e-8c7b5c29f353'/>  
    </serial>
 
 
 
 
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-131382
342;;;;;;;;;2;# virsh start rhel;"Domain rhel started
 (domain start successfully)";;RedHatEnterpriseLinux7/RHEL-131382
342;;;;;;;;;3;"# virsh dumpxml rhel | grep /console -B11
​​";"   <serial type='pty'>
      <source path='/dev/pts/1'/>
      <target type='isa-serial' port='0'>
        <model name='isa-serial'/>
      </target>
      <alias name='ua-c60aba6e-b6d8-448b-ab6e-8c7b5c29f353'/>
    </serial>
    <console type='pty' tty='/dev/pts/1'>
      <source path='/dev/pts/1'/>
      <target type='serial' port='0'/>
      <alias name='ua-c60aba6e-b6d8-448b-ab6e-8c7b5c29f353'/>
    </console>
 (the console and serial both gain the long uuid)";;RedHatEnterpriseLinux7/RHEL-131382
342;;;;;;;;;4;do save and restore;should succeed and the xml no change;;RedHatEnterpriseLinux7/RHEL-131382
342;;;;;;;;;5;do managedsave and start;should succeed and the xml no change;;RedHatEnterpriseLinux7/RHEL-131382
342;;;;;;;;;6;"2. start vm with uuid alias for channel device and virtio console device, guest can start successfully
 # virsh start rhel
 Domain rhel started";​​;;RedHatEnterpriseLinux7/RHEL-131382
342;;;;;;;;;7;# virsh dumpxml rhel;"...
 <console type='pty'>
      <source path='/dev/pts/2'/>
      <target type='virtio' port='1'/>
      <alias name='ua-c60aba6e-b6d8-448b-ab6e-8c7b5c29f358'/>
    </console>
    <channel type='unix'>
      <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/domain-15-rhel/org.qemu.guest_agent.0'/>
      <target type='virtio' name='org.qemu.guest_agent.0' state='connected'/>
      <alias name='ua-c60aba6e-b6d8-448b-ab6e-8c7b5c29f359'/>
      <address type='virtio-serial' controller='0' bus='0' port='1'/>
    </channel>
 ...";;RedHatEnterpriseLinux7/RHEL-131382
342;;;;;;;;;8;3. do save and restore successfully and xml no change;​​;;RedHatEnterpriseLinux7/RHEL-131382
342;;;;;;;;;9;4. do managedsave and start successfully and xml no change;​​;;RedHatEnterpriseLinux7/RHEL-131382
342;;;;;;;;;10;"5. do hotplug with such alias  for console, channel, serial devices
 for console:
 # cat console.xml
 <console type='pty'>
      <source path='/dev/pts/2'/>
      <target type='virtio' port='1'/>
      <alias name='ua-5b93a4b8-3167-410b-a365-ab31e88a709a'/>
    </console>";​​;;RedHatEnterpriseLinux7/RHEL-131382
342;;;;;;;;;11;# virsh attach-device rhel console.xml;Device attached successfully;;RedHatEnterpriseLinux7/RHEL-131382
342;;;;;;;;;12;"# virsh dumpxml rhel | grep ua
​​";" ...
      <alias name='ua-5b93a4b8-3167-410b-a365-ab31e88a709a'/>
       ...";;RedHatEnterpriseLinux7/RHEL-131382
342;;;;;;;;;13;"for channel:
 # cat channel.xml
 <channel type='pty'> 
 <target type='virtio' name='org.linux-kvm.port.3'/> 
 <address type='virtio-serial' controller='0' bus='0' port='4'/> 
 <alias name='ua-209377ba-e83b-4cee-9ac5-7e467e290dae'/>
 </channel>
​​";​​;;RedHatEnterpriseLinux7/RHEL-131382
342;;;;;;;;;14;# virsh attach-device rhel channel.xml;Device attached successfully;;RedHatEnterpriseLinux7/RHEL-131382
342;;;;;;;;;15;# virsh dumpxml rhel | grep ua;"   ...
      <alias name='ua-5b93a4b8-3167-410b-a365-ab31e88a709a'/>
       ...
      <alias name='ua-209377ba-e83b-4cee-9ac5-7e467e290dae'/>";;RedHatEnterpriseLinux7/RHEL-131382
342;;;;;;;;;16;"for serial:
 # cat serial.xml
 <serial type='pty'>
      <source path='/dev/pts/1'/>
      <target type='pci-serial' port='0'>
        <model name='pci-serial'/>
      </target>
      <alias name='ua-09de3cbb-e85c-4526-8fe6-2b8ea0c5e03b'/>
    </serial>
 
​​";​​;;RedHatEnterpriseLinux7/RHEL-131382
342;;;;;;;;;17;# virsh attach-device rhel serial.xml;Device attached successfully;;RedHatEnterpriseLinux7/RHEL-131382
342;;;;;;;;;18;"# virsh dumpxml rhel | grep ua
​​";"     <alias name='ua-09de3cbb-e85c-4526-8fe6-2b8ea0c5e03b'/>
       ...
      <alias name='ua-5b93a4b8-3167-410b-a365-ab31e88a709a'/>
       ...
      <alias name='ua-209377ba-e83b-4cee-9ac5-7e467e290dae'/>";;RedHatEnterpriseLinux7/RHEL-131382
343;RHEL-131388;[disk format][luks] Check qemu-img could handle maximum image size on different file systems [TBD];Boundary test of image size - Check qemu-img could handle maximum image size on different file systems;Yilin Zhang (yilzhang);Low;Negative;Not Automated;;1;"1. Prepare an ext4 file system
 e.g. 
 # mkfs.ext4 /dev/sdc
 # mount -t ext4 /dev/sdc /mnt
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-131388
343;;;;;;;;;2;"2. On ext4 file system, create 16TB luks image
 # qemu-img create -f luks --object secret,id=sec0,data=base -o key-secret=sec0 /mnt/test.luks 16T";"TBD
 Should fail with meaningful error message
​​";;RedHatEnterpriseLinux7/RHEL-131388
343;;;;;;;;;3;"3. Create 8EiB luks image on xfs file system
 # qemu-img create -f luks --object secret,id=sec0,data=base -o key-secret=sec0 test.luks 8E";​​;;RedHatEnterpriseLinux7/RHEL-131388
344;RHEL-131389;[disk format][luks] Support preallocation mode for luks format [TBD];Check that it should support preallocation mode for luks format;Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create luks image with full mode
 # qemu-img create -f luks --object secret,id=sec0,data=testfull -o key-secret=sec0 testfull.luks 1G -o preallocation=full";​​;Test Case;RedHatEnterpriseLinux7/RHEL-131389
344;;;;;;;;;2;"2. Get information of the image
 # qemu-img info testfull.luks";​​;;RedHatEnterpriseLinux7/RHEL-131389
344;;;;;;;;;3;"3. Create luks image with falloc mode
 # qemu-img create -f luks --object secret,id=sec0,data=testfalloc -o key-secret=sec0 testfalloc.luks 1G -o preallocation=falloc";​​;;RedHatEnterpriseLinux7/RHEL-131389
344;;;;;;;;;4;"4. Get information of the image
 # qemu-img info testfalloc.luks";​​;;RedHatEnterpriseLinux7/RHEL-131389
344;;;;;;;;;5;"5. Create luks image with off mode
 # qemu-img create -f luks --object secret,id=sec0,data=testoff -o key-secret=sec0 testoff.luks 1G -o preallocation=off
​​";​​;;RedHatEnterpriseLinux7/RHEL-131389
344;;;;;;;;;6;"6. Get information of the image
 # qemu-img info testoff.luks";​​;;RedHatEnterpriseLinux7/RHEL-131389
345;RHEL-131390;[disk format][luks] Support to create a qcow2 snapshot based on a luks image;"Verify that it can create a qcow2 snapshot based on a luks image, and the snapshot can boot up successfully.
";Yilin Zhang (yilzhang);High;Positive;Not Automated;;1;"1. Boot the luks image
 e.g.
  -object secret,id=sec0,data=base \
  -device virtio-scsi-pci,id=scsi0 \
  -drive id=drive_sysdisk,if=none,cache=none,aio=native,format=luks,file=base.luks,key-secret=sec0 \
  -device scsi-hd,drive=drive_sysdisk,bus=scsi0.0,id=sysdisk,bootindex=0 \";Guest can boot up successfully;Test Case;RedHatEnterpriseLinux7/RHEL-131390
345;;;;;;;;;2;"2. Create a large file inside the guest
 # dd if=/dev/urandom of=file bs=1M count=2048 ; cksum file
​​";​​;;RedHatEnterpriseLinux7/RHEL-131390
345;;;;;;;;;3;"3. Shutdown the running guest
​​";​​;;RedHatEnterpriseLinux7/RHEL-131390
345;;;;;;;;;4;"4. Create a qcow2 snapshot based on the luks image
 # qemu-img create -f qcow2 --object secret,id=sec0,data=base -b 'json:{""driver"": ""luks"",""file"": {""driver"": ""file"", ""filename"":""base.luks""}, ""key-secret"": ""sec0""}' sn.qcow2";"Formatting 'sn.qcow2', fmt=qcow2 size=21474836480 backing_file=json:{""driver"": ""luks"",,""file"": {""driver"": ""file"",, ""filename"":""base.luks""},, ""key-secret"": ""sec0""} cluster_size=65536 lazy_refcounts=off refcount_bits=16";;RedHatEnterpriseLinux7/RHEL-131390
345;;;;;;;;;5;"5. Get information of the snapshot
 # qemu-img info sn.qcow2";"image: sn.qcow2
 file format: qcow2
 virtual size: 20G (21474836480 bytes)
 disk size: 196K
 cluster_size: 65536
 backing file: json:{""driver"": ""luks"",""file"": {""driver"": ""file"", ""filename"":""base.luks""}, ""key-secret"": ""sec0""}
 Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false
​​";;RedHatEnterpriseLinux7/RHEL-131390
345;;;;;;;;;6;"6. Boot snapshot
 -object secret,id=sec0,data=base \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,backing.key-secret=sec0,file=sn.qcow2 \
 -device scsi-hd,id=image1,drive=drive_image1 \
​​";"No error, guest can boot up successfully
​​";;RedHatEnterpriseLinux7/RHEL-131390
345;;;;;;;;;7;"7. Inside the guest, check the file created in step2
 # cksum file
​​";"The file is present;
 The file has the same cksum value as step2";;RedHatEnterpriseLinux7/RHEL-131390
346;RHEL-131391;[disk format][luks] Support to create a qcow2 snapshot based on a running luks image;Verify that it can create a qcow2 snapshot based on a running luks image, and the snapshot can boot up successfully.;Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Boot the luks image
 e.g.
  -object secret,id=sec0,data=base \
  -device virtio-scsi-pci,id=scsi0 \
  -drive id=drive_sysdisk,if=none,cache=none,aio=native,format=luks,file=base.luks,key-secret=sec0 \
  -device scsi-hd,drive=drive_sysdisk,bus=scsi0.0,id=sysdisk \
​​";Guest can boot up successfully;Test Case;RedHatEnterpriseLinux7/RHEL-131391
346;;;;;;;;;2;"2. Create a large file inside the guest
 # dd if=/dev/urandom of=file bs=1M count=2048; cksum file";​​;;RedHatEnterpriseLinux7/RHEL-131391
346;;;;;;;;;3;"3. Create a snapshot based on the luks image
 # qemu-img create -f qcow2 $BASE_KEY -b ""$BASE_JSON""  $SN";"Formatting 'sn.qcow2', fmt=qcow2 size=21474836480 backing_file=json:{""driver"": ""luks"",, ""file"": {""driver"": ""file"",, ""filename"":""base.luks""},, ""key-secret"": ""sec0""} cluster_size=65536 lazy_refcounts=off refcount_bits=16";;RedHatEnterpriseLinux7/RHEL-131391
346;;;;;;;;;4;"4. Get information of the snapshot
 # qemu-img info $SN";"image: sn.qcow2
 file format: qcow2
 virtual size: 20G (21474836480 bytes)
 disk size: 196K
 cluster_size: 65536
 backing file: json:{""driver"": ""luks"", ""file"": {""driver"": ""file"", ""filename"":""base.luks""}, ""key-secret"": ""sec0""}
 Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false
​​";;RedHatEnterpriseLinux7/RHEL-131391
346;;;;;;;;;5;5. Shutdown the running guest;​​;;RedHatEnterpriseLinux7/RHEL-131391
346;;;;;;;;;6;"6. Boot snapshot
 -object secret,id=sec0,data=base \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,file=sn.qcow2,backing.key-secret=sec0 \
 -device scsi-hd,id=image1,drive=drive_image1 \";No error, guest can boot up successfully;;RedHatEnterpriseLinux7/RHEL-131391
346;;;;;;;;;7;"7. Inside the guest, check the file created in step2
 # cksum file";"The file is present;
 The file has the same cksum value as step2";;RedHatEnterpriseLinux7/RHEL-131391
347;RHEL-131392;[disk format][luks] Support to convert luks to luks [TBD];Verify the luks image can be converted to luks format correctly. Files/data in source image should be completely saved in destination image, and no error was found through qemu-img.;Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Boot the luks image
 e.g.
  -object secret,id=sec0,data=base \
  -device virtio-scsi-pci,id=scsi0 \
  -drive id=drive_sysdisk,if=none,cache=none,aio=native,format=luks,file=base.luks,key-secret=sec0 \
  -device scsi-hd,drive=drive_sysdisk,bus=scsi0.0,id=sysdisk \";Guest can boot up successfully;Test Case;RedHatEnterpriseLinux7/RHEL-131392
347;;;;;;;;;2;"2. Create a large file inside the guest
 # dd if=/dev/urandom of=file bs=1M count=2048; cksum file";​​;;RedHatEnterpriseLinux7/RHEL-131392
347;;;;;;;;;3;3. Shutdown the running guest;​​;;RedHatEnterpriseLinux7/RHEL-131392
347;;;;;;;;;4;"4. Convert the luks image to a new luks image
 # qemu-img convert -p $BASE_KEY $CONV_KEY --image-opts $BASE_OPTS -O luks -o key-secret=sec-conv $CONV";"No error, output is like following:
     (100.00/100%)
​​";;RedHatEnterpriseLinux7/RHEL-131392
347;;;;;;;;;5;"5. Get information of the converted new image
 # qemu-img info $CONV";TBD;;RedHatEnterpriseLinux7/RHEL-131392
347;;;;;;;;;6;"6. Check whether two images have the same content using strict mode
 # qemu-img compare -p -s $BASE_KEY $CONV_KEY --image-opts $BASE_OPTS $CONV_OPTS";"Images are identical.
​​";;RedHatEnterpriseLinux7/RHEL-131392
347;;;;;;;;;7;"7. Boot the converted new image
 -object secret,id=sec-conv,data=convert \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=luks,file=convert.luks,key-secret=sec-conv \
 -device scsi-hd,id=image1,drive=drive_image1 \";No error, guest can boot up successfully;;RedHatEnterpriseLinux7/RHEL-131392
347;;;;;;;;;8;"8. Inside the guest, check the file created in step2
 # cksum file";"The file is present;
 The file has the same cksum value as step2";;RedHatEnterpriseLinux7/RHEL-131392
348;RHEL-131393;[disk format][luks] Support to convert luks to qcow2 ;Verify the luks image can be converted to qcow2 format correctly. Files/data in source image should be completely saved in destination image, and no error was found through qemu-img.;Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Boot the luks image
 e.g.
  -object secret,id=sec0,data=base \
  -device virtio-scsi-pci,id=scsi0 \
  -drive id=drive_sysdisk,if=none,cache=none,aio=native,format=luks,file=base.luks,key-secret=sec0 \
  -device scsi-hd,drive=drive_sysdisk,bus=scsi0.0,id=sysdisk \";Guest can boot up successfully;Test Case;RedHatEnterpriseLinux7/RHEL-131393
348;;;;;;;;;2;"2. Create a large file inside the guest
 # dd if=/dev/urandom of=file bs=1M count=2048; cksum file";​​;;RedHatEnterpriseLinux7/RHEL-131393
348;;;;;;;;;3;3. Shutdown the running guest;​​;;RedHatEnterpriseLinux7/RHEL-131393
348;;;;;;;;;4;"4. Convert the luks image to a new qcow2 image
 # qemu-img convert -p $BASE_KEY --image-opts $BASE_OPTS -O qcow2 $CONV";"No error, output is like following:
     (100.00/100%)";;RedHatEnterpriseLinux7/RHEL-131393
348;;;;;;;;;5;"5. Get information of the converted new image
 # qemu-img info $CONV";"# qemu-img info convert.qcow2 
 image: convert.qcow2
 file format: qcow2
 virtual size: 20G (21474836480 bytes)
 disk size: 20G
 cluster_size: 65536
 Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false
​​";;RedHatEnterpriseLinux7/RHEL-131393
348;;;;;;;;;6;"6. Check whether two images have the same content
 # qemu-img compare -p $BASE_KEY --image-opts $BASE_OPTS $CONV_OPTS";"Images are identical.
​​";;RedHatEnterpriseLinux7/RHEL-131393
348;;;;;;;;;7;"7. Boot the converted new image
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,file=new.qcow2 \
 -device scsi-hd,id=image1,drive=drive_image1 \";No error, guest can boot up successfully;;RedHatEnterpriseLinux7/RHEL-131393
348;;;;;;;;;8;"8. Inside the guest, check the file created in step2
 # cksum file";"The file is present;
 The file has the same cksum value as step2";;RedHatEnterpriseLinux7/RHEL-131393
349;RHEL-131394;[disk format][luks] Support to convert luks to raw ;Verify the luks image can be converted to raw format correctly. Files/data in source image should be completely saved in destination image, and no error was found through qemu-img.;Yilin Zhang (yilzhang);High;Positive;Not Automated;;1;"1. Boot the luks image
 e.g.
  -object secret,id=sec0,data=base \
  -device virtio-scsi-pci,id=scsi0 \
  -drive id=drive_sysdisk,if=none,cache=none,aio=native,format=luks,file=base.luks,key-secret=sec0 \
  -device scsi-hd,drive=drive_sysdisk,bus=scsi0.0,id=sysdisk \";Guest can boot up successfully;Test Case;RedHatEnterpriseLinux7/RHEL-131394
349;;;;;;;;;2;"2. Create a large file inside the guest
 # dd if=/dev/urandom of=file bs=1M count=2048; cksum file
​​";"
​​";;RedHatEnterpriseLinux7/RHEL-131394
349;;;;;;;;;3;3. Shutdown the running guest;"
​​";;RedHatEnterpriseLinux7/RHEL-131394
349;;;;;;;;;4;"4. Convert the luks image to a new raw image
 # qemu-img convert -p $BASE_KEY --image-opts $BASE_OPTS -O raw $CONV";"No error, output is like following:
     (100.00/100%)";;RedHatEnterpriseLinux7/RHEL-131394
349;;;;;;;;;5;"5. Get information of the converted new image
 # qemu-img info $CONV";"# qemu-img info convert.img 
 image: convert.img
 file format: raw
 virtual size: 20G (21474836480 bytes)
 disk size: 20G";;RedHatEnterpriseLinux7/RHEL-131394
349;;;;;;;;;6;"6. Check whether two images have the same content
 # qemu-img compare -p $BASE_KEY --image-opts  $BASE_OPTS $CONV_OPTS";Images are identical.;;RedHatEnterpriseLinux7/RHEL-131394
349;;;;;;;;;7;"7. Boot the converted new image
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=raw,file=new.img \
 -device scsi-hd,id=image1,drive=drive_image1 \";No error, guest can boot up successfully;;RedHatEnterpriseLinux7/RHEL-131394
349;;;;;;;;;8;"8. Inside the guest, check the file created in step2
 # cksum file";"The file is present;
 The file has the same cksum value as step2";;RedHatEnterpriseLinux7/RHEL-131394
350;RHEL-131395;[disk format][luks] Support different cache mode when converting image;Verify the luks image can be converted to luks format with different cache mode(none,writethrough, directsync and unsafe)correctly. Files/data in source image should be completely saved in destination image.;Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Boot the luks image
 e.g.
  -object secret,id=sec0,data=base \
  -device virtio-scsi-pci,id=scsi0 \
  -drive id=drive_sysdisk,if=none,cache=none,aio=native,format=luks,file=base.luks,key-secret=sec0 \
  -device scsi-hd,drive=drive_sysdisk,bus=scsi0.0,id=sysdisk \";Guest can boot up successfully;Test Case;RedHatEnterpriseLinux7/RHEL-131395
350;;;;;;;;;2;"2. Create a large file inside the guest
 # dd if=/dev/urandom of=file bs=1M count=2048; cksum file";​​;;RedHatEnterpriseLinux7/RHEL-131395
350;;;;;;;;;3;3. Shutdown the running guest;​​;;RedHatEnterpriseLinux7/RHEL-131395
350;;;;;;;;;4;"4. Convert the luks image to a new luks image using different cache modes
 # mode=writeback
 # time qemu-img convert -t $mode -T $mode $BASE_KEY $CONV_KEY --image-opts $BASE_OPTS -O luks -o key-secret=sec-conv $CONV";"Succeed
​​";;RedHatEnterpriseLinux7/RHEL-131395
350;;;;;;;;;5;"5. Boot the converted new image
 -object secret,id=sec-conv,data=convert \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=luks,file=new.luks,key-secret=sec-conv \
 -device scsi-hd,id=image1,drive=drive_image1 \";No error, guest can boot up successfully;;RedHatEnterpriseLinux7/RHEL-131395
350;;;;;;;;;6;"6. Inside the guest, check the file created in step2
 # cksum file";"The file is present;
 The file has the same cksum value as step2";;RedHatEnterpriseLinux7/RHEL-131395
350;;;;;;;;;7;7. Shutdown the running guest;​​;;RedHatEnterpriseLinux7/RHEL-131395
350;;;;;;;;;8;"8. Repeat step4~7, but use mode=writethrough, directsync, unsafe for each time
​​";​​;;RedHatEnterpriseLinux7/RHEL-131395
351;RHEL-131396;[disk format][luks] Allow qemu-img to bypass the host cache;"Allow qemu-img to bypass the host cache. Use option ""-T"" and ""-t"" as the switch for setting the source image and target image cache mode.";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Convert the existed luks image to a new luks image
 # strace -e trace=open -o convert.log qemu-img convert $BASE_KEY $CONV_KEY --image-opts $BASE_OPTS -O luks -o key-secret=sec-conv $CONV";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131396
351;;;;;;;;;2;"2. Check the output from the log
​​";"open(""base.luks"", O_RDONLY|O_CLOEXEC)
 = 11
 open(""new.luks"", O_RDWR|O_CLOEXEC)
 = 13";;RedHatEnterpriseLinux7/RHEL-131396
351;;;;;;;;;3;"3. Convert the existed luks image to a new luks image, specifying the cache mode as 'none'
 # strace -e trace=open -o convert_bypass.log qemu-img convert -t none -T none $BASE_KEY $CONV_KEY --image-opts $BASE_OPTS -O luks -o key-secret=sec-conv $CONV";"
​​";;RedHatEnterpriseLinux7/RHEL-131396
351;;;;;;;;;4;"4. Check the output from the convert_bypass.log file
​​";"...
 open(""base.luks"", O_RDONLY|O_DIRECT|O_CLOEXEC) = 10
 open(""base.luks"", O_RDONLY|O_DIRECT|O_CLOEXEC) = 11
 ...
 open(""convert.qcow2"", O_RDWR|O_DIRECT|O_CLOEXEC) = 12
 open(""convert.qcow2"", O_RDWR|O_DIRECT|O_CLOEXEC) = 13
 ...
​​";;RedHatEnterpriseLinux7/RHEL-131396
352;RHEL-131397;[disk format][luks] Show progress information on retrieval of Signal when converting images;"Verify that qemu-img support to print progess information when the progress receives a ""SIGUSR1"" signal.";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Convert the luks image to a new luks image with option '-p'
 # qemu-img convert -p $BASE_KEY $CONV_KEY --image-opts $BASE_OPTS -O luks -o key-secret=sec-conv $CONV";"Should display progress like (xx/100%)
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131397
352;;;;;;;;;2;"2. Convert the luks image to a new luks image without option '-p'
 # qemu-img convert $BASE_KEY $CONV_KEY --image-opts $BASE_OPTS -O luks -o key-secret=sec-conv $CONV
​​";Should not display progress like (xx/100%);;RedHatEnterpriseLinux7/RHEL-131397
352;;;;;;;;;3;"3. During step2, send a SIGUSR1 signal
 # kill -SIGUSR1 `pidof qemu-img`";Should display progress like (xx/100%);;RedHatEnterpriseLinux7/RHEL-131397
353;RHEL-131398;[disk format][luks] Support to convert a fully allocated image;"Verify that qemu-img supports convert the luks image to a fully allocated qcow2 image (with option ""-S 0"")";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;" 1. Boot the luks image
 e.g.
  -object secret,id=sec0,data=base \
  -device virtio-scsi-pci,id=scsi0 \
  -drive id=drive_sysdisk,if=none,cache=none,aio=native,format=luks,file=base.luks,key-secret=sec0 \
  -device scsi-hd,drive=drive_sysdisk,bus=scsi0.0,id=sysdisk \"; Guest can boot up successfully;Test Case;RedHatEnterpriseLinux7/RHEL-131398
353;;;;;;;;;2;"2. Create a large file inside the guest
 # dd if=/dev/urandom of=file bs=1M count=2048; cksum file";"
​​";;RedHatEnterpriseLinux7/RHEL-131398
353;;;;;;;;;3;3. Shutdown the running guest;"
​​";;RedHatEnterpriseLinux7/RHEL-131398
353;;;;;;;;;4;"4. Convert the luks image to a new qcow2 image with option ""-S 0""
 # qemu-img convert -p -S 0 $BASE_KEY --image-opts $BASE_OPTS -O qcow2 $CONV";"No error, output is like following:
     (100.00/100%)";;RedHatEnterpriseLinux7/RHEL-131398
353;;;;;;;;;5;"5. Get information of the converted new image
 # qemu-img info $CONV";"# qemu-img info new.qcow2 
 image: new.qcow2
 file format: qcow2
 virtual size: 20G (21474836480 bytes)
 disk size: 20G
 cluster_size: 65536
 Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false";;RedHatEnterpriseLinux7/RHEL-131398
353;;;;;;;;;6;"6. Boot the converted new image
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3\
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,file=new.qcow2 \
 -device scsi-hd,id=image1,drive=drive_image1 \";No error, guest can boot up successfully;;RedHatEnterpriseLinux7/RHEL-131398
353;;;;;;;;;7;"7. Inside the guest, check the file created in step2
 # cksum file";"The file is present;
 The file has the same cksum value as step2";;RedHatEnterpriseLinux7/RHEL-131398
354;RHEL-131399;[disk format][luks] Support to convert a compressed image;Verify that qemu-img support to convert to a compressed image.;Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Boot the luks image
 e.g.
  -object secret,id=sec0,data=base \
  -device virtio-scsi-pci,id=scsi0 \
  -drive id=drive_sysdisk,if=none,cache=none,aio=native,format=luks,file=base.luks,key-secret=sec0 \
  -device scsi-hd,drive=drive_sysdisk,bus=scsi0.0,id=sysdisk \"; Guest can boot up successfully;Test Case;RedHatEnterpriseLinux7/RHEL-131399
354;;;;;;;;;2;"2. Create a large file inside the guest
 # dd if=/dev/urandom of=file bs=1M count=2048; cksum file";​​;;RedHatEnterpriseLinux7/RHEL-131399
354;;;;;;;;;3;3. Shutdown the running guest;​​;;RedHatEnterpriseLinux7/RHEL-131399
354;;;;;;;;;4;"4. Convert the luks image to a new qcow2 image with option ""-c""
 # qemu-img convert -p -c $BASE_KEY --image-opts $BASE_OPTS -O qcow2 $CONV";"No error, output is like following:
     (100.00/100%)";;RedHatEnterpriseLinux7/RHEL-131399
354;;;;;;;;;5;"5. Get information of the converted new image
 # qemu-img info $CONV
​​";TBD;;RedHatEnterpriseLinux7/RHEL-131399
354;;;;;;;;;6;"6. Boot the converted new image
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,file=convert.qcow2 \
 -device scsi-hd,id=image1,drive=drive_image1 \";No error, guest can boot up successfully;;RedHatEnterpriseLinux7/RHEL-131399
354;;;;;;;;;7;"7. Inside the guest, check the file created in step2
 # cksum file
​​";"The file is present;
 The file has the same cksum value as step2";;RedHatEnterpriseLinux7/RHEL-131399
355;RHEL-131459;[Migration][--copy-storage-all] Copy the whole image chain for storage migration - multiple disks - local storage without <shareable/> + remote shared storage with <shareable/>;The disk with <shareable/> will be skipped when using --copy-storage-all;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Prepare a guest with mix of shared and no-shared storage.
 
* # virsh domblklist $guest
Target     Source
 ------------------------------------------------
 vda       /var/lib/libvirt/images/local1.qcow2
 vdb      /var/lib/libvirt/images/local2.raw
 vdc       /nfs/images/shared.raw

 Note:
 
* vda and vdb is on local storage;
* vdc is on shared storage and has <shareable/> flag in xml
* Only raw image can have <shareable/> flag
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-131459
355;;;;;;;;;2;"Check disk image on target host:
 
* # file  /var/lib/libvirt/images/local1.qcow2
* # file  /var/lib/libvirt/images/local2.qcow2
* # file  /nfs/images/shared.raw
";The first two files don't exist on target host, the third one exists;;RedHatEnterpriseLinux7/RHEL-131459
355;;;;;;;;;3;start guest;​​;;RedHatEnterpriseLinux7/RHEL-131459
355;;;;;;;;;4;"do migration without --migrate-disks:
 
* # virsh migrate rhel7 --live qemu+ssh://$target_ip/system --verbose --copy-storage-all
";migration succeeds.;;RedHatEnterpriseLinux7/RHEL-131459
355;;;;;;;;;5;check target libvirtd log;"ndb add 2 disks(vda and vdb)
 Output:
 2015-09-07 09:30:55.249+0000: 25161: debug : virJSONValueToString:1795 : result={""execute"":""nbd-server-add"",""arguments"":{""device"":""drive-virtio-disk0"",""writable"":true},""id"":""libvirt-105""}
 ...
 2015-09-07 09:30:55.258+0000: 25161: debug : virJSONValueToString:1795 : result={""execute"":""nbd-server-add"",""arguments"":{""device"":""drive-virtio-disk1"",""writable"":true},""id"":""libvirt-106""}
 ...
";;RedHatEnterpriseLinux7/RHEL-131459
355;;;;;;;;;6;"Do disk I/O operations on all disks in guest
​​";"make sure all disk can r/w
 ";;RedHatEnterpriseLinux7/RHEL-131459
356;RHEL-131780;WALA-TC: [Cloudinit] Check temporary disk mount point;"Check temporary disk mount point with or without WALA
";Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"1. Prepare a VM in Azure with/without WALA
 Deprovision it and remove some disk related configurations that are set by cloud-init:
 /dev/disk/azure... line in /etc/fstab
 /dev/disk/azure folder
 /dev/disk/cloud folder
 Then delete VM and keep os disk
 * If already have a clean image please skip this step
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-131780
356;;;;;;;;;2;"2. Create a VM with this os disk
​​";​​;;RedHatEnterpriseLinux7/RHEL-131780
356;;;;;;;;;3;"3. Check if /dev/sdb1 is mounted
​​";"# mount
 With wala:
 /dev/sdb1 on /mnt/resources
 Without wala:
 /dev/sdb1 on /mnt";;RedHatEnterpriseLinux7/RHEL-131780
356;;;;;;;;;4;"4. Restart VM from azure cli or portal. Then check mount point again. The mount point should still exist.
​​";"# mount
 With wala:
 /dev/sdb1 on /mnt/resources
 Without wala:
 /dev/sdb1 on /mnt";;RedHatEnterpriseLinux7/RHEL-131780
356;;;;;;;;;5;config ;​​;;RedHatEnterpriseLinux7/RHEL-131780
357;RHEL-131930;[Migration] Specify an invalid listen address for incoming migration connections - by configuring parameter migration_address;N/A;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" Set migration_address to an invalid value on target host:
 
* # vim /etc/libvirt/qemu.conf
migration_address = 01.3.4.4

* # systemctl restart libvirtd

 ";​​;Test Case;RedHatEnterpriseLinux7/RHEL-131930
357;;;;;;;;;2;Start a guest on source host;​​;;RedHatEnterpriseLinux7/RHEL-131930
357;;;;;;;;;3;"Do migration:
 
* # virsh migrate $guest qemu+ssh://{target_ip}/system --live --verbose
";"Migration failed .
 
 Output:
 error: internal error: early end of file from monitor: possible problem:
 qemu-kvm: -incoming tcp:01.3.4.4:49152: Failed to bind socket: Cannot assign requested address";;RedHatEnterpriseLinux7/RHEL-131930
358;RHEL-131931;[Migration][--migrateuri] Specify migrate URI for live migration;Test matrix: see test plan;Fangge Jin (fjin);Critical;Positive;Not Automated;;1; Start a guest on source host;​​;Test Case;RedHatEnterpriseLinux7/RHEL-131931
358;;;;;;;;;2;"Do migration with --migrate-uri:
 
* # virsh migrate $guest qemu+ssh://{target ip}/system --live --verbose --migrateuri tcp://{target ip} 
";Migration succeeds.;;RedHatEnterpriseLinux7/RHEL-131931
359;RHEL-131939;IDM-SSSD-TC: : Performance: Enumerating large number of users makes sssd be hog the cpu for a long time;"Testcase for Bug - https://bugzilla.redhat.com/show_bug.cgi?id=888739 
";Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-131939
360;RHEL-131942;[Migration][--graphicsuri] Specify graphics URI for seamless graphics migration - port, tlsPort, tlsSubject;"Format:
 protocol://hostname[:port]/[?parameters]\&[parameter]
Example:
 spice://target.host.com:1234/?tlsPort=4567
Test matrix:
 
* port: valid, invalid
* tlsPort: valid, invalid
* port + tlsPort
* port + tlsPort + tlsSubject
";Fangge Jin (fjin);High;Positive;Manual Only;;1;"Prepare a guest with such setting:
 
* 1) with spice graphic
* 2) with spice secure channels
* 3) spice listens on 0.0.0.0
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-131942
360;;;;;;;;;2;"Check the spice port:
 
* # virsh dumpxml $guest |grep gra
";​​;;RedHatEnterpriseLinux7/RHEL-131942
360;;;;;;;;;3;"connect the guest via remote-viewer on third host
 
* # remote-viewer spice://$ip/?port=5900\&tls-port=5901 --spice-host- subject='C=IL,L=Raanana,O=Red Hat,CN=redhat' --spice-ca-file='/etc/pki /libvirt-spice/ca-cert.pem'
";​​;;RedHatEnterpriseLinux7/RHEL-131942
360;;;;;;;;;4;"Do migration with --graphicsuri and valid port:
 
* # virsh migrate --live guest qemu+ssh://{target ip}/system --graphicsuri spice://{target ip}:5900
 Note:
 
* Valid port is a port that the qemu really binds to on target host
* Chance the port number according to the real condition
";​​;;RedHatEnterpriseLinux7/RHEL-131942
360;;;;;;;;;5;Check spice client status;The spice client is still keeping connected after migration, can do operation in guest;;RedHatEnterpriseLinux7/RHEL-131942
360;;;;;;;;;6;Retest with invalid port, for example: 1234, and check libvirtd log;"* ""virsh migrate"" doesn't hang and migration succeeds.
* remote-viewer disconnects
* libvirtd log, port=1234:
 ""execute"":""client_migrate_info"",""arguments"":{""protocol"":""spice"",""hostname"":""2002::2"",""port"":1234,""tls-port"":5901,""cert-subject"":""C=IL,L=Raanana,O=Red Hat,CN=fjin-4-140""}
";;RedHatEnterpriseLinux7/RHEL-131942
360;;;;;;;;;7;Retest with valid tlsPort;The spice client is still keeping connected after migration, can do operation in guest;;RedHatEnterpriseLinux7/RHEL-131942
360;;;;;;;;;8;Retest with invalid tlsPort, for example: 2345, and check libvirtd log;"* ""virsh migrate"" doesn't hang and migration succeeds.
* remote-viewer disconnects
* libvirtd log, tls-port=2345:
 ""execute"":""client_migrate_info"",""arguments"":{""protocol"":""spice"",""hostname"":""2002::2"",""port"":5900,""tls-port"":2345,""cert-subject"":""C=IL,L=Raanana,O=Red Hat,CN=fjin-4-140""";;RedHatEnterpriseLinux7/RHEL-131942
360;;;;;;;;;9;Retest with valid port + tlsPort;The spice client is still keeping connected after migration, can do operation in guest;;RedHatEnterpriseLinux7/RHEL-131942
360;;;;;;;;;10;Retest with valid port + tlsPort + tlsSubject;The spice client is still keeping connected after migration, can do operation in guest;;RedHatEnterpriseLinux7/RHEL-131942
361;RHEL-131951;[disk format][luks] Support different cache mode when comparing images;Verify qemu-img compare with different cache mode(none, writeback, writethrough and unsafe) successfully.;Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Convert the existing luks image to a new luks image
 # qemu-img convert $BASE_KEY $CONV_KEY --image-opts $BASE_OPTS -O luks -o key-secret=sec-conv $CONV";"No error
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131951
361;;;;;;;;;2;"2. Compare the two images using different cache modes
 # for mode in writeback writethrough directsync unsafe; do 
      echo $mode
      time qemu-img compare -p -T ${mode} $BASE_KEY $CONV_KEY --image-opts $BASE_OPTS $CONV_OPTS
 done";Images are identical.;;RedHatEnterpriseLinux7/RHEL-131951
362;RHEL-131952;[disk format][luks] Allow qemu-img to bypass the host cache when comparing images;"Allow qemu-img to bypass the host cache. Use option ""-T"" as the switch for setting the source image cache mode";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Convert the existed luks image to a new luks image
 # qemu-img convert $BASE_KEY $CONV_KEY --image-opts $BASE_OPTS -O luks -o key-secret=sec-conv $CONV
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-131952
362;;;;;;;;;2;"2. Compare the the two images
 # strace -e trace=open -o compare.log  qemu-img compare -p $BASE_KEY $CONV_KEY --image-opts $BASE_OPTS $CONV_OPTS";Images are identical.;;RedHatEnterpriseLinux7/RHEL-131952
362;;;;;;;;;3;"3. check the output from the log
 
​​";"open(""base.luks"", O_RDONLY|O_CLOEXEC) = 11
 open(""convert.luks"", O_RDONLY|O_CLOEXEC) = 13";;RedHatEnterpriseLinux7/RHEL-131952
362;;;;;;;;;4;"4. Compare the the two images specifying the cache mode as 'none'
 # strace -e trace=open -o compare_bypass.log  qemu-img compare -p -T none $BASE_KEY $CONV_KEY --image-opts $BASE_OPTS $CONV_OPTS";Images are identical.;;RedHatEnterpriseLinux7/RHEL-131952
362;;;;;;;;;5;"5. check the output from the log
 
​​";"open(""base.luks"", O_RDONLY|O_DIRECT|O_CLOEXEC) = 11
 open(""convert.luks"", O_RDONLY|O_DIRECT|O_CLOEXEC) = 13";;RedHatEnterpriseLinux7/RHEL-131952
363;RHEL-131953;[disk format][luks] Show progress information on retrieval of Signal when comparing images;"Verify that qemu-img support to print progess information when the progress receives a ""SIGUSR1"" signal.";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Convert the existing luks image to a new luks image
 # qemu-img convert $BASE_KEY $CONV_KEY --image-opts $BASE_OPTS -O luks -o key-secret=sec-conv $CONV
​​";Succeed;Test Case;RedHatEnterpriseLinux7/RHEL-131953
363;;;;;;;;;2;"2. Compare the two images with option '-p'
 # qemu-img compare -p $BASE_KEY $CONV_KEY --image-opts $BASE_OPTS $CONV_OPTS";Should display progress like (xx/100%);;RedHatEnterpriseLinux7/RHEL-131953
363;;;;;;;;;3;"3. Compare the two images without option '-p'
 # qemu-img compare $BASE_KEY $CONV_KEY --image-opts $BASE_OPTS $CONV_OPTS";Should not display progress like (xx/100%);;RedHatEnterpriseLinux7/RHEL-131953
363;;;;;;;;;4;"4. Send  a SIGUSR1 signal
 # kill -SIGUSR1 `pidof qemu-img`";Should display progress like (xx/100%);;RedHatEnterpriseLinux7/RHEL-131953
364;RHEL-131955;[disk format][luks] Support to commit changes in its backing file;Create qcow2 image (external snapshot), all changes are merged to luks backing file after commit.;Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create a qcow2 snapshot based on the luks image
 # qemu-img create -f qcow2 $BASE_KEY -b ""$BASE_JSON"" $SN";​​;Test Case;RedHatEnterpriseLinux7/RHEL-131955
364;;;;;;;;;2;"2. Boot snapshot
 -object secret,id=sec0,data=base \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,file=sn.qcow2,backing.key-secret=sec0 \
 -device scsi-hd,id=image1,drive=drive_image1 \";Guest can boot up successfully;;RedHatEnterpriseLinux7/RHEL-131955
364;;;;;;;;;3;"3. Create temporary file sn_file inside the guest, then shutdown guest
​​";​​;;RedHatEnterpriseLinux7/RHEL-131955
364;;;;;;;;;4;"4. Commit the changes
 # qemu-img commit -f qcow2 $BASE_KEY $SN";Succeed;;RedHatEnterpriseLinux7/RHEL-131955
364;;;;;;;;;5;5. Boot the backing image;"No error, guest can boot up successfully
​​";;RedHatEnterpriseLinux7/RHEL-131955
364;;;;;;;;;6;"6. Check whether temporary file sn_file exists in the guest
​​";The file is present;;RedHatEnterpriseLinux7/RHEL-131955
365;RHEL-131956;[disk format][luks] qemu-img support to specify backing file for commit;"Verify qemu-img could specify one base image which is to commit by adding ""-b"" option.
";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create an image chain as below. Boot guest with the created image and create temporary files base_file, sn1_file, and sn2_file in turn. 
 Image chain: base.luks <- sn1.qcow2 <- sn2.qcow2
 
 # qemu-img create -f qcow2 $BASE_KEY -b ""$BASE_JSON"" $SN1
 # qemu-img create $BASE_KEY -f qcow2 -b $SN1 -F qcow2 $SN2";​​;Test Case;RedHatEnterpriseLinux7/RHEL-131956
365;;;;;;;;;2;"2. Commit the changes in base image
 # qemu-img commit $BASE_KEY -f qcow2 -b ""$BASE_JSON"" $SN2";TBD;;RedHatEnterpriseLinux7/RHEL-131956
365;;;;;;;;;3;3. Boot the base image;No error, guest can boot up successfully;;RedHatEnterpriseLinux7/RHEL-131956
365;;;;;;;;;4;4. Check whether temporary file sn1_file and sn2_file exist in the guest;The files are present;;RedHatEnterpriseLinux7/RHEL-131956
366;RHEL-131957;[disk format][luks] Support different cache mode when commiting changes;"Verify that all the changes are merged to the base image after commit with different cache mode(unsafe, writeback, writethrough and none).
";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create a qcow2 snapshot based on the luks image
 # qemu-img create -f qcow2 $BASE_KEY -b ""$BASE_JSON"" $SN";​​;Test Case;RedHatEnterpriseLinux7/RHEL-131957
366;;;;;;;;;2;"2. Boot snapshot
 -object secret,id=sec0,data=base \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,file=sn.qcow2,backing.key-secret=sec0 \
 -device scsi-hd,id=image1,drive=drive_image1 \";No error, guest can boot up successfully;;RedHatEnterpriseLinux7/RHEL-131957
366;;;;;;;;;3;3. Create temporary file sn_file in the guest;​​;;RedHatEnterpriseLinux7/RHEL-131957
366;;;;;;;;;4;"4. Commit changes using different cache mode(writeback writethrough directsync unsafe)
 # time qemu-img commit -t ${mode} -f qcow2 $BASE_KEY $SN";TBD;;RedHatEnterpriseLinux7/RHEL-131957
366;;;;;;;;;5;5. Boot the backing image;No error, guest can boot up successfully;;RedHatEnterpriseLinux7/RHEL-131957
366;;;;;;;;;6;"6. Check whether temporary file sn_file exists in the guest
​​";The file is present;;RedHatEnterpriseLinux7/RHEL-131957
367;RHEL-131958;[disk format][luks] Allow qemu-img to bypass the host cache when commiting changes;"Allow qemu-img to bypass the host cache. Use option ""-t"" as the switch for setting the target image cache mode";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create a qcow2 snapshot based on the luks image
 # qemu-img create -f qcow2 $BASE_KEY -b ""$BASE_JSON"" $SN";​​;Test Case;RedHatEnterpriseLinux7/RHEL-131958
367;;;;;;;;;2;"2. Boot snapshot
 -object secret,id=sec0,data=base \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,file=sn.qcow2,backing.key-secret=sec0 \
 -device scsi-hd,id=image1,drive=drive_image1 \";No error, guest can boot up successfully;;RedHatEnterpriseLinux7/RHEL-131958
367;;;;;;;;;3;"3. Create temporary file sn_file inside the guest, then shutdown guest
​​";​​;;RedHatEnterpriseLinux7/RHEL-131958
367;;;;;;;;;4;"4. Commit changes
 # strace -e trace=open -o commit.log qemu-img commit -f qcow2 $BASE_KEY $SN";​​;;RedHatEnterpriseLinux7/RHEL-131958
367;;;;;;;;;5;"5. Check the output from the log
​​";"open(""sn.qcow2"", O_RDWR|O_CLOEXEC)      = 11
 open(""base.luks"", O_RDONLY|O_CLOEXEC) = 13";;RedHatEnterpriseLinux7/RHEL-131958
367;;;;;;;;;6;"6. Commit changes specifying the cache mode as 'none'
 # strace -e trace=open -o commit_bypass.log qemu-img commit -t none -f qcow2 $BASE_KEY $SN";​​;;RedHatEnterpriseLinux7/RHEL-131958
367;;;;;;;;;7;"7. Check the output from the log
​​";"open(""sn.qcow2"", O_RDWR|O_DIRECT|O_CLOEXEC) = 11
 open(""base.luks"", O_RDONLY|O_DIRECT|O_CLOEXEC) = 13";;RedHatEnterpriseLinux7/RHEL-131958
368;RHEL-131959;[disk format][luks] Show progress information on retrieval of Signal when commiting changes;"Verify that qemu-img support to print progess information when the progress receives a ""SIGUSR1"" signal.
";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create a qcow2 snapshot based on the luks image
 # qemu-img create -f qcow2 $BASE_KEY -b ""$BASE_JSON"" $SN";​​;Test Case;RedHatEnterpriseLinux7/RHEL-131959
368;;;;;;;;;2;"2. Boot snapshot and create temporary file sn_file in the guest
 -object secret,id=sec0,data=base \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,file=sn.qcow2,backing.key-secret=sec0 \
 -device scsi-hd,id=image1,drive=drive_image1 \";Guest can boot up successfully;;RedHatEnterpriseLinux7/RHEL-131959
368;;;;;;;;;3;"3. Commit changes with option '-p'
 #  qemu-img commit -p -f qcow2 $BASE_KEY $SN";"Should display progress like (xx/100%)
​​";;RedHatEnterpriseLinux7/RHEL-131959
368;;;;;;;;;4;"4. Commit changes without option '-p'
 #  qemu-img commit -f qcow2 $BASE_KEY $SN";Should not display progress like (xx/100%);;RedHatEnterpriseLinux7/RHEL-131959
368;;;;;;;;;5;"5. Send  a SIGUSR1 signal
 # kill -SIGUSR1 `pidof qemu-img`";Should display progress like (xx/100%);;RedHatEnterpriseLinux7/RHEL-131959
369;RHEL-131960;[disk format][luks] Change the backing file from luks image to qcow2 image;"Verify that the image is identical after rebase to a new qcow2 backing file, while the original backing file is luks format.
";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create a snapshot based on the luks image. Boot the images and create temporary files in turn.
 # qemu-img create -f qcow2 $BASE_KEY -b ""$BASE_JSON""  $SN";​​;Test Case;RedHatEnterpriseLinux7/RHEL-131960
369;;;;;;;;;2;"2. Create a new qcow2 image
 # qemu-img create -f qcow2 $NEW 20G";​​;;RedHatEnterpriseLinux7/RHEL-131960
369;;;;;;;;;3;"3. Change the backing file from luks image to a new qcow2 image
 # qemu-img rebase -p $BASE_KEY -f qcow2 -b $NEW -F qcow2 $SN";"No error, output is like following:
     (100.00/100%)";;RedHatEnterpriseLinux7/RHEL-131960
369;;;;;;;;;4;"4. Get information of the snapshot
 # qemu-img info $SN";"image: sn.qcow2
 file format: qcow2
 virtual size: 80M (83886080 bytes)
 disk size: 128M
 cluster_size: 65536
 backing file: new.qcow2
 backing file format: qcow2
 Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false
​​";;RedHatEnterpriseLinux7/RHEL-131960
369;;;;;;;;;5;"5. Boot the snapshot and check the temporary files exist in the guest
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,file=sn.qcow2 \
 -device scsi-hd,id=image1,drive=drive_image1 \";​​;;RedHatEnterpriseLinux7/RHEL-131960
370;RHEL-131961;[disk format][luks] Change the backing file from qcow2 image to luks image;"The temporary files should be existed after changing the backing file from qcow2 image to luks image.
";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create an image chain as below. Boot guest with the created image and create temporary files base_file, sn1_file, and sn2_file in turn. 
 Image chain: base.luks <- sn1.qcow2 <- sn2.qcow2
 
 # qemu-img create -f qcow2 $BASE_KEY -b ""$BASE_JSON"" $SN1
 # qemu-img create $BASE_KEY -f qcow2 -b $SN1 -F qcow2 $SN2";​​;Test Case;RedHatEnterpriseLinux7/RHEL-131961
370;;;;;;;;;2;"2. Change the backing file from qcow2 image to luks image
 # qemu-img rebase $BASE_KEY -p -f qcow2 -b ""$BASE_JSON"" -F luks $SN2";"No error, output is like following:
     (100.00/100%)";;RedHatEnterpriseLinux7/RHEL-131961
370;;;;;;;;;3;"3. Get information of the snapshot
 # qemu-img info $SN2";"image: sn2.qcow2
 file format: qcow2
 virtual size: 80M (83886080 bytes)
 disk size: 196K
 cluster_size: 65536
 backing file: json:{""driver"": ""luks"", ""file"": {""driver"": ""file"", ""filename"": ""base.luks""}, ""key-secret"": ""sec0""}
 backing file format: luks
 Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false
​​";;RedHatEnterpriseLinux7/RHEL-131961
370;;;;;;;;;4;"4. Boot the snapshot and check the temporary files base, sn1, and sn2 exist in the guest
 -object secret,id=sec0,data=base \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,backing.key-secret=sec0,file=sn2.qcow2 \
 -device scsi-hd,id=image1,drive=drive_image1 \";​​;;RedHatEnterpriseLinux7/RHEL-131961
371;RHEL-131962;[disk format][luks] Rebase snapshot onto no backing file;"Verify the snapshot works well after rebase to a null backing file with -b """" option.
";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create a snapshot based on the luks image. Boot the images and create temporary files
 # qemu-img create -f qcow2 $BASE_KEY -b ""$BASE_JSON"" $SN";​​;Test Case;RedHatEnterpriseLinux7/RHEL-131962
371;;;;;;;;;2;"2. Change the backing file from luks image to a new qcow2 image
 # qemu-img rebase -p $BASE_KEY -f qcow2 -b """" $SN";"No error, output is like following:
     (100.00/100%)";;RedHatEnterpriseLinux7/RHEL-131962
371;;;;;;;;;3;"3. Get information of the snapshot
 # qemu-img info $SN";"No ""backing file"" from the output
 image: sn.qcow2
 file format: qcow2
 virtual size: 80M (83886080 bytes)
 disk size: 128M
 cluster_size: 65536
 Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false
​​";;RedHatEnterpriseLinux7/RHEL-131962
371;;;;;;;;;4;"4. Boot the snapshot
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,file=sn.qcow2 \
 -device scsi-hd,id=image1,drive=drive_image1 \";No error, guest can boot up successfully;;RedHatEnterpriseLinux7/RHEL-131962
371;;;;;;;;;5;5. Check the temporary files exist in the guest;The file is present;;RedHatEnterpriseLinux7/RHEL-131962
372;RHEL-131963;[disk format][luks] Change the backing file using unsafe mode;"Verify the snapshot image works well after change the backing file using unsafe mode by adding ""-u"" option.
";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create an image chain as below. Boot guest with the created image and create temporary files base_file, and sn2_file in turn.
 (Note: When doing unsafe rebase test, we cannot create file in sn1. qemu snapshots are on a
 block device level, not on the file system level. So snapshot 1 contains the data that you
 wrote, but also changed file system metadata. And by deleting the snapshot, you destroy the
 file system metadata. If delete sn1, then sn2 cannot boot up)
 
 Image chain: base.luks <- sn1.qcow2 <- sn2.qcow2
 # qemu-img create -f qcow2 $BASE_KEY -b ""$BASE_JSON"" $SN1
 # qemu-img create $BASE_KEY -f qcow2 -b $SN1 -F qcow2 $SN2";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131963
372;;;;;;;;;2;2. Delete the snapshot sn1;"
​​";;RedHatEnterpriseLinux7/RHEL-131963
372;;;;;;;;;3;"3. Change the backing file from qcow2 image to luks image
 # qemu-img rebase $BASE_KEY -p -u -f qcow2 -b ""$BASE_JSON"" -F luks $SN2
​​";"No error, output is like following:
     (100.00/100%)";;RedHatEnterpriseLinux7/RHEL-131963
372;;;;;;;;;4;"4. Get information of the snapshot
 # qemu-img info $SN2
​​";"image: sn2.qcow2
 file format: qcow2
 virtual size: 80M (83886080 bytes)
 disk size: 196K
 cluster_size: 65536
 backing file: json:{""driver"": ""luks"", ""file"": {""driver"": ""file"", ""filename"": ""base.luks""}, ""key-secret"": ""sec0""}
 backing file format: luks
 Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false
​​";;RedHatEnterpriseLinux7/RHEL-131963
372;;;;;;;;;5;"5. Boot the snapshot
 -object secret,id=sec0,data=base \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,backing.key-secret=sec0,file=$SN2 \
 -device scsi-hd,id=image1,drive=drive_image1 \";No error, guest can boot up successfully;;RedHatEnterpriseLinux7/RHEL-131963
372;;;;;;;;;6;"6. Check the temporary files exist in the guest
​​";base_file and sn2_file exist in the guest;;RedHatEnterpriseLinux7/RHEL-131963
373;RHEL-131964;[disk format][luks] Support cache mode when changing backing file;"Verify that the temporary files in the snapshot still existed after rebase the snapshot from qcow2 image to luks image with different cache mode(none, unsafe, writeback and writethrough).
";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create an image chain as below. Boot guest with the created image and create temporary files base_file, sn1_file, and sn2_file in turn. 
 
 Image chain: base.luks <- sn1.qcow2 <- sn2.qcow2
 # qemu-img create -f qcow2 $BASE_KEY -b ""$BASE_JSON"" $SN1
 # qemu-img create $BASE_KEY -f qcow2 -b $SN1 -F qcow2 $SN2";​​;Test Case;RedHatEnterpriseLinux7/RHEL-131964
373;;;;;;;;;2;"2. Change the backing file from qcow2 image to luks image using different cache mode (writeback writethrough directsync unsafe)
 # time qemu-img rebase $BASE_KEY -p -t ${mode} -T ${mode} -f qcow2 -b ""$BASE_JSON"" -F luks $SN2";"No error, output is like following:
     (100.00/100%)

 real    0m9.290s
 user    0m9.258s
 sys    0m0.020s";;RedHatEnterpriseLinux7/RHEL-131964
373;;;;;;;;;3;"3. Get information of the snapshot
 # qemu-img info $SN2";"image: sn2.qcow2
 file format: qcow2
 virtual size: 80M (83886080 bytes)
 disk size: 196K
 cluster_size: 65536
 backing file: json:{""driver"": ""luks"", ""file"": {""driver"": ""file"", ""filename"": ""base.luks""}, ""key-secret"": ""sec0""}
 backing file format: luks
 Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false
​​";;RedHatEnterpriseLinux7/RHEL-131964
373;;;;;;;;;4;"4. Boot the snapshot
 -object secret,id=sec0,data=base \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,backing.key-secret=sec0,file=$SN2 \
 -device scsi-hd,id=image1,drive=drive_image1 \";​​;;RedHatEnterpriseLinux7/RHEL-131964
373;;;;;;;;;5;"5. Check the temporary files exit in the guest
​​";base_file, sn1_file, and sn2_file exist in the guest;;RedHatEnterpriseLinux7/RHEL-131964
374;RHEL-131972;[disk format][luks]Allow qemu-img to bypass the host cache when changing backing file;"Allow qemu-img to bypass the host cache. Use option ""-T"" and ""-t"" as the switch for setting the source image and target cache mode.";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create an image chain as below. Boot guest with the created image and create temporary files base_file, sn1_file, and sn2_file in turn. 
 Image chain: base.luks <- sn1.qcow2 <- sn2.qcow2
 
 # qemu-img create -f qcow2 $BASE_KEY -b ""$BASE_JSON"" $SN1
 # qemu-img create $BASE_KEY -f qcow2 -b $SN1 -F qcow2 $SN2";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131972
374;;;;;;;;;2;"2. Change the backing file from qcow2 image to luks image
 # strace -e trace=open -o rebase.log qemu-img rebase $BASE_KEY -p -f qcow2 -b ""$BASE_JSON"" -F luks $SN2";"
​​";;RedHatEnterpriseLinux7/RHEL-131972
374;;;;;;;;;3;"3. Check the output from the log
​​";"open(""sn2.qcow2"", O_RDWR|O_CLOEXEC)     = 11
 open(""sn1.qcow2"", O_RDONLY|O_CLOEXEC)   = 17
 open(""base.luks"", O_RDONLY|O_CLOEXEC) = 21";;RedHatEnterpriseLinux7/RHEL-131972
374;;;;;;;;;4;"4. Change the backing file from qcow2 image to luks image specifying the cache mode as 'none'
 # strace -e trace=open -o rebase_bypass.log qemu-img rebase -t none -T none $BASE_KEY -p -f qcow2 -b ""$BASE_JSON"" -F luks $SN2";"
​​";;RedHatEnterpriseLinux7/RHEL-131972
374;;;;;;;;;5;"5. Check the output from the log
​​";"open(""sn2.qcow2"", O_RDWR|O_DIRECT|O_CLOEXEC) = 11
 open(""sn1.qcow2"", O_RDONLY|O_DIRECT|O_CLOEXEC) = 17
 open(""base.luks"", O_RDONLY|O_DIRECT|O_CLOEXEC) = 21";;RedHatEnterpriseLinux7/RHEL-131972
375;RHEL-131973;[disk format][luks]Show progress information on retrieval of Signal when changing backing file;"Verify that qemu-img support to print progess information when the progress receives a ""SIGUSR1"" signal.
";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create an image chain as below. Boot guest with the created image and create temporary files base_file, sn1_file, and sn2_file in turn.
 Image chain: base.luks <- sn1.qcow2 <- sn2.qcow2
 
 # qemu-img create -f qcow2 $BASE_KEY -b ""$BASE_JSON"" $SN1
 # qemu-img create $BASE_KEY -f qcow2 -b $SN1 -F qcow2 $SN2
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131973
375;;;;;;;;;2;"2. Change the backing file from qcow2 image to luks image with option '-p'
 # qemu-img rebase $BASE_KEY -p -f qcow2 -b ""$BASE_JSON"" -F luks $SN2";Should display progress like (xx/100%);;RedHatEnterpriseLinux7/RHEL-131973
375;;;;;;;;;3;"3. Change the backing file from qcow2 image to luks image without option '-p'
 # qemu-img rebase $BASE_KEY -f qcow2 -b ""$BASE_JSON"" -F luks $SN2";Should not display progress like (xx/100%);;RedHatEnterpriseLinux7/RHEL-131973
375;;;;;;;;;4;"4. Send  a SIGUSR1 signal.
 # kill -SIGUSR1 `pidof qemu-img`";Should display progress like (xx/100%);;RedHatEnterpriseLinux7/RHEL-131973
376;RHEL-131974;[disk format][luks]Support to enlarge or shrink the image size;"Verify qemu-img resize could enlarge or shrink a image size.
";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create image
 # qemu-img create -f luks $BASE_KEY -o key-secret=sec0 $BASE 5G";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131974
376;;;;;;;;;2;"2. Enlarge the image size
 # qemu-img resize $BASE_KEY --image-opts $BASE_OPTS +5G";Image resized.;;RedHatEnterpriseLinux7/RHEL-131974
376;;;;;;;;;3;"3. Get information of the image
 # qemu-img info $BASE";"image: base.luks
 file format: luks
 virtual size: 10G (10737418240 bytes)
 disk size: 256K
 encrypted: yes
 
 ... ...";;RedHatEnterpriseLinux7/RHEL-131974
376;;;;;;;;;4;"4. Shrink the image size
 # qemu-img resize --shrink $BASE_KEY --image-opts $BASE_OPTS -6G";Image resized.;;RedHatEnterpriseLinux7/RHEL-131974
376;;;;;;;;;5;"5. Get information of the image
 # qemu-img info $BASE";"image: base.luks
 file format: luks
 virtual size: 4.0G (4294967296 bytes)
 disk size: 256K
 encrypted: yes
 ... ...
​​";;RedHatEnterpriseLinux7/RHEL-131974
377;RHEL-131975;[disk format][luks]Support preallocation of the new growing parts of the image;"Verify qemu-img support preallocation with different mode(off, falloc and full) of the new parts of a image.
";Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create image
 # qemu-img create -f luks $BASE_KEY -o key-secret=sec0 $BASE 1G";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131975
377;;;;;;;;;2;"2. Resize the image with ""full"" preallocation mode
 # qemu-img resize --preallocation=full $BASE_KEY --image-opts $BASE_OPTS +1G";Image resized.;;RedHatEnterpriseLinux7/RHEL-131975
377;;;;;;;;;3;"3. Get information of the image
 # qemu-img info $BASE";"Disk size should be ""1G""";;RedHatEnterpriseLinux7/RHEL-131975
377;;;;;;;;;4;"4. Resize image with ""falloc"" preallocation mode
 # qemu-img resize --preallocation=falloc $BASE_KEY --image-opts $BASE_OPTS +1G";Image resized.;;RedHatEnterpriseLinux7/RHEL-131975
377;;;;;;;;;5;"5. Get information of the image
 # qemu-img info $BASE";"Disk size should be ""2G""";;RedHatEnterpriseLinux7/RHEL-131975
377;;;;;;;;;6;"6. Resize image with ""off"" preallocation mode
 # qemu-img resize --preallocation=off $BASE_KEY --image-opts $BASE_OPTS +1G";Image resized.;;RedHatEnterpriseLinux7/RHEL-131975
377;;;;;;;;;7;"7. Get information of the image
 # qemu-img info $BASE";"Image should not be allocated, disk size is still 2.0G
​​";;RedHatEnterpriseLinux7/RHEL-131975
378;RHEL-131976;[disk format][luks]Reject to get information of a running luks image;Verify that qemu should reject to get information of a running luks image, but support to make the locked image to be force shared;Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Boot vm with the image
 -object secret,id=sec0,data=base \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=luks,file=base.luks,key-secret=sec0 \
 -device scsi-hd,id=image1,drive=drive_image1 \";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131976
378;;;;;;;;;2;"2. Get information of the image
 # qemu-img info base.luks";"Should fail as follows:
 qemu-img: Could not open 'base.luks': Failed to get shared ""write"" lock
 Is another process using the image?";;RedHatEnterpriseLinux7/RHEL-131976
378;;;;;;;;;3;"3. Get image info with force shared option ""-U""
 # qemu-img info base.luks -U";"Should succeed
​​";;RedHatEnterpriseLinux7/RHEL-131976
379;RHEL-131977;[disk format][luks]Reject to boot a running luks image;Verify that the same image cannot be booted twice;Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Boot vm with the image
 -object secret,id=sec0,data=base \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=luks,file=base.luks,key-secret=sec0 \
 -device scsi-hd,id=image1,drive=drive_image1 \";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131977
379;;;;;;;;;2;"2. Boot vm with the image again
​​";"The second boot should fail as follows:
 Failed to get ""write"" lock
 Is another process using the image?";;RedHatEnterpriseLinux7/RHEL-131977
380;RHEL-131978;[disk format][luks]Reject to get a backing file chain from a snapshot when its backing file is running;Verify that qemu should reject to get a backing file chain from a snapshot when its backing file is running;Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create a snapshot based on the luks image
 # qemu-img create -f qcow2 $BASE_KEY -b ""$BASE_JSON"" $SN";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131978
380;;;;;;;;;2;"2. Boot vm with the backing image
 -object secret,id=sec0,data=base \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \sn.
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=luks,file=base.luks,key-secret=sec0 \
 -device scsi-hd,id=image1,drive=drive_image1 \";"
​​";;RedHatEnterpriseLinux7/RHEL-131978
380;;;;;;;;;3;"3. Get information of the snapshot with option ""--backing-chain""
 # qemu-img info $SN --backing-chain";"Should fail as follows:
 qemu-img: Could not open 'base.luks': Failed to get shared ""write"" lock
 Is another process using the image?";;RedHatEnterpriseLinux7/RHEL-131978
380;;;;;;;;;4;"4. Get information of the snapshot with option ""--backing-chain"" and ""-U""
 # qemu-img info $SN --backing-chain -U";"Should succeed
​​";;RedHatEnterpriseLinux7/RHEL-131978
381;RHEL-131979;[disk format][luks]Support to get information of snapshot when the backing file is running;Verify that qemu supports to get information of snapshot when the backing file is running;Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create a snapshot based on the luks image
 # qemu-img create -f qcow2 $BASE_KEY -b ""$BASE_JSON"" $SN";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131979
381;;;;;;;;;2;"2. Boot vm with the backing image
 -object secret,id=sec0,data=base \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=luks,file=base.luks,key-secret=sec0 \
 -device scsi-hd,id=image1,drive=drive_image1 \";"
​​";;RedHatEnterpriseLinux7/RHEL-131979
381;;;;;;;;;3;"3. Get information of the snapshot
 # qemu-img info $SN";"Should succeed
​​";;RedHatEnterpriseLinux7/RHEL-131979
382;RHEL-131980;[disk format][luks]Support to get information of backing file when the snapshot is running;Verify that qemu supports to get information of backing file when the snapshot is running;Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create a snapshot based on the luks image
 # qemu-img create -f qcow2 $BASE_KEY -b ""$BASE_JSON"" $SN";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131980
382;;;;;;;;;2;"2. Boot vm with the snapshot
 -object secret,id=sec0,data=base \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3\
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,backing.key-secret=sec0,file=sn.qcow2 \
 -device scsi-hd,id=image1,drive=drive_image1 \";"
​​";;RedHatEnterpriseLinux7/RHEL-131980
382;;;;;;;;;3;"3. Get information of the backing file
 # qemu-img info $BASE";Should succeed;;RedHatEnterpriseLinux7/RHEL-131980
383;RHEL-131981;[disk format][luks]Reject to boot backing image and snapshot simultaneously;Verify that the backing image and its snapshot cannot be booted simultaneously;Yilin Zhang (yilzhang);High;Positive;Manual Only;;1;"1. Create a snapshot based on the luks image
 # qemu-img create -f qcow2 $BASE_KEY -b ""$BASE_JSON"" $SN";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131981
383;;;;;;;;;2;"2. Boot vm with the backing image
 -object secret,id=sec0,data=base \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3 \
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=luks,file=base.luks,key-secret=sec0 \
 -device scsi-hd,id=image1,drive=drive_image1 \";"
​​";;RedHatEnterpriseLinux7/RHEL-131981
383;;;;;;;;;3;"3. Boot vm with the snapshot
 -object secret,id=sec0,data=base \
 -device virtio-scsi-pci,id=virtio_scsi_pci0,bus=pci.0,addr=0x3\
 -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,backing.key-secret=sec0,file=sn.qcow2 \
 -device scsi-hd,id=image1,drive=drive_image1 \";"Should fail as follows:
 Failed to get ""write"" lock
 Is another process using the image?";;RedHatEnterpriseLinux7/RHEL-131981
384;RHEL-131982;[disk format][luks]Test suite for the I/O layer of qemu;Test for disk image format and block layer features. All the test should PASS for luks.;Yilin Zhang (yilzhang);Critical;Positive;Manual Only;;1;"1. Check the installed qemu and get the source code
 # brew download-build --rpm qemu-kvm-rhev-2.10.0-17.el7.src.rpm
 # rpm -ivhf qemu-kvm-rhev-2.10.0-17.el7.src.rpm
 # rpmbuild -bp /root/rpmbuild/SPECS/qemu-kvm.spec --nodeps
 
 for rhel8
 # git clone git://git.host.prod.eng.bos.redhat.com/virt-rhel8-qemu-kvm.git
 # cd virt-rhel8-qemu-kvm
 # git checkout $tag/branch (the tag/branch should be matched with the qemu version which is tested by you!)
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131982
384;;;;;;;;;2;"2. Generate common.env and export qemu-kvm to the environment
 # cd /root/rpmbuild/BUILD/qemu-2.10.0
 # ./configure 
 # export QEMU_PROG=/usr/libexec/qemu-kvm
 # export QEMU_IMG_PROG=/usr/bin/qemu-img
 # export QEMU_IO_PROG=/usr/bin/qemu-io
 # export QEMU_NBD_PROG=/usr/bin/qemu-nbd

 for rhel8
 # make -C redhat rh-env-prep
 # export QEMU_PROG=/usr/libexec/qemu-kvm
 # export QEMU_IMG_PROG=/usr/bin/qemu-img
 # export QEMU_IO_PROG=/usr/bin/qemu-io
 # export QEMU_NBD_PROG=/usr/bin/qemu-nbd
";"
​​";;RedHatEnterpriseLinux7/RHEL-131982
384;;;;;;;;;3;"3. Run the tests
 # cd tests/qemu-iotests
 # ./check -luks";"All the test should PASS
 For each failure, pls re-check the test scirpt **xxx** in the the suite before submit
 bug.";;RedHatEnterpriseLinux7/RHEL-131982
385;RHEL-131983;[disk format][luks]Kill qemu process after finishing writing data in the guest;"Write data in the guest, after write finish and sync, kill qemu from host. After guest boots up, check the file should be the same as the file before killing qemu.
";Yilin Zhang (yilzhang);Low;Positive;Manual Only;;1;1. Boot a guest with luks image;​​;Test Case;RedHatEnterpriseLinux7/RHEL-131983
385;;;;;;;;;2;"2. Create a file in the guest
 # dd if=/dev/urandom of=file bs=1M count=4096
 # md5sum file
 # sync
 
 for windows guest( get dd and md5sum from winutils.iso, get sync from http://technet.microsoft.com/en-us/sysinternals/bb897438.aspx ):
 #dd if=/dev/random of=file1 conv=fsync bs=1M count=512
 #md5sum file1
 #sync(require administrator privileges to run)";​​;;RedHatEnterpriseLinux7/RHEL-131983
385;;;;;;;;;3;"3. Killl qemu process
 # kill -9 `pidof qemu-kvm`";​​;;RedHatEnterpriseLinux7/RHEL-131983
385;;;;;;;;;4;4. Boot the guest again and check the md5 value of file in the guest;md5sum value should be identical;;RedHatEnterpriseLinux7/RHEL-131983
386;RHEL-131984;[disk format][luks]Kill qemu process during writing data in the guest;"Write data in the guest, then kill qemu from host during writing. Check the image could be booted and work well
";Yilin Zhang (yilzhang);Low;Positive;Manual Only;;1;1. Boot a guest with luks image;"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131984
386;;;;;;;;;2;"2. Write data in the guest
 # dd if=/dev/urandom of=file bs=1M count=4096
​​";"
​​";;RedHatEnterpriseLinux7/RHEL-131984
386;;;;;;;;;3;"3. Killl qemu process during writing data
 # kill -9 `pidof qemu-kvm`";"
​​";;RedHatEnterpriseLinux7/RHEL-131984
386;;;;;;;;;4;"4. Boot the guest again
​​";Guest could boot successfully and work well;;RedHatEnterpriseLinux7/RHEL-131984
387;RHEL-131985;[disk format][luks]Guest could work well after making guest BOSD;Write data inside guest. Make guest BSOD or kernel oops. Then reboot guest and no error was found.;Yilin Zhang (yilzhang);Low;Positive;Manual Only;;1;1. Boot a guest with luks image;"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131985
387;;;;;;;;;2;"2. Write data in the guest
 for linux guest:
 #echo 1 >/proc/sys/kernel/panic_on_io_nmi
 #echo 1 >/proc/sys/kernel/unknown_nmi_panic
 #echo 1 >/proc/sys/kernel/panic_on_unrecovered_nmi
 # dd if=/dev/urandom of=file bs=1M count=4096
 
 for windows guest( get fio from winutils.iso):
 #fio --filename=G\:\file --direct=1 --rw=randwrite --bs=1M --size=100M --name=test --iodepth=1 
​​";"
​​";;RedHatEnterpriseLinux7/RHEL-131985
387;;;;;;;;;3;"3. Make guests BSOD via qmp
 3.1 Execute below command first
 {""execute"": ""qmp_capabilities""}
 3.2 Execute BSOD
 {""execute"":""inject-nmi""}";"After 3.1:
 {""execute"": ""qmp_capabilities""}
 {""return"": {}}
 After 3.2:
 {""execute"":""inject-nmi""}
 {""return"": {}}
​​";;RedHatEnterpriseLinux7/RHEL-131985
387;;;;;;;;;4;4. Check guest could boot successfully and work well;Guests start normal;;RedHatEnterpriseLinux7/RHEL-131985
388;RHEL-131986;[disk format][luks]Guest could work well after storage outage has been resolved;Verify that guest could work well after storage outage has been resolved;Yilin Zhang (yilzhang);Low;Positive;Manual Only;;1;"1. Boot a guest with two luks images with the options ""werror=stop,rerror=stop"", one of them is based on network storage backend";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131986
388;;;;;;;;;2;"2. Copy file in the guest
 # dd if=/home/file of=/extradisk/file
​​";"
​​";;RedHatEnterpriseLinux7/RHEL-131986
388;;;;;;;;;3;"3. Make storage outage
 When the image in on nfs server:
 # iptables -A OUTPUT -j REJECT -d 10.73.194.27 -p tcp --dport 2049
 Wait a period of time(depend on the timeo you set for soft nfs)
 # iptables -D OUTPUT -j REJECT -d 10.73.194.27 -p tcp --dport 2049";"
​​";;RedHatEnterpriseLinux7/RHEL-131986
388;;;;;;;;;4;4. Check the status of guest except on hard mount nfs;"Should be ""VM status: paused (io-error)""";;RedHatEnterpriseLinux7/RHEL-131986
388;;;;;;;;;5;5. Wait command dd finished, and check the md5 value between the two files;md5sum value should be identical;;RedHatEnterpriseLinux7/RHEL-131986
389;RHEL-131988;[disk format][qcow2] Reject to boot a running qcow2 image;Verify that the same image cannot be booted twice;Yilin Zhang (yilzhang);High;Positive;Not Automated;;1;1. Boot vm with the image;Succeed;Test Case;RedHatEnterpriseLinux7/RHEL-131988
389;;;;;;;;;2;"2. Boot the same image again
";"The second boot should fail as follows:
 qemu-kvm: -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,file=base.qcow2: Failed to get ""write"" lock
 Is another process using the image?
";;RedHatEnterpriseLinux7/RHEL-131988
390;RHEL-131989;[disk format][qcow2] Reject to get a backing file chain from a snapshot when its backing file is running;Verify that qemu should reject to get a backing file chain from a snapshot when its backing file is running;Yilin Zhang (yilzhang);High;Positive;Automated;;1;"1. Create a snapshot based on the qcow2 image
 # qemu-img create -f qcow2 -b base.qcow2 sn.qcow2
​​";"Create snapshot successfully.
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131989
390;;;;;;;;;2;2. Boot vm with the base image;"
​​";;RedHatEnterpriseLinux7/RHEL-131989
390;;;;;;;;;3;"3. Get information of the snapshot with option ""--backing-chain"" while the base.img is running.
 # qemu-img info sn.qcow2 --backing-chain";"Should fail as follows:
 qemu-img: Could not open 'base.qcow2': Failed to get shared ""write"" lock
 Is another process using the image?";;RedHatEnterpriseLinux7/RHEL-131989
390;;;;;;;;;4;"4. Get information of the snapshot with option ""--backing-chain"" and ""-U"" while the base.img is running.
 # qemu-img info sn.qcow2 --backing-chain -U";"Should succeed, the result should as below.
 # qemu-img info sn.qcow2 --backing-chain -U
 image: sn.qcow2
 file format: qcow2
 virtual size: 10G (10737418240 bytes)
 disk size: 196K
 cluster_size: 65536
 backing file: base.qcow2
 Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false
 
 image: base.qcow2
 file format: qcow2
 virtual size: 10G (10737418240 bytes)
 disk size: 196K
 cluster_size: 65536
 Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false
 
 
​​";;RedHatEnterpriseLinux7/RHEL-131989
391;RHEL-131990;[disk format][qcow2] Support to get information of snapshot when the backing file is running;Verify that qemu supports to get information of snapshot when the backing file is running;Yilin Zhang (yilzhang);High;Positive;Automated;;1;1. Create a snapshot based on the qcow2 image;"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131990
391;;;;;;;;;2;2. Boot vm with the base image;"
​​";;RedHatEnterpriseLinux7/RHEL-131990
391;;;;;;;;;3;"3. Get information of the snapshot
 # qemu-img info sn.qcow2";"Should succeed, the result should present as below.
 # qemu-img info sn.qcow2 
 image: sn.qcow2
 file format: qcow2
 virtual size: 10G (10737418240 bytes)
 disk size: 196K
 cluster_size: 65536
 backing file: base.qcow2
 Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false
 
 
 
​​";;RedHatEnterpriseLinux7/RHEL-131990
392;RHEL-131991;[disk format][qcow2] Support to get information of backing file when the snapshot is running;Verify that qemu supports to get information of backing file when the snapshot is running;Yilin Zhang (yilzhang);High;Positive;Automated;;1;1. Create a snapshot based on the qcow2 image;"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131991
392;;;;;;;;;2;2. Boot vm with the snapshot;"
​​";;RedHatEnterpriseLinux7/RHEL-131991
392;;;;;;;;;3;"3. Get information of the backing file
 # qemu-img info base.qcow2";"Should succeed, and the result should present like below.
 (Note: This is allowed, as backing files are used by snapshot as ""readonly"", so ""qemu-img info"" opening it readonly is allowed).
 # qemu-img info base.qcow2
 image: base.qcow2
 file format: qcow2
 virtual size: 10G (10737418240 bytes)
 disk size: 196K
 cluster_size: 65536
 Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false
";;RedHatEnterpriseLinux7/RHEL-131991
393;RHEL-131992;[disk format][qcow2] Reject to boot backing image and snapshot simultaneously;Verify that the backing image and its snapshot cannot be booted simultaneously;Yilin Zhang (yilzhang);High;Positive;Not Automated;;1;1. Create a snapshot based on the qcow2 image;"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-131992
393;;;;;;;;;2;2. Boot vm with the backing image;"
​​";;RedHatEnterpriseLinux7/RHEL-131992
393;;;;;;;;;3;3. Boot vm with the snapshot;"Should fail as follows:
 qemu-kvm: -drive id=drive_image1,if=none,snapshot=off,aio=threads,cache=none,format=qcow2,file=sn.qcow2: Could not open backing file: Failed to get shared ""write"" lock
 Is another process using the image?
​​";;RedHatEnterpriseLinux7/RHEL-131992
394;RHEL-132003;[Migration] Do seamless spice migration with various spice listen settings;Test matrix: see test plan;Fangge Jin (fjin);High;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-132003
395;RHEL-132004;Start multiple guests with passthroughed vGPU;Need to test both NVIDIA and Intel kvmGT;Fangge Jin (fjin);High;Positive;Manual Only;;1; Create multiple vGPUs and start multiple guests, each guest with one vGPU;Guest starts successfully;Test Case;RedHatEnterpriseLinux7/RHEL-132004
396;RHEL-132007;[nodedev-*][--cap][mdev] List->dumpxml for a node device with  mdev capability - vGPU;"Need to test both NVIDIA vGPU and Intel kvmGT vGPU.
 
 Bug 1463285 - mediated devices are not shown in nodedev-list --cap mdev output ";Fangge Jin (fjin);High;Positive;Manual Only;;1;"Start libvirtd:
 
* # systemctl start libvirtd
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-132007
396;;;;;;;;;2;"Create a mdev device on host
 
 Note:
 Don't restart libvirtd after mdev device is created";​​;;RedHatEnterpriseLinux7/RHEL-132007
396;;;;;;;;;3;"List node devices with capability mdev:
 
* # virsh nodedev-list --cap mdev
";"Example output:mdev_1a8a1bbc_a095_4c59_8a17_341a3eff9c63Note:There is possibility that mdev device doesn't show in the output, it is because the specific file is not created before ""add"" uevent is fired. If this situation happens, you will see the following error message in libvirtd log:
 2018-06-02 07:20:19.620+0000: 1596: error : udevProcessMediatedDevice:1081 : failed to wait for file '/sys/devices/pci0000:00/0000:00:02.0/f0418992-0d31-4472-b096-96d289b9bed7/mdev_type' to appear: No such file or directory";;RedHatEnterpriseLinux7/RHEL-132007
396;;;;;;;;;4;"Dumpxml for the mdev device:
 
* # virsh nodedev-dumpxml mdev_1a8a1bbc_a095_4c59_8a17_341a3eff9c63
";"The driver is vfio_mdev, and the capability type is mdev.
 
 Output:
 <device>
   <name>mdev_1a8a1bbc_a095_4c59_8a17_341a3eff9c63</name>
   <path>/sys/devices/pci0000:80/0000:80:02.0/0000:82:00.0/0000:83:10.0/0000:85:00.0/4ea3ddb0-8086-425e-8715-173c063a50f8</path>
   <parent>pci_0000_85_00_0</parent>
   <driver>
     <name>vfio_mdev</name>
   </driver>
   <capability type='mdev'>
     <type id='nvidia-12'/>
     <iommuGroup number='59'/>
   </capability>
 </device>
 
​​";;RedHatEnterpriseLinux7/RHEL-132007
397;RHEL-132095;[Migration][--compressed] Live migration with memory compression - XBZRLE compression - with specified cache size(by migrate-compcache) - new for RHEL7.3;N/A;Fangge Jin (fjin);High;Positive;Not Automated;;1;define a guest and start;​​;Test Case;RedHatEnterpriseLinux7/RHEL-132095
397;;;;;;;;;2;"Set compression cache size:
 
* # virsh migrate-compcache 1 --size=33554432
 Compression cache: 32.000 MiB
Note:
 
* The size is in byte.
* In RHEL7.5 , the size will be converted to power of 2 of MiB by qemu automatically if a non-power-of-2 value is set
  * For example, if --size=33554431, it will be 16.000 MiB
* In RHEL7.6, qemu will just report error if a non-power-of-2 value is set
* 
* 
";​​;;RedHatEnterpriseLinux7/RHEL-132095
397;;;;;;;;;3;"Do migration:
 
* #virsh migrate $guest --live qemu+ssh://$target/system --verbose --compressed --comp-methods xbzrle
  * 
";"verify migrate succeeds.
​​";;RedHatEnterpriseLinux7/RHEL-132095
397;;;;;;;;;4;"After migration completes, check migrate job info
 
* #virsh domjobinfo $guest --completed
";"Cache size is 32MiB
 
 Output:
 Job type:         Completed   
 Operation:        Outgoing migration
 Time elapsed:     3742         ms
 Time elapsed w/o network: 3724         ms
 Data processed:   257.846 MiB
 Data remaining:   0.000 B
 Data total:       1.126 GiB
 Memory processed: 257.846 MiB
 Memory remaining: 0.000 B
 Memory total:     1.126 GiB
 Memory bandwidth: 87.934 MiB/s
 Dirty rate:       0            pages/s
 Page size:        4096         bytes
 Iteration:        3           
 Constant pages:   231124      
 Normal pages:     65373       
 Normal data:      255.363 MiB
 Total downtime:   93           ms
 Downtime w/o network: 75           ms
 Setup time:       9            ms
 Compression cache: 32.000 MiB
 Compressed data:  0.000 B
 Compressed pages: 0            
 Compression cache misses: 704          
 Compression overflows: 0    ";;RedHatEnterpriseLinux7/RHEL-132095
397;;;;;;;;;5;Check source libvirtd log;"Output:
 2018-05-08 02:05:48.156+0000: 14965: info : qemuMonitorSend:1076 : QEMU_MONITOR_SEND_MSG: mon=0x7f9378014ef0 msg={""execute"":""migrate-set-cache-size"",""arguments"":{""value"":33554432},""id"":""libvirt-30""}
 
 2018-05-08 02:05:48.153+0000: 14965: info : qemuMonitorSend:1076 : QEMU_MONITOR_SEND_MSG: mon=0x7f9378014ef0 msg={""execute"":""migrate-set-capabilities"",""arguments"":{""capabilities"":[{""capability"":""xbzrle"",""state"":true}]},""id"":""libvirt-38""}
​​";;RedHatEnterpriseLinux7/RHEL-132095
398;RHEL-132096;[Migration][s(g)et-speed] Set and get maximum migration bandwidth;Can be covered by RHEL7-17336, RHEL-122989, RHEL-123073;Fangge Jin (fjin);High;Positive;Not Automated;;1;Prepare a shutoff guest; ;Test Case;RedHatEnterpriseLinux7/RHEL-132096
398;;;;;;;;;2;"Set migration bandwidth:
 
* # virsh migrate-setspeed <domain> 100

 Note:
 
* The unit is MiB/s
";​​;;RedHatEnterpriseLinux7/RHEL-132096
398;;;;;;;;;3;"Get migration bandwidth:
 
* # virsh migrate-getspeed <domain>
";"Output:
 100";;RedHatEnterpriseLinux7/RHEL-132096
398;;;;;;;;;4;Retest for running guest;​​;;RedHatEnterpriseLinux7/RHEL-132096
399;RHEL-132157;[update-device] live update alias name (not support) - bug 1585108;test bridge type interface;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"prepare a linux bridge:
 # brctl addbr br0
 # brctl addif br0 eno1
 # ifconfig eno1 0
 # dhclient br0 
 # ifconfig
 
 prepare a bridge type network
 # cat br.xml
 <network>
   <name>host-bridge</name>
   <forward mode=""bridge""/>
   <bridge name=""br0""/>
 </network>
 # virsh net-define br.xml
 Network host-bridge defined from br.xml
 # virsh net-start host-bridge
 
 prepare a nwfilter as below(this is used by rhv)
 # cat vdsm-filter.xml
 <filter name='vdsm-no-mac-spoofing' chain='root'>
   <filterref filter='no-mac-spoofing'/>
   <filterref filter='no-arp-mac-spoofing'/>
 </filter>
 # virsh nwfilter-define vdsm-filter.xml
 check the nwfilter should as below:
 # virsh nwfilter-dumpxml vdsm-no-mac-spoofing
 <filter name='vdsm-no-mac-spoofing' chain='root'>
   <uuid>64bb448f-109e-4c5b-9ad4-d38a7db47eaf</uuid>
   <filterref filter='no-mac-spoofing'/>
   <filterref filter='no-arp-mac-spoofing'/>
 </filter>";​​;Test Case;RedHatEnterpriseLinux7/RHEL-132157
399;;;;;;;;;2;"1. start a guest with interface as below:
 guest should start successfully
 
 <interface type='network'>
     <mac address='52:54:00:be:d8:82'/>
     <source network='host-bridge'/>
     <model type='rtl8139'/>
     <filterref filter='vdsm-no-mac-spoofing'/>
     <alias name='ua-88ee9909-3d84-4414-9ca3-51f4c00370d1'/>
     <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL-132157
399;;;;;;;;;3;# virsh start rhel;Domain rhel started;;RedHatEnterpriseLinux7/RHEL-132157
399;;;;;;;;;4;"2. prepare a xml to update the alias name of the interface:
 # cat newnet.xml 
     <interface type='bridge'>
       <mac address='52:54:00:be:d8:82'/>
       <source network='host-bridge' bridge='br0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <filterref filter='vdsm-no-mac-spoofing'/>
       <alias name='ua-88ee9909-3d84-4414-9ca3-51f4c00370d5'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL-132157
399;;;;;;;;;5;"update-device + match by pci address and mac
 # virsh update-device rhel newnet.xml
 
​​";"error: Failed to update device from newnet.xml error: operation forbidden: changing device alias is not allowed
 
 (check the running domain, the alias do not change)";;RedHatEnterpriseLinux7/RHEL-132157
399;;;;;;;;;6;"update-device + match by pci address
 
 delete the mac in the xml of step2
 # cat newnet1.xml 
     <interface type='bridge'>
       <source network='host-bridge' bridge='br0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <filterref filter='vdsm-no-mac-spoofing'/>
       <alias name='ua-88ee9909-3d84-4414-9ca3-51f4c00370d5'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
 
 # virsh update-device rhel newnet1.xml";"error: Failed to update device from newnet1.xml error: operation forbidden: changing device alias is not allowed
 
 (check the running domain, the alias do not change)";;RedHatEnterpriseLinux7/RHEL-132157
399;;;;;;;;;7;"update-device + match by pci address
 delete the pci address in the xml of step2
 
 # cat newnet2.xml 
     <interface type='bridge'>
       <mac address='52:54:00:be:d8:82'/>
       <source network='host-bridge' bridge='br0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <filterref filter='vdsm-no-mac-spoofing'/>
       <alias name='ua-88ee9909-3d84-4414-9ca3-51f4c00370d5'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
 
 # virsh update-device rhel newnet1.xml";"error: Failed to update device from newnet1.xml error: operation forbidden: changing device alias is not allowed
 
 (check the running domain, the alias do not change)";;RedHatEnterpriseLinux7/RHEL-132157
399;;;;;;;;;8;"3. hotplug an interface with alias:
 # cat net.xml 
 <interface type='bridge'>
       <source network='host-bridge' bridge='br0'/>
       <filterref filter='clean-traffic'/>
       <alias name='ua-3b6e2c74-5656-4b26-998d-e5d67f488b18'/>
     </interface>
 
 # virsh attach-device rhel net.xml
 Device attached successfully";attach successfully;;RedHatEnterpriseLinux7/RHEL-132157
399;;;;;;;;;9;"4. dumpxml and check the alias name do not changed
 # virsh dumpxml rhel | grep /interface -B8
 
​​";"<interface type='bridge'>
       <mac address='52:54:00:be:d8:82'/>
       <source network='host-bridge' bridge='br0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <filterref filter='vdsm-no-mac-spoofing'/>
       <alias name='ua-88ee9909-3d84-4414-9ca3-51f4c00370d1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
     <interface type='bridge'>
       <mac address='52:54:00:14:01:6a'/>
       <source bridge='br0'/>
       <target dev='vnet1'/>
       <model type='rtl8139'/>
       <filterref filter='clean-traffic'/>
       <alias name='ua-3b6e2c74-5656-4b26-998d-e5d67f488b18'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0a' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL-132157
399;;;;;;;;;10;"5. attach interface with same uuid will fail, let's use the net.xml again
 # cat net.xml
 <interface type='bridge'>
       <source network='host-bridge' bridge='br0'/>
       <filterref filter='clean-traffic'/>
       <alias name='ua-3b6e2c74-5656-4b26-998d-e5d67f488b18'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL-132157
399;;;;;;;;;11;"# virsh attach-device rhel net.xml
​​";"error: Failed to attach device from net.xml
 error: XML error: non unique alias detected: ua-3b6e2c74-5656-4b26-998d-e5d67f488b18";;RedHatEnterpriseLinux7/RHEL-132157
399;;;;;;;;;12;6. prepare another host, and prepare bridge type network on that host as step 0, do migration with these 2 interfaces should succeed, and the interface setting should not change.;​​;;RedHatEnterpriseLinux7/RHEL-132157
400;RHEL-133133;[virtual network][virtual-nic-device] remove virtio-net-pci after hibernate guest(s4)& resume - virtio-win only;"[virtual network][virtual-nic-device] remove virtio-net-pci after hibernate guest(s4)& resume
";Yu Wang (wyu);Low;Positive;Not Automated;;1;"steps:
 1. start guest w/ virtio-net-pci:
 -spice disable-ticketing,port=5931 -vga qxl -global
 PIIX4_PM.disable_s3=0 -global PIIX4_PM.disable_s4=0
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10";1. guest should boot normally;Test Case;RedHatEnterpriseLinux7/RHEL-133133
400;;;;;;;;;2;"2.check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL-133133
400;;;;;;;;;3;"3.Install qxl driver in device manager:
 device manager--->Other devices--->right-click ""Microsoft basic display adapater""--->update driver
 software---->Browse my computer for driver software--->let me pick from list
 of device drivers on my computer--->choose the path while located your driver ----> install";​​;;RedHatEnterpriseLinux7/RHEL-133133
400;;;;;;;;;4;"4. do hibernate on guest (S4)
 Note:
 for win2k8-R2/win7: Click Start---> Sleep
 for win2k8:
 1) Click Start---> Control Panel---> Power Options --> Choose what the power button does---> Select ""Hibernate"" from dropdown list---> Save changes
 2) Type ""system_powerdown"" from qemu monitor
 for win2k3/winxp:
 1) Click Start---> Control Panel---> Power Options---> Hibernate---> Check ""Enable Hibernate""---> Click OK button to save
 2) Click Start---> Shutdown---> select ""Hibernate"" from dropdown list---> Click OK button";3. the guest should suspend to s4 without any error;;RedHatEnterpriseLinux7/RHEL-133133
400;;;;;;;;;5;"5. After qemu quit, boot guest without virtio-net-pci
 -spice disable-ticketing,port=5931 -vga qxl -global
 PIIX4_PM.disable_s3=0 -global PIIX4_PM.disable_s4=0";4. the guest should be awaken from s4 without any BSOD or error;;RedHatEnterpriseLinux7/RHEL-133133
401;RHEL-133331;[Migration] Seamless spice migration - plaintext +TLS connection;N/A;Fangge Jin (fjin);High;Positive;Manual Only;;1;"Prepare a guest with such setting:
 
* 1) with spice graphic
* 2) with spice secure channels
* 3) spice listens on 0.0.0.0
"; ;Test Case;RedHatEnterpriseLinux7/RHEL-133331
401;;;;;;;;;2;Refer to this case for the following steps: RHEL7-17361 ;​​;;RedHatEnterpriseLinux7/RHEL-133331
402;RHEL-133369;[Migration] Do storage migration again after last storage migration completes;N/A;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Start a guest on source host which image is on local disk:
 
* # virsh domblklist
Target     Source
 ------------------------------------------------
 vda        /var/lib/libvirt/images/rhel7.qcow2 ";​​;Test Case;RedHatEnterpriseLinux7/RHEL-133369
402;;;;;;;;;2;"Migrate the guest to the target with copy storage:
 
* # virsh migrate --live rhel7 --copy-storage-all qemu+ssh://$targetip/system --verbose
";​​;;RedHatEnterpriseLinux7/RHEL-133369
402;;;;;;;;;3;"During storage migration phase, check the migration port on source or target host:
 
* # netstat -tunap|grep 4915
";"The minimum available port in range 49152~49251 is used for storage migration.
 
* In my test , port 49153 is used( 49142 is occupied for memory migration)
* A bigger port may be used in your test if the small ones are already occupied on target host.
Output(on target):
 tcp6       0      0 :::49152                :::*                    LISTEN      13585/qemu-kvm      
 tcp6       0      0 :::49153                :::*                    LISTEN      13585/qemu-kvm      
 tcp6       0      0 10.66.144.20:49153      10.66.144.32:56732      ESTABLISHED 13585/qemu-kvm    
 
 Output(on source):
 tcp        0 344388 10.66.144.32:56732       10.66.144.20:49153       ESTABLISHED 4192/qemu-kvm";;RedHatEnterpriseLinux7/RHEL-133369
402;;;;;;;;;4;"After migration completes, do storage migration to target again by:
 
* Migrate second vm to target, or
* Destroy first vm on target, start it on source and migrate it to target again, or
* Migrate first vm back to source, then migrate it to target again
";​​;;RedHatEnterpriseLinux7/RHEL-133369
402;;;;;;;;;5;"Before migration to target completes, check migration port on source or target:
 
* # netstat -tunap| grep 4915
";The same port as last storage migration is used, this proves that port used for storage migration is released correctly after storage migration completes;;RedHatEnterpriseLinux7/RHEL-133369
403;RHEL-133371;[Migration] Do live VM migration again after last migration completes;N/A;Fangge Jin (fjin);High;Positive;Not Automated;;1; Start a guest on source host;​​;Test Case;RedHatEnterpriseLinux7/RHEL-133371
403;;;;;;;;;2;"Do live migration:
 
* # virsh migrate $guest qemu+ssh://10.66.4.140/system --live
";​​;;RedHatEnterpriseLinux7/RHEL-133371
403;;;;;;;;;3;"Before migration completes, check migration port on source or target:
 
* # netstat -tunap | grep 4915
";"A port in range 49152~49153 is used as migration port on target host.
 
 Output(got on source host):
 tcp        0 344388 10.66.4.124:59170       10.66.4.140:49153       ESTABLISHED 4192/qemu-kvm       ";;RedHatEnterpriseLinux7/RHEL-133371
403;;;;;;;;;4;"After migration completes, migrate a vm to target again by:
 
* Migrate second vm to target, or
* Destroy first vm on target, start it on source and migrate it to target again, or
* Migrate first vm back to source, then migrate it to target again
";​​;;RedHatEnterpriseLinux7/RHEL-133371
403;;;;;;;;;5;"Before migration to target completes, check migration port on source or target:
 
* # netstat -tunap| grep 4915
";The same port as last migration to target is used, this proves that migration port is released correctly after migration completes;;RedHatEnterpriseLinux7/RHEL-133371
404;RHEL-133478;[spice][tls] Start guest with all spice channels=secure;Verify that guest can start successfully when all spice channels=secure;Fangge Jin (fjin);Critical;Positive;Not Automated;;1;" Edit or define a guest with such setting:
 
* 1) with spice graphic
* 2) set all the eight spice channels to secure mode
"; ;Test Case;RedHatEnterpriseLinux7/RHEL-133478
404;;;;;;;;;2;"Start guest
​​";​​;;RedHatEnterpriseLinux7/RHEL-133478
404;;;;;;;;;3;"Check qemu command line:
 
* # ps aux|grep spice
";"1) port and tlsPort are generated
 2) all eight channelds are in secure mode(tls-channel)

 Output:
 -spice port=5900,tls-port=5901,addr=0.0.0.0,disable-ticketing,x509-dir=/etc/pki/libvirt-spice,tls-channel=main,tls-channel=display,tls-channel=inputs,tls-channel=cursor,tls-channel=playback,tls-channel=record,tls-channel=smartcard,tls-channel=usbredir,seamless-migration=on";;RedHatEnterpriseLinux7/RHEL-133478
405;RHEL-133580;[Migration][migrate-s(g)etmaxdowntime] Set and get maxdowntime for live migration - when guest is running;Can be covered by RHEL7-17321, RHEL-122941;Fangge Jin (fjin);High;Positive;Not Automated;;1;Prepare a running guest; ;Test Case;RedHatEnterpriseLinux7/RHEL-133580
405;;;;;;;;;2;"Set migration maxdowntime:
 
* # virsh migrate-setmaxdowntime<domain> 100

 Note:
 
* The unit is ms
";​​;;RedHatEnterpriseLinux7/RHEL-133580
405;;;;;;;;;3;"Get migration maxdowntime:
 
* # virsh migrate-getmaxdowntime <domain>
";"Output:
 100";;RedHatEnterpriseLinux7/RHEL-133580
406;RHEL-133603;[Migration] Migrate vm with file backed disk located in local filesystem - without copy storage;"Migration should fail if the vm disk is backed by local fs(ext[2,3,4]xfs/fat) and storage migration is not enabled, even if the same disk paths are visible on target host.
This case covered: shareable, cache mode.
 Bug 1494454 - RFE: add sanity checks for shared storage when migrating without block copy ";Fangge Jin (fjin);High;Negative;Not Automated;;1;"Prepare a guest with file type virtual disk which is backed by local fs, and
 
* no specified cache mode
* no <shareable/>
"; ;Test Case;RedHatEnterpriseLinux7/RHEL-133603
406;;;;;;;;;2;Start guest;​​;;RedHatEnterpriseLinux7/RHEL-133603
406;;;;;;;;;3;"Do live migration without copy storage:
 
* # virsh migrate 1 qemu+ssh://10.66.4.140/system --live --verbose
";"Output error:
 error: Unsafe migration: Migration without shared storage is unsafe";;RedHatEnterpriseLinux7/RHEL-133603
406;;;;;;;;;4;"Retest with:
 
* Prepare an image with same name on target host before migration:
  * # scp /var/lib/libvirt/images/RHEL-7.6-x86_64-latest.qcow2 <target_ip>:/var/lib/libvirt/images/
";Same as above;;RedHatEnterpriseLinux7/RHEL-133603
406;;;;;;;;;5;"Retest with:
 
* Create an image with same name on target host before migration:
  * # scp /var/lib/libvirt/images/RHEL-7.6-x86_64-latest.qcow2 <target_ip>:/var/lib/libvirt/images/
* And do migration with --unsafe:
  * # virsh migrate 1 qemu+ssh://10.66.4.140/system --live --verbose --unsafe
";"Migration succeeds.
 
 Note:
 As --unsafe is used, guest may have I/O error after migration.";;RedHatEnterpriseLinux7/RHEL-133603
406;;;;;;;;;6;"Retest with:
 
* add <shareable/> element into domain xml ( should use raw image, because qcow2 doesn't support shareable.)
";Same as above;;RedHatEnterpriseLinux7/RHEL-133603
406;;;;;;;;;7;"Retest with:
 
* cache=none
";Same as above;;RedHatEnterpriseLinux7/RHEL-133603
406;;;;;;;;;8;"Retest with:
 
* cache=directsync
";Same as above;;RedHatEnterpriseLinux7/RHEL-133603
407;RHEL-133824;Cold plug/unplug mdev;N/A;Fangge Jin (fjin);High;Positive;Not Automated;;1; start a VM;​​;Test Case;RedHatEnterpriseLinux7/RHEL-133824
407;;;;;;;;;2;"Cold plug the mdev device to VM:
 
* # virsh attach-device $vm mdev.xml --config
";"Output:
 Device attached successfully";;RedHatEnterpriseLinux7/RHEL-133824
407;;;;;;;;;3;"Check mdev in inactive domain xml:
 
* # virsh dumpxml $vm --inactive | grep hostdev -A7
";"mdev is added in inactive domain xml.
 
 Output:
     <hostdev mode='subsystem' type='mdev' managed='no' model='vfio-pci'>
       <source>
         <address uuid='9c131fd0-cecb-4f99-98e2-c2f7e2de6e11'/>
       </source>
       <alias name='ua-6a7c3dd8-72bd-40d5-add4-09bff1c43b44'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </hostdev>";;RedHatEnterpriseLinux7/RHEL-133824
407;;;;;;;;;4;"Check mdev in active domain xml:
 
* # virsh dumpxml $vm --active | grep hostdev -A7
";"mdev is NOT in active domain xml.
​​";;RedHatEnterpriseLinux7/RHEL-133824
407;;;;;;;;;5;Destroy and start guest again;​​;;RedHatEnterpriseLinux7/RHEL-133824
407;;;;;;;;;6;"Check mdev in active domain xml:
 
* # virsh dumpxml $vm --active | grep hostdev -A7
";"mdev is in inactive domain xml.
 
 Output:
     <hostdev mode='subsystem' type='mdev' managed='no' model='vfio-pci'>
       <source>
         <address uuid='9c131fd0-cecb-4f99-98e2-c2f7e2de6e11'/>
       </source>
       <alias name='ua-6a7c3dd8-72bd-40d5-add4-09bff1c43b44'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </hostdev>
​​";;RedHatEnterpriseLinux7/RHEL-133824
407;;;;;;;;;7;"Cold unplug the mdev device from VM:
 
* # virsh detach-device $vm mdev.xml --config
";​​;;RedHatEnterpriseLinux7/RHEL-133824
407;;;;;;;;;8;"Check mdev in inactive domain xml:
 
* # virsh dumpxml $vm --inactive |grep hostdev
";mdev is NOT in inactive domain xml;;RedHatEnterpriseLinux7/RHEL-133824
407;;;;;;;;;9;"Check mdev in active domain xml:
 
* # virsh dumpxml $vm | grep hostdev
";mdev is in active domain xml;;RedHatEnterpriseLinux7/RHEL-133824
407;;;;;;;;;10;Destroy guest and repeat above steps one more time;​​;;RedHatEnterpriseLinux7/RHEL-133824
408;RHEL-133845;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: NSS by-id requests are not checked against max_id/min_id ranges before triggering the backend;"Bugzilla: https://bugzilla.redhat.com/show_bug.cgi?id=1512027 
Description: max_id does not filter out requests correctly in SSSD 1.15 when numbers approaching UINTMAX are requested from SSSD.
        The LDAP server cannot handle a request for uidNumber=4294967295 and goes offline because of it, that is why 'max_id' is needed.


";Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-133845
409;RHEL-134023;cryptsetup_add_key;cryptsetup_add_key;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134023
410;RHEL-134024;cryptsetup_backup_restore;cryptsetup_backup_restore;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134024
411;RHEL-134025;cryptsetup_passwd_with_file;cryptsetup_passwd_with_file;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134025
412;RHEL-134026;cryptsetup_upstream_check;cryptsetup_upstream_check;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134026
413;RHEL-134027;cryptsetup_readonly;cryptsetup_readonly;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134027
414;RHEL-134028;cryptsetup_Conversions;cryptsetup_Conversions;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134028
415;RHEL-134029;cryptsetup_Persistent_flags;cryptsetup_Persistent_flags;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134029
416;RHEL-134030;cryptsetup_environment;cryptsetup_environment;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134030
417;RHEL-134031;cryptsetup_reencrypt_change_paramter;cryptsetup_reencrypt_change_paramter;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134031
418;RHEL-134032;cryptsetup_integrity_luks;cryptsetup_integrity_luks;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134032
419;RHEL-134033;cryptsetup_recover_key;cryptsetup_recover_key;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134033
420;RHEL-134034;cryptsetup_integrity_setup;cryptsetup_integrity_setup;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134034
421;RHEL-134035;cryptsetup_Suspend_Resume;cryptsetup_Suspend_Resume;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134035
422;RHEL-134036;cryptsetup_luks1_paramter;cryptsetup_luks1_paramter;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134036
423;RHEL-134037;cryptsetup_reencrypt_fs;cryptsetup_reencrypt_fs;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134037
424;RHEL-134038;cryptsetup_luks_passphrases;cryptsetup_luks_passphrases;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134038
425;RHEL-134039;cryptsetup_unlock_luks2_1st;cryptsetup_unlock_luks2_1st;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134039
426;RHEL-134040;cryptsetup_lvm_extend;cryptsetup_lvm_extend;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134040
427;RHEL-134041;cryptsetup_token_keyring;cryptsetup_token_keyring;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134041
428;RHEL-134042;cryptsetup_MD;cryptsetup_MD;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134042
429;RHEL-134043;cryptsetup_param_to_kernel;cryptsetup_param_to_kernel;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134043
430;RHEL-134044;cryptsetup_unlock_luks2_2st;cryptsetup_unlock_luks2_2st;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134044
431;RHEL-134047; RHEL7-85314 - bz1076147_parallel_mode;;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134047
432;RHEL-134048;cryptsetup testing;;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134048
433;RHEL-134103;[libvirtd]Update libvirt - bug 1464300;"Update libvirt and check libvirtd service restart successfully after update.
";Yan Fu (yafu);Critical;Positive;Manual Only;;1;" 1.Update libvirt pkgs from 7.x to 7.y:
 #yum -y update libvirt
​​";" 2.Check yum log after yum completed, could see libvirtd service only restart after all pkgs are updated
and restart successfully:
Jan 30 16:43:05 dhcp-66-71-72 yum[15160]: Updated: libvirt-libs-3.9.0-9.el7.x86_64
Jan 30 16:43:06 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-3.9.0-9.el7.x86_64
Jan 30 16:43:06 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-driver-storage-core-3.9.0-9.el7.x86_64
Jan 30 16:43:06 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-driver-network-3.9.0-9.el7.x86_64
Jan 30 16:43:07 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-driver-nwfilter-3.9.0-9.el7.x86_64
Jan 30 16:43:07 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-config-nwfilter-3.9.0-9.el7.x86_64
Jan 30 16:43:08 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-driver-qemu-3.9.0-9.el7.x86_64
Jan 30 16:43:08 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-driver-lxc-3.9.0-9.el7.x86_64
Jan 30 16:43:09 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-config-network-3.9.0-9.el7.x86_64
Jan 30 16:43:09 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-driver-storage-iscsi-3.9.0-9.el7.x86_64
Jan 30 16:43:09 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-driver-storage-rbd-3.9.0-9.el7.x86_64
Jan 30 16:43:10 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-driver-storage-logical-3.9.0-9.el7.x86_64
Jan 30 16:43:10 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-driver-storage-disk-3.9.0-9.el7.x86_64
Jan 30 16:43:10 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-driver-storage-gluster-3.9.0-9.el7.x86_64
Jan 30 16:43:11 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-driver-storage-mpath-3.9.0-9.el7.x86_64
Jan 30 16:43:11 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-driver-storage-scsi-3.9.0-9.el7.x86_64
Jan 30 16:43:11 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-driver-storage-3.9.0-9.el7.x86_64
Jan 30 16:43:12 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-driver-secret-3.9.0-9.el7.x86_64
Jan 30 16:43:12 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-driver-interface-3.9.0-9.el7.x86_64
Jan 30 16:43:12 dhcp-66-71-72 yum[15160]: Updated: libvirt-daemon-driver-nodedev-3.9.0-9.el7.x86_64
Jan 30 16:43:13 dhcp-66-71-72 yum[15160]: Updated: libvirt-client-3.9.0-9.el7.x86_64
Jan 30 16:43:13 dhcp-66-71-72 yum[15160]: Updated: libvirt-3.9.0-9.el7.x86_64
Jan 30 16:43:20 dhcp-66-71-72 systemd: Reloading.
Jan 30 16:43:21 dhcp-66-71-72 systemd: Unit virtlockd.service cannot be reloaded because it is inactive.
Jan 30 16:43:21 dhcp-66-71-72 systemd: Unit virtlogd.service cannot be reloaded because it is inactive.
Jan 30 16:43:21 dhcp-66-71-72 systemd: Stopping Virtualization daemon...
Jan 30 16:43:21 dhcp-66-71-72 systemd: Starting Virtualization daemon...
Jan 30 16:43:21 dhcp-66-71-72 systemd: Started Virtualization daemon.";Test Case;RedHatEnterpriseLinux7/RHEL-134103
434;RHEL-134142;hotplug or start vm with hostdev interface defined with custom alias - bug 1556828;;Yalan Zhang (yalzhang);;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-134142
435;RHEL-134143;Hotplug or start vm with hostdev interface defined with custom alias - bug 1556826;"Prior to this update, if the ""interface type='hostdev'"" configuration was used for a guest virtual machine, booting the guest in some cases failed due to a validation error. With this update, the libvirt service has been fixed to ignore hostdev duplicates in the XML configuration. As a result, the guest boots correctly in the described scenario.
";Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;" (1)Scenario 1: hotplug->unhotplug->hotplug hostdev interface with alias name:
 1.Start a guest:
 #virsh start iommu1
 Domain iommu1 started
 
 2.Prepare a hostdev interface with alias name:
 #cat interface.xml
 <interface type='hostdev' managed='yes'>
  <mac address='66:18:0b:c2:85:b8'/>
  <source>
    <address type='pci' domain='0x0000' bus='0x04' slot='0x10' function='0x3'/>
  </source>
  <alias name='ua-04c2decd-4e33-4023-84de-a2205c777af7'/>
  <model type='virtio'/>
 </interface>
 
 3.Hotplug the hostdev interface deto the guest:
 #virsh attach-device iommu1 interface.xml
 Device attached successfully
 
 4.Check the hostdev interface in the live guest xml:
 #virsh dumpxml iommu1 | grep -A10 interface
 <interface type='hostdev' managed='yes'>
      <mac address='66:18:0b:c2:85:b8'/>
      <driver name='vfio'/>
    ...
      <alias name='ua-04c2decd-4e33-4023-84de-a2205c777af7'/>
    ...
 </interface>
 
 5.Hotunplug the hostdev interface from the guest:
 #virsh detach-device iommu1 interface.xml
 Device detached successfully
 
 6.Check the hostdev interface in the live guest xml:
 #virsh dumpxml iommu1  | grep hostdev
 no output
 
 7.Repeat step3-4, the hostdev interface can attach successfully to the guest.
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-134143
435;;;;;;;;;2;"(2)Scenario 2: coldplug->coldunplug hostdev interface with alias name:
 
 1.Coldplug hostdev interface to guest:
 #virsh attach-device iommu1 interface.xml --config
 Device detached successfully
 
 2.Start the guest:
 #virsh start iommu1
 Domain iommu1 started
 
 3.Check the hostdev interface in the live xml:
 #virsh dumpxml iommu1 | grep -A10 interface
 <interface type='hostdev' managed='yes'>
      <mac address='66:18:0b:c2:85:b8'/>
      <driver name='vfio'/>
    ...
      <alias name='ua-04c2decd-4e33-4023-84de-a2205c777af7'/>
    ...
 </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL-134143
435;;;;;;;;;3;"4.Coldunplug the hostdev interface from the guest:
 #virsh detach-device iommu1 interface.xml --config";Device detached successfully;;RedHatEnterpriseLinux7/RHEL-134143
435;;;;;;;;;4;"5.Check the hostdev interface in the inactive domain xml:
 #virsh dumpxml iommu1 --inactive | grep -i hostdev";no output;;RedHatEnterpriseLinux7/RHEL-134143
435;;;;;;;;;5;"(3)Scenario 3: Hotplug hostdev interface with the same alias name:
 1.Attach the hostdev interface device with alias name to the guest:
 #virsh attach-device iommu1 interface.xml
 Device attached successfully
​​";​​;;RedHatEnterpriseLinux7/RHEL-134143
435;;;;;;;;;6;"2.Repeat step 1:
 #virsh attach-device iommu1 interface.xml";"error: Failed to attach device from /nic-xml/interface.xml
 error: XML error: non unique alias detected: ua-04c2decd-4e33-4023-84de-a2205c777af";;RedHatEnterpriseLinux7/RHEL-134143
435;;;;;;;;;7;"(4)Scenario 4: live update alias name:
 #cat interface.xml
 <interface type='hostdev' managed='yes'>
      <mac address='66:18:0b:c2:85:b8'/>
      <driver name='vfio'/>
    ...
      <alias name='ua-04c2decd-4e33-4023-84de-a2205c777a66'/>
    ...
 </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL-134143
435;;;;;;;;;8;#virsh update-device iommu1 interface.xml;"error: Failed to update device from interface.xml-2
 error: Operation not supported: cannot change config of 'hostdev' network type";;RedHatEnterpriseLinux7/RHEL-134143
436;RHEL-134494;[rom] disable vm pxe boot by enabled='no' with seabios and various interface module types - Bug 1425058;<rom enabled='no'> can disable the rom loading then disable the vm from pxe boot except for vm with OVMF+virtio;Yalan Zhang (yalzhang);High;Positive;Automated;;1;"1. prepare a vm with seabios and interface as below:
  <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.6.0'>hvm</type>
 <loader>/usr/share/seabios/bios.bin</loader>
   </os>
 ....
 <interface type='bridge'>
       <source bridge='br0'/>
       <model type='virtio'/>
 <rom enabled='no'/>
 <boot order='1'/>
     </interface>";​​;Test Case;RedHatEnterpriseLinux7/RHEL-134494
436;;;;;;;;;2;2. start the vm, and check if the vm can boot by pxe;​​;;RedHatEnterpriseLinux7/RHEL-134494
436;;;;;;;;;3;test for virtio;vm can not boot by pxe;;RedHatEnterpriseLinux7/RHEL-134494
436;;;;;;;;;4;test for e1000;vm can not boot by pxe;;RedHatEnterpriseLinux7/RHEL-134494
436;;;;;;;;;5;test for rtl8139;vm can not boot by pxe;;RedHatEnterpriseLinux7/RHEL-134494
436;;;;;;;;;6;test for e1000e;vm can not boot by pxe;;RedHatEnterpriseLinux7/RHEL-134494
437;RHEL-134495;hotplug for different rom tune settings;hotplug and update-device for different rom tune settings;Yalan Zhang (yalzhang);High;Positive;Automated;;1;scenario 1:;​​;Test Case;RedHatEnterpriseLinux7/RHEL-134495
437;;;;;;;;;2;"1. start a vm, prepare xml as below:
 # cat net.xml
 <interface type='bridge'>
        <source bridge='br0'/>    
    <model type='virtio'/>    
 <rom enabled='no'/>
  </interface>";​​;;RedHatEnterpriseLinux7/RHEL-134495
437;;;;;;;;;3;"2. hotplug twice
 # virsh attach-device rhel net.xml
 Device attached successfully
 
 # virsh attach-device rhel net.xml
 Device attached successfully

 # virsh dumpxml rhel | grep /interface -B9
​​";both should be succeed, and check the xml, the device exists;;RedHatEnterpriseLinux7/RHEL-134495
437;;;;;;;;;4;scenario 2:;​​;;RedHatEnterpriseLinux7/RHEL-134495
437;;;;;;;;;5;"3. hotplug with rom enabled='yes'
 # cat net.xml
 <interface type='bridge'>
        <source bridge='br0'/>    
    <model type='virtio'/>    
 <rom enabled='yes' file='/usr/share/qemu-kvm/pxe-virtio.rom' bar='on'/>
  </interface>
 
 # virsh attach-device rhel net.xml
 Device attached successfully";attach succeed;;RedHatEnterpriseLinux7/RHEL-134495
437;;;;;;;;;6;check the xml, the interface exists;​​;;RedHatEnterpriseLinux7/RHEL-134495
438;RHEL-135510;[nodedev-*][--cap][mdev_types][GPU] List->Dumpxml->detach->dumpxml->reattach->dumpxml for a node device with mdev_types capability - GPU;Need to test both Nvidia and Intel GPU;Fangge Jin (fjin);High;Positive;Not Automated;;1;" List the node device with mdev_types capability on host:
 
* # virsh nodedev-list --cap mdev_types
";" Output:
 pci_0000_84_00_0
 pci_0000_85_00_0";Test Case;RedHatEnterpriseLinux7/RHEL-135510
438;;;;;;;;;2;"Dumpxml for one of the listed devices:
 
* # virsh nodedev-dumpxml pci_0000_85_00_0
";"The driver is nvidia, and the device has mdev_types capability

 Output:
 <device>
   <name>pci_0000_84_00_0</name>
   <path>/sys/devices/pci0000:80/0000:80:02.0/0000:82:00.0/0000:83:08.0/0000:84:00.0</path>
   <parent>pci_0000_83_08_0</parent>
   <driver>
     <name>nvidia</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>132</bus>
     <slot>0</slot>
     <function>0</function>
     <product id='0x13f2'>GM204GL [Tesla M60]</product>
     <vendor id='0x10de'>NVIDIA Corporation</vendor>
     <capability type='mdev_types'>
       <type id='nvidia-11'>
         <name>GRID M60-0B</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>16</availableInstances>
       </type>
       <type id='nvidia-12'>
         <name>GRID M60-0Q</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>16</availableInstances>
       </type>
       <type id='nvidia-13'>
         <name>GRID M60-1A</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>8</availableInstances>
       </type>
       <type id='nvidia-14'>
         <name>GRID M60-1B</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>8</availableInstances>
       </type>
       <type id='nvidia-15'>
         <name>GRID M60-1Q</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>8</availableInstances>
       </type>
       <type id='nvidia-16'>
         <name>GRID M60-2A</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>4</availableInstances>
       </type>
       <type id='nvidia-17'>
         <name>GRID M60-2B</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>4</availableInstances>
       </type>
       <type id='nvidia-18'>
         <name>GRID M60-2Q</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>4</availableInstances>
       </type>
       <type id='nvidia-19'>
         <name>GRID M60-4A</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>2</availableInstances>
       </type>
       <type id='nvidia-20'>
         <name>GRID M60-4Q</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>2</availableInstances>
       </type>
       <type id='nvidia-21'>
         <name>GRID M60-8A</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>1</availableInstances>
       </type>
       <type id='nvidia-22'>
         <name>GRID M60-8Q</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>1</availableInstances>
       </type>
     </capability>
     <iommuGroup number='43'>
       <address domain='0x0000' bus='0x84' slot='0x00' function='0x0'/>
     </iommuGroup>
     <numa node='1'/>
     <pci-express>
       <link validity='cap' port='8' speed='8' width='16'/>
       <link validity='sta' speed='2.5' width='16'/>
     </pci-express>
   </capability>
 </device>
";;RedHatEnterpriseLinux7/RHEL-135510
438;;;;;;;;;3;"Detach the node device:
 
* # virsh nodedev-detach pci_0000_85_00_0
";"Output:
 Device pci_0000_85_00_0 detached";;RedHatEnterpriseLinux7/RHEL-135510
438;;;;;;;;;4;"List the node device with mdev_types capability on host again:
* # virsh nodedev-list --cap mdev_types
";"The detached node device is NOT listed

 Output:
 pci_0000_84_00_0";;RedHatEnterpriseLinux7/RHEL-135510
438;;;;;;;;;5;"Dumpxml for the detached device again:
 
* # virsh nodedev-dumpxml pci_0000_85_00_0
";"Driver of the detached device becomes vfio-pci, and the mdev_types capability disappear.

 Output:
 <device>
   <name>pci_0000_85_00_0</name>
   <path>/sys/devices/pci0000:80/0000:80:02.0/0000:82:00.0/0000:83:10.0/0000:85:00.0</path>
   <parent>pci_0000_83_10_0</parent>
   <driver>
     <name>vfio-pci</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>133</bus>
     <slot>0</slot>
     <function>0</function>
     <product id='0x13f2'>GM204GL [Tesla M60]</product>
     <vendor id='0x10de'>NVIDIA Corporation</vendor>
     <iommuGroup number='44'>
       <address domain='0x0000' bus='0x85' slot='0x00' function='0x0'/>
     </iommuGroup>
     <numa node='1'/>
     <pci-express>
       <link validity='cap' port='16' speed='8' width='16'/>
       <link validity='sta' speed='8' width='16'/>
     </pci-express>
   </capability>
 </device>";;RedHatEnterpriseLinux7/RHEL-135510
438;;;;;;;;;6;"Reattach the detached device:
 
* # virsh nodedev-reattach pci_0000_85_00_0
";"Output:
 Device pci_0000_85_00_0 re-attached";;RedHatEnterpriseLinux7/RHEL-135510
438;;;;;;;;;7;"List the node device with mdev_types capability on host again:
 
* # virsh nodedev-list --cap mdev_types
";"The reattached device is attached.
 
 Output:
 pci_0000_84_00_0
 pci_0000_85_00_0";;RedHatEnterpriseLinux7/RHEL-135510
438;;;;;;;;;8;"Dumpxml for reattached device again:
 
* # virsh nodedev-dumpxml pci_0000_85_00_0
";Same as step 2;;RedHatEnterpriseLinux7/RHEL-135510
439;RHEL-135524;[vgpu][nvidia]View desktop output from vgpu display;View desktop output from vgpu display;Zhiyi Guo (zhguo);Critical;Positive;Not Automated;;1;"Boot guest with emulated vga device and vgpu device, add display=on option to vgpu device option.
 Reference qemu cli:
 /usr/libexec/qemu-kvm -name rhel -m 16G -machine pc,accel=kvm \
         -S \
         -cpu Haswell-noTSX,enforce \
         -smp 4\
         -monitor stdio \
         -qmp unix:/tmp/qmp1,server,nowait \
         -device VGA \
         -vnc :0 \
         -serial unix:/tmp/console1,server,nowait \
         -uuid 115e11b2-a869-41b5-91cd-6a32a907be7e \
         -drive file=rhel7.6.qcow2,if=none,id=drive-scsi-disk0,format=qcow2,cache=none,werror=stop,rerror=stop -device ide-hd,drive=drive-scsi-disk0,id=scsi-disk0 \
         -netdev tap,id=idinWyYp,vhost=on -device virtio-net-pci,mac=2e:39:fa:ff:88:a0,id=idlbq7eA,netdev=idinWyYp \
        -device vfio-pci,sysfsdev=/sys/bus/mdev/devices/4560b9f9-c005-4c55-bf52-a3ce128996c0,id=GRID,display=on \
";"qemu can start without complain.
 No errors prompt from host dmesg and journalctl
";Test Case;RedHatEnterpriseLinux7/RHEL-135524
439;;;;;;;;;2;Use vnc client to connect to qemu vnc port;"Guest can boot to desktop, guest is using emulated  vga device as primary display.
 How to check emulated vga device is primary display:
 For rhel guest:
 execute xrandr in gnome-terminal, you can find keywords: Virtual-1 connected
 For windows guest:
 Check the display number from windows display manager, there should be one display detected by windows only, click the advanced display setting like ""Advanced settings"", you can find vga device connected to the display is the emulated vga device.(You can verify this by check the pci bus of vga device connected with display is the same as emulated vga device)";;RedHatEnterpriseLinux7/RHEL-135524
439;;;;;;;;;3;"Install vgpu driver inside guest and configure guest to use display provided by vgpu device
 For rhel guest:
 1. blacklist nouveau from system and reboot to mulituser target
 blacklist example:
 # cat /etc/modprobe.d/blacklist-nouveau.conf 
 # RPM Fusion blacklist for nouveau driver - you need to run as root:
 # dracut -f /boot/initramfs-$(uname -r).img $(uname -r)
 # if nouveau is loaded despite this file.
 blacklist nouveau

 2. Download driver by:
 wget http://10.66.9.237/gpu-testing/vgpu-drivers/nvidia/latest-y/rhel-guest-driver.run
 3. Install driver by:
 sh rhel-guest-driver.run -s
 4. configure guest to use vgpu device as primary display:
 #BUSID=`nvidia-xconfig --query-gpu-info | grep BusID | awk '{print $4}'`
 ## nvidia-xconfig --busid=$BUSID
 5. change guest target to graphical.target and reboot
 For windows guest:
 1. Download driver from browser: http://10.66.9.237/gpu-testing/vgpu-drivers/nvidia/latest-y/win10-guest-driver.exe 
 2. Install the driver, after driver installed, it will ask you to reboot the guest, do reboot.";No errors prompt from guest/host dmesg and journalctl;;RedHatEnterpriseLinux7/RHEL-135524
439;;;;;;;;;4;Verify guest desktop output is transferred to vgpu device, input ctrl+alt+2 to switch to vgpu display;"vnc client will still get desktop output.
 For rhel guest:
 execute xrandr in gnome-terminal, you won't see keywords Virtual-1 anymore, you will see keywords like DP-x or DVI-* connected.
 For windows 10 guest:
 Check the display number from windows display manager, there should be two displays detected by windows, find the display connected to the vgpu device and configure the desktop with ""only show desktop on this display""";;RedHatEnterpriseLinux7/RHEL-135524
439;;;;;;;;;5;Verify nvidia setting can be launched via vnc display;nvidia setting can be launched and you can see the information provided by nvidia setting;;RedHatEnterpriseLinux7/RHEL-135524
439;;;;;;;;;6;Shutdown guest.;"Shutdown without problem
 No errors prompt from host dmesg and journalctl";;RedHatEnterpriseLinux7/RHEL-135524
439;;;;;;;;;7;Boot guest with emulated vga device and vgpu device again, add display=off option to vgpu device option.;"qemu can start without complain.
 No errors prompt from host dmesg and journalctl";;RedHatEnterpriseLinux7/RHEL-135524
439;;;;;;;;;8;Use vnc client to connect to qemu vnc port;Cannot get guest desktop output from vnc;;RedHatEnterpriseLinux7/RHEL-135524
439;;;;;;;;;9;(Priority low, this means we test this case using spice once  the major vgpu run has been done) Switch the display protocol to spice and retest the scenario ;Test results remain similar as vnc;;RedHatEnterpriseLinux7/RHEL-135524
440;RHEL-135640;[vgpu][remote-test]HPRGS remote display test;Test HPRGS remote display with qemu and vGPU enablement for Windows and Linux VMs;Zhiyi Guo (zhguo);Critical;Positive;Manual Only;;1;Boot guest with vgpu and HPRGS sender active, remote access guest through HPRGS receiver, shutdown guest.;Guest desktop can be accessed from receiver, no corruption display, guest can shutdown and receiver will disconnect automatically.;Test Case;RedHatEnterpriseLinux7/RHEL-135640
440;;;;;;;;;2;Inside guest, play a youtube 1080p video in full screen mode(use chrome browser).;Check the desktop performance from Receiver, is is around 30fps, both video and audio can be transferred to client side, no big latency observed.;;RedHatEnterpriseLinux7/RHEL-135640
440;;;;;;;;;3;Inside guest, start heaven benchmark test in full screen mode.;Check the desktop performance from Receiver, is is around 10 - 15 fps, both video and audio can be transferred to client side, heaven benchmark shows the gpu performance is around 50-60fps, some obvious display latency can be observed here.;;RedHatEnterpriseLinux7/RHEL-135640
441;RHEL-135641;[vgpu][remote-test]Nice DCV remote display test;Test NICE DCV remote display with qemu and vGPU enablement for Windows and Linux VMs;Zhiyi Guo (zhguo);Critical;Positive;Manual Only;;1; Boot guest with vgpu and NICE dcv server active, remote access guest through NICE dcv client, shutdown guest.; Guest desktop can be accessed from receiver, no corruption display, guest can shutdown and receiver will disconnect automatically.;Test Case;RedHatEnterpriseLinux7/RHEL-135641
441;;;;;;;;;2;Inside guest, play a youtube 1080p video in full screen mode(use chrome browser).;"Both video and audio can be transferred to client side, check the desktop performance from client:
 Framerate: around 25 fps, video looks fluent";;RedHatEnterpriseLinux7/RHEL-135641
441;;;;;;;;;3;Inside guest, start heaven benchmark test in full screen mode.;"Both video and audio can be transferred to client side, check the desktop performance from client:
 Framerate: around 10 fps, stuck can be observed
 Network latency: 1ms
 heaven benchmark shows the gpu performance is around 50-60fps";;RedHatEnterpriseLinux7/RHEL-135641
442;RHEL-135642;[vgpu][remote-test]Mechdyne TGX remote display test;Test Mechdyne TGX remote display with qemu and vGPU enablement for Windows and Linux VMs;Zhiyi Guo (zhguo);Critical;Positive;Manual Only;;1; Boot guest with vgpu and TGX server active, remote access guest through NICE dcv client, shutdown guest.; Guest desktop can be accessed from receiver, no corruption display, guest can shutdown and receiver will disconnect automatically.;Test Case;RedHatEnterpriseLinux7/RHEL-135642
442;;;;;;;;;2;Inside guest, play a youtube 1080p video in full screen mode(use chrome browser).;"Both video and audio can be transferred to client side, check the desktop performance from client:
 Framerate: around 45-50 fps, video looks fluent";;RedHatEnterpriseLinux7/RHEL-135642
442;;;;;;;;;3;Inside guest, start heaven benchmark test in full screen mode.;"Both video and audio can be transferred to client side, check the desktop performance from client:
 Framerate: around 45-50 fps, looks fluent
 heaven benchmark shows the gpu performance is around 50-60fps";;RedHatEnterpriseLinux7/RHEL-135642
443;RHEL-135683;pvticketlock performance of latest rhel guest should not lower than rhel7.4 GA guest;pvticketlock performance of latest rhel guest should not lower than rhel7.4 GA guest;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;" Boot latest rhel guest with similar cpu topology.
 For example, if the topology of your intel host is:
 CPU(s):                12
 On-line CPU(s) list:   0-11
 Thread(s) per core:    1
 Core(s) per socket:    6
 Socket(s):             2

 Then the qemu options for cpu topology are: -smp 12,sockets=2,threads=1,cores=6
 If the topology of your amd host is:
 CPU(s): 128
 On-line CPU(s) list: 0-127
 Thread(s) per core: 2
 Core(s) per socket: 32
 Socket(s): 2Then the qemu options for cpu topology are: -smp 128,sockets=2,threads=1,cores=64"; Guest boot with defined topology;Test Case;RedHatEnterpriseLinux7/RHEL-135683
443;;;;;;;;;2;Inside guest, compile and run the benchmark three times, summarize the the results;"Example of summary:
 test type: insmod locktest/locktest.ko num_threads=28; rmmod locktest
[  399.686035] num_threads=28, min/max/avg 780772/1188843/946407
[  405.744861] num_threads=28, min/max/avg 882404/1210608/1033881
[  411.798548] num_threads=28, min/max/avg 834606/1283749/1038618
average = 1006302

test type: insmod locktest/locktest.ko num_threads=56; rmmod locktest
[  417.871269] num_threads=56, min/max/avg 682462/956307/802795
[  423.935982] num_threads=56, min/max/avg 555533/944672/742834
[  430.002225] num_threads=56, min/max/avg 556415/831202/671903
average = 739177

test type: insmod locktest/locktest.ko num_threads=84; rmmod locktest
[  436.081790] num_threads=84, min/max/avg 518092/962376/604808
[  442.155756] num_threads=84, min/max/avg 498851/648034/546239
[  448.229942] num_threads=84, min/max/avg 494769/792739/564800
average = 571949

test type: insmod locktest/locktest.ko num_threads=112; rmmod locktest
[  454.712963] num_threads=112, min/max/avg 372796/568243/443084
[  460.803516] num_threads=112, min/max/avg 352781/540751/427073
[  467.009160] num_threads=112, min/max/avg 380378/709347/480352
average = 450170";;RedHatEnterpriseLinux7/RHEL-135683
443;;;;;;;;;3;Switch guest to rhel7.4 GA guest;Guest boot with defined topology;;RedHatEnterpriseLinux7/RHEL-135683
443;;;;;;;;;4;Inside guest, compile and run the benchmark three times, summarize the the results. Then compare the results.;"Example of summary:
 test type: insmod locktest/locktest.ko num_threads=28; rmmod locktest
[  369.119482] num_threads=28, min/max/avg 643524/1020104/805800
[  375.169927] num_threads=28, min/max/avg 552438/845322/696165
[  381.230409] num_threads=28, min/max/avg 563137/1066326/817249
average = 773071

test type: insmod locktest/locktest.ko num_threads=56; rmmod locktest
[  387.305450] num_threads=56, min/max/avg 611620/851174/734036
[  393.378870] num_threads=56, min/max/avg 289085/521187/438929
[  399.449564] num_threads=56, min/max/avg 740878/1099991/864008
average = 678991

test type: insmod locktest/locktest.ko num_threads=84; rmmod locktest
[  405.553873] num_threads=84, min/max/avg 438056/651851/545726
[  411.657596] num_threads=84, min/max/avg 505622/775115/634506
[  417.766649] num_threads=84, min/max/avg 481724/681003/574214
average = 584815

test type: insmod locktest/locktest.ko num_threads=112; rmmod locktest
[  424.301598] num_threads=112, min/max/avg 459119/631448/544132
[  430.928845] num_threads=112, min/max/avg 455308/754761/555582
[  437.596408] num_threads=112, min/max/avg 433391/612071/534874
average = 544863results compare:
        threads num  |  kernel 811 score  |  kernel 812 score  |  ratio
           28       |       1006302      |        773071      |   77%
           56       |       739177       |        678991      |   92%
           84       |       571949       |        584815      |  102%
          112       |       450170       |        544863      |  121%

pvticketlock performance will gain more score as threads num increasing.";;RedHatEnterpriseLinux7/RHEL-135683
444;RHEL-135804;[vgpu][nvidia]vgpu display should work with target multi-user - rhel-only;vgpu display should work with target multi-user{comment:25}{comment:26};Zhiyi Guo (zhguo);High;Positive;Not Automated;;1;"Boot a rhel guest with emulated vga device and vgpu device, add display=on option to vgpu device option.
 Reference qemu cli:
 /usr/libexec/qemu-kvm -name rhel -m 16G -machine pc,accel=kvm \
         -S \
         -cpu Haswell-noTSX,enforce \
         -smp 4\
         -monitor stdio \
         -qmp unix:/tmp/qmp1,server,nowait \
         -device VGA \
         -vnc :0 \
         -serial unix:/tmp/console1,server,nowait \
         -uuid 115e11b2-a869-41b5-91cd-6a32a907be7e \
         -drive file=rhel7.6.qcow2,if=none,id=drive-scsi-disk0,format=qcow2,cache=none,werror=stop,rerror=stop -device ide-hd,drive=drive-scsi-disk0,id=scsi-disk0 \
         -netdev tap,id=idinWyYp,vhost=on -device virtio-net-pci,mac=2e:39:fa:ff:88:a0,id=idlbq7eA,netdev=idinWyYp \
        -device vfio-pci,sysfsdev=/sys/bus/mdev/devices/4560b9f9-c005-4c55-bf52-a3ce128996c0,id=GRID,display=on \ ";"qemu can start without complain.
 No errors prompt from host dmesg and journalctl ";Test Case;RedHatEnterpriseLinux7/RHEL-135804
444;;;;;;;;;2;Use vnc client to connect to qemu vnc port;"Guest can boot to desktop, guest is using emulated  vga device as primary display.
 How to check emulated vga device is primary display:
 For rhel guest:
 execute xrandr in gnome-terminal, you can find keywords: Virtual-1 connected";;RedHatEnterpriseLinux7/RHEL-135804
444;;;;;;;;;3;"(Note these are executed from vnc)
 Install vgpu driver inside guest and configure guest to use display provided by vgpu device
 For rhel guest:
 1. blacklist nouveau from system and reboot to mulituser target
 blacklist example:
 # cat /etc/modprobe.d/blacklist-nouveau.conf 
 # RPM Fusion blacklist for nouveau driver - you need to run as root:
 # dracut -f /boot/initramfs-$(uname -r).img $(uname -r)
 # if nouveau is loaded despite this file.
 blacklist nouveau

 2. Download driver by:
 wget http://10.66.9.237/gpu-testing/vgpu-drivers/nvidia/latest-y/rhel-guest-driver.run
 3. Install driver by:
 sh rhel-guest-driver.run -s";No errors prompt from guest/host dmesg and journalctl;;RedHatEnterpriseLinux7/RHEL-135804
444;;;;;;;;;4;"check vgpu display should be enabled:
 #cat /proc/fb";There should be 2 frame buffer drivers;;RedHatEnterpriseLinux7/RHEL-135804
444;;;;;;;;;5;"check vgpu display connection:
 #for p in /sys/class/drm/*/status; do con=${p%/status}; echo -n ""${con#*/card?-}: ""; cat $p; done";"vgpu display should be connected to one of the vgpu heads:
 For example:
 Virtual-1: connected
 DP-1: disconnected
 DP-2: disconnected
 DP-3: disconnected
 DP-4: connected
​​";;RedHatEnterpriseLinux7/RHEL-135804
444;;;;;;;;;6;"(Note this is executed from vnc)
  Specify vgpu display as tty console output in kernel line and reboot guest to make it effect, input ctrl + alt + 2 to switch to vgpu display.
 kernel line parameter used:
 fbcon=map:1";Can interact with terminal from vgpu display;;RedHatEnterpriseLinux7/RHEL-135804
444;;;;;;;;;7;(Priority low, this means we test this case using spice once  the major vgpu run has been done) Switch the display protocol to spice and retest the scenario ;Test results remain similar as vnc;;RedHatEnterpriseLinux7/RHEL-135804
445;RHEL-135824;[cpu][cpu hotplug]hotplug one cpu in use from guest - X86 Only;"hotplug one CPU in use from guest.
";Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;1;" 1.Boot guest with qemu cli:
 /usr/libexec/qemu-kvm -name rhel7.3 -m 2048 \
         -cpu Haswell-noTSX \
         -smp 1,threads=2,cores=1,sockets=3,maxcpus=6 \
          -vga qxl\
         -spice port=3003,disable-ticketing \
         -device virtio-serial -chardev spicevmc,id=vdagent,debug=0,name=vdagent \
         -device virtserialport,chardev=vdagent,name=com.redhat.spice.0 \
         -drive file=/home/rhel73.qcow2,if=none,id=drive-scsi-disk0,format=qcow2,cache=none,werror=stop,rerror=stop -device virtio-scsi-pci,id=scsi0,disable-modern=off,disable-legacy=off -device scsi-hd,drive=drive-scsi-disk0,bus=scsi0.0,scsi-id=0,lun=0,id=scsi-disk0,bootindex=1 \
         -qmp tcp:localhost:4444,server,nowait \ ";" after step 2,qmp error prompt:{""error"": {""class"": ""GenericError"", ""desc"": ""CPU[0] with APIC ID 0 exists""}}
 after step 3,new vcpu hotplug successfully and guest . qmp error prompt after the cpu again:{""error"": {""class"": ""GenericError"", ""desc"": ""CPU[1] with APIC ID 1 exists""}}";Test Case;RedHatEnterpriseLinux7/RHEL-135824
445;;;;;;;;;2;"2.hotplug an already exists vcpu:
 { ""execute"": ""device_add"",""arguments"":{""driver"":""Haswell-noTSX-x86_64-cpu"",""core-id"": 0, ""thread-id"": 0, ""socket-id"": 0,""id"":""core1""}}";​​;;RedHatEnterpriseLinux7/RHEL-135824
445;;;;;;;;;3;"3.hotplug a new vcpu and hotplug the cpu again, guest should get a new vcpu after 1st hotplug:
 { ""execute"": ""device_add"",""arguments"":{""driver"":""Haswell-noTSX-x86_64-cpu"",""core-id"": 0, ""thread-id"": 1, ""socket-id"": 0,""id"":""core1""}}
 { ""execute"": ""device_add"",""arguments"":{""driver"":""Haswell-noTSX-x86_64-cpu"",""core-id"": 0, ""thread-id"": 1, ""socket-id"": 0,""id"":""core2""}}";​​;;RedHatEnterpriseLinux7/RHEL-135824
446;RHEL-136111;IDM-SSSD-TC: ldap_provider: netgroup: crash in nss protocol fill netgrent with segfault at 80 ip 000055612688c2a0 sp 00007ffddf9b9cd0 error 4 in sssd nss;"Bugzilla : https://bugzilla.redhat.com/show_bug.cgi?id=1579703 

Description : Previously, the code in the sssd_nss handling of netgroups could take the same path when a netgroup was expired explicitly, for example using the sssd_cache command line tool, and when the netgroup's lifetime expired on its own, implicitly. Because both expiring the netgroup explicitly and implicitly involves freeing the netgroup memory representation, the sssd_nss process was sometimes terminated with a double-free memory error. With this update,freeing the netgroup explicitly only removes a reference to the netgroup from the hash table that holds all the netgroups. The memory is really freed only when the netgroup lifetime expires on its own. As a result, the double-free memory error no longer occurs.
";Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-136111
447;RHEL-136113;[SR-IOV] Check nodedev-dumpxml show SR-IOV detail info correctly - bug665446  1055948 979290  981546;"Check nodedev-dumpxml show SR-IOV detail info correctly 
check the nodedev-dumpxml  when the vfs are created or not created  ---update in rhel7.3";Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"get a machine support sriov, for example:
 1. For 82576 NIC, check the pf device.

 # lspci | grep 82576
";"# lspci | grep 82576
 03:00.0 Ethernet controller: Intel Corporation 82576ES 10-Gigabit SFI/SFP+ Network Connection (rev 01)
 03:00.1 Ethernet controller: Intel Corporation 82576ES 10-Gigabit SFI/SFP+ Network Connection (rev 01)";Test Case;RedHatEnterpriseLinux7/RHEL-136113
447;;;;;;;;;2;"2. Check the PF  nodedev dumpxml
 
 # virsh nodedev-dumpxml  pci_0000_03_00_0
​​";"# virsh nodedev-dumpxml  pci_0000_03_00_0
   <device>
   <name>pci_0000_03_00_0</name>
  <path>/sys/devices/pci0000:00/0000:00:01.0/0000:03:00.0</path>
   <parent>pci_0000_00_01_0</parent>
   <driver>
     <name>igb</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>3</bus>
     <slot>0</slot>
     <function>0</function>
     <product id='0x10c9'>82576 Gigabit Network Connection</product> 
        <vendor id='0x8086'>Intel Corporation</vendor>
    <capability type='virt_functions'  maxCount='7'/>
       <iommuGroup number='14'>
       <address domain='0x0000' bus='0x03' slot='0x00' function='0x0'/>
     </iommuGroup>
     <pci-express>
       <link validity='cap' port='0' speed='2.5' width='4'/>
       <link validity='sta' speed='2.5' width='4'/>
     </pci-express>
   </capability>
 </device>";;RedHatEnterpriseLinux7/RHEL-136113
447;;;;;;;;;3;"check the max vf it support
 
 # cat /sys/devices/pci0000:00/0000:00:01.0/0000:03:00.0/sriov_totalvfs
​​";"7

 (same as the maxcount above)";;RedHatEnterpriseLinux7/RHEL-136113
447;;;;;;;;;4;"# virsh nodedev-dumpxml  pci_0000_03_00_0 > pf.xml
 # virt-xml-validate pf.xml";pf.xml validates;;RedHatEnterpriseLinux7/RHEL-136113
447;;;;;;;;;5;"3. Create the VFs 
 
 # echo 2 > /sys/devices/pci0000:00/0000:00:01.0/0000:03:00.0/sriov_numvfs
​​";​​;;RedHatEnterpriseLinux7/RHEL-136113
447;;;;;;;;;6;"4.  Check the dumpxml of  PF
 
 # virsh nodedev-dumpxml pci_0000_03_00_0";"Output: 
 <device>
   <name>pci_0000_03_00_0</name>
  <path>/sys/devices/pci0000:00/0000:00:01.0/0000:03:00.0</path>
   <parent>pci_0000_00_01_0</parent>
   <driver>
     <name>igb</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>3</bus>
     <slot>0</slot>
     <function>0</function>
      <product id='0x10c9'>82576 Gigabit Network Connection</product> 
        <vendor id='0x8086'>Intel Corporation</vendor>
        <capability type='virt_functions'  maxCount='7'>
       <address domain='0x0000' bus='0x03' slot='0x10' function='0x0'/>
       <address domain='0x0000' bus='0x03' slot='0x10' function='0x2'/>
     </capability>
     <iommuGroup number='14'>
       <address domain='0x0000' bus='0x03' slot='0x00' function='0x0'/>
     </iommuGroup>
     <pci-express>
       <link validity='cap' port='0' speed='2.5' width='4'/>
       <link validity='sta' speed='2.5' width='4'/>
     </pci-express>
   </capability>
 </device>
 
 (2 VFs exposed after created)";;RedHatEnterpriseLinux7/RHEL-136113
447;;;;;;;;;7;"# virsh nodedev-dumpxml  pci_0000_03_00_0 > pf_with_vf.xml
 # virt-xml-validate pf_with_vf.xml";pf_with_vf.xml validates;;RedHatEnterpriseLinux7/RHEL-136113
447;;;;;;;;;8;"5.   Check the dumpxml of  VF
 
 #  virsh nodedev-dumpxml pci_0000_03_10_0

 for anther vf:
 #  virsh nodedev-dumpxml pci_0000_03_10_2

 (get the pci addresses by the output in step 4)";"Output:
 <device>
   <name>pci_0000_03_10_0</name>
  <path>/sys/devices/pci0000:00/0000:00:01.0/0000:03:10.0</path>
   <parent>pci_0000_00_01_0</parent>
   <driver>
     <name>igbvf</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>3</bus>
     <slot>16</slot>
     <function>0</function>
     <product id='0x10ca'>82576 Virtual Function</product>
     <vendor id='0x8086'>Intel Corporation</vendor>
     <capability type='phys_function'>
       <address domain='0x0000' bus='0x03' slot='0x00' function='0x0'/>
     </capability>
     <iommuGroup number='23'>
       <address domain='0x0000' bus='0x03' slot='0x10' function='0x0'/>
     </iommuGroup>
     <pci-express>
       <link validity='cap' port='0' speed='2.5' width='4'/>
       <link validity='sta' width='0'/>
     </pci-express>
   </capability>
 </device>
 
 (its PF is exposed)";;RedHatEnterpriseLinux7/RHEL-136113
447;;;;;;;;;9;"# virsh nodedev-dumpxml pci_0000_03_10_0 > vf.xml
 # virt-xml-validate vf.xml 
";vf.xml validates;;RedHatEnterpriseLinux7/RHEL-136113
447;;;;;;;;;10;"6. Check the IP address of  PF and VF
​​";both the pf and vf can obtain ip address once there is a link (ensure you have cable plugged, request ip by dhcp using # dhclient );;RedHatEnterpriseLinux7/RHEL-136113
447;;;;;;;;;11;"7. disable vf, check the xml updated
 # echo 0 > /sys/devices/pci0000:00/0000:00:01.0/0000:03:00.0/sriov_numvfs
​​";"
​​";;RedHatEnterpriseLinux7/RHEL-136113
447;;;;;;;;;12;"8. check xml of PF
 # virsh nodedev-dumpxml pci_0000_03_00_0";"
 <device>
   <name>pci_0000_03_00_0</name>
  <path>/sys/devices/pci0000:00/0000:00:01.0/0000:03:00.0</path>
   <parent>pci_0000_00_01_0</parent>
   <driver>
     <name>igb</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>3</bus>
     <slot>0</slot>
     <function>0</function>
     <product id='0x10c9'>82576 Gigabit Network Connection</product>
     <vendor id='0x8086'>Intel Corporation</vendor>
     <capability type='virt_functions' maxCount='7'/>
     <iommuGroup number='14'>
       <address domain='0x0000' bus='0x03' slot='0x00' function='0x0'/>
     </iommuGroup>
     <pci-express>
       <link validity='cap' port='0' speed='2.5' width='4'/>
       <link validity='sta' speed='2.5' width='4'/>
     </pci-express>
   </capability>
 </device>
 
 (compare with step 4, no vf any more)";;RedHatEnterpriseLinux7/RHEL-136113
447;;;;;;;;;13;"9. vf do not exists
 # virsh nodedev-dumpxml pci_0000_03_10_0
​​";"error: Could not find matching device 'pci_0000_03_10_0'
 error: Node device not found: no node device with matching name 'pci_0000_03_10_0'";;RedHatEnterpriseLinux7/RHEL-136113
448;RHEL-136117;[scsi] dumpxml for scsi;scsi describes a SCSI device. Sub-elements include: host, bus, target, lun, type;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;scsi;​​;Test Case;RedHatEnterpriseLinux7/RHEL-136117
448;;;;;;;;;2;"# virsh nodedev-list --cap scsi
 
​​";"scsi_0_2_0_0
 scsi_1_0_0_0
 scsi_3_0_0_0
 scsi_5_0_0_0
 scsi_5_0_0_1
 scsi_5_0_1_0
 scsi_5_0_1_1";;RedHatEnterpriseLinux7/RHEL-136117
448;;;;;;;;;3;"# virsh nodedev-dumpxml scsi_5_0_0_1

 (both for remote and local devices has the similar output)";"<device>
   <name>scsi_5_0_0_1</name>
   <path>/sys/devices/pci0000:00/0000:00:09.0/0000:18:00.1/host5/rport-5:0-0/target5:0:0/5:0:0:1</path>
   <parent>scsi_target5_0_0</parent>
   <driver>
     <name>sd</name>
   </driver>
   <capability type='scsi'>
     <host>5</host>
     <bus>0</bus>
     <target>0</target>
     <lun>1</lun>
     <type>disk</type>
   </capability>
 </device>";;RedHatEnterpriseLinux7/RHEL-136117
448;;;;;;;;;4;# virsh nodedev-dumpxml scsi_5_0_0_1 > scsi_5_0_0_1;​​;;RedHatEnterpriseLinux7/RHEL-136117
448;;;;;;;;;5;# virt-xml-validate scsi_5_0_0_1; scsi_5_0_0_1 validates;;RedHatEnterpriseLinux7/RHEL-136117
449;RHEL-136118;list and dumpxml for system;list and dumpxml for system;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"# virsh nodedev-list --cap system
 computer";​​;Test Case;RedHatEnterpriseLinux7/RHEL-136118
449;;;;;;;;;2;"# virsh nodedev-dumpxml computer
 
​​";"<device>
   <name>computer</name>
   <capability type='system'>
     <product>System x3850 X5 -[7143TBA]-</product>
     <hardware>
       <vendor>IBM</vendor>
       <version>06</version>
       <serial>06L2026</serial>
       <uuid>01e9b6a2-da1c-11e1-9aa3-3440b5b10930</uuid>
     </hardware>
     <firmware>
       <vendor>IBM Corp.</vendor>
       <version>-[G0E185AUS-1.85]-</version>
       <release_date>04/22/2015</release_date>
     </firmware>
   </capability>
 </device>";;RedHatEnterpriseLinux7/RHEL-136118
449;;;;;;;;;3;# virsh nodedev-list --tree;check the outputs;;RedHatEnterpriseLinux7/RHEL-136118
449;;;;;;;;;4;"# virsh nodedev-dumpxml computer > computer
 # virt-xml-validate computer";computer validates;;RedHatEnterpriseLinux7/RHEL-136118
450;RHEL-136198;verify the rpm packages after install - bug 1559284;verify the xml config file;Yalan Zhang (yalzhang);High;Positive;Automated;;1; # rpm -V libvirt-daemon-config-nwfilter;"should validate successfully and no output
 not like:
 # rpm -V libvirt-daemon-config-nwfilter-3.9.0-14.el7_5.2.x86_64 .M....... g /etc/libvirt/nwfilter/allow-arp.xml .M....... g /etc/libvirt/nwfilter/allow-dhcp-server.xml .M....... g /etc/libvirt/nwfilter/allow-dhcp.xml .M....... g /etc/libvirt/nwfilter/allow-incoming-ipv4.xml .M....... g /etc/libvirt/nwfilter/allow-ipv4.xml .... .M....... g /etc/libvirt/nwfilter/qemu-announce-self.xml";Test Case;RedHatEnterpriseLinux7/RHEL-136198
451;RHEL-136199;virt-xml-validate for all the built-in nwfilter xml - bug 1593549;" Bug 1593549 - parts of the network filter can not pass virt-xml-validate
 
";Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"1. get all the built-in nwfilter name into one file 
 # virsh nwfilter-list > test
 edit the file to be like this:
 # cat test
 allow-arp           
 allow-dhcp          
 allow-dhcp-server   
 allow-incoming-ipv4 
 allow-ipv4          
 clean-traffic       
 no-arp-ip-spoofing  
 no-arp-mac-spoofing 
 no-arp-spoofing     
 no-ip-multicast     
 no-ip-spoofing      
 no-mac-broadcast    
 no-mac-spoofing     
 no-other-l2-traffic 
 no-other-rarp-traffic
 qemu-announce-self  
 qemu-announce-self-rarp
";​​;Test Case;RedHatEnterpriseLinux7/RHEL-136199
451;;;;;;;;;2;"2. Prepare a simple script as below:
 # cat test.sh 
 #!/bin/bash
 cat test | while read line
 do 
   virsh nwfilter-dumpxml ${line} > /tmp/${line}.xml
   virt-xml-validate /tmp/${line}.xml
 done";​​;;RedHatEnterpriseLinux7/RHEL-136199
451;;;;;;;;;3;"3. validate all the nwfilter dumpxml file successfully.
 # ./test.sh
 /tmp/allow-arp.xml validates
 /tmp/allow-dhcp.xml validates
 /tmp/allow-dhcp-server.xml validates
 /tmp/allow-incoming-ipv4.xml validates
 /tmp/allow-ipv4.xml validates
 /tmp/clean-traffic.xml validates
 /tmp/no-arp-ip-spoofing.xml validates
 /tmp/no-arp-mac-spoofing.xml validates
 /tmp/no-arp-spoofing.xml validates
 /tmp/no-ip-multicast.xml validates
 /tmp/no-ip-spoofing.xml validates
 /tmp/no-mac-broadcast.xml validates
 /tmp/no-mac-spoofing.xml validates
 /tmp/no-other-l2-traffic.xml validates
 /tmp/no-other-rarp-traffic.xml validates
 /tmp/qemu-announce-self.xml validates
 /tmp/qemu-announce-self-rarp.xml validates";both can be validate successfully;;RedHatEnterpriseLinux7/RHEL-136199
452;RHEL-136207;[scsi_host] dumpxml for scsi_host for HBA related devices - Bug 1593563;scsi describes a SCSI device. Sub-elements include: host, bus, target, lun, type;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;scsi_host;​​;Test Case;RedHatEnterpriseLinux7/RHEL-136207
452;;;;;;;;;2;"1) 
 # virsh nodedev-list --cap scsi_host";"scsi_host0
 scsi_host1
 scsi_host10
 scsi_host12
 scsi_host3
 scsi_host4
 scsi_host8
 scsi_host9
 
 (commain device + HBA + vHBA)";;RedHatEnterpriseLinux7/RHEL-136207
452;;;;;;;;;3;"2) 
 # virsh nodedev-list --cap fc_host
​​";"scsi_host10
 scsi_host12
 scsi_host8
 scsi_host9

 (the HBA together with its vHBA)";;RedHatEnterpriseLinux7/RHEL-136207
452;;;;;;;;;4;"3) 
 # virsh nodedev-list --cap vports
​​";"scsi_host8
 scsi_host9
 
 (the HBA)";;RedHatEnterpriseLinux7/RHEL-136207
452;;;;;;;;;5;"1) common device
 
 # virsh nodedev-dumpxml scsi_host0
 
 
 
​​";"<device>
   <name>scsi_host0</name>
   <path>/sys/devices/pci0000:00/0000:00:03.0/0000:09:00.0/host0</path>
   <parent>pci_0000_09_00_0</parent>
   <capability type='scsi_host'>
     <host>0</host>
     <unique_id>2304</unique_id>
   </capability>
 </device>
 
 host,
 unique_id
 capability
 
 should be exposed";;RedHatEnterpriseLinux7/RHEL-136207
452;;;;;;;;;6;"# virsh nodedev-dumpxml scsi_host0 > common.xml
 # virt-xml-validate common.xml";​​;;RedHatEnterpriseLinux7/RHEL-136207
452;;;;;;;;;7;"2) scsi_host with vports and fc_host cap (HBA)
 # virsh nodedev-dumpxml scsi_host8
​​";"<device>
   <name>scsi_host8</name>
   <path>/sys/devices/pci0000:00/0000:00:09.0/0000:18:00.1/host8</path>
   <parent>pci_0000_18_00_1</parent>
   <capability type='scsi_host'>
     <host>8</host>
     <unique_id>8</unique_id>
     <capability type='fc_host'>
       <wwnn>20000024ff370145</wwnn>
       <wwpn>21000024ff370145</wwpn>
       <fabric_wwn>2001000dec9877c1</fabric_wwn>
     </capability>
     <capability type='vport_ops'>
       <max_vports>254</max_vports>
       <vports>2</vports>
     </capability>
   </capability>
 </device>
 
 host,
 unique_id
 capability
 
 should be exposed";;RedHatEnterpriseLinux7/RHEL-136207
452;;;;;;;;;8;"#  virsh nodedev-dumpxml scsi_host8 > scsi_host8
 # virt-xml-validate scsi_host8
​​";"scsi_host8  validates
​​";;RedHatEnterpriseLinux7/RHEL-136207
452;;;;;;;;;9;"3) scsi_host with fc_host only
 (vHBA)
 # virsh nodedev-dumpxml scsi_host10
 
 
​​";"<device>
   <name>scsi_host10</name>
   <path>/sys/devices/pci0000:00/0000:00:09.0/0000:18:00.1/host8/vport-8:0-0/host10</path>
   <parent>scsi_host8</parent>
   <capability type='scsi_host'>
     <host>10</host>
     <unique_id>10</unique_id>
     <capability type='fc_host'>
       <wwnn>20000000c99e2b82</wwnn>
       <wwpn>1000000000000005</wwpn>
       <fabric_wwn>2001000dec9877c1</fabric_wwn>
     </capability>
   </capability>
 </device>
 
 host,
 unique_id
 capability
 
 should be exposed
​​";;RedHatEnterpriseLinux7/RHEL-136207
452;;;;;;;;;10;"# virt-xml-validate scsi_host10
​​";scsi_host10 validates;;RedHatEnterpriseLinux7/RHEL-136207
453;RHEL-136208;[scsi_target][scsi_generic] dumpxml for scsi_target / scsi_generic - Bug 1593563;scsi describes a SCSI device. Sub-elements include: host, bus, target, lun, type;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;scsi_target;​​;Test Case;RedHatEnterpriseLinux7/RHEL-136208
453;;;;;;;;;2;"# virsh nodedev-list --cap scsi_target
 
 
​​";"scsi_target0_2_0
 scsi_target12_0_0  ---> from vHBA
 scsi_target12_0_1  ---> from vHBA
 scsi_target1_0_0
 scsi_target3_0_0
 scsi_target8_0_0  ---> from HBA
 scsi_target8_0_1";;RedHatEnterpriseLinux7/RHEL-136208
453;;;;;;;;;3;"for vHBA and HBA
 
 # virsh nodedev-dumpxml scsi_target8_0_1
 
​​";"<device>
   <name>scsi_target8_0_1</name>
   <path>/sys/devices/pci0000:00/0000:00:09.0/0000:18:00.1/host8/rport-8:0-1/target8:0:1</path>
   <parent>scsi_host8</parent>
   <capability type='scsi_target'>
     <target>target8:0:1</target>
     <capability type='fc_remote_port'>
       <rport>rport-8:0-1</rport>
       <wwpn>0x203400a0b85b0acc</wwpn>
     </capability>
   </capability>
 </device>";;RedHatEnterpriseLinux7/RHEL-136208
453;;;;;;;;;4;"# virsh nodedev-dumpxml scsi_target8_0_1 > test.xml
 # virt-xml-validate test.xml";​​;;RedHatEnterpriseLinux7/RHEL-136208
453;;;;;;;;;5;"local storage

 # virsh nodedev-dumpxml scsi_target0_2_0";"<device>
   <name>scsi_target0_2_0</name>
   <path>/sys/devices/pci0000:00/0000:00:03.0
 /0000:09:00.0/host0/target0:2:0</path>
   <parent>scsi_host0</parent>
   <capability type='scsi_target'>
     <target>target0:2:0</target>
   </capability>
 </device>";;RedHatEnterpriseLinux7/RHEL-136208
453;;;;;;;;;6;"# virsh nodedev-dumpxml scsi_target0_2_0 > local.xml
 # virt-xml-validate local.xml";local.xml validates;;RedHatEnterpriseLinux7/RHEL-136208
453;;;;;;;;;7;scsi_generic;​​;;RedHatEnterpriseLinux7/RHEL-136208
453;;;;;;;;;8;"# virsh nodedev-list --cap scsi_generic
​​";"scsi_generic_sg0  ---> local
 scsi_generic_sg1  ---> cd_dvd
 scsi_generic_sg10 ---> remote
 scsi_generic_sg2  ---> local
 scsi_generic_sg3  ---> remote
 scsi_generic_sg4
 scsi_generic_sg5
 scsi_generic_sg6
 scsi_generic_sg7
 scsi_generic_sg8
 scsi_generic_sg9";;RedHatEnterpriseLinux7/RHEL-136208
453;;;;;;;;;9;"all above different type will get the similar output as right 
 
 # virsh nodedev-dumpxml scsi_generic_sg3
 
​​";"<device>
   <name>scsi_generic_sg3</name>
   <path>/sys/devices/pci0000:00/0000:00:09.0/0000:18:00.1/host5/rport-5:0-0/target5:0:0/5:0:0:0/scsi_generic/sg3</path>
   <devnode type='dev'>/dev/sg3</devnode>
   <parent>scsi_5_0_0_0</parent>
   <capability type='scsi_generic'>
     <char>/dev/sg3</char>
   </capability>
 </device>";;RedHatEnterpriseLinux7/RHEL-136208
453;;;;;;;;;10;"# virsh nodedev-dumpxml scsi_generic_sg3 > sg3
 # virt-xml-validate sg3
";sg3 validates;;RedHatEnterpriseLinux7/RHEL-136208
454;RHEL-136251;[mdev][mdev_types] dumpxml for mdev devices and do validates;[mdev][mdev_types] dumpxml for mdev devices and do validates;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"# virsh nodedev-list --cap mdev_types

";"pci_0000_84_00_0
 pci_0000_85_00_0";Test Case;RedHatEnterpriseLinux7/RHEL-136251
454;;;;;;;;;2;"# virsh nodedev-list --cap mdev
 
 
​​";"mdev_075509f3_45cb_41e5_ac23_e265a6a8ea80
 mdev_3533f4fb_2d91_4710_8243_9dab2f340e50
 mdev_4ac81aae_8432_4388_9277_1c9db7a1b188
 mdev_6287ba21_1f81_422c_a75b_db04e8fb643f
 mdev_91bf0044_6e95_4b45_893c_70c94372c695
 mdev_a41051f6_c481_4591_9d3d_32a7b83a2102
 mdev_a605a7f0_350c_45f4_973d_0d5fa074a0ed
 mdev_e5ed49e5_cb18_4fd4_86d7_ba944eecaf5c
​​";;RedHatEnterpriseLinux7/RHEL-136251
454;;;;;;;;;3; # virsh nodedev-dumpxml pci_0000_84_00_0;"<device>
   <name>pci_0000_84_00_0</name>
   <path>/sys/devices/pci0000:80/0000:80:02.0/0000:82:00.0/0000:83:08.0/0000:84:00.0</path>
   <parent>pci_0000_83_08_0</parent>
   <driver>
     <name>nvidia</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>132</bus>
     <slot>0</slot>
     <function>0</function>
     <product id='0x13f2'>GM204GL [Tesla M60]</product>
     <vendor id='0x10de'>NVIDIA Corporation</vendor>
     <capability type='mdev_types'>
       <type id='nvidia-11'>
         <name>GRID M60-0B</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>16</availableInstances>
       </type>
       <type id='nvidia-12'>
         <name>GRID M60-0Q</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>16</availableInstances>
       </type>
       <type id='nvidia-13'>
         <name>GRID M60-1A</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>8</availableInstances>
       </type>
       <type id='nvidia-14'>
         <name>GRID M60-1B</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>8</availableInstances>
       </type>
       <type id='nvidia-15'>
         <name>GRID M60-1Q</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>8</availableInstances>
       </type>
       <type id='nvidia-16'>
         <name>GRID M60-2A</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>4</availableInstances>
       </type>
       <type id='nvidia-17'>
         <name>GRID M60-2B</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>4</availableInstances>
       </type>
       <type id='nvidia-18'>
         <name>GRID M60-2Q</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>4</availableInstances>
       </type>
       <type id='nvidia-19'>
         <name>GRID M60-4A</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>2</availableInstances>
       </type>
       <type id='nvidia-20'>
         <name>GRID M60-4Q</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>2</availableInstances>
       </type>
       <type id='nvidia-21'>
         <name>GRID M60-8A</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>1</availableInstances>
       </type>
       <type id='nvidia-22'>
         <name>GRID M60-8Q</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>1</availableInstances>
       </type>
     </capability>
     <iommuGroup number='43'>
       <address domain='0x0000' bus='0x84' slot='0x00' function='0x0'/>
     </iommuGroup>
     <numa node='1'/>
     <pci-express>
       <link validity='cap' port='8' speed='8' width='16'/>
       <link validity='sta' speed='2.5' width='16'/>
     </pci-express>
   </capability>
 </device>";;RedHatEnterpriseLinux7/RHEL-136251
454;;;;;;;;;4;"# virsh nodedev-dumpxml pci_0000_85_00_0 > mdev_types.xml
 # virt-xml-validate mdev_types.xml
";mdev_types.xml validates;;RedHatEnterpriseLinux7/RHEL-136251
454;;;;;;;;;5;"# virsh nodedev-dumpxml mdev_075509f3_45cb_41e5_ac23_e265a6a8ea80 


";"<device>
   <name>mdev_075509f3_45cb_41e5_ac23_e265a6a8ea80</name>
   <path>/sys/devices/pci0000:80/0000:80:02.0/0000:82:00.0/0000:83:10.0/0000:85:00.0/075509f3-45cb-41e5-ac23-e265a6a8ea80</path>
   <parent>pci_0000_85_00_0</parent>
   <driver>
     <name>vfio_mdev</name>
   </driver>
   <capability type='mdev'>
     <type id='nvidia-15'/>
     <iommuGroup number='66'/>
   </capability>
 </device>";;RedHatEnterpriseLinux7/RHEL-136251
454;;;;;;;;;6;"# virsh nodedev-dumpxml mdev_075509f3_45cb_41e5_ac23_e265a6a8ea80  > mdev.xml
 # virt-xml-validate mdev.xml 
";mdev.xml validates;;RedHatEnterpriseLinux7/RHEL-136251
455;RHEL-136264;detach / reattach / reset for mdev_types device;detach / reattach / reset for mdev_types device;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;" # virsh nodedev-dumpxml pci_0000_85_00_0

 or
 # virsh nodedev-dumpxml pci_0000_84_00_0";" <device>
   <name>pci_0000_85_00_0</name>
   <path>/sys/devices/pci0000:80/0000:80:02.0/0000:82:00.0/0000:83:10.0/0000:85:00.0</path>
   <parent>pci_0000_83_10_0</parent>
   <driver>
     <name>nvidia</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>133</bus>
     <slot>0</slot>
     <function>0</function>
     <product id='0x13f2'>GM204GL [Tesla M60]</product>
     <vendor id='0x10de'>NVIDIA Corporation</vendor>
     <capability type='mdev_types'>
       <type id='nvidia-11'>
         <name>GRID M60-0B</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>0</availableInstances>
       </type>
  ....
     <type id='nvidia-22'>
         <name>GRID M60-8Q</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>0</availableInstances>
       </type>
     </capability>
     <iommuGroup number='44'>
       <address domain='0x0000' bus='0x85' slot='0x00' function='0x0'/>
     </iommuGroup>
     <numa node='1'/>
     <pci-express>
       <link validity='cap' port='16' speed='8' width='16'/>
       <link validity='sta' speed='2.5' width='16'/>
     </pci-express>
   </capability>
 </device>
";Test Case;RedHatEnterpriseLinux7/RHEL-136264
455;;;;;;;;;2;# virsh nodedev-list --cap mdev_types;"pci_0000_84_00_0
 pci_0000_85_00_0";;RedHatEnterpriseLinux7/RHEL-136264
455;;;;;;;;;3;"# virsh nodedev-detach pci_0000_85_00_0
";Device pci_0000_85_00_0 detached;;RedHatEnterpriseLinux7/RHEL-136264
455;;;;;;;;;4;# virsh nodedev-dumpxml pci_0000_85_00_0;"
 <device>
   <name>pci_0000_85_00_0</name>
   <path>/sys/devices/pci0000:80/0000:80:02.0/0000:82:00.0/0000:83:10.0/0000:85:00.0</path>
   <parent>pci_0000_83_10_0</parent>
   <driver>
     <name>vfio-pci</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>133</bus>
     <slot>0</slot>
     <function>0</function>
     <product id='0x13f2'>GM204GL [Tesla M60]</product>
     <vendor id='0x10de'>NVIDIA Corporation</vendor>
     <iommuGroup number='44'>
       <address domain='0x0000' bus='0x85' slot='0x00' function='0x0'/>
     </iommuGroup>
     <numa node='1'/>
     <pci-express>
       <link validity='cap' port='16' speed='8' width='16'/>
       <link validity='sta' speed='2.5' width='16'/>
     </pci-express>
   </capability>
 </device>";;RedHatEnterpriseLinux7/RHEL-136264
455;;;;;;;;;5;"# virsh nodedev-list --cap mdev_types
";"pci_0000_84_00_0

 (no pci_0000_85_00_0 any more)";;RedHatEnterpriseLinux7/RHEL-136264
455;;;;;;;;;6;"# virsh nodedev-reattach pci_0000_85_00_0
";Device pci_0000_85_00_0 re-attached;;RedHatEnterpriseLinux7/RHEL-136264
455;;;;;;;;;7;# virsh nodedev-list --cap mdev_types;"pci_0000_84_00_0
 pci_0000_85_00_0";;RedHatEnterpriseLinux7/RHEL-136264
455;;;;;;;;;8;"create mdev device under pci_0000_85_00_0
 # cd  /sys/devices/pci0000:80/0000:80:02.0/0000:82:00.0/0000:83:10.0/0000:85:00.0

 # echo `uuidgen` > mdev_supported_types/nvidia-20/create
";​​;;RedHatEnterpriseLinux7/RHEL-136264
455;;;;;;;;;9;# virsh nodedev-list --tree;"... 
 |   +- pci_0000_82_00_0
   |       |
   |       +- pci_0000_83_08_0
   |       |   |
   |       |   +- pci_0000_84_00_0
   |       |     
   |       +- pci_0000_83_10_0
   |           |
   |           +- pci_0000_85_00_0
   |               |
   |               +- mdev_9a17c9c4_c16e_4386_946a_e30b8cfa4bd6
 ...
";;RedHatEnterpriseLinux7/RHEL-136264
455;;;;;;;;;10;"# virsh nodedev-reset pci_0000_85_00_0
";Device pci_0000_85_00_0 reset;;RedHatEnterpriseLinux7/RHEL-136264
455;;;;;;;;;11;# virsh nodedev-list --tree;"... 
 |   +- pci_0000_82_00_0
   |       |
   |       +- pci_0000_83_08_0
   |       |   |
   |       |   +- pci_0000_84_00_0
   |       |     
   |       +- pci_0000_83_10_0
   |           |
   |           +- pci_0000_85_00_0
   |               |
   |               +- mdev_9a17c9c4_c16e_4386_946a_e30b8cfa4bd6
 ...";;RedHatEnterpriseLinux7/RHEL-136264
455;;;;;;;;;12;"# virsh nodedev-list --cap mdev# virsh nodedev-list --cap mdev
 mdev_9a17c9c4_c16e_4386_946a_e30b8cfa4bd6


 # virsh nodedev-list --cap mdev_types
 pci_0000_84_00_0
 pci_0000_85_00_0";​​;;RedHatEnterpriseLinux7/RHEL-136264
455;;;;;;;;;13;# virsh nodedev-dumpxml pci_0000_85_00_0;"<device>
   <name>pci_0000_85_00_0</name>
   <path>/sys/devices/pci0000:80/0000:80:02.0/0000:82:00.0/0000:83:10.0/0000:85:00.0</path>
   <parent>pci_0000_83_10_0</parent>
   <driver>
     <name>nvidia</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>133</bus>
     <slot>0</slot>
     <function>0</function>
     <product id='0x13f2'>GM204GL [Tesla M60]</product>
     <vendor id='0x10de'>NVIDIA Corporation</vendor>
     <capability type='mdev_types'>
       <type id='nvidia-11'>
         <name>GRID M60-0B</name>
         <deviceAPI>vfio-pci</deviceAPI>
         <availableInstances>16</availableInstances>
       </type>
 ...
    </capability>
     <iommuGroup number='44'>
       <address domain='0x0000' bus='0x85' slot='0x00' function='0x0'/>
     </iommuGroup>
     <numa node='1'/>
     <pci-express>
       <link validity='cap' port='16' speed='8' width='16'/>
       <link validity='sta' speed='8' width='16'/>
     </pci-express>
   </capability>
 </device>
";;RedHatEnterpriseLinux7/RHEL-136264
455;;;;;;;;;14;"# virsh nodedev-detach pci_0000_85_00_0
 Device pci_0000_85_00_0 detached
";​​;;RedHatEnterpriseLinux7/RHEL-136264
455;;;;;;;;;15;"# virsh nodedev-list --cap mdev_types
 pci_0000_84_00_0

 # virsh nodedev-list --cap mdev
 #";​​;;RedHatEnterpriseLinux7/RHEL-136264
456;RHEL-136280;detach / reattach / reset for HBA device;detach, reattach, reset for HBA devices;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"1. nodedev-dumpxml 
 # virsh nodedev-dumpxml pci_0000_18_00_1
​​";"<device>
   <name>pci_0000_18_00_1</name>
   <path>/sys/devices/pci0000:00/0000:00:09.0/0000:18:00.1</path>
   <parent>pci_0000_00_09_0</parent>
   <driver>
     <name>qla2xxx</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>24</bus>
     <slot>0</slot>
     <function>1</function>
     <product id='0x2532'>ISP2532-based 8Gb Fibre Channel to PCI Express HBA</product>
     <vendor id='0x1077'>QLogic Corp.</vendor>
     <iommuGroup number='17'>
       <address domain='0x0000' bus='0x18' slot='0x00' function='0x0'/>
       <address domain='0x0000' bus='0x18' slot='0x00' function='0x1'/>
     </iommuGroup>
     <numa node='0'/>
     <pci-express>
       <link validity='cap' port='0' speed='5' width='8'/>
       <link validity='sta' speed='5' width='4'/>
     </pci-express>
   </capability>
 </device>";Test Case;RedHatEnterpriseLinux7/RHEL-136280
456;;;;;;;;;2;"2. nodedev-detach
 # virsh nodedev-detach pci_0000_18_00_1
 
";Device pci_0000_18_00_1 detached;;RedHatEnterpriseLinux7/RHEL-136280
456;;;;;;;;;3;"3. 
 # virsh nodedev-list --tree";"  +- pci_0000_00_09_0
   |   |
   |   +- pci_0000_18_00_0
   |   |   |
   |   |   +- scsi_host13
   |   +- pci_0000_18_00_1
 
 (no scsi_host attached to pci_0000_18_00_1)";;RedHatEnterpriseLinux7/RHEL-136280
456;;;;;;;;;4;"4. nodedev-dumpxml
 
 # virsh nodedev-dumpxml  pci_0000_18_00_1
 
​​";"<device>
   <name>pci_0000_18_00_1</name>
   <path>/sys/devices/pci0000:00/0000:00:09.0/0000:18:00.1</path>
   <parent>pci_0000_00_09_0</parent>
   <driver>
     <name>vfio-pci</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>24</bus>
     <slot>0</slot>
     <function>1</function>
     <product id='0x2532'>ISP2532-based 8Gb Fibre Channel to PCI Express HBA</product>
     <vendor id='0x1077'>QLogic Corp.</vendor>
     <iommuGroup number='17'>
       <address domain='0x0000' bus='0x18' slot='0x00' function='0x0'/>
       <address domain='0x0000' bus='0x18' slot='0x00' function='0x1'/>
     </iommuGroup>
     <numa node='0'/>
     <pci-express>
       <link validity='cap' port='0' speed='5' width='8'/>
       <link validity='sta' speed='5' width='4'/>
     </pci-express>
   </capability>
 </device>
 
 (driver changed to vfio-pci)";;RedHatEnterpriseLinux7/RHEL-136280
456;;;;;;;;;5;"5. reattach
 # virsh nodedev-reattach pci_0000_18_00_1
​​";Device pci_0000_18_00_1 re-attached;;RedHatEnterpriseLinux7/RHEL-136280
456;;;;;;;;;6;"6. dumpxml
 # virsh nodedev-dumpxml  pci_0000_18_00_1";same with step 1, driver change back to qla2xxx;;RedHatEnterpriseLinux7/RHEL-136280
456;;;;;;;;;7;"7. check
 # virsh nodedev-list --tree";"|   +- pci_0000_18_00_1
   |       |
   |       +- scsi_host18
   |           |
   |           +- scsi_target18_0_0
   |           |   |
   |           |   +- scsi_18_0_0_0
   |           |   |   |
   |           |   |   +- block_sdf_3600a0b80005b10ca00005ad456fd8d6d
   |           |   |   +- scsi_generic_sg3
   |           |   |     
   |           |   +- scsi_18_0_0_1
   |           |       |
   |           |       +- block_sdg_3600a0b80005b10ca00005ad656fd8d93
   |           |       +- scsi_generic_sg4
   |           |         
   |           +- scsi_target18_0_1
   |               |
   |               +- scsi_18_0_1_0
   |               |   |
   |               |   +- block_sdh_3600a0b80005b10ca00005ad456fd8d6d
   |               |   +- scsi_generic_sg5
   |               |     
   |               +- scsi_18_0_1_1
   |                   |
   |                   +- block_sdi_3600a0b80005b10ca00005ad656fd8d93
   |                   +- scsi_generic_sg6
 
 
 (the host and the attached storage is exposed)";;RedHatEnterpriseLinux7/RHEL-136280
456;;;;;;;;;8;"8. reset
 # virsh nodedev-reset pci_0000_18_00_1";Device pci_0000_18_00_1 reset;;RedHatEnterpriseLinux7/RHEL-136280
456;;;;;;;;;9;"9. after reset, check
 # virsh nodedev-list --tree";same as step 7, the host and the attached storage is exposed;;RedHatEnterpriseLinux7/RHEL-136280
457;RHEL-136367;[NPIV] Destroy a virtual HBA with NPIV - Bug 1319544;[NPIV] Destroy a virtual HBA with NPIV - Bug 1319544;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"First, do test case ""39814 [NPIV] Create a virtual HBA with NPIV""
 
 # virsh nodedev-destroy scsi_host5
 Destroyed node device 'scsi_host5'";"First, do test case ""39814 [NPIV] Create a virtual HBA with NPIV""
 
 # virsh nodedev-destroy scsi_host5
 Destroyed node device 'scsi_host5'";Test Case;RedHatEnterpriseLinux7/RHEL-136367
458;RHEL-136443;[NFV] Reconnect support for vhost-user;"https://bugzilla.redhat.com/show_bug.cgi?id=1386906 
 https://www.spinics.net/linux/fedora/libvir/msg157706.html 
the element has an optional child element reconnect which configures reconnect timeout if the connection is lost. It has two attributes enabled (which accepts yesand no) and timeout which specifies the amount of seconds after which hypervisor tries to reconnect.";Yalan Zhang (yalzhang);High;Positive;Manual Only;;1;"1. prepare the ovs env as the  RHEL7-51239 setup
 prepare the guests as the RHEL7-51239"; ;Test Case;RedHatEnterpriseLinux7/RHEL-136443
458;;;;;;;;;2;"Scenario 1:
 <reconnect enabled='yes' timeout='60'/>";​​;;RedHatEnterpriseLinux7/RHEL-136443
458;;;;;;;;;3;"2. add the reconnect element into the interface xml as below
 # virsh dumpxml rhel
 ...
   <memoryBacking>
     <hugepages>
       <page size='2048' unit='KiB'/>
     </hugepages>
   </memoryBacking>
 ...
   <cpu>
     <numa>
       <cell id='0' cpus='0-23' memory='1048576' unit='KiB' memAccess='shared'/>
     </numa>
   </cpu>
 ...   
 <interface type='vhostuser'>
       <mac address='52:54:00:93:51:dd'/>
       <source type='unix' path='/var/run/openvswitch/vhost-user2' mode='client'>
         <reconnect enabled='yes' timeout='60'/>
       </source>
       <target dev='vhost-user2'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
     </interface>

 # virsh dumpxml q | grep /interface -B9
 ...
   <memoryBacking>
     <hugepages>
       <page size='2048' unit='KiB'/>
     </hugepages>
   </memoryBacking>
 ...
   <cpu>
     <numa>
       <cell id='0' cpus='0-23' memory='1048576' unit='KiB' memAccess='shared'/>
     </numa>
   </cpu>
 ...
     <interface type='vhostuser'>
       <mac address='52:54:00:93:51:db'/>
       <source type='unix' path='/var/run/openvswitch/vhost-user1' mode='client'>
         <reconnect enabled='yes' timeout='60'/>
       </source>
       <target dev='vhost-user1'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
";​​;;RedHatEnterpriseLinux7/RHEL-136443
458;;;;;;;;;4;"3. start the 2 guests, and login, then config the ip address of the 2 guest
 on guest1(rhel) # nmcli con modify eth0 ipv4.addresses 10.10.10.10/24 ipv4.method manual
 on guest2(q) # nmcli con modify eth0 ipv4.addresses 10.10.10.20/24 ipv4.method manual
 ping each other to confirm the network connection is ok

 on guest2(q)
 # ping 10.10.10.10 -c2
 PING 10.10.10.10 (10.10.10.10) 56(84) bytes of data.
 64 bytes from 10.10.10.10: icmp_seq=1 ttl=64 time=0.135 ms
 64 bytes from 10.10.10.10: icmp_seq=2 ttl=64 time=0.143 ms
 ...

 on guest1(rhel)
 # ping 10.10.10.20
 PING 10.10.10.20 (10.10.10.20) 56(84) bytes of data.
 64 bytes from 10.10.10.20: icmp_seq=1 ttl=64 time=0.215 ms
 64 bytes from 10.10.10.20: icmp_seq=2 ttl=64 time=0.097 ms
 ....

";​​;;RedHatEnterpriseLinux7/RHEL-136443
458;;;;;;;;;5;"on host, check the qemu cmdline
 # ps aux | grep vhost";"....-chardev socket,id=charnet0,path=/var/run/openvswitch/vhost-user2,reconnect=60....
 -chardev socket,id=charnet0,path=/var/run/openvswitch/vhost-user1,reconnect=60 -netdev vhost-user,chardev=charnet0,id=hostnet0 -device virtio-net-pci,netdev=hostnet0,id=net0.....";;RedHatEnterpriseLinux7/RHEL-136443
458;;;;;;;;;6;"4. keep the ping running the guests, re-execute the ovs.sh to disconnect-reconnect the socket, check the ping work status on guests  for about 60s
 on host:
 # ./ovs.sh; date; sleep 55; date
 killing old ovs process
 probing ovs kernel module
 clean env
 init ovs db and boot db server
 2018-06-26T06:23:08Z|00001|vlog|INFO|opened log file /var/log/openvswitch/ovsdb-server.log
 ....
 2018-06-26T06:23:09Z|00027|dpdk|INFO|DPDK Enabled - initialized
 creating bridge and ports
 configure the directions
 Tue Jun 26 14:23:09 CST 2018
 Tue Jun 26 14:23:59 CST 2018 
 ------> now check the status on guest

 (the ovs.sh script will clean the env----> disconnect, then create new env----> for reconnect)
";"after the disconnect-reconnect, guest ping stuck, but after about 60s, the connection recovered
 on q:
 From 10.10.10.10 icmp_seq=183 Destination Host Unreachable
 From 10.10.10.10 icmp_seq=184 Destination Host Unreachable

 on rhel:
 From 10.10.10.20 icmp_seq=162 Destination Host Unreachable
 From 10.10.10.20 icmp_seq=163 Destination Host Unreachable

 after about 60s:
 on q:
 64 bytes from 10.10.10.10: icmp_seq=606 ttl=64 time=0.116 ms
 64 bytes from 10.10.10.10: icmp_seq=607 ttl=64 time=0.107 ms

 on rhel:
 64 bytes from 10.10.10.20: icmp_seq=615 ttl=64 time=0.121 ms
 64 bytes from 10.10.10.20: icmp_seq=616 ttl=64 time=0.122 ms
";;RedHatEnterpriseLinux7/RHEL-136443
458;;;;;;;;;7;"Scenario 2:
 <reconnect enabled='yes' timeout='10'/>";​​;;RedHatEnterpriseLinux7/RHEL-136443
458;;;;;;;;;8;"5. destroy the guests and modify the xml to change timeout to 10, confirm the reconnection succeed after 10s:

 # ./ovs.sh; date; sleep 8; date
 ----> check the status now on guest
";"on rhel:
 64 bytes from 10.10.10.20: icmp_seq=35 ttl=64 time=0.118 ms
 64 bytes from 10.10.10.20: icmp_seq=36 ttl=64 time=0.119 ms
 ===>you can found the connection is break here...but recover in after about 10s, some package lost (seq 37~46)

 64 bytes from 10.10.10.20: icmp_seq=47 ttl=64 time=0.203 ms
 64 bytes from 10.10.10.20: icmp_seq=48 ttl=64 time=0.121 ms
 64 bytes from 10.10.10.20: icmp_seq=49 ttl=64 time=0.097 ms

 on q:
 64 bytes from 10.10.10.10: icmp_seq=21 ttl=64 time=0.108 ms
 64 bytes from 10.10.10.10: icmp_seq=22 ttl=64 time=0.124 ms
 ===>you can found the connection is break here...but recover in after about 10s

 64 bytes from 10.10.10.10: icmp_seq=33 ttl=64 time=0.522 ms
 64 bytes from 10.10.10.10: icmp_seq=34 ttl=64 time=0.205 ms
 64 bytes from 10.10.10.10: icmp_seq=35 ttl=64 time=0.207 ms
";;RedHatEnterpriseLinux7/RHEL-136443
458;;;;;;;;;9;"Scenario 3:
 <reconnect enabled='no' />";​​;;RedHatEnterpriseLinux7/RHEL-136443
458;;;;;;;;;10;"6. destroy the guests and modify the xml to <reconnect enabled='no' />, start the guests, checkt he qemu cmdline
 # ps aux | grep qemu
";"....
 -chardev socket,id=charnet0,path=/var/run/openvswitch/vhost-user1,reconnect=0 
 ...
 -chardev socket,id=charnet0,path=/var/run/openvswitch/vhost-user2,reconnect=0 -netdev vhost-user,chardev=charnet0,id=hostnet0 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:54:00:93:51:dd,bus=pci.0,addr=0x8 
 ...";;RedHatEnterpriseLinux7/RHEL-136443
458;;;;;;;;;11;"7. run ping on each of the guests, execute the ovs.sh to disconnect->prepare forreconnect

 check the guest ping status for about 30s, the connection never recover";"on q:
 64 bytes from 10.10.10.10: icmp_seq=174 ttl=64 time=0.097 ms
 64 bytes from 10.10.10.10: icmp_seq=175 ttl=64 time=0.106 ms

 From 10.10.10.20 icmp_seq=184 Destination Host Unreachable
 From 10.10.10.20 icmp_seq=185 Destination Host Unreachable
 ...
 (never recover)

 on rhel:
 64 bytes from 10.10.10.20: icmp_seq=189 ttl=64 time=0.109 ms
 64 bytes from 10.10.10.20: icmp_seq=190 ttl=64 time=0.140 ms

 From 10.10.10.10 icmp_seq=240 Destination Host Unreachable
 From 10.10.10.10 icmp_seq=241 Destination Host Unreachable
 ....
 (never recover)

";;RedHatEnterpriseLinux7/RHEL-136443
458;;;;;;;;;12;"Scenario 4:
 no reconnect element";​​;;RedHatEnterpriseLinux7/RHEL-136443
458;;;;;;;;;13;8. destroy the 2 guests, and modify the xml to delete the reconnect element, start the 2 guests again and ping each other on guest;​​;;RedHatEnterpriseLinux7/RHEL-136443
458;;;;;;;;;14;9. check qemu cmdline, no any attribute about reconnect;-chardev socket,id=charnet0,path=/var/run/openvswitch/vhost-user2 -netdev vhost-user,chardev=charnet0,id=hostnet0 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:54:00:93:51:dd,bus=pci.0,addr=0x8 ;;RedHatEnterpriseLinux7/RHEL-136443
458;;;;;;;;;15;10. re-execute the ovs.sh, the connection will never recover;"on rhel:
 ...
 64 bytes from 10.10.10.20: icmp_seq=26 ttl=64 time=0.130 ms
 64 bytes from 10.10.10.20: icmp_seq=27 ttl=64 time=0.129 ms
 
 From 10.10.10.10 icmp_seq=35 Destination Host Unreachable
 From 10.10.10.10 icmp_seq=36 Destination Host Unreachable
​​";;RedHatEnterpriseLinux7/RHEL-136443
459;RHEL-136456;[virtual network][virtual-nic-device] Do basic virtio-net test with virtio legacy mode;q35 default is modern and pc default is transitional;Yu Wang (wyu);High;Positive;Not Automated;;1;" 1. start guest w/ virtio-net-pci
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,disable-modern=on, disable-legacy=off
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on \ 
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap,disable-modern=on, disable-legacy=off \"; 1. guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL-136456
459;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL-136456
459;;;;;;;;;3;3.check the Memory Range resources (Device Manager -> Properties -> Resources).;"3. If it's greater than 0x1040, the device is configured as ""modern"".
 If there is a resource larger than 0xFFF, the device is configured as ""transitional"". 
 Otherwise, if there is no Memory Range or it's not larger than 0xFFF, the device is configured as ""legacy"".
 the first line:      00000000FEBF1FFF-00000000FEBF1000 = 0xFFF       = 0xFFF
 the second line:00000000FC7FFFFF-00000000FC000000  = 0x700000 > 0xFFF
 So it's transitional.";;RedHatEnterpriseLinux7/RHEL-136456
459;;;;;;;;;4;"3.Stop firewall in guest and the host.
 For linux:
 # iptables -F ; ip6tables -F
 For windows: Control Panel --> search ""firewall""  --> turn windows firewall on or off --> turn the firewall off";3. iptables could be turned off without errors;;RedHatEnterpriseLinux7/RHEL-136456
459;;;;;;;;;5;"4. run netserver on the host:
 # netserver start";"4.host netserver start correctly:
 Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC";;RedHatEnterpriseLinux7/RHEL-136456
459;;;;;;;;;6;"5. running netperf in guest
 for linux: netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024
 for windows: for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netperf_server_ip -c -C -t %j -f m -l 180 -- -m %i done done";"5.netperf test can run normally:
 TCP STREAM TEST from 0.0.0.0 () port 0 AF_INET to 10.66.10.110 () port 0 AF_INET : histogram : interval : demo
 Recv   Send    Send                           
 Socket Socket  Message  Elapsed               
 Size   Size    Size     Time     Throughput   
 bytes  bytes   bytes    secs.    10^6bits/sec   
  
  87380  65536  65536    10.22      98.30";;RedHatEnterpriseLinux7/RHEL-136456
459;;;;;;;;;7;"6. running netserver on guest
 # netsever";6.netserver could start successfully;;RedHatEnterpriseLinux7/RHEL-136456
459;;;;;;;;;8;"7. do netperf from host
 #netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024";"7. netperf works well,host get following msg:
 MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.66.8.116 () port 0 AF_INET : demo
 Recv   Send    Send                          Utilization       Service Demand
 Socket Socket  Message  Elapsed              Send     Recv     Send    Recv
 Size   Size    Size     Time     Throughput  local    remote   local   remote
 bytes  bytes   bytes    secs.    10^6bits/s  % S      % N      us/KB   us/KB
 
  65536  16384   1024    180.01      916.12   41.73    20.96    7.464   3.749";;RedHatEnterpriseLinux7/RHEL-136456
460;RHEL-136457;[virtual network][virtual-nic-device] Do basic virtio-net test with virtio transitional mode;q35 default is modern and pc default is transitional;Yu Wang (wyu);High;Positive;Not Automated;;1;" 1. start guest w/ virtio-net-pci
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,disable-modern=off, disable-legacy=off
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on \ 
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap,disable-modern=off, disable-legacy=off \ "; 1. guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL-136457
460;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL-136457
460;;;;;;;;;3;3. check the Memory Range resources (Device Manager -> Properties -> Resources).;"3. If it's greater than 0x1040, the device is configured as ""modern"".
 If there is a resource larger than 0xFFF, the device is configured as ""transitional"". 
 Otherwise, if there is no Memory Range or it's not larger than 0xFFF, the device is configured as ""legacy"".
 the first line:      00000000FEBF1FFF-00000000FEBF1000 = 0xFFF       = 0xFFF
 the second line:00000000FC7FFFFF-00000000FC000000  = 0x700000 > 0xFFF
 So it's transitional.";;RedHatEnterpriseLinux7/RHEL-136457
460;;;;;;;;;4;"3.Stop firewall in guest and the host.
 For linux:
 # iptables -F ; ip6tables -F
 For windows: Control Panel --> search ""firewall""  --> turn windows firewall on or off --> turn the firewall off";3. iptables could be turned off without errors;;RedHatEnterpriseLinux7/RHEL-136457
460;;;;;;;;;5;"4. run netserver on the host:
 # netserver start";"4.host netserver start correctly:
 Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC";;RedHatEnterpriseLinux7/RHEL-136457
460;;;;;;;;;6;"5. running netperf in guest
 for linux: netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024
 for windows: for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netperf_server_ip -c -C -t %j -f m -l 180 -- -m %i done done";"5.netperf test can run normally:
 TCP STREAM TEST from 0.0.0.0 () port 0 AF_INET to 10.66.10.110 () port 0 AF_INET : histogram : interval : demo
 Recv   Send    Send                           
 Socket Socket  Message  Elapsed               
 Size   Size    Size     Time     Throughput   
 bytes  bytes   bytes    secs.    10^6bits/sec   
  
  87380  65536  65536    10.22      98.30";;RedHatEnterpriseLinux7/RHEL-136457
460;;;;;;;;;7;"6. running netserver on guest
 # netsever";6.netserver could start successfully;;RedHatEnterpriseLinux7/RHEL-136457
460;;;;;;;;;8;"7. do netperf from host
 #netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024";"7. netperf works well,host get following msg:
 MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.66.8.116 () port 0 AF_INET : demo
 Recv   Send    Send                          Utilization       Service Demand
 Socket Socket  Message  Elapsed              Send     Recv     Send    Recv
 Size   Size    Size     Time     Throughput  local    remote   local   remote
 bytes  bytes   bytes    secs.    10^6bits/s  % S      % N      us/KB   us/KB
 
  65536  16384   1024    180.01      916.12   41.73    20.96    7.464   3.749";;RedHatEnterpriseLinux7/RHEL-136457
461;RHEL-136458;[virtual network][virtual-nic-device] Do basic virtio-net test with virtio modern mode;q35 default is modern and pc default is transitional;Yu Wang (wyu);High;Positive;Not Automated;;1;"  1. start guest w/ virtio-net-pci
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,disable-modern=off, disable-legacy=on
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on \ 
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap,disable-modern=off, disable-legacy=on \ "; 1. guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL-136458
461;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL-136458
461;;;;;;;;;3;3 check the Memory Range resources (Device Manager -> Properties -> Resources).;"3. If it's greater than 0x1040, the device is configured as ""modern"".
 If there is a resource larger than 0xFFF, the device is configured as ""transitional"". 
 Otherwise, if there is no Memory Range or it's not larger than 0xFFF, the device is configured as ""legacy"".
 the first line:      00000000FEBF1FFF-00000000FEBF1000 = 0xFFF       = 0xFFF
 the second line:00000000FC7FFFFF-00000000FC000000  = 0x700000 > 0xFFF
 So it's transitional.";;RedHatEnterpriseLinux7/RHEL-136458
461;;;;;;;;;4;"3.Stop firewall in guest and the host.
 For linux:
 # iptables -F ; ip6tables -F
 For windows: Control Panel --> search ""firewall""  --> turn windows firewall on or off --> turn the firewall off";3. iptables could be turned off without errors;;RedHatEnterpriseLinux7/RHEL-136458
461;;;;;;;;;5;"4. run netserver on the host:
 # netserver start";"4.host netserver start correctly:
 Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC";;RedHatEnterpriseLinux7/RHEL-136458
461;;;;;;;;;6;"5. running netperf in guest
 for linux: netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024
 for windows: for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netperf_server_ip -c -C -t %j -f m -l 180 -- -m %i done done";"5.netperf test can run normally:
 TCP STREAM TEST from 0.0.0.0 () port 0 AF_INET to 10.66.10.110 () port 0 AF_INET : histogram : interval : demo
 Recv   Send    Send                           
 Socket Socket  Message  Elapsed               
 Size   Size    Size     Time     Throughput   
 bytes  bytes   bytes    secs.    10^6bits/sec   
  
  87380  65536  65536    10.22      98.30";;RedHatEnterpriseLinux7/RHEL-136458
461;;;;;;;;;7;"6. running netserver on guest
 # netsever";6.netserver could start successfully;;RedHatEnterpriseLinux7/RHEL-136458
461;;;;;;;;;8;"7. do netperf from host
 #netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024";"7. netperf works well,host get following msg:
 MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.66.8.116 () port 0 AF_INET : demo
 Recv   Send    Send                          Utilization       Service Demand
 Socket Socket  Message  Elapsed              Send     Recv     Send    Recv
 Size   Size    Size     Time     Throughput  local    remote   local   remote
 bytes  bytes   bytes    secs.    10^6bits/s  % S      % N      us/KB   us/KB
 
  65536  16384   1024    180.01      916.12   41.73    20.96    7.464   3.749";;RedHatEnterpriseLinux7/RHEL-136458
462;RHEL-136493;[vhostuser] reconnect support for vhostuser - negative;;Yalan Zhang (yalzhang);;Positive;Manual Only;;1;scenario 1: invalid timeout;​​;Test Case;RedHatEnterpriseLinux7/RHEL-136493
462;;;;;;;;;2;"1. edit the timeout to be a negative number:
 <reconnect enabled='yes' timeout='-2'/>
 # virsh edit rhel
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content


 Failed. Try again? [y,n,i,f,?]:  ---> press 'i'
 Domain rhel XML configuration edited.
";can not validate by default, but can be ignored;;RedHatEnterpriseLinux7/RHEL-136493
462;;;;;;;;;3;"2. 
 # virsh dumpxml rhel | grep /interface -B7
  ";"  <interface type='vhostuser'>
       <mac address='52:54:00:93:51:dd'/>
       <source type='unix' path='/var/run/openvswitch/vhost-user2' mode='client'>
         <reconnect enabled='yes' timeout='4294967294'/>
       </source>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL-136493
462;;;;;;;;;4;"scenario 2: 
 <reconnect enabled='yes' timeout='xx'/>";​​;;RedHatEnterpriseLinux7/RHEL-136493
462;;;;;;;;;5;"4. destroy the vm, edit the timeout to 'xx'
 # virsh edit rhel
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content
 
 
 Failed. Try again? [y,n,i,f,?]: ----> press 'i'
 error: XML error: invalid reconnect timeout value: 'xx'
 Failed. Try again? [y,n,f,?]: ";can not validate;;RedHatEnterpriseLinux7/RHEL-136493
462;;;;;;;;;6;"no timeout:
 <reconnect enabled='yes'/>";​​;;RedHatEnterpriseLinux7/RHEL-136493
462;;;;;;;;;7;"5. delete the timeout 
 # virsh edit rhel
 ...
  <source type='unix' path='/var/run/openvswitch/vhost-user2' mode='client'>
         <reconnect enabled='yes'/>
       </source>
 
 error: XML error: missing timeout for chardev with reconnect enabled
 Failed. Try again? [y,n,i,f,?]:  ---> press 'i'
 error: XML error: missing timeout for chardev with reconnect enabled
 Failed. Try again? [y,n,f,?]: 
​​";can not validate;;RedHatEnterpriseLinux7/RHEL-136493
462;;;;;;;;;8;"scenario 3: 
 <reconnect enabled='no' timeout='5'/>";​​;;RedHatEnterpriseLinux7/RHEL-136493
462;;;;;;;;;9;"1.
 # virsh edit rhel
 ....
 <source type='unix' path='/var/run/openvswitch/vhost-user2' mode='client'>
         <reconnect enabled='no' timeout='5'/>
       </source>
 
 Domain rhel XML configuration edited.";​​;;RedHatEnterpriseLinux7/RHEL-136493
462;;;;;;;;;10;"2.
 # virsh dumpxml rhel | grep /source -B2
    ";"  <source type='unix' path='/var/run/openvswitch/vhost-user2' mode='client'>
         <reconnect enabled='no'/>
       </source>
 
 (the timeout is ignored)";;RedHatEnterpriseLinux7/RHEL-136493
463;RHEL-136625;WALA-TC: [Storage] Change OS disk size and extend LV(LVM);;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"1. Prepare a VM in Azure from LVM image
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-136625
463;;;;;;;;;2;"2. Deallocate VM. Resize OS disk to 2048G. Then start VM
​​";​​;;RedHatEnterpriseLinux7/RHEL-136625
463;;;;;;;;;3;"3. Login and check disk size
​​";"# fdisk -l /dev/sda
 Disk /dev/sda: 2199.0 GB, 2199023255552 bytes, 4294967296 sectors";;RedHatEnterpriseLinux7/RHEL-136625
463;;;;;;;;;4;"4. Extend LV and check:
 1). Make partition /dev/sda3, use all the rest space
 fdisk /dev/sda
 ...
 partprobe
 2). VG extend:
 # vgextend rootvg /dev/sda3
 3). LV extend:
 # lvextend -l +100%FREE /dev/rootvg/homelv
 4). Extend fs:
 # resize2fs /dev/rootvg/homelv
 * If xfs, use ""xfs_growfs /home""
 5). Check /dev/mapper/rootvg-homelv size:
 # parted /dev/mapper/rootvg-homelv print
​​";"[root@wala75lvm1 ~]# parted /dev/mapper/rootvg-homelv print
 Model: Linux device-mapper (linear) (dm)
 Disk /dev/mapper/rootvg-homelv: 2166GB
 Sector size (logical/physical): 512B/512B
 Partition Table: loop
 Disk Flags: 
 
 Number  Start  End     Size    File system  Flags
  1      0.00B  2166GB  2166GB  ext4
 
​​";;RedHatEnterpriseLinux7/RHEL-136625
463;;;;;;;;;5;"5. Verify read/write file
​​";​​;;RedHatEnterpriseLinux7/RHEL-136625
464;RHEL-136695;[Network] Define and start network by non-exists PF or PF without VF enabled (negative) - Bug 1047818;should fail to define or start with non-exists PF;Yalan Zhang (yalzhang);High;Negative;Not Automated;;1;" 1. prepare xml as below with un-exsits PF
 # ip l | grep en99
 ==> no such device

 # cat net.xml
 <network>
   <name>hostnet2</name>
   <forward mode='hostdev' managed='yes'>
     <pf dev='en99'/> 
   </forward>
 </network>
"; ;Test Case;RedHatEnterpriseLinux7/RHEL-136695
464;;;;;;;;;2;"2. define and start network
 # virsh net-define net.xml
 Network hostnet2 defined from net.xml

 # virsh net-start hostnet2
 error: Failed to start network hostnet2
 error: internal error: No usable Vf's present on SRIOV PF en99
";fail to start and report reasonable error message;;RedHatEnterpriseLinux7/RHEL-136695
464;;;;;;;;;3;"3. create network
 # virsh net-undefine hostnet2
 Network hostnet2 has been undefined

 # virsh net-create net.xml
 error: Failed to create network from net.xml
 error: internal error: No usable Vf's present on SRIOV PF en99";fail to create and report reasonable error message;;RedHatEnterpriseLinux7/RHEL-136695
464;;;;;;;;;4;Scenario 2: for normal interface which do not support SR-IOV, or PF which do not enable any VF;​​;;RedHatEnterpriseLinux7/RHEL-136695
464;;;;;;;;;5;same steps as above;same result as above;;RedHatEnterpriseLinux7/RHEL-136695
465;RHEL-136698;Check the connection count for hostdev network - bug 1002824 (need update);Bug 1002824 - network driver loses track of connections count for networks that are destroyed with active connections;Yalan Zhang (yalzhang);High;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-136698
466;RHEL-137138;[rom] Start vm with OVMF and 2 interfaces set with rom bar=off (negative);these are some negative scenarios, they are not bugs confirmed by developers, just do not use it this way. this case is just to records these scenarios, low priority, just keep noted.;Yalan Zhang (yalzhang);Low;Negative;Not Automated;;1;"1. prepare OVMF + q35 guest, and 2 interfaces with <rom bar='off'>
 ...
  <os>
     <type arch='x86_64' machine='pc-q35-rhel7.5.0'>hvm</type>
     <loader readonly='yes' secure='yes' type='pflash'>/usr/share/OVMF/OVMF_CODE.secboot.fd</loader>
     <nvram>/var/lib/libvirt/qemu/nvram/rhelq35_VARS.fd</nvram>
   </os>
 ...
 
    <interface type='network'>
       <source network='default'/>
       <model type='virtio'/>
       <rom bar='off'/>
     </interface>
     <interface type='network'>
       <source network='default'/>
       <model type='virtio'/>
       <rom bar='off'/>
     </interface>
 
 # virsh start rhelq";"guest fail to start like
 
 # virsh start rhelq
 error: Failed to start domain rhelq
 error: internal error: qemu unexpectedly closed the monitor: 
 2018-07-05 06:03:02.413+0000: Domain id=16 is tainted: host-cpu
 2018-07-05T06:03:02.593936Z qemu-kvm: 
 -device virtio-net-pci,netdev=hostnet2,id=net2,mac=52:54:00:06:c2:08,
 bus=pci.7,addr=0x0,rombar=0: duplicate fw_cfg file name: genroms/pxe-virtio.rom

 refer to https://bugzilla.redhat.com/show_bug.cgi?id=1425058#c19 ";Test Case;RedHatEnterpriseLinux7/RHEL-137138
467;RHEL-137143;WALA-TC: [Storage] Upload OS disk and data disk together in Azure(LVM);;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"1. Install an image(10G) locally with 3 partitions(xfs):
 /boot: standard partition, 976M
 /: LVM, 6200M
 /home: LVM, 3000M
 Install WALA and other necessary packages.
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-137143
467;;;;;;;;;2;"2. Attach a new disk(1G) to the VM(/dev/sdb). Create PV, VG, LV. Write a file into it.
 1). Make new partition(/dev/sdb1) with /dev/sdb:
 # fdisk /dev/sdb
 2). VG extend:
 # vgextend rhel /dev/sdb1
 3). LV extend:
 # lvextend -l +100%FREE /dev/rhel/home
 4). Extend fs:
 # xfs_growfs /home
​​";​​;;RedHatEnterpriseLinux7/RHEL-137143
467;;;;;;;;;3;"3. Upload the image and the data disk to the same Azure account as Pageblob.
​​";​​;;RedHatEnterpriseLinux7/RHEL-137143
467;;;;;;;;;4;"4. Create VM with the data disk attached
​​";​​;;RedHatEnterpriseLinux7/RHEL-137143
467;;;;;;;;;5;"5. Login and check if the LVM partition in the data disk is still there. Check the file content.
​​";​​;;RedHatEnterpriseLinux7/RHEL-137143
468;RHEL-137155;Prepare: enabled iommu for virtio devices - bug 1283251;Virtio devices are special since by default they are bypassing DMA Remapping (not using it in kernel drivers). We need some special parameters to explicitly enable DMA Remapping for it. While for Interrrupt Remapping, it is not depending on the device type, so it is enabled/disabled just like other non-virtio devices.;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"1. prepare host support VT-d, add ""intel_iommu=on"" to kernel line
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-137155
468;;;;;;;;;2;"2. Prepare  a q35 guest  which OS is rhel7.4 or higher version(7.3 guest do not support refer to Bug 1464891 - Fail to work well with virtio iommu enabled on rhel7.3 guest)
 
 add the xml as below in the guest 
 .....
   <features>
    <ioapic driver='qemu'/>
  </features>
  ...
   <iommu model='intel'>
      <driver intremap='on' iotlb='on'/>
   </iommu>
 ...
 
 (if your guest has host passthrough devices, should also add caching_mode='on' 
 like: <driver intremap='on' iotlb='on' caching_mode='on'/>)";​​;;RedHatEnterpriseLinux7/RHEL-137155
468;;;;;;;;;3;"3. In guest, there are 2 scenarios, both need to be tested:
 (1) Add ""intel_iommu=on"" to kernel line of  q35  guest
 (2) Add ""iommu=pt intel_iommu=on"" to kernel line of  q35  guest
 
 refer to https://bugzilla.redhat.com/show_bug.cgi?id=1531367#c8,  
 1. If testing with vfio driver(see below scenarios), ""iommu=pt"" doesn't work, no matter you specify it or not in kernel line. So we don't need to set this option in the testing.
     (a) device assignment
     (b) running userspace device drivers (DPDK)
 2. If testing with kernel driver, with and without ""iommu=pt"" are 2 scenarios, and both are need to be covered in the testing.";​​;;RedHatEnterpriseLinux7/RHEL-137155
468;;;;;;;;;4;"4. for the virtio device you are testing, specify <driver iommu='on' ats='on'/> in the device xml
 if you are testing virtio controller, you also need to test the function of the devices which connected to that controller.
​​";enable iommu for device is safer, but may impact the performance. Confirm it do not break the function for the different devices: basic function, hotplug, migration, update-device, xml validate...;;RedHatEnterpriseLinux7/RHEL-137155
469;RHEL-137469;WALA-TC: [Storage] OS disk plus data disk in the same LVM;;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"1. Prepare a VM in Azure from LVM image
 Attach a data disk(100G)";​​;Test Case;RedHatEnterpriseLinux7/RHEL-137469
469;;;;;;;;;2;"2. Enlarge the home LV:
 1). Make new partition with the data disk:
 # fdisk /dev/sdc
 2). VG extend:
 # vgextend rhel /dev/sdc1
 3). LV extend:
 # lvextend -l +100%FREE /dev/rhel/home
 4). Extend fs:
 # xfs_growfs /home
​​";​​;;RedHatEnterpriseLinux7/RHEL-137469
469;;;;;;;;;3;"3. Verify read/write file
​​";​​;;RedHatEnterpriseLinux7/RHEL-137469
469;;;;;;;;;4;"4. Stop(deallocated) and start VM. Check if LVM works well
​​";​​;;RedHatEnterpriseLinux7/RHEL-137469
470;RHEL-137832;nwfilter-binding-dumpxml cmd - Bug 1600330;"Output the network filter binding XML for the network device called ""port-name""";Yalan Zhang (yalzhang);High;Positive;Automated;;1;"prepare a vm with interface with nwfitler as below:
 # virsh dumpxml rhel  | grep /interface -B10
     <interface type='network'>
       <mac address='52:54:00:11:6d:f0'/>
       <source network='default'/>
       <model type='rtl8139'/>
       <filterref filter='clean-traffic'>
         <parameter name='IP' value='10.0.0.1'/>
         <parameter name='IP' value='10.0.0.2'/>
         <parameter name='IP' value='10.0.0.3'/>
       </filterref>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
     <interface type='network'>
       <mac address='52:54:00:4b:af:69'/>
       <source network='default'/>
       <model type='rtl8139'/>
       <filterref filter='allow-dhcp-server'>
         <parameter name='DHCPSERVER' value='192.168.122.1'/>
         <parameter name='DHCPSERVER' value='192.168.122.2'/>
       </filterref>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
     </interface>
 
 # virsh start rhel
 Domain rhel started
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-137832
470;;;;;;;;;2;"1. # virsh nwfilter-binding-list
 
​​";"    Port Dev              Filter               
 ---------------------------------------------------
  vnet0                 clean-traffic       
  vnet1                 allow-dhcp-server
 
 (both nwfilter ref will list out and correct)";;RedHatEnterpriseLinux7/RHEL-137832
470;;;;;;;;;3;2. # virsh nwfilter-binding-dumpxml vnet0;"<filterbinding>
   <owner>
     <name>rhel</name>
     <uuid>c9543ff4-1703-40a9-abbf-7f3e0fcd66c0</uuid>
   </owner>
   <portdev name='vnet0'/>
   <mac address='52:54:00:11:6d:f0'/>
   <filterref filter='clean-traffic'>
     <parameter name='IP' value='10.0.0.1'/>
     <parameter name='IP' value='10.0.0.2'/>
     <parameter name='IP' value='10.0.0.3'/>
     <parameter name='MAC' value='52:54:00:11:6d:f0'/>
   </filterref>
 </filterbinding>
 
 (check the content is what we defined, and the mac address is right)";;RedHatEnterpriseLinux7/RHEL-137832
470;;;;;;;;;4;# virsh nwfilter-binding-dumpxml vnet1;"<filterbinding>
   <owner>
     <name>rhel</name>
     <uuid>c9543ff4-1703-40a9-abbf-7f3e0fcd66c0</uuid>
   </owner>
   <portdev name='vnet1'/>
   <mac address='52:54:00:4b:af:69'/>
   <filterref filter='allow-dhcp-server'>
     <parameter name='DHCPSERVER' value='192.168.122.1'/>
     <parameter name='DHCPSERVER' value='192.168.122.2'/>
     <parameter name='MAC' value='52:54:00:4b:af:69'/>
   </filterref>
 </filterbinding>
 
 (check the content is what we defined, and the mac address is right)
​​";;RedHatEnterpriseLinux7/RHEL-137832
470;;;;;;;;;5;"3. verify the dumped xml can pass the virt-xml-validate
 # virsh nwfilter-binding-dumpxml vnet0 > vnet0.xml
 # virsh nwfilter-binding-dumpxml vnet1 > vnet1.xml
 
 # virt-xml-validate vnet0.xml; virt-xml-validate vnet1.xml";"vnet0 validate;vnet1 validate 
 
 
 (the xml can validate successfully )
 
 history bug:
 Bug 1600330 - The dumped filterbinding can not pass the xml validate";;RedHatEnterpriseLinux7/RHEL-137832
470;;;;;;;;;6;"4. update the network filter and check the dumpxml
 edit 1 of the interface xml to with other nwiflter
 # cat net.xml
 <interface type='network'>
       <mac address='52:54:00:11:6d:f0'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <filterref filter='no-ip-spoofing'>
       </filterref>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel net.xml
 Device updated successfully
 
 # virsh dumpxml rhel | grep /interface -B12
   <interface type='network'>
       <mac address='52:54:00:11:6d:f0'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <filterref filter='no-ip-spoofing'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";" update successfully
 optional: check the ebtables rules are also updated accordingly";;RedHatEnterpriseLinux7/RHEL-137832
470;;;;;;;;;7;"5. # virsh nwfilter-binding-list
​​";" Port Dev              Filter               
 --------------------------------------------
  vnet0                 no-ip-spoofing      
  vnet1                 allow-dhcp-server   ";;RedHatEnterpriseLinux7/RHEL-137832
470;;;;;;;;;8;"6. # virsh nwfilter-binding-dumpxml vnet0
 
 
​​";"<filterbinding>
   <owner>
     <name>rhel</name>
     <uuid>c9543ff4-1703-40a9-abbf-7f3e0fcd66c0</uuid>
   </owner>
   <portdev name='vnet0'/>
   <mac address='52:54:00:11:6d:f0'/>
   <filterref filter='no-ip-spoofing'>
     <parameter name='MAC' value='52:54:00:11:6d:f0'/>
   </filterref>
 </filterbinding>
 
 (the binding's xml is updated)";;RedHatEnterpriseLinux7/RHEL-137832
471;RHEL-138052;nwfilter-binding-list cmd;nwfilter-binding-list: List all of the network ports which have filters associated with them.;Yalan Zhang (yalzhang);High;Positive;Automated;;1;"prepare a vm with interface with nwfitler as below:
 # virsh dumpxml rhel  | grep /interface -B10
     <interface type='network'>
       <mac address='52:54:00:11:6d:f0'/>
       <source network='default'/>
       <model type='rtl8139'/>
       <filterref filter='clean-traffic'>
         <parameter name='IP' value='10.0.0.1'/>
         <parameter name='IP' value='10.0.0.2'/>
         <parameter name='IP' value='10.0.0.3'/>
       </filterref>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
     <interface type='network'>
       <mac address='52:54:00:4b:af:69'/>
       <source network='default'/>
       <model type='rtl8139'/>
       <filterref filter='allow-dhcp-server'>
         <parameter name='DHCPSERVER' value='192.168.122.1'/>
         <parameter name='DHCPSERVER' value='192.168.122.2'/>
       </filterref>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
     </interface>
 
 # virsh start rhel
 Domain rhel started";​​;Test Case;RedHatEnterpriseLinux7/RHEL-138052
471;;;;;;;;;2;1. # virsh nwfilter-binding-list;" Port Dev              Filter               
 ----------------------------------------
  vnet0                 clean-traffic       
  vnet1                 allow-dhcp-server";;RedHatEnterpriseLinux7/RHEL-138052
471;;;;;;;;;3;"2. detach an interface and check nwfilter-binding-list
 # virsh detach-interface rhel network 52:54:00:11:6d:f0
 Interface detached successfully
 
 # virsh nwfilter-binding-list";" Port Dev              Filter               
 ------------------------------------------
  vnet1                 allow-dhcp-server   
 
 
 (vnet0 binding is deleted)
 
 # virsh nwfilter-binding-dumpxml vnet0
 error: failed to get nwfilter binding 'vnet0'
 error: Network filter binding not found: no nwfilter binding for port dev 'vnet0'";;RedHatEnterpriseLinux7/RHEL-138052
471;;;;;;;;;4;"3. update vnet1 to delete the nwfilter
 # cat  vnet1.xml
 <interface type='network'>
       <mac address='52:54:00:4b:af:69'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet1'/>
       <model type='rtl8139'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
     </interface>
 
 # virsh update-device rhel vnet1.xml
 Device updated successfully";​​;;RedHatEnterpriseLinux7/RHEL-138052
471;;;;;;;;;5;# virsh nwfilter-binding-list;" Port Dev              Filter               
 -----------------------------------------";;RedHatEnterpriseLinux7/RHEL-138052
471;;;;;;;;;6;"# virsh nwfilter-binding-dumpxml vnet0
 
​​";"error: failed to get nwfilter binding 'vnet0'
 error: Network filter binding not found: no nwfilter binding for port dev 'vnet0'";;RedHatEnterpriseLinux7/RHEL-138052
471;;;;;;;;;7;"4. attach interface with nwfilter
 # cat newnet.xml
 <interface type='network'>
 <source network='default'/>
  <filterref filter='clean-traffic'>
     <parameter name='CTRL_IP_LEARNING' value='dhcp'/>
   </filterref>
 </interface>
 
 # virsh attach-device rhel newnet.xml
 Device attached successfully
​​";​​;;RedHatEnterpriseLinux7/RHEL-138052
471;;;;;;;;;8;"5. check the binding list
 # virsh nwfilter-binding-list
 
​​";" Port Dev              Filter               
 ----------------------------------------
  vnet0                 clean-traffic     ";;RedHatEnterpriseLinux7/RHEL-138052
472;RHEL-138111;nwfilter-binding-delete cmd;nwfilter-binding-delete port-name: Disassociate a network port from a network filter. The network filter backend will immediately tear down the filter rules that exist on the port.;Yalan Zhang (yalzhang);High;Positive;Automated;;1;" prepare a vm with interface with nwfitler as below:
 # virsh dumpxml rhel  | grep /interface -B10
     <interface type='network'>
       <mac address='52:54:00:11:6d:f0'/>
       <source network='default'/>
       <model type='rtl8139'/>
       <filterref filter='clean-traffic'>
         <parameter name='IP' value='10.0.0.1'/>
         <parameter name='IP' value='10.0.0.2'/>
         <parameter name='IP' value='10.0.0.3'/>
       </filterref>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh start rhel";​​;Test Case;RedHatEnterpriseLinux7/RHEL-138111
472;;;;;;;;;2;"# virsh nwfilter-binding-list
  Port Dev              Filter               
 ---------------------------------------
  vnet0                 clean-traffic        
 
 check the ebtables rules for vnet0, there are rules for vnet0
 # ebtables -t nat -L";​​;;RedHatEnterpriseLinux7/RHEL-138111
472;;;;;;;;;3;"1. delete the nwfilter-binding,
 # virsh nwfilter-binding-delete vnet0
​​";Network filter binding on vnet0 deleted;;RedHatEnterpriseLinux7/RHEL-138111
472;;;;;;;;;4;"2. check the ebtables, it is null
 # ebtables -t nat -L 
 
 
​​";"Bridge table: nat
 Bridge chain: PREROUTING, entries: 0, policy: ACCEPT
 Bridge chain: OUTPUT, entries: 0, policy: ACCEPT
 Bridge chain: POSTROUTING, entries: 0, policy: ACCEPT";;RedHatEnterpriseLinux7/RHEL-138111
472;;;;;;;;;5;"3. restart libvirtd, the nwfilter-binding will restore
 # systemctl restart libvirtd
 # virsh nwfilter-binding-list
";" Port Dev              Filter               
 ---------------------------------------------
  vnet0                 clean-traffic       ";;RedHatEnterpriseLinux7/RHEL-138111
473;RHEL-138112;nwfilter-binding-create cmd;nwfilter-binding-create xmlfile: Associate a network port with a network filter. The network filter backend will immediately attempt to instantiate the filter rules on the port.;Yalan Zhang (yalzhang);High;Positive;Automated;;1;"1. start a vm with interface as below
 # virsh dumpxml rhel | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:fa:81:87'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;Test Case;RedHatEnterpriseLinux7/RHEL-138112
473;;;;;;;;;2;"2. prepare the binding xml
 # cat binding.xml
 <filterbinding>
   <owner>
     <name>rhel</name>
 <uuid>c9543ff4-1703-40a9-abbf-7f3e0fcd66c0</uuid>
   </owner>
   <portdev name='vnet0'/>
 <mac address='52:54:00:fa:81:87'/>
   <filterref filter='clean-traffic'>
 <parameter name='MAC' value='52:54:00:fa:81:87'/>
   </filterref>
 </filterbinding>
 
 (uuid is the domain uuid of rhel, mac address and mac parameter is the mac of vnet0)";​​;;RedHatEnterpriseLinux7/RHEL-138112
473;;;;;;;;;3;"2. create binding
 # virsh nwfilter-binding-create binding.xml
​​";Network filter binding on vnet0 created from binding.xml;;RedHatEnterpriseLinux7/RHEL-138112
473;;;;;;;;;4;"3. check ebtables rule is added
 # ebtables -t nat -L";"(several rules are created)
 ...
 Bridge chain: I-vnet0-ipv4-ip, entries: 3, policy: ACCEPT
 -p IPv4 --ip-src 0.0.0.0 --ip-proto udp -j RETURN 
 -p IPv4 --ip-src 10.73.131.161 -j RETURN 
 -j DROP 
 ...
 Bridge chain: I-vnet0-arp-ip, entries: 2, policy: ACCEPT
 -p ARP --arp-ip-src 10.73.131.161 -j RETURN 
 -j DROP 
 ...";;RedHatEnterpriseLinux7/RHEL-138112
473;;;;;;;;;5;"4.restart libvirtd and check the filter still there
 # systemctl restart libvirtd
 # virsh nwfilter-binding-list
  Port Dev              Filter               
 -----------------------------------------------
  vnet0                 clean-traffic       
 # virsh nwfilter-binding-dumpxml vnet0
 <filterbinding>
   <owner>
     <name>rhel</name>
     <uuid>c9543ff4-1703-40a9-abbf-7f3e0fcd66c0</uuid>
   </owner>
   <portdev name='vnet0'/>
   <mac address='52:54:00:fa:81:87'/>
   <filterref filter='clean-traffic'>
     <parameter name='MAC' value='52:54:00:fa:81:87'/>
   </filterref>
 </filterbinding>";​​;;RedHatEnterpriseLinux7/RHEL-138112
474;RHEL-138382;[domifstat] check interface statistics by domifstat for interface type do not managed by libvirt (not support) - bug 1595184;domifstat only works for nat/route/isolated/open, direct, bridge and vhostuser type interfaces. Do not support other interface types which do not have a backend and managed by libvirt, libvirt should report error when query such info and not crash. Bug 1595184 - Libvirtd crashed when domifstat for interface type: user, udp;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;" 1. Start the vm with multiple interfaces as below:
 # virsh domiflist rhel
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet0      network    default    virtio      52:54:00:49:92:db
 -          user       -          rtl8139     00:11:22:33:44:55
 -          udp        -          rtl8139     52:54:00:54:02:e5
 -          mcast      -          rtl8139     52:54:00:29:ae:b7
 -          server     -          rtl8139     52:54:00:22:c9:42
 -          client     -          rtl8139     52:54:00:8b:c9:51
 
 # pidof libvirtd
 76350
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-138382
474;;;;;;;;;2;"2. both will report error as below except for the network type:
 # virsh domifstat rhel 00:11:22:33:44:55
 
 
​​";"error: Failed to get interface stats rhel 00:11:22:33:44:55
 error: internal error: Interface name not provided";;RedHatEnterpriseLinux7/RHEL-138382
474;;;;;;;;;3;# virsh domifstat rhel 52:54:00:54:02:e5;"error: Failed to get interface stats rhel 52:54:00:54:02:e5
 error: internal error: Interface name not provided
 ...";;RedHatEnterpriseLinux7/RHEL-138382
474;;;;;;;;;4;"3. destroy the guest and configure the target name for them, then start vm, the error message will change, but libvirt not crash:
 
 # virsh domiflist rhel
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet0      network    default    virtio      52:54:00:49:92:db
 user_target user       -          rtl8139     00:11:22:33:44:55
 udp_target udp        -          rtl8139     52:54:00:54:02:e5
 mcast_target mcast      -          rtl8139     52:54:00:29:ae:b7
 server_target server     -          rtl8139     52:54:00:22:c9:42
 client_target client     -          rtl8139     52:54:00:8b:c9:51
​​";​​;;RedHatEnterpriseLinux7/RHEL-138382
474;;;;;;;;;5;# virsh domifstat rhel  mcast_target;"error: Failed to get interface stats rhel mcast_target
 error: internal error: /proc/net/dev: Interface not found";;RedHatEnterpriseLinux7/RHEL-138382
474;;;;;;;;;6;# virsh domifstat rhel  52:54:00:22:c9:42;"error: Failed to get interface stats rhel 52:54:00:22:c9:42
 error: internal error: /proc/net/dev: Interface not found";;RedHatEnterpriseLinux7/RHEL-138382
474;;;;;;;;;7;"# pidof libvirtd
 76350";check libvirtd do not crash the pid do not change;;RedHatEnterpriseLinux7/RHEL-138382
475;RHEL-138705;undefine a nwfilter when it is being used - bug 1607202;restart libvirtd should not crash the guest;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;" 1. Start a vm with an interface referred to nwfilter
        # virsh dumpxml rhel |grep /interface -B6
           <interface type='network'>
             <mac address='52:54:00:fa:81:87'/>
             <source network='default'/>
             <model type='rtl8139'/>
             <filterref filter='clean-traffic'/>
             <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
           </interface>
        # virsh start rhel
        Domain rhel started
        # virsh nwfilter-binding-list 
        Port Dev              Filter               
        ------------------------------------------------------------------
        vnet0                 clean-traffic     
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-138705
475;;;;;;;;;2;"2. Undefine the referred nwfilter is not allowed, this is expected.
        # virsh nwfilter-undefine clean-traffic";"error: Failed to undefine network filter clean-traffic
        error: Requested operation is not valid: nwfilter is in use";;RedHatEnterpriseLinux7/RHEL-138705
475;;;;;;;;;3;"3. delete the binding but keep the nwfilter in the interface xml, the referred nwfilter still can not be undefined.
        # virsh nwfilter-binding-delete vnet0
        Network filter binding on vnet0 deleted
​​";​​;;RedHatEnterpriseLinux7/RHEL-138705
475;;;;;;;;;4;"4. undefine the nwfilter
        # virsh nwfilter-undefine clean-traffic";Network filter clean-traffic undefined;;RedHatEnterpriseLinux7/RHEL-138705
475;;;;;;;;;5;"5. restart libvirtd, the guest should not shut down
 # systemctl restart libvirtd
 
 # virsh list 
 Id    Name                           State
 ----------------------------------------------------
 4     rhel7                          running
 
 # virsh nwfilter-binding-list
 Port Dev              Filter               
 ------------------------------------------------------------------
​​";the guest should not shutdown;;RedHatEnterpriseLinux7/RHEL-138705
475;;;;;;;;;6;"6. Check the log, it is expected.
 # grep error /var/log/libvirt/libvirtd.log
 2018-12-05 01:22:44.405+0000: 11503: error : virNWFilterObjListFindInstantiateFilter:201 : internal error: referenced filter 'clean-traffic' is missing
 2018-12-05 01:22:44.405+0000: 11503: warning : qemuProcessFiltersInstantiate:3182 : filter 'clean-traffic' instantiation for 'vnet0' failed 'internal error: referenced filter 'clean-traffic' is missing'
​​";the error makes sense;;RedHatEnterpriseLinux7/RHEL-138705
475;;;;;;;;;7;"7. # virsh destroy rhel7; virsh start rhel7
 Domain rhel7 destroyed
 error: Failed to start domain rhel7
 error: internal error: referenced filter 'clean-traffic' is missing";the gust can not start as the nwfilter is undefined;;RedHatEnterpriseLinux7/RHEL-138705
475;;;;;;;;;8;"8. remember to recover the env
 # virsh nwfilter-define /usr/share/libvirt/nwfilter/clean-traffic.xml
 Network filter clean-traffic defined from /usr/share/libvirt/nwfilter/clean-traffic.xml";​​;;RedHatEnterpriseLinux7/RHEL-138705
476;RHEL-138708;Create nwfilter-binding when filter already present (negative);create nwfilter-binding when there is already one filter present is not allowed;Yalan Zhang (yalzhang);High;Positive;Automated;;1;Senario 1: start vm with nwfilterred defined in xml;nwfilter-binding-create can not create nwfilter-binding for interface already have fitlers;Test Case;RedHatEnterpriseLinux7/RHEL-138708
476;;;;;;;;;2;"# virsh start rhel
 Domain rhel started
 
 # virsh dumpxml rhel | grep /interface -B8
     <interface type='network'>
       <mac address='52:54:00:11:6d:f0'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <filterref filter='clean-traffic'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";"check the etables rules it is correct, like
 # ebtables -t nat -L |grep 'Bridge chain: I-vnet0-arp-ip' -A3
 Bridge chain: I-vnet0-arp-ip, entries: 2, policy: ACCEPT
 -p ARP --arp-ip-src 192.168.122.243 -j RETURN 
 -j DROP 
​​";;RedHatEnterpriseLinux7/RHEL-138708
476;;;;;;;;;3;"1. create nwfilter-binding for vnet0
 # virsh nwfilter-binding-list
  Port Dev              Filter               
 ------------------------------------------------------------------
  vnet0                 clean-traffic       
 
 # virsh nwfilter-binding-dumpxml  vnet0 > vnet0_binding.xml

 edit the xml to with different nwfilter
 # cat vnet0_binding.xml
 <filterbinding>
   <owner>
     <name>rhel</name>
     <uuid>c9543ff4-1703-40a9-abbf-7f3e0fcd66c0</uuid>
   </owner>
   <portdev name='vnet0'/>
   <mac address='52:54:00:11:6d:f0'/>
 **  <filterref filter='no-arp-mac-spoofing'>  **
     <parameter name='MAC' value='52:54:00:11:6d:f0'/>
   </filterref>
 </filterbinding>:";​​;;RedHatEnterpriseLinux7/RHEL-138708
476;;;;;;;;;4;# virsh nwfilter-binding-create vnet0_binding.xml;"error: Failed to create network filter from vnet0_binding.xml
 error: internal error: Filter already present for NIC vnet0";;RedHatEnterpriseLinux7/RHEL-138708
476;;;;;;;;;5;Senario 2: start vm with nwfilterred do not defined in xml;"1. libvirt will preserve the nwfilter-binding created by nwfilter-binding-create after restart;
 2. the nwfilter-binding-create can not create nwfilter-binding the 2nd time for the same interface;";;RedHatEnterpriseLinux7/RHEL-138708
476;;;;;;;;;6;"# virsh start rhel
 Domain rhel started
 # virsh dumpxml rhel | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:11:6d:f0'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL-138708
476;;;;;;;;;7;"# virsh nwfilter-binding-list
  Port Dev              Filter               
 ------------------------------------------------------------------";no outputs;;RedHatEnterpriseLinux7/RHEL-138708
476;;;;;;;;;8;"1. create nwfilter-binding for vnet0
 # cat vnet0_binding.xml
 <filterbinding>
   <owner>
     <name>rhel</name>
     <uuid>c9543ff4-1703-40a9-abbf-7f3e0fcd66c0</uuid>
   </owner>
   <portdev name='vnet0'/>
   <mac address='52:54:00:11:6d:f0'/>
   <filterref filter='no-arp-mac-spoofing'>
     <parameter name='MAC' value='52:54:00:11:6d:f0'/>
   </filterref>
 </filterbinding>
​​";​​;;RedHatEnterpriseLinux7/RHEL-138708
476;;;;;;;;;9;# virsh nwfilter-binding-create vnet0_binding.xml;Network filter binding on vnet0 created from vnet0_binding.xml;;RedHatEnterpriseLinux7/RHEL-138708
476;;;;;;;;;10;"# virsh nwfilter-binding-list 
 
​​";" Port Dev              Filter               
 ------------------------------------------------------------------
  vnet0                 no-arp-mac-spoofing ";;RedHatEnterpriseLinux7/RHEL-138708
476;;;;;;;;;11;"2. check the interface xml no changes and guest is running
 # virsh list
  Id    Name                           State
 ----------------------------------------------------
  15    rhel                           running
 
 # virsh dumpxml rhel | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:11:6d:f0'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";guest interface no change and the vm is running;;RedHatEnterpriseLinux7/RHEL-138708
476;;;;;;;;;12;"3. check the ebtables rules
 # ebtables -t nat -L | grep -A3 'Bridge chain: I-vnet0-arp-mac'";"Bridge chain: I-vnet0-arp-mac, entries: 2, policy: ACCEPT
 -p ARP --arp-mac-src 52:54:0:11:6d:f0 -j RETURN 
 -j DROP ";;RedHatEnterpriseLinux7/RHEL-138708
476;;;;;;;;;13;"4. restart libvirtd, check the binding and ebtables rules still there
 # virsh nwfilter-binding-list
  Port Dev              Filter               
 ------------------------------------------------------------------
  vnet0                 no-arp-mac-spoofing 
 
 
 # ebtables -t nat -L | grep -A3 'Bridge chain: I-vnet0-arp-mac'
 Bridge chain: I-vnet0-arp-mac, entries: 2, policy: ACCEPT
 -p ARP --arp-mac-src 52:54:0:11:6d:f0 -j RETURN 
 -j DROP ";​​;;RedHatEnterpriseLinux7/RHEL-138708
476;;;;;;;;;14;"5. create nwfilter-binding for the same interface again
 # cp vnet0_binding.xml  vnet0_binding_dup.xml

 edit the filter to 'no-ip-spoofing'
 # cat vnet0_binding_dup.xml
 <filterbinding>
   <owner>
     <name>rhel</name>
     <uuid>c9543ff4-1703-40a9-abbf-7f3e0fcd66c0</uuid>
   </owner>
   <portdev name='vnet0'/>
   <mac address='52:54:00:11:6d:f0'/>
   <filterref filter='no-ip-spoofing'>
     <parameter name='MAC' value='52:54:00:11:6d:f0'/>
   </filterref>
 </filterbinding>
";​​;;RedHatEnterpriseLinux7/RHEL-138708
476;;;;;;;;;15;# virsh nwfilter-binding-create vnet0_binding_dup.xml;"error: Failed to create network filter from vnet0_binding_dup.xml
 error: internal error: Filter already present for NIC vnet0";;RedHatEnterpriseLinux7/RHEL-138708
477;RHEL-138710;Change the filterref by update-device and nwfilter-binding-create/delete alternately;"update-device can change the fitlerref config; and delete-create nwfilter-binding can also change the nwfilter-binding config. Restart libvirtd will initialize the nwfilter defined in xml only when there is no nwfilter-binding currently.";Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"start vm without nwfilter defined:
 # virsh start rhel
 Domain rhel started
 
 # virsh dumpxml rhel | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:11:6d:f0'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;Test Case;RedHatEnterpriseLinux7/RHEL-138710
477;;;;;;;;;2;"1.  create nwfilter-binding for vnet0
 # cat vnet0_binding.xml
 <filterbinding>
   <owner>
     <name>rhel</name>
     <uuid>c9543ff4-1703-40a9-abbf-7f3e0fcd66c0</uuid>
   </owner>
   <portdev name='vnet0'/>
   <mac address='52:54:00:11:6d:f0'/>
   <filterref filter='clean-traffic'>
     <parameter name='MAC' value='52:54:00:11:6d:f0'/>
   </filterref>
 </filterbinding>
 
 # virsh nwfilter-binding-create vnet0_binding.xml
 Network filter binding on vnet0 created from vnet0_binding.xml";​​;;RedHatEnterpriseLinux7/RHEL-138710
477;;;;;;;;;3;# virsh nwfilter-binding-list;" Port Dev              Filter               
 ------------------------------------------------------------------
  vnet0                 clean-traffic       ";;RedHatEnterpriseLinux7/RHEL-138710
477;;;;;;;;;4;"# systemctl restart libvirtd
 # virsh nwfilter-binding-list";" Port Dev              Filter               
 ------------------------------------------------------------------
  vnet0                 clean-traffic       
 
 (restart libvirtd while the nwfilter-binding is defined by nwfilter-binding-create, and no nwfiltre defined in interface xml)";;RedHatEnterpriseLinux7/RHEL-138710
477;;;;;;;;;5;"2.  update-device to change the nwfilter-binding in interface xml
 
 # cat net.xml
     <interface type='network'>
       <mac address='52:54:00:11:6d:f0'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
 <filterref filter='allow-incoming-ipv4'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel net.xml
 Device updated successfully
​​";​​;;RedHatEnterpriseLinux7/RHEL-138710
477;;;;;;;;;6;# virsh nwfilter-binding-list;"Port Dev              Filter               
 ------------------------------------------------------------------
  vnet0                 allow-incoming-ipv4 
 
 (the binding created by nwfilter-binding-create will be flushed and new nwfilter-binding defined by the update-device cmd)";;RedHatEnterpriseLinux7/RHEL-138710
477;;;;;;;;;7;"# systemctl restart libvirtd
 # virsh nwfilter-binding-list
";" Port Dev              Filter               
 ------------------------------------------------------------------
  vnet0                 allow-incoming-ipv4 
 
 (restart libvirtd while the nwfilter-binding is updated by update-device, the nwfitler config in interface xml)";;RedHatEnterpriseLinux7/RHEL-138710
477;;;;;;;;;8;"3. use the nwfilter-binding-delete to delete the nwfilter-binding create by filterref in interface xml
 
 # virsh nwfilter-binding-delete vnet0
 Network filter binding on vnet0 deleted
 
 # virsh nwfilter-binding-list
  Port Dev              Filter               
 -----------------------------------------------------------------
 ====> no outputs
 
 # virsh dumpxml rhel |grep /interface -B8
     <interface type='network'>
       <mac address='52:54:00:11:6d:f0'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <filterref filter='allow-incoming-ipv4'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";delete the nwfilter-binding successsfully, and the filter config is still in interface xml;;RedHatEnterpriseLinux7/RHEL-138710
477;;;;;;;;;9;"4. create new nwfitler-binding with differet config
 
 # cat vnet0_binding_new.xml
 <filterbinding>
   <owner>
     <name>rhel</name>
     <uuid>c9543ff4-1703-40a9-abbf-7f3e0fcd66c0</uuid>
   </owner>
   <portdev name='vnet0'/>
   <mac address='52:54:00:11:6d:f0'/>
   <filterref filter='no-mac-broadcast'>
     <parameter name='MAC' value='52:54:00:11:6d:f0'/>
   </filterref>
 </filterbinding>
 # virsh nwfilter-binding-create vnet0_binding_new.xml
 Network filter binding on vnet0 created from vnet0_binding_new.xml
 
 # virsh nwfilter-binding-list 
  Port Dev              Filter               
 ------------------------------------------------------------------
  vnet0                 no-mac-broadcast      
​​";​​;;RedHatEnterpriseLinux7/RHEL-138710
477;;;;;;;;;10;"now the current nwfilter-binding is different with config in interface xml, restart libvirtd
 # systemctl restart libvirtd

 # virsh nwfilter-binding-list 
  Port Dev              Filter               
 ------------------------------------------------------------------
  vnet0                 no-mac-broadcast";the nwfilter-binding do not change;;RedHatEnterpriseLinux7/RHEL-138710
477;;;;;;;;;11;"5. delete current nwfilter-binding, then restart libvirtd, the nwfilterref config in xml will be initialized
 
 # virsh nwfilter-binding-delete vnet0
 Network filter binding on vnet0 deleted
​​";"
 # virsh nwfilter-binding-list
  Port Dev              Filter               
 ------------------------------------------------
 (delete successfully)";;RedHatEnterpriseLinux7/RHEL-138710
477;;;;;;;;;12;"# systemctl restart libvirtd
 
 
  
​​";"# virsh nwfilter-binding-list
 Port Dev              Filter               
 ------------------------------------------------------------------
  vnet0                 allow-incoming-ipv4 

 (when there is no nwfilter-binding currently, restart libvirtd will initialize the config in interface xml)";;RedHatEnterpriseLinux7/RHEL-138710
478;RHEL-138716;migrate vm with nwfilter-binding defined or nwfilter defined in interface xml;test migration with nwfilter defined in interface;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1; prepare migration env;​​;Test Case;RedHatEnterpriseLinux7/RHEL-138716
478;;;;;;;;;2;Scenario 1: migrate with nwfilter defined:;​​;;RedHatEnterpriseLinux7/RHEL-138716
478;;;;;;;;;3;"1. undefine the nwfilter in traget host, then do migration with such nwfilterref
  on target host:
 # virsh nwfilter-undefine clean-traffic
 Network filter clean-traffic undefined
 
 # virsh dumpxml rhel | grep /interface -B8
     <interface type='network'>
       <mac address='52:54:00:11:6d:f0'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <filterref filter='clean-traffic'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh migrate rhel qemu+ssh://10.73.8.21/system  --verbose
 root@10.73.8.21's password: 
 error: internal error: referenced filter 'clean-traffic' is missing
​​";"it report error:
 error: internal error: referenced filter 'clean-traffic' is missing";;RedHatEnterpriseLinux7/RHEL-138716
478;;;;;;;;;4;"2.   recover the nwfilter on target host:
 # virsh nwfilter-define /usr/share/libvirt/nwfilter/clean-traffic.xml
 Network filter clean-traffic defined from /usr/share/libvirt/nwfilter/clean-traffic.xml
​​";migration succeed;;RedHatEnterpriseLinux7/RHEL-138716
478;;;;;;;;;5;"3. check the nwfilter-binding on source host
 # virsh nwfilter-binding-list
  Port Dev              Filter               
 -----------------------------------------------
  vnet0                 clean-traffic     ";​​;;RedHatEnterpriseLinux7/RHEL-138716
478;;;;;;;;;6;"4. on target host, start some vms and make sure the target name vnet0 is occupied.
 
 then do migration again on source host:
 # virsh migrate rhel qemu+ssh://10.73.8.21/system  --verbose
 root@10.73.8.21's password: 
 Migration: [100 %]";​​;;RedHatEnterpriseLinux7/RHEL-138716
478;;;;;;;;;7;"5. check on source host, the nwfilter-binding is gone as vnet0 is gone
 # virsh nwfilter-binding-list
  Port Dev              Filter               
 ---------------------------------------------";​​;;RedHatEnterpriseLinux7/RHEL-138716
478;;;;;;;;;8;"6. check on target host, the nwfilter-binding is created with new target name
 # virsh domiflist rhel
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet2      network    default    rtl8139     52:54:00:11:6d:f0
 
 # virsh nwfilter-binding-list
  Port Dev              Filter               
 -----------------------------------------------------------
  vnet2                 clean-traffic      ";​​;;RedHatEnterpriseLinux7/RHEL-138716
478;;;;;;;;;9;Scenario 2: migrate with nwfilter-binding defined;​​;;RedHatEnterpriseLinux7/RHEL-138716
478;;;;;;;;;10;1. start vm without nwfilterref defined in xml;​​;;RedHatEnterpriseLinux7/RHEL-138716
478;;;;;;;;;11;"2. # cat binding.xml
 <filterbinding>
   <owner>
     <name>rhel</name>
     <uuid>c9543ff4-1703-40a9-abbf-7f3e0fcd66c0</uuid>
   </owner>
   <portdev name='vnet0'/>
   <mac address='52:54:00:11:6d:f0'/>
   <filterref filter='clean-traffic'>
     <parameter name='MAC' value='52:54:00:11:6d:f0'/>
   </filterref>
 </filterbinding>
 
 # virsh nwfilter-binding-create binding.xml
 Network filter binding on vnet0 created from binding.xml
 
 # virsh nwfilter-binding-list 
  Port Dev              Filter               
 ------------------------------------------------------------------
  vnet0                 clean-traffic
​​";​​;;RedHatEnterpriseLinux7/RHEL-138716
478;;;;;;;;;12;"3. do migration
 # virsh migrate rhel qemu+ssh://10.73.8.21/system  --verbose
 root@10.73.8.21's password: 
 Migration: [100 %]";​​;;RedHatEnterpriseLinux7/RHEL-138716
478;;;;;;;;;13;4. check nwfilter-binding is not migrated to target host;​​;;RedHatEnterpriseLinux7/RHEL-138716
479;RHEL-138732;[Migration] Kill qemu process on souce host during Finish Phase of live migration;Bug 1589730 - libvirtd crashed sometimes if the guest crash on the source host at the end of migration ;Fangge Jin (fjin);High;Negative;Not Automated;;1;Check pid of libvirtd on both source and dst hosts;​​;Test Case;RedHatEnterpriseLinux7/RHEL-138732
479;;;;;;;;;2; Start a guest on source host;​​;;RedHatEnterpriseLinux7/RHEL-138732
479;;;;;;;;;3;"Attach gdb to libvirtd on the destination host and set breakpoint to qemuMigrationDstFinish:
 
* # gdb -p `pidof libvirtd`
* (gdb) b qemuMigrationDstFinish
* (gdb) c
";​​;;RedHatEnterpriseLinux7/RHEL-138732
479;;;;;;;;;4;Migrate vm to dst host;​​;;RedHatEnterpriseLinux7/RHEL-138732
479;;;;;;;;;5;Wait until gdb hits breakpoint;​​;;RedHatEnterpriseLinux7/RHEL-138732
479;;;;;;;;;6;Kill source qemu-kvm process;​​;;RedHatEnterpriseLinux7/RHEL-138732
479;;;;;;;;;7;"Run ""c"" in gdb
 
* (gdb) c
";​​;;RedHatEnterpriseLinux7/RHEL-138732
479;;;;;;;;;8;Check migration status;"Migration succeeds:
 
* Migration: [100 %]
";;RedHatEnterpriseLinux7/RHEL-138732
479;;;;;;;;;9;"Check guest status on source host:
 
* # virsh list
";Guest is not running or paused on source host.;;RedHatEnterpriseLinux7/RHEL-138732
479;;;;;;;;;10;"Check domain status on target host:
 
* # virsh list
 Id    Name                           State
 ----------------------------------------------------
  1     V                              running

 
* ping {guest_ip}
* Do some disk I/O operations in guest
";Guest is running on target host and can respond;;RedHatEnterpriseLinux7/RHEL-138732
479;;;;;;;;;11;"Check the ownership of the guest disk image:
 
* # ll /nfs-images/yafu/rhel7*
";"The ownership doesn't change.
 
 Output:
 -rwxrwxrwx. 1 qemu qemu 12887130112 Mar  2  2017 /nfs-images/yafu/rhel7.2.qcow2";;RedHatEnterpriseLinux7/RHEL-138732
480;RHEL-138822;[Hyper-V][Memory]Save/Restore guest after run time memory resize;Save/Restore guest after run time memory resize;Yaju Cao (yacao);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-138822
481;RHEL-138998;Interrupt vectors to CPU mapping - windows only;Bug 1580096 - NetKVM: Interrupt vectors to CPU mapping fix ;Yu Wang (wyu);Medium;Positive;Not Automated;;1;"1start guest w/ virtio-net-pci
 For tun/tap backend:
  -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet0,vhost=on,queues=2 \
 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=00:52:3b:35:88:08,mq=on,vectors=6

 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on,queues=2 \ 
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap,mq=on,vectors=6 \ "; 1. guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL-138998
481;;;;;;;;;2;"2  using trace view to collected log
 method refer to :
 https://mojo.redhat.com/docs/DOC-1166671 ";2 no error;;RedHatEnterpriseLinux7/RHEL-138998
481;;;;;;;;;3;"3 disable and enable network device
";3 no error;;RedHatEnterpriseLinux7/RHEL-138998
481;;;;;;;;;4;"4 check WPP traceview log
";"4 
 00000071 netkvm.sys 4 384 2 71 08\16\2018-15:50:54:886 SetupInterrruptAffinity[SetupInterrruptAffinity]: Assigning CmResourceTypeInterrupt, min/max = fffffffe/fffffffe Option = 0x0, ShareDisposition = 1 to #CPU = 0
 00000072 netkvm.sys 4 384 2 72 08\16\2018-15:50:54:886 SetupInterrruptAffinity[SetupInterrruptAffinity]: Assigning CmResourceTypeInterrupt, min/max = fffffffe/fffffffe Option = 0x0, ShareDisposition = 1 to #CPU = 0
 00000073 netkvm.sys 4 384 2 73 08\16\2018-15:50:54:886 SetupInterrruptAffinity[SetupInterrruptAffinity]: Assigning CmResourceTypeInterrupt, min/max = fffffffe/fffffffe Option = 0x0, ShareDisposition = 1 to #CPU = 1
 00000074 netkvm.sys 4 384 2 74 08\16\2018-15:50:54:886 SetupInterrruptAffinity[SetupInterrruptAffinity]: Assigning CmResourceTypeInterrupt, min/max = fffffffe/fffffffe Option = 0x0, ShareDisposition = 1 to #CPU = 1
 00000075 netkvm.sys 4 384 2 75 08\16\2018-15:50:54:886 SetupInterrruptAffinity[SetupInterrruptAffinity]: Assigning CmResourceTypeInterrupt, min/max = fffffffe/fffffffe Option = 0x0, ShareDisposition = 1 to #CPU = 0
 00000080 netkvm.sys 4 384 2 80 08\16\2018-15:50:54:886 SetupInterrruptAffinity[SetupInterrruptAffinity]: Assigning CmResourceTypeInterrupt, min/max = fffffffe/fffffffe Option = 0x0, ShareDisposition = 1 to #CPU = 0
 00000081 netkvm.sys 4 384 2 81 08\16\2018-15:50:54:886

";;RedHatEnterpriseLinux7/RHEL-138998
482;RHEL-139068;clean-traffic-gateway  - bug 1603115;The filter purpose is to simulate isolated private VLAN. The behavior can be achieved by limiting network traffic to traffic between VM and gateway. Because there is no concept of the PVLAN in the linux bridge. The filter also contains parts from clean-traffic to prevent VM from spoofing its IP and MAC address. To use this filter the user just needs to set the GATEWAY_MAC variable to gateway MAC address.;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;" 1) list
 # virsh nwfilter-list
 UUID                                  Name                 
 ------------------------------------------------------------------
 ...
 22746188-0acf-4389-910e-7588f12b5c0a  clean-traffic-gateway
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-139068
482;;;;;;;;;2;"2) dump 
 # virsh nwfilter-dumpxml clean-traffic-gateway
​​";"<filter name='clean-traffic-gateway' chain='root'>
  <uuid>22746188-0acf-4389-910e-7588f12b5c0a</uuid>
  <filterref filter='no-mac-spoofing'/>
  <filterref filter='no-ip-spoofing'/>
  <filterref filter='no-arp-spoofing'/>
  <rule action='accept' direction='inout' priority='-500'>
    <mac protocolid='arp'/>
  </rule>
  <rule action='accept' direction='in' priority='500'>
    <mac srcmacaddr='$GATEWAY_MAC'/>
  </rule>
  <rule action='accept' direction='out' priority='500'>
    <mac dstmacaddr='$GATEWAY_MAC'/>
  </rule>
  <filterref filter='no-other-l2-traffic'/>
  <filterref filter='qemu-announce-self'/>
 </filter>";;RedHatEnterpriseLinux7/RHEL-139068
482;;;;;;;;;3;"3) validate xml
 # virsh nwfilter-dumpxml clean-traffic-gateway > clean-traffic-gateway.xml
 # virt-xml-validate clean-traffic-gateway.xml
​​";clean-traffic-gateway.xml validates;;RedHatEnterpriseLinux7/RHEL-139068
482;;;;;;;;;4;"test function
 1) Start 2 vm connected to virbr0 with nwfilter as below:
 # virsh dumpxml rh | grep /interface -B11
    <interface type='network'>
      <mac address='52:54:00:af:18:5c'/>
      <source network='default' bridge='virbr0'/>
      <target dev='vnet2'/>
      <model type='rtl8139'/>
      <filterref filter='clean-traffic-gateway'>
        <parameter name='GATEWAY_MAC' value='ff:ff:ff:ff:ff:ff'/>
        <parameter name='GATEWAY_MAC' value='52:54:00:15:a5:40'/>
      </filterref>
      <alias name='net0'/>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
    </interface>";​​;;RedHatEnterpriseLinux7/RHEL-139068
482;;;;;;;;;5;"2) check the connectivity
 the vm can get ip address by dhcp
 the vm connected to the same bridge can access to the outside, but can not connect to each other";​​;;RedHatEnterpriseLinux7/RHEL-139068
483;RHEL-143984;demo test case for share file between guest and host (rhel 8)- 1;just a demo;Yalan Zhang (yalzhang);Low;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-143984
484;RHEL-143985;demo test case for share file between guest and host (rhel 8) - 2;"just a demo
";Yalan Zhang (yalzhang);Low;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-143985
485;RHEL-144017;avoid errors when parse the non-PCI network devices (qeth, Xen vif, etc) or virtio model interface on guest - bug 1585537;check on guest with libvirt installed, when start libvirtd, there should be no error.;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;1. prepare a guest with virtio interface and install libvirt on guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL-144017
485;;;;;;;;;2;"2. set log related setting in libivrtd.conf:
 log_outputs='1:file:/var/log/libvirt/libvirtd.log'
 log_level=1";​​;;RedHatEnterpriseLinux7/RHEL-144017
485;;;;;;;;;3;"3. restart libvirtd and check the log
 # rm -fr /var/log/libvirt/libvirtd.log
 # systemctl restart libvirtd
 # cat /var/log/libvirt/libvirtd.log | grep error";"there should be no error like
 
 ""2018-08-09 09:32:53.999+0000: 1988: error : logStrToLong_ui:2564 : Failed to convert 'virtio0' to unsigned int
 2018-08-09 09:32:53.999+0000: 1988: error : virPCIGetDeviceAddressFromSysfsLink:2643 : internal error: Failed to parse PCI config address 'virtio0'
 ""
 after the bug fix, there are only debug level log like this:
 ""2018-08-09 11:04:42.182+0000: 3197: debug : udevGetDeviceType:1226 : Could not determine device type for device with sysfs name 'virtio0'
 2018-08-09 11:04:42.182+0000: 3197: debug : udevAddOneDevice:1416 : Discarding device -1 0x7fb0d4063f40 /sys/devices/pci0000:00/0000:00:03.0/virtio0
 2018-08-09 11:04:42.182+0000: 3197: debug : udevProcessDeviceListEntry:1439 : Failed to create node device for udev device '/sys/devices/pci0000:00/0000:00:03.0/virtio0'
 2018-08-09 11:04:42.182+0000: 3197: debug : udevGetDeviceProperty:145 : Found property key 'DRIVER' value '<null>' for device with sysname 'eth0'""";;RedHatEnterpriseLinux7/RHEL-144017
485;;;;;;;;;4;"4. check the nodedev-dumpxml of the net device
 # virsh nodedev-list --cap net
 net_eth0_52_54_00_87_c5_66
 ...
 # virsh nodedev-dumpxml net_eth0_52_54_00_87_c5_66
 <device>
  <name>net_eth0_52_54_00_87_c5_66</name>
  <path>/sys/devices/pci0000:00/0000:00:03.0/virtio0/net/eth0</path>
  <parent>pci_0000_00_03_0</parent>
  <capability type='net'>
    <interface>eth0</interface>
    <address>52:54:00:87:c5:66</address>
    <link state='up'/>
    <feature name='rx'/>
    <feature name='tx'/>
    <feature name='sg'/>
    <feature name='tso'/>
    <feature name='gso'/>
    <feature name='gro'/>
    <capability type='80203'/>
  </capability>
 </device>";​​;;RedHatEnterpriseLinux7/RHEL-144017
486;RHEL-144056;[Migration] Seamless spice migration - postcopy migration;TODO: Need to complete the steps;Fangge Jin (fjin);;Positive;Manual Only;;1;" 1.virt-viewer V7.6-GUI
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-144056
486;;;;;;;;;2;"2. Do some operations in guest os while migration:
 # virsh migrate V7.6-GUI  --live qemu+ssh://$target_ip/system  --verbose  --p2p --unsafe --postcopy --postcopy-after-precopy
 
 
​​";"guest os works well: click, drag, double-click, etc
 
 migration succeed:
 Migration: [100 %]
​​";;RedHatEnterpriseLinux7/RHEL-144056
486;;;;;;;;;3;"3. check virt-viewer after migration
​​";"connection kept.
 and guest os works well
​​";;RedHatEnterpriseLinux7/RHEL-144056
486;;;;;;;;;4;"4. migration back and check os 
​​";"same as step2.
​​";;RedHatEnterpriseLinux7/RHEL-144056
487;RHEL-144057;[Migration] Seamless spice migration - tunnelled migration;TODO: Need to complete the steps;Fangge Jin (fjin);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-144057
488;RHEL-144058;[Migration] Seamless spice migration - multiple displays;"For windows guest: with multiple vidoes, each video has one head
For linux guest: with one video, and multiple heads
Open all the displays of guest, then do live migration.
 TODO: Need to complete the steps

 Bug 1615716 - The number of Displays becomes more after migration";Fangge Jin (fjin);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-144058
489;RHEL-144098;[Migration][--copy-storage-all] Copy the whole image chain for storage migration - one disk - local storage - without <shareable/> - with backing chain - file type;;Fangge Jin (fjin);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-144098
490;RHEL-144099;[Migration][--copy-storage-all] Copy the whole image chain for storage migration - one disk - local storage - without <shareable/> - with backing chain - file type - luks;;Fangge Jin (fjin);High;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-144099
491;RHEL-144331;check virsh capabilites output includes iommu support element;"virsh capabilities will expose if the host support iommu (if do not enable vt-d in bios setup, whether we set the ""intel_iommu=on"" in the kernel cmd line, the iommu support will be ""no"")";Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;enable vt-d in bios setup on the host;​​;Test Case;RedHatEnterpriseLinux7/RHEL-144331
491;;;;;;;;;2;"prepare a host without enable iommu in kernel cmd line, check on host
 # cat /proc/cmdline | grep iommu";no output;;RedHatEnterpriseLinux7/RHEL-144331
491;;;;;;;;;3;# virsh capabilities | grep iommu;  <iommu support='no'/>;;RedHatEnterpriseLinux7/RHEL-144331
491;;;;;;;;;4;"enable intel_iommu=on in kernel cmd line, then reboot the host, edit below file to append ""intel_iommu=on"", make the file, then reboot 
 # vi /etc/default/grub
 # grub2-mkconfig -o /boot/grub2/grub.cfg
 # reboot";​​;;RedHatEnterpriseLinux7/RHEL-144331
491;;;;;;;;;5;"check kernel cmd line, the ""intel_iommu=on"" is added
 # cat /proc/cmdline 
 BOOT_IMAGE=/vmlinuz-3.10.0-932.el7.x86_64 root=/dev/mapper/rhel-root ro crashkernel=auto rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb quiet intel_iommu=on LANG=en_US.UTF-8
​​";there is intel_iommu=on;;RedHatEnterpriseLinux7/RHEL-144331
491;;;;;;;;;6;"# virsh capabilities | grep iommu
​​";"  <iommu support='yes'/>
​​";;RedHatEnterpriseLinux7/RHEL-144331
492;RHEL-144393;IDM-SSSD-TC: ad_provider: ad_forest: kdcinfo files are not created for subdomains of a directly joined AD client;"Bug: https://bugzilla.redhat.com/show_bug.cgi?id=1494690 
AD is world-wide and connectivity between sites is restricted, so it's mandatory to define a proper site configuration/discovery. There are no static ""known good KDC"", as KDC servers are dynamically added, removed or migrated. 

We can set an option ""ad_site"" in sssd.conf but this is not getting applied to the sub-domains. Found that with users in the same forest but different domains, groups and user information is properly retrieved from the right ldap servers, but not able to validate passwords because kerberos discovery points to world-wide spreaded servers which are restricted to connect. 

So need this option to be applied for sub-domains also.



";Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-144393
493;RHEL-145067;[Migration][--copy-storage-all] Copy the whole image chain for storage migration - multiple disks - local storage without <shareable/> + remote shared storage without <shareable/>;Storage migration will fail because shared storage without <shareable/> flag can't be opened read-write on both source and target hosts at same time.;Fangge Jin (fjin);Medium;Negative;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-145067
494;RHEL-145122;[Migration] Destroy guest on source host during Perform Phase of live migration;Bug 1593137 - libvirtd crashed if destroy the guest on the source host in perform phase of live migration ;Fangge Jin (fjin);High;Negative;Not Automated;;1;Check pid of libvirtd process;​​;Test Case;RedHatEnterpriseLinux7/RHEL-145122
494;;;;;;;;;2; Start a guest on source host; ;;RedHatEnterpriseLinux7/RHEL-145122
494;;;;;;;;;3;"Migrate guest to target host(note: we can set a low migrate speed so we can have enough time for next step):
* # virsh migrate-setspeed rhel7 10; virsh migrate rhel7 qemu+ssh://10.66.5.190/system --live --verbose --p2p
";​​;;RedHatEnterpriseLinux7/RHEL-145122
494;;;;;;;;;4;"During perform phase of live migration(see the progress percentage of migration), destroy guest on source host(not kill qemu-kvm process):
 
* # virsh destroy rhel7
";​​;;RedHatEnterpriseLinux7/RHEL-145122
494;;;;;;;;;5;Check migration status of step2;"Output:
 Migration: [ 80 %]error：operation failed: domain is not running
​​";;RedHatEnterpriseLinux7/RHEL-145122
494;;;;;;;;;6;Check pid of libvirtd process;pid doesn't change, which means libvirtd didn't crash;;RedHatEnterpriseLinux7/RHEL-145122
494;;;;;;;;;7;Repeat above steps for 5 times;​​;;RedHatEnterpriseLinux7/RHEL-145122
495;RHEL-145236;[vnc] Start a qemu guest with vnc static port WebSocket;"Verify guest can start with static vn websocket and auto allocated vnc port.
 Bug 1326516 - qemu: static vnc websocket port can collide with auto allocated port number, breaks VM startup";Yan Fu (yafu);Medium;Positive;Not Automated;;1;" 1.Define a guest with static vnc websocket and auto allocated vnc port:
 #virsh edit rhel7.6
 <graphics type='vnc' port='-1' autoport='yes' websocket='5900'/>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-145236
495;;;;;;;;;2;"2.Start the guest:
 #virsh start rhel7.6
​​";"2.Domain rhel7.6 started successfully
​​";;RedHatEnterpriseLinux7/RHEL-145236
495;;;;;;;;;3;"3.Check the live xml:
 #virsh dumpxml rhel7.6 | grep -A5 graphics
   
​​";"3.
 <graphics type='vnc' port='5901' autoport='yes' websocket='5900' listen='0.0.0.0'>
       <listen type='address' address='0.0.0.0'/>
    </graphics>";;RedHatEnterpriseLinux7/RHEL-145236
496;RHEL-145273;Start a guest with static cid vsock device;Start a guest with static cid vsock device;Yan Fu (yafu);High;Positive;Automated;;1;" 1.Add vsock model on host os:
 #modprobe vhost_vsock";​​;Test Case;RedHatEnterpriseLinux7/RHEL-145273
496;;;;;;;;;2;"2.Start a guest with static cid vsock device:
 #virsh edit rhel7.6
 <vsock model='virtio'>
       <cid auto='no' address='3'/>
       <alias name='ua-04c3388d-4e33-4023-84de-a2205c777asdfdsf'/>
     </vsock>
 
 #virsh start rhel7.6
​​";2.Domain rhel7.6 started;;RedHatEnterpriseLinux7/RHEL-145273
496;;;;;;;;;3;"3.Check vsock device in live xml:
 #virsh dumpxml rhel7.6 | grep -A5 vsock
 
​​";"3.
 <vsock model='virtio'>
       <cid auto='no' address='3'/>
       <alias name='ua-04c3388d-4e33-4023-84de-a2205c777asdfdsf'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
     </vsock>";;RedHatEnterpriseLinux7/RHEL-145273
496;;;;;;;;;4;"3.Check the qemu cmd line:
 #ps aux | grep -i vsock
​​";3...-device vhost-vsock-pci,id=ua-04c2decd-4e33-4023-84de-a2205sdfsfdfdsf,guest-cid=3,vhostfd=24,bus=pci.8,addr=0x0..;;RedHatEnterpriseLinux7/RHEL-145273
496;;;;;;;;;5;"4.Check the vsock device in the guest os:
 (guest)#lspci";4.04:00.0 Communication controller: Red Hat, Inc. Device 1053 (rev 01);;RedHatEnterpriseLinux7/RHEL-145273
497;RHEL-145274;Start a guet with static cid vsock device;;Yan Fu (yafu);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-145274
498;RHEL-145275;Hotplug/Hotunplug vsock device;Hotplug/Hotunplug vsock device;Yan Fu (yafu);High;Positive;Automated;;1;" 1.Prepare a vsock device xml:
 #cat /xml/vsock.xml
 <vsock model='virtio'>
       <cid auto='no' address='999'/>
    <alias name='ua-04csdfasfdcd-4e33-4023-84de-a2205c777asdfdsf'/>
 </vsock>";​​;Test Case;RedHatEnterpriseLinux7/RHEL-145275
498;;;;;;;;;2;"2.Monitor event:
 #virsh event iommu1 --all --loop
​​";​​;;RedHatEnterpriseLinux7/RHEL-145275
498;;;;;;;;;3;"3.Hotplug the vsock device to a runnig guest:
 #virsh attach-device iommu1 /xml/vsock.xml
​​";3.Device attached successfully;;RedHatEnterpriseLinux7/RHEL-145275
498;;;;;;;;;4;"4.Check the live xml:
 #virsh dumpxml iommu1
​​";"4.
 <vsock model='virtio'>
       <cid auto='no' address='999'/>
       <alias name='ua-04c2decd-4e33-4023-84de-a2205sdfsfdfdsf'/>
       <address type='pci' domain='0x0000' bus='0x08' slot='0x00' function='0x0'/>
 </vsock>";;RedHatEnterpriseLinux7/RHEL-145275
498;;;;;;;;;5;"5.Check the vsock device in the guest os:
 (guest)#lspci";04:00.0 Communication controller: Red Hat, Inc. Device 1053 (rev 01);;RedHatEnterpriseLinux7/RHEL-145275
498;;;;;;;;;6;"6.Check event captured in step 2
​​";"6.
 event 'device-added' for domain 76: ua-04c2decd-4e33-4023-84de-a2205c777asdfdsf
​​";;RedHatEnterpriseLinux7/RHEL-145275
498;;;;;;;;;7;"7.Hotunplug the vsock device:
 #virsh detach-device iommu1 /xml/vsock.xml";​​;;RedHatEnterpriseLinux7/RHEL-145275
498;;;;;;;;;8;"8.Check the live xml:
 #virsh dumpxml iommu1 | grep  -A5 vsock";"8.No output.
​​";;RedHatEnterpriseLinux7/RHEL-145275
498;;;;;;;;;9;"9.Check the devices in the guest os:
 #lspci
​​";"9.No device found in step 5.
​​";;RedHatEnterpriseLinux7/RHEL-145275
498;;;;;;;;;10;"10.Check event captured in step2
​​";"10.
 event 'device-removed' for domain 76: ua-04c2decd-4e33-4023-84de-a2205c777asdfdsf
​​";;RedHatEnterpriseLinux7/RHEL-145275
499;RHEL-145276;Do managedsave/restore with vsock device ;"Verify can do managedsave/restore successfully with vsock device.
";Yan Fu (yafu);High;Positive;Automated;;1;" 1.Start a guest with vsock device:
 #virsh start rhel7.6
 
 #virsh dumpxml rhel7.6 |  grep -A5 vsock
 <vsock model='virtio'>
       <cid auto='no' address='999'/>
       <alias name='ua-04c2decd-4e33-4023-84de-a2205sdfsfdfdsf'/>
       <address type='pci' domain='0x0000' bus='0x08' slot='0x00' function='0x0'/>
 </vsock>
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-145276
499;;;;;;;;;2;"2.Do managedsave:
 #virsh managedsave rhel7.6
​​";"2.#ll /var/lib/libvirt/qemu/save/
 total 16752
 -rw-------. 1 root root 17152377 Sep 27 11:00 rhel7.6.save
​​";;RedHatEnterpriseLinux7/RHEL-145276
499;;;;;;;;;3;"3.Restore guest:
 #virsh start rhel7.6
​​";3.Guest restored successfully;;RedHatEnterpriseLinux7/RHEL-145276
499;;;;;;;;;4;"4..Check the vsock device in guest os after migration:
 (guest)#lspci
​​";4.08:00.0 Communication controller: Red Hat, Inc. Device 1053 (rev 01);;RedHatEnterpriseLinux7/RHEL-145276
500;RHEL-145277;Hotunplug vsock device with 'virsh detach-device-alias';Hotunplug vsock device with 'virsh detach-device-alias';Yan Fu (yafu);High;Positive;Not Automated;;1;" 1.Start a guest with vsock device:
 #virsh start rhel7.6

 #virsh dumpxml rhel7.6 |  grep -A5 vsock
 <vsock model='virtio'>
       <cid auto='no' address='999'/>
       <alias name='ua-04c2decd-4e33-4023-84de-a2205sdfsfdfdsf'/>
       <address type='pci' domain='0x0000' bus='0x08' slot='0x00' function='0x0'/>
 </vsock>
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-145277
500;;;;;;;;;2;"2.Monitor the event:
 #virsh event 76 --all --loop
​​";"
​​";;RedHatEnterpriseLinux7/RHEL-145277
500;;;;;;;;;3;"2.Hotunplug the vsock device with 'virsh detach-device-alias':
 #virsh detach-device-alias rhel7.6 ua-04c2decd-4e33-4023-84de-a2205sdfsfdfdsf
 
​​";"
​​";;RedHatEnterpriseLinux7/RHEL-145277
500;;;;;;;;;4;"3.Check the live xml:
 #virsh dumpxml rhel7.6 | grep -A5 vsock
​​";"3.No output
​​";;RedHatEnterpriseLinux7/RHEL-145277
500;;;;;;;;;5;"4.Check the vsock device in the guest os:
 #lspci | grep -i ""08:00.0""
 
​​";"4.No output
​​";;RedHatEnterpriseLinux7/RHEL-145277
500;;;;;;;;;6;"5.Check the event captured in setup 2
​​";"5.# virsh event 76 --loop --all
 event 'device-removed' for domain 76: ua-04c2decd-4e33-4023-84de-a2205c777asdfdsf";;RedHatEnterpriseLinux7/RHEL-145277
501;RHEL-145279;Start two guest with the same cid vsock device;Start two guest with the same cid vsock device;Yan Fu (yafu);Low;Positive;Not Automated;;1;" 1.Start a guest with cid=3 and auto='no':
 #virsh start rhel7.6
 Domain rhel7.6 started
 
 #virsh dumpxml rhel7.6 | grep -A5 vsock
 # virsh dumpxml rhel7.6 | grep -A5 vsock
     <vsock model='virtio'>
       <cid auto='no' address='3'/>
       <alias name='ua-04c3388d-4e33-4023-84de-a2205c777asdfdsf'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
     </vsock>";​​;Test Case;RedHatEnterpriseLinux7/RHEL-145279
501;;;;;;;;;2;"2.Start another guest with cid=3 and auto='no':
 #virsh edit vm1:
 <vsock model='virtio'>
       <cid auto='no' address='3'/>
       <alias name='ua-04c3388d-4e33-4023-84de-a2205c777asdfdsf'/>
 </vsock>
 
 #virsh start vm1:
​​";"2.
 error: failed to set guest cid: Address already in use";;RedHatEnterpriseLinux7/RHEL-145279
501;;;;;;;;;3;"3.Check the status of guest rhel7.6:
 #virsh list
 
​​";"3.
 # virsh list
  Id    Name                           State
 ----------------------------------------------------
  4     rhel7.6                        running
 
​​";;RedHatEnterpriseLinux7/RHEL-145279
502;RHEL-145280;Edit vm with two vsock devices;Edit vm with two vsock devices;Yan Fu (yafu);Low;Negative;Automated;;1;" 1.Edit vm xml with two vsock devices and save:
 #virsh edit rhel7.6
 <vsock model='virtio'>
       <cid auto='yes'/>
       <alias name='ua-04c3388d-4e33-4023-84de-a2205c777asdfdsf'/>
     </vsock>
     <vsock model='virtio'>
       <cid auto='yes'/>
       <alias name='ua-04c3388d-4e33-4023-84de-a2205csdsdf7asdfdsf'/>
     </vsock>
 
 
​​";" error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content
 
 Failed. Try again? [y,n,i,f,?]: 
​​";Test Case;RedHatEnterpriseLinux7/RHEL-145280
503;RHEL-145281;Start a guest with auto cid vsock device;;Yan Fu (yafu);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-145281
504;RHEL-145282;Start a guest with auto cid vsock device;Start a guest with auto cid vsock device;Yan Fu (yafu);Critical;Positive;Automated;;1;"  1.Add vsock model on host os:
 #modprobe vhost_vsock";​​;Test Case;RedHatEnterpriseLinux7/RHEL-145282
504;;;;;;;;;2;"2.Start a guest with vsock device:
 #virsh edit rhel7.6
 <vsock model='virtio'>
       <cid auto='yes'/>
       <alias name='ua-04c3388d-4e33-4023-84de-a2205c777asdfdsf/>
     </vsock>

 #virsh start rhel7.6";​​;;RedHatEnterpriseLinux7/RHEL-145282
504;;;;;;;;;3;"3.Check vsock device in live xml:
 #virsh dumpxml rhel7.6 | grep -A5 vsock
​​";"3.# virsh dumpxml rhel7.6 | grep -A5 vsock
     <vsock model='virtio'>
       <cid auto='yes' address='3'/>
       <alias name='ua-04c3388d-4e33-4023-84de-a2205c777asdfdsf'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
     </vsock>
   </devices>
 
​​";;RedHatEnterpriseLinux7/RHEL-145282
504;;;;;;;;;4;"4.Check the qemu cmd line:
 #ps aux | grep -i vsock";"4.
 ..-device vhost-vsock-pci,id=ua-04c3388d-4e33-4023-84de-a2205c777asdfdsf,guest-cid=3,vhostfd=23,bus=pci.0,addr=0xb..";;RedHatEnterpriseLinux7/RHEL-145282
504;;;;;;;;;5;"5.Check the vsock device in the guest os:
 (guest)#lspci";"5.
 00:0b.0 Communication controller: Red Hat, Inc. Device 1012
 
​​";;RedHatEnterpriseLinux7/RHEL-145282
505;RHEL-145289;[ACL]user access control for nwfilter-binding - bug 1611320;"Verify user access control for nwfilter-binding
";Yan Fu (yafu);High;Positive;Not Automated;;1;" 1.Set ""access_drivers = [ ""polkit"" ]"" in the libvirtd configure file, and restart libvirtd
 # vim /etc/libvirt/libvirtd.conf
 log_level=1
 log_outputs='1:file:/var/log/libvirt/libvirtd.log'
 access_drivers = [ ""polkit"" ]
 
 # systemctl restart libvirtd";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-145289
505;;;;;;;;;2;"2.Start a guest with nwfilter:
 #virsh edit rhel7.6
   <interface type='network'>
       <mac address='54:52:00:54:9e:f4'/>
       <source network='default'/>
       <model type='virtio'/>
       <filterref filter='clean-traffic'/>
       <alias name='ua-04c2decd-4e33-4889-84de-a2205c777af7'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0a' function='0x0'/>
     </interface>
 
 #virsh start rhel7.6
 Domain rhel7.6 started";"
​​";;RedHatEnterpriseLinux7/RHEL-145289
505;;;;;;;;;3;"3.List the nwfilter binding:
 # virsh nwfilter-binding-list
  Port Dev              Filter               
 ------------------------------------------------------------------
  vnet0                 clean-traffic";"
​​";;RedHatEnterpriseLinux7/RHEL-145289
505;;;;;;;;;4;"4.Dump the XML of nwfilter binding:
 # virsh nwfilter-binding-dumpxml vnet0
 <filterbinding>
   <owner>
     <name>rhel7.6</name>
     <uuid>6753bb03-fbff-4004-82f5-cb2636562246</uuid>
   </owner>
   <portdev name='vnet0'/>
   <mac address='54:52:00:54:9e:f4'/>
   <filterref filter='clean-traffic'>
     <parameter name='MAC' value='54:52:00:54:9e:f4'/>
   </filterref>
 </filterbinding>";"
​​";;RedHatEnterpriseLinux7/RHEL-145289
505;;;;;;;;;5;"5.Destroy the guest:
 #virsh destroy rhel7.6
 Domain rhel7.6 destroyed";"
​​";;RedHatEnterpriseLinux7/RHEL-145289
505;;;;;;;;;6;"6.Check the polkit rule in libvirtd.log:
 # cat /var/log/libvirt/libvirtd.log | grep -i nwfilter-binding 
​​";"2018-09-10 07:44:49.473+0000: 5614: debug : virAccessDriverPolkitCheck:138 : Check action 'org.libvirt.api.nwfilter-binding.create' for process '23226' time 43370225 uid 0
 2018-09-10 07:44:49.476+0000: 5614: debug : virDBusMessageIterEncode:715 : Appended basic type 'char *' varg 'char *' sig 's' val 'org.libvirt.api.nwfilter-binding.create'
 2018-09-10 07:44:49.498+0000: 5614: debug : virFileMakePathHelper:3093 : path=/var/run/libvirt/nwfilter-binding mode=0777
 2018-09-10 07:44:59.884+0000: 5622: debug : virAccessDriverPolkitCheck:138 : Check action 'org.libvirt.api.connect.search-nwfilter-bindings' for process '24098' time 43371304 uid 0
 2018-09-10 07:44:59.885+0000: 5622: debug : virDBusMessageIterEncode:715 : Appended basic type 'char *' varg 'char *' sig 's' val 'org.libvirt.api.connect.search-nwfilter-bindings'
 2018-09-10 07:44:59.886+0000: 5622: debug : virAccessDriverPolkitCheck:138 : Check action 'org.libvirt.api.nwfilter-binding.getattr' for process '24098' time 43371304 uid 0
 2018-09-10 07:44:59.886+0000: 5622: debug : virDBusMessageIterEncode:715 : Appended basic type 'char *' varg 'char *' sig 's' val 'org.libvirt.api.nwfilter-binding.getattr'
 2018-09-10 07:45:11.544+0000: 5615: debug : virAccessDriverPolkitCheck:138 : Check action 'org.libvirt.api.nwfilter-binding.getattr' for process '24799' time 43372469 uid 0
 2018-09-10 07:45:11.544+0000: 5615: debug : virDBusMessageIterEncode:715 : Appended basic type 'char *' varg 'char *' sig 's' val 'org.libvirt.api.nwfilter-binding.getattr'
 2018-09-10 07:45:11.551+0000: 5614: debug : virAccessDriverPolkitCheck:138 : Check action 'org.libvirt.api.nwfilter-binding.read' for process '24799' time 43372469 uid 0
 2018-09-10 07:45:11.551+0000: 5614: debug : virDBusMessageIterEncode:715 : Appended basic type 'char *' varg 'char *' sig 's' val 'org.libvirt.api.nwfilter-binding.read'
 2018-09-10 07:45:24.013+0000: 5616: debug : virAccessDriverPolkitCheck:138 : Check action 'org.libvirt.api.nwfilter-binding.getattr' for process '25569' time 43373694 uid 0
 2018-09-10 07:45:24.013+0000: 5616: debug : virDBusMessageIterEncode:715 : Appended basic type 'char *' varg 'char *' sig 's' val 'org.libvirt.api.nwfilter-binding.getattr'
 2018-09-10 07:45:24.018+0000: 5616: debug : virAccessDriverPolkitCheck:138 : Check action 'org.libvirt.api.nwfilter-binding.delete' for process '25569' time 43373694 uid 0
 2018-09-10 07:45:24.019+0000: 5616: debug : virDBusMessageIterEncode:715 : Appended basic type 'char *' varg 'char *' sig 's' val 'org.libvirt.api.nwfilter-binding.delete'";;RedHatEnterpriseLinux7/RHEL-145289
506;RHEL-145290;Do managedsave/restore after hotplug-hotunplug vsock device;"Verify can do managesave/restore successfully after hotplug/hotunplug vsock device.
";Yan Fu (yafu);High;Positive;Automated;;1;" 1.Start a geust without vsock device:
 #virsh start rhel7.6
 
 #virsh dumpxml rhel7.6 | grep -A5 vsock
​​";" 2.No output for vsock device
​​";Test Case;RedHatEnterpriseLinux7/RHEL-145290
506;;;;;;;;;2;"2.Prepare a vsock device xml:
 #cat /xml/vsock.xml
 <vsock model='virtio'>
       <cid auto='no' address='999'/>
    <alias name='ua-04csdfasfdcd-4e33-4023-84de-a2205c777asdfdsf'/>
 </vsock>
​​";​​;;RedHatEnterpriseLinux7/RHEL-145290
506;;;;;;;;;3;"3.Hotplug the vsock device to a runnig guest:
 #virsh attach-device iommu1 /xml/vsock.xml
​​";3.Device attached successfully;;RedHatEnterpriseLinux7/RHEL-145290
506;;;;;;;;;4;"4.Check the live xml:
 #virsh dumpxml iommu1";"4.
 <vsock model='virtio'>
       <cid auto='no' address='999'/>
       <alias name='ua-04c2decd-4e33-4023-84de-a2205sdfsfdfdsf'/>
       <address type='pci' domain='0x0000' bus='0x08' slot='0x00' function='0x0'/>
 </vsock>";;RedHatEnterpriseLinux7/RHEL-145290
506;;;;;;;;;5;"5.Hotunplug the vsock device from guest:
 #virsh detach-device iommu1 /xml/vsock.xml
​​";5.Device detached successfully;;RedHatEnterpriseLinux7/RHEL-145290
506;;;;;;;;;6;"6.Check the live xml for vsock device:
 #virsh dumpxml iommu1 | grep  -A5 vsock";"6.No output
​​";;RedHatEnterpriseLinux7/RHEL-145290
506;;;;;;;;;7;"7.Do managedsave:
 #virsh managedsave rhel7.6
​​";"7.#ll /var/lib/libvirt/qemu/save/
 total 16752
 -rw-------. 1 root root 17152377 Sep 27 11:00 rhel7.6.save";;RedHatEnterpriseLinux7/RHEL-145290
506;;;;;;;;;8;"8.Restore guest:
 #virsh start rhel7.6
​​";"8.Guest restored successfully
​​";;RedHatEnterpriseLinux7/RHEL-145290
506;;;;;;;;;9;"9.Check the live xml for vsock device:
 #virsh dumpxml iommu1 | grep -A5 vsock
​​";"9.No output
​​";;RedHatEnterpriseLinux7/RHEL-145290
507;RHEL-145294;Edit vm with out range cid vsock device;"Edit vm with out range cid vsock device
 
";Yan Fu (yafu);Low;Negative;Automated;;1;" 1.Edit vm with 0<cid<3 and save:
 #virsh edit rhel7.6
  <vsock model='virtio'>
       <cid auto='no' address='2'/>
       <alias name='ua-04c3388d-4e33-4023-84de-a2205c777asdfdsf'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
     </vsock>
 
 
​​";" 1.
 error: XML error: guest CIDs must be >= 3
 
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL-145294
507;;;;;;;;;2;"2.Edit vm with cid<0 and save:
 <vsock model='virtio'>
       <cid auto='no' address='-2'/>
       <alias name='ua-04c3388d-4e33-4023-84de-a2205c777asdfdsf'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
     </vsock>
 
 
​​";"2.
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content
 
 Failed. Try again? [y,n,i,f,?]: 
 
​​";;RedHatEnterpriseLinux7/RHEL-145294
507;;;;;;;;;3;"3.Edit vm with cid>4294967295 and save:
 #virsh edit rhel7.6
 <vsock model='virtio'>
       <cid auto='no' address='4294967296'/>
       <alias name='ua-04c3388d-4e33-4023-84de-a2205c777asdfdsf'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
     </vsock>
 
 
​​";"3.
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content
 
 Failed. Try again? [y,n,i,f,?]: 
 
​​";;RedHatEnterpriseLinux7/RHEL-145294
507;;;;;;;;;4;"4.Edit vm with cid contains chars and save:
 #virsh edit rhel7.6
  <vsock model='virtio'>
       <cid auto='no' address='42a'/>
       <alias name='ua-04c3388d-4e33-4023-84de-a2205c777asdfdsf'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
     </vsock>
 
 
​​";"4.
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content
 
 Failed. Try again? [y,n,i,f,?]:";;RedHatEnterpriseLinux7/RHEL-145294
508;RHEL-145298;[API] Allow opening secondary drivers for network;Up until now it was possible to connect to only hypervisor drivers (e.g. qemu:///system, lxc:///, vbox:///system, and so on). The internal drivers (like network driver, node device driver, etc.) were hidden from users and users could use them only indirectly. Starting + with this release new connection URIs are accepted. For instance network:///system, storage:///system and so on.;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"1. connect to network hypervisor driver and list network by net-list
 # virsh -c network:///system
 Welcome to virsh, the virtualization interactive terminal.
 Type:  'help' for help with commands
        'quit' to quit
 virsh # help network";" net-autostart         
     net-create          
     net-define     
     net-destroy         
     net-dhcp-leases     
     net-dumpxml         
     net-edit            
     net-event           
     net-info            
     net-list            
     net-name            
     net-start           
     net-undefine        
     net-update          
     net-uuid            ";Test Case;RedHatEnterpriseLinux7/RHEL-145298
508;;;;;;;;;2;test each command above, all should work as expected;​​;;RedHatEnterpriseLinux7/RHEL-145298
508;;;;;;;;;3;"virsh # net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  bridge               active     no            no
  default              active     yes           yes";can connect and all network listed;;RedHatEnterpriseLinux7/RHEL-145298
508;;;;;;;;;4;"2. net-destroy
 virsh # net-destroy default
 Network default destroyed

 virsh # net-list --inactive
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              inactive   yes           yes
";destroy the network successfully;;RedHatEnterpriseLinux7/RHEL-145298
508;;;;;;;;;5;"3. net-start
 virsh # net-start default
 Network default started

 virsh # net-list
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  bridge               active     no            no
  default              active     yes           yes";network start successfully;;RedHatEnterpriseLinux7/RHEL-145298
508;;;;;;;;;6;"4. net-autostart
 virsh # net-autostart default --disable
 Network default unmarked as autostarted

 virsh # net-list 
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  bridge               active     no            no
  default              active     no            yes
";net-autostart works;;RedHatEnterpriseLinux7/RHEL-145298
508;;;;;;;;;7;"5. net-undefine 
 virsh # net-undefine default
 Network default has been undefined

 virsh # net-list
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  bridge               active     no            no
  default              active     no            no
";net-undefine works and the network become non-persistent;;RedHatEnterpriseLinux7/RHEL-145298
508;;;;;;;;;8;"6. net-define
 virsh # net-destroy default
 Network default destroyed

 virsh # net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  bridge               active     no            no

 virsh # net-define /usr/share/libvirt/networks/default.xml
 Network default defined from /usr/share/libvirt/networks/default.xml

 virsh # net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  bridge               active     no            no
  default              inactive   no            yes
";net-define succeed;;RedHatEnterpriseLinux7/RHEL-145298
508;;;;;;;;;9;"7. net-undefine, net-create
 virsh # net-undefine default
 Network default has been undefined

 virsh # net-create /usr/share/libvirt/networks/default.xml
 Network default created from /usr/share/libvirt/networks/default.xml

 virsh # net-list 
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  bridge               active     no            no
  default              active     no            no
";net-create and net-undefine works as expected.;;RedHatEnterpriseLinux7/RHEL-145298
508;;;;;;;;;10;"8. virsh # net-dumpxml default
";"<network>
   <name>default</name>
   <uuid>39a0ba1e-853b-4183-8461-8f9272e19112</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:ad:99:9d'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
     </dhcp>
   </ip>
 </network>";;RedHatEnterpriseLinux7/RHEL-145298
508;;;;;;;;;11;9. virsh # net-info default;"Name:           default
 UUID:           39a0ba1e-853b-4183-8461-8f9272e19112
 Active:         yes
 Persistent:     no
 Autostart:      no
 Bridge:         virbr0";;RedHatEnterpriseLinux7/RHEL-145298
508;;;;;;;;;12;"10. virsh # net-event --event lifecycle

 on another terminal, execute:
 # virsh net-destroy default";"event 'lifecycle' for network default: Stopped
 events received: 1
";;RedHatEnterpriseLinux7/RHEL-145298
508;;;;;;;;;13;"11. net-dhcp-leases
 1) ensure the host has installed libvirt-nss package
 # rpm -q libvirt-nss
 libvirt-nss-4.5.0-9.virtcov.el7.x86_64

 2) edit the /etc/nsswitch.conf file to be with below content: 
 hosts:      files libvirt dns myhostname

 3) start a guest with default network
 # virsh start rh
 Domain rh started

 4) # virsh -c network:///system
 Welcome to virsh, the virtualization interactive terminal.


 Type:  'help' for help with commands
        'quit' to quit


 virsh # net-dhcp-leases default
 Expiry Time          MAC address        Protocol  IP address                Hostname        Client ID or DUID
 -------------------------------------------------------------------------------------------------------------------
  2018-09-12 12:25:00  52:54:00:85:65:64  ipv4      192.168.122.214/24        -               -

 on guest:
 [root@localhost ~]# hostnamectl set-hostname  guest
 [root@localhost ~]# service network restart
 Restarting network (via systemctl):  [  OK  ]

 check again:
 virsh # net-dhcp-leases default
  Expiry Time          MAC address        Protocol  IP address                Hostname        Client ID or DUID
 -------------------------------------------------------------------------------------------------------------------
  2018-09-12 12:28:39  52:54:00:85:65:64  ipv4      192.168.122.214/24        guest           -
";​​;;RedHatEnterpriseLinux7/RHEL-145298
508;;;;;;;;;14;"12. net-edit
 to edit the default network dhcp range to be <range start='192.168.122.2' end='192.168.122.253'/>

 virsh # net-edit default
 Network default XML configuration edited.

 virsh # net-dumpxml default --inactive
 <network>
   <name>default</name>
   <uuid>c528d815-e13c-49b4-89a5-19c8835ff0e1</uuid>
   <forward mode='nat'/>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:1f:92:c2'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.253'/>
     </dhcp>
   </ip>
 </network>
";​​;;RedHatEnterpriseLinux7/RHEL-145298
508;;;;;;;;;15;"13. net-name, net-uuid
 virsh # net-uuid default

";c528d815-e13c-49b4-89a5-19c8835ff0e1;;RedHatEnterpriseLinux7/RHEL-145298
508;;;;;;;;;16;"virsh # net-name c528d815-e13c-49b4-89a5-19c8835ff0e1
​​";default;;RedHatEnterpriseLinux7/RHEL-145298
508;;;;;;;;;17;"14. net-update
 virsh # net-update default add ip-dhcp-range ""<range start='192.168.122.20' end='192.168.122.40'/>""
 Updated network default live state

 virsh # net-dumpxml default

";"<network>
   <name>default</name>
   <uuid>c528d815-e13c-49b4-89a5-19c8835ff0e1</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:1f:92:c2'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
       <range start='192.168.122.20' end='192.168.122.40'/>
     </dhcp>
   </ip>
 </network>

 (update successfully)";;RedHatEnterpriseLinux7/RHEL-145298
509;RHEL-145300;Allow opening secondary drivers for interface;Up until now it was possible to connect to only hypervisor drivers (e.g. qemu:///system, lxc:///, vbox:///system, and so on). The internal drivers (like network driver, node device driver, etc.) were hidden from users and users could use them only indirectly. Starting + with this release new connection URIs are accepted. For instance network:///system, storage:///system and so on.;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;" # virsh -c interface:///system
 Welcome to virsh, the virtualization interactive terminal.


 Type:  'help' for help with commands
        'quit' to quit


 virsh # help interface";"    iface-begin    ...
     iface-bridge   ...
     iface-commit   ...
     iface-define    ...
     iface-destroy  ...
     iface-dumpxml  ...
     iface-edit     ...
     iface-list     ...
     iface-mac      ...
     iface-name     ...
     iface-rollback ...
     iface-start    ...
     iface-unbridge ...
     iface-undefine ...";Test Case;RedHatEnterpriseLinux7/RHEL-145300
509;;;;;;;;;2;test for each command, all should work as expected;​​;;RedHatEnterpriseLinux7/RHEL-145300
509;;;;;;;;;3;"1. iface-list

 virsh # iface-list --all
  Name                 State      MAC Address
 ---------------------------------------------------
  enp1s0               active     d8:d3:85:7e:61:9b
  ens1f0               active     00:1b:21:39:8b:18
  ens1f1               inactive   00:1b:21:39:8b:19
  lo                   active     00:00:00:00:00:00

 virsh # iface-list
  Name                 State      MAC Address
 ---------------------------------------------------
  enp1s0               active     d8:d3:85:7e:61:9b
  ens1f0               active     00:1b:21:39:8b:18
  lo                   active     00:00:00:00:00:00

 virsh # iface-list --inactive
  Name                 State      MAC Address
 ---------------------------------------------------
  ens1f1               inactive   00:1b:21:39:8b:19";​​;;RedHatEnterpriseLinux7/RHEL-145300
509;;;;;;;;;4;"2. iface-mac

 virsh # iface-mac ens1f1
 00:1b:21:39:8b:19
";​​;;RedHatEnterpriseLinux7/RHEL-145300
509;;;;;;;;;5;"3. iface-name

 virsh # iface-name 00:1b:21:39:8b:19
 ens1f1";​​;;RedHatEnterpriseLinux7/RHEL-145300
509;;;;;;;;;6;"4. iface-dumpxml
 
 virsh # iface-dumpxml eno1
 <interface type='ethernet' name='eno1'>
   <protocol family='ipv4'>
     <ip address='10.66.6.215' prefix='22'/>
   </protocol>
   <link speed='1000' state='up'/>
   <mac address='44:37:e6:6a:7f:29'/>
 </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL-145300
509;;;;;;;;;7;"5. iface-edit
 virsh # iface-dumpxml eno1 --inactive
 <interface type='ethernet' name='eno1'>
   <start mode='none'/>
   <protocol family='ipv4'>
     <dhcp/>
   </protocol>
 </interface>
 
 edit the ""start mode"" to be ""onboot""
 virsh # iface-edit eno1
 virsh # iface-dumpxml eno1 --inactive
 <interface type='ethernet' name='eno1'>
   <start mode='onboot'/>
   <protocol family='ipv4'>
     <dhcp/>
   </protocol>
 </interface>";​​;;RedHatEnterpriseLinux7/RHEL-145300
510;RHEL-145302;Transfer data between host and guest with vsock device;"Transfer data between host and guest with vsock device
 
 
 
 ";Yan Fu (yafu);High;Positive;Automated;;1;"1.Add vsock model on host os:
 #modprobe vhost_vsock 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-145302
510;;;;;;;;;2;"2.Start a guest with vsock device:
 #virsh start rhel7.6
 
 #virsh dumpxml rhel7.6 | grep -A5 vsock
​​";"2.
 Domain rhel7.6 started
 
 # virsh dumpxml rhel7.6 | grep -A5 vsock
     <vsock model='virtio'>
       <cid auto='no' address='3'/>
       <alias name='ua-04c3388d-4e33-4023-84de-a2205c777asdfdsf'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
     </vsock>";;RedHatEnterpriseLinux7/RHEL-145302
510;;;;;;;;;3;"3.Check the qemu cmd line:
 #ps aux | grep -i cid";..-device vhost-vsock-pci,id=ua-04c2decd-4e33-4023-84de-a2205sdfsfdfdsf,guest-cid=3,vhostfd=24,bus=pci.8,addr=0x0;;RedHatEnterpriseLinux7/RHEL-145302
510;;;;;;;;;4;"4.Download nc-vosck.c both on guest and host:
 #git clone https://github.com/stefanha/nc-vsock.git";​​;;RedHatEnterpriseLinux7/RHEL-145302
510;;;;;;;;;5;"5.Compile nc-vsock:
 #make
​​";"5.# make
 cc     nc-vsock.c   -o nc-vsock";;RedHatEnterpriseLinux7/RHEL-145302
510;;;;;;;;;6;"6.Start listening socket inside guest:
 (guest)#./nc-vsock -l 1234";"
​​";;RedHatEnterpriseLinux7/RHEL-145302
510;;;;;;;;;7;"7.Connect guest cid from host and input some chars:
 (host)#./nc-vsock 3 1234
 Test for vsock device";"7.Could also see 'Test vsock device' in guest os's terminal opened in step 5.
​​";;RedHatEnterpriseLinux7/RHEL-145302
511;RHEL-145305;Allow opening secondary drivers for nodedev - create & destroy & dumpxml;Up until now it was possible to connect to only hypervisor drivers (e.g. qemu:///system, lxc:///, vbox:///system, and so on). The internal drivers (like network driver, node device driver, etc.) were hidden from users and users could use them only indirectly. Starting + with this release new connection URIs are accepted. For instance network:///system, storage:///system and so on.;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"# virsh -c nodedev:///system
 Welcome to virsh, the virtualization interactive terminal.
 
 
 Type:  'help' for help with commands
        'quit' to quit
 
 
 virsh # help nodedev";" Node Device (help keyword 'nodedev'):
     nodedev-create
     nodedev-destroy         
     nodedev-detach          
     nodedev-dumpxml         
     nodedev-list            
     nodedev-reattach        
     nodedev-reset           
     nodedev-event  
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL-145305
511;;;;;;;;;2;test for each command and all should work well;​​;;RedHatEnterpriseLinux7/RHEL-145305
511;;;;;;;;;3;"1. create & destroy
 create a scsi_host:
 # echo '2101001b32a90001:2101001b32a9da4e' > /sys/class/fc_host/host4/vport_create

 # virsh -c nodedev:///system
 Welcome to virsh, the virtualization interactive terminal.
 
 
 Type:  'help' for help with commands
        'quit' to quit
 
 
 virsh # nodedev-list --cap fc_host
 scsi_host1
 scsi_host4
 scsi_host6

 virsh # nodedev-dumpxml scsi_host6
 <device>
   <name>scsi_host6</name>
   <path>/sys/devices/pci0000:00/0000:00:09.0/0000:18:00.1/host4/vport-4:0-1/host6</path>
   <parent>scsi_host4</parent>
   <capability type='scsi_host'>
     <host>6</host>
     <unique_id>6</unique_id>
     <capability type='fc_host'>
       <wwnn>2101001b32a9da4e</wwnn>
       <wwpn>2101001b32a90001</wwpn>
       <fabric_wwn>2001000dec9877c1</fabric_wwn>
     </capability>
   </capability>
 </device>
​​";the new nodedev scsi_host6 is created, and can dump the xml;;RedHatEnterpriseLinux7/RHEL-145305
511;;;;;;;;;4;"virsh # nodedev-destroy scsi_host6
 Destroyed node device 'scsi_host6'
 
 virsh # nodedev-list --cap fc_host
 scsi_host1
 scsi_host4";the new created vHBA is destroyed successfully;;RedHatEnterpriseLinux7/RHEL-145305
511;;;;;;;;;5;"copy the output of dumpxml of scsi_host6 into a file /tmp/scsi_host
 
 virsh # nodedev-create /tmp/scsi_host
 Node device scsi_host7 created from /tmp/scsi_host
 
 virsh # nodedev-list --cap fc_host
 scsi_host1
 scsi_host4
 scsi_host7";the new nodedev scsi_host7 is created from the file;;RedHatEnterpriseLinux7/RHEL-145305
511;;;;;;;;;6;virsh # nodedev-dumpxml scsi_host7;"<device>
   <name>scsi_host7</name>
   <path>/sys/devices/pci0000:00/0000:00:09.0/0000:18:00.1/host4/vport-4:0-2/host7</path>
   <parent>scsi_host4</parent>
   <capability type='scsi_host'>
     <host>7</host>
     <unique_id>7</unique_id>
     <capability type='fc_host'>
       <wwnn>2101001b32a9da4e</wwnn>
       <wwpn>2101001b32a90001</wwpn>
       <fabric_wwn>2001000dec9877c1</fabric_wwn>
     </capability>
   </capability>
 </device>";;RedHatEnterpriseLinux7/RHEL-145305
511;;;;;;;;;7;virsh # quit;​​;;RedHatEnterpriseLinux7/RHEL-145305
512;RHEL-145319;Coldplug/Coldunplug vsock device;Coldplug/Coldunplug vsock device;Yan Fu (yafu);High;Positive;Automated;;1;" 1.Prepare a vsock device xml:
 #cat /xml/vsock.xml
 <vsock model='virtio'>
       <cid auto='no' address='999'/>
    <alias name='ua-04csdfasfdcd-4e33-4023-84de-a2205c777asdfdsf'/>
 </vsock>";​​;Test Case;RedHatEnterpriseLinux7/RHEL-145319
512;;;;;;;;;2;"2.Coldplug vsock device to an inactive guest:
 #virsh attach-device rhel7.6 /xml/vosck.xml --config
​​";2.Device attached successfully;;RedHatEnterpriseLinux7/RHEL-145319
512;;;;;;;;;3;"3.Check the vsock device in the inactive xml:
 #virsh dumpxml rhel7.6 --inactive | grep -A5 vsock
​​";"3.<vsock model='virtio'>
       <cid auto='no' address='999'/>
    <alias name='ua-04csdfasfdcd-4e33-4023-84de-a2205c777asdfdsf'/>
   <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
 </vsock>";;RedHatEnterpriseLinux7/RHEL-145319
512;;;;;;;;;4;"4.Start the guest:
 #virsh start rhel7.6
 
 #virsh dumpxml rhel7.6 | grep -A5 vsock
​​";"4.<vsock model='virtio'>
       <cid auto='no' address='999'/>
    <alias name='ua-04csdfasfdcd-4e33-4023-84de-a2205c777asdfdsf'/>
   <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
 </vsock>";;RedHatEnterpriseLinux7/RHEL-145319
512;;;;;;;;;5;"5.Coldunplug vsock device from the guest:
 #virsh detach-device rhel7.6 /xml/vsock.xml --config
​​";5.Device detached successfully;;RedHatEnterpriseLinux7/RHEL-145319
512;;;;;;;;;6;"6.Check the vsock device in the live xml:
 #virsh dumpxml rhel7.6 | grep -A5 vsock
​​";"6.<vsock model='virtio'>
       <cid auto='no' address='999'/>
    <alias name='ua-04csdfasfdcd-4e33-4023-84de-a2205c777asdfdsf'/>
   <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
 </vsock>";;RedHatEnterpriseLinux7/RHEL-145319
512;;;;;;;;;7;"7.Check the vsock device in the inactive xml:
 #virsh dumpxml rhel7.6 --inactive | grep -A5 vsock
​​";"7.no output
​​";;RedHatEnterpriseLinux7/RHEL-145319
513;RHEL-145551;Allow opening secondary drivers for nodedev - list & attach & detach & reattach & event - bug 1627972;Up until now it was possible to connect to only hypervisor drivers (e.g. qemu:///system, lxc:///, vbox:///system, and so on). The internal drivers (like network driver, node device driver, etc.) were hidden from users and users could use them only indirectly. Starting + with this release new connection URIs are accepted. For instance network:///system, storage:///system and so on.;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"# virsh -c nodedev:///system
 Welcome to virsh, the virtualization interactive terminal.
 
 
 Type:  'help' for help with commands
        'quit' to quit
 
 
 virsh # nodedev-list --cap net
 
​​";"net_enp1s0_d8_d3_85_7e_61_9b
 net_enp3s16f1_36_9c_ba_0a_da_32
 net_enp3s16f3_76_26_b8_f1_c9_6a
 net_enp3s16f5_22_d0_d2_b8_1e_43
 net_ens1f0_00_1b_21_39_8b_18
 net_ens1f1_00_1b_21_39_8b_19
 net_lo_00_00_00_00_00_00
 net_ovs_netdev_3e_a0_d5_4a_1c_2c
 net_ovsbr0_9a_58_80_a3_ff_44
 net_virbr0_nic_52_54_00_1f_92_c2

 (network devices can list correctly)";Test Case;RedHatEnterpriseLinux7/RHEL-145551
513;;;;;;;;;2;virsh # nodedev-list --tree;​​;;RedHatEnterpriseLinux7/RHEL-145551
513;;;;;;;;;3;"detach a vf
 virsh # nodedev-detach pci_0000_03_10_5";​​;;RedHatEnterpriseLinux7/RHEL-145551
513;;;;;;;;;4;"reattach it
 virsh # nodedev-reattach pci_0000_03_10_5
​​";​​;;RedHatEnterpriseLinux7/RHEL-145551
513;;;;;;;;;5;"reset it
 virsh # nodedev-reset pci_0000_03_10_5";​​;;RedHatEnterpriseLinux7/RHEL-145551
513;;;;;;;;;6;"virsh # nodedev-event 
​​";error: either --list or --event <type> is required;;RedHatEnterpriseLinux7/RHEL-145551
513;;;;;;;;;7;"virsh # nodedev-event --list
​​";"lifecycle
 update";;RedHatEnterpriseLinux7/RHEL-145551
513;;;;;;;;;8;"on terminal 1:
 virsh # nodedev-event --event lifecycle
 
 on terminal 2:
 # virsh nodedev-detach pci_0000_03_10_5
 Device pci_0000_03_10_5 detached";"(check on terminal 1)
 event 'lifecycle' for node device net_enp3s16f5_22_d0_d2_b8_1e_43: Deleted
 events received: 1";;RedHatEnterpriseLinux7/RHEL-145551
514;RHEL-145553;[rom] test rom enabled=no/yes with pci passthrough interface;test rom enabled=no with pci passthrough interface;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"test for pci passthrough, for example of 82599
 ...
   <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:e0:80:dc'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x3'/>
       </source>
       <address type='pci' domain='0x0000' bus='0x02' slot='0x00' function='0x0'/>
 <rom enabled='yes' file='/usr/share/ipxe/808610ed.rom'/>
 <boot order='1'/>
     </interface>
 
 how to find the rom file path, refer to RHEL7-49080 ";"


 vm can boot by pxe";Test Case;RedHatEnterpriseLinux7/RHEL-145553
514;;;;;;;;;2;<rom enabled='no' file='/usr/share/ipxe/808610ed.rom'/>;vm can not boot by pxe;;RedHatEnterpriseLinux7/RHEL-145553
515;RHEL-145554;test rom enabled=no with OVMF and various modle types;test rom enabled=no and yes with OVMF,;Yalan Zhang (yalzhang);Low;Positive;Manual Only;;1;"for OVMF pxe, need to prepare pxe server 
 3. prepare a vm with OVMF and interface as below:
  <os>
     <type arch='x86_64' machine='pc-q35-rhel7.5.0'>hvm</type>
     <loader readonly='yes' secure='yes' type='pflash'>/usr/share/OVMF/OVMF_CODE.secboot.fd</loader>
     <nvram>/var/lib/libvirt/qemu/nvram/rhelq35_VARS.fd</nvram>
   </os>
 ....
 <interface type='bridge'>
       <source bridge='br0'/>
       <model type='e1000e'/>
 <rom enabled='no'/>
 <boot order='1'/>
     </interface>

 (model type here can be e1000e, e1000, rtl8139, except for virtio)";​​;Test Case;RedHatEnterpriseLinux7/RHEL-145554
515;;;;;;;;;2;4. start the vm, and check if the vm can boot by pxe;​​;;RedHatEnterpriseLinux7/RHEL-145554
515;;;;;;;;;3;e1000e: vm can not boot by pxe;vm can not boot by pxe;;RedHatEnterpriseLinux7/RHEL-145554
515;;;;;;;;;4;test for e1000;e1000: vm can not boot by pxe;;RedHatEnterpriseLinux7/RHEL-145554
515;;;;;;;;;5;test for rtl8139;rtl8139: vm can not boot by pxe;;RedHatEnterpriseLinux7/RHEL-145554
515;;;;;;;;;6;"5. OVMF + virtio
 <interface type='bridge'>
       <source bridge='br0'/>
       <model type='virtio'/>
 <rom enabled='no'/>
 <boot order='1'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL-145554
515;;;;;;;;;7;6. start the vm, and check if the vm can boot by pxe;"virtio: vm can boot by pxe, this is expected and has confirmed with devel, even we disable the rom of the virtio card loading, the OVMF has its own rom for virtio.
 refer to https://bugzilla.redhat.com/show_bug.cgi?id=1425058#c38 ";;RedHatEnterpriseLinux7/RHEL-145554
516;RHEL-145556;update-device for different rom tune settings;hotplug and update-device for different rom tune settings;Yalan Zhang (yalzhang);Medium;Positive;Automated;;1;update-device;​​;Test Case;RedHatEnterpriseLinux7/RHEL-145556
516;;;;;;;;;2;"# virsh dumpxml rhel | grep /interface -B9
 ...
 <interface type='bridge'>
       <mac address='52:54:00:fb:46:8d'/>
       <source bridge='br0'/>
       <target dev='vnet6'/>
       <model type='virtio'/>
       <alias name='net5'/>
       <rom enabled='yes' bar='on' file='/usr/share/qemu-kvm/pxe-virtio.rom'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0d' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL-145556
516;;;;;;;;;3;"# cat net3.xml
 <interface type='bridge'>
       <mac address='52:54:00:fb:46:8d'/>
       <source bridge='br0'/>
       <target dev='vnet6'/>
       <model type='virtio'/>
       <alias name='net5'/>
 <rom enabled='no'/>
     </interface>
 
 # virsh update-device rhel net3.xml";"report error:
 
 error: Failed to update device from xml.xml
 error: Operation not supported: cannot modify network device rom enabled setting
 
 
 
​​";;RedHatEnterpriseLinux7/RHEL-145556
516;;;;;;;;;4;"1. Add rom enabled setting:
 1) Prepare vm running with below interface:
 # virsh dumpxml rhel | grep /interface -B8
 <interface type='network'>
 <mac address='52:54:00:fa:81:87'/>
 <source network='default' bridge='virbr0'/>
 <target dev='vnet0'/>
 <model type='rtl8139'/>
 <boot order='1'/>
 <alias name='net0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 
 2) Add ""<rom enabled='yes'/>"" and update the device:
 # cat net.xml
 <interface type='network'>
 <mac address='52:54:00:fa:81:87'/>
 <source network='default' bridge='virbr0'/>
 <target dev='vnet0'/>
 <model type='rtl8139'/>
 <boot order='1'/>
 <rom enabled='yes'/>
 <alias name='net0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 
 # virsh update-device rhel net.xml
​​";"# virsh update-device rhel net.xml
 error: Failed to update device from net.xml
 error: Operation not supported: cannot modify network device rom enabled setting";;RedHatEnterpriseLinux7/RHEL-145556
516;;;;;;;;;5;"2. delete rom enabled setting:
 1) # virsh dumpxml rhel | grep /interface -B8
 <interface type='network'>
 <mac address='52:54:00:fa:81:87'/>
 <source network='default' bridge='virbr0'/>
 <target dev='vnet0'/>
 <model type='rtl8139'/>
 <alias name='net0'/>
 <rom enabled='no'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 
 no rom enabled setting
 # cat net.xml
 <interface type='network'>
 <mac address='52:54:00:fa:81:87'/>
 <source network='default' bridge='virbr0'/>
 <target dev='vnet0'/>
 <model type='rtl8139'/>
 <alias name='net0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 
 
 # virsh update-device rhel net.xml";"# virsh update-device rhel net.xml
 error: Failed to update device from net.xml
 error: Operation not supported: cannot modify network device rom enabled setting";;RedHatEnterpriseLinux7/RHEL-145556
516;;;;;;;;;6;"3. modify the setting
 # virsh dumpxml rhel | grep /interface -B8
 <interface type='network'>
 <mac address='52:54:00:fa:81:87'/>
 <source network='default' bridge='virbr0'/>
 <target dev='vnet0'/>
 <model type='rtl8139'/>
 <alias name='net0'/>
 <rom enabled='yes'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 
 # cat net.xml
 <interface type='network'>
 <mac address='52:54:00:fa:81:87'/>
 <source network='default' bridge='virbr0'/>
 <target dev='vnet0'/>
 <model type='rtl8139'/>
 <alias name='net0'/>
 <rom enabled='no'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 
 # virsh update-device rhel net.xml
 
​​";"# virsh update-device rhel net.xml
 error: Failed to update device from net.xml
 error: Operation not supported: cannot modify network device rom enabled setting";;RedHatEnterpriseLinux7/RHEL-145556
516;;;;;;;;;7;"4. update something else and keep the rom enabled in the xml
 
 # virsh dumpxml rhel | grep /interface -B8
 <interface type='network'>
 <mac address='52:54:00:fa:81:87'/>
 <source network='default' bridge='virbr0'/>
 <target dev='vnet0'/>
 <model type='rtl8139'/>
 <alias name='net0'/>
 <rom enabled='yes' bar='on' file='/usr/share/qemu-kvm/pxe-rtl8139.rom'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 
 # cat net.xml
 <interface type='network'>
 <mac address='52:54:00:fa:81:87'/>
 <source network='default' bridge='virbr0'/>
 <target dev='vnet0'/>
 <model type='rtl8139'/>
 <alias name='net0'/>
 <rom enabled='yes' bar='on' file='/usr/share/qemu-kvm/pxe-rtl8139.rom'/>
 ** <link state='up'/> **
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 
 # virsh update-device rhel net.xml
 Device updated successfully
 
 # virsh dumpxml rhel | grep /interface -B9
 <interface type='network'>
 <mac address='52:54:00:fa:81:87'/>
 <source network='default' bridge='virbr0'/>
 <target dev='vnet0'/>
 <model type='rtl8139'/>
 ** <link state='up'/> **
 <alias name='net0'/>
 <rom enabled='yes' bar='on' file='/usr/share/qemu-kvm/pxe-rtl8139.rom'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>";"# virsh update-device rhel net.xml
 Device updated successfully";;RedHatEnterpriseLinux7/RHEL-145556
516;;;;;;;;;8;delete the pci address in the xmls of above scenarios, then do the same steps;(need update after bug 1599513);;RedHatEnterpriseLinux7/RHEL-145556
517;RHEL-145558;Allow opening secondary drivers for interface - 2;run the case RHEL7-18046  and RHEL-111168  through the secondary driver inteface;Yalan Zhang (yalzhang);;Positive;Manual Only;;1;"1. iface-begin
 virsh # iface-list --all
  Name                 State      MAC Address
 ---------------------------------------------------
  eno1                 active     44:37:e6:6a:7f:29
  lo                   active     00:00:00:00:00:00
 
 virsh # iface-begin
 Network config change transaction started";​​;Test Case;RedHatEnterpriseLinux7/RHEL-145558
517;;;;;;;;;2;"2. iface-commit
​​";​​;;RedHatEnterpriseLinux7/RHEL-145558
517;;;;;;;;;3;3. iface-rollback;​​;;RedHatEnterpriseLinux7/RHEL-145558
518;RHEL-145559;Allow opening secondary drivers for interface  - 3;;Yalan Zhang (yalzhang);;Positive;Manual Only;;1;"1. iface-bridge
 # virsh  -c interface:///system
 virsh # iface-list 
  Name                 State      MAC Address
 ---------------------------------------------------
  eno1                 active     44:37:e6:6a:7f:29
  lo                   active     00:00:00:00:00:00
 
 virsh # iface-bridge eno1 br0 --no-stp
 Created bridge br0 with attached device eno1
 Bridge interface br0 started";​​;Test Case;RedHatEnterpriseLinux7/RHEL-145559
518;;;;;;;;;2;"2. iface-destroy
 virsh # iface-list 
  Name                 State      MAC Address
 ---------------------------------------------------
  br0                  active     5a:ba:52:d5:bb:97
  lo                   active     00:00:00:00:00:00
 
 virsh # iface-destroy br0
 Interface br0 destroyed
 
 virsh # iface-list  --all
  Name                 State      MAC Address
 ---------------------------------------------------
  br0                  inactive   
  lo                   active     00:00:00:00:00:00";​​;;RedHatEnterpriseLinux7/RHEL-145559
518;;;;;;;;;3;"3. iface-undefine
 virsh # iface-undefine br0
 Interface br0 undefined
 
 virsh # iface-list --all
  Name                 State      MAC Address
 ---------------------------------------------------
  lo                   active     00:00:00:00:00:00";​​;;RedHatEnterpriseLinux7/RHEL-145559
518;;;;;;;;;4;"3. iface-unbridge
 # virsh iface-bridge eno1 br0 --no-stp
 Created bridge br0 with attached device eno1
 Bridge interface br0 started
 
 # virsh -c interface:///system
 Welcome to virsh, the virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virsh # iface-unbridge br0
 Device eno1 un-attached from bridge br0
 error: Failed to start interface eno1
 error: Requested operation is not valid: interface is already running
 
 virsh # iface-list --all
  Name                 State      MAC Address
 ---------------------------------------------------
  eno1                 active     44:37:e6:6a:7f:29
  lo                   active     00:00:00:00:00:00
​​";​​;;RedHatEnterpriseLinux7/RHEL-145559
518;;;;;;;;;5;"3. iface-start
 virsh # iface-list --all
  Name                 State      MAC Address
 ---------------------------------------------------
  eno1                 active     44:37:e6:6a:7f:29
  lo                   active     00:00:00:00:00:00
 
 virsh # iface-destroy eno1
 Interface eno1 destroyed
 
 virsh # iface-list --all
  Name                 State      MAC Address
 ---------------------------------------------------
  eno1                 inactive   44:37:e6:6a:7f:29
  lo                   active     00:00:00:00:00:00
 
 virsh # iface-start eno1
 Interface eno1 started
​​";​​;;RedHatEnterpriseLinux7/RHEL-145559
518;;;;;;;;;6;"4. iface-define
 $ cat /tmp/br0
 <interface type='bridge' name='br0'>
   <bridge>
   </bridge>
 </interface>
 
 virsh # iface-define /tmp/br0
 Interface br0 defined from /tmp/br0
 
 virsh # iface-list --all
  Name                 State      MAC Address
 ---------------------------------------------------
  br0                  inactive   
  lo                   active     00:00:00:00:00:00
 
 virsh # iface-start br0
 Interface br0 started
 
 virsh # iface-list --all
  Name                 State      MAC Address
 ---------------------------------------------------
  br0                  active     72:40:86:ff:89:66
  lo                   active     00:00:00:00:00:00
​​";​​;;RedHatEnterpriseLinux7/RHEL-145559
519;RHEL-145567;hotplug interface with rom bar=off to vm with seabios (negative);attach interface with rom bar=off with seabios will fail, but it is expected as confirmed with developers;Yalan Zhang (yalzhang);Low;Negative;Automated;;1;"1. hotplug interface with rom bar = off
 # cat net.xml
 <interface type='network'>      
     <source network='default'/> 
         <model type='virtio'/>      
     <rom bar='off'/>  
       </interface>
 
 # virsh attach-device rhel net.xml";"# virsh attach-device rhel net.xmlerror: Failed to attach interface error: internal error: unable to execute QEMU command 'device_add': failed to find romfile ""pxe-virtio.rom""
 
 refer to https://bugzilla.redhat.com/show_bug.cgi?id=1425058#c9 ";Test Case;RedHatEnterpriseLinux7/RHEL-145567
520;RHEL-147800;Enable mdev device display with non-none type video for intel vgpu- 1564153;Enable mdev device display with non-none type video for intel vgpu- 1564153;Yan Fu (yafu);High;Positive;Manual Only;;1;" 1.Add '/dev/dri/renderD128' in cgroup_device_acl in qemu.conf and restart libvirtd service:
 #cat /etc/libvirt/qemu.conf
 cgroup_device_acl = [
     ""/dev/null"", ""/dev/full"", ""/dev/zero"",
     ""/dev/random"", ""/dev/urandom"",
     ""/dev/ptmx"", ""/dev/kvm"", ""/dev/kqemu"",
     ""/dev/rtc"",""/dev/hpet"", ""/dev/sev"",
     ""/dev/dri/renderD128""
 ]
 
 #systemctl restart libvirtd
 
 # pidof libvirtd
 21068";​​;Test Case;RedHatEnterpriseLinux7/RHEL-147800
520;;;;;;;;;2;"2.Define a guest with egl-headless display:
 <graphics type='egl-headless'/>
     <hostdev mode='subsystem' type='mdev' managed='no' model='vfio-pci' display='on'>
       <source>
         <address uuid='d5b66366-625c-4632-ab15-6ef3a54666a8'/>
       </source>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>
     </hostdev>
  <graphics type='vnc' autoport='yes' listen='0.0.0.0' keymap='en-us'>
       <listen type='address' address='0.0.0.0'/>
     </graphics>
     <graphics type='spice' autoport='yes' listen='0.0.0.0' keymap='en-us'>
       <listen type='address' address='0.0.0.0'/>
     </graphics>
 <video>
       <model type='virtio' heads='1' primary='yes'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
     </video>";​​;;RedHatEnterpriseLinux7/RHEL-147800
520;;;;;;;;;3;"(Must skip this step if bug#1628892 fixed)
 3.Change '/dev/dri/renderD128' owner and group to 'qemu:qemu"":
 
 #chown qemu:qemu /dev/dri/renderD128";​​;;RedHatEnterpriseLinux7/RHEL-147800
520;;;;;;;;;4;"4.Start the guest:
 # virsh start rhel7.6";4.Domain rhel7.6 started;;RedHatEnterpriseLinux7/RHEL-147800
520;;;;;;;;;5;"5.Check qemu cmd line:
 #ps aux | grep -i qemu 
​​";5.-vnc 0.0.0.0:0 -spice port=5901,addr=0.0.0.0,disable-ticketing,image-compression=off,seamless-migration=on ***-display egl-headless*** -device virtio-vga,id=video0,max_outputs=1,bus=pci.0,addr=0xc...-device vfio-pci,id=hostdev0,sysfsdev=/sys/bus/mdev/devices/ec74c7a0-411a-4c46-9c16-eedaca20d867,***display=on***,bus=pci.0,addr=0xb;;RedHatEnterpriseLinux7/RHEL-147800
520;;;;;;;;;6;"6.Connect guest with vnc:
 #remote-viewer vnc://10.73.130.49:5900";6.Input ctrl + alt + 2 can switch to vgpu display.;;RedHatEnterpriseLinux7/RHEL-147800
520;;;;;;;;;7;"7.Connect guest with spice:
 #remote-viewer spice://10.73.130.49:5901";7.Show two displays and display 2 is the vgpu display.;;RedHatEnterpriseLinux7/RHEL-147800
521;RHEL-147801;Enable mdev device display with non-none type for nvidia vgpu - 1475770;Enable mdev device display with non-none type for nvidia vgpu;Yan Fu (yafu);High;Positive;Manual Only;;1;" 1.Start a guest with vgpu and display=on option added to vgpu device, using qxl video device:
 #virsh dumpxml iommu1 
  <graphics type='vnc' port='5900' autoport='yes' listen='0.0.0.0' keymap='en-us'>
       <listen type='address' address='0.0.0.0'/>
     </graphics>
     <graphics type='spice' port='5901' autoport='yes' listen='0.0.0.0' keymap='en-us'>
       <listen type='address' address='0.0.0.0'/>
     </graphics>
 <hostdev mode='subsystem' type='mdev' managed='no' model='vfio-pci' display='on'>
       <source>
         <address uuid='46670aa1-80e2-486d-99f3-bf4154db0d6b'/>
       </source>
       <alias name='ua-0febf033-9953-40e1-b803-2df42b0bac4e'/>
       <address type='pci' domain='0x0000' bus='0x07' slot='0x00' function='0x0'/>
     </hostdev>
     <video>
       <model type='qxl' ram='65536' vram='65536' vgamem='16384' heads='1' primary='yes'/>
       <alias name='video0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x0'/>
     </video>";​​;Test Case;RedHatEnterpriseLinux7/RHEL-147801
521;;;;;;;;;2;"2.Check the qemu cmd line:
 #ps aux | grep -i mdev";2....-device vfio-pci,id=ua-0febf033-9953-40e1-b803-2df42b0bac4e,sysfsdev=/sys/bus/mdev/devices/46670aa1-80e2-486d-99f3-bf4154db0d6b,display=on...;;RedHatEnterpriseLinux7/RHEL-147801
521;;;;;;;;;3;"4.Install vgpu driver inside guest:
 Download driver by:
 wget http://10.66.9.237/gpu-testing/vgpu-drivers/nvidia/latest-y/rhel-guest-driver.run
 Install driver by:
 sh rhel-guest-driver.run -s";​​;;RedHatEnterpriseLinux7/RHEL-147801
521;;;;;;;;;4;"4.Configure guest to use display provided by vgpu device and reboot guest:
 #BUSID=`nvidia-xconfig --query-gpu-info | grep BusID | awk '{print $4}'`
 #nvidia-xconfig --busid=$BUSID
 #reboot";​​;;RedHatEnterpriseLinux7/RHEL-147801
521;;;;;;;;;5;"5.Connect guest with vnc:
 #remote-viewer vnc://10.73.130.49:5900";"5.Input ctrl + alt + 2 can switch to vgpu display.
 The display is black before the guest os boot, after guest os boot, display showed successfully, and it fails to show cursor, the issue is tracked by https://bugzilla.redhat.com/show_bug.cgi?id=1620204 .
 
​​";;RedHatEnterpriseLinux7/RHEL-147801
521;;;;;;;;;6;"6.Connect guest with spice:
 #remote-viewer spice://10.73.130.49:5901";"6.Show two displays and display 2 is the vgpu display.
 The display is black before the guest os boot, after guest os boot, display showed successfully, and it fails to show cursor, the issue is tracked by https://bugzilla.redhat.com/show_bug.cgi?id=1620204 
​​";;RedHatEnterpriseLinux7/RHEL-147801
522;RHEL-147802;Enable mdev device display with none type video for intel vgpu - 1564153;Enable mdev device display with none type video for intel vgpu;Yan Fu (yafu);High;Positive;Manual Only;;1;" 1.Add '/dev/dri/renderD128' in cgroup_device_acl in qemu.conf and restart libvirtd service:
 #cat /etc/libvirt/qemu.conf
 cgroup_device_acl = [
     ""/dev/null"", ""/dev/full"", ""/dev/zero"",
     ""/dev/random"", ""/dev/urandom"",
     ""/dev/ptmx"", ""/dev/kvm"", ""/dev/kqemu"",
     ""/dev/rtc"",""/dev/hpet"", ""/dev/sev"",
     ""/dev/dri/renderD128""
 ]

 #systemctl restart libvirtd

 # pidof libvirtd
 21068";​​;Test Case;RedHatEnterpriseLinux7/RHEL-147802
522;;;;;;;;;2;"2.Define a guest which is enable mdev device display with none type video:
 <graphics type='egl-headless'/>
     <hostdev mode='subsystem' type='mdev' managed='no' model='vfio-pci' display='on'>
       <source>
         <address uuid='d5b66366-625c-4632-ab15-6ef3a54666a8'/>
       </source>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>
     </hostdev>
  <graphics type='vnc' autoport='yes' listen='0.0.0.0' keymap='en-us'>
       <listen type='address' address='0.0.0.0'/>
     </graphics>
     <graphics type='spice' autoport='yes' listen='0.0.0.0' keymap='en-us'>
       <listen type='address' address='0.0.0.0'/>
     </graphics>
    <video>
       <model type='none'/>
     </video> ";​​;;RedHatEnterpriseLinux7/RHEL-147802
522;;;;;;;;;3;"(Must skip this step if bug#1628892 fixed):
 3.Change '/dev/dri/renderD128' owner and group to 'qemu:qemu""
 
 #chown qemu:qemu /dev/dri/renderD128";​​;;RedHatEnterpriseLinux7/RHEL-147802
522;;;;;;;;;4;"4.Start the guest:
 # virsh start rhel7.6";4.Domain rhel7.6 started;;RedHatEnterpriseLinux7/RHEL-147802
522;;;;;;;;;5;"5.Check qemu cmd line:
 #ps aux | grep -i qemu";5.-vnc 0.0.0.0:0 -spice port=5901,addr=0.0.0.0,disable-ticketing,image-compression=off,seamless-migration=on -display egl-headless...-device vfio-pci,id=hostdev0,sysfsdev=/sys/bus/mdev/devices/ec74c7a0-411a-4c46-9c16-eedaca20d867,display=on,bus=pci.0,addr=0xb;;RedHatEnterpriseLinux7/RHEL-147802
522;;;;;;;;;6;"6.Check the video device in qemu cmd line:
 #ps aux | grep -i video | grep -v grep
​​";"6.No other video device in qemu line.
​​";;RedHatEnterpriseLinux7/RHEL-147802
522;;;;;;;;;7;"7.Connect guest with vnc:
 #remote-viewer vnc://10.73.130.49:5900";7.Show one display successfully.;;RedHatEnterpriseLinux7/RHEL-147802
522;;;;;;;;;8;"8.Connect guest with spice:
 #remote-viewer spice://10.73.130.49:5901";8.Show one display successfully.;;RedHatEnterpriseLinux7/RHEL-147802
523;RHEL-147803;Enable mdev device display with none type video for nvidia vgpu -1475770;"Enable mdev device display with none type video for nvidia vgpu
 
";Yan Fu (yafu);High;Positive;Manual Only;;1;" 1.Start a guest with vgpu and display=on option added to vgpu device, using none type video:
 #virsh dumpxml iommu1 
  <graphics type='vnc' port='5900' autoport='yes' listen='0.0.0.0' keymap='en-us'>
       <listen type='address' address='0.0.0.0'/>
     </graphics>
     <graphics type='spice' port='5901' autoport='yes' listen='0.0.0.0' keymap='en-us'>
       <listen type='address' address='0.0.0.0'/>
     </graphics>
 <hostdev mode='subsystem' type='mdev' managed='no' model='vfio-pci' display='on'>
       <source>
         <address uuid='46670aa1-80e2-486d-99f3-bf4154db0d6b'/>
       </source>
       <alias name='ua-0febf033-9953-40e1-b803-2df42b0bac4e'/>
       <address type='pci' domain='0x0000' bus='0x07' slot='0x00' function='0x0'/>
     </hostdev>
     <video>
       <model type='none'/>
     </video>";​​;Test Case;RedHatEnterpriseLinux7/RHEL-147803
523;;;;;;;;;2;"2.Check the qemu cmd line for display opiton of mdev device:
 #ps aux | grep -i mdev";...-device vfio-pci,id=ua-0febf033-9953-40e1-b803-2df42b0bac4e,sysfsdev=/sys/bus/mdev/devices/46670aa1-80e2-486d-99f3-bf4154db0d6b,display=on...;;RedHatEnterpriseLinux7/RHEL-147803
523;;;;;;;;;3;"3.Check the video device in qemu cmd line:
 #ps aux | grep -i video
​​";"3.No other video device in  qemu cmd line
​​";;RedHatEnterpriseLinux7/RHEL-147803
523;;;;;;;;;4;"4.Install vgpu driver inside guest:
 Download driver by:
 wget http://10.66.9.237/gpu-testing/vgpu-drivers/nvidia/latest-y/rhel-guest-driver.run
 Install driver by:
 sh rhel-guest-driver.run -s";​​;;RedHatEnterpriseLinux7/RHEL-147803
523;;;;;;;;;5;"5.Configure guest to use display provided by vgpu device and reboot guest:
 #BUSID=`nvidia-xconfig --query-gpu-info | grep BusID | awk '{print $4}'`
 #nvidia-xconfig --busid=$BUSID
 #reboot";​​;;RedHatEnterpriseLinux7/RHEL-147803
523;;;;;;;;;6;"6.Connect guest with vnc:
 #remote-viewer vnc://10.73.130.49:5900";6.The display is black before the guest os boot, after guest os boot, display showed successfully, and it fails to show cursor, the issue is tracked by https://bugzilla.redhat.com/show_bug.cgi?id=1620204.;;RedHatEnterpriseLinux7/RHEL-147803
523;;;;;;;;;7;"7.Connect guest with spice:
 #remote-viewer spice://10.73.130.49:5901";7.Show one display, the display is black before the guest os boot, after guest os boot, display showed successfully, and it fails to show cursor, the issue is tracked by https://bugzilla.redhat.com/show_bug.cgi?id=1620204;;RedHatEnterpriseLinux7/RHEL-147803
524;RHEL-148251;[video devices][none]Edit guest with 'none' type video and other type video at the same time;Edit guest with 'none' type video and other type video at the same time.;Yan Fu (yafu);Low;Positive;Not Automated;;1;"1.Edit guest with 'none' type video and other type video at the same time:
 #virsh edit 76
 <video>
       <model type='virtio' heads='1' primary='yes'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </video>
     <video>
       <model type='none'/>
     </video>";" 1.Failed to save xml:
 error: unsupported configuration: a 'none' video type must be the only video device defined for the domain
 Failed. Try again? [y,n,i,f,?]:";Test Case;RedHatEnterpriseLinux7/RHEL-148251
525;RHEL-148404;; ;Yu Wang (wyu);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-148404
526;RHEL-148624;[Migration][--tls] Enable qemu native TLS encryption for unmanaged direct migration - don't verify client - inconsistent CN and server hostname;"Client will validate server's cert by default. When the CN in sever certificate and server hostname are not same, client should report cert verification error.
 Bug 1503658 - (CVE-2017-1000256) CVE-2017-1000256 libvirt: TLS certificate verification disabled for clients";Fangge Jin (fjin);High;Negative;Not Automated;;1;" On server(target host), don't enable verify peer:
* #vi /etc/libvirt/qemu.conf
# default_tls_x509_verify = 1
 # migrate_tls_x509_verify = 1";​​;Test Case;RedHatEnterpriseLinux7/RHEL-148624
526;;;;;;;;;2;"On client(source host), don't enable verify peer(client will verify server cert by default): 
* #vi /etc/libvirt/qemu.conf
# default_tls_x509_verify = 1
 # migrate_tls_x509_verify = 1";​​;;RedHatEnterpriseLinux7/RHEL-148624
526;;;;;;;;;3; on client (source host), define a guest and start;​​;;RedHatEnterpriseLinux7/RHEL-148624
526;;;;;;;;;4;"on client (source host), do live migration with --tls:
 
* # virsh migrate --live rhel7 qemu+ssh://ibm-x3250m6-04.lab.eng.pek2.redhat.com/system --verbose --tls
";Migration fails. And cert validation fails.;;RedHatEnterpriseLinux7/RHEL-148624
527;RHEL-148893;IDM-SSSD-TC: krb_provider: kcm: Ensure kcm socket is active in rhel8 and verify existence of socket file;Ensure kcm socket is active in rhel8 and verify existence of socket file;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1; Verify the status of sssd-kcm.socket;" Service should be active.
​​";Test Case;RedHatEnterpriseLinux7/RHEL-148893
527;;;;;;;;;2;Verify the existence of /var/run/.heim_org.h5l.kcm-socket file;"File should exist.
​​";;RedHatEnterpriseLinux7/RHEL-148893
528;RHEL-148894;IDM-SSSD-TC: krb_provider: kcm: Ensure sssd-kcm service is disabled by default in rhel8;Ensure sssd-kcm service is disabled by default in rhel8;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1; Verify the status of sssd-kcm service;" Service to be disabled by default in rhel8.0
​​";Test Case;RedHatEnterpriseLinux7/RHEL-148894
529;RHEL-148895;IDM-SSSD-TC: krb_provider: kcm: Confirm the existence of kcm_default_ccache file in rhel8;Confirm the existence of kcm_default_ccache file in rhel8;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;1; Verify file /etc/krb5.conf.d/kcm_default_ccache;" File should exist.
​​";Test Case;RedHatEnterpriseLinux7/RHEL-148895
530;RHEL-148896;IDM-SSSD-TC: krb_provider: kcm: Verify KCM default behavior in rhel8;Verify KCM default behavior in rhel8;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;1;" Configure and restart SSSD service.
​​";" Successful status for SSSD service.
​​";Test Case;RedHatEnterpriseLinux7/RHEL-148896
530;;;;;;;;;2;"Execute user login
​​";"User auth should work with valid kcm ticket.
​​";;RedHatEnterpriseLinux7/RHEL-148896
531;RHEL-148897;IDM-SSSD-TC: krb_provider: kcm: Comment default_ccache_name KCM in kcm_default_ccache file and verify cached krb ticket;Comment default_ccache_name = KCM in kcm_default_ccache file and verify cached krb ticket;Amith Kumar Peethambaran (apeetham);High;Negative;Automated;;1; Edit /etc/krb5.conf.d/kcm_default_ccache file and comment the default_ccache_name setting.;​​;Test Case;RedHatEnterpriseLinux7/RHEL-148897
531;;;;;;;;;2;"Keep krb5.conf settings default and Execute user login.
​​";"User login should succeed with valid KCM krb ticket.
​​";;RedHatEnterpriseLinux7/RHEL-148897
532;RHEL-148898;IDM-SSSD-TC: krb_provider: kcm: SSSD service restart forces the change in cached krb ticket type;SSSD service restart forces the change in cached krb ticket type;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;" Comment out ccache setting in krb5.conf.d/kcm_ccache file.
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-148898
532;;;;;;;;;2;"Ensure default KEYRING setting in krb5.conf file
​​";​​;;RedHatEnterpriseLinux7/RHEL-148898
532;;;;;;;;;3;"Restart SSSD service
​​";"SSSD service should run fine.
​​";;RedHatEnterpriseLinux7/RHEL-148898
532;;;;;;;;;4;"Execute user login and verify krb ticket
​​";"A valid KEYRING krb ticket.
​​";;RedHatEnterpriseLinux7/RHEL-148898
533;RHEL-148899;IDM-SSSD-TC: krb_provider: kcm: Set kcm socket_path and verify user auth;Set kcm socket_path and verify user auth;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;" Set socket_path in sssd.conf file.
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-148899
533;;;;;;;;;2;"Restart sssd service, sssd-kcm, and sssd-kcm.socket services
​​";"Services should run fine.
​​";;RedHatEnterpriseLinux7/RHEL-148899
533;;;;;;;;;3;"Execute user auth
​​";"User auth should work fine.
​​";;RedHatEnterpriseLinux7/RHEL-148899
534;RHEL-148900;IDM-SSSD-TC: krb_provider: kcm: Set kcm_socket in krb5.conf to non-default location;Set kcm_socket in krb5.conf to non-default location;Amith Kumar Peethambaran (apeetham);Medium;Positive;Manual Only;;1;" Set kcm_socket in krb5.conf file
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-148900
534;;;;;;;;;2;"Restart sssd service, sssd-kcm service, sssd-kcm.socket service
​​";​​;;RedHatEnterpriseLinux7/RHEL-148900
534;;;;;;;;;3;"Verify the status of sssd-kcm.socket service.
​​";"Socket still listens on default file /var/run/.heim_org.h5l.kcm-socket
​​";;RedHatEnterpriseLinux7/RHEL-148900
535;RHEL-148901;IDM-SSSD-TC: krb_provider: kcm: Set kcm_socket in krb5.conf and verify user auth;Set kcm_socket in krb5.conf and verify user auth;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;  Set kcm_socket in krb5.conf file;​​;Test Case;RedHatEnterpriseLinux7/RHEL-148901
535;;;;;;;;;2;Restart sssd service, sssd-kcm service, sssd-kcm.socket service;​​;;RedHatEnterpriseLinux7/RHEL-148901
535;;;;;;;;;3;"Execute user login and verify the behavior
​​";"User authentication should fail
​​";;RedHatEnterpriseLinux7/RHEL-148901
536;RHEL-149051;[Migration][event] Check event during postcopy live migration - migration succeeds - test with qemu-kvm-rhev;"Check events during postcopy live migration
Bug 1647365 - VIR_DOMAIN_EVENT_SUSPENDED_POSTCOPY is never used in postcopy migration";Fangge Jin (fjin);Critical;Positive;Not Automated;;1; Start guest on source host;​​;Test Case;RedHatEnterpriseLinux7/RHEL-149051
536;;;;;;;;;2;"Monitor the domain events on both source and target hosts:
 
* # virsh event  --all --loop
";​​;;RedHatEnterpriseLinux7/RHEL-149051
536;;;;;;;;;3;"Set migration speed to a low value, or add stress inside guest(so we have enough time to switch to postcopy mode before migration completes):
 
* # virsh migrate-setspeed $guest_name 1
";​​;;RedHatEnterpriseLinux7/RHEL-149051
536;;;;;;;;;4;"Do live migration in postcopy enable mode, and switch to postcopy before migration completes: 
* Terminal 1 # virsh migrate $guest_name --live qemu+ssh://target_ip/system --verbose --postcopy
* Terminal 2 # virsh migrate-postcopy $guest_name
Notes:
 
* --postcopy enables postcopy, ""migrate-postcopy"" switch migration to postcopy mode actually
  * 
";Migration succeeds;;RedHatEnterpriseLinux7/RHEL-149051
536;;;;;;;;;5;Check the domain events output on source host;"There are domain lifecycle events about migration.

 2018-12-12 07:11:21.055+0000: event 'migration-iteration' for domain avocado-vt-vm1: iteration: '1'
 2018-12-12 07:11:29.566+0000: event 'lifecycle' for domain avocado-vt-vm1: Suspended Migrated
 2018-12-12 07:11:29.569+0000: event 'lifecycle' for domain avocado-vt-vm1: Suspended Post-copy
 2018-12-12 07:11:29.571+0000: event 'migration-iteration' for domain avocado-vt-vm1: iteration: '2'
 2018-12-12 07:11:33.973+0000: event 'lifecycle' for domain avocado-vt-vm1: Stopped Migrated
 2018-12-12 07:11:33.973+0000: event 'job-completed' for domain avocado-vt-vm1:
 operation: 5
 time_elapsed: 12879
 time_elapsed_net: 12876
 downtime: 499
 downtime_net: 496
 setup_time: 6
 data_total: 537665536
 data_processed: 384781923
 data_remaining: 0
 memory_total: 537665536
 memory_processed: 384781923
 memory_remaining: 0
 memory_bps: 30296049
 memory_constant: 37593
 memory_normal: 93675
 memory_normal_bytes: 383692800
 memory_dirty_rate: 0
 memory_iteration: 2
 memory_page_size: 4096
 disk_total: 0
 disk_processed: 0
 disk_remaining: 0  
";;RedHatEnterpriseLinux7/RHEL-149051
536;;;;;;;;;6;Check the domain events output on target host;"There are domain lifecycle events about migration.
 2018-12-12 07:11:21.016+0000: event 'agent-lifecycle' for domain avocado-vt-vm1: state: 'disconnected' reason: 'domain started'
 2018-12-12 07:11:21.033+0000: event 'lifecycle' for domain avocado-vt-vm1: Started Migrated
 2018-12-12 07:11:29.580+0000: event 'lifecycle' for domain avocado-vt-vm1: Suspended Post-copy
 2018-12-12 07:11:29.982+0000: event 'agent-lifecycle' for domain avocado-vt-vm1: state: 'disconnected' reason: 'channel event'
 2018-12-12 07:11:29.987+0000: event 'lifecycle' for domain avocado-vt-vm1: Resumed Post-copy
 2018-12-12 07:11:33.758+0000: event 'lifecycle' for domain avocado-vt-vm1: Resumed Migrated
 2018-12-12 07:11:33.768+0000: event 'agent-lifecycle' for domain avocado-vt-vm1: state: 'connected' reason: 'channel event'
";;RedHatEnterpriseLinux7/RHEL-149051
537;RHEL-149061;[driver][multiqueue] Test multiqueue in virtio-net for network type interface using host bridge;check the value of 'queues', kernel supports up to 1~256 now. define, start, migrate and hotplug with multiqueue. check 'mq=on' and 'vectors=2N+2' in qemu command line.;Yalan Zhang (yalzhang);High;Positive;Manual Only;;1;"**Basic functional testing
 **1. Validate the xml using virt-xml-validate.**
 prepare a vm with bridge type interface and multi-queue enabled as below:
 # virsh dumpxml rhel | grep /interface -B7
     <interface type='bridge'>
       <mac address='52:54:00:57:6d:b0'/>
       <source bridge='br0'/>
       <model type='virtio'/>
       <driver name='vhost' queues='4'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
     </interface>

 validate the xml
 # virsh dumpxml rhel > rhel.xml
 # virt-xml-validate rhel.xml
 rhel.xml validates";"xml validates successfully.
";Test Case;RedHatEnterpriseLinux7/RHEL-149061
537;;;;;;;;;2;"2. start the domain with above xml. (we would find the ""mq=on"" and ""vectors= 2N+2"" to control the multi-queue enabled from the qemu-kvm commandline.)
 # virsh start rhel
 Domain rhel started

 # virsh dumpxml rhel | grep /interface -B8
     <interface type='bridge'>
       <mac address='52:54:00:57:6d:b0'/>
       <source bridge='br0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <driver name='vhost' queues='4'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
     </interface>

 check the qemu command line after guest start
 # ps aux | grep qemu-kvm |grep -v grep| sed 's/-device/\n-device/g' | grep ""virtio-net-pci""";"2.After step 2, ""mq=on"" in qemu-kvm commandline.

 output:
 -device virtio-net-pci,mq=on,vectors=10,netdev=hostnet0,id=net0,mac=52:54:00:57:6d:b0,bus=pci.0,addr=0x8 -chardev pty,id=charserial0
";;RedHatEnterpriseLinux7/RHEL-149061
537;;;;;;;;;3;"3. Enable multiqueue in guest
 # virsh console r7
 Connected to domain r7
 Escape character is ^]
 Red Hat Enterprise Linux Server 7.0 (Maipo)
 Kernel 3.10.0-123.el7.x86_64 on an x86_64
 oolong login: root
 Password:
 Last login: Fri May 9 16:01:02 on ttyS0

 # ethtool -l eth0
 Channel parameters for eth0:
 Pre-set maximums:
 RX: 0
 TX: 0
 Other: 0
 Combined: 4
 Current hardware settings:
 RX: 0
 TX: 0
 Other: 0
 Combined: 1

 # ethtool -L eth0 combined 4

 check again:
 # ethtool -l eth0";"3. After step 3, the interface should be in guest and work well.
 # ethtool -l eth0
 Channel parameters for eth0:
 Pre-set maximums:
 RX: 0
 TX: 0
 Other: 0
 Combined: 4
 Current hardware settings:
 RX: 0
 TX: 0
 Other: 0
 Combined: 4";;RedHatEnterpriseLinux7/RHEL-149061
537;;;;;;;;;4;"4.Remove queues element from xml, we did not see the ""mq=on"" any more in the commandline.

 [root@xuzhangtest1 ~]# ps aux | grep rhel | sed 's/-device/\n-device/g' | grep -v grep | grep virtio-net-pci
";"4. After step 4, not see ""mq=on"" any more in the qemu-kvm commandline.

 output:
 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:54:00:b4:da:5e,
 bus=pci.0,addr=0x3 -chardev pty,id=charserial0";;RedHatEnterpriseLinux7/RHEL-149061
538;RHEL-149070;Test RHEL guest is mitigated from CVE issues;Use beaker CVE sanity job to check RHEL guest is mitigated from CVE issues.;Zhiyi Guo (zhguo);Medium;Positive;Automated;;1;"Clone the job:
 https://beaker.engineering.redhat.com/jobs/clone?job_id=2689095
 And change the parameters regarding to your RHEL release.
 parameters need to change including:
 repos
 kernel version
 tree
 distroRequires
 
 run this job and analyze the job result";"Job result should be all pass.
 If some tasks are failed due to selinux issue, this is acceptable.";Test Case;RedHatEnterpriseLinux7/RHEL-149070
539;RHEL-149077;[virtual desktop]usage of qemu-keymap utility;simple usage of tool qemu-keymap;Zhiyi Guo (zhguo);;Positive;Manual Only;;1;"Try to execute the help command of qemu-keymap:
 #qemu-keymap -h";"qemu-keymap can be executed and return help information like:
 This tool generates qemu reverse keymaps from xkb keymaps,
 which can be used with the qemu ""-k"" command line switch.
 
 
 usage: qemu-keymap <options>
 options:
     -h             print this text
     -f <file>      set output file          (default: stdout)
     -m <model>     set kbd model            (default: pc105)
     -l <layout>    set kbd layout           (default: us)
     -v <variant>   set kbd variant          (default: -)
     -o <options>   set kbd options          (default: -)";Test Case;RedHatEnterpriseLinux7/RHEL-149077
539;;;;;;;;;2;"Execute command:
 # qemu-keymap -l jp";Can get some outputs;;RedHatEnterpriseLinux7/RHEL-149077
540;RHEL-149083;[vgpu]vfio display default option is off;vfio display default option is off;Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;1;"create any kind of vgpu device, eg:
 echo 1d0b5cd3-def8-4619-9947-916d33da5e93 > /sys/class/mdev_bus/0000\:00\:02.0/mdev_supported_types/i915-GVTg_V5_4/create
"; vGPU device create successfully. No call trace happen to host kernel;Test Case;RedHatEnterpriseLinux7/RHEL-149083
540;;;;;;;;;2;"launch qemu with this vgpu device and query the display option value:
 (qemu) info qtree
";"The default value of display is off:
 ...
       dev: vfio-pci, id """"
         host = ""ffff:ff:ff.f""
         sysfsdev = ""/sys/bus/mdev/devices/1d0b5cd3-def8-4619-9947-916d33da5e93""
         display = ""off""
 ...";;RedHatEnterpriseLinux7/RHEL-149083
541;RHEL-149092;"Verify ""info cpus"" won't cause vcpus stopped";"Verify ""info cpus"" won't cause vcpus stopped";Zhiyi Guo (zhguo);High;Positive;Manual Only;;1;"apply the delay code to qemu upstream tag 2.10 and compile the qemu:
 static int kvm_put_vcpu_events(X86CPU *cpu, int level)
 ....
     if (level >= KVM_PUT_RESET_STATE) {
         events.flags |= KVM_VCPUEVENT_VALID_NMI_PENDING;
         if (env->mp_state == KVM_MP_STATE_SIPI_RECEIVED) {
             events.flags |= KVM_VCPUEVENT_VALID_SIPI_VECTOR;
         }
     }
     if (cpu->socket_id == 1) sleep(5); // delay call for vCPU2
     return kvm_vcpu_ioctl(CPU(cpu), KVM_SET_VCPU_EVENTS, &events);
 } ";​​;Test Case;RedHatEnterpriseLinux7/RHEL-149092
541;;;;;;;;;2;"Run the qemu cli:
 ./x86_64-softmmu/qemu-system-x86_64 -enable-kvm -m 1g -smp 4 -monitor tcp::1234,server -chardev stdio,id=seabios -device isa-debugcon,iobase=0x402,chardev=seabios";​​;;RedHatEnterpriseLinux7/RHEL-149092
541;;;;;;;;;3;"Execute ""info cpus"" for 10 times:
 # telnet 127.0.0.1 1234
 Trying 127.0.0.1...
 Connected to 127.0.0.1.
 Escape character is '^]'.
 QEMU 2.10.0 monitor - type 'help' for more information
 (qemu) info cpus";"After 10th ""info cpus"", the output should like below:
 info cpus
 * CPU #0: pc=0x00000000000fc30f (halted) thread_id=2185
   CPU #1: pc=0x00000000000fd406 (halted) thread_id=2186
   CPU #2: pc=0x00000000000fd406 (halted) thread_id=2187
   CPU #3: pc=0x00000000000fd406 (halted) thread_id=2188
";;RedHatEnterpriseLinux7/RHEL-149092
542;RHEL-149785;[Migration] Migrate vm with cpu mode=host-model;Migrate vm with cpu mode=host-model;Fangge Jin (fjin);Critical;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-149785
543;RHEL-149786;[Migration] Cross migration with cpu mode=host-model;Cross migration with cpu mode=host-model;Fangge Jin (fjin);Critical;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL-149786
544;RHEL-149797;check guest status with nwfilter when restart libvirtd with access driver enabled - bug 1631622;Bug 1631622 - guest with an interface referred to nwfilter killed by libvirt when restart libvirtd with access driver enabled;Yalan Zhang (yalzhang);;Positive;Not Automated;;1;"1. Enable 'polkit' as the Access control driver 
        #vim /etc/libvirt/libvirtd.conf
        access_drivers = [ ""polkit"" ] 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL-149797
544;;;;;;;;;2;"2.Granted local user permission to connect to libvirt in full read-write mode
        #vi /etc/libvirt/libvirtd.conf 
        unix_sock_rw_perms = ""0777""
        auth_unix_rw = ""none""
​​";​​;;RedHatEnterpriseLinux7/RHEL-149797
544;;;;;;;;;3;"3.Restart libvirtd:
        # systemctl restart libvirtd";​​;;RedHatEnterpriseLinux7/RHEL-149797
544;;;;;;;;;4;"4. start the vm with nwfilter;
        # virsh dumpxml rhel | grep /interface -B6
           <interface type='network'>
             <mac address='52:54:00:35:69:17'/>
             <source network='default'/>
             <model type='virtio'/>
             <filterref filter='clean-traffic'/>
             <address type='pci' domain='0x0000' bus='0x01' slot='0x00' function='0x0'/>
           </interface>
        # virsh start rhel
        Domain rhel started";​​;;RedHatEnterpriseLinux7/RHEL-149797
544;;;;;;;;;5;"3. Restart libvirtd and check the guest is still running and healthy.
        # virsh list
        Id    Name                           State
        ----------------------------------------------------
        1     rhel                           running
        # systemctl restart libvirtd
        # virsh list
​​";"Id    Name                           State
        ----------------------------------------------------
        1     rhel                           running";;RedHatEnterpriseLinux7/RHEL-149797
544;;;;;;;;;6;"1. disable polkit and restart libvirtd;
​​";​​;;RedHatEnterpriseLinux7/RHEL-149797
544;;;;;;;;;7;"2. start vm;
 # virsh start rhel
 Domain rhel started
 # virsh dumpxml rhel | grep /interface -B8
    <interface type='network'>
      <mac address='52:54:00:35:69:17'/>
      <source network='default' bridge='virbr0'/>
      <target dev='vnet0'/>
      <model type='virtio'/>
      <filterref filter='clean-traffic'/>
      <alias name='net0'/>
      <address type='pci' domain='0x0000' bus='0x01' slot='0x00' function='0x0'/>
    </interface>";​​;;RedHatEnterpriseLinux7/RHEL-149797
544;;;;;;;;;8;"3. enable polkit and restart libvirtd;
 edit the libvirt.conf to enable the polkit
 access_drivers = [ ""polkit"" ]
 unix_sock_rw_perms = ""0777""
 auth_unix_rw = ""none""";​​;;RedHatEnterpriseLinux7/RHEL-149797
544;;;;;;;;;9;"4. restart libvirtd and check vm status
 # systemctl restart libvirtd; virsh list
 Id    Name                           State
 ----------------------------------------------------
 1     rhel                           running
​​";guest still running and check libvirtd.log, no errors.;;RedHatEnterpriseLinux7/RHEL-149797
545;RHEL-149817;[svirt][selinux][device]svirt test with 'block' type disk device when enable qemu namespace;svirt test with 'block' type disk device when enable qemu namespace.;Yan Fu (yafu);Critical;Positive;Not Automated;;1;"  1.Enable qemu namespace in the qemu.conf and restart libvirtd(skip this testcase before rhel7.4, since qemu namespace only enabled after rhel7.4):
 #vim /etc/libvirtd/qemu.conf
 namespaces = [  ""mount""  ]
 #systemctl restart libvirtd";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL-149817
545;;;;;;;;;2;"2.Define a guest with block disk having seclabel setting:
 #virsh edit vm
 ...
 <disk type='block' device='disk'>
 <driver name='qemu' type='raw'/>
 <source dev='/dev/disk/by-path/ip-10.66.71.67:3260-iscsi-iqn.2016-03.com.virttest1:logical-pool.target-lun-0'>
    <seclabel model='selinux' relabel='yes'>
           <label>system_u:object_r:svirt_image_t:s0</label>
      </seclabel>
 </source>
 <target dev='vdb' bus='virtio'/>
 <alias name='virtio-disk1'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
 </disk>
 ...";brw-rw----. root root system_u:object_r:fixed_disk_device_t:s0 /dev/sdb;;RedHatEnterpriseLinux7/RHEL-149817
545;;;;;;;;;3;"4.Start the guest and check the selinux context of the disk device:
 #virsh start vm";"4.Check the disk lable in the qemu namespace:
 #nsenter -t  `pgrep qemu-kvm`  -m -- ls -l /dev/sdb -Z
 brw-rw----. qemu qemu system_u:object_r:svirt_image_t:s0 /dev/sdb
​​";;RedHatEnterpriseLinux7/RHEL-149817
545;;;;;;;;;4;"5.Destroy the guest and check the selinux context of the disk device:
 #virsh destroy vm";"5.Check the disk label:
 #ll -Z /dev/sdb
 brw-rw----. root root system_u:object_r:fixed_disk_device_t:s0 /dev/sdb
​​";;RedHatEnterpriseLinux7/RHEL-149817
546;RHEL-150061;[Migration][domjobinfo] Query domain job info during and after live migration - persistent domain - postcopy;N/A;Fangge Jin (fjin);Critical;Positive;Not Automated;;1;Define and start guest on source host;​​;Test Case;RedHatEnterpriseLinux7/RHEL-150061
546;;;;;;;;;2;"Add stress inside guest, so we have enough time to do the following operations before migration completes.
 
* # stress --cpu 8 --io 4 --vm 8 --vm-bytes 128M
";​​;;RedHatEnterpriseLinux7/RHEL-150061
546;;;;;;;;;3;"Do postcopy migration: 
* Do live migration with postcopy enabled:
    * 
  * # virsh migrate --live rhel qemu+ssh://$target_ip/system --verbose --postcopy
    * 
* Switch to postcopy before migration completes:
    * 
  * # virsh migrate-postcopy rhel
  * 
    * 
* Check the domain state and reason, it should be paused(post-copy)
* 
  * 
* # virsh domstate rhel --reason
  * 
paused (post-copy)

​​";​​;;RedHatEnterpriseLinux7/RHEL-150061
546;;;;;;;;;4;"During migration, on source do:
 
* #virsh domjobinfo rhel
";"The output includes the following items.

 Output:
 Job type:         Unbounded   
 Operation:        Outgoing migration
 Time elapsed:     17008        ms
 Data processed:   668.149 MiB
 Data remaining:   334.016 MiB
 Data total:       1008.820 MiB
 Memory processed: 668.149 MiB
 Memory remaining: 334.016 MiB
 Memory total:     1008.820 MiB
 Memory bandwidth: 40.000 MiB/s
 Dirty rate:       426119       pages/s
 Page size:        4096         bytes
 Iteration:        1           
 Constant pages:   2042        
 Normal pages:     170708      
 Normal data:      666.828 MiB
 Expected downtime: 300          ms
 Setup time:       26           ms";;RedHatEnterpriseLinux7/RHEL-150061
546;;;;;;;;;5;"During migration, on target, do:
 
* # virsh domjobinfo rhel 
";"Output:
 error: Operation not supported: migration statistics are available only on the source host";;RedHatEnterpriseLinux7/RHEL-150061
546;;;;;;;;;6;"After migrate complete,do domjobinfo on source again
 
* # virsh domjobinfo rhel --completed

";"The output includes the following items and:
* The total time and downtime is reasonable.
* Memory remaining is 0

 Output:
 Job type:         Completed   
 Operation:        Outgoing migration
 Time elapsed:     76068        ms
 Time elapsed w/o network: 76064        ms
 Data processed:   2.954 GiB
 Data remaining:   0.000 B
 Data total:       1008.820 MiB
 Memory processed: 2.954 GiB
 Memory remaining: 0.000 B
 Memory total:     1008.820 MiB
 Memory bandwidth: 40.064 MiB/s
 Dirty rate:       0            pages/s
 Page size:        4096         bytes
 Iteration:        68          
 Constant pages:   7739        
 Normal pages:     772738      
 Normal data:      2.948 GiB
 Total downtime:   260          ms
 Downtime w/o network: 256          ms
 Setup time:       26           ms";;RedHatEnterpriseLinux7/RHEL-150061
546;;;;;;;;;7;"After migration, do domjobinfo  on target :
 
* # virsh domjobinfo rhel --completed

";"Output for postcopy(domjobinfo is not available on target host for postcopy):
 Job type:         None
";;RedHatEnterpriseLinux7/RHEL-150061
547;RHEL-150062;[Migration] [domstate --reason] Check domain state during live migration - postcopy;N/A;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;Define and start a guest on source host.; ;Test Case;RedHatEnterpriseLinux7/RHEL-150062
547;;;;;;;;;2;"Add stress inside guest, so we have enough time to do the following operations before migration completes.
 
* # stress --cpu 8 --io 4 --vm 8 --vm-bytes 128M
";​​;;RedHatEnterpriseLinux7/RHEL-150062
547;;;;;;;;;3;"Watch the domain state on both source and target host:
 
* # watch -n 1 virsh domstate rhel --reason
";​​;;RedHatEnterpriseLinux7/RHEL-150062
547;;;;;;;;;4;"Do postcopy migration with postcopy enabled:
 
* # virsh migrate --live rhel qemu+ssh://$target_ip/system --verbose --postcopy
";​​;;RedHatEnterpriseLinux7/RHEL-150062
547;;;;;;;;;5;Check the output of domstate on source and target;"On source:
 running (migrated)

 On target:
 paused (migrating)";;RedHatEnterpriseLinux7/RHEL-150062
547;;;;;;;;;6;"Switch to postcopy mode:
 
* # virsh migrate-postcopy rhel
";​​;;RedHatEnterpriseLinux7/RHEL-150062
547;;;;;;;;;7;Check the output of domstate on source and target;"On source:
 paused (post-copy)

 On target:
 running (post-copy)";;RedHatEnterpriseLinux7/RHEL-150062
547;;;;;;;;;8;After migration completes, check the output of domstate on source and target again;"On source:
 shut off (migrated)
 
 On target:
 running (migrated)";;RedHatEnterpriseLinux7/RHEL-150062
548;RHEL7-12072;[Hyper-V][Memory]Balloon deflation: assigned memory increase;Verify assigned memory can be increased to Startup RAM by balloon deflate;Yaju Cao (yacao);High;Positive;Not Automated;467699;1;"1. Set the RHEL guestA Maximum RAM > Startup RAM. For example, Startup RAM
 = 4096MB, Maximum RAM = 8192MB
 2. Add a udev rule in /etc/udev/rules.d, named like ""99-hv-balloon.rules"",
 and vi it add:
 SUBSYSTEM==""memory"", ACTION==""add"", ATTR{state}=""online""

 3.  Start up another guestB with large memory to make guestA Balloon (Assigned memory goes down) ,
 (Or Do nothing in guestA, and wait for about 6-7 minutes, it can also trigger the balloon, and wait for more time to make the assigned memory go to smaller again)

 4. Shutdown the guestB.";"After step3, the Assigned Memory of the guestA memory can reach to the Startup
 RAM.
 The guest works well without kernel panic.There is no call trace info in the
 /var/log/messages .

 If get the Call trace: order as 9, this is work as design.
 e.g.
 kworker/0:2: page allocation failure: order:9, mode:0x84d0

";Test Case;RedHatEnterpriseLinux7/RHEL7-12072
548;;;;;;;;;2;"5. Give some memory stress to GuestA.
 stress --vm 4 --vm-bytes 1024M --timeout 300s --verbose";​​;;RedHatEnterpriseLinux7/RHEL7-12072
548;;;;;;;;;3;6. Check the Assigned Memory of GuestA via Hyper-V Manager.;​​;;RedHatEnterpriseLinux7/RHEL7-12072
549;RHEL7-12074;[Hyper-V][Memory]Verify load metric is correct after enable dynamic memory - Bug 1065107;Verify load metric is correct after enable dynamic memory;Yaju Cao (yacao);High;Positive;Not Automated;467834;1;1. Install RHEL guest, set CPU with 1 core.;"At step 4, the load average for the past 1minute should display lower than
 1.00. For example, the below load average: 0.02, 0.05, 0.05, the 0.02 value is
 for the past 1minute, the first 0.05 is for the past 5 minutes, the second
 0.05 is for the past 15 minutes.
 top - 18:22:41 up  2:38,  4 users,  load average: 0.02, 0.05, 0.05
 Tasks: 297 total,   2 running, 295 sleeping,   0 stopped,   0 zombie
 %Cpu(s):  0.0 us,  0.3 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
 KiB Mem:   1011296 total,   840408 used,   170888 free,        0 buffers
 KiB Swap:  2129916 total,     2488 used,  2127428 free.   205288 cached Mem";Test Case;RedHatEnterpriseLinux7/RHEL7-12074
549;;;;;;;;;2;2. Shutdown the guest and enable 'Dynamic Memory';​​;;RedHatEnterpriseLinux7/RHEL7-12074
549;;;;;;;;;3;"3. Boot the guest, check load metrics.
 #top";​​;;RedHatEnterpriseLinux7/RHEL7-12074
549;;;;;;;;;4;"4. After about 10 minutes, check load metrics again.(Don't run any other
 tasks in background)
 #top";​​;;RedHatEnterpriseLinux7/RHEL7-12074
550;RHEL7-12076;[Hyper-V][hypervkvpd]Verify host can get the guest OS Version/Name/Processor Architecture/IP with kvp daemon;"Get guest information.
";Yaju Cao (yacao);Medium;Positive;Automated;467833;1;"Login the host and run script as like below:
 http://fileshare.englab.nay.redhat.com/pub/section1/s13rd/scripts/hyperv/kvp_p
 s_scripts/[Hyper-V][kvpguest.ps1](http://fileshare.englab.nay.redhat.com/pub/section1/s
 13rd/scripts/hyperv/kvp_ps_scripts/kvpguest.ps1)
 note:
 if the host is WS hyperv 2012 R2, please modify the ""root\virtualization"" to
 ""root\virtulization\v2""";"
 The guest  Processor Architecture displayed is right.
 The guest OS name displayed is right.
 The guest OS version displayed is right.
 The guest IP(IPv4 and IPv6) displayed is right.
  
";Test Case;RedHatEnterpriseLinux7/RHEL7-12076
551;RHEL7-12077;[Hyper-V][hypervkvpd]Verify host can get the guest OS version with kvp daemon;;Yaju Cao (yacao);Medium;Positive;Automated;467832;1;"Login the host and run script as like below:
  (http://fileshare.englab.nay.redhat.com/pub/section1/s
 13rd/scripts/hyperv/kvp_ps_scripts/kvpguest.ps1)
 note:
 if the host is WS hyperv 2012 R2, please modify the ""root\virtualization"" to
 ""root\virtulization\v2""";"The guest  OS version displayed is right.
";Test Case;RedHatEnterpriseLinux7/RHEL7-12077
552;RHEL7-12078;[Hyper-V][hypervkvpd]Verify host can get the guest IP(IPv4 and IPv6) with kvp daemon;;Yaju Cao (yacao);Critical;Positive;Automated;467831;1;"Login the host and run script as like below:
 (http://fileshare.englab.nay.redhat.com/pub/section1/s
 13rd/scripts/hyperv/kvp_ps_scripts/kvpguest.ps1)
 note:
 if the host is WS hyperv 2012 R2, please modify the ""root\virtualization"" to
 ""root\virtulization\v2""";"The guest  IP(IPv4 and IPv6) displayed is right.
";Test Case;RedHatEnterpriseLinux7/RHEL7-12078
553;RHEL7-12079;[Hyper-V][hypervkvpd]Verify host can get the guest FQDN(Fully Qualified Domain Name) with kvp daemon;Verify host can get the guest FQDN(Fully Qualified Domain Name) via hypervkvpd daemon;Yaju Cao (yacao);Medium;Positive;Not Automated;467830;1;"Login the host and run script as like below:
  (http://fileshare.englab.nay.redhat.com/pub/section1/s
 13rd/scripts/hyperv/kvp_ps_scripts/kvpguest.ps1)
 note:
 if the host is WS hyperv 2012 R2, please modify the ""root\virtualization"" to
 ""root\virtulization\v2""";"The guest  FQDN(Fully Qualified Domain Name) displayed is right.


";Test Case;RedHatEnterpriseLinux7/RHEL7-12079
553;;;;;;;;;2;" If you get the ""getaddrinfo failed: 0xfffffffd Temporary failure in name..."" fro FQDN, 
 please modify guest as below:
 For RHEL 7:
 1) check hostname -f, if no ouput, edit /etc/hostname
 # cat /etc/hostname
 rhel7
 2) add one more line to /etc/hosts, 10.66.xx.xx is VM ip address.
 10.66.xx.xx rhel7.example.com rhel7
 3) check hostname again by ""hostname -F /etc/hostname"", if still cannot get FQDN from host, please reboot VM, then the FQDN will display Domain Name correctly.

 For RHEL 6:
 1) Change hostname by below:
 cat /etc/sysconfig/network
 NETWORKING=yes
 HOSTNAME=rhel6
 2) add one more line to /etc/hosts, 10.66.xx.xx is VM ip address.
 10.66.xx.xx rhel6.example.com rhel6
 3) check host name by 'hostname"" and FQDN by ""hostname -f"". If still cannot get FQDN from host, please reboot VM
";After change guest config, the FQDN could dispay correctly.;;RedHatEnterpriseLinux7/RHEL7-12079
554;RHEL7-12083;[Hyper-V][Network]Check network multiqueue number equals to the number of CPUs (P2);[Hyper-V][Network]Check network multiqueue number equals to the number of CPUs (P2);Yaju Cao (yacao);High;Positive;Not Automated;467872;1;1. Install a guest, set multiple CPUs, and add a pv network adapter.; ;Test Case;RedHatEnterpriseLinux7/RHEL7-12083
554;;;;;;;;;2;"2. Login the guest, check the network queue number by
 # cat /proc/cpuinfo |grep processor
 # ls /sys/class/net/eth0/queues/";"Processor number should be consistent with the assigned virtual CPU number
 [Hyper-V][root@hv001 ~]# cat /proc/cpuinfo |grep processor
 processor       : 0
 processor       : 1
 ...
 
 The queue number should be consistent with the CPU number.
 [Hyper-V][root@hv001 ~]# ls /sys/class/net/eth0/queues/
 rx-0 rx-1 ...  tx-0 tx-1 ...
​​";;RedHatEnterpriseLinux7/RHEL7-12083
555;RHEL7-12084;[Hyper-V][Network]Check network packets could be scaled across CPUs in terms of hyperv interrupts;Get netperf by wget http://fileshare.englab.nay.redhat.com/pub/section1/s13rd/tools/netperf-2.4.5-1.el5.x86_64.rpm.;Yaju Cao (yacao);High;Positive;Not Automated;467873;1;1. Install netperf on two guests.;"At step4 and 6, the CPU interrupts could scale across different CPUs. For
 example, below is a 4 CPU guest, except CPU0, the CPU1/CPU2/CPU3 could both
 handle the network requested interrupts and keep balance.
 # cat /proc/interrupts |grep -i hyperv
 7:      43066    3032850     888487    7456236   IO-APIC-(null)    hyperv
 or Hypervisor callback interrupts.";Test Case;RedHatEnterpriseLinux7/RHEL7-12084
555;;;;;;;;;2;"2. Set your test guest as server, make sure there is more than more CPU in
 this guest, for example, set 4 CPU
 #netserver 

 if cannot setart netserver, please use pkill netserver

";​​;;RedHatEnterpriseLinux7/RHEL7-12084
555;;;;;;;;;3;"3. Login the other guest as client, send TCP_STREAM packets to the netserver
 #netperf -H ${IP address of your netserver} -l 500";​​;;RedHatEnterpriseLinux7/RHEL7-12084
555;;;;;;;;;4;"4. Login the netserver, and check the CPU interrupts while netperf is running
 #cat /proc/interrupts |grep -i hyperv";​​;;RedHatEnterpriseLinux7/RHEL7-12084
555;;;;;;;;;5;"5. Start another netperf thread in the client guest at the same time
 #netperf -H ${IP address of your netserver} -l 500";​​;;RedHatEnterpriseLinux7/RHEL7-12084
555;;;;;;;;;6;"6. Login the netserver, and check the CPU interrupts again.
 #cat /proc/interrupts |grep -i hyperv";​​;;RedHatEnterpriseLinux7/RHEL7-12084
556;RHEL7-12085;[Hyper-V][Network]Ethtool: Check TSO is on by ethtool;;Yaju Cao (yacao);High;Positive;Automated;467874;1;"1. Login the guest, check the pv network adapter features
 # ethtool -k eth0";"The tcp-segmentation-offload should be turned on by default,
 #ethtool -k eth0
 Features for eth0:
 rx-checksumming: on
 tx-checksumming: on
 scatter-gather: on
 tcp-segmentation-offload: on
 udp-fragmentation-offload: off
 generic-segmentation-offload: on
 generic-receive-offload: off
 large-receive-offload: off
 rx-vlan-offload: off
 tx-vlan-offload: on
 ntuple-filters: off
 receive-hashing: off";Test Case;RedHatEnterpriseLinux7/RHEL7-12085
557;RHEL7-12086;[Hyper-V][Memory]Balloon guest under memory stress;Balloon the guest which is under memory stress;Yaju Cao (yacao);Low;Positive;Not Automated;467701;1;Setup the RHEL guestA with Dynamic Memory enabled. Set Max RAM to a smaller value, e.g. 4096 MB ;"
 After step5, the guestB start sucessfully.
 After step6, the guestA ballooned.(assigned memory goes to lower value)
 The guest works well without kernel panic. There is no call trace info in the
 /var/log/messages .";Test Case;RedHatEnterpriseLinux7/RHEL7-12086
557;;;;;;;;;2;"Give the guestA memory stress, to reach its Max RAM usage.  e.g. 
 # stress --vm 4 --vm-bytes 1024M --timeout 600s --verbose
";​​;;RedHatEnterpriseLinux7/RHEL7-12086
557;;;;;;;;;3;"During guestA stress, start another RHEL guestB.
";​​;;RedHatEnterpriseLinux7/RHEL7-12086
557;;;;;;;;;4;6. Check the Assigned Memory of GuestA via Hyper-V Manager.;​​;;RedHatEnterpriseLinux7/RHEL7-12086
558;RHEL7-12088;[Hyper-V][hypervkvpd]Verify IP injection with Hyper-V Replication;Verify IP injection with Hyper-V Replication;Yaju Cao (yacao);High;Positive;Manual Only;467884;1;"1.  1)check NetworkManager and Firewall status, make sure NetworkManager is enabled and Firewall is enabled before replica. Refer to bug https://bugzilla.redhat.com/show_bug.cgi?id=1377276
 2) HostA is a Hyper-V Replication Server, will have replicated VM from other host, you should configure hostA by 'Hyper-V Settings' - '
 Replication Configuration' -> Enable this computer as a Replica Server.
";"2. There is same vM in the host A 10-66-106-73 after replica.
 5 the VM network should be configured as the setting when checked by ifconfig in step 3.
 6. Verify no any deny avc log after replica, it shows no match for ausearch.
 7. Verify hypervkvpd running well and no any error message.
";Test Case;RedHatEnterpriseLinux7/RHEL7-12088
558;;;;;;;;;2;"2. HostB has a VM
 1)configure hostB by 'Hyper-V Settings' - 'Replication Configuration' -> Enable this computer as a Replica Server.
 
 2)check the VM with hypervkvpd service start 
 # service hypervkvpd status
 
 3)configure the VM, right click, select ""Enable Replication"" - Before you Begin ->Next->Replica Server as 10-66-106-73-> Next, View that sending Initial Replica progress showings.
 
 4)you can see HostA with a replicated VM as the same on HostB
 
 Note: if cannot do replica, go to host to disable firewall:  netsh firewall set opmode disable, 
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-12088
558;;;;;;;;;3;"3. HostA, choose the replicated VM, set ip injection by  editing 'Settings' -
 'Network Adapter' - 'Failover TCP/IP', setting the IPv4/IPv6 address, subnet,
 gateway, DNS

 e.g. IPV4: 192.168.1.15
 NETMASK： 255.255.255.0
 GATEWAY： 192.168.1.1
 DNS： 192.168.1.2

 IPV6：2001::de45:1234:de00:9876
 prifix len: 64";​​;;RedHatEnterpriseLinux7/RHEL7-12088
558;;;;;;;;;4;4. On hostB, turn off the VM, and right click the VM - 'Replication' - 'Planned Failover';​​;;RedHatEnterpriseLinux7/RHEL7-12088
558;;;;;;;;;5;5. Check the VM ip status on hostA after boot up by ifconfig.;​​;;RedHatEnterpriseLinux7/RHEL7-12088
558;;;;;;;;;6;"6. Check selinux avc log:
 ausearch -m avc
 ausearch -m user_avc
 
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-12088
558;;;;;;;;;7;"7. Check hypervkvpd status
 systemctl status hypervkvpd
​​";​​;;RedHatEnterpriseLinux7/RHEL7-12088
559;RHEL7-12091;[Hyper-V][Network][Performance]Test 10G network IPv4 throughput(about 8~9 Gbps);Hyper-V network performance test guidance ;Yaju Cao (yacao);High;Positive;Manual Only;467880;1;"1. Install two RHEL VMs on two different hosts(both with 10G physical nic),
 set the vCPU both as 8 processors, Memory at least 2G.
 2. For  both VMs, add one network adapter for management, and add another
 network adapter to connect to the 10G vSwitch.
 3. Set the 10G virtual nic with static IPv4 address, such as 192.1.1.1/24,
 192.1.1.2/24

 refer to doc
 =================================
 Name=eth0
 DEVICE=eth0
 HWADDR=00:15:5d:6a:2d:07            #keep original mac here
 ONBOOT=yes
 NETBOOT=yes
 UUID=c54f17c5-8198-402e-a88e-8079271a8c11 #keep original uuid here
 IPV6INIT=yes
 BOOTPROTO=static
 TYPE=Ethernet
 IPADDR=192.168.1.113
 NETMASK=255.255.255.0
 GATEWAY=192.168.1.1
 DNS=192.168.1.2        
  
 the other host ip is IPADDR=192.168.1.112
 

 if cannot connect to network, please check followings

 1) config file has DEVICE, and DEVICE name is correct.
 2)UUID and HWADDR must be set correctly, if add new network adapter, you can comment #HWADDR, and #UUID
 3) Use following commands to make eth0 up.

 # systemctl stop NetworkManager
 # systemctl stop network
 # systemctl start network
 # ifdown eh0
 # ifup eth0
 #ip addr

 if still cannot connect, please check the firewall status.
 #systemctl stop firewalld.service

 4. Install iperfs, and the server VM run
 #iperf3 -s
 5. The client VM run
 #for f in `seq 1 10`; do iperf3 -t 30 -Z -P16 -c {iperf3 server IP} -w16M -O10 | grep SUM | grep sender; sleep 10; done";After step 5, record the throughput result, it should be about 8~9 Gbps.;Test Case;RedHatEnterpriseLinux7/RHEL7-12091
560;RHEL7-12092;[Hyper-V][Network]Send TCP stream and check dmesg;Send TCP stream and check dmesg;Yaju Cao (yacao);High;Positive;Not Automated;467878;1;"1. Install netperf on GUEST1  and GUEST2
 down load netperf from : http://fileshare.englab.nay.redhat.com/pub/section1/s13rd/tools/netperf-2.4.5-1.el5.x86_64.rpm  

 rpm -ivh netxxxx.rpm
 pkill netserver

";"At step 4, there should be no ""Buffer too small"" alike messages, and no other
 errors. Refer to [Hyper-V][Bug
 1112076](https://bugzilla.redhat.com/show_bug.cgi?id=1112076) -
 [Hyper-V][Hyper-V][Hyper-V][RHEL6.6]Buffer too small when send TCP stream through pv network
 root@rhel7 ~]#  netperf -t TCP_STREAM -H 10.66.106.136 -l 60s
 TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.66.106.136 (10.66.106.136) port 0 AF_INET : histogram : interval
 Recv   Send    Send                          
 Socket Socket  Message  Elapsed              
 Size   Size    Size     Time     Throughput  
 bytes  bytes   bytes    secs.    10^6bits/sec  

  87380  16384  16384    60.00    11057.21   

";Test Case;RedHatEnterpriseLinux7/RHEL7-12092
560;;;;;;;;;2;"2. start netserver on GUEST1
 #netserver";​​;;RedHatEnterpriseLinux7/RHEL7-12092
560;;;;;;;;;3;"3. Run TCP stream test on GUEST2. Run netperf client in the GUEST2 to test TCP and note the output.
 #netperf -t TCP_STREAM -H GUEST1 -l 60s";​​;;RedHatEnterpriseLinux7/RHEL7-12092
560;;;;;;;;;4;"4. Check GUEST1 and GUEST2 dmesg

 Note: Also can use iperf to test as below. 
 wget http://fileshare.englab.nay.redhat.com/pub/section1/s13rd/tools/iperf-2.0.5.tar.gz 
 ==============================================
 Steps to Reproduce:

 1.Install iperf, and configure iperf server on a guest #iperf -s
 2.Install iperf, and send TCP stream on another guest
 #iperf -c ${iperf server IP} -f m -t 100 3
 .Watch iperf server console, or dmesg";​​;;RedHatEnterpriseLinux7/RHEL7-12092
561;RHEL7-12093;[Hyper-V][Network]SCP a large file (> 5G) after MTU is set to 9000;SCP a large file (> 5G) after MTU is set to 9000;Yaju Cao (yacao);High;Positive;Automated;467877;1;"1. Prepare two guests on the same host.
 2. Set both guests network, change MTU to 9000.   ifconfig eth0 mtu 9000 up

 3. Scp a large file from one guest to the other. For example, you could dd a
 5GB file, then scp it.
 #dd if=/dev/zero of=/root/5gb bs=1000M count=5
 #scp 5gb guest2:/path
 4. Check if the large file could be transmitted to the targeted guest.";At step4, check file could be transmitted successfully.;Test Case;RedHatEnterpriseLinux7/RHEL7-12093
562;RHEL7-12094;[Hyper-V][Network]Ethtool:Check scatter-gather is on by ethtool;;Yaju Cao (yacao);High;Positive;Automated;467876;1;"1. Login the guest, check the pv network adapter features
 # ethtool -k eth0
 or
 # ethtool -k eth0 |grep scatter
";"Check scatter-gather  is turned on by default, like below:
 # ethtool -k eth0
 Features for eth0:
 rx-checksumming: on
 tx-checksumming: on
 scatter-gather: on
 tcp-segmentation-offload: on
 udp-fragmentation-offload: off
 generic-segmentation-offload: on
 generic-receive-offload: off
 large-receive-offload: off
 rx-vlan-offload: off
 tx-vlan-offload: on
 ntuple-filters: off
 receive-hashing: off";Test Case;RedHatEnterpriseLinux7/RHEL7-12094
563;RHEL7-12095;[Hyper-V][Network]Ethtool: Check rx, tx-checksumming, tcp-segmentation-offload and scatter-gather are on by ethtool;"Check Ethtool
";Yaju Cao (yacao);High;Positive;Automated;467875;1;"1. Login the guest, check the pv network adapter features
 # ethtool -k eth0
 or
 # ethtool -k ethX |grep checksumming
 Check rx-checksumming, tx-checksumming, tcp-segmentation-offload and scatter-gather are on


";"Check rx-checksumming and tx-checksumming  are turned on by default, like below:
 # ethtool -k eth0
 Features for eth0:
 rx-checksumming: on
 tx-checksumming: on
 scatter-gather: on
 tcp-segmentation-offload: on
 udp-fragmentation-offload: off
 generic-segmentation-offload: on
 generic-receive-offload: off
 large-receive-offload: off
 rx-vlan-offload: off
 tx-vlan-offload: on
 ntuple-filters: off
 receive-hashing: off";Test Case;RedHatEnterpriseLinux7/RHEL7-12095
564;RHEL7-12117;[Hyper-V][Network]Link initial status check after boot;Check the network link initial status after the guest boot. both disconnected and connected status of network adapter should be detected by VM. Bug 1091183;Yaju Cao (yacao);High;Positive;Automated;467816;1;1. Set the Network Adapter as Not connected, and boot the guest.;"At step 2, the operstate should be down (if it shows unknown, it is also
 accepted, see https://bugzilla.redhat.com/show_bug.cgi?id=1027173#c5  and
 https://bugzilla.redhat.com/show_bug.cgi?id=1027155#c6), and Link detected: no
";Test Case;RedHatEnterpriseLinux7/RHEL7-12117
564;;;;;;;;;2;"2. Login the guest, check the network link status by #cat
 /sys/class/net/ethN/operstate or #ethtool ethN|grep Link";​​;;RedHatEnterpriseLinux7/RHEL7-12117
565;RHEL7-12122;[Hyper-V][Memory]Balloon inflation: assigned memory decrease;Verify assigned memory can NOT be decreased below MIN RAM / FLOOR by balloon inflate;Yaju Cao (yacao);Medium;Positive;Not Automated;467698;1;"1. Power off guestA, open settings and enable Dynamic Memory. Set the MIN and
 MAX RAM. (suggest test on host 10.66.106.88 but not must,  you can set as other memory.)
 e.g.
 Startup Memory 30000M
 MinMem 512M
 MaxMem 1048576M

 After guestA boots up, check the memory
 free -m
 for example: At beginning: Assigned Memory maybe 30000MB ->2166
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-12122
565;;;;;;;;;2;"2. Start up another guestB with large memory to make guestA Balloon (Assigned memory goes down) ,
 (Do nothing in guestA, and wait for about 6-7 minutes, it can also trigger the balloon, and wait for more time to make the assigned memory go to smaller again)";​​;;RedHatEnterpriseLinux7/RHEL7-12122
565;;;;;;;;;3;"3. Check the Assigned Memory and the guest memory status.
 Note:
 How to calculate the 'FLOOR'(MIN RAM is calculated by host while 'FLOOR' is
 calculated by guest) :
 M = TOTAL_MEM_SIZE (MemTotal in /proc/meminfo)
 if M < 128 then FLOOR = 8 + M/2
 else if M < 512 then FLOOR = 40 + M/4
 else if M < 2048 then FLOOR = 104 + M/8
 else if M < 8192 then FLOOR = 256 + M/16
 else FLOOR = 512 + M/32

 e.g. if total 29278M, FLOOR=1426. 
";"After step3, the Assigned Memory of the guestA memory is ballooned to the MIN
 RAM or the FLOOR.
 The guest works well without kernel panic. There is no call trace info in the
 /var/log/messages .
 
 Note: the assigned memory maybe not exactly go to FLOOR, but if no big difference between (Floor+kdumpctl showmem) and Assigned Memory after ballooned, also acceptable.";;RedHatEnterpriseLinux7/RHEL7-12122
566;RHEL7-12124;[Hyper-V][General operation]Verify related modules are included in initramfs (P2);Check initramfs.img, verify necessary hyper-v modules are included, to assure guest boot process;Yaju Cao (yacao);High;Positive;Automated;468736;1;"1. Boot a RHEL guest, check default initramfs.img
 #lsinitrd /boot/initramfs-$$$$.img |grep hv
 #lsinitrd /boot/initramfs-$$$$.img |grep hyperv
 2. If without hv_netvsc.ko, please add one Network Adapter, execute the command ""dracut -f"" to make the lsinitrd /boot/initramfs-$$$$.img file again, then grep hv and hyperv.
 For RHEL6, install dracut-network rpm first, then execute step2.
";"1. Make sure below files are listed:
 hv_vmbus.ko
 hv_netvsc.ko
 hv_storvsc.ko
 hid-hyperv.ko
 hyperv-keyboard.ko
 hyperv_fb.ko

 2. hv_netvsc.ko is included in the list.
";Test Case;RedHatEnterpriseLinux7/RHEL7-12124
567;RHEL7-12125;[Hyper-V][Network]Hot remove a network adapter (2016 Host) (Gen2 Only);Since Hyper-V 2016 host, Generation 2 VM can support hot add and remove a network adapter when VM is running;Yaju Cao (yacao);Critical;Positive;Automated;468735;1;"This case only work with Gen2 guest on Hyper-V 2016 host (Technical Preview)
 1. Boot a guest with Network Adapter";At step 3, there is no the Network Adapter of the step 2.;Test Case;RedHatEnterpriseLinux7/RHEL7-12125
567;;;;;;;;;2;"2. Remove the Network Adapter by Hyper-V Manager - Settings - Choose the
 ""Network Adapter"" you want to remove - ""Remove""";​​;;RedHatEnterpriseLinux7/RHEL7-12125
567;;;;;;;;;3;"3. Check nic in the guest
 # ip addr";​​;;RedHatEnterpriseLinux7/RHEL7-12125
568;RHEL7-12126;[Hyper-V][Network]Hot add a network adapter and verify network can work (2016 host) (Gen2 Only);Since Hyper-V 2016 host, Generation 2 VM can support hot add and remove a network adapter when VM is running;Yaju Cao (yacao);Critical;Positive;Automated;468734;1;"This case only work with Gen2 guest on Hyper-V 2016 host(Technical Preview)
 1. Boot a RHEL guest";"3. At step 3, the nic added in step 2 could be displayed, and could get ping
 reply";Test Case;RedHatEnterpriseLinux7/RHEL7-12126
568;;;;;;;;;2;2. Add a Network Adapter by Hyper-V Manager-Settings-Add Hardware;​​;;RedHatEnterpriseLinux7/RHEL7-12126
568;;;;;;;;;3;"3. Check nic in the guest, check if the new nic could get ping reply
 #ip addr";​​;;RedHatEnterpriseLinux7/RHEL7-12126
569;RHEL7-12127;[Hyper-V][Network]Verify VM and network is OK in debug kernel VM with PAGEALLOC enabled;;Yaju Cao (yacao);Medium;Positive;Manual Only;468683;1;"1. Log in a debug kernel VM with PAGEALLOC enabled
 #grep PAGEALLOC /boot/config-3.10.0-217.el7debugv2.x86_64.debug";"1. At step 1, The PAGEALLOC=y
 #grep PAGEALLOC /boot/config-3.10.0-217.el7debugv2.x86_64.debug
 CONFIG_ARCH_SUPPORTS_DEBUG_PAGEALLOC=y
 CONFIG_DEBUG_PAGEALLOC=y";Test Case;RedHatEnterpriseLinux7/RHEL7-12127
569;;;;;;;;;2;2. Check there is no crash, and the network status;2. At step 2, there is no crash.;;RedHatEnterpriseLinux7/RHEL7-12127
570;RHEL7-12129;[Hyper-V][General operation][Performance]Run lisa-test to test LTP basic;"LTP test by LISA Test
";Yaju Cao (yacao);Medium;Positive;Automated;467633;1;"1. Logon the guest
 2. Setup the beaker environment:
 1)  beaker client harness:
 # wget -O /etc/yum.repos.d/beaker-client.repo \
 <http://download.lab.bos.redhat.com/beakerrepos/beaker-client-RedHatEnterpriseLinux.repo>[Hyper-V][
 ](http://download.lab.bos.redhat.com/beakerrepos/beaker-client-RedHatEnterpriseLinux.repo)2) beaker-tasks:
 [Hyper-V][beaker-tasks]
 name=beaker-tasks
 baseurl=http://beaker.engineering.redhat.com/rpms
 gpgcheck=0
 3) rhel6
 [Hyper-V][rhel6.4]
 name=rhel6.4
 baseurl=http://download.englab.nay.redhat.com/pub/rhel/rel-eng/latest-RHEL-6/6.4/Server/i386/os/Server/
 enabled=1
 gpgcheck=0
 3.  # yum install kernel-kernel-distribution-ltp-generic
 (this should install all dependencies. but just in case, you'd better do extra step: `yum install rhts-devel rhts-test-env`)
 4. the test should be installed to /mnt/tests/kernek/distribution/ltp/generic
 (there might be a DNS resolving issue, you might fail to download LTP package, try
 # wget <http://download.englab.nay.redhat.com/pub/rhel/qa/rhts/lookaside/ltp-full-20120822.bz2>[Hyper-V][
 ](http://download.englab.nay.redhat.com/pub/rhel/qa/rhts/lookaside/ltp-full-20120822.bz2)to /mnt/tests/kernel/distribution/ltp/generic)
 5. install all LTP dependencies:
 # yum install @development procmail rsyslog sysklogd ntpdate util-linux util-linux-ng redhat-lsb bc kernel-headers kernel-devel libaio-devel libcap-devel numactl-devel libattr-devel
 note:if you cannot install the dependencies,you may add the wildcards to make it install ,for example *util-linux-ng*
 6. now execute: make run and LTP will start to compile and run:
 # cd /mnt/tests/kernel/distribution/ltp/generic
 # make run
 7. check the result under the directory ""/mnt/testarea/""";"1. At step 3, 4, 5, all the package install and download successfully
 2. At step 6, LTP start running
 7. Wait a certain time, the test result should PASS without any Traceback.";Test Case;RedHatEnterpriseLinux7/RHEL7-12129
571;RHEL7-12134;[Hyper-V][General operation]Check keyboard input in emergency mode;Boot guest into emergency mode, e.g. to reset password, make sure keyboard can be used;Yaju Cao (yacao);High;Positive;Manual Only;468837;1;"For RHEL6
 1. At the GRUB splash screen at boot time, press any key to enter the GRUB interactive menu.
 2. Select **Red Hat Enterprise Linux** with the version of the kernel that you wish to boot and type `a` to append the line.
 3. Go to the end of the line and type **`**`emergency`**`**. Press **Enter** to exit edit mode.
 4. Boot the system, after log in, check keboard input
 For RHEL7
 1. To enter emergency mode, on the GRUB 2 boot screen, press the e key for edit, and press down key to view the commands.
 2. Add the following parameter at the end of the `linux` line on 64-Bit IBM Power Series, the `linux16` line on x86-64 BIOS-based systems, or the `linuxefi` line on UEFI systems:
 systemd.unit=emergency.target
 Press Ctrl+a and Ctrl+e to jump to the start and end of the line,
 respectively. On some systems, Home and End might also work.
 Note that equivalent parameters, _`emergency`_ and _`-b`_, can be passed to
 the kernel as well.
 3. Press Ctrl+x to boot the system with the parameter.
 4. Boot the system, after log in, check keboard input";At step 4, the keyboard input could be detected.;Test Case;RedHatEnterpriseLinux7/RHEL7-12134
572;RHEL7-12136;[Hyper-V][Memory]hot-add memory NOT online check for RHEL6;There is no default udev rule for RHEL6 to online hot added memory. Make sure system runs well even user have not added a udev rule manually.;Yaju Cao (yacao);High;Positive;Not Automated;472555;1;1. Setup the RHEL guestA with Startup RAM < Maximum RAM. (For example, Startup RAM = 1024MB, Maximum RAM = 4096MB);"


";Test Case;RedHatEnterpriseLinux7/RHEL7-12136
572;;;;;;;;;2;"2. Give the guestA memory stress as much as the Maximum RAM. For example,  install and run the ""stress"" tool as below to
 give the guest memory stress:
 #stress --vm 4 --vm-bytes 1024M --timeout 300s --verbose";​​;;RedHatEnterpriseLinux7/RHEL7-12136
572;;;;;;;;;3;3. While stress, check the Assigned Memory of GuestA via Hyper-V Manager.;"At step 3, you will see Assigned Memory is increased when you are running
 memory stress.";;RedHatEnterpriseLinux7/RHEL7-12136
572;;;;;;;;;4;"4. Log in guest, check the memory state:
 #free -m
 or #cat /sys/devices/system/memory/memoryXXX/state";"At step 4, the total memory has not change, (since hot added memory are still
 offline).";;RedHatEnterpriseLinux7/RHEL7-12136
572;;;;;;;;;5;5. Make guestA inflate the balloon, check system status;"At step 5, offline memory should not be ballooned out, the system does not
 crash.
 On Rhel 7.2, without udev rule, the hot add memory can be online, and memory can be ballooned out by hot-add memory.";;RedHatEnterpriseLinux7/RHEL7-12136
573;RHEL7-12147;[Hyper-V][Memory]check hv_balloon process;Check the hv_balloon process in guest;Yaju Cao (yacao);High;Positive;Not Automated;467697;1;"1.Login the guest. Check the hv_balloon process.
 #ps aux |grep balloon";"After step1,
 # ps aux |grep balloon
 root      1966  0.0  0.0      0     0 ?        D    Dec24   0:23 [Hyper-V][hv_balloon]";Test Case;RedHatEnterpriseLinux7/RHEL7-12147
574;RHEL7-12152;[Hyper-V][Network]Unload/load hv_netvsc module on SMP guest (Bug 1118163)(P2);Unload/load hv_netvsc module on SMP guest;Yaju Cao (yacao);High;Positive;Manual Only;467890;1;1. Boot a SMP guest with PV network adapter.;The guest should work well, and there is no Call Trace;Test Case;RedHatEnterpriseLinux7/RHEL7-12152
574;;;;;;;;;2;"2. Login the guest. Load/unload the hv_netvsc in the guest with the shell script
 #cat > add_remove_hv_netvsc.sh

 while [ ""1"" = ""1"" ]
 do
 modprobe -r hv_netvsc
 modprobe hv_netvsc
 done";​​;;RedHatEnterpriseLinux7/RHEL7-12152
574;;;;;;;;;3;"3.  sh add_remove_hv_netvsc.sh
 After 10 minutes, ctrl-z to exit the running,check the guest status";​​;;RedHatEnterpriseLinux7/RHEL7-12152
575;RHEL7-12156;[Hyper-V][hyperv-daemons]Checked the selinux rules for all the hyperv-daemons;Checked the selinux rules for all the hyperv-daemons;Yaju Cao (yacao);High;Positive;Automated;467887;1;"1. Execute command ""systemctl | grep hyperv""";"check the result with the command below after finishing all cases about
 hyperv-deamons:

 ausearch -m avc | grep -i hypervkvpd
 ausearch -m avc | grep -i hypervkfcopyd
 ausearch -m avc | grep -i hypervvssd
 ausearch -m user_avc | grep -i hypervkvpd
 ausearch -m user_avc | grep -i hypervkfcopyd
 ausearch -m user_avc | grep -i hypervvssd

 the results are nulll.
";Test Case;RedHatEnterpriseLinux7/RHEL7-12156
575;;;;;;;;;2;"2. make sure the guest is running by enforcing,
 #getenforce
 Enforcing";​​;;RedHatEnterpriseLinux7/RHEL7-12156
575;;;;;;;;;3;3. make sure the selinux of hyperv daemons service has been allowed.;​​;;RedHatEnterpriseLinux7/RHEL7-12156
576;RHEL7-12158;[Hyper-V][Memory]Verify hv_balloon is loaded in the guest after enable the Dynamic Memory;Verify hv_balloon is loaded in the guest after enable the Dynamic Memory;Yaju Cao (yacao);High;Positive;Automated;467694;1;"1.Enable the Dynamic Memory via Hyper-v Manager.
 Choose the RHEL guest and right click. Click 'setting' to open the
 configuration page.
 Setting --- Memory --- Dynamic Memory";"At step3, there is a hv_balloon module in the guest.
 # lsmod |grep balloon
 hv_balloon              9514  0
 hv_vmbus               91567  4 hv_balloon,hv_utils,hid_hyperv,hv_storvsc";Test Case;RedHatEnterpriseLinux7/RHEL7-12158
576;;;;;;;;;2;2.Start the RHEL guest.;​​;;RedHatEnterpriseLinux7/RHEL7-12158
576;;;;;;;;;3;"3.Login the RHEL guest and check whether there is a hv_balloon module in the
 guest.
 #lsmod |grep balloon";​​;;RedHatEnterpriseLinux7/RHEL7-12158
577;RHEL7-12167;[Hyper-V][Network][Performance]Test 10G network IPv6 throughput  (about 8~9 Gbps);Hyper-V network performance test guidance ;Yaju Cao (yacao);High;Positive;Manual Only;467911;1;"1. Install two RHEL VMs on two different hosts(both with 10G physical nic),
 set the vCPU both as 8 processors, Memory at least 2G.
 2. For  both VMs, add one network adapter for management, and add another
 network adapter to connect to the 10G vSwitch.
 3. Set the 10G virtual nic with static IPv6 address, such as 2000::1/64,
 2000::2/64

 Name=eth0
 DEVICE=eth0
 HWADDR=00:15:5d:6a:2d:07            #keep original mac here
 ONBOOT=yes
 NETBOOT=yes
 UUID=c54f17c5-8198-402e-a88e-8079271a8c11 #keep original uuid here
 IPV6INIT=yes
 BOOTPROTO=static
 TYPE=Ethernet
 PREFIX=24
 IPV6ADDR= 2000::1/64
  
 the other host ip set as 2000::2/64
 
 ================================================
 You can setup multiple network adapters at the same time,if cannot connect to network, please check followings

 1) config file has DEVICE, and DEVICE name is correct.
 2)UUID and HWADDR must be set correctly, if add new network adapter, you can comment #HWADDR, and #UUID
 3) Use following commands to make eth0 up.

 # systemctl stop NetworkManager
 # systemctl stop network
 # systemctl start network
 # ifdown eh0
 # ifup eth0
 #ip addr

 if still cannot connect, please check the firewall status.
 #systemctl stop firewalld.service

 4. Install iperfs, and the server VM run
 #iperf3 -s
 5. The client VM run
 #for f in `seq 1 10`; do iperf3 -t 30 -Z -P16 -c {iperf3 server IP} -w16M -O10 | grep SUM | grep sender; sleep 10; done";After step 5, record the througput result, it should be about 8~9 Gbps.;Test Case;RedHatEnterpriseLinux7/RHEL7-12167
578;RHEL7-12171;[Hyper-V][Balloon]Verify the guest memory can be hot-added after balloon inflation;Verify the guest memory can be hot-added after balloon inflation;Yaju Cao (yacao);High;Positive;Not Automated;467753;1;"1. Set the RHEL guestA Maximum RAM > Startup RAM. For example, Startup RAM
 = 4096MB, Maximum RAM = 8192MB"; ;Test Case;RedHatEnterpriseLinux7/RHEL7-12171
578;;;;;;;;;2;"2. Add a udev rule in /etc/udev/rules.d, named like ""99-hv-balloon.rules"",
 and vi it add:
 SUBSYSTEM==""memory"", ACTION==""add"", ATTR{state}=""online""";​​;;RedHatEnterpriseLinux7/RHEL7-12171
578;;;;;;;;;3;"3.  Start up another guestB with large memory to make guestA Balloon inflate (Assigned memory goes down) ,
 (Or Do nothing in guestA, and wait for about 6-7 minutes, it can also trigger the balloon, and wait for more time to make the assigned memory go to smaller again)
";​​;;RedHatEnterpriseLinux7/RHEL7-12171
578;;;;;;;;;4;"4. Give the guestA memory stress until Assigned Memory = Maximum RAM. For
 example, install and run the ""stress"" tool as
 below to give theguest memory stress 4*2048=8192MB:
 #stress --vm 4 --vm-bytes 2048M --timeout 300s --verbose";​​;;RedHatEnterpriseLinux7/RHEL7-12171
578;;;;;;;;;5;5. Check the Assigned Memory of GuestA via Hyper-V Manager.;"After step5, the Assigned Memory of the guestA memory is equal to the Maximum
 RAM set in step3.";;RedHatEnterpriseLinux7/RHEL7-12171
578;;;;;;;;;6;"6. Log in guest, check the hot-added memory state:
 #free -m
 or #cat /sys/devices/system/memory/memoryXXX/state";"At step6, the hot-added memory in the guest should be online, and the total
 memory should equal to the Assigned Memory by Hyper-V Manager.
 The guest works well without kernel panic. There is no call trace info in the
 /var/log/messages
 Note: If get the Call trace:
 1) order as 9, this is work as design.
 e.g.
 kworker/0:2: page allocation failure: order:9, mode:0x84d0, above Call Trace line,
 dump_stack+
 warn_alloc_failedxxxxxxxxxxx
 2) Call Trace : out_of_memory.
";;RedHatEnterpriseLinux7/RHEL7-12171
579;RHEL7-12182;[Hyper-V][Memory]hot add memory to maximum;Verify assigned memory can be hot-added from startup to maximum;Yaju Cao (yacao);Critical;Positive;Not Automated;467752;1;"1. Enable Dynamic Memory, and Setup the Maximum RAM > Startup RAM
 Via Hyper-V Manager VM Settings -> Memory. For example, Startup RAM = 1024MB, Maximum RAM = 4096MB.";"


";Test Case;RedHatEnterpriseLinux7/RHEL7-12182
579;;;;;;;;;2;"2. Check memory online support.

 For RHEL6, need to add a udev rule.
 $cat /etc/udev/rules.d/99-hv-balloon.rules
 SUBSYSTEM==""memory"", ACTION==""add"", ATTR{state}=""online""

 For RHEL7 later, systemd has provided udev rule in
 $grep -i memory /usr/lib/udev/rules.d/40-redhat.rules  
 # Memory hotadd request
 SUBSYSTEM==""memory"", ACTION==""add"", PROGRAM=""/bin/uname -p"", RESULT!=""s390*"", ATTR{state}==""offline"", ATTR{state}=""online""";​​;;RedHatEnterpriseLinux7/RHEL7-12182
579;;;;;;;;;3;"3. Give VM memory stress higher than Startup RAM, as much as the Maximum RAM.
 For example,  install and run the ""stress"" tool as below:
 $stress --vm 4 --vm-bytes 1024M --timeout 300s --verbose";​​;;RedHatEnterpriseLinux7/RHEL7-12182
579;;;;;;;;;4;4. While stress, check VM's Assigned Memory via Hyper-V Manager.;Assigned Memory is increased to bigger than Startup RAM, but no bigger than Maximum RAM set in step 1.;;RedHatEnterpriseLinux7/RHEL7-12182
579;;;;;;;;;5;"5. Log in VM, check the hot-added memory state:
 $free -m
 or
 $cat /sys/devices/system/memory/memory*/state";"At step5, the hot-added memory in the VM should be online, and the total
 memory should equal to the Assigned Memory by Hyper-V Manager.
 The guest works well without kernel panic. There is no call trace info in the
 /var/log/messages .

 e.g. if total memory 3755M, kdump reserved 300M(get by kdumpctl showmem), assigned memory: 4096M, this is acceptable.
 Hot add means that: at beginning, get total memory 683, by ""free -m "", after stress it reaches as e.g. 2475.
 free -m
 total used free
 Two rules:
 1) system running used memory + Free + kdump reserved memory  ~=Assigned Memory
 2) Used memory = system running used memory+ memory ballooned(inflate) during stress
 Note: If get the Call trace: order as 9, this is work as design.
 e.g.
 kworker/0:2: page allocation failure: order:9, mode:0x84d0";;RedHatEnterpriseLinux7/RHEL7-12182
580;RHEL7-12189;[Hyper-V][Memory]Verify the guest balloon driver can not be unloaded.;hv_balloon module in guest can not be unloaded, this is to make sure balloon state persistent when guest is running;Yaju Cao (yacao);High;Positive;Not Automated;467707;1;"1. Login the guest, and lsmod to check there is 'hv_balloon' module
 #lsmod |grep hv_balloon";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-12189
580;;;;;;;;;2;"2. Try to unload the hv_balloon module
 #modprobe -r hv_balloon";​​;;RedHatEnterpriseLinux7/RHEL7-12189
580;;;;;;;;;3;3. Check the 'hv_balloon' module again as step 1;the module can not be unloaded;;RedHatEnterpriseLinux7/RHEL7-12189
580;;;;;;;;;4;4. Try Balloon function,such as inflate,deflate or hot add;balloon can still work well;;RedHatEnterpriseLinux7/RHEL7-12189
581;RHEL7-12190;[Hyper-V][Network]Test network with vlan in access mode;Test network with vlan in access mode. This is to set VLAN on the Hyper-V Virtual Switch, VLAN tags are NOT handled by VM;Yaju Cao (yacao);High;Positive;Automated;467718;1;1. Install two guest with same Virltual Switch, and  enable virtual LAN identification with the same VLAN ID (e.g. set VLAN 2), then boot up guests.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-12190
581;;;;;;;;;2;"2. Login the guests and set their network with same subnet static ip.
 For example, you can modify the ifcfg-ethN file, and ifup the network.
 # cat /etc/sysconfig/network-scripts/ifcfg-ethN
 DEVICE=ethN
 BOOTPROTO=static
 #HWADDR=00:15:5D:48:**:**
 ONBOOT=yes
 NETMASK=${the_subnet_mask, e.g. 255.255.255.0}
 IPADDR=${the ip address has the same network segment with the host's ip
 address, e.g. 192.168.2.5}
 =================================
 Set the other guest ip as 192.168.2.6";​​;;RedHatEnterpriseLinux7/RHEL7-12190
581;;;;;;;;;3;"3. Ping guest2 from guest1:
 # ping ${guest1_ip_address}";ping guest2 from guest1 successfully.;;RedHatEnterpriseLinux7/RHEL7-12190
581;;;;;;;;;4;4. Change one guest's VLAN ID to a different number, e.g, set VLAN 10.;​​;;RedHatEnterpriseLinux7/RHEL7-12190
581;;;;;;;;;5;"5. Ping guest2 from guest1:
 # ping ${guest1_ip_address}";Can not ping guest2 successfully from guest1;;RedHatEnterpriseLinux7/RHEL7-12190
582;RHEL7-12193;[Hyper-V][Balloon]Verify assigned memory can not exceed the physical maximum.;Verify assigned memory can not exceed the physical maximum.;Yaju Cao (yacao);Low;Positive;Manual Only;467754;1;"1. Set the guestA Maximum RAM much larger than the Host physical memory. (For
 example, physical memory = 8192MB, Maximum RAM = 1048576MB)"; ;Test Case;RedHatEnterpriseLinux7/RHEL7-12193
582;;;;;;;;;2;"2. Add a udev rule in /etc/udev/rules.d, named like ""99-hv-balloon.rules"",
 and vi it add:
 SUBSYSTEM==""memory"", ACTION==""add"", ATTR{state}=""online""";​​;;RedHatEnterpriseLinux7/RHEL7-12193
582;;;;;;;;;3;"3. Give the guestA memory stress,Login the guestA. For example, install and
 run the ""stress"" tool as below to give the guest memory stress:
 #stress --vm 32 --vm-bytes 4096M --timeout 600s --verbose";​​;;RedHatEnterpriseLinux7/RHEL7-12193
582;;;;;;;;;4;4. Check the Assigned Memory of GuestA via Hyper-V Manager.;After step4, the Assigned Memory will not exceed the physical host free memory.;;RedHatEnterpriseLinux7/RHEL7-12193
582;;;;;;;;;5;"5. Log in guest, check the hot-added memory state:
 #free -m
 or #cat /sys/devices/system/memory/memoryXXX/state";"At step5, the hot-added memory in the guest should be online, and the total
 memory should equal to the Assigned Memory by Hyper-V Manager.
 The guest works well without kernel panic.There is no call trace info in the
 /var/log/messages .

 Note: If get the Call trace: order as 9, this is work as design.
 e.g.
 kworker/0:2: page allocation failure: order:9, mode:0x84d0";;RedHatEnterpriseLinux7/RHEL7-12193
583;RHEL7-12197;[Hyper-V][Balloon]After hot add, verify assigned memory can NOT be decreased below MIN RAM or FLOOR by balloon inflate;After hot add, verify assigned memory can NOT be decreased below MIN RAM or FLOOR by balloon inflate;Yaju Cao (yacao);Critical;Positive;Not Automated;467787;1;"1. Stress VM to make memory hot added.
 1) Startup RAM =1024MB, Minimum Memory= 1024M, Maximum Memory=4096M.
 2) Stress the guest till the Assigned Memory goes to 4096M (Check the memory is hot added to 4096,and the Assigned Memory from Hyper-V manager is 4096MB.) 
 stress --vm 4 --vm-bytes 1024M --timeout 300s --verbose
 3) Stop the stress test.

 2. Startup guestB, the guestB startup memory should be as large as
 possible(To let the host get balloon memory from guestA).For example,if the
 host memory is 16G, you could set guestB Startup RAM =15G, if 15G cannot boot up, you can try other smaller RAM, but cannot be too small.

 3. When guestB start successfully, Check the Assigned Memory of guestA.
 Note:
 How to calculate the 'FLOOR' :
 M = TOTAL_MEM_SIZE (MemTotal/1024 in /proc/meminfo)  e.g. 3845288 kB, 3755M


 M also = total memory of ""free -m""
 if M < 128 then FLOOR = 8 + M/2
 else if M < 512 then FLOOR = 40 + M/4
 else if M < 2048 then FLOOR = 104 + M/8
 else if M < 8192 then FLOOR = 256 + M/16
 else FLOOR = 512 + M/32

 for this example, FlOOR= 256+3755/16 = 490M";"At step3, the Assigned Memory of guestA could be decreased to  the setted
 Minimum Memory or FLOOR

 For our example:
 Minimum Memory = 1024
 FLOOR = 490M, since also exist kdump reserved memory(e.g. 300kdumpctl showmem), estimated assigned memory neally about 790M

 Finally Assigned Memory will be larger one between Floor and Minimum memory,
 it is about 1098M.

 The guest works well without kernel panic. There is no call trace info in the
 /var/log/messages.


";Test Case;RedHatEnterpriseLinux7/RHEL7-12197
584;RHEL7-12198;[Hyper-V][Network]SCP a large disk file (> 5G) through network;SCP a large disk file (> 5G) through network, verify file can be received successfully.;Yaju Cao (yacao);High;Positive;Automated;467788;1;"<1>Login the guest vm01 on host by ssh
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-12198
584;;;;;;;;;2;<2>make a 5g file by #dd if=/dev/zero of=/root/5gb bs=1000M count=5;​​;;RedHatEnterpriseLinux7/RHEL7-12198
584;;;;;;;;;3;"<3>scp the ""5gb"" file to vm02
 #scp 5gb root@${vm02's ip address}:${target directory}";​​;;RedHatEnterpriseLinux7/RHEL7-12198
584;;;;;;;;;4;<4>when scp complete, login the guest vm02, check the target directory;"The ""5gb"" file on the vm02 storage is right and same size.";;RedHatEnterpriseLinux7/RHEL7-12198
585;RHEL7-12219;[Hyper-V][Network]Check the link status after connect/disconnect the network adapter;Check the link status after connect/disconnect the network adapter;Yaju Cao (yacao);High;Positive;Not Automated;467646;1;"1. Choose the guest and click ""settings......""-""Network Adapter"", check the network link status by #cat /sys/class/net/ethN/operstate or #ethtool ethN|grep Link
";"After step 1, the operstate should be up, and Link detected: yes.
 At step 2,  via ethtool the result should be ""Link detected: no"",   via cat,
 the operstate should be ""down"".
 At step 4,  via ethtool the result should be ""Link detected: yes"",  via cat,
 the operstate should be ""up"".
 At step 5, Successfully ping outside machine in guest with the network
 adapter.
 Check dmesg to make sure there is no Call Trace issues.";Test Case;RedHatEnterpriseLinux7/RHEL7-12219
585;;;;;;;;;2;"2. Change the
 Network from ""New Virtual Network""(The name of the host External Virtual
 Network) to ""Not connected"", check the network link status in the guest. Use #ethtool ethN|grep Link
 and # cat /sys/class/net/ethN/operstate.";​​;;RedHatEnterpriseLinux7/RHEL7-12219
585;;;;;;;;;3;"3. Choose the Network Adapter in the left side in the setting . Choose the
 network adapter from ""Not connected"" to ""New Virtual Network""(The name of the
 host External Virtual Network).";​​;;RedHatEnterpriseLinux7/RHEL7-12219
585;;;;;;;;;4;4. Check the network link status in the guest. Use #ethtool ethN|grep Link and  # cat /sys/class/net/ethN/operstate.;​​;;RedHatEnterpriseLinux7/RHEL7-12219
585;;;;;;;;;5;5. Ping outside machine with the network adapter.;​​;;RedHatEnterpriseLinux7/RHEL7-12219
586;RHEL7-12225;[Hyper-V][Network]Check network connection during live migration;Check network connection during live migration;Yaju Cao (yacao);Critical;Positive;Manual Only;467644;1;"1. Keep ping the guest from the outside mashine.
 # ping ${guest_ip}
"; ;Test Case;RedHatEnterpriseLinux7/RHEL7-12225
586;;;;;;;;;2;"2. Login the source host, execute ""Move-VM"" to live migrate the guest.
 PS C:\> Move-VM ""${name of the vm guest}"" ${target host} -IncludeStorage -DestinationStoragePath ${destination pathe}";"Check ping output, there is little(1~3)packages lost.
 Note:
 Due to the environment limitation, there is still slightly packets drop during
 the process. Now  60 packets lost during the live migration in average is
 acceptable.
 More info, please have a look at the comment 17~21 in bug 875309";;RedHatEnterpriseLinux7/RHEL7-12225
587;RHEL7-12226;[Hyper-V][Network]Verify the guest network support arbitrary MTU size (MTU > 1500);Verify the guest network support arbitrary MTU size (MTU > 1500);Yaju Cao (yacao);High;Positive;Automated;467656;1;"1. Login the guest A. Modify the MTU value of the guest A, set MTU as larger than 1500, the maximum value is 65520
 For example, change it to 9000
 #cat /etc/sysconfig/network-scripts/${ifcfg-ethN}
 DEVICE=ethN
 BOOTPROTO=dhcp
 DHCPCLASS=
 #HWADDR=00:15:5D:48:0C:04
 ONBOOT=yes
 MTU=9000";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-12226
587;;;;;;;;;2;2. Check the MTU value about guest A via ifconfig.;guest A MTU is changed to the set value;;RedHatEnterpriseLinux7/RHEL7-12226
587;;;;;;;;;3;"3. Login the guest B. Modify the MTU value as the same of guest A
 #cat /etc/sysconfig/network-scripts/${ifcfg-ethN}
 DEVICE=ethN
 BOOTPROTO=dhcp
 DHCPCLASS=
 #HWADDR=00:15:5D:48:0C:08
 ONBOOT=yes
 MTU=9000";​​;;RedHatEnterpriseLinux7/RHEL7-12226
587;;;;;;;;;4;5.Check the MTU value about guest B via ifconfig.;guest B MTU is changed to the set value;;RedHatEnterpriseLinux7/RHEL7-12226
587;;;;;;;;;5;"6.Flood ping the guest B from guest A. Note: the -s value is equal to MTU-28
 # ping -s 8972 ${the ip address of guest B} -M do";"At step 6, successfully ping the other guest.
​​";;RedHatEnterpriseLinux7/RHEL7-12226
587;;;;;;;;;6;"7. In guest A , capture the packets, check if it is fragmented.
 #tcpdump -n -v -i ethN";"At step 7, check the packet is not fragmented, it should be like below:
 17:28:49.643736 IP (tos 0x0, ttl 64, id 0, offset 0, flags [Hyper-V][DF], proto ICMP (1), length 9000)
 guest A > guest B: ICMP echo request, id 10875, seq 5862, length 8980
 17:28:49.643767 IP (tos 0x0, ttl 64, id 24242, offset 0, flags [Hyper-V][none], proto ICMP (1), length 9000)
 guest B > guest A: ICMP echo reply, id 10875, seq 5862, length 8980";;RedHatEnterpriseLinux7/RHEL7-12226
588;RHEL7-12249;[Hyper-V][Network]Install/Boot guest with disconnected network adapter attached(bz1091183);Install/Boot guest with disconnected network adapter attached(bz1091183);Yaju Cao (yacao);Medium;Positive;Manual Only;468206;1;"1. Add a pv network adapter to the guest, keep it as ""Not connected""";"At step 2, the guest could install successfully
 At step 3, the guest could boot up.";Test Case;RedHatEnterpriseLinux7/RHEL7-12249
588;;;;;;;;;2;2. Install the guest via ISO or PXE(legacy network adapter);​​;;RedHatEnterpriseLinux7/RHEL7-12249
588;;;;;;;;;3;"3. Boot the guest with pv network adapter as ""Not connected""";​​;;RedHatEnterpriseLinux7/RHEL7-12249
589;RHEL7-18771;[Hyper-V][VMBUS]Trigger kdump and verify there is related event log on the host;When kdump is running in guest, trigger crash in guest can generate an event log on the host, so the crash issue can be monitored by administrator.;Yaju Cao (yacao);High;Positive;Manual Only;;1;"1. Install guest and start kdump service
 #systemctl start kdump
 #systemctl status kdump
";kdump is active;Test Case;RedHatEnterpriseLinux7/RHEL7-18771
589;;;;;;;;;2;"2. Trigger system crash in the guest
 $echo c > /proc/sysrq-trigger ";system crash and kdump works, guest will reboot;;RedHatEnterpriseLinux7/RHEL7-18771
589;;;;;;;;;3;"3. Login the host, and check Hyper-V worker event
 PS C:\> Get-WinEvent -FilterHashTable @
 {LogName =""Microsoft-Windows-Hyper-V*""; Id=18590} | Format-Table -Wrap


";"There should be an 18590 event for the guest crash.

 Note: after trigger system crash 2 or 3 times in guest, the 18590 event will not be shown in host. After some hours(I am not sure how long this may take), trigger guest crash again and the 18590 event could show again. This is because Hyper-V do throttling to prevent flooding of the event log.";;RedHatEnterpriseLinux7/RHEL7-18771
589;;;;;;;;;4;"4, After guest reboot automatically, go to /var/crash to cat vmcore-demesg.txt.
 For 64-bit OS, check the registers value of RIP, RAX, RBX, RCX, RDX.
 For 32-bit OS, check the registers value of EIP, EAX, EBX, ECX, EDX.";"For RHEL7.6 and RHEL8.x:
 The ErrorCode is changed to receive below info from guest:
 ErrorCode0=err
 ErrorCode1=guestid, 
 ErrorCode2=RIP, 
 ErrorCode3=RAX,
 ErrorCode4=RSP.
 guestid: it is 64bit info: 0x810000030A000000, 63-56bit is 0x8100 for Linux; 47-16 bit is LINUX_VERSION_CODE ($cat /usr/include/linux/version.h, need to Convert to hexadecimal), other bits is for Distro specific identification and currently not used. See https://bugzilla.redhat.com/show_bug.cgi?id=1551622#c25  
 The ErrorCode in the event should be consistent with the vmcore info in the guest:
 For 64-bit OS:
 ErrorCode0=RIP
 ErrorCode1=RAX, 
 ErrorCode2=RBX, 
 ErrorCode3=RCX,
 ErrorCode4=RDX.
 
 For 32-bit OS:
 ErrorCode0=EIP
 ErrorCode1=EAX, 
 ErrorCode2=EBX, 
 ErrorCode3=ECX,
 ErrorCode4=EDX.
​​";;RedHatEnterpriseLinux7/RHEL7-18771
590;RHEL7-18772;[Hyper-V][VMBUS]Stop kdump and trigger crash then verify there is event log on the host;When kdump is stopped in guest, trigger crash in guest can generate a event log on the host, so the crash issue can be monitored by administrator.;Yaju Cao (yacao);Medium;Positive;Manual Only;;1;1. Install guest, stop kdump service;kdump is stopped;Test Case;RedHatEnterpriseLinux7/RHEL7-18772
590;;;;;;;;;2;"2. Trigger system crash in the guest
 $echo c > /proc/sysrq-trigger ";system crash and kdump will not be triggered;;RedHatEnterpriseLinux7/RHEL7-18772
590;;;;;;;;;3;"3. Login the host, and check Hyper-V worker event
 PS C:\> Get-WinEvent -FilterHashTable @
 {LogName =""Microsoft-Windows-Hyper-V*""; Id=18590} | Format-Table -Wrap

 e.g. Message lists as below from Powershell.
 ================================================
  xxx has encountered a fatal error.  The guest
 operating system reported that it failed with the following error
 codes: ErrorCode0: 0xFFFFFFFF813B7E96, ErrorCode1: 0xF,
 ErrorCode2: 0xFFFFFFFF81A06620, ErrorCode3: 0x0, ErrorCode4: 0x0.
 If the problem persists, contact Product Support for the guest
 operating system.  (Virtual machine ID
 35705B25-29E1-4973-9650-AA4235B34E25)
 =======================
 Console log from terminal after execute step2
 For 64-bit OS:
 [85.xxxxxx ] RIP： 0010:<fffffff813b7e96>
 RSP:0018
 RAX:00000000000000f
 RDX:00000000000000
 RBP:........
 R10:
 R13:........

 For 32-bit OS:
 EIP: 0060:[<c06c344f>] EFLAGS: 00010086 CPU: 1
 EAX: xxxxxxxx EBX: xxxxxxxx ECX: xxxxxxxx EDX: xxxxxxxx

 If cannot show full log, please use serial console log to check, and refer to https://mojo.redhat.com/docs/DOC-171022 
";"There should be an 18590 event for the guest crash.
 For RHEL7.6 and RHEL8.x:
 The ErrorCode is changed to receive below info from guest:
ErrorCode0=err
 ErrorCode1=guestid, 
 ErrorCode2=RIP, 
 ErrorCode3=RAX,
 ErrorCode4=RSP.
 guestid: it is 64bit info: 0x810000030A000000, 63-56bit is 0x8100 for Linux; 47-16 bit is LINUX_VERSION_CODE ($cat /usr/include/linux/version.h, need to Convert to hexadecimal), other bits is for Distro specific identification and currently not used. See https://bugzilla.redhat.com/show_bug.cgi?id=1551622#c25 
 For <= RHEL7.5 and RHEL6.x:
 The ErrorCode in the event should be consistent with the vmcore info in the guest:
 For 64-bit OS:
 ErrorCode0=RIP
 ErrorCode1=RAX, 
 ErrorCode2=RBX, 
 ErrorCode3=RCX,
 ErrorCode4=RDX.

 For 32-bit OS:
 ErrorCode0=EIP
 ErrorCode1=EAX, 
 ErrorCode2=EBX, 
 ErrorCode3=ECX,
 ErrorCode4=EDX.
 
 Note: after trigger system crash 2 or 3 times in guest, the 18590 event will not be shown in host. After some hours(I am not sure how long this may take), trigger guest crash again and the 18590 event could show again. This is because Hyper-V do throttling to prevent flooding of the event log.

 RIP: Is the instruction that was underway at the time of the failure.
";;RedHatEnterpriseLinux7/RHEL7-18772
591;RHEL7-18773;[Hyper-V][VMBUS]Unload hv_vmbus module in pre-udev emergency shell;vmbus module can be unloaded at pre-udev stage, when hyper-v devices are not registered to vmbus.;Yaju Cao (yacao);Medium;Positive;Manual Only;;1;"For Gen1:
 1. Boot the kernel with rdbreak=pre-udev option

 For Gen2 
 1. Boot the kernel with rdbreak=pre-udev option
 You need to also add console=ttyS0 kernel option, remove 'rhgb quiet' in kernel command line of the VM, and use serial console to connect.

 Refer to https://mojo.redhat.com/docs/DOC-171022 to get access to guest serial console

";guest would boot into emergency shell;Test Case;RedHatEnterpriseLinux7/RHEL7-18773
591;;;;;;;;;2;"
 2. In emergency shell load some hyper-v modules,
 e.g.
 modprobe hv_storvsc
 modprobe hv_vmbus

 Note: For Gen2, you should connect to serial console because no keyboard can be used for Generation 2 guest in pre-udev stage.
  
";Try for all loadable hyper-v modules;;RedHatEnterpriseLinux7/RHEL7-18773
591;;;;;;;;;3;"3. Unload all hyper-v modules
 e.g. in the above case:
 rmmod hv_storvsc
 rmmod hv_vmbus

";No crash;;RedHatEnterpriseLinux7/RHEL7-18773
591;;;;;;;;;4;4. Load some hyper-v modules again, e.g. modprobe hv_storvsc;No crash;;RedHatEnterpriseLinux7/RHEL7-18773
592;RHEL7-18776;[Hyper-V][general operation]DUD problem testing with dmsetup on rdshell;;Yaju Cao (yacao);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-18776
593;RHEL7-18861;;;Yaju Cao (yacao);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-18861
594;RHEL7-22318;fs-qe case:/nfs-utils/commands/utils/rpc-mountd tag:nfs-utils,Tier1,Regression;/nfs-utils/commands/utils/rpc-mountd tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22318
595;RHEL7-22319;fs-qe case:/nfs-utils/commands/utils/showmount tag:nfs-utils,Tier1,Regression;/nfs-utils/commands/utils/showmount tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22319
596;RHEL7-22320;fs-qe case:/nfs-utils/commands/utils/mount tag:nfs-utils,Tier1,Regression;/nfs-utils/commands/utils/mount tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22320
597;RHEL7-22321;fs-qe case:/nfs-utils/commands/utils/osd_login tag:nfs-utils,Tier1,Regression;/nfs-utils/commands/utils/osd_login tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22321
598;RHEL7-22322;fs-qe case:/nfs-utils/commands/utils/start-statd tag:nfs-utils,tier1,regression;/nfs-utils/commands/utils/start-statd tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22322
599;RHEL7-22323;fs-qe case:/nfs-utils/commands/utils/exportfs tag:nfs-utils,Tier1,Regression;/nfs-utils/commands/utils/exportfs tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22323
600;RHEL7-22324;fs-qe case:/nfs-utils/commands/utils/mount-conf tag:nfs-utils,Tier1,Regression;/nfs-utils/commands/utils/mount-conf tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22324
601;RHEL7-22325;fs-qe case:/nfs-utils/commands/utils/nfsstat tag:nfs-utils,Tier1,Regression;/nfs-utils/commands/utils/nfsstat tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22325
602;RHEL7-22326;fs-qe case:/nfs-utils/commands/utils/sm-notify tag:nfs-utils,Tier1,Regression;/nfs-utils/commands/utils/sm-notify tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22326
603;RHEL7-22327;fs-qe case:/nfs-utils/commands/utils/umount tag:nfs-utils,Tier1,Regression;/nfs-utils/commands/utils/umount tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22327
604;RHEL7-22328;fs-qe case:/nfs-utils/commands/utils/nfsidmap tag:nfs-utils,Tier1,Regression;/nfs-utils/commands/utils/nfsidmap tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22328
605;RHEL7-22329;fs-qe case:/nfs-utils/commands/utils/blkmapd tag:nfs-utils,Tier1,Regression;/nfs-utils/commands/utils/blkmapd tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22329
606;RHEL7-22330;fs-qe case:/nfs-utils/commands/utils/rpcdebug tag:nfs-utils,Tier1,regression;/nfs-utils/commands/utils/rpcdebug tag:nfs-utils,Tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22330
607;RHEL7-22331;fs-qe case:/nfs-utils/commands/utils/rpc-idmapd tag:nfs-utils,Tier1,Regression;/nfs-utils/commands/utils/rpc-idmapd tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22331
608;RHEL7-22332;fs-qe case:/nfs-utils/commands/utils/rpc-statd tag:nfs-utils,Tier1,Regression;/nfs-utils/commands/utils/rpc-statd tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22332
609;RHEL7-22333;fs-qe case:/nfs-utils/commands/utils/rpc-nfsd tag:nfs-utils,Tier1,Regression;/nfs-utils/commands/utils/rpc-nfsd tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22333
610;RHEL7-22334;fs-qe case:/nfs-utils/commands/utils/rpc-gssd tag:nfs-utils,Tier1,Regression;/nfs-utils/commands/utils/rpc-gssd tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22334
611;RHEL7-22335;fs-qe case:/nfs-utils/commands/utils/nfsdcltrack tag:nfs-utils,Tier1,Regression;/nfs-utils/commands/utils/nfsdcltrack tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22335
612;RHEL7-22336;fs-qe case:/nfs-utils/commands/tools/common tag:nfs-utils,Tier1,;/nfs-utils/commands/tools/common tag:nfs-utils,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22336
613;RHEL7-22337;fs-qe case:/nfs-utils/commands/tools/nfsiostat tag:nfs-utils,Tier1,Regression;/nfs-utils/commands/tools/nfsiostat tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22337
614;RHEL7-22338;fs-qe case:/nfs-utils/commands/tools/mountstats tag:nfs-utils,tier1,regression;/nfs-utils/commands/tools/mountstats tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22338
615;RHEL7-22339;fs-qe case:/nfs-utils/Regression/bz816727-nfsidmap-command-needs-to-use-the-Verbosity-variable-in-conf-file tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz816727-nfsidmap-command-needs-to-use-the-Verbosity-variable-in-conf-file tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22339
616;RHEL7-22340;fs-qe case:/nfs-utils/Regression/bz811882-umount-cannot-remove-mount-entry-against-ipv6-from-etc-mtab tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz811882-umount-cannot-remove-mount-entry-against-ipv6-from-etc-mtab tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22340
617;RHEL7-22341;fs-qe case:/nfs-utils/Regression/bz1163891-bz1162714-Non-blocking-mode-for-writes-is-broken tag:nfs-utils,tier1,regression;/nfs-utils/Regression/bz1163891-bz1162714-Non-blocking-mode-for-writes-is-broken tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22341
618;RHEL7-22342;fs-qe case:/nfs-utils/Regression/invalid-mount tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/invalid-mount tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22342
619;RHEL7-22343;fs-qe case:/nfs-utils/Regression/bz863241-rpc-gssd-can-pick-wrong-credential-cache tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz863241-rpc-gssd-can-pick-wrong-credential-cache tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22343
620;RHEL7-22344;fs-qe case:/nfs-utils/Regression/bz1098592-Stop-Treat-IP-addresses-a-FQDN-rather-than-subnets tag:nfs-utils,Tier1,regression;/nfs-utils/Regression/bz1098592-Stop-Treat-IP-addresses-a-FQDN-rather-than-subnets tag:nfs-utils,Tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22344
621;RHEL7-22345;fs-qe case:/nfs-utils/Regression/bz1187277-rpc-mountd-can-set-up-pseudo-exports-without-the-correct-security-flavors tag:nfs-utils,tier1,regression;/nfs-utils/Regression/bz1187277-rpc-mountd-can-set-up-pseudo-exports-without-the-correct-security-flavors tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22345
622;RHEL7-22346;fs-qe case:/nfs-utils/Regression/bz1159234-ocf-heartbeat-nfsserver-does-not-umount-var-lib-nfs-on-shared-disk tag:nfs-utils,tier1,regression;/nfs-utils/Regression/bz1159234-ocf-heartbeat-nfsserver-does-not-umount-var-lib-nfs-on-shared-disk tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22346
623;RHEL7-22347;fs-qe case:/nfs-utils/Regression/Fujitsu-bz470483 tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/Fujitsu-bz470483 tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22347
624;RHEL7-22348;fs-qe case:/nfs-utils/Regression/bz947552-full-support-V3-of_MOUNT-protocol tag:nfs-utils,Tier1,;/nfs-utils/Regression/bz947552-full-support-V3-of_MOUNT-protocol tag:nfs-utils,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22348
625;RHEL7-22349;fs-qe case:/nfs-utils/Regression/bz815673-nfs4-mounts-hang-on-clients-with-many-exports-to-netgroups tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz815673-nfs4-mounts-hang-on-clients-with-many-exports-to-netgroups tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22349
626;RHEL7-22350;fs-qe case:/nfs-utils/Regression/bz963138-cmd-systemctl_start_nfs-cannot-always-success tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz963138-cmd-systemctl_start_nfs-cannot-always-success tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22350
627;RHEL7-22351;fs-qe case:/nfs-utils/Regression/bz880091-umount-fail tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz880091-umount-fail tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22351
628;RHEL7-22352;fs-qe case:/nfs-utils/Regression/bz450646-sbin-mount-nfs-fails-with-read-only-etc tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz450646-sbin-mount-nfs-fails-with-read-only-etc tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22352
629;RHEL7-22353;fs-qe case:/nfs-utils/Regression/bz731693-mount-nfs-needs-descriptive-error-when-nfsvers-specified-incorrectly tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz731693-mount-nfs-needs-descriptive-error-when-nfsvers-specified-incorrectly tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22353
630;RHEL7-22354;fs-qe case:/nfs-utils/Regression/local-invalid-mount-test tag:nfs-utils,Tier1,;/nfs-utils/Regression/local-invalid-mount-test tag:nfs-utils,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22354
631;RHEL7-22355;fs-qe case:/nfs-utils/Regression/bz240352-nfs-utils-postuninstall-scriptlet-failure-on-upgrade tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz240352-nfs-utils-postuninstall-scriptlet-failure-on-upgrade tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22355
632;RHEL7-22356;fs-qe case:/nfs-utils/Regression/bz784909-rpcgssd-linking-issue tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz784909-rpcgssd-linking-issue tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22356
633;RHEL7-22357;fs-qe case:/nfs-utils/Regression/service-cmd-exit-codes-and-param-passing tag:nfs-utils,Tier1,Sanity;/nfs-utils/Regression/service-cmd-exit-codes-and-param-passing tag:nfs-utils,Tier1,Sanity;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22357
634;RHEL7-22358;fs-qe case:/nfs-utils/Regression/bz1129790-respect-Nobody-User-Nobody-Group tag:nfs-utils,tier1,regression;/nfs-utils/Regression/bz1129790-respect-Nobody-User-Nobody-Group tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22358
635;RHEL7-22359;fs-qe case:/nfs-utils/Regression/bz600497-rpc-statd-service-crashes-after-an-ISS-scan tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz600497-rpc-statd-service-crashes-after-an-ISS-scan tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22359
636;RHEL7-22360;fs-qe case:/nfs-utils/Regression/bz801085 tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz801085 tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22360
637;RHEL7-22361;fs-qe case:/nfs-utils/Regression/bz920293-use_ipaddr-test tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz920293-use_ipaddr-test tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22361
638;RHEL7-22362;fs-qe case:/nfs-utils/Regression/bz803946-ESTALE-when-NFS-server-is-restarted tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz803946-ESTALE-when-NFS-server-is-restarted tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22362
639;RHEL7-22363;fs-qe case:/nfs-utils/Regression/bz708253-mount-will-give-warning-shown-rpc-idmapd-isnt-running tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz708253-mount-will-give-warning-shown-rpc-idmapd-isnt-running tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22363
640;RHEL7-22364;fs-qe case:/nfs-utils/Regression/bz529370-NFS-mount-options-can-be-lost-when-using-bg-option tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz529370-NFS-mount-options-can-be-lost-when-using-bg-option tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22364
641;RHEL7-22365;fs-qe case:/nfs-utils/Regression/bz715391-mixing-wildcard-and-host-subnet-exports-can-allow-unintended-hosts-to-mount tag:nfs-utils,Tier1,;/nfs-utils/Regression/bz715391-mixing-wildcard-and-host-subnet-exports-can-allow-unintended-hosts-to-mount tag:nfs-utils,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22365
642;RHEL7-22366;fs-qe case:/nfs-utils/Regression/bz1194802-rpc-mountd-leaks-memory-in-v4root_create-and-getexportent tag:nfs-utils,tier1,regression;/nfs-utils/Regression/bz1194802-rpc-mountd-leaks-memory-in-v4root_create-and-getexportent tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22366
643;RHEL7-22367;fs-qe case:/nfs-utils/Regression/bz541892-rpc-statd-and-rpc-mountd-can-end-up-using-the-same tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz541892-rpc-statd-and-rpc-mountd-can-end-up-using-the-same tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22367
644;RHEL7-22368;fs-qe case:/nfs-utils/Regression/bz998024-nfsd-sometimes-grants-delegations-too-soon-following-conflicting-open-requests tag:nfs-utils,Tier1,regression;/nfs-utils/Regression/bz998024-nfsd-sometimes-grants-delegations-too-soon-following-conflicting-open-requests tag:nfs-utils,Tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22368
645;RHEL7-22369;fs-qe case:/nfs-utils/Regression/bz824517-nfsv4-client-not-falling-back-to-ipv4-address tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz824517-nfsv4-client-not-falling-back-to-ipv4-address tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22369
646;RHEL7-22370;fs-qe case:/nfs-utils/Regression/rpcinfo-And-proc-fs-nfsd-info-Check tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/rpcinfo-And-proc-fs-nfsd-info-Check tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22370
647;RHEL7-22371;fs-qe case:/nfs-utils/Regression/enable-configurable-NFSv4-grace-period-and-NLM-grace-period-bz1058354 tag:nfs-utils,Tier1,regression;/nfs-utils/Regression/enable-configurable-NFSv4-grace-period-and-NLM-grace-period-bz1058354 tag:nfs-utils,Tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22371
648;RHEL7-22372;fs-qe case:/nfs-utils/Regression/bz513466-Failure-to-Unmount-UDP-NFS-Filesystems tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz513466-Failure-to-Unmount-UDP-NFS-Filesystems tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22372
649;RHEL7-22373;fs-qe case:/nfs-utils/Regression/bz478952-CRM-1873248-RHEL-5-2-refused-mount-for-Host tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz478952-CRM-1873248-RHEL-5-2-refused-mount-for-Host tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22373
650;RHEL7-22374;fs-qe case:/nfs-utils/Regression/bz507341-gssd-add-time-out-argument param:NFS_VERSION=4 tag:nfs-utils,Tier1,;/nfs-utils/Regression/bz507341-gssd-add-time-out-argument param:NFS_VERSION=4 tag:nfs-utils,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22374
651;RHEL7-22375;fs-qe case:/nfs-utils/Regression/bz507341-gssd-add-time-out-argument param:NFS_VERSION=3 tag:nfs-utils,Tier1,;/nfs-utils/Regression/bz507341-gssd-add-time-out-argument param:NFS_VERSION=3 tag:nfs-utils,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22375
652;RHEL7-22376;fs-qe case:/nfs-utils/Regression/bz1020176-access-nfs-file-hang-When-enable-FIPS-on-server tag:nfs-utils,Tier1,regression gset:--kernel-options=fips=1,;/nfs-utils/Regression/bz1020176-access-nfs-file-hang-When-enable-FIPS-on-server tag:nfs-utils,Tier1,regression gset:--kernel-options=fips=1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22376
653;RHEL7-22377;fs-qe case:/nfs-utils/Regression/bz804681-cannot-unmount-NFS-share-if-mount-version-2-is-disabled tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz804681-cannot-unmount-NFS-share-if-mount-version-2-is-disabled tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22377
654;RHEL7-22378;fs-qe case:/nfs-utils/Regression/mount-negotiates-suitable-version tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/mount-negotiates-suitable-version tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22378
655;RHEL7-22379;fs-qe case:/nfs-utils/Regression/bz1121451-start-statd-test tag:nfs-utils,Tier1,regression;/nfs-utils/Regression/bz1121451-start-statd-test tag:nfs-utils,Tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22379
656;RHEL7-22380;fs-qe case:/nfs-utils/Regression/Increase-root_maxkeys-and-root_maxbytes-sizes tag:nfs-utils,Tier1,regression;/nfs-utils/Regression/Increase-root_maxkeys-and-root_maxbytes-sizes tag:nfs-utils,Tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22380
657;RHEL7-22381;fs-qe case:/nfs-utils/Regression/bz492669-NFS-lock-recovery-on-server-reboot-fails tag:nfs-utils,Tier1,;/nfs-utils/Regression/bz492669-NFS-lock-recovery-on-server-reboot-fails tag:nfs-utils,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22381
658;RHEL7-22382;fs-qe case:/nfs-utils/Regression/bz523285-nfsnobody-4294967294-causes-idmapd-to-stop tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz523285-nfsnobody-4294967294-causes-idmapd-to-stop tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22382
659;RHEL7-22383;fs-qe case:/nfs-utils/Regression/bz769098-mount-nfs-does-not-probe-the-portmapper-using-TCP tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz769098-mount-nfs-does-not-probe-the-portmapper-using-TCP tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22383
660;RHEL7-22384;fs-qe case:/nfs-utils/Regression/bz497551-Inconsistent-default-anonuid-anongid-values tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz497551-Inconsistent-default-anonuid-anongid-values tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22384
661;RHEL7-22385;fs-qe case:/nfs-utils/Regression/service-rpcidmapd-bz1033708 tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/service-rpcidmapd-bz1033708 tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22385
662;RHEL7-22386;fs-qe case:/nfs-utils/Regression/bz471401-nfs-utils-rpm-verification-fails tag:nfs-utils,Tier1,regression;/nfs-utils/Regression/bz471401-nfs-utils-rpm-verification-fails tag:nfs-utils,Tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22386
663;RHEL7-22387;fs-qe case:/nfs-utils/Regression/bz599198-mounting-subdirectory-of-non-user-account-fails tag:nfs-utils,Tier1,Regression;/nfs-utils/Regression/bz599198-mounting-subdirectory-of-non-user-account-fails tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22387
664;RHEL7-22388;fs-qe case:/nfs-utils/function/nfs-referrals-local tag:nfs-utils,tier1,regression;/nfs-utils/function/nfs-referrals-local tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22388
665;RHEL7-22389;fs-qe case:/nfs-utils/function/nfs-mount-options-common param:IPVER=4 tag:nfs-utils,Tier1,Regression;/nfs-utils/function/nfs-mount-options-common param:IPVER=4 tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22389
666;RHEL7-22390;fs-qe case:/nfs-utils/function/nfs-mount-options-common param:IPVER=6 tag:nfs-utils,Tier1,Regression;/nfs-utils/function/nfs-mount-options-common param:IPVER=6 tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22390
667;RHEL7-22391;fs-qe case:/nfs-utils/function/nfs-referrals tag:nfs-utils,tier1,regression gset:--arch=x86_64,;/nfs-utils/function/nfs-referrals tag:nfs-utils,tier1,regression gset:--arch=x86_64,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22391
668;RHEL7-22392;fs-qe case:/nfs-utils/function/nfs-junction-support tag:nfs-utils,Tier1,Function gset:--arch=x86_64,;/nfs-utils/function/nfs-junction-support tag:nfs-utils,Tier1,Function gset:--arch=x86_64,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22392
669;RHEL7-22393;fs-qe case:/nfs-utils/function/tcp-wrapper-support tag:nfs-utils,tier1,function;/nfs-utils/function/tcp-wrapper-support tag:nfs-utils,tier1,function;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22393
670;RHEL7-22394;fs-qe case:/nfs-utils/function/nfs-nis-idmap tag:nfs-utils,Tier1,Regression;/nfs-utils/function/nfs-nis-idmap tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22394
671;RHEL7-22395;fs-qe case:/nfs-utils/function/export-mount-local param:ssched=yes tag:nfs-utils,tier1,function;/nfs-utils/function/export-mount-local param:ssched=yes tag:nfs-utils,tier1,function;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22395
672;RHEL7-22396;fs-qe case:/nfs-utils/function/pnfs/blklayout tag:nfs-utils,tier1,regression;/nfs-utils/function/pnfs/blklayout tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22396
673;RHEL7-22397;fs-qe case:/nfs-utils/function/nfs-lookupcache-test tag:nfs-utils,Tier1,Regression;/nfs-utils/function/nfs-lookupcache-test tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22397
674;RHEL7-22398;fs-qe case:/nfs-utils/function/idmapping/bz1223465-nss_getpwnam-does-not-ignore-case-when-comparing-domain-names tag:nfs-utils,tier1,regression;/nfs-utils/function/idmapping/bz1223465-nss_getpwnam-does-not-ignore-case-when-comparing-domain-names tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22398
675;RHEL7-22399;fs-qe case:/nfs-utils/function/idmapping/base param:enable_idmapping=no tag:nfs-utils,Tier1,;/nfs-utils/function/idmapping/base param:enable_idmapping=no tag:nfs-utils,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22399
676;RHEL7-22400;fs-qe case:/nfs-utils/function/idmapping/base param:enable_idmapping=yes tag:nfs-utils,Tier1,;/nfs-utils/function/idmapping/base param:enable_idmapping=yes tag:nfs-utils,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22400
677;RHEL7-22401;fs-qe case:/nfs-utils/function/export-mount tag:nfs-utils,tier1,function;/nfs-utils/function/export-mount tag:nfs-utils,tier1,function;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22401
678;RHEL7-22402;fs-qe case:/nfs-utils/function/nfs-mount-options-all tag:nfs-utils,Tier1,Regression;/nfs-utils/function/nfs-mount-options-all tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22402
679;RHEL7-22403;fs-qe case:/nfs-utils/services/upstart/rpcidmapd tag:nfs-utils,tier1,regression;/nfs-utils/services/upstart/rpcidmapd tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22403
680;RHEL7-22404;fs-qe case:/nfs-utils/services/upstart/rpcsvcgssd tag:nfs-utils,tier1,regression;/nfs-utils/services/upstart/rpcsvcgssd tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22404
681;RHEL7-22405;fs-qe case:/nfs-utils/services/upstart/rpcgssd tag:nfs-utils,tier1,regression;/nfs-utils/services/upstart/rpcgssd tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22405
682;RHEL7-22406;fs-qe case:/nfs-utils/services/upstart/nfslock tag:nfs-utils,tier1,regression;/nfs-utils/services/upstart/nfslock tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22406
683;RHEL7-22407;fs-qe case:/nfs-utils/services/upstart/nfs tag:nfs-utils,tier1,regression;/nfs-utils/services/upstart/nfs tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22407
684;RHEL7-22408;fs-qe case:/nfs-utils/services/systemd/rpcidmapd tag:nfs-utils,tier1,regression;/nfs-utils/services/systemd/rpcidmapd tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22408
685;RHEL7-22409;fs-qe case:/nfs-utils/services/systemd/nfsblkmap tag:nfs-utils,tier1,regression;/nfs-utils/services/systemd/nfsblkmap tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22409
686;RHEL7-22410;fs-qe case:/nfs-utils/services/systemd/rpcgssd tag:nfs-utils,tier1,regression;/nfs-utils/services/systemd/rpcgssd tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22410
687;RHEL7-22411;fs-qe case:/nfs-utils/services/systemd/nfslock tag:nfs-utils,tier1,regression;/nfs-utils/services/systemd/nfslock tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22411
688;RHEL7-22412;fs-qe case:/nfs-utils/services/systemd/nfs tag:nfs-utils,tier1,regression;/nfs-utils/services/systemd/nfs tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22412
689;RHEL7-22413;fs-qe case:/nfs-utils/Security/bz697981-CVE-2011-1749-nfs-utils-mount-nfs-fails-to-anticipate-RLIMIT_FSIZE tag:nfs-utils,Tier1,;/nfs-utils/Security/bz697981-CVE-2011-1749-nfs-utils-mount-nfs-fails-to-anticipate-RLIMIT_FSIZE tag:nfs-utils,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22413
690;RHEL7-22414;fs-qe case:/nfs-utils/rpcbind/rpc_issue tag:nfs-utils,Tier1,Regression;/nfs-utils/rpcbind/rpc_issue tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22414
691;RHEL7-22415;fs-qe case:/nfs-utils/krb5-test/krb5-common-local tag:nfs-utils,tier1,regression;/nfs-utils/krb5-test/krb5-common-local tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22415
692;RHEL7-22416;fs-qe case:/nfs-utils/krb5-test/base tag:nfs-utils,Tier1,Regression;/nfs-utils/krb5-test/base tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22416
693;RHEL7-22417;fs-qe case:/nfs-utils/krb5-test/base tag:nfs-utils,Tier1,Regression gset:--kernel-options-post=fips=1,;/nfs-utils/krb5-test/base tag:nfs-utils,Tier1,Regression gset:--kernel-options-post=fips=1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22417
694;RHEL7-22418;fs-qe case:/nfs-utils/krb5-test/bz1216156-Failure-to-renew-Kerberos-credentials-while-running-with-uid-0 tag:nfs-utils,tier1,regression;/nfs-utils/krb5-test/bz1216156-Failure-to-renew-Kerberos-credentials-while-running-with-uid-0 tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22418
695;RHEL7-22419;fs-qe case:/nfs-utils/krb5-test/bz1052902-login-user-HOME-on-nfs4-krb5 tag:nfs-utils,Tier1,Regression;/nfs-utils/krb5-test/bz1052902-login-user-HOME-on-nfs4-krb5 tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22419
696;RHEL7-22420;fs-qe case:/nfs-utils/stress/fast-mount param:RESVPORT= tag:nfs-utils,Tier1,Regression;/nfs-utils/stress/fast-mount param:RESVPORT= tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22420
697;RHEL7-22421;fs-qe case:/nfs-utils/stress/fast-mount param:RESVPORT=yes tag:nfs-utils,Tier1,Regression;/nfs-utils/stress/fast-mount param:RESVPORT=yes tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22421
698;RHEL7-22422;fs-qe case:/nfs-utils/stress/fast-mount-local param:RESVPORT= tag:nfs-utils,Tier1,Regression;/nfs-utils/stress/fast-mount-local param:RESVPORT= tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22422
699;RHEL7-22423;fs-qe case:/nfs-utils/stress/fast-mount-local param:RESVPORT=yes tag:nfs-utils,Tier1,Regression;/nfs-utils/stress/fast-mount-local param:RESVPORT=yes tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22423
700;RHEL7-22424;fs-qe case:/nfs-utils/stress/loopback tag:nfs-utils,Tier1,Regression;/nfs-utils/stress/loopback tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22424
701;RHEL7-22425;fs-qe case:/nfs-utils/stress/umount-after-heavy-write tag:nfs-utils,Tier1,;/nfs-utils/stress/umount-after-heavy-write tag:nfs-utils,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22425
702;RHEL7-22426;fs-qe case:/nfs-utils/stress/exportfs-race-test tag:nfs-utils,Tier1,;/nfs-utils/stress/exportfs-race-test tag:nfs-utils,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22426
703;RHEL7-22427;fs-qe case:/nfs-utils/stress/file-copying tag:nfs-utils,tier1,regression;/nfs-utils/stress/file-copying tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22427
704;RHEL7-22428;fs-qe case:/nfs-utils/nfs4-acl/common tag:nfs-utils,tier1,function;/nfs-utils/nfs4-acl/common tag:nfs-utils,tier1,function;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-22428
705;RHEL7-23849;[Hyper-V][Synthethic 2D frame buffer]Verify console screen is refreshed when guest panic with kdump disabled; Related bug Bug 1247678 - [Hyper-V][RHEL 7.2] hyperv_fb not refresh the VM screen by force on VM panic;Yaju Cao (yacao);Medium;Positive;Manual Only;;1;"Note: This is not supported in GUI mode, so you should change to command line before you run this case.
 
 1. Disable kdump status
 systemctl stop kdump
 systemctl status kdump
 
 2. Trigger system crash
 echo c > /proc/sysrq-trigger
 
 3. Check the console screen.
​​";" 3. Console screen is refreshed with crash log when kdump is disabled.
 
 Note:
 it has issue in below conditions:
 1. System with GUI loaded
 2. kdump enabled
 The console will not refresh when system is crash if either of above two conditions is true.
 For conditions one if add 'panic=10' to kernel command line,the reboot will successfully.
 https://bugzilla.redhat.com/show_bug.cgi?id=1247678";Test Case;RedHatEnterpriseLinux7/RHEL7-23849
706;RHEL7-26557;Refer to: bug 1212077 Add support for QMP event notification when migration fini...;Refer to: bug 1212077 Add support for QMP event notification when migration finishes;Fangge Jin (fjin);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-26557
707;RHEL7-31564;"[Migration]Kill DST libvirtd at ""active"" status during Perform phase of live migration";"Kill the qemu-kvm process(or restart libvirtd) on target host during migration
 https://bugzilla.redhat.com/show_bug.cgi?id=1242904#c15 ";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;Start a guest with disk based on nfs server;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-31564
707;;;;;;;;;2;"Check the owner of the image file: 
 
* # ll /90121/fjin/rhel6.6-GUI.img -Z
-rw-r--r--. qemu qemu system_u:object_r:nfs_t:s0 /90121/fjin/rhel6.6-GUI.img";​​;;RedHatEnterpriseLinux7/RHEL7-31564
707;;;;;;;;;3;"Migrate the guest to target host, before migration finished, kill libvirtd on target host. 
 
* # virsh migrate rhel6.6-GUI qemu+ssh://10.66.4.141/system --verbose --live
* # pkill -9 libvirtd
";"
 Output: Migration: [ 4 %]error: operation failed: migration job: unexpectedly failed

​​";;RedHatEnterpriseLinux7/RHEL7-31564
707;;;;;;;;;4;"Check the owner of the image file: 
 
* # ll /90121/fjin/rhel6.6-GUI.img -Z
-rw-r--r--. qemu qemu system_u:object_r:nfs_t:s0 /90121/fjin/rhel6.6-GUI.img";The owner of the shared image file is same as before,;;RedHatEnterpriseLinux7/RHEL7-31564
707;;;;;;;;;5;"Check guest status on target host:
 
* # virsh list --all
";Guest doesn't exist or is shutoff on target host.;;RedHatEnterpriseLinux7/RHEL7-31564
707;;;;;;;;;6;"Check domain status on source host:
 
* # virsh list
 Id    Name                           State
 ----------------------------------------------------
  1     rhel6.6-GUI                  running

 
* ping {guest_ip}
* Do some disk I/O operations in guest
";"Guest is running on source host and can respond 
";;RedHatEnterpriseLinux7/RHEL7-31564
708;RHEL7-31569;[Hyper-V][General operation]Encrypt root partition and boot into the system;When install system, select to encrypt root partition. And make sure can boot into system after install complete;Yaju Cao (yacao);Medium;Positive;Manual Only;;1;"1. Attach RHEL ISO and prepare to install
​​";;Test Case;RedHatEnterpriseLinux7/RHEL7-31569
708;;;;;;;;;2;"2. Boot VM, at Installation Summary page, click 'Installation Destination'
​​";​​;;RedHatEnterpriseLinux7/RHEL7-31569
708;;;;;;;;;3;"3. Check the 'Encryption' option, input password, and complete the configuration to start installation
​​";​​;;RedHatEnterpriseLinux7/RHEL7-31569
708;;;;;;;;;4;4. After installation complete, boot the guest, input the password for the disk set at step 3.;Password could be input, and system could boot up.;;RedHatEnterpriseLinux7/RHEL7-31569
709;RHEL7-31709;[-k -K] keepalive support for virsh - scenario 2;To test that if the network is recovered within k*(K+1)s, the virsh connection will be kept.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1. Disable the keepalive in remote libvirtd:
 # cat libvirtd.conf
 keepalive_interval=0
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-31709
709;;;;;;;;;2;"On local host: 
 # virsh -k4 -K5 -c qemu+ssh://10.66.6.6/system
 （# iptables -A INPUT -s 10.66.6.6 -j DROP on local host)
 
 virsh # list
 (virsh hangs, then clear iptables rule within 24s)
  Id    Name                           State
 ----------------------------------------------------
  2     rhel6.6-GUI                    running
 
 virsh # list
  Id    Name                           State
 ----------------------------------------------------
  2     rhel6.6-GUI                    running
​​";"Virsh client doesn't close the connection
​​";;RedHatEnterpriseLinux7/RHEL7-31709
710;RHEL7-31710;[-k -K] keepalive support for virsh - scenario 3;To test that when disable the keepalive mechinasm in virsh, virsh will not close the connection.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Scenario A:
 1. Disable the keepalive in remote libvirtd:
 # cat libvirtd.conf
 keepalive_interval=0  
 
 2. On local host:
 # virsh -k0 -c qemu+ssh://10.66.6.6/system
 (# iptables -A INPUT -s 10.66.6.6 -j DROP on local host)
 virsh # list
 (virsh hangs, after 1min, clear the iptables rule, wait a while, virsh will return)
  Id    Name                           State
 ----------------------------------------------------
  2     rhel6.6-GUI                    running
 
 virsh # list
  Id    Name                           State
 ----------------------------------------------------
  2     rhel6.6-GUI                    running";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-31710
710;;;;;;;;;2;"Scenario B(Bug 1243684):
 1. Set the value of keepalive_interval to its default value
 
 2. #systemctl restart libvirtd
 
 3. On client :
 # virsh -k0 -c qemu+ssh://10.66.4.117/system 
 root@10.66.4.117's password: 
 Welcome to virsh, the virtualization interactive terminal. 
 Type:  'help' for help with commands 
             'quit' to quit 
 
 virsh # 
 
 4.Set iptables rule on client：
 # iptables -A INPUT -s 10.66.4.117 -j DROP 
 
  5.Within 30s, issue command ""list"" on client, it will hang: 
 virsh # list 
 
  6.After 30s when the connection has been reset by server, clear iptables rule on client: 
 # iptables -F 
 
  7.Wait several minutes, 
 virsh # list
 error: Disconnected from qemu+ssh://10.66.4.117/system due to I/O error";"
​​";;RedHatEnterpriseLinux7/RHEL7-31710
711;RHEL7-31711;[keepalive] keepalive support for virsh - scenario 4;To test that virsh keepalive and libvirtd keepalive can work well at the same time.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"On local host:
 # virsh -k10 -K3 -c qemu+ssh://10.66.6.6/system
 
​​";"virsh receives the keepalive request from the remote libvirtd every 5s, there are such log in the terminal:
 
 2015-09-01 09:44:06.407+0000: 29659: debug : virKeepAliveCheckMessage:398 : Got keepalive request from client 0x7ff240ac8e30
 2015-09-01 09:44:06.407+0000: 29659: debug : virKeepAliveMessage:104 : Sending keepalive response to client 0x7ff240ac8e30
 2015-09-01 09:44:11.413+0000: 29659: debug : virKeepAliveCheckMessage:398 : Got keepalive request from client 0x7ff240ac8e30
 2015-09-01 09:44:11.413+0000: 29659: debug : virKeepAliveMessage:104 : Sending keepalive response to client 0x7ff240ac8e30
 2015-09-01 09:44:16.420+0000: 29659: debug : virKeepAliveCheckMessage:398 : Got keepalive request from client 0x7ff240ac8e30
 2015-09-01 09:44:16.420+0000: 29659: debug : virKeepAliveMessage:104 : Sending keepalive response to client 0x7ff240ac8e30
 ...";Test Case;RedHatEnterpriseLinux7/RHEL7-31711
711;;;;;;;;;2;"On local host, drop the network packages from remote host:
 # iptables -A INPUT -s 10.66.6.6 -j DROP 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-31711
711;;;;;;;;;3;"In the virsh, do ""list"":
 
 virsh # list
​​";"virsh hangs for 40s, during this period, virsh send 3 keepalive request every 10 seconds without receiving any response, then returns with error. There are such log in the terminal:
 
 2015-09-01 09:44:26.610+0000: 29658: debug : virKeepAliveMessage:104 : Sending keepalive request to client 0x7ff240ac8e30
 2015-09-01 09:44:36.610+0000: 29659: debug : virKeepAliveMessage:104 : Sending keepalive request to client 0x7ff240ac8e30
 2015-09-01 09:44:46.620+0000: 29659: debug : virKeepAliveMessage:104 : Sending keepalive request to client 0x7ff240ac8e30
 2015-09-01 09:44:56.623+0000: 29659: warning : virKeepAliveTimerInternal:143 : No response from client 0x7ff240ac8e30 after 3 keepalive messages in 40 seconds
 error: Disconnected from qemu:///system due to keepalive timeout
 error: Failed to list domains
 error: internal error: connection closed due to keepalive timeout
 virsh #";;RedHatEnterpriseLinux7/RHEL7-31711
712;RHEL7-31906;[domifaddr][-q] Get network interfaces' addresses for a running domain in quiet mode;"Refer to:
Bug 1209312 - virsh domifaddr cannot get any output in quiet mode - FIXED
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"# virsh -q domifaddr r71 --source agent 
 lo       00:00:00:00:00:00     ipv4        127.0.0.1/8 
 -        -                              ipv6        ::1/128 
 eth0   52:54:00:7f:d6:5e       ipv4        192.168.122.203/24
 -        -                              ipv6         fe80::5054:ff:fe7f:d65e/64
 eth1   52:54:00:3b:a6:e4     N/A         N/A";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-31906
712;;;;;;;;;2;"# virsh -q domifaddr r71 --source lease 
 vnet0      52:54:00:7f:d6:5e    ipv4         192.168.122.203/24";​​;;RedHatEnterpriseLinux7/RHEL7-31906
712;;;;;;;;;3;"# virsh -q domifaddr r71 
 vnet0      52:54:00:7f:d6:5e     ipv4         192.168.122.203/24";​​;;RedHatEnterpriseLinux7/RHEL7-31906
713;RHEL7-31911;[event] [graphics] List graphics events - 1236585;;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1.Prepare a running guest with spice and vnc graphics
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-31911
713;;;;;;;;;2;2.# virsh event --loop --event graphics;​​;;RedHatEnterpriseLinux7/RHEL7-31911
713;;;;;;;;;3;"3.Connect to r71 with spice and then close:
 # remote-viewer spice://10.66.6.6:5903
 
 Check the output of ""virsh event"":
 event 'graphics' for domain r71: connect local[IPv4 10.66.6.6 5903] remote[IPv4 10.66.6.6 48910] 
 event 'graphics' for domain r71: initialize local[IPv4 10.66.6.6 5903] remote[IPv4 10.66.6.6 48910] none
 ................
 event 'graphics' for domain r71: disconnect local[IPv4 10.66.6.6 5903] remote[IPv4 10.66.6.6 48910] 
 ...............";​​;;RedHatEnterpriseLinux7/RHEL7-31911
713;;;;;;;;;4;"4.Connect to r71 with vnc and then close:
 #remote-viewer vnc://10.66.6.6:5902
 
 .Check the output of ""virsh event"":
 event 'graphics' for domain r71: connect local[IPv4 0.0.0.0 5902] remote[IPv4 10.66.6.6 39167] none
 event 'graphics' for domain r71: initialize local[IPv4 0.0.0.0 5902] remote[IPv4 10.66.6.6 39167] none
 event 'graphics' for domain r71: disconnect local[IPv4 0.0.0.0 5902] remote[IPv4 10.66.6.6 39167] none";​​;;RedHatEnterpriseLinux7/RHEL7-31911
714;RHEL7-31913;[guest agent] Execute the command via guest agent after logged into the graphical desktop of the guest - 1236924;;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 0. Prepare a running guest with GUI and unix channel:
 ...
     <channel type='unix'>
       <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/rhel7d2.org.qemu.guest_agent.0'/>
       <target type='virtio' name='org.qemu.guest_agent.0' state='connected'/>
       <alias name='channel1'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>
 ...
 
 Install qemu-guest-agent in guest.";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-31913
714;;;;;;;;;2;"2.Get the domtime of rhel7.0
 # virsh domtime rhel7.0
 Time: 1435917493";​​;;RedHatEnterpriseLinux7/RHEL7-31913
714;;;;;;;;;3;"3.Launch virt-manager, log into the graphical desktop of rhel7.0.
​​";​​;;RedHatEnterpriseLinux7/RHEL7-31913
714;;;;;;;;;4;"4.Get the domtime of rhel7.0
 # virsh domtime rhel7.0
 Time: 1435917554";​​;;RedHatEnterpriseLinux7/RHEL7-31913
714;;;;;;;;;5;"5.Shutdown rhel7.0 with mode=agent
 # virsh shutdown rhel7.0 --mode agent
 Domain rhel7.0 is being shutdown
 
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  64    rhel7.0                        shutoff";​​;;RedHatEnterpriseLinux7/RHEL7-31913
714;;;;;;;;;6;"6.Start rhel7.0 again, log into the graphical desktop of rhel7.0, and shutdown without option.
 # virsh shutdown rhel7.0
 Domain rhel7.0 is being shutdown
 
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  64    rhel7.0                        shutoff";​​;;RedHatEnterpriseLinux7/RHEL7-31913
714;;;;;;;;;7;"7.Check the libvirtd log, there is NO such error log:
  error : qemuAgentCommand:1120 : Guest agent is not responding: Guest agent disappeared while executing command";​​;;RedHatEnterpriseLinux7/RHEL7-31913
715;RHEL7-32028;[Hyper-V][Keyboard]Verify startup with key 'Num Lcok' is enabled, bug 1179132.;Verify startup with key 'Num Lcok' is enabled, change Num Lock status  can be correctly reflected in VM;Yaju Cao (yacao);Medium;Positive;Manual Only;;1;"1.'Num Lock' is enabled
 2. Start the VM.
 3. Press the number key.
 4. Switch to other host.
 5. Check the number key.
 6. Switch back to original host and enter the number.
";"2. The light is kept as on and can enter the number.
 6. The light is kept as on and can enter the number.";Test Case;RedHatEnterpriseLinux7/RHEL7-32028
716;RHEL7-32052;[Migration] Migrate vm with FC & NPIV - not supported yet;"Bug 726797 - [Intel 7.0 FEAT] libVirt, Seamless VM migration with FC's NPIV feature - (migration is not supported in this bug)
Bug 1404963 - [RFE] fc_host support in virtio-scsi guests, with support for live migration";Fangge Jin (fjin);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-32052
717;RHEL7-32187;[virtio-win][viostor] Hotplug/Hotunplug virtual block device in a loop;[virtio-win][viostor] Hotplug/Hotunplug virtual block device in a loop;Yu Wang (wyu);High;Positive;Not Automated;;1;"1.start VM with virtio-blk-pci(both system disk and data disk):
 CLI:
 -object iothread,id=thread0 -drive file=win.raw,if=none,id=drive-virtio-disk1,format=raw,serial=mike_cao1,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk1,id=virtio-disk1 \
 -drive file=test.raw,if=none,id=drive-hotadd,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-hotadd,id=hotadd
​​";"1. guest boot up correctly 
  ";Test Case;RedHatEnterpriseLinux7/RHEL7-32187
717;;;;;;;;;2;" 2.check whether viostor.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled viostor.sys verifier:
    #verifier.exe /standard /driver viostor.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings";"2. All the Standards flags are checked ,the verified driver fields shows ""viostor.sys""";;RedHatEnterpriseLinux7/RHEL7-32187
717;;;;;;;;;3;"3. repeat hotplug /hot unplug at  least 100 times
 #!/bin/bash
 # some simply scripts for virtio-blk-pci device hotplug/unplug in a loop
 let i=0
 exec 3<>/dev/tcp/localhost/4444 #note modify this to qmp port
 echo -e ""{ 'execute': 'qmp_capabilities' }"" >&3
 read response <&3
 echo $response
 while [ $i -lt 100 ]
 do
 echo -e ""{'execute':'device_del','arguments':{'id':'hotadd'}}"" >&3
 sleep 3 ;
 read response <&3
 echo ""$i: $response""
 sleep 3 ;
 echo -e "" {'execute':'__com.redhat_drive_add','arguments':{'file':'test.raw','id':'drive-hotadd','format':'raw','cache':'none','werror':'stop','rerror':'stop','serial':'aaabbbccee'}}"">&3 ;
 read response <&3
 echo ""$i: $response""
 sleep 5
 echo -e ""{'execute':'device_add','arguments':{'driver':'virtio-blk-pci','iothread':'thread0','id':'hotadd','drive':'drive-hotadd'}}"" >&3
 sleep 3
 read response <&3
 echo ""$i: $response""
 let i=$i+1
 done";"3.hotplug/unplug without any error
​​";;RedHatEnterpriseLinux7/RHEL7-32187
717;;;;;;;;;4;4.Run Crystal on the hotplugged disk.;"4.run without error
";;RedHatEnterpriseLinux7/RHEL7-32187
718;RHEL7-32196;[virtio-win][viostor]Live migration guest with viostor driver enabled;[virtio-win][viostor]Live migration guest with viostor driver enabled;Yu Wang (wyu);High;Positive;Not Automated;;1;"1.start VM with virtio-blk-pci(both system disk and data disk):
 CLI:
 -object iothread,id=thread0 -drive file=win.raw,if=none,id=drive-virtio-disk1,format=raw,serial=mike_cao1,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk1,id=virtio-disk1
 -drive file=test.raw,if=none,id=drive-virtio-disk0,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk0,id=virtio-disk0";1. Guest can be boot successfully ;Test Case;RedHatEnterpriseLinux7/RHEL7-32196
718;;;;;;;;;2;" 2.check whether viostor.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled viostor.sys verifier:
    #verifier.exe /standard /driver viostor.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings ";"Driver can be installed successfully 
 All the Standards flags are checked ,the verified driver fields shows ""viostor.sys"" ";;RedHatEnterpriseLinux7/RHEL7-32196
718;;;;;;;;;3;"3. start listening port in another host :
 CLI:
 -object iothread,id=thread0 -drive file=win.raw,if=none,id=drive-virtio-disk1,format=raw,serial=mike_cao1,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk1,id=virtio-disk1
 -drive file=test.raw,if=none,id=drive-virtio-disk0,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk0,id=virtio-disk0 -incoming tcp:0:5888 ";"3.listening port start successfully 
​​";;RedHatEnterpriseLinux7/RHEL7-32196
718;;;;;;;;;4;"4.do live migration:
    #telnet source_HostIP tcp_port
   {""execute"": ""qmp_capabilities""}
   {""execute"": ""migrate"",""arguments"":{""uri"": ""tcp:0:5888""}}";"4.Check the output of telnet, it should contain the greeting message like the
 following: 
 {""QMP"": {""version"": {""qemu"": {""micro"": 0, ""minor"": 8, ""major"": 2}, ""package"": ""(qemu-kvm-rhev-2.8.0-3.el7)""}, ""capabilities"": []}}
 {""return"": {}}";;RedHatEnterpriseLinux7/RHEL7-32196
718;;;;;;;;;5;"5. check migration status until it is finished.
 {""execute"":""query-migrate""}";"5.{""return"": {""status"": ""completed"", ""downtime"": 784, ""total-time"": 39211,
 ""ram"": {""total"": 4312203264, ""remaining"": 311296, ""transferred"": 1338822235}}}";;RedHatEnterpriseLinux7/RHEL7-32196
719;RHEL7-32789;[event] [tray-change] List tray change events - 1226849;;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 
 1.Prepare a running guest with cdrom:
 ...
     <disk type='file' device='cdrom'>
       <driver name='qemu' type='raw'/>
       <backingStore/>
       <target dev='hdc' bus='ide'/>
       <readonly/>
       <alias name='ide0-1-0'/>
       <address type='drive' controller='0' bus='1' target='0' unit='0'/>
     </disk>
 ...
 
 
 
 
 
 
 
 
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-32789
719;;;;;;;;;2;"2.Create a iso file 
 #qemu-img create /var/lib/libvirt/image/test.img 100M";​​;;RedHatEnterpriseLinux7/RHEL7-32789
719;;;;;;;;;3;"3.Open the second terminal, run the 'event-test.py' python script to catch the event
 
 # /usr/share/doc/libvirt-python-1.2.17/examples/event-test.py
 Using uri:qemu:///system";​​;;RedHatEnterpriseLinux7/RHEL7-32789
719;;;;;;;;;4;"4.Open third terminal, run the virsh event command to catch the events
 
 #virsh event --all --loop
​​";​​;;RedHatEnterpriseLinux7/RHEL7-32789
719;;;;;;;;;5;"5.Run the change-media command:
 
 # virsh change-media rhel7-4 hdc /var/lib/libvirt/images/test.img 
 Successfully updated media.";​​;;RedHatEnterpriseLinux7/RHEL7-32789
719;;;;;;;;;6;"6.Check the events in the second terminal:
 
 myDomainEventTrayChangeCallback: Domain rhel7-4(533) tray change devAlias: drive-ide0-1-0 reason: 0
 myDomainEventTrayChangeCallback: Domain rhel7-4(533) tray change devAlias: drive-ide0-1-0 reason: 1
​​";​​;;RedHatEnterpriseLinux7/RHEL7-32789
719;;;;;;;;;7;"7.Check the events in the third terminal:
 
 event 'tray-change' for domain rhel7-4 disk drive-ide0-1-0: opened
 event 'tray-change' for domain rhel7-4 disk drive-ide0-1-0: closed";​​;;RedHatEnterpriseLinux7/RHEL7-32789
720;RHEL7-32790;[edit] - Edit guest XML with smbios /sysinfo /idmap /metadata and memory device - 1223631;"Refer to:
Bug 1223631 - smbios, sysinfo, idmap, metadata will lose if we set a memory device in the xml
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 1.Edit a guest xml with smbios /sysinfo /idmap /metadata and memory device: 
 # virsh edit rhel7d1
 ...
   <maxMemory slots='16' unit='KiB'>2560000</maxMemory>
   <memory unit='KiB'>1024000</memory>
   <currentMemory unit='KiB'>1024000</currentMemory>
 ...
   <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.1.0'>hvm</type>
     <boot dev='hd'/>
     <boot dev='cdrom'/>
     <bootmenu enable='yes' timeout='3000'/>
     <bios useserial='yes' rebootTimeout='0'/>
     <smbios mode='sysinfo'/>
   </os>
   <sysinfo type='smbios'>
     <bios>
       <entry name='vendor'>LENOVO</entry>
     </bios>
   </sysinfo>
   <idmap>
     <uid start='0' target='1000' count='10'/>
     <gid start='0' target='1000' count='10'/>
   </idmap>
 ...
     <memory model='dimm'>
       <target>
         <size unit='KiB'>512000</size>
         <node>1</node>
       </target>
     </memory>
 ...
 Domain rhel7d1 XML configuration edited.
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-32790
720;;;;;;;;;2;2.Recheck the xml, all the attributes still exist.;​​;;RedHatEnterpriseLinux7/RHEL7-32790
721;RHEL7-32792;[negative] Reject negative values in some virsh commands. - 1159171;Reject negative values in some virsh commands. - 1159171;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" # virsh blockresize --size -2048 rhel6.6-GUI vda
 error: Numeric value '-2048' for <size> option is malformed or out of range
 
 # virsh blockresize --size -2 rhel6.6-GUI vda
 error: Numeric value '-2' for <size> option is malformed or out of range
 
 # virsh setmem rhel6.6-GUI --size -2048
 error: Numeric value '-2048' for <size> option is malformed or out of range
 
 # virsh setmaxmem rhel6.6-GUI --size -2048
 error: Numeric value '-2048' for <size> option is malformed or out of range
 
 # virsh freepages --cellno 0 --pagesize -2048
 error: Numeric value '-2048' for <pagesize> option is malformed or out of range
 
 # virsh allocpages --cellno 0 --pagesize -2048 --pagecount 0
 error: Numeric value '-2048' for <pagesize> option is malformed or out of range";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-32792
722;RHEL7-32956;[Migration] Report reasonable error when QEMU fails with incoming migration - 1090093;"Report reasonable error when QEMU fails with incoming migration
";Fangge Jin (fjin);High;Negative;Not Automated;;1;"1.Prepare a running guest with 4G mem and virtio-ballon-pci enabled in the guest's xml
 
 
* #virsh dumpxml rhel7
--
 <memory unit='KiB'>4194304</memory>
   <currentMemory unit='KiB'>4194304</currentMemory>
 --
     <memballoon model='virtio'>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
     </memballoon>

 
* #virsh dumpxml rhel7f >rhel7.xml
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-32956
722;;;;;;;;;2;"2.Prepare the script in the target host
 
* #mv /usr/libexec/qemu-kvm /usr/libexec/qemu-kvm.orig
* # cat /usr/libexec/qemu-kvm
#!/bin/bash
     args=()
     i=0
     while [[ $# -gt 0 ]]; do
         if [[ ""$1"" == 4096 ]]; then
             args[i]=1024
         elif [[ ""$1"" == virtio-balloon-pci ]]; then
             i=$[i-2]
         else
             args[i]=""$1""
         fi
         i=$[i+1]
         shift
     done
 exec /usr/libexec/qemu-kvm.orig ""${args[@]}""
 
* 
 # chmod a+x /usr/libexec/qemu-kvm
* # chcon -t qemu_exec_t /usr/libexec/qemu-kvm
* # ll -Z /usr/libexec/qemu-kvm
-rwxr-xr-x. root root system_u:object_r:qemu_exec_t:s0 /usr/libexec/qemu-kvm
";​​;;RedHatEnterpriseLinux7/RHEL7-32956
722;;;;;;;;;3;"3.Migrate the guest from the source to the target
 
 
* # virsh migrate --live mig1 qemu+ssh://10.66.4.208/system --verbose

​​";"The error message indicates the failure cause clearly instead of an unclear message.
 
 Wrong output:
 error: operation failed: migration job: unexpectedly failed.
 
 Correct output:
 error: internal error: qemu unexpectedly closed the monitor: 2017-05-03T09:44:20.755635Z qemu-kvm.orig: -chardev pty,id=charserial0: char device redirected to /dev/pts/2 (label charserial0)
 2017-05-03T09:44:20.952908Z qemu-kvm.orig: Length mismatch: pc.ram: 0x100000000 in != 0x40000000: Invalid argument
 2017-05-03T09:44:20.953041Z qemu-kvm.orig: error while loading state for instance 0x0 of device 'ram'
 2017-05-03T09:44:20.953563Z qemu-kvm.orig: load of migration failed: Invalid argument
​​";;RedHatEnterpriseLinux7/RHEL7-32956
723;RHEL7-33021;[Migration][event] Check event during live migration - migration succeeds - test with qemu-kvm-rhev - bug 1212077;Check libvirtd listens QMP events for migration status changes;Fangge Jin (fjin);High;Positive;Not Automated;;1;On source host, start a guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-33021
723;;;;;;;;;2;"Monitor guest event on both source and target hosts:
 
* # while true; do virsh event $guest --loop --all; sleep 2; done
";​​;;RedHatEnterpriseLinux7/RHEL7-33021
723;;;;;;;;;3;"Do migration:
* # virsh migrate V qemu+ssh://10.66.6.6/system --live
";" Migration can finish successfully
​​";;RedHatEnterpriseLinux7/RHEL7-33021
723;;;;;;;;;4;"On source host, check the output of ""virsh event $guest --loop --all""
​​";"Output:
 event 'migration-iteration' for domain V: iteration: '1'
 event 'migration-iteration' for domain V: iteration: '2'
 event 'lifecycle' for domain V: Suspended Migrated
 event 'migration-iteration' for domain V: iteration: '3'
 event 'lifecycle' for domain V: Stopped Migrated
 event 'job-completed' for domain V:
     operation: 5
     time_elapsed: 6881
     time_elapsed_net: 6876
     downtime: 258
     downtime_net: 253
     setup_time: 12
     data_total: 1208827904
     data_processed: 325393297
     data_remaining: 0
     memory_total: 1208827904
     memory_processed: 325393297
     memory_remaining: 0
     memory_bps: 58455605
     memory_constant: 220079
     memory_normal: 78804
     memory_normal_bytes: 322781184
     memory_dirty_rate: 0
     memory_iteration: 3
     disk_total: 0
     disk_processed: 0
     disk_remaining: 0";;RedHatEnterpriseLinux7/RHEL7-33021
723;;;;;;;;;5;"On target host, check the output of ""virsh event $guest --loop --all""";"Output:
 event 'agent-lifecycle' for domain V: state: 'disconnected' reason: 'domain started'
 event 'lifecycle' for domain V: Started Migrated
 event 'agent-lifecycle' for domain V: state: 'disconnected' reason: 'channel event'
 event 'lifecycle' for domain V: Resumed Unpaused
 event 'lifecycle' for domain V: Resumed Migrated
 event 'agent-lifecycle' for domain V: state: 'connected' reason: 'channel event' ";;RedHatEnterpriseLinux7/RHEL7-33021
723;;;;;;;;;6;"On source host, check libvirtd log:
 
* # grep -E 'qemuProcessHandleMigrationStatus|qemuMonitorGetMigrationStats' /var/log/libvirt/libvirtd.log
";"""qemuMonitorGetMigrationStats'"" doesn't appear every 50ms in libvirt log, this means Libvirtd get events for migration status changes, instead of polling for the status every 50ms().
 
 Output:
 
 2017-06-02 09:47:31.773+0000: 27011: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7f8dc82c3c40 V changed state to setup
 2017-06-02 09:47:31.785+0000: 27011: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7f8dc82c3c40 V changed state to active
 2017-06-02 09:47:38.616+0000: 27011: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7f8dc82c3c40 V changed state to completed";;RedHatEnterpriseLinux7/RHEL7-33021
723;;;;;;;;;7;"On target host, check libvirtd log:
 
* # grep -E 'qemuProcessHandleMigrationStatus|qemuMonitorGetMigrationStats' /var/log/libvirt/libvirtd.log
";"""qemuMonitorGetMigrationStats'"" doesn't appear every 50ms in libvirt log, this means Libvirtd get events for migration status changes, instead of polling for the status every 50ms().
 
 Output:'
 2017-06-02 09:47:31.687+0000: 36195: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7f5aa033de50 V changed state to setup
 2017-06-02 09:47:31.763+0000: 36195: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7f5aa033de50 V changed state to active
 2017-06-02 09:47:38.685+0000: 36195: debug : qemuProcessHandleMigrationStatus:1626 : Migration of domain 0x7f5aa033de50 V changed state to completed";;RedHatEnterpriseLinux7/RHEL7-33021
724;RHEL7-33022;[Migration][event] Check event during live migration - test with qemu-kvm;Libvirtd polls for migration status when test with qemu-kvm, because qemu-kvm doesn't support event notification.;Fangge Jin (fjin);Low;Positive;Not Automated;;1;On source host, start a guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-33022
724;;;;;;;;;2;"Do migration:
 
* # virsh migrate rhel7d1 qemu+ssh://10.66.6.6/system --live --verbose
";​​;;RedHatEnterpriseLinux7/RHEL7-33022
724;;;;;;;;;3;"Check libvirtd log:
 
* # grep -E 'qemuProcessHandleMigrationStatus|qemuMonitorGetMigrationStats' /var/log/libvirt/libvirtd.lo
";"Got qemuMonitorGetMigrationStats every 50ms during migration, which indicates libvirt polls for migration status every 50ms.

 Output:
 qemuMonitorSend:1064 : QEMU_MONITOR_SEND_MSG: mon=0x7f7020001100 msg={""execute"":""query-migrate"",""id"":""libvirt-32""}
 debug : qemuMonitorGetMigrationStatus:2132 : mon:0x7f98b800fe90 vm:0x7f98742254f0 json:1 fd:26";;RedHatEnterpriseLinux7/RHEL7-33022
725;RHEL7-33023;Check the 'metadata not found' log is debug level- 1220474;"If this log is in ""error"" level, it will be printed frequently in RHEVM";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 1.Configure the libvirtd.conf as below and restart libvirtd service:
 log_level=1
 log_filters=""1:libvirt""
 log_outputs=""1:file:/var/log/libvirt/libvirtd.log 1:syslog:libvirtd 1:journald""
 
 #service libvirtd restart
 
 
 
 
 
 
 
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-33023
725;;;;;;;;;2;"2.Get non-present metadata of the guest:
 #virsh metadata vm1 --uri http://herp.derp/ --config
​​";"error: metadata not found: Requested metadata element is not present
 
​​";;RedHatEnterpriseLinux7/RHEL7-33023
725;;;;;;;;;3;"3.Check the libvirtd.log(/var/log/libvirt/libvirtd.log):
 #cat /var/log/libvirt/libvirtd.log | grep -i ""metadata not found""
 
 
​​";"3.The log level is debug:
 2015-11-17 09:33:58.245+0000: 28082:** debug** : virDomainObjGetMetadata:16678 : metadata not found: Requested metadata element is not present
";;RedHatEnterpriseLinux7/RHEL7-33023
726;RHEL7-33024;The live changes in xml doesn't disappear after restarting libvirtd - 1211548;;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 1. prepare a running vm:
 # virsh list
  Id    Name                           State
 ----------------------------------------------------
  19    rhel7-5                        running
 
 2. no memtune settings
 # virsh memtune rhel7-5 
 hard_limit     : unlimited
 soft_limit     : unlimited
 swap_hard_limit: unlimited
 
 
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-33024
726;;;;;;;;;2;"3. set a big memtune value then recheck:
 
 # virsh memtune rhel7-5 --hard-limit 9007199254740988 
 
 # virsh memtune rhel7-5 
 hard_limit     : 9007199254740988
 soft_limit     : unlimited
 swap_hard_limit: unlimited
 
 # virsh dumpxml rhel7-5
 <domain type='kvm' id='19'>
   <name>rhel7-5</name>
   <uuid>ab4696ee-6986-488f-81b8-8578759ae8e2</uuid>
   <memory unit='KiB'>1048576</memory>
   <currentMemory unit='KiB'>1048576</currentMemory>
   <memtune>
     <hard_limit unit='KiB'>9007199254740988</hard_limit>
   </memtune>";​​;;RedHatEnterpriseLinux7/RHEL7-33024
726;;;;;;;;;3;"4. restart libvirtd and recheck:
 
 # service libvirtd restart
 Redirecting to /bin/systemctl restart  libvirtd.service
 
 # virsh memtune rhel7-5 
 hard_limit     : 9007199254740988
 soft_limit     : unlimited
 swap_hard_limit: unlimited
 
 # virsh dumpxml rhel7-5|grep memtune -a5
 <domain type='kvm' id='19'>
   <name>rhel7-5</name>
   <uuid>ab4696ee-6986-488f-81b8-8578759ae8e2</uuid>
   <memory unit='KiB'>1048576</memory>
   <currentMemory unit='KiB'>1048576</currentMemory>
   <memtune>
     <hard_limit unit='KiB'>9007199254740988</hard_limit>
   </memtune>";"The memtune in xml doesn't disappear after restart libvirtd
​​";;RedHatEnterpriseLinux7/RHEL7-33024
727;RHEL7-33025;[life-cycle][-no-reboot] - Change the life cycle flow via on_xxx element in XML - 1201760;"When the three on_xxx events are all destroy*, libvirt will build the QEMU commandline with the ""-no-reboot"" flag. Or -no-shutdown is added. 
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Scenario 1:
   1.Prepare a running guest with the following settings in xml
 
 <on_poweroff>destroy</on_poweroff>
   <on_reboot>destroy</on_reboot>
   <on_crash>coredump-destroy</on_crash>
 
 Please make sure guest can be shutdown successfully via ""virsh shutdown {domain}"" firstly.
 
 a) ""reboot"" guest inside the guest OS
 (When qemu commandline is built with -no-reboot , reboot inside guest will result in guest shutdown.)
 
 b) # virsh reboot test3
 Domain test3 is being rebooted
 
 c) #virsh shutdown test3
 Domain test3 is being shutdown";"a) Guest shutdown.

 b) Guest shutdown actually although ""Domain test3 is bejing rebooted"" is seen

 There is such log in libvirtd.log:
 info : qemuDomainReboot:2066 : Domain on_reboot setting overridden, shutting down

 c)Guest shutdown
";Test Case;RedHatEnterpriseLinux7/RHEL7-33025
727;;;;;;;;;2;"Scenario 2:
  Update the settings as below, test again
 
   <on_poweroff>destroy</on_poweroff>
   <on_reboot>destroy</on_reboot>
   <on_crash>destroy</on_crash> ";"Test result is same as step1
​​";;RedHatEnterpriseLinux7/RHEL7-33025
728;RHEL7-33026;[life-cycle][-no-shutdown] - Change the life cycle flow via on_xxx element in XML - 1201760;"When the three on_xxx events are all destroy*, libvirt will build the QEMU commandline with the ""-no-reboot"" flag. Or -no-shutdown is added.

";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" Scenario 1:
 1)
   <on_poweroff>destroy</on_poweroff>
   <on_reboot>restart</on_reboot>
   <on_crash>coredump-destroy | destroy</on_crash>
 
 Please make sure guest can be rebooted successfully via ""virsh reboot {domain}"" firstly.
 
   a) ""reboot"" guest inside the guest OS  
 
   b) # virsh reboot {domain}
 
   c) # virsh shutdown {domain}
 
​​";"a) Guest reboot successfully
 
 b) Guest reboot. successfully
 
 3) Guest shutdown successfully
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-33026
728;;;;;;;;;2;" Scenario 2:
 2)
   <on_poweroff>restart</on_poweroff>
   <on_reboot>destroy</on_reboot>
   <on_crash>coredump-destroy | destroy</on_crash>
 
 
   a) ""reboot"" guest inside the guest OS  
 
   b) # virsh reboot {domain}
 
   c) # virsh shutdown {domain}";"a) Guest reboot successfully
 
 b) Guest shutdown successfully
 
 c) Guest reboot successfully
​​";;RedHatEnterpriseLinux7/RHEL7-33026
728;;;;;;;;;3;" Scenario 3:
 3)
   <on_poweroff>restart</on_poweroff>
   <on_reboot>restart</on_reboot>
   <on_crash>coredump-destroy | destroy</on_crash>
 
 
 a) ""reboot"" guest inside the guest OS  
 
   b) # virsh reboot {domain}
 
   c) # virsh shutdown {domain}";"a) Guest reboot successfully
 
 b) Guest reboot successfully
 
 c) Guest reboot successfully
​​";;RedHatEnterpriseLinux7/RHEL7-33026
729;RHEL7-33137;[Migration] Migrate vm with memory_size != total_of_numa_size - from older version to RHEL7.2(or newer version) - qemu-kvm-rhev;Bug 1252685 - Migration from RHEL6 to RHEL7 failed when set memory size != total_of_numa_memory.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 1.Prepare a running guest with the following settings on rhel7.0 host:
* XML example:
<memory unit='KiB'>1000448</memory>  
 <currentMemory unit='KiB'>1000000</currentMemory>   
 <cpu>     
   <numa>       
     <cell cpus='0-1' memory='1048576'/>     </numa>   
 </cpu>
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-33137
729;;;;;;;;;2;"2.Migrate the guest to target host:
 
* # virsh migrate rhel6.6-GUI qemu+ssh://10.66.106.26/system --live --verbose
";"Migration fails.
 
 Output:
 error: internal error: process exited while connecting to monitor: 2015-09-25T06:00:12.904340Z qemu-kvm: total memory for NUMA nodes (0x40000000) should equal RAM size (0x3d100000)";;RedHatEnterpriseLinux7/RHEL7-33137
730;RHEL7-34446;[libvirtd]reload libvirtd while libvirtd restart -  bug1179981;Check libvirtd will not crash after reload it;Yan Fu (yafu);Medium;Positive;Not Automated;;1;"1. execute reload libvirtd while starting up it for 10-20 minutes
 # while ((1)); do systemctl reset-failed; systemctl restart libvirtd; systemctl reload libvirtd; virsh list; done"; 1.no libvirtd crash happened;Test Case;RedHatEnterpriseLinux7/RHEL7-34446
731;RHEL7-34447;Race staring multiple libvirtd user sessions at the same time. -- bug 1208176;Race staring multiple libvirtd user sessions at the same time;Yan Fu (yafu);Medium;Positive;Not Automated;;1;"1. log in with NON-root user
 # su - test1
 Last login: Fri Jun 26 10:40:18 HKT 2015 on pts/11";" 1.$ ps aux |grep libvirtd 
 test1     5552  0.0  0.0 112644   956 pts/0    S+   11:10   0:00 grep --color=auto libvirtd
 root      8015  0.0  0.2 543092 21276 ?        Ssl  Oct27   0:00 /usr/sbin/libvirtd --listen
 $ virsh list 
 Id Name State ---------------------------------------------------- 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-34447
731;;;;;;;;;2;"2. run command as below $ killall libvirtd ; for i in `seq 1 5`; do virsh list >/tmp/log$i 2>&1 & done;";"2.$ killall libvirtd ; for i in `seq 1 5`; do virsh list >/tmp/log$i 2>&1 & done; libvirtd(27111): Operation not permitted libvirtd: 
 no process found
 [1] 16619
 [2] 16620
 [3] 16621 
 [4] 16622 
 [5] 16623 
 $ virsh list Id Name State
 ---------------------------------------------------- 
 [1] Done virsh list > /tmp/log$i 2>&1
 [2] Done virsh list > /tmp/log$i 2>&1 
 [3] Done virsh list > /tmp/log$i 2>&1
 [4]- Done virsh list > /tmp/log$i 2>&1
 [5]+ Exit 1 virsh list > /tmp/log$i 2>&1";;RedHatEnterpriseLinux7/RHEL7-34447
731;;;;;;;;;3;"3. check log:
 $ grep Fail /tmp/log*
 $ cat /tmp/log?";"3.No failed log existed.
​​";;RedHatEnterpriseLinux7/RHEL7-34447
732;RHEL7-34448;Define and start various virtual networks on RHEL7.1 host, then upgrade the host  OS to RHEL7.1.z, and then to RHEL7.2;Define and start various virtual networks on RHEL7.1 host, then upgrade the host OS{comment:13} to RHEL7.1.z, and then to RHEL7.2;Fangge Jin (fjin);High;Positive;Manual Only;;1;" 1.Define and start various network on RHEL7.1 host:
 # virsh net-define bridge.xml
 #virsh net-start bridge-net
 .......
​​";" # virsh net-list
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  bridge-net           active     no            yes
  default              active     yes           yes
  hostdev              active     no            yes
  passthrough          active     no            yes
  private              active     no            yes
  route                active     no            yes
  vepa-net             active     no            yes
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-34448
732;;;;;;;;;2;"2.Upgrade the host OS to RHEL7.2:
 # yum update -y 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-34448
732;;;;;;;;;3;"3.After upgrading completely, check the network status
 # virsh net-list
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  bridge-net           active     no            yes
  default              active     yes           yes
  hostdev              active     no            yes
  passthrough          active     no            yes
  private              active     no            yes
  route                active     no            yes
  vepa-net             active     no            yes
​​";"The network are still on after upgrading host os.
​​";;RedHatEnterpriseLinux7/RHEL7-34448
733;RHEL7-34449;Define and start various storage pools on RHEL7.1 host, then upgrade the host OS...;Define and start various storage pools on RHEL7.1 host, then upgrade the host OS to rhel7.1.z, then to RHEL7.2{comment:12};Fangge Jin (fjin);High;Positive;Manual Only;;1;" 1.Define , build and start various storage pools on RHEL7.1 host:
 # virsh pool-define gluster.xml
 
 # virsh pool-build gluster
 
 # virsh pool-start gluster
 
 ...
​​";" # virsh pool-list
  Name                 State      Autostart     
  default              active     yes           
  iscsi                active     yes           
  logical-pool         active     yes           
  mpath-test           active     yes           
  netfs                active     yes           
  pool-dir             active     yes     
";Test Case;RedHatEnterpriseLinux7/RHEL7-34449
733;;;;;;;;;2;"2.Upgrade the host OS to RHEL7.1.z, check the storage pool status
 # virsh pool-list
  Name                 State      Autostart     
  default              active     yes           
  iscsi                active     yes           
  logical-pool         active     yes           
  mpath-test           active     yes           
  netfs                active     yes           
  pool-dir             active     yes 
 
​​";"The storage pools are still active
​​";;RedHatEnterpriseLinux7/RHEL7-34449
733;;;;;;;;;3;"3.Upgrade the host OS to RHEL7.2, check the storage pool status again:
 # virsh pool-list
  Name                 State      Autostart     
  default              active     yes           
  iscsi                active     yes           
  logical-pool         active     yes           
  mpath-test           active     yes           
  netfs                active     yes           
  pool-dir             active     yes 
 
​​";The storage pools are still active;;RedHatEnterpriseLinux7/RHEL7-34449
734;RHEL7-34454;[libvirtd][config]Check the prefix of libvirtd.conf in /usr/lib/sysctl.d/; Check libvirtd.conf in /usr/lib/sysctl.d/ starting with number{comment:49};Yan Fu (yafu);Medium;Positive;Not Automated;;1; 1.# ll /usr/lib/sysctl.d/;"1.libvirtd.conf start with number and the number is larger than the value of system.conf/default.conf:
 -rw-r--r--. 1 root root  293 Sep 16 19:59 00-system.conf
 -rw-r--r--. 1 root root 1205 Oct 12 20:39 50-default.conf
 -rw-r--r--. 1 root root  499 Oct  8 21:14 60-libvirtd.conf
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-34454
735;RHEL7-34455;[libvirtd][config]Restart libvirtd with negative value for parameters which require positive integer value in libvirtd.conf -- bug1160955;"Check libvirt should disallow negative value for options needed positive integer etc in libvirtd.conf
Set keepalive_interval to negative value, libvirtd service start success, in which case it means that keepalive is disabled.";Yan Fu (yafu);Medium;Positive;Not Automated;;1;" 1. set the folowing values to negative value and restart libvirtd service
 (Note: Set Only ONE parameter  at one time).
 
 #/etc/libvirt/libvirtd.conf 
 listen_tcp = -1 
 listen_tls = -40 
 mdns_adv = -1 
 tls_no_sanity_certificate = -1 
 max_clients = -1
 max_queued_clients = -1
 max_anonymous_clients = -1 
 max_workers = -1 
 min_workers = -1 
 prio_workers = -1 
 max_client_requests = -5 
 audit_level = -2 
 audit_logging = -1 
 log_level = -1 
 keepalive_count = -5 
 keepalive_required = -1 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-34455
735;;;;;;;;;2;"
 #service libvirtd restart
 
 # service libvirtd status 
​​";" 2. restart libvirtd service failed。
 
 Output:
 # service libvirtd restart
 Redirecting to /bin/systemctl restart libvirtd.service Job for libvirtd.service failed. 
 See 'systemctl status libvirtd.service' and 'journalctl -xn' for details. 
 
 # service libvirtd status 
 Redirecting to /bin/systemctl status  libvirtd.service
 ● libvirtd.service - Virtualization daemon
    Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; enabled; vendor preset: enabled)
    Active: failed (Result: start-limit) since Wed 2015-10-28 12:50:37 CST; 8min ago
      Docs: man:libvirtd(8)
            http://libvirt.org
   Process: 14895 ExecReload=/bin/kill -HUP $MAINPID (code=exited, status=0/SUCCESS)
   Process: 18565 ExecStart=/usr/sbin/libvirtd $LIBVIRTD_ARGS (code=exited, status=6)
  Main PID: 18565 (code=exited, status=6)
 Oct 28 12:50:36 yafu-test systemd[1]: Failed to start Virtualization daemon.
 Oct 28 12:50:36 yafu-test systemd[1]: Unit libvirtd.service entered failed ...e.
 Oct 28 12:50:36 yafu-test systemd[1]: libvirtd.service failed.
 Oct 28 12:50:37 yafu-test systemd[1]: libvirtd.service holdoff time over, s...t.
 Oct 28 12:50:37 yafu-test systemd[1]: start request repeated too quickly fo...ce
 Oct 28 12:50:37 yafu-test systemd[1]: Failed to start Virtualization daemon.
 Oct 28 12:50:37 yafu-test systemd[1]: Unit libvirtd.service entered failed ...e.
 Oct 28 12:50:37 yafu-test systemd[1]: libvirtd.service failed.
 Hint: Some lines were ellipsized, use -l to show in full.
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-34455
735;;;;;;;;;3;"3.Check the error message in syslog:
 #cat /var/log/message
​​";"3.#find below error messages 
 ... 
 2015-10-28 05:00:49.965+0000: 19291: error : main:1279 : Can't load config file: unsupported configuration: remoteReadConfigFile: /etc/libvirt/libvirtd.conf: listen_tcp: invalid type: got long; expected unsigned long: /etc/libvirt/libvirtd.conf
 Oct 28 13:00:49 localhost systemd: libvirtd.service: main process exited, code=exited, status=1/FAILURE
 Oct 28 13:00:49 localhost systemd: Failed to start Virtualization daemon.
 Oct 28 13:00:49 localhost systemd: Unit libvirtd.service entered failed state.
 Oct 28 13:00:49 localhost systemd: libvirtd.service failed.
 Oct 28 13:00:50 localhost systemd: libvirtd.service holdoff time over, scheduling restart.
 Oct 28 13:00:50 localhost systemd: start request repeated too quickly for libvirtd.service
 Oct 28 13:00:50 localhost systemd: Failed to start Virtualization daemon.
 Oct 28 13:00:50 localhost systemd: Unit libvirtd.service entered failed state.
 Oct 28 13:00:50 localhost systemd: libvirtd.service failed.";;RedHatEnterpriseLinux7/RHEL7-34455
736;RHEL7-34457;Create internal/external snapshots on RHEL7.1 host, then upgrade the host to RHE...;Create internal/external snapshots on RHEL7.1 host, then upgrade the host to RHEL7.2;Fangge Jin (fjin);High;Positive;Manual Only;;1;"1.1)Boot up guests on RHEL7.1 host:
 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
  1     rhel6.7-mt6.5               running
  2     rhel6.7-mt7.1               running
  3     rhel7.1-mt6.5               running
  4     rhel7.1-mt7.1               running

 2)Create internal and external snapshot for every guest, for example:
 create internal snapshot:
 # virsh snapshot-create-as rhel7.1-mt7.1 s1
 Domain snapshot s1 created

 create external snapshot:
 # virsh snapshot-create-as rhel7.1-mt7.1 s2 --memspec file=/tmp/rhel7.2.mem --diskspec vda,file=/tmp/rhel7.2.s2
 Domain snapshot s2 created

 # virsh snapshot-list rhel7.1-mt7.1
  Name                 Creation Time             State
 ------------------------------------------------------------
  s1                   2015-10-28 16:22:25 +0800 running
  s2                   2015-10-28 16:25:33 +0800 running

 # virsh snapshot-dumpxml rhel7.1-mt7.1 s1|head -15
 <domainsnapshot>
   <name>s1</name>
   <state>running</state>
   <creationTime>1446020545</creationTime>
   <memory snapshot='internal'/>
   <disks>
     <disk name='vda' snapshot='internal'/>
   </disks>
 ......

 # virsh snapshot-dumpxml rhel7.1-mt7.1 s2|head -15
 <domainsnapshot>
   <name>s2</name>
   <state>running</state>
   <parent>
     <name>s1</name>
   </parent>
   <creationTime>1446020733</creationTime>
   <memory snapshot='external' file='/tmp/rhel7.2.mem'/>
   <disks>
     <disk name='vda' snapshot='external' type='file'>
       <driver type='qcow2'/>
       <source file='/tmp/rhel7.2.s2'/>
     </disk>
   </disks>
 .......

 Check the guest are using the new disk:
 # virsh domblklist rhel7.1-mt7.1
 Target     Source
 ------------------------------------------------
 vda        /tmp/rhel7.2.s2
";" 2)Check the guest disk I/O after creating snapshot
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-34457
736;;;;;;;;;2;"2.Upgrade the host OS to RHEL7.2
 # yum update -y
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-34457
736;;;;;;;;;3;"3. After upgrading completely, check the guest status:
 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
  1     rhel6.7-mt6.5               running
  2     rhel6.7-mt7.1               running
  3     rhel7.1-mt6.5               running
  4     rhel7.1-mt7.1               running
​​";Check the guest disk I/O;;RedHatEnterpriseLinux7/RHEL7-34457
736;;;;;;;;;4;"4. check the snapshot-list/dumpxml of every guest, which should be same as before upgrading,  for example:
 # virsh snapshot-list rhel7.1-mt7.1
  Name                 Creation Time             State
 ------------------------------------------------------------
  s1                   2015-10-28 16:22:25 +0800 running
  s2                   2015-10-28 16:25:33 +0800 running
 
 # virsh snapshot-dumpxml rhel7.1-mt7.1 s1|head -15
 <domainsnapshot>
   <name>s1</name>
   <state>running</state>
 .......
 
 # virsh snapshot-dumpxml rhel7.1-mt7.1 s2|head -15
 <domainsnapshot>
   <name>s2</name>
   <state>running</state>
   <parent>
     <name>s1</name>
   </parent>
 .......
​​";​​;;RedHatEnterpriseLinux7/RHEL7-34457
736;;;;;;;;;5;"5. Destroy and start every guest again, and check the snapshot-list, for example:
 # virsh destroy rhel7.1-mt7.1
 
 # virsh start rhel7.1-mt7.1
 
 # virsh snapshot-list rhel7.1-mt7.1
  Name                 Creation Time             State
 ------------------------------------------------------------
  s1                   2015-10-28 16:22:25 +0800 running
  s2                   2015-10-28 16:25:33 +0800 running
 
 Check the guest are using the new disk:
 # virsh domblklist rhel7.1-mt7.1
 Target     Source
 ------------------------------------------------
 vda        /tmp/rhel7.1.s2
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-34457
737;RHEL7-34458;Managedsave guests on RHEL7.1 host, then upgrade the host to RHEL7.2, restore the guests - bug 1275542 1274147;Managedsave guests on RHEL7.1 host, then upgrade the host to RHEL7.2, restore the guests;Fangge Jin (fjin);High;Positive;Manual Only;;1;" 1.1)Boot up guests on RHEL7.1 host:
 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
  1     rhel6.7-mt6.5               running
  2     rhel6.7-mt7.1               running
  3     rhel7.1-mt6.5               running
  4     rhel7.1-mt7.1               running

 2) Do managedsave for each guest:

 # virsh managedsave rhel6.7-mt6.5

 # virsh managedsave rhel6.7-mt7.1

 # virsh managedsave rhel7.1-mt7.1

 # virsh managedsave rhel7.1-mt6.5";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-34458
737;;;;;;;;;2;"2.Upgrade the host OS to RHEL7.2:
 # yum upgrade -y &
​​";​​;;RedHatEnterpriseLinux7/RHEL7-34458
737;;;;;;;;;3;"3.Start each guest again:
 # virsh start rhel6.7-mt6.5
 
 # virsh start rhel6.7-mt7.1
 
 # virsh start rhel7.1-mt7.1
 
 # virsh start rhel7.1-mt6.5
 
 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
   5     rhel6.7-mt6.5               running
   6     rhel6.7-mt7.1               running
   7     rhel7.1-mt6.5               running
   8     rhel7.1-mt7.1               running
​​";"Each guest can be started successfully, and try to do some operations in the guest, guest work well.
 
​​";;RedHatEnterpriseLinux7/RHEL7-34458
738;RHEL7-34459;Save guests on RHEL7.1 host, then upgrade the host to RHEL7.2, restore the guest...;Save guests on RHEL7.1 host, then upgrade the host to RHEL7.2, restore the guests;Fangge Jin (fjin);High;Positive;Manual Only;;1;" 1.1)Boot up guests on RHEL7.1 host:
 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
  1     rhel6.7-mt6.5               running
  2     rhel6.7-mt7.1               running
  3     rhel7.1-mt6.5               running
  4     rhel7.1-mt7.1               running

 2) Do save for each guest:

 # virsh save rhel6.7-mt6.5 rhel6.7-mt6.5.save

 # virsh save rhel6.7-mt7.1 rhel6.7-mt7.1.save

 # virsh save rhel7.1-mt7.1 rhel7.1-mt7.1.save

 # virsh save rhel7.1-mt6.5 rhel7.1-mt6.5.save
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-34459
738;;;;;;;;;2;"2.Upgrade the host OS to RHEL7.2:
 # yum upgrade -y &";​​;;RedHatEnterpriseLinux7/RHEL7-34459
738;;;;;;;;;3;"3.Start each guest again:
 # virsh restore rhel6.7-mt6.5.save

 # virsh restore rhel6.7-mt7.1.save

 # virsh restore rhel7.1-mt7.1.save

 # virsh restore rhel7.1-mt6.5.save

 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
   5     rhel6.7-mt6.5               running
   6     rhel6.7-mt7.1               running
   7     rhel7.1-mt6.5               running
   8     rhel7.1-mt7.1               running";"Each guest can be restored successfully, and try to do some operations in the guest, guest work well.
 
​​";;RedHatEnterpriseLinux7/RHEL7-34459
739;RHEL7-34460;Start guests on RHEL7.1 host, enable libvirt-guests service, then upgrade the ho...;Start guests on RHEL7.1 host, enable libvirt-guests service, then upgrade the host to RHEL7.2 and reboot the host;Fangge Jin (fjin);High;Positive;Manual Only;;1;" On RHEL7.1 shot:

 1.
 # cat /etc/sysconfig/libvirt-guests
 ON_BOOT=start
 ON_SHUTDOWN=suspend

 enable and start libvirt-guests
 # systemctl  start libvirt-guests

 # systemctl enable libvirt-guests
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-34460
739;;;;;;;;;2;"2.Boot up guests on RHEL7.1 host:
 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
  1     rhel6.7-mt6.5               running
  2     rhel6.7-mt7.1               running
  3     rhel7.1-mt6.5               running
  4     rhel7.1-mt7.1               running";"Try to do some operations in the guests.
​​";;RedHatEnterpriseLinux7/RHEL7-34460
739;;;;;;;;;3;"3.Upgrade the host OS to RHEL7.2:
 # yum update -y &
 
​​";"After upgrading completely, guests are still running well.
 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
  1     rhel6.7-mt6.5               running
  2     rhel6.7-mt7.1               running
  3     rhel7.1-mt6.5               running
  4     rhel7.1-mt7.1               running
​​";;RedHatEnterpriseLinux7/RHEL7-34460
739;;;;;;;;;4;"4.Reboot host:
 # shutdown -r now
​​";​​;;RedHatEnterpriseLinux7/RHEL7-34460
739;;;;;;;;;5;"5.Check the guest status :
 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
  1     rhel6.7-mt6.5               running
  2     rhel6.7-mt7.1               running
  3     rhel7.1-mt6.5               running
  4     rhel7.1-mt7.1               running
​​";​​;;RedHatEnterpriseLinux7/RHEL7-34460
740;RHEL7-34461;Suspend the guests on RHEL7.1 host, then upgrade the host to RHEL7.2, resume the...;Suspend the guests on RHEL7.1 host, then upgrade the host to RHEL7.2, resume the guests;Fangge Jin (fjin);High;Positive;Manual Only;;1;"  1.Boot up guests on RHEL7.1 host:
 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
  1     rhel6.7-mt6.5               running
  2     rhel6.7-mt7.1               running
  3     rhel7.1-mt6.5               running
  4     rhel7.1-mt7.1               running";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-34461
740;;;;;;;;;2;"2.Suspend the guests:
 # virsh suspend 1
 # virsh suspend 2
 # virsh suspend 3
 # virsh suspend 4
 
 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
  1     rhel6.7-mt6.5               paused
  2     rhel6.7-mt7.1               paused
  3     rhel7.1-mt6.5               paused
  4     rhel7.1-mt7.1               paused
​​";​​;;RedHatEnterpriseLinux7/RHEL7-34461
740;;;;;;;;;3;"3.Upgrade the host OS to RHEL7.2:
 # yum update -y &
​​";​​;;RedHatEnterpriseLinux7/RHEL7-34461
740;;;;;;;;;4;"3.After upgrading completely, check the guest status:
 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
  1     rhel6.7-mt6.5               paused
  2     rhel6.7-mt7.1               paused
  3     rhel7.1-mt6.5               paused
  4     rhel7.1-mt7.1               paused
​​";​​;;RedHatEnterpriseLinux7/RHEL7-34461
740;;;;;;;;;5;"4.Resume the guests:
 # virsh resume xxx
 
 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
  1     rhel6.7-mt6.5               running
  2     rhel6.7-mt7.1               running
  3     rhel7.1-mt6.5               running
  4     rhel7.1-mt7.1               running
​​";"Guests resume successfully and try to do some operations in the guests, guests work well
​​";;RedHatEnterpriseLinux7/RHEL7-34461
741;RHEL7-34462;Boot up and reboot the guests on RHEL7.1 host, then upgrade the host to RHEL7.2;"Boot up and reboot the guests on RHEL7.1 host, then upgrade the host to RHEL7.2
";Fangge Jin (fjin);High;Positive;Manual Only;;1;"  1.1)Boot up guests on RHEL7.1 host:
 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
  1     rhel6.7-mt6.5               running
  2     rhel6.7-mt7.1               running
  3     rhel7.1-mt6.5               running
  4     rhel7.1-mt7.1               running

 2)Reboot the guests :
 # virsh reboot 1
 #virsh reboot 2
 #virsh reboot 3
 #virsh reboot 4";" Guests reboot successfully:
 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
   5     rhel6.7-mt6.5               running
   6     rhel6.7-mt7.1               running
   7     rhel7.1-mt6.5               running
   8     rhel7.1-mt7.1               running
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-34462
741;;;;;;;;;2;"2.Upgrade the host OS to RHEL7.2:
 # yum update -y &
​​";​​;;RedHatEnterpriseLinux7/RHEL7-34462
741;;;;;;;;;3;"3.Check the guests status:
 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
   5     rhel6.7-mt6.5               running
   6     rhel6.7-mt7.1               running
   7     rhel7.1-mt6.5               running
   8     rhel7.1-mt7.1               running
​​";"Try to do some operations in the guests, guests work well
​​";;RedHatEnterpriseLinux7/RHEL7-34462
742;RHEL7-34463;Hotplug/hot-unplug some devices on the guests on RHEL7.1 host, the upgrade the h...;Hotplug/hot-unplug some devices on the guests on RHEL7.1 host, the upgrade the host to RHEL7.2;Fangge Jin (fjin);High;Positive;Manual Only;;1;"  1.Boot up guests on RHEL7.1 host:
 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
  1     rhel6.7-mt6.5               running
  2     rhel6.7-mt7.1               running
  3     rhel7.1-mt6.5               running
  4     rhel7.1-mt7.1               running";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-34463
742;;;;;;;;;2;"2.List the disks, nics and serial devices of each guest, for example:
 # virsh domblklist rhel7.1-mt7.1
 Target     Source
 ------------------------------------------------
 vda        /var/lib/libvirt/images/rhel7.2.qcow2
 vdb        /var/lib/libvirt/images/rhel7.2-b.qcow2
 
 # virsh domiflist rhel7.1-mt7.1
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet3      network    default    virtio      52:54:00:c2:3a:95
 vnet4      network    default    virtio      52:54:00:c2:3a:96
​​";​​;;RedHatEnterpriseLinux7/RHEL7-34463
742;;;;;;;;;3;"3.Hot-plug new disk and nic for each guest, for example:
 # virsh attach-device rhel7.1-mt7.1 disk-3.xml
 
 # virsh attach-device rhel7.1-mt7.1 interface-3.xml
 
 # virsh domblklist rhel7.1-mt7.1
 Target     Source
 ------------------------------------------------
 vda        /var/lib/libvirt/images/rhel7.1.qcow2
 vdb        /var/lib/libvirt/images/rhel7.1-b.qcow2
 vdc        /var/lib/libvirt/images/rhel7.1-c.qcow2
 
 # virsh domiflist rhel7.2-mt7.1
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet3      network    default    virtio      52:54:00:c2:3a:95
 vnet4      network    default    virtio      52:54:00:c2:3a:96
 vnet5      network    default    virtio      52:54:00:c2:3a:97
​​";​​;;RedHatEnterpriseLinux7/RHEL7-34463
742;;;;;;;;;4;"4.Hot-unplug disk and nic for each guest, for example:
 # virsh detach-device rhel7.1-mt7.1 disk-2.xml
 
 # virsh detach-device rhel7.1-mt7.1 interface-2.xml
 
 # virsh domblklist rhel7.1-mt7.1
 Target     Source
 ------------------------------------------------
 vda        /var/lib/libvirt/images/rhel7.1.qcow2
 vdc        /var/lib/libvirt/images/rhel7.1-c.qcow2
 
 # virsh domiflist rhel7.1-mt7.1
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet3      network    default    virtio      52:54:00:c2:3a:95
 vnet5      network    default    virtio      52:54:00:c2:3a:97
​​";​​;;RedHatEnterpriseLinux7/RHEL7-34463
742;;;;;;;;;5;"5.Upgrade the host OS to RHEL7.2
 # yum update -y &
​​";​​;;RedHatEnterpriseLinux7/RHEL7-34463
742;;;;;;;;;6;"6.After upgrading completely, check the guests status, disks and nics of each guest
 # virsh list --all
  Id    Name                          State
 ----------------------------------------------------
  1     rhel6.7-mt6.5               running
  2     rhel6.7-mt7.1               running
  3     rhel7.1-mt6.5               running
  4     rhel7.1-mt7.1               running
 
 # virsh domblklist rhel7.1-mt7.1
 Target     Source
 ------------------------------------------------
 vda        /var/lib/libvirt/images/rhel7.1.qcow2
 vdc        /var/lib/libvirt/images/rhel7.1-c.qcow2
 
 # virsh domiflist rhel7.1-mt7.1
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet3      network    default    virtio      52:54:00:c2:3a:95
 vnet5      network    default    virtio      52:54:00:c2:3a:97
​​";"The disks and nics should be same as before upgrading 
​​";;RedHatEnterpriseLinux7/RHEL7-34463
743;RHEL7-34469;[libvirtd]Do screenshot after qemu-attach -- BZ1161831;"Do screenshot after qemu-attach{comment:21}
";Yan Fu (yafu);Medium;Positive;Not Automated;;1;"Start a qemu process by qemu-kvm: 
 # /usr/libexec/qemu-kvm -hdb /var/lib/libvirt/images/new.img -monitor unix:/tmp/demo,server,nowait -name ef";VNC server running on `::1:5900';Test Case;RedHatEnterpriseLinux7/RHEL7-34469
743;;;;;;;;;2;"Check the qemu process id:
 # ps aux |grep ef";root 93 0.0 0.0 0 0 ? S< May21 0:00 [deferwq] root 2431 51.6 0.3 623652 28528 pts/1 Sl+ 16:39 0:05 /usr/libexec/qemu-kvm -hdb /var/lib/libvirt/images/new.img -monitor unix:/tmp/demo,server,nowait -name ef;;RedHatEnterpriseLinux7/RHEL7-34469
743;;;;;;;;;3;# virsh qemu-attach 2431;Domain ef attached to pid 2431;;RedHatEnterpriseLinux7/RHEL7-34469
743;;;;;;;;;4;# virsh list;"Output:
 id Name State
 ---------------------------------------------------- 
 17   ef       running";;RedHatEnterpriseLinux7/RHEL7-34469
743;;;;;;;;;5;# virsh screenshot ef;5.Screenshot saved to ef-2015-05-22-16:40:48.ppm, with type of image/x-portable-pixmap;;RedHatEnterpriseLinux7/RHEL7-34469
744;RHEL7-34480;Define nwfilter on RHEL7.1 host, then upgrade the host OS to RHEL7.2;Define nwfilter on RHEL7.1 host, then upgrade the host OS to RHEL7.2;Fangge Jin (fjin);High;Positive;Manual Only;;1;" 1.Define nwfilter on RHEL7.1 host:
 # cat filter.xml 
 <filter name='disallow-arp' chain='arp'>
 <rule action='drop' direction='inout' priority='500'/>
 </filter>
 
 # virsh nwfilter-define filter.xml 
 Network filter disallow-arp defined from filter.xml
 
 
​​";" # virsh nwfilter-list
  UUID                                  Name                 
 ------------------------------------------------------------------
  8af2f5ea-3901-4e1e-a1b1-469c108502ba  allow-arp           
  0df818dd-3db5-4738-9304-5bb4d7bd2bbc  allow-dhcp          
  6c01ca50-825f-4689-ab54-0f4c20bdd0f9  allow-dhcp-server   
  d699ae10-7e68-4ed8-bdaf-73e90eb1f685  allow-incoming-ipv4 
  950d427b-d937-40f2-9774-4f4e572ba4ba  allow-ipv4          
  9e2757e3-e590-45a4-9bde-563d5b398c09  clean-traffic       
  d0e18b9a-229c-4619-82fd-692d341e600d  disallow-arp        
  2b104a73-a97c-4cb8-9cf5-97be186a09cf  no-arp-ip-spoofing  
  ea4de4da-e996-49da-8306-a1c6ee3c6b5b  no-arp-mac-spoofing 
  9c0ebae6-6327-4dca-bc46-c46168481fc4  no-arp-spoofing     
  0db1aefa-6836-4930-b0da-dbd2eb01cca4  no-ip-multicast     
  94d825b4-afea-40b5-8d35-29832c588f02  no-ip-spoofing      
  525b8257-5798-4f13-ab3e-f514ea5b5db6  no-mac-broadcast    
  03bc2095-8715-42a9-8cdc-5e46dd61e009  no-mac-spoofing     
  c40fc644-60ed-45f8-97a2-4d37f606b0f6  no-other-l2-traffic 
  45da0895-ff0d-4e44-ba16-cda4d26183ad  no-other-rarp-traffic
  c6cba000-13de-494f-a034-12a8eb2143bf  qemu-announce-self  
  7d818da4-5f52-4dbf-bd06-2512977c864c  qemu-announce-self-rarp
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-34480
744;;;;;;;;;2;"2.Upgrade the host OS to RHEL7.2
 # yum update -y &
​​";​​;;RedHatEnterpriseLinux7/RHEL7-34480
744;;;;;;;;;3;"3.Check the nwfilters:
 # virsh nwfilter-list
  UUID                                  Name                 
 ------------------------------------------------------------------
  8af2f5ea-3901-4e1e-a1b1-469c108502ba  allow-arp           
  0df818dd-3db5-4738-9304-5bb4d7bd2bbc  allow-dhcp          
  6c01ca50-825f-4689-ab54-0f4c20bdd0f9  allow-dhcp-server   
  d699ae10-7e68-4ed8-bdaf-73e90eb1f685  allow-incoming-ipv4 
  950d427b-d937-40f2-9774-4f4e572ba4ba  allow-ipv4          
  9e2757e3-e590-45a4-9bde-563d5b398c09  clean-traffic       
  d0e18b9a-229c-4619-82fd-692d341e600d  disallow-arp        
  2b104a73-a97c-4cb8-9cf5-97be186a09cf  no-arp-ip-spoofing  
  ea4de4da-e996-49da-8306-a1c6ee3c6b5b  no-arp-mac-spoofing 
  9c0ebae6-6327-4dca-bc46-c46168481fc4  no-arp-spoofing     
  0db1aefa-6836-4930-b0da-dbd2eb01cca4  no-ip-multicast     
  94d825b4-afea-40b5-8d35-29832c588f02  no-ip-spoofing      
  525b8257-5798-4f13-ab3e-f514ea5b5db6  no-mac-broadcast    
  03bc2095-8715-42a9-8cdc-5e46dd61e009  no-mac-spoofing     
  c40fc644-60ed-45f8-97a2-4d37f606b0f6  no-other-l2-traffic 
  45da0895-ff0d-4e44-ba16-cda4d26183ad  no-other-rarp-traffic
  c6cba000-13de-494f-a034-12a8eb2143bf  qemu-announce-self  
  7d818da4-5f52-4dbf-bd06-2512977c864c  qemu-announce-self-rarp
​​";"The nwfilters should be same as before upgrading.
​​";;RedHatEnterpriseLinux7/RHEL7-34480
745;RHEL7-34824;[vnc] Start a guest with vnc port set to an out-of-range value;"Verify guest will fail to start if vnc port is out of range. Note: valid range: [5900, 65535]
Test matrix: 
 Port: 0, 65536";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Define or edit a guest with such setting:
 1) with vnc graphic
 2) set vnc port to a value out of range(according to the test matrix in description field)";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-34824
745;;;;;;;;;2;" dump guest xml before start guest:
 # virsh dumpxml vm1
 
​​";"For port=0:
     <graphics type='vnc' autoport='no'>
       <listen type='address'/>
     </graphics>
 
 For port=65536:
     <graphics type='vnc' port='65536' autoport='no'>
       <listen type='address'/>
     </graphics>
​​";;RedHatEnterpriseLinux7/RHEL7-34824
745;;;;;;;;;3;"start guest :
 
 # virsh start vm1
​​";"guest failed to start and get such error in the terminal .
 
 Output:
 error: Failed to start domain vm1
 error: unsupported configuration: vnc port must be in range [5900,65535]
​​";;RedHatEnterpriseLinux7/RHEL7-34824
745;;;;;;;;;4;"check guest xml: 
 # virsh dumpxml vm1
​​";guest xml is same as before start guest;;RedHatEnterpriseLinux7/RHEL7-34824
746;RHEL7-34886;[Migration][--migrateuri] Specify migrate URI for live migration - tunnelled migration - migrateToURI2 api - not supported;Bug 1073233 - libvirt should forbid doing tunnelled migration with migrateuri using migrateToURI2 api - FIXED;Fangge Jin (fjin);Low;Negative;Not Automated;;1;"1.Make sure 'libvirt-python' is installed
 （otherwise, will get error: ImportError: No module named libvirt)";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-34886
746;;;;;;;;;2;"2.Start a domain
 
* # virsh start rhel7
Domain rhel7 started
";​​;;RedHatEnterpriseLinux7/RHEL7-34886
746;;;;;;;;;3;"3.# python
 Python 2.7.5 (default, Feb 11 2014, 07:46:25) [GCC 4.8.2 20140120 (Red Hat 4.8.2-13)] on linux2 Type ""help"", ""copyright"", ""credits"" or ""license"" for more information. 
 >>> import libvirt 
 >>> con = libvirt.open('')
 >>> dom = con.lookupByName('rhel7')
 >>> dom.migrateToURI2('qemu+ssh://10.66.106.34/system','tcp://10.66.106.34:9001',None,7,None,0)
​​";"check error msg.
 
 Output:
 libvirt: QEMU Driver error : argument unsupported: migration URI is not supported by tunnelled migration Traceback (most recent call last): File ""<stdin>"", line 1, in <module> File ""/usr/lib64/python2.7/site-packages/libvirt.py"", line 1825, in migrateToURI2 if ret == -1: raise libvirtError ('virDomainMigrateToURI2() failed', dom=self) libvirt.libvirtError: argument unsupported: migration URI is not supported by tunnelled migration";;RedHatEnterpriseLinux7/RHEL7-34886
747;RHEL7-34887;[Migration][--dname][--persistent] Change domain domain and make domain persistent on target host when do live migration - bug 1076354;"Check migration can worked with --dname and --persistent.
 Bug 1076354 - The new name of guest will change to old when destroy the guest after migration with dname and persistent flag";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;Start a guest on source;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-34887
747;;;;;;;;;2;Don't define same guest on target host;​​;;RedHatEnterpriseLinux7/RHEL7-34887
747;;;;;;;;;3;"do migration on source:
 
* # virsh migrate --live --persistent rhel6 qemu+ssh://10.66.106.34/system tcp://10.66.106.34:9001 --dname rhel6-new --verbose
";​​;;RedHatEnterpriseLinux7/RHEL7-34887
747;;;;;;;;;4;"during migration, check target:
 
* # virsh list --all
 Id    Name                           State
 ----------------------------------------------------
  11    rhel6-new                      paused";​​;;RedHatEnterpriseLinux7/RHEL7-34887
747;;;;;;;;;5;"after migration, check guest on target host
 
* # virsh list --all
 Id    Name                           State
 ----------------------------------------------------
  11    rhel6-new                      running

 ";Guest is running on target host with new name;;RedHatEnterpriseLinux7/RHEL7-34887
747;;;;;;;;;6;"Destroy guest on target host
 
* # virsh destroy rhel6-new
Domain rhel6-new destroyed

 
* # virsh list --all
 Id    Name                           State
 ----------------------------------------------------
  -     rhel6-new                      shut off";After guest is destroyed, guest with new name(rhel6-new) exists in shutoff status;;RedHatEnterpriseLinux7/RHEL7-34887
748;RHEL7-34890;[Migration] Migrate vm with memory balloon;"Check the memory balloon size after migration.
 Bug 1242940 - balloon size is incorrect after restore/migration";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 1. prepare a VM memory !=current memory:
 
* # virsh edit RHEL71-lhuang
...
   <memory unit='KiB'>3145728</memory>
   <currentMemory unit='KiB'>3045728</currentMemory>
 ...";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-34890
748;;;;;;;;;2;"2.start the VM
 
* # virsh start RHEL71-lhuang
Domain RHEL71-lhuang started

 
* Login guest os and make sure it fully boots up.
";​​;;RedHatEnterpriseLinux7/RHEL7-34890
748;;;;;;;;;3;"* # virsh dominfo RHEL71-lhuang|grep memory -i
";"Output:
 Max memory:     3145728 KiB
 Used memory:    3045728 KiB";;RedHatEnterpriseLinux7/RHEL7-34890
748;;;;;;;;;4;"3. migrate to another host 
 
* # virsh migrate RHEL71-lhuang --live qemu+ssh://test1/system
";​​;;RedHatEnterpriseLinux7/RHEL7-34890
748;;;;;;;;;5;"4. then check it on the target host:
 
 
* # virsh dumpxml RHEL71-lhuang

";"Same as before migration.
 
 Output:
 ...
   <memory unit='KiB'>3145728</memory>
   <currentMemory unit='KiB'>3045728</currentMemory>
 ...";;RedHatEnterpriseLinux7/RHEL7-34890
748;;;;;;;;;6;"* # virsh dominfo RHEL71-lhuang|grep memory -i
";"Output:
 Max memory:     3145728 KiB
 Used memory:    3045728 KiB";;RedHatEnterpriseLinux7/RHEL7-34890
749;RHEL7-34891;[Managed save] Check the memory balloon size after restoring a managed save guest;"Guest(memory != current memory) memory should not change after managedsave/restore, migrate or snapshot/revert.
Bug - 1242940";Fangge Jin (fjin);High;Positive;Not Automated;;1;" Scenario1:
 1. prepare a VM memory != current memory:
 (Notes: Need to make sure the guest has a good os and can fully boot up, then after start and the os fully boot, ""currentMemory""  will be the value you edit.)
 # virsh dumpxml RHEL71-lhuang
 ...
   <maxMemory slots='16' unit='KiB'>55600128</maxMemory>
   <memory unit='KiB'>3145728</memory>
   <currentMemory unit='KiB'>3045728</currentMemory>
 ...

 # virsh dominfo RHEL71-lhuang

";"1.Output:
 Id:             19
 Name:           RHEL71-lhuang
 UUID:           e7041d2f-4811-4fae-93f8-20e029817e63
 OS Type:        hvm
 State:          running
 CPU(s):         4
 CPU time:       745.2s
 Max memory:     3145728 KiB
 Used memory:    3045728 KiB
 Persistent:     yes
 Autostart:      disable
 Managed save:   no
 Security model: selinux
 Security DOI:   0
 Security label: system_u:system_r:svirt_t:s0:c181,c837 (enforcing)";Test Case;RedHatEnterpriseLinux7/RHEL7-34891
749;;;;;;;;;2;"2. managedsave and restart and check the current memory:

 # virsh managedsave RHEL71-lhuang
 Domain RHEL71-lhuang state saved by libvirt

 # virsh start RHEL71-lhuang
 Domain RHEL71-lhuang started

 # virsh dumpxml RHEL71-lhuang
";"2.Output:
 ...
   <maxMemory slots='16' unit='KiB'>55600128</maxMemory>
   <memory unit='KiB'>3145728</memory>
   <currentMemory unit='KiB'>3045728</currentMemory>
 ...";;RedHatEnterpriseLinux7/RHEL7-34891
749;;;;;;;;;3;"Scenario2:
 3.migrate to another host
 # virsh migrate RHEL71-lhuang --live qemu+ssh://test1/system";​​;;RedHatEnterpriseLinux7/RHEL7-34891
749;;;;;;;;;4;"4. then check it on the target host:
 # virsh dumpxml RHEL71-lhuang






 # virsh dominfo RHEL71-lhuang  |grep memory
";"4. Output:
 ... 
 <maxMemory slots='16' unit='KiB'>55600128</maxMemory>
 <memory unit='KiB'>3145728</memory> 
 <currentMemory unit='KiB'>3045728</currentMemory> 
 
 Max memory: 3145728 KiB Used memory: 3045728 KiB
​​";;RedHatEnterpriseLinux7/RHEL7-34891
749;;;;;;;;;5;"Scenario3:
 5. create an internal snapshot and revert it:
 # virsh dumpxml RHEL71-lhuang...<maxMemory slots='16' unit='KiB'>55600128</maxMemory><memory unit='KiB'>3145728</memory><currentMemory unit='KiB'>3045728</currentMemory>.. 
 
 #virsh snapshot-create-as RHEL71-lhuang s2Domain snapshot s2 created
 
 # virsh destroy RHEL71-lhuangDomain RHEL71-lhuang destroyed# virsh snapshot-revert RHEL71-lhuang s2";​​;;RedHatEnterpriseLinux7/RHEL7-34891
749;;;;;;;;;6;"6. recheck the current memory:
 # virsh dumpxml RHEL71-lhuang


 # virsh dominfo RHEL71-lhuang |grep memory
";"6. Output:
 ... <maxMemory slots='16' unit='KiB'>55600128</maxMemory>
 <memory unit='KiB'>3145728</memory> 
 <currentMemory unit='KiB'>3045728</currentMemory>
 
 Max memory: 3145728 KiB
 Used memory: 3045728 KiB
​​";;RedHatEnterpriseLinux7/RHEL7-34891
750;RHEL7-34980;Check QMP event for QMP S3 and pm-wakeup; Track event for QMP S3 and pm-wakeup;Yan Fu (yafu);Low;Positive;Not Automated;;1;" 1.Prepare a running domain enabled pm-suspend:
   ...
   <pm>
     <suspend-to-mem enabled='yes'/>
   </pm>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-34980
750;;;;;;;;;2;"2.do S3  and check the event handle:
 [terminal 1]#python /usr/share/doc/libvirt-python-1.2.17/examples/event-test.py
 [terminal 2]#virsh dompmsuspend vm --target mem
​​";"2.The guest agent will be in 'disconnected' status while it was stop or unreachable for libvirt
 Output: [terminal 1]
 myDomainEventAgentLifecycleCallback: Domain rhel7.2(5) disconnected channel event
 myDomainEventPMSuspendCallback: Domain rhel7.2(5) system pmsuspend
 myDomainEventCallback1 EVENT: Domain rhel7.2(5) PMSuspended Memory
 myDomainEventCallback2 EVENT: Domain rhel7.2(5) PMSuspended Memory
 ...
​​";;RedHatEnterpriseLinux7/RHEL7-34980
750;;;;;;;;;3;"3.Wakeup the domain and check the event handle:
 [terminal 2]#virsh dompmwakeup vm
​​";"3.The guest agent will be in 'connected' status while it was stop or unreachable for libvirt
 Output:[terminal 1]
 myDomainEventPMWakeupCallback: Domain rhel7.2(5) system pmwakeup
 myDomainEventCallback1 EVENT: Domain rhel7.2(5) Started Wakeup
 myDomainEventCallback2 EVENT: Domain rhel7.2(5) Started Wakeup
 myDomainEventAgentLifecycleCallback: Domain rhel7.2(5) connected channel event
 
​​";;RedHatEnterpriseLinux7/RHEL7-34980
751;RHEL7-34981;[Migration] [--dname] Change domain name on target host when do live migration - migration fails- bug 1181182;"Check Libvirt free priv->origname when migration failed.
 Bug 1181182 - libvirt will set a wrong priv->origname when do migrate to target then migrate back to source fail";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" 1.set this in source host qemu.conf:
 security_driver = ""none""
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-34981
751;;;;;;;;;2;"2.set this in target host qemu.conf:
 security_driver = ""selinux""";​​;;RedHatEnterpriseLinux7/RHEL7-34981
751;;;;;;;;;3;"3.start a guest have this label in source:
 
   <seclabel type='dynamic' model='dac' relabel='yes'/>
 
 ";​​;;RedHatEnterpriseLinux7/RHEL7-34981
751;;;;;;;;;4;"4. migrate to target with --dname:
 
* # virsh migrate r7 --live qemu+ssh://lhuang/system --dname r7-12 --verbose --p2p --tunnelled
";Migration succeeds;;RedHatEnterpriseLinux7/RHEL7-34981
751;;;;;;;;;5;"on target:
 
*  # virsh dumpxml r7-2|grep seclabel -A5
";"Output:
 <seclabel type='dynamic' model='selinux' relabel='yes'>
     <label>system_u:system_r:svirt_t:s0:c504,c975</label>
     <imagelabel>system_u:object_r:svirt_image_t:s0:c504,c975</imagelabel>
   </seclabel>
   <seclabel type='dynamic' model='dac' relabel='yes'>
     <label>+107:+107</label>
     <imagelabel>+107:+107</imagelabel>
   </seclabel>";;RedHatEnterpriseLinux7/RHEL7-34981
751;;;;;;;;;6;"5.try to migrate this guest back to source with --dname:
 
* # virsh migrate r7-12 --live qemu+ssh://test1/system --dname r7
error: unsupported configuration: Unable to find security driver for label selinux";Migration fails;;RedHatEnterpriseLinux7/RHEL7-34981
751;;;;;;;;;7;"6.then destroy target guest:
 
* # virsh destroy r7-12
Domain r7-12 destroyed";​​;;RedHatEnterpriseLinux7/RHEL7-34981
751;;;;;;;;;8;"7. On start host:
 
* # virsh dumpxml r7|grep seclabel -A5
";"no seclabel was added in r7 xml
​​";;RedHatEnterpriseLinux7/RHEL7-34981
751;;;;;;;;;9;"8.start source guest again:
 
* # virsh start r7
Domain r7 started";​​;;RedHatEnterpriseLinux7/RHEL7-34981
751;;;;;;;;;10;"9.Migrate guest with --dname again:
 
* # virsh migrate r7 --live qemu+ssh://lhuang/system --dname r7-12 --verbose --p2p --tunnelled
migratoin: [100%]";"Migration succeed.
​​";;RedHatEnterpriseLinux7/RHEL7-34981
752;RHEL7-34982;[block-job]Check QMP event for blockcopy/blockcommit;Check QMP event for blockcopy/blockcommit.;Yan Fu (yafu);High;Positive;Not Automated;;1;" 1.Do blockcopy and check the event
 [terminal 1]  #python /usr/share/doc/libvirt-python-***/examples/event-test.py
 
 [terminal 2]  #virsh event --all --loop
 
 [terminal 3]#virsh blockcopy vm vda /tmp/copy --pivot
​​";"
 
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-34982
752;;;;;;;;;2;" 1.Check both the python script and virsh event, there are two events recorded:
​​";"[terminal 1]Output:
     myDomainEventAgentLifecycleCallback: Domain rhel7.2(8) connected channel event
     myDomainEventBlockJobCallback: Domain rhel7.2(8) Copy on disk /var/lib/libvirt/images/rhel7.2.qcow2 Ready
     myDomainEventBlockJob2Callback: Domain rhel7.2(8) Copy on disk vda Ready
     myDomainEventBlockJobCallback: Domain rhel7.2(8) Copy on disk /var/lib/libvirt/images/rhel7.2.qcow2 Completed
     myDomainEventBlockJob2Callback: Domain rhel7.2(8) Copy on disk vda Completed
 
 [terminal 2]Output:
   event 'block-job' for domain rhel7.2: Block Copy for /var/lib/libvirt/images/rhel7.2.qcow2 ready
   event 'block-job-2' for domain rhel7.2: Block Copy for vda ready
   event 'block-job' for domain rhel7.2: Block Copy for /var/lib/libvirt/images/rhel7.2.qcow2 completed
   event 'block-job-2' for domain rhel7.2: Block Copy for vda completed";;RedHatEnterpriseLinux7/RHEL7-34982
752;;;;;;;;;3;"2.Do blockcommit and check the event 
 #virsh snapshot-create-as vm s1 --disk-only --quiesce
 #virsh blockcommit vm vda --active --pivot
​​";"
 
​​";;RedHatEnterpriseLinux7/RHEL7-34982
752;;;;;;;;;4;"2.Check both the python script and virsh event, there are two events recorded:
​​";"[terminal 1]Output:
   myDomainEventBlockJobCallback: Domain rhel7.2(8) ActiveCommit on disk /tmp/copy.s1 Ready
 myDomainEventBlockJob2Callback: Domain rhel7.2(8) ActiveCommit on disk vda Ready
 myDomainEventBlockJobCallback: Domain rhel7.2(8) ActiveCommit on disk /tmp/copy.s1 Completed
 myDomainEventBlockJob2Callback: Domain rhel7.2(8) ActiveCommit on disk vda Completed
 
 [terminal 2]Output:
 event 'block-job' for domain rhel7.2: Active Block Commit for /tmp/copy.s1 ready
 event 'block-job-2' for domain rhel7.2: Active Block Commit for vda ready
 event 'block-job' for domain rhel7.2: Active Block Commit for /tmp/copy.s1 completed
 event 'block-job-2' for domain rhel7.2: Active Block Commit for vda completed";;RedHatEnterpriseLinux7/RHEL7-34982
753;RHEL7-35179;System monitor;;Bohdan Milar (bmilar);Critical;Positive;Not Automated;481375;1;1. Move mouse cursor far below bottom edge to raise notification bar.;"1. There are ""CPU"" and ""Memory"" hints when pointing over the graph windows.";Test Case;RedHatEnterpriseLinux7/RHEL7-35179
753;;;;;;;;;2;2. On the left you should see system monitor extension with two windows.;2. You should see system monitor opened (on the tab that it was previously closed on) after clicking any of its two windows.;;RedHatEnterpriseLinux7/RHEL7-35179
753;;;;;;;;;3;3. Point over both of them to see hints and then click any of the windows.;3. After disabling the extension, the applet should not be present any more in the notification bar.;;RedHatEnterpriseLinux7/RHEL7-35179
753;;;;;;;;;4;"4. Disable the System monitor extension via&nbsp_place_holder;gnome-shell-extension-prefs.";​​;;RedHatEnterpriseLinux7/RHEL7-35179
754;RHEL7-35184;Removable Drive Menu;;Bohdan Milar (bmilar);Critical;Positive;Not Automated;484941;1;1. Connect an external drive (e. g. USB flash) or insert a media (e. g. DVD ROM).;"The ""Actions"" steps should cause these results:
1. The ""eject"" icon appears on the right side of the Gnome (top) panel after a removable drive/medium is connected/inserted.";Test Case;RedHatEnterpriseLinux7/RHEL7-35184
754;;;;;;;;;2;"2. Click the ""eject"" icon which should appear on the right side of the Gnome (top) panel.";"2. When clicking the ""eject"" icon in the Gnome panel a menu with the list of removable drive should appear.";;RedHatEnterpriseLinux7/RHEL7-35184
754;;;;;;;;;3;"3. Choose the ""Open File"" item from the manu.";3. Nautilus window should open displaying the content of the user's home directory.;;RedHatEnterpriseLinux7/RHEL7-35184
754;;;;;;;;;4;"4. Click the ""eject"" icon in the Gnome panel and choose the name of the removable drive.";4. Disk Usage Analyzer should open a window wich a chart showing the structure of the removable drive's root directory.;;RedHatEnterpriseLinux7/RHEL7-35184
754;;;;;;;;;5;"5. Click the ""eject"" icon in the Gnome panel and then the ""eject"" icon right of the removable drive's name.";"5. The removable drive should be unmounted and the ""eject"" icon should disappear from the Gnome panel.";;RedHatEnterpriseLinux7/RHEL7-35184
755;RHEL7-35185;Native Window Placement;;Bohdan Milar (bmilar);Critical;Positive;Not Automated;484944;1;1. Invoke the Overview screen (e. g. by pressing the Super key).;"1. When the Overview screen is invoked for the first time (Actions, step 1 - ""Native Window Placement"" is off), miniatures of the windows are arranged in row(s) and their titles are placed under them not covering any part of a miniature.";Test Case;RedHatEnterpriseLinux7/RHEL7-35185
755;;;;;;;;;2;2. Quit the Overview screen (e. g. by pressing the Esc key).;"2. When the Overview screen is invoked for the second time (Actions, step 4 - ""Native Window Placement"" is on), miniatures of the windows are not arranged in rows and their titles are placed above them covering the top part of the relevant window miniature.";;RedHatEnterpriseLinux7/RHEL7-35185
755;;;;;;;;;3;"3. In the ""GNOME Shell Extensions"" window, enable the ""Native Window Placement"" extension.";​​;;RedHatEnterpriseLinux7/RHEL7-35185
755;;;;;;;;;4;4. Invoke the Overview screen (e. g. by pressing the Super key).;​​;;RedHatEnterpriseLinux7/RHEL7-35185
755;;;;;;;;;5;5. Quit the Overview screen (e. g. by pressing the Esc key).;​​;;RedHatEnterpriseLinux7/RHEL7-35185
756;RHEL7-35186;Screenshot Window Sizer;;Bohdan Milar (bmilar);Critical;Positive;Not Automated;484949;1;1. Press Ctrl+Alt+s.;1. The gedit window should change its size and a box appeat showing the new resolution.;Test Case;RedHatEnterpriseLinux7/RHEL7-35186
756;;;;;;;;;2;2. Press Ctrl+Alt+s again (at least 5 times).;2. Pressing Ctrl+Alt+s again and again causes the size of the window cyckle through 5 predefined sizes.;;RedHatEnterpriseLinux7/RHEL7-35186
757;RHEL7-35187;User Themes extension;;Bohdan Milar (bmilar);Critical;Positive;Not Automated;484953;1;1. In the Tweak Tool, switch to the Appearance Tweak.;"1. When the Tweak Tool is opened for the first time (Actions, step 1 - ""User Themes"" is off), you should see one (inactive) button in the ""Shell theme"" row and a warning sign (!) beside it.";Test Case;RedHatEnterpriseLinux7/RHEL7-35187
757;;;;;;;;;2;2. Quit gnome-tweak-tool.;"2. When the Tweak Tool is opened for the second time (Actions, step 5 - ""User Themes"" is on), you should see two active buttons in the ""Shell theme"" row and no warning sign beside them.";;RedHatEnterpriseLinux7/RHEL7-35187
757;;;;;;;;;3;"3. In the ""GNOME Shell Extensions"" window, enable the ""User Themes"" extension.";​​;;RedHatEnterpriseLinux7/RHEL7-35187
757;;;;;;;;;4;4. Start gnome-tweak-tool.;​​;;RedHatEnterpriseLinux7/RHEL7-35187
757;;;;;;;;;5;5. In the Tweak Tool, switch to the Appearance Tweak.;​​;;RedHatEnterpriseLinux7/RHEL7-35187
758;RHEL7-35193;Auto move windows - Add rule;;Bohdan Milar (bmilar);Critical;Positive;Not Automated;481454;1;1. Click the gear button belonging to the Auto Move Windows item.;1. Font Viewer is opened on Workspace 3.;Test Case;RedHatEnterpriseLinux7/RHEL7-35193
758;;;;;;;;;2;"2. Click on ""Add Rule"" button, select ""Font Viewer"" and set Workspace 3.";2. gedit is opened on Workspace 2.;;RedHatEnterpriseLinux7/RHEL7-35193
758;;;;;;;;;3;"3. Click on ""Add Rule"" button, select ""gedit"" and set Workspace 2.";​​;;RedHatEnterpriseLinux7/RHEL7-35193
758;;;;;;;;;4;4. Open Font Viewer and gedit and check if they are opened in right workspaces.;​​;;RedHatEnterpriseLinux7/RHEL7-35193
759;RHEL7-35195;Auto move windows - Remove rule;;Bohdan Milar (bmilar);Critical;Positive;Not Automated;481458;1;1. Start gnome-shell-extension-prefs.;1. It is possible to remove created rules.;Test Case;RedHatEnterpriseLinux7/RHEL7-35195
759;;;;;;;;;2;2. Click the gear button belonging to the Auto Move Windows item.;2. After the rules are removed, Font Viewer and gedit open on current Workspace.;;RedHatEnterpriseLinux7/RHEL7-35195
759;;;;;;;;;3;"3. Select the ""gedit Text Editor"" item and click the remove (x) button.";​​;;RedHatEnterpriseLinux7/RHEL7-35195
759;;;;;;;;;4;"4. Select the ""Font Viewer"" item and click the remove (x) button.";​​;;RedHatEnterpriseLinux7/RHEL7-35195
759;;;;;;;;;5;5. Open Font Viewer and gedit.;​​;;RedHatEnterpriseLinux7/RHEL7-35195
760;RHEL7-35198;windowNavigator extension;;Bohdan Milar (bmilar);Critical;Positive;Not Automated;484967;1;1. Invoke the Overview screen (e. g. by pressing the Super key).;"1. Holding Alt key and pressing Alt+1 or Ctrl+1 (Actions, steps 2 - 4) has no effect in Overview when the ""windowNavigator"" extension is turned off.";Test Case;RedHatEnterpriseLinux7/RHEL7-35198
760;;;;;;;;;2;2. Hold Alt key for several seconds.;"2. After ""windowNavigator"" extension is turned on, the keys have these effects:
* Holding Alt key displays small numbers in the top right-hand corner of each window miniature on current Workspace.
* Pressing Alt+1 moves focus to the window marked ""1"" (in the top right-hand corner) and Overview mode is finished.
* Pressing Ctrl+1 switches to Workspace 1 and&nbsp_place_holder;Overview mode stays active.";;RedHatEnterpriseLinux7/RHEL7-35198
760;;;;;;;;;3;3. Press Alt+1.;​​;;RedHatEnterpriseLinux7/RHEL7-35198
760;;;;;;;;;4;4. Press Ctrl+1.;​​;;RedHatEnterpriseLinux7/RHEL7-35198
760;;;;;;;;;5;5. Quit the Overview screen (e. g. by pressing the Esc key).;​​;;RedHatEnterpriseLinux7/RHEL7-35198
760;;;;;;;;;6;"6. In the ""GNOME Shell Extensions"" window, enable the ""windowNavigator"" extension.";​​;;RedHatEnterpriseLinux7/RHEL7-35198
760;;;;;;;;;7;7. Invoke the Overview screen (e. g. by pressing the Super key).;​​;;RedHatEnterpriseLinux7/RHEL7-35198
760;;;;;;;;;8;8. Hold Alt key for several seconds.;​​;;RedHatEnterpriseLinux7/RHEL7-35198
760;;;;;;;;;9;9. Press Alt+1.;​​;;RedHatEnterpriseLinux7/RHEL7-35198
760;;;;;;;;;10;10. Invoke the Overview screen (e. g. by pressing the Super key).;​​;;RedHatEnterpriseLinux7/RHEL7-35198
760;;;;;;;;;11;11. Press Ctrl+1.;​​;;RedHatEnterpriseLinux7/RHEL7-35198
760;;;;;;;;;12;12. Quit the Overview screen (e. g. by pressing the Esc key).;​​;;RedHatEnterpriseLinux7/RHEL7-35198
761;RHEL7-35642;[Hyper-V][Mouse]Check mouse status in command console;In command line console, install gpm package and check mouse function;Yaju Cao (yacao);Medium;Positive;Manual Only;;1;1. Switch the VM to console mode;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-35642
761;;;;;;;;;2;"2. Install gpm service in the VM
 $ yum install gpm";​​;;RedHatEnterpriseLinux7/RHEL7-35642
761;;;;;;;;;3;"3. Run command:
 # /etc/init.d/gpm restart
 * For RHEL7+, use:
 # systemctl restart gpm
​​";Mouse should get captured and make sure mouse cursor should match the coordination.;;RedHatEnterpriseLinux7/RHEL7-35642
762;RHEL7-35698;[tunable][cputune/blkdevtune] Check the tunable events while set vcpupin,emulatorpin,blkdeviotune for guest;"Check the tunable events while set vcpupin,emulatorpin,blkdeviotune for guest
 Bug 1115898 - [RFE] Add events for cputune and iotune change";Yan Fu (yafu);High;Positive;Not Automated;;1;" 1.Configure the domain vcpu affinity and check the event at the same time:
 [terminal 1]#virsh event --all --loop
 
 [terminal 2]#python /usr/share/doc/libvirt-python-1.0.1/events-python/event-test.py
 
 [terminal 3] #virsh vcpupin rhel7.2 --vcpu 0 --cpulist 1";"1.Check both the 'virsh event' and python scripts:
 Output:
 [terminal 1]
 event 'tunable' for domain rhel7.2:
     cputune.vcpupin0: 1
 
 [terminal 2]
 Using uri:qemu:///system
 myDomainEventTunableCallback: Domain rhel7.2(2) {'cputune.vcpupin0': '1'}
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-35698
762;;;;;;;;;2;"2.Configure the domain emulator affinity and check the event at the same time:
 [terminal 3] #virsh emulatorpin rhel7.2 --cpulist 1-4,^2
 
​​";"2.Check both the 'virsh event' and python scripts:
 Output:
 [terminal 1]
     cputune.emulatorpin: 1
 event 'tunable' for domain rhel7.2:
     cputune.emulatorpin: 1,3-4
 
 [terminal 2]
 Using uri:qemu:///system
 myDomainEventTunableCallback: Domain rhel7.2(2) {'cputune.emulatorpin': '1,3-4'}
​​";;RedHatEnterpriseLinux7/RHEL7-35698
762;;;;;;;;;3;"3.Set disk IO parameters:
 [terminal 3]#virsh blkdeviotune rhel7.2 vda --read-bytes-sec 200 --write-bytes-sec 300 --read-iops-sec 20 --write-iops-sec 30 
​​";" 3.Check both the 'virsh event' and python scripts:
 Output:
 [terminal 1]
 event 'tunable' for domain rhel7.2:
     blkdeviotune.disk: vda
     blkdeviotune.read_bytes_sec: 200
     blkdeviotune.write_bytes_sec: 300
     blkdeviotune.read_iops_sec: 20
     blkdeviotune.write_iops_sec: 30
 
 [terminal 2]
 Using uri:qemu:///system
 myDomainEventTunableCallback: Domain rhel7.2(3) {'blkdeviotune.write_iops_sec': 30L, 'blkdeviotune.write_bytes_sec': 300L, 'blkdeviotune.read_iops_sec': 20L, 'blkdeviotune.read_bytes_sec': 200L, 'blkdeviotune.disk': 'vda'}
 
 
 
 *******set the write_bytes_sec and write_iops_sec will set the write_iops_sec_max to 1/0 value of write_iops_sec,but the event is not record in the 'virsh event'************
 #virsh blkdeviotune rhel7.2 vda
 total_bytes_sec: 0
 read_bytes_sec : 200
 write_bytes_sec: 300
 total_iops_sec : 0
 read_iops_sec  : 20
 write_iops_sec : 30
 total_bytes_sec_max: 0
 read_bytes_sec_max: 20
 write_bytes_sec_max: 20
 total_iops_sec_max: 0
 read_iops_sec_max: 2
 write_iops_sec_max: 3
 size_iops_sec  : 0
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-35698
762;;;;;;;;;4;"4.Set schedule parameters:
 [terminal 3]
 # virsh schedinfo r6
 Scheduler      : posix
 cpu_shares     : 1024
 vcpu_period    : 100000
 vcpu_quota     : -1
 emulator_period: 100000
 emulator_quota : -1
 
 # virsh schedinfo r6 --set vcpu_period=111111
 Scheduler      : posix
 cpu_shares     : 1024
 vcpu_period    : 111111
 vcpu_quota     : -1
 emulator_period: 100000
 emulator_quota : -1";"Output:
 [terminal 1]
 event 'tunable' for domain r6: cputune.vcpu_period: 111111";;RedHatEnterpriseLinux7/RHEL7-35698
762;;;;;;;;;5;"# virsh schedinfo r6 --set cpu_shares=0
 Scheduler      : posix
 cpu_shares     : 2
 vcpu_period    : 111111
 vcpu_quota     : -1
 emulator_period: 100000
 emulator_quota : -1";event 'tunable' for domain r6: cputune.cpu_shares: 2;;RedHatEnterpriseLinux7/RHEL7-35698
762;;;;;;;;;6;"# virsh schedinfo r6 --set vcpu_quota=-1
 Scheduler      : posix
 cpu_shares     : 2
 vcpu_period    : 111111
 vcpu_quota     : -1
 emulator_period: 100000
 emulator_quota : -1";event 'tunable' for domain r6: cputune.vcpu_quota: -1;;RedHatEnterpriseLinux7/RHEL7-35698
762;;;;;;;;;7;"# virsh schedinfo r6 --set vcpu_quota=-2
 Scheduler      : posix
 cpu_shares     : 2
 vcpu_period    : 111111
 vcpu_quota     : -1
 emulator_period: 100000
 emulator_quota : -1";event 'tunable' for domain r6: cputune.vcpu_quota: -2;;RedHatEnterpriseLinux7/RHEL7-35698
762;;;;;;;;;8;"# virsh schedinfo r6 --set vcpu_quota=18446744073709551
 Scheduler      : posix
 cpu_shares     : 2
 vcpu_period    : 111111
 vcpu_quota     : 18446744073709551
 emulator_period: 100000
 emulator_quota : -1";event 'tunable' for domain r6: cputune.vcpu_quota: 18446744073709551;;RedHatEnterpriseLinux7/RHEL7-35698
762;;;;;;;;;9;"# virsh schedinfo r6 --set vcpu_quota=-1
 Scheduler      : posix
 cpu_shares     : 2
 vcpu_period    : 111111
 vcpu_quota     : -1
 emulator_period: 100000
 emulator_quota : -1";event 'tunable' for domain r6: cputune.vcpu_quota: -1;;RedHatEnterpriseLinux7/RHEL7-35698
762;;;;;;;;;10;"# virsh schedinfo r6 --set emulator_period=12345
 Scheduler      : posix
 cpu_shares     : 2
 vcpu_period    : 111111
 vcpu_quota     : -1
 emulator_period: 12345
 emulator_quota : -1";event 'tunable' for domain r6: cputune.emulator_period: 12345;;RedHatEnterpriseLinux7/RHEL7-35698
762;;;;;;;;;11;"# virsh schedinfo r6 --set emulator_quota=12345
 Scheduler      : posix
 cpu_shares     : 2
 vcpu_period    : 111111
 vcpu_quota     : -1
 emulator_period: 12345
 emulator_quota : 12345";event 'tunable' for domain r6: cputune.emulator_quota: 12345;;RedHatEnterpriseLinux7/RHEL7-35698
762;;;;;;;;;12;#virsh vcpupin r6 1 3;event 'tunable' for domain r6: cputune.vcpupin1: 3;;RedHatEnterpriseLinux7/RHEL7-35698
763;RHEL7-36909;[tray-change]Check tray-change event for insert/eject a iso to the cdrom of guest-1226849;Insert/eject an iso to the cdrom of guest and check tray-change event.;Yan Fu (yafu);High;Positive;Not Automated;;1;" 1.Start a guest with cdrom in the first termina
 # virsh dumpxml 7.0 |grep cdrom -A 6
     <disk type='file' device='cdrom'>
       <driver name='qemu' type='raw'/>
       <backingStore/>
       <target dev='hdc' bus='ide'/>
       <readonly/>
       <alias name='ide0-1-0'/>
       <address type='drive' controller='0' bus='1' target='0' unit='0'/>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-36909
763;;;;;;;;;2;"2.Create a iso file 
 #qemu-img create /var/lib/libvirt/image/test.img 100M";​​;;RedHatEnterpriseLinux7/RHEL7-36909
763;;;;;;;;;3;"3.Open the second terminal, run the 'event-test.py' python script to catch the event
 
 # python /usr/share/doc/libvirt-python-1.2.15/examples/event-test.py qemu:///system
 Using uri:qemu:///system";​​;;RedHatEnterpriseLinux7/RHEL7-36909
763;;;;;;;;;4;"4.Open third terminal, run the virsh event command to catch the events
 #virsh event --all --loop";​​;;RedHatEnterpriseLinux7/RHEL7-36909
763;;;;;;;;;5;"5.Run the change-media command to insert/eject iso to the cdrom 
 
 # virsh change-media 7.0 hdc /var/lib/libvirt/images/test.img --insert
 Successfully inserted media.
​​";"
 
​​";;RedHatEnterpriseLinux7/RHEL7-36909
763;;;;;;;;;6;6.Check the output in second terminal;"Output:
 myDomainEventTrayChangeCallback: Domain rhel7(13) tray change devAlias: drive-ide0-1-0 reason: 0
 myDomainEventTrayChangeCallback: Domain rhel7(13) tray change devAlias: drive-ide0-1-0 reason: 1";;RedHatEnterpriseLinux7/RHEL7-36909
763;;;;;;;;;7;7. Check the output in third terminal:;"Output:
 event 'tray-change' for domain rhel7 disk drive-ide0-1-0: opened
 event 'tray-change' for domain rhel7 disk drive-ide0-1-0: closed";;RedHatEnterpriseLinux7/RHEL7-36909
763;;;;;;;;;8;"
 # virsh change-media 7.0 hdc /var/lib/libvirt/images/test.img --eject
 Successfully ejected media.";​​;;RedHatEnterpriseLinux7/RHEL7-36909
763;;;;;;;;;9;Check the output in second terminal;"Output:
 myDomainEventTrayChangeCallback: Domain rhel7(13) tray change devAlias: drive-ide0-1-0 reason: 0
​​";;RedHatEnterpriseLinux7/RHEL7-36909
763;;;;;;;;;10;Check the output in third terminal:;"Output:
 event 'tray-change' for domain rhel7 disk drive-ide0-1-0: opened
​​";;RedHatEnterpriseLinux7/RHEL7-36909
764;RHEL7-37046;fs-qe case:/autofs/function/master-config tag:autofs,Tier1,;/autofs/function/master-config tag:autofs,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37046
765;RHEL7-37047;fs-qe case:/autofs/function/localmount tag:autofs,Tier1,Regression;/autofs/function/localmount tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37047
766;RHEL7-37048;fs-qe case:/autofs/function/automounting-nfs-via-RDMA-bz886623 tag:autofs,Tier1,Regression;/autofs/function/automounting-nfs-via-RDMA-bz886623 tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37048
767;RHEL7-37049;fs-qe case:/autofs/autofs-cifs tag:autofs,Tier1,Sanity;/autofs/autofs-cifs tag:autofs,Tier1,Sanity;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37049
768;RHEL7-37050;fs-qe case:/autofs/valgrind-check/host-map tag:autofs,Tier1,Function;/autofs/valgrind-check/host-map tag:autofs,Tier1,Function;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37050
769;RHEL7-37051;fs-qe case:/autofs/bugzillas tag:autofs,Tier1, gset:--variant=server,;/autofs/bugzillas tag:autofs,Tier1, gset:--variant=server,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37051
770;RHEL7-37052;fs-qe case:/autofs/regression/bz1049017-autofs-mounts-hang-if-maps-are-reloaded-while-mount-is-expiring tag:autofs,Tier1,regression;/autofs/regression/bz1049017-autofs-mounts-hang-if-maps-are-reloaded-while-mount-is-expiring tag:autofs,Tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37052
771;RHEL7-37053;fs-qe case:/autofs/regression/bz787595 tag:autofs,Tier1,Regression;/autofs/regression/bz787595 tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37053
772;RHEL7-37054;fs-qe case:/autofs/regression/bz908020 tag:autofs,Tier1,Regression;/autofs/regression/bz908020 tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37054
773;RHEL7-37055;fs-qe case:/autofs/regression/bz859078 tag:autofs,Tier1,Regression;/autofs/regression/bz859078 tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37055
774;RHEL7-37056;fs-qe case:/autofs/regression/bz1163957-unable-mount-indirect-after-ls-with-wildcard tag:autofs,Tier1,;/autofs/regression/bz1163957-unable-mount-indirect-after-ls-with-wildcard tag:autofs,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37056
775;RHEL7-37057;fs-qe case:/autofs/regression/bz907512-unmounting-large-number-of-expired-automounts-causes-soft-lockups tag:autofs,Tier1,Regression;/autofs/regression/bz907512-unmounting-large-number-of-expired-automounts-causes-soft-lockups tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37057
776;RHEL7-37058;fs-qe case:/autofs/regression/bz858164-support-automount-in-lxc tag:autofs,Tier1,Regression;/autofs/regression/bz858164-support-automount-in-lxc tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37058
777;RHEL7-37059;fs-qe case:/autofs/regression/bz690404-multiple-direct-maps-different-timeout tag:autofs,Tier1,;/autofs/regression/bz690404-multiple-direct-maps-different-timeout tag:autofs,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37059
778;RHEL7-37060;fs-qe case:/autofs/regression/bz928098 tag:autofs,Tier1,Regression;/autofs/regression/bz928098 tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37060
779;RHEL7-37061;fs-qe case:/autofs/regression/bz1083744-autofs-can-ghost-non-existent-map-entries tag:autofs,Tier1,Regression;/autofs/regression/bz1083744-autofs-can-ghost-non-existent-map-entries tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37061
780;RHEL7-37062;fs-qe case:/autofs/regression/bz1203139-exports-entry-block-parent-mounting tag:autofs,Tier1,;/autofs/regression/bz1203139-exports-entry-block-parent-mounting tag:autofs,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37062
781;RHEL7-37063;fs-qe case:/autofs/regression/bz773127 tag:autofs,Tier1,Regression;/autofs/regression/bz773127 tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37063
782;RHEL7-37064;fs-qe case:/autofs/regression/bz1116182-symlink-expire-feature tag:autofs,Tier1,Regression;/autofs/regression/bz1116182-symlink-expire-feature tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37064
783;RHEL7-37065;fs-qe case:/autofs/regression/bz1160446-automount-map-env-privilege-escalation tag:autofs,Tier1,;/autofs/regression/bz1160446-automount-map-env-privilege-escalation tag:autofs,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37065
784;RHEL7-37066;fs-qe case:/autofs/regression/bz856296-Duplicate-entry-cause-autofs-stop-fail tag:autofs,Tier1,Regression;/autofs/regression/bz856296-Duplicate-entry-cause-autofs-stop-fail tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37066
785;RHEL7-37067;fs-qe case:/autofs/regression/symlinks-expire-check-bz1035630 tag:autofs,Tier1,Regression;/autofs/regression/symlinks-expire-check-bz1035630 tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37067
786;RHEL7-37068;fs-qe case:/autofs/regression/bz1046164-bz1038696-breaks-maps-that-have-v-options tag:autofs,Tier1,regression;/autofs/regression/bz1046164-bz1038696-breaks-maps-that-have-v-options tag:autofs,Tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37068
787;RHEL7-37069;fs-qe case:/autofs/regression/bz1263508-Heavy-program-map-usage-can-lead-to-a-hang tag:autofs,tier1,regression;/autofs/regression/bz1263508-Heavy-program-map-usage-can-lead-to-a-hang tag:autofs,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37069
788;RHEL7-37070;fs-qe case:/autofs/regression/bz753964 tag:autofs,Tier1,Regression;/autofs/regression/bz753964 tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37070
789;RHEL7-37071;fs-qe case:/autofs/regression/bz819703-the-local-ipv6-interface-matching-code-should-be-improved tag:autofs,Tier1,Regression;/autofs/regression/bz819703-the-local-ipv6-interface-matching-code-should-be-improved tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37071
790;RHEL7-37072;fs-qe case:/autofs/regression/bz873922-manually-umount-autofs-MP-causes-automounts-them-fail tag:autofs,Tier1,Regression;/autofs/regression/bz873922-manually-umount-autofs-MP-causes-automounts-them-fail tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37072
791;RHEL7-37073;fs-qe case:/autofs/regression/bz909263-Wildcard-in-nested-mounts-regression tag:autofs,Tier1,Regression;/autofs/regression/bz909263-Wildcard-in-nested-mounts-regression tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37073
792;RHEL7-37074;fs-qe case:/autofs/regression/bz947604-autofs-reload-causes-automount-stop tag:autofs,Tier1,Regression;/autofs/regression/bz947604-autofs-reload-causes-automount-stop tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37074
793;RHEL7-37075;fs-qe case:/autofs/regression/bz1124083-stop-mounting-when-seeing-duplicate-exports tag:autofs,Tier1,Regression;/autofs/regression/bz1124083-stop-mounting-when-seeing-duplicate-exports tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37075
794;RHEL7-37076;fs-qe case:/autofs/regression/bz734675-autofs-does-not-use-local-mounts-on-non-replicated-entries tag:autofs,Tier1,Regression;/autofs/regression/bz734675-autofs-does-not-use-local-mounts-on-non-replicated-entries tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37076
795;RHEL7-37077;fs-qe case:/autofs/regression/bz128966 param:RESVPORT=, tag:autofs,Tier1,Regression;/autofs/regression/bz128966 param:RESVPORT=, tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37077
796;RHEL7-37078;fs-qe case:/autofs/regression/bz128966 param:RESVPORT=yes, tag:autofs,Tier1,Regression;/autofs/regression/bz128966 param:RESVPORT=yes, tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37078
797;RHEL7-37079;fs-qe case:/autofs/regression/bz866271-when-browse-option-is-used-directory-attributes-broken tag:autofs,Tier1,Regression;/autofs/regression/bz866271-when-browse-option-is-used-directory-attributes-broken tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37079
798;RHEL7-37080;fs-qe case:/autofs/regression/bz918843-cannot-browse-net-on-servers-with-mountd-v2-disabled tag:autofs,Tier1,Regression;/autofs/regression/bz918843-cannot-browse-net-on-servers-with-mountd-v2-disabled tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37080
799;RHEL7-37081;fs-qe case:/autofs/regression/bz974884 tag:autofs,Tier1,Regression;/autofs/regression/bz974884 tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37081
800;RHEL7-37082;fs-qe case:/autofs/regression/bz1248821-additional-variables-not-correct tag:autofs,Tier1,Regression;/autofs/regression/bz1248821-additional-variables-not-correct tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37082
801;RHEL7-37083;fs-qe case:/autofs/regression/bz868973-autofs-leaks-udp-sockets-when-a-nfsv4-server-is-not-available tag:autofs,Tier1,Regression;/autofs/regression/bz868973-autofs-leaks-udp-sockets-when-a-nfsv4-server-is-not-available tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37083
802;RHEL7-37084;fs-qe case:/autofs/regression/bz700142-autofs-automount-error-in-mounting-expanded-entry tag:autofs,Tier1,Regression;/autofs/regression/bz700142-autofs-automount-error-in-mounting-expanded-entry tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37084
803;RHEL7-37085;fs-qe case:/autofs/regression/bz1222522-parent-umounted-with-child-remains tag:autofs,Tier1,Regression;/autofs/regression/bz1222522-parent-umounted-with-child-remains tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37085
804;RHEL7-37086;fs-qe case:/autofs/regression/bz798448-failed-maps tag:autofs,Tier1,;/autofs/regression/bz798448-failed-maps tag:autofs,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37086
805;RHEL7-37087;fs-qe case:/autofs/regression/bz239361 tag:autofs,Tier1,Regression;/autofs/regression/bz239361 tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37087
806;RHEL7-37088;fs-qe case:/autofs/regression/bz745775 tag:autofs,Tier1,Regression;/autofs/regression/bz745775 tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37088
807;RHEL7-37089;fs-qe case:/autofs/connectathon tag:autofs,Tier1,;/autofs/connectathon tag:autofs,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37089
808;RHEL7-37090;fs-qe case:/autofs/sanity/Basic tag:autofs,Tier1,Regression;/autofs/sanity/Basic tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37090
809;RHEL7-37091;fs-qe case:/autofs/sanity/reload tag:autofs,Tier1,;/autofs/sanity/reload tag:autofs,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37091
810;RHEL7-37092;fs-qe case:/autofs/sanity/Standardscompliance/initscript tag:autofs,Tier1,;/autofs/sanity/Standardscompliance/initscript tag:autofs,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37092
811;RHEL7-37093;fs-qe case:/autofs/sanity/module-test tag:autofs,Tier1,Sanity;/autofs/sanity/module-test tag:autofs,Tier1,Sanity;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37093
812;RHEL7-37094;fs-qe case:/autofs/sanity/init-script-LSB tag:autofs,Tier1,Sanity;/autofs/sanity/init-script-LSB tag:autofs,Tier1,Sanity;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37094
813;RHEL7-37095;fs-qe case:/autofs/stress/submount-test tag:autofs,Tier1,Regression;/autofs/stress/submount-test tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37095
814;RHEL7-37096;fs-qe case:/autofs/stress/ldap-test tag:autofs,Tier1,;/autofs/stress/ldap-test tag:autofs,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37096
815;RHEL7-37097;fs-qe case:/autofs/stress/ldap-mount-test tag:autofs,Tier1,Regression;/autofs/stress/ldap-mount-test tag:autofs,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37097
816;RHEL7-37098;fs-qe case:/autofs/stress/file-copying tag:autofs,Tier1,;/autofs/stress/file-copying tag:autofs,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-37098
817;RHEL7-37137;[Hyper-V][Memory]Save/Restore guest with DM enabled;Save/Restore guest with DM enabled;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;Start VM, enable Dynamic Memory ; ;Test Case;RedHatEnterpriseLinux7/RHEL7-37137
817;;;;;;;;;2;Make VM memory hot add RHEL7-78246, or balloon inflation RHEL7-12122;​​;;RedHatEnterpriseLinux7/RHEL7-37137
817;;;;;;;;;3;Save VM and restore it.;VM should restore without error, memory info is same as before Save;;RedHatEnterpriseLinux7/RHEL7-37137
818;RHEL7-37306;[virtio-win][viostor] Shutdown guest during iozone running;[virtio-win][viostor] Shutdown guest during iozone running;Yu Wang (wyu);High;Positive;Automated;;1;" 1.start VM with virtio-blk-pci(both system disk and data disk):
 CLI:
 -object iothread,id=thread0 -drive file=win.raw,if=none,id=drive-virtio-disk1,format=raw,serial=mike_cao1,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk1,id=virtio-disk1
 -drive file=test.raw,if=none,id=drive-virtio-disk0,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk0,id=virtio-disk0";1. Guest can be boot successfully ;Test Case;RedHatEnterpriseLinux7/RHEL7-37306
818;;;;;;;;;2;"2.check whether viostor.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled viostor.sys verifier:
    #verifier.exe /standard /driver viostor.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings";"2. Driver can be installed successfully 
 All the Standards flags are checked ,the verified driver fields shows ""viostor.sys"" 
​​";;RedHatEnterpriseLinux7/RHEL7-37306
818;;;;;;;;;3;"3.running iozone on the system disk and data disk(such as C and D disk)
 iozone -az -b c:\aaaa -g 4g -y 32k -i 0 -i 1 -f c:\test-sys
 iozone -az -b d:\bbbb -g 4g -y 32k -i 0 -i 1 -f c:\test-data";"3. guest works fine ,no BSOD occurs.
 eg:
  random  random    bkwd   record   stride                                   
               KB  reclen   write rewrite    read    reread    read   write    read  rewrite     read   fwrite frewrite   fread  freread
               64      32  343980  707070  4165288  4980236                                                                        
               64      64  453645  681818  3818181  4322469                                                                        
              128      32  524835 1196297  3850266  6028707                                                                        
              128      64  567056 1238329  5520262  6838533   ";;RedHatEnterpriseLinux7/RHEL7-37306
818;;;;;;;;;4;"4.During step 3, shutdown VM in guest:
 #shutdown -s -t 0
​​";4.guest can be shutdown succesfully ,no bsod or hangs occurs;;RedHatEnterpriseLinux7/RHEL7-37306
818;;;;;;;;;5;5. start VM with the same cli;5. Guest can be boot successfully;;RedHatEnterpriseLinux7/RHEL7-37306
818;;;;;;;;;6;6.repeat step3;6.iozone runs successfully without any error;;RedHatEnterpriseLinux7/RHEL7-37306
818;;;;;;;;;7;"7.during step 5, shutdown the guest
    #telnet $HostIP $tcp_port
   {""execute"":""qmp_capabilities""}
   {""execute"":""system_powerdown""}";7.guest can be shutdown succesfully ,no bsod or hangs occurs ;;RedHatEnterpriseLinux7/RHEL7-37306
819;RHEL7-37307;[virtio-win][viostor] Shutdown guest after iozone running;[virtio-win][viostor] Shutdown guest after iozone running;Yu Wang (wyu);Medium;Positive;Automated;;1;" 1.start VM with virtio-blk-pci(both system disk and data disk):
 CLI:
 -object iothread,id=thread0 -drive file=win.raw,if=none,id=drive-virtio-disk1,format=raw,serial=mike_cao1,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk1,id=virtio-disk1
 -drive file=test.raw,if=none,id=drive-virtio-disk0,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk0,id=virtio-disk0";" 1. Guest can be boot successfully 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-37307
819;;;;;;;;;2;"2.check whether viostor.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled viostor.sys verifier:
    #verifier.exe /standard /driver viostor.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings";"2. All the Standards flags are checked ,the verified driver fields shows ""viostor.sys""";;RedHatEnterpriseLinux7/RHEL7-37307
819;;;;;;;;;3;"3.running iozone on the system disk and data disk(such as C and D disk)
 iozone -az -b c:\aaaa -g 4g -y 32k -i 0 -i 1 -f c:\test-sys
 iozone -az -b d:\bbbb -g 4g -y 32k -i 0 -i 1 -f c:\test-data";"3. iozone runs successfully without any error 
  random  random    bkwd   record   stride                                   
               KB  reclen   write rewrite    read    reread    read   write    read  rewrite     read   fwrite frewrite   fread  freread
               64      32  343980  707070  4165288  4980236                                                                        
               64      64  453645  681818  3818181  4322469                                                                        
              128      32  524835 1196297  3850266  6028707                                                                        
              128      64  567056 1238329  5520262  6838533                                                                         
​​";;RedHatEnterpriseLinux7/RHEL7-37307
819;;;;;;;;;4;"4.After step 3 ,shutdown VM in guest:
 #shutdown -s -t 0
​​";"4. guest can be shutdown succesfully ,no bsod or hangs occurs
​​";;RedHatEnterpriseLinux7/RHEL7-37307
819;;;;;;;;;5;"5. start VM with the same cli
​​";"5. Guest can be boot successfully
​​";;RedHatEnterpriseLinux7/RHEL7-37307
819;;;;;;;;;6;6.repeat step3;6. iozone runs successfully without any error;;RedHatEnterpriseLinux7/RHEL7-37307
819;;;;;;;;;7;"7.after step 5, shutdown the VM in qmp
    #telnet $HostIP $tcp_port
    {""execute"":""qmp_capabilities""}
    {""execute"":""system_powerdown""}";7.guest can be shutdown succesfully ,no bsod or hangs occurs ;;RedHatEnterpriseLinux7/RHEL7-37307
820;RHEL7-37308;[virtio-win][viostor] Shutdown guest when running iometer;[virtio-win][viostor] Shutdown guest when running iometer;Yu Wang (wyu);High;Positive;Not Automated;;1;" 1.start VM with virtio-blk-pci(both system disk and data disk):
 CLI:
 -object iothread,id=thread0 -drive file=win.raw,if=none,id=drive-virtio-disk1,format=raw,serial=mike_cao1,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk1,id=virtio-disk1
 -drive file=test.raw,if=none,id=drive-virtio-disk0,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk0,id=virtio-disk0"; 1. Guest can boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-37308
820;;;;;;;;;2;"2.check whether viostor.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled viostor.sys verifier:
    #verifier.exe /standard /driver viostor.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings";"2. All the Standards flags are checked ,the verified driver fields shows ""viostor.sys"" 
   
   
​​";;RedHatEnterpriseLinux7/RHEL7-37308
820;;;;;;;;;3;"3.Running iometer on both system disk and data disk
    1) Click Worker1 --> Select system disk and data disk on Disk Targets tab
    2) Click Worker2 --> Select system disk and data disk on Disk Targets tab
   3)  Access Specifications tab --> Add one Global Access Secification to assigned
   4) Test Setup tab --> 15 Minutes --> Cycling Option to ""Cycle # Outstanding I/Os - run step outstanding I/Os on all disks at a time"" --> End 64 -->Power 4
   5)  Run the test";"3.iometer command can be uesd successfully 
  ";;RedHatEnterpriseLinux7/RHEL7-37308
820;;;;;;;;;4;"4.shutdown the guest in qmp
    #telnet $HostIP $tcp_port
   {""execute"":""qmp_capabilities""}
   {""execute"":""system_powerdown""}";4. guest can be shutdown succesfully ,no bsod or hangs occurs;;RedHatEnterpriseLinux7/RHEL7-37308
821;RHEL7-37309;[virtio-win][viostor] Shutdown guest after Iometer running;[virtio-win][viostor] Shutdown guest after Iometer running;Yu Wang (wyu);Medium;Positive;Not Automated;;1;"1.start VM with virtio-blk-pci(both system disk and data disk):
 CLI:
 -object iothread,id=thread0 -drive file=win.raw,if=none,id=drive-virtio-disk1,format=raw,serial=mike_cao1,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk1,id=virtio-disk1
 -drive file=test.raw,if=none,id=drive-virtio-disk0,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk0,id=virtio-disk0 ";" 1. guest boot up correctly 
   
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-37309
821;;;;;;;;;2;"2.check whether viostor.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled viostor.sys verifier:
    #verifier.exe /standard /driver viostor.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings ";"2. All the Standards flags are checked ,the verified driver fields shows ""viostor.sys"" 
​​";;RedHatEnterpriseLinux7/RHEL7-37309
821;;;;;;;;;3;"3.Running iometer on both system disk and data disk
    1) Click Worker1 --> Select system disk and data disk on Disk Targets tab
    2) Click Worker2 --> Select system disk and data disk on Disk Targets tab
   3)  Access Specifications tab --> Add one Global Access Secification to assigned
   4) Test Setup tab --> 15 Minutes --> Cycling Option to ""Cycle # Outstanding I/Os - run step outstanding I/Os on all disks at a time"" --> End 64 -->Power 4
   5)  Run the test";"3.iometer command can be uesd successfully
​​";;RedHatEnterpriseLinux7/RHEL7-37309
821;;;;;;;;;4;"4.after step 3 .Shutdown VM
    # shutdown -t 0 -s";guest can be shutdown succesfully ,no bsod or hangs occurs;;RedHatEnterpriseLinux7/RHEL7-37309
822;RHEL7-37319;[virtio-win][viostor]install guest with large virtual disk;[virtio-win][viostor]install guest with large virtual disk;Yu Wang (wyu);Medium;Positive;Not Automated;;1;"1 create a large virtual disk(system disk and data disk)
    # qemu-img create -f raw win.raw 16T
    # qemu-img create -f raw test.raw 16T
​​";"1 disk can be created successfully
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-37319
822;;;;;;;;;2;"2 Install VM with virtio-blk-pci(both system disk and data disk):
 CLI:
 -object iothread,id=thread0 -drive file=win.raw,if=none,id=drive-virtio-disk1,format=raw,serial=mike_cao1,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk1,id=virtio-disk1
 -drive file=test.raw,if=none,id=drive-virtio-disk0,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk0,id=virtio-disk0
​​";"2 guest can be installed successfully
​​";;RedHatEnterpriseLinux7/RHEL7-37319
822;;;;;;;;;3;3. install viostor driver from virtio-win.iso during guest installation;3. guest and driver could be installed successfully;;RedHatEnterpriseLinux7/RHEL7-37319
822;;;;;;;;;4;"4.check whether viostor.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled viostor.sys verifier:
    #verifier.exe /standard /driver viostor.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings";"4. All the Standards flags are checked ,the verified driver fields shows ""viostor.sys"" 
​​";;RedHatEnterpriseLinux7/RHEL7-37319
822;;;;;;;;;5;"5 run crystal benchmark on system disk (default params )
​​";"5. no bsod or hangs occurs
​​";;RedHatEnterpriseLinux7/RHEL7-37319
823;RHEL7-37483;[Hyper-V][VMBUS]Verify interrupt distribution among all CPUs;Check hyper-v related interrupts in /proc/interrupts, it can be seen in all CPUs;Yaju Cao (yacao);Medium;Positive;Automated;;1;1. Set guest with multiple CPUs and boot it up;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-37483
823;;;;;;;;;2;"2. Check hyper-v related interrupts in /proc/interrupts, it could be processed across all CPUs. The hyper-v interrupts are marked with ""hyper-v"" or ""Hypervisor""
​​";"For a guest with 2 CPUs, 
 #cat /proc/interrupts |grep -i hyper
 HYP:     479646    2804411   Hypervisor callback interrupts
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-37483
824;RHEL7-37562;[virtio-win][viostor] Live migration after hot unplug virtio disks;[virtio-win][viostor] Live migration after hot unplug virtio disks;Yu Wang (wyu);Medium;Positive;Not Automated;;1;" 5 .start source guest with virtio-blk-pci (both system disk and data disk )
 CLI:
 -object iothread,id=thread0 -drive file=win.raw,if=none,id=drive-virtio-disk1,format=raw,serial=mike_cao1,cache=none -device virtio-blk-pci,iothread=thread0,scsi=off,bus=pci.0,drive=drive-virtio-disk1,id=virtio-disk1
 -drive file=test.raw,if=none,id=drive-virtio-disk0,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,iothread=thread0,scsi=off,bus=pci.0,drive=drive-virtio-disk0,id=virtio-disk0"; 1.Guest can be started successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-37562
824;;;;;;;;;2;" 2.check whether viostor.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled viostor.sys verifier:
    #verifier.exe /standard /driver viostor.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings ";"2.All the Standards flags are checked ,the verified driver fields shows ""viostor.sys"" ";;RedHatEnterpriseLinux7/RHEL7-37562
824;;;;;;;;;3;"3.Hot unplug virtio disk
    # telnet source_HostIP tcp_port
    #{""execute"": ""qmp_capabilities""}
    #{""execute"":""device_del"",""arguments"":{""id"":""virtio-disk0""}}";"3. Check the output of qmp,it should contain the message like the following (device_deleted)
 {""return"": {}}
 {""timestamp"": {""seconds"": 1447637742, ""microseconds"": 664407}, ""event"": ""DEVICE_DELETED"", ""data"": {""path"": ""/machine/peripheral/virtio-disk0/virtio-backend""}}
 {""timestamp"": {""seconds"": 1447637742, ""microseconds"": 881569}, ""event"": ""DEVICE_DELETED"", ""data"": {""device"": ""virtio-disk0"", ""path"": ""/machine/peripheral/virtio-disk0""}}
 Disk can be deleted successfully on guest.";;RedHatEnterpriseLinux7/RHEL7-37562
824;;;;;;;;;4;"5 .start dst guest with “-incoming tcp:0:5888 ” on another host (only data disk )
 CLI:
 -object iothread,id=thread0 -drive file=win.raw,if=none,id=drive-virtio-disk1,format=raw,serial=mike_cao1,cache=none -device virtio-blk-pci,iothread=thread0,scsi=off,bus=pci.0,drive=drive-virtio-disk1,id=virtio-disk1 -incoming tcp:0:5888
​​";"5. Start the listenning port again successfully 
​​";;RedHatEnterpriseLinux7/RHEL7-37562
824;;;;;;;;;5;"6.doing live migration to dst host
 {""execute"": ""migrate"",""arguments"":{""uri"": ""tcp:0:5888""}}";6. Guest do live migration successfully after hot unplug;;RedHatEnterpriseLinux7/RHEL7-37562
824;;;;;;;;;6;"7. check migration status until it is finished.
 {""execute"":""query-migrate""}";"7.{""return"": {""status"": ""completed"", ""downtime"": 784, ""total-time"": 39211,
 ""ram"": {""total"": 4312203264, ""remaining"": 311296, ""transferred"": 1338822235}}}";;RedHatEnterpriseLinux7/RHEL7-37562
825;RHEL7-37732;[Hyper-V][VMBUS]Check vmbus version and logs;Check VMbus version on different Hyper-V host. For Hyper-V 2012R2, vmbus is 3. For Hyper-V 2016, vmbus is 4;Yaju Cao (yacao);Medium;Positive;Automated;;1;" 1. Boot guest and check dmesg
 #dmesg|grep -i vmbus
 
 
​​";"For Hyper-V 2012 host, the vmbus version is 
 2.4
 For Hyper-V 2012 R2 host, the vmbus version is 3.0:
 [    2.333471] hv_vmbus: Hyper-V Host Build:9600-6.3-18-0.18064; Vmbus version:3.0
 
 For Hyper-V 2016 host, the vmbus version is 4.0:
 hv_vmbus: Hyper-V Host Build:10514-10.0-0-0.0; Vmbus version:4.0 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-37732
825;;;;;;;;;2;"2. Check vmbus related log
 #dmesg|grep -i vmbus";There is no error or fail messages;;RedHatEnterpriseLinux7/RHEL7-37732
826;RHEL7-37932;Start libvirtd with various udev log levels;"Verify that libvirtd can start successfully when various udev_log level is set
Bug 971904 - libvirtd crashes on startup with udev_log=""debug"" in /etc/udev/udev.conf";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set udev_log level:

 # vim /etc/udev/udev.conf:
 udev_log=""debug""";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-37932
826;;;;;;;;;2;"Restart the libvirtd service
 #systemctl restart libvirtd";libvirtd can be started successfully.;;RedHatEnterpriseLinux7/RHEL7-37932
826;;;;;;;;;3;"Check libvirtd status:
 # systemctl status libvirtd";libvirtd is running;;RedHatEnterpriseLinux7/RHEL7-37932
826;;;;;;;;;4;"Retest  with the following configuration:
 udev_log=""error""
 udev_log=""info""
 udev_log=""warning""
 udev_log=""$invalid""
​​";​​;;RedHatEnterpriseLinux7/RHEL7-37932
827;RHEL7-37948;[libvirtd]Check the timeout for libvirt monitor socket  file - bug 892273;llibvirt monitor socket didn't show up sometimes;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1. Write a wrapper for qemu to waits several seconds (>3):
# cat /tmp/qemu-wrapper.py 
#!/usr/bin/env python

import os
import sys
import time

TIMEOUT = 5
QEMU_PATH = ""/usr/libexec/qemu-kvm""

time.sleep(TIMEOUT)

sys.argv[0] = QEMU_PATH
os.execv(QEMU_PATH, sys.argv)



"; ;Test Case;RedHatEnterpriseLinux7/RHEL7-37948
827;;;;;;;;;2;"#ll -Z /tmp/qemu-wrapper.py 
 -rwxr-xr-x. qemu qemu system_u:object_r:qemu_exec_t:s0 /tmp/qemu-wrapper.py";​​;;RedHatEnterpriseLinux7/RHEL7-37948
827;;;;;;;;;3;"2. Use this wrapper as an emulator for a guest
 # virsh dumpxml test|grep emulator
 <emulator>/tmp/qemu-wrapper.py</emulator>
";​​;;RedHatEnterpriseLinux7/RHEL7-37948
827;;;;;;;;;4;"3. Start the guest
 # virsh start test
 Domain test started";"3. guest can start successfully.
# virsh start test
 Domain test started
​​";;RedHatEnterpriseLinux7/RHEL7-37948
828;RHEL7-38151;[Migration]Migrate vm with maxMemory setting - bug 1280419;"Migration with <maxMemory> set should not report error.
 Bug 1280419 - error ""unsupported migration cookie feature memory-hotplug"" is reported despite migration working";Yan Fu (yafu);Medium;Positive;Not Automated;;1;"1.Prepare two hosts for migration;";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-38151
828;;;;;;;;;2;"2.Configure the libvirtd.conf as below on both two hosts and restart libvirtd service:
 
*   #cat /etc/libvirt/libvirtd.conf  log_outputs=""1:file:/var/log/libvirt/libvirtd.log""

 
*   #service libvirtd restart
";​​;;RedHatEnterpriseLinux7/RHEL7-38151
828;;;;;;;;;3;"3.Prepare a guest with <maxMemory> set:
 
*  #virsh dumpxml rhel7
  <maxMemory slots='16' unit='KiB'>152429568</maxMemory>
   ...
   <cpu>
     <numa>
       <cell id='0' cpus='0-3' memory='512000' unit='KiB'/>
       <cell id='1' cpus='4-7' memory='512000' unit='KiB'/>
     </numa>
   </cpu>
   ...";​​;;RedHatEnterpriseLinux7/RHEL7-38151
828;;;;;;;;;4;"4.Do migration:
 
* # virsh migrate rhel7 qemu+ssh://10.66.4.158/system --live
";​​;;RedHatEnterpriseLinux7/RHEL7-38151
828;;;;;;;;;5;"5.Check the libvirtd.log on destination host
 
* #cat /var/log/libvirt/libvirtd.log
";"5. Check the libvirtd.log on destination host, could not see error ""Unsupported migration cookie feature memory-hotplug""
​​";;RedHatEnterpriseLinux7/RHEL7-38151
829;RHEL7-38163;[graphics] Track spice/vnc graphics events with remote-viewer connect;"Track graphics events for spice open/close, vnc open/close.
Bug1236585";Fangge Jin (fjin);High;Positive;Not Automated;;1;" 1.Prepare a running guest with spice and vnc graphic:
 # virsh dumpxml r71 
     <graphics type='vnc' port='5902' autoport='yes' listen='0.0.0.0'>
       <listen type='address' address='0.0.0.0'/>
     </graphics>
     <graphics type='spice' port='5903' autoport='yes' listen='0.0.0.0'>
       <listen type='address' address='0.0.0.0'/>
     </graphics>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-38163
829;;;;;;;;;2;"2.[terminal 2]# virsh event --loop --event graphics
 [terminal 3]# python event-test.py qemu:///system";​​;;RedHatEnterpriseLinux7/RHEL7-38163
829;;;;;;;;;3;"3. Connect to r71 with spice and then close:
 # remote-viewer spice://10.66.6.6:5903
 
​​";"3.Check the output of ""virsh event"" in terminal 2 and terminal 3:
 event 'graphics' for domain r71: connect local[IPv4 10.66.6.6 5903] remote[IPv4 10.66.6.6 48910] 
 event 'graphics' for domain r71: initialize local[IPv4 10.66.6.6 5903] remote[IPv4 10.66.6.6 48910] none
 ................
 event 'graphics' for domain r71: disconnect local[IPv4 10.66.6.6 5903] remote[IPv4 10.66.6.6 48910] 
 ...............
 
 Using uri:qemu:///system
 myDomainEventGraphicsCallback: Domain example(16) 0
 myDomainEventGraphicsCallback: Domain example(16) 1 none
 myDomainEventGraphicsCallback: Domain example(16) 2
 
​​";;RedHatEnterpriseLinux7/RHEL7-38163
829;;;;;;;;;4;"4.Connect to r71 with vnc and then close:
 #remote-viewer vnc://10.66.6.6:5902";"4.Check the output of ""virsh event"" in terminal 2 and terminal 3:
 event 'graphics' for domain r71: connect local[IPv4 0.0.0.0 5902] remote[IPv4 10.66.6.6 39167] none
 event 'graphics' for domain r71: initialize local[IPv4 0.0.0.0 5902] remote[IPv4 10.66.6.6 39167] none
 event 'graphics' for domain r71: disconnect local[IPv4 0.0.0.0 5902] remote[IPv4 10.66.6.6 39167] none
 
 myDomainEventGraphicsCallback: Domain example(16) 0
 myDomainEventGraphicsCallback: Domain example(16) 1 none
 myDomainEventGraphicsCallback: Domain example(16) 2";;RedHatEnterpriseLinux7/RHEL7-38163
830;RHEL7-38164;[Hyper-V][Memory]Run time increase Startup RAM - 2016 host only;Disable Dynamic Memory, Increase Startup RAM of running guest with Dynamic Memory disabled -2016 host only;Yaju Cao (yacao);High;Positive;Not Automated;;1;"Set guest with Dynamic Memory disabled and boot up ( 2016 host).
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-38164
830;;;;;;;;;2;Increase the Startup RAM of the guest. For example, Startup RAM is 2048 MB, change it to 4096 MB, and apply the change;No error occur in Hyper-V Manager;;RedHatEnterpriseLinux7/RHEL7-38164
830;;;;;;;;;3;"Check the memory  in the guest.
 For RHEL 6 guest, you need to add a udev rule. 
 $ vi /etc/udev/rules.d/balloon.rules
 SUBSYSTEM==""memory"", ACTION==""add"", ATTR{state}=""online""";The memory in the guest is increased to the changed Startup RAM. And the guest could work well, no error log in dmesg.;;RedHatEnterpriseLinux7/RHEL7-38164
831;RHEL7-38165;[Hyper-V][Memory]Run time decrease Startup RAM - 2016 host only;Decrease Startup RAM of running guest with Dynamic Memory disabled. -2016 host only;Yaju Cao (yacao);High;Positive;Not Automated;;1;"Set guest with Dynamic Memory disabled and boot up ( 2016 host).
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-38165
831;;;;;;;;;2;Decrease the Startup RAM of the guest. For example, Startup RAM is 4096 MB, change it to 2048 MB, and apply the change;No error occur in Hyper-V Manager;;RedHatEnterpriseLinux7/RHEL7-38165
831;;;;;;;;;3;"Check the memory in the guest
 $free -m";Decreased memory is reflected in the 'used' memory. For example, memory is decreased 2048 MB in Hyper-V Manager, then 2048 MB more memory is used in the guest.;;RedHatEnterpriseLinux7/RHEL7-38165
832;RHEL7-38166;[Hyper-V][Memory]Change Startup RAM of running guest when there is memory stress - 2016 host only;Change Startup RAM of running guest when there is memory stress - 2016 host only;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;"Set guest with Dynamic Memory disabled and boot up (2016 host)
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-38166
832;;;;;;;;;2;"Run memory stress process in the guest.
 For example, Startup RAM is 4096 MB and 8 Vcpus, you may run:
 $stress --vm 40 --vm-bytes 128M --timeout 300s";The free memory in the guest is very low;;RedHatEnterpriseLinux7/RHEL7-38166
832;;;;;;;;;3;"Change the Startup RAM of the guest while stress is running. You may try to decrease/increase it.
 For RHEL 6 guest, you need to add a udev rule. 
 $ vi /etc/udev/rules.d/balloon.rules
 SUBSYSTEM==""memory"", ACTION==""add"", ATTR{state}=""online""";No system crash in the guest. If increase the Startup RAM, the guest should be able to use it.;;RedHatEnterpriseLinux7/RHEL7-38166
833;RHEL7-38167;[Hyper-V][Balloon]Change Startup RAM of running guest several times - 2016 host only;Change Startup RAM of running guest several times - 2016 host only;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;"Set guest with Dynamic Memory disabled and boot up (2016 host).
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-38167
833;;;;;;;;;2;"Increase the Startup RAM several times.
 For RHEL 6 guest, you need to add a udev rule. 
 $ vi /etc/udev/rules.d/balloon.rules
 SUBSYSTEM==""memory"", ACTION==""add"", ATTR{state}=""online""";The memory in the guest is increased to the changed Startup RAM. And the guest could work well, no error log in dmesg.;;RedHatEnterpriseLinux7/RHEL7-38167
833;;;;;;;;;3;Decrease the Startup RAM several times;Decreased memory is reflected in the 'used' memory. For example, memory is decreased 2048 MB in Hyper-V Manager, then 2048 MB more memory is used in the guest.;;RedHatEnterpriseLinux7/RHEL7-38167
834;RHEL7-38188;KN-TC Team Driver Test Case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/Regression/bz1206483-team-device-is-removed-when-released-from-bridge;"KN-TC Team Driver Test Case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/Regression/bz1206483-team-device-is-removed-when-released-from-bridge 
";Amit Supugade (asupugad);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-38188
835;RHEL7-38189; KN-TC Team Driver Test Case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/Regression/bz1253769-inconsistent-actor_lacpdu_info-system-address-assignment ;KN-TC Team Driver Test Case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/Regression/bz1253769-inconsistent-actor_lacpdu_info-system-address-assignment ;Amit Supugade (asupugad);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-38189
836;RHEL7-38190;KN-TC Team Driver Test Case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/team_offload_sanity;"KN-TC Team Driver Test Case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/team_offload_sanity.list 
";Amit Supugade (asupugad);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-38190
837;RHEL7-38191;KN-TC Team Driver Test Case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/team_offload_perf;"KN-TC Team Driver Test Case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/team_offload_perf.list 
";Amit Supugade (asupugad);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-38191
838;RHEL7-38222;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/Regression/bz1258446-bridge-over-bond-doesnot-work-for-guest;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/Regression/bz1258446-bridge-over-bond-doesnot-work-for-guest;Amit Supugade (asupugad);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-38222
839;RHEL7-38223;KN-TC Bonding Driver test case:  http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/Regression/bz892128-slave-change-speed;KN-TC Bonding Driver test case:  http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/Regression/bz892128-slave-change-speed;Amit Supugade (asupugad);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-38223
840;RHEL7-38224;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/netperf;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/netperf ;Amit Supugade (asupugad);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-38224
841;RHEL7-38225;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/bond_offload_sanity;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/bond_offload_sanity.list ;Amit Supugade (asupugad);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-38225
842;RHEL7-38226;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/bond_offload_perf;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/bond_offload_perf.list ;Amit Supugade (asupugad);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-38226
843;RHEL7-38228;[guest agent] Execute a guest agent command after logging into the graphical desktop of the guest;"Test the command execution via guest agent after logged into the graphical desktop of the guest
 Bug 1236924 - ""Guest agent disappeared while executing command"" after logged into the graphical desktop of the guest.";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Start the guest. 
 # virsh start rhel7.0";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-38228
843;;;;;;;;;2;"Run a random virsh command that relies on guest agent, e.g.
 # virsh domtime rhel7.0
​​";"The virsh command executes successfully.
 
 Output:
 Time: 2016-03-08 11:02:56
​​";;RedHatEnterpriseLinux7/RHEL7-38228
843;;;;;;;;;3;Log into the graphical desktop of guest by virt-viewer or virt-manager or other clinet.;​​;;RedHatEnterpriseLinux7/RHEL7-38228
843;;;;;;;;;4;"Run some random virsh commands that rely on guest agent, e.g.
 # virsh domtime rhel7.0
 
 # virsh shutdown rhel7.0 --mode agent 
 
​​";"The virsh command executes successfully.
 
 Output:
 Time: 2016-03-08 11:02:56
 
 Domain rhel7.0 is being shutdown
​​";;RedHatEnterpriseLinux7/RHEL7-38228
844;RHEL7-38380;[libvirtd][config]Set max_anonymous_clients/max_clients to valid value;max_anonymous_clients/max_clients works correctly;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1. concurrent starting 20 guests
 #for i in {1..20}; do virsh start 'testvm'$i & done 
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-38380
844;;;;;;;;;2;"2.Check the log:
 #grep virNetServerCheckLimits /var/log/libvirt/libvirtd.log
​​";"2.Check the value of nclients is <=10 and nclients_unauth is <=2:
 
 Output:
 2016-08-31 06:33:37.783+0000: 15188: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=1 nclients_max=10 nclients_unauth=1 nclients_unauth_max=2
 2016-08-31 06:33:37.783+0000: 15188: info : virNetServerCheckLimits:272 : Re-enabling services
 2016-08-31 06:33:37.795+0000: 15188: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=2 nclients_max=10 nclients_unauth=2 nclients_unauth_max=2
 2016-08-31 06:33:37.795+0000: 15188: info : virNetServerCheckLimits:266 : Temporarily suspending services
 2016-08-31 06:33:37.799+0000: 15189: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=2 nclients_max=10 nclients_unauth=1 nclients_unauth_max=2
 ........
 2016-08-31 06:33:37.848+0000: 15188: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=10 nclients_max=10 nclients_unauth=2 nclients_unauth_max=2
 2016-08-31 06:33:37.848+0000: 15188: info : virNetServerCheckLimits:266 : Temporarily suspending services
 2016-08-31 06:33:37.850+0000: 15192: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=10 nclients_max=10 nclients_unauth=1 nclients_unauth_max=2
 ...";;RedHatEnterpriseLinux7/RHEL7-38380
845;RHEL7-38382;[domjobinfo] [--completed]- Get information about a completed job;1.get domjobinfo after a job is completed;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"# virsh save rhel7.2 /tmp/rhel7.2.save
 
 Domain rhel7.2 saved to /tmp/rhel7.2.save
 
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-38382
845;;;;;;;;;2;"After save completed:
 # virsh domjobinfo rhel7.2 --completed
 Job type:         Completed   
 Time elapsed:     1217         ms
 Data processed:   710.612 MiB
 Data remaining:   0.000 B
 Data total:       1.102 GiB
 Memory processed: 710.612 MiB
 Memory remaining: 0.000 B
 Memory total:     1.102 GiB
 Memory bandwidth: 598.294 MiB/s
 Constant pages:   107621      
 Normal pages:     181326      
 Normal data:      708.305 MiB
 Total downtime:   1208         ms
 Setup time:       4            ms
 
 
 
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-38382
846;RHEL7-38425;bkr workflow-xslt --job-xml=qperf-job.xml -d RHEL-7.2 -f RedHatEnterpriseLinux7...;bkr workflow-xslt --job-xml=qperf-job.xml -d RHEL-7.2 -f RedHatEnterpriseLinux7 -m rdma-qe-02.rhts.eng.bos.redhat.com -n rdma-qe-03.rhts.eng.bos.redhat.com;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-38425
847;RHEL7-38426;KS-TC-IB: Run IO over iser device(s) * Description: The iSCSI Extensions for RDM...;"KS-TC-IB: Run IO over iser device(s)
 
* Description: The iSCSI Extensions for RDMA (iSER) is a computer network protocol that extends the Internet Small Computer System Interface (iSCSI) protocol to use Remote Direct Memory Access (RDMA). Typically RDMA is provided by either the Transmission Control Protocol (TCP) with RDMA services (iWARP) or InfiniBand. It permits data to be transferred directly into and out of SCSI omputer memory buffers (which connects computers to storage devices) without intermediate data copies
* Hardware:
  * x86_64 server
  * cxgb3/cxgb4/mlx4/mlx5/qib/ocrdma/hfl1 HCA
  * Machine with multi SCSI disks
* Software:
  * Red Hat Enterprise Linux 7
  * RDMA stack
  * iscsi-initiator-utils
  * scsi-target-utils
  * lsscsi
  * targetcli
* Functionality tested
  * Packages install/remove without error
  * iser login/logout
  * IO over iser device(s)
* Functionality not tested
  * High Available operation
* Test strategy:
  * Target side configuration
  * Initiator side configuration
* Known issues:
  * cxgb3|4 (https://bugzilla.redhat.com/show_bug.cgi?id=1013455)
* Risks
";Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-38426
848;RHEL7-38518;[sVirt] [selinux] [dynamic] [nvram] Label OVMF_VARS file with dynamic seclabel;label OVMF_VARS file with dynamic svirt seclabel;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Install a guest named rhel7.2 that uses UEFI bios by virt-manager, and shutdown guest
 
 # ls /var/lib/libvirt/qemu/nvram/
 rhel7.2_VARS.fd
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-38518
848;;;;;;;;;2;"# virsh edit rhel7.2
 
   <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.2.0'>hvm</type>
     <loader readonly='yes' type='pflash'>/usr/share/OVMF/OVMF_CODE.secboot.fd</loader>
     <nvram>/var/lib/libvirt/qemu/nvram/rhel7.2_VARS.fd</nvram>
     <boot dev='hd'/>
   </os>
 
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-38518
848;;;;;;;;;3;"4. # ll -Z /var/lib/libvirt/qemu/nvram/rhel7.2_VARS.fd
 -rw-------. root root system_u:object_r:qemu_var_run_t:s0 /var/lib/libvirt/qemu/nvram/rhel7.2_VARS.fd
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-38518
848;;;;;;;;;4;"5. Start guest
 # virsh start rhel7.2
​​";"Guest starts successfully. There is no such error :
 # virsh start rhel7.2
 error: Failed to start domain rhel7.2
 error: internal error: process exited while connecting to monitor: 2015-11-27T09:45:29.118258Z qemu-kvm: -drive file=/var/lib/libvirt/qemu/nvram/guest_VARS.fd,if=pflash,format=raw,unit=1: Could not open '/var/lib/libvirt/qemu/nvram/rhel7.2_VARS.fd': Permission denied
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-38518
848;;;;;;;;;5;"6. # virsh dumpxml rhel7.2
   <seclabel type='dynamic' model='selinux' relabel='yes'>
     <label>system_u:system_r:svirt_t:s0:c335,c850</label>
     <imagelabel>system_u:object_r:svirt_image_t:s0:c335,c850</imagelabel>
   </seclabel>
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-38518
848;;;;;;;;;6;"7.# ll -Z /var/lib/libvirt/qemu/nvram/rhel7.2_VARS.fd
 -rw-------. qemu qemu system_u:object_r:svirt_image_t:s0:c335,c850 /var/lib/libvirt/qemu/nvram/rhel7.2_VARS.fd";"The label is same as dumpxml of guest
​​";;RedHatEnterpriseLinux7/RHEL7-38518
848;;;;;;;;;7;"8.Shutdown guest
 # virsh destroy rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-38518
848;;;;;;;;;8;"# ll -Z /var/lib/libvirt/qemu/nvram/rhel7.2_VARS.fd
 -rw-------. root root system_u:object_r:qemu_var_run_t:s0 /var/lib/libvirt/qemu/nvram/rhel7.2_VARS.fd";"The label is restored , same as in step4
​​";;RedHatEnterpriseLinux7/RHEL7-38518
849;RHEL7-38519;[sVirt] [selinux] [dynamic] [kernel/initrd/dtb] svirt test with readonly shareable resource - 921135;"The readonly/shareable resource will not restored after the guest destroyed 
Bug 921135 - qemu: could not load kernel ... Permission denied
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1. Boot a guest from kernel:
 1) Method 1:
 Define a guest with the following xml:
 # virsh dumpxml guest
   <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.2.0'>hvm</type>
     <kernel>/tmp/kernel/vmlinuz</kernel>
     <initrd>/tmp/kernel/initrd.img</initrd>
     <cmdline>method=http://download.eng.pek2.redhat.com//pub/rhel/rel-eng/RHEL-7.2-20151030.0/compose/Server/x86_64/os/</cmdline>
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-38519
849;;;;;;;;;2;"2) Method 2: Install vm by virt-manager:
 1). Click on the local connection.
 2). Click NEW button at the top of Virtual Machine Manager dialog.
 3). Select ""Network Boot (pxe)"", forward
 4). Select OS type: ""Linux"", forward
 5). Check on ""Customize configuration before install"",click ""Finish"" button.
 6). Guest virtual details page will display, Click Boot options -> Direct kernel boot, input
 ""/tmp/kernel/vmlinuz"" for kernel path, input ""/tmp/kernel/iinitrd.img"" for initrd path.
 ""method=http://download.eng.pek2.redhat.com//pub/rhel/rel-eng/RHEL-7.2-20151030.0/compose/Server/x86_64/os/"" for ""kernel Args"". Then Apply.
 7). Click ""Begin Installation"", Follow the instruction to install system.";​​;;RedHatEnterpriseLinux7/RHEL7-38519
849;;;;;;;;;3;"2. During the installing
 1) check the owner and selinux context of the following files:
 # ll -Z
 -rw-r--r--. qemu qemu system_u:object_r:virt_content_t:s0 initrd.img
 -rw-r--r--. qemu qemu system_u:object_r:virt_content_t:s0 vmlinuz
 
 2) Check the dumpxml
 # virsh dumpxml guest
   <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.2.0'>hvm</type>
     <kernel>/tmp/kernel/vmlinuz</kernel>
     <initrd>/tmp/kernel/initrd.img</initrd>
 ....
   <seclabel type='dynamic' model='selinux' relabel='yes'>
     <label>system_u:system_r:svirt_t:s0:c35,c409</label>
     <imagelabel>system_u:object_r:svirt_image_t:s0:c35,c409</imagelabel>
   </seclabel>
 
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-38519
849;;;;;;;;;4;"3. After installation finished, destroy the guest
 # virsh destroy guest
 
 Check the label of the following files, they should not restored.
 # ll -Z
 -rw-r--r--. qemu qemu system_u:object_r:virt_content_t:s0 initrd.img
 -rw-r--r--. qemu qemu system_u:object_r:virt_content_t:s0 vmlinuz";​​;;RedHatEnterpriseLinux7/RHEL7-38519
850;RHEL7-38530;KS-TC-IB: Detect reachable targets and establish an SRP connection automatically;KS-TC-IB: Detect reachable targets and establish an SRP connection automatically;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-38530
851;RHEL7-38585;[blockpull] [values] [negative] Test invalid arguments;"Refer to:
 Bug 927156 - bandwidth limit for block copy/pull will fail if the value reach to 17592186044415 - FIXED
 Bug 927495 - Improve the error handle about option --timeout of command blockpull , blockcopy - FIXED

";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Invalid timeout 
 # virsh blockpull test1 /var/lib/libvirt/images/domain.img --verbose --wait --timeout adsfadsf
 error: invalid timeout
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-38585
851;;;;;;;;;2;"Invalid bandwidth - big value
 #virsh blockpull test1 /var/lib/libvirt/images/domain.img --verbose --wait --bandwidth 1111111111111111
 error: numerical overflow: bandwidth must be less than 8796093022207
 
 #virsh blockpull test1 /var/lib/libvirt/images/domain.img --verbose --wait --bandwidth 8796093022207
 Block Pull: [100 %]
 Pull complete";​​;;RedHatEnterpriseLinux7/RHEL7-38585
851;;;;;;;;;3;"Invalid bandwidth - string value
  # virsh blockpull rhel6 vda --base /var/lib/libvirt/images/kvm-
 rhel7.0-x86_64-qcow2v3.s1 --bandwidth //
 error: bandwidth must be a number
​​";​​;;RedHatEnterpriseLinux7/RHEL7-38585
852;RHEL7-38665;[memtune] Set memory parameters BZ 950478 1211550;;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"prepare guest memtune:
 # virsh memtune rhel6
 hard_limit : 1000020
 soft_limit : 1000020
 swap_hard_limit: 1000020
 
 change hard_limit in memtune more than current swap_hard_limit:
 # virsh memtune rhel6 --hard-limit 1000030 --soft-limit 1000020 --swap-hard-limit 1000040 --live";"not error like:
 # virsh memtune rhel6 --hard-limit 1000030 --soft-limit 1000020 --swap-hard-
 limit 1000040 --live
 error: Unable to change memory parameters error: unable to set memory hard_limit tunable: Invalid argument";Test Case;RedHatEnterpriseLinux7/RHEL7-38665
852;;;;;;;;;2;"bug 1211550
 set guest memory parameters with a big number:

# virsh memtune r7 --hard-limit 20417224 --soft-limit 9007199254740992  --swap-hard-limit 35417224
error: Unable to parse integer parameter soft-limit";​​;;RedHatEnterpriseLinux7/RHEL7-38665
852;;;;;;;;;3;"**For bug 950478:**
 # virsh start r63
 Domain r63 started
 
 # virsh memtune --domain r63
 hard_limit : 1824256
 soft_limit : unlimited
 swap_hard_limit: unlimited
 
 1. decrease hard limit and change swap hard limit:
 # virsh memtune r63 --hard-limit 1024000 --soft-limit 1024000 --swap-hard-limit 1024000
 # virsh memtune --domain r63
 hard_limit : 1024000
 soft_limit : 1024000
 swap_hard_limit: 1024000
 
 2.change swap hard limit and increase hard limit:
 # virsh memtune r63 --hard-limit 1024004 --soft-limit 1024000 --swap-hard-limit 1024008
 # virsh memtune --domain r63
 hard_limit : 1024004
 soft_limit : 1024000
 swap_hard_limit: 1024008
 
 # virsh memtune r63 --hard-limit 1024000 --swap-hard-limit 1024004
 
 # virsh memtune --domain r63
 hard_limit : 1024000
 soft_limit : 1024000
 swap_hard_limit: 1024004
 
 3.when hard_limit is less than swap_hard_limit:
 # virsh memtune r63 --hard-limit 1024008 --swap-hard-limit 1024004
 error: Unable to change memory parameters
 error: invalid argument: memory hard_limit tunable value must be lower than swap_hard_limit";​​;;RedHatEnterpriseLinux7/RHEL7-38665
853;RHEL7-38666;[numatune] [negative] Nodeset is an invalid value;Bug 997906 - CVE-2013-5651 Running numatune with invalid nodeset parameter crash libvirtd. [rhel-7.0];Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" change nodeset to a very large number.
 # ps aux | grep libvirtd
 
 # virsh numatune foo --nodeset 1000000000
 error: Unable to change numa parameters
 error: internal error: Failed to parse nodeset
 
 # ps aux | grep libvirtd";" libvirtd should not crash, which means the pid of libvirtd doesn't change
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-38666
853;;;;;;;;;2;"# virsh numatune kvm-rhel6.4-x86_64-qcow2-virtio --nodeset sa
 error: Unable to change numa parameters
 error: internal error: Failed to parse nodeset
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-38666
853;;;;;;;;;3;"# virsh numatune kvm-rhel6.4-x86_64-qcow2-virtio --nodeset -1
 error: Unable to change numa parameters
 error: internal error: Failed to parse nodeset";"
​​";;RedHatEnterpriseLinux7/RHEL7-38666
853;;;;;;;;;4;"11 > the numa node number on the host
 
 # virsh numatune kvm-rhel6.4-x86_64-qcow2-virtio --nodeset 11
 error: Unable to change numa parameters
 error: Unable to write to '/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2dkvm\x2drhel6.4\x2dx86_64\x2dqcow2\x2dvirtio.scope/cpuset.mems': Invalid argument";"
​​";;RedHatEnterpriseLinux7/RHEL7-38666
854;RHEL7-38693;[disk-change]Check the disk-change events; Start a guest with an nonexistent disk with optional startupPolicy and check 'disk-change' event.;Yan Fu (yafu);Medium;Positive;Not Automated;;1;" 1.Edit the guest  xml with optional startupPolicy:
    ...
 <disk type='file' device='disk'>
       <driver name='qemu' type='qcow2' cache='none'/>
       <source file='/var/lib/libvirt/images/rhel7.2.qcow2-non' startupPolicy='optional'/>
       <target dev='vdd' bus='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </disk>
 .....
 
 Note: the source file MUST NOT exist. 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-38693
854;;;;;;;;;2;"2.Open the second terminal, run the 'event-test.py' python script to catch the event

 # python /usr/share/doc/libvirt-python-1.2.15/examples/event-test.py qemu:///system
";"Output;
 Using uri:qemu:///system";;RedHatEnterpriseLinux7/RHEL7-38693
854;;;;;;;;;3;"3.Open third terminal, run the virsh event command to catch the events
 #virsh event --all --loop";​​;;RedHatEnterpriseLinux7/RHEL7-38693
854;;;;;;;;;4;"4.Start the guest :
 #virsh start rhel7
​​";​​;;RedHatEnterpriseLinux7/RHEL7-38693
854;;;;;;;;;5;"4.Check the events in the second terminal and the third terminal
 
​​";"Output in second terminal:
 
 myDomainEventDiskChangeCallback: Domain rhel7.2(4) disk change oldSrcPath: /var/lib/libvirt/images/rhel7.2.qcow2-non newSrcPath: None devAlias: virtio-disk0 reason: 1
 
 Output in third terminal:
 event 'disk-change' for domain rhel7.2 disk virtio-disk0: /var/lib/libvirt/images/rhel7.2.qcow2-non -> <null>: dropped";;RedHatEnterpriseLinux7/RHEL7-38693
855;RHEL7-38898;[net-update] Check libvirtd status while delete srv via virsh net-update - BZ 988718;Libvirtd don't crash when delete srv only passing one mandatory attributes via virsh net-update;Fangge Jin (fjin);High;Negative;Automated;;1;" Use net-update to delete dns-srv.
 1. # virsh net-update network delete dns-srv ""<srv service='name'/>""
 Updated network network live state
​​";" Update successfully.
 
 Libvirtd don't crash, no such error:error: Failed to update network network
error: End of file while reading data: Input/output error
error: One or more references were leaked after disconnect from the 
hypervisor
error: Failed to reconnect to the hypervisor

​​";Test Case;RedHatEnterpriseLinux7/RHEL7-38898
855;;;;;;;;;2;"# virsh net-dumpxml network <network> 
​​";"<name>network</name>
 <uuid>2531df5b-adf0-471f-95f7-68d627053342</uuid> 
 <bridge name='virbr2' stp='on' delay='0' /> 
 <mac address='52:54:00:90:a1:29'/> <domain name='example.com'/>
 <dns>
 <txt name='example' value='example value' />
 <host ip='192.168.10.2'> <hostname>myhost</hostname> <hostname>myhostalias</hostname> </host>
 </dns> 
 <ip address='192.168.10.1' netmask='255.255.255.0'> 
 <dhcp> 
 <range start='192.168.10.2' end='192.168.10.254' /> 
 </dhcp> 
 </ip> 
 </network>
 
 No srv attribute in net-dumpxml
​​";;RedHatEnterpriseLinux7/RHEL7-38898
856;RHEL7-38899;[net-update] Check libvirtd status while modify portgroup via net-update (illegal command)- BZ 879473;libvirtd don't crash even use wrong command;Fangge Jin (fjin);High;Negative;Automated;;1;"1. # pidof libvirtd
 8134
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-38899
856;;;;;;;;;2;"2. # virsh net-update testnet modify portgroup ""<portgroup default='no'/>""
​​";"error: Failed to update network testnet
 error: XML error: Missing required name attribute in portgroup";;RedHatEnterpriseLinux7/RHEL7-38899
856;;;;;;;;;3;"3. libvirtd should work well
 #service libvirtd status
 libvirtd (pid 8134) is running...
​​";"The pid of libvirtd doesn't change.
​​";;RedHatEnterpriseLinux7/RHEL7-38899
857;RHEL7-38926;[save] Cancel saving by Ctrl+C;Cancel saving by Ctrl+C;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" 1. Try to save a running domain and cancel it by ""ctrl+c""
 # virsh save rhel62 /tmp/rhel62.save
 ^C";"1.Output:
 ^Cerror: Failed to save domain rhel62 to /tmp/rhel62.save
 error: operation aborted: domain save job: canceled by client
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-38926
857;;;;;;;;;2;"2. # ll /tmp/rhel62.save

";"2.Output:
 ls: cannot access /tmp/rhel62.save: No such file or directory
​​";;RedHatEnterpriseLinux7/RHEL7-38926
858;RHEL7-38927;[save] Destroy and undefine a guest after save and restore;Destroy and undefine a guest after save and restore;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1.
 #virsh save guest /tmp/guest.save
 Domain guest saved to guest.save
 
 #virsh restore /tmp/guest.save
 Domain restored from guest.save
 
 
​​";"
 
 
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-38927
858;;;;;;;;;2;"2.# virsh destroy guest
​​";"2. The guest can be destroyed.
​​";;RedHatEnterpriseLinux7/RHEL7-38927
858;;;;;;;;;3;3.# virsh undefine guest;3. The guest can be undefined.;;RedHatEnterpriseLinux7/RHEL7-38927
859;RHEL7-38974;Check memory leaks on race with auto-destroy guests;"Bug 950286 - libvirtd crash on race with auto-destroy guests
 Bug 951073 - libvirtd crash on race with auto-destroy guests";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;Scenario 1: create --autodestroy;"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-38974
859;;;;;;;;;2;"1 In one root window:
 # service libvirtd stop
 # setenforce 0 # necessary since SELinux doesn't transition valgrind to run qemu
 # valgrind libvirtd
 
 2 In another root window:
 # virsh
 Welcome to virsh, the virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virsh # create --autodestroy fedora-local.xml
 Domain fedora-local created from fedora-local.xml
 
 virsh # list
  Id    Name                           State
 ----------------------------------------------------
  2     fedora-local                   running
 
 virsh # quit
 
 3. prepare the basic migration environment,create a guest on the source 
  and start the libvirtd service in foreground on the target 
​​";"step2
 Look at the first window, which shouldn't show the following mem leak while we quit the virsh connection
 
 ==25304== Invalid read of size 1
 ==25304==    at 0x4A07F52: strlen (mc_replace_strmem.c:403)
 ==25304==    by 0x4E97EE5: virHashStrCode (virhash.c:78)
 ==25304==    by 0x4E98010: virHashComputeKey (virhash.c:100)
 ==25304==    by 0x4E989F5: virHashRemoveEntry (virhash.c:461)
 ==25304==    by 0x12A77A5A: qemuDriverCloseCallbackRun (qemu_conf.c:734)
 ==25304==    by 0x4E98C6A: virHashForEach (virhash.c:514)
 
 ==25304==    by 0x12A77B02: qemuDriverCloseCallbackRunAll (qemu_conf.c:746)
 ==25304==    by 0x12AAC17A: qemudClose (qemu_driver.c:1053)
 ==25304==    by 0x4F1E202: virConnectDispose (datatypes.c:144)
 ==25304==    by 0x4E913DF: virObjectUnref (virobject.c:139)
 ==25304==    by 0x4F285DF: virConnectClose (libvirt.c:1458)
 ==25304==    by 0x432159: remoteClientFreeFunc (remote.c:653)
 ==25304==  Address 0x1554e280 is 0 bytes inside a block of size 37 free'd
 ==25304==    at 0x4A063F0: free (vg_replace_malloc.c:446)
 ==25304==    by 0x4E78C12: virFree (memory.c:309)
 ==25304==    by 0x4E97FC1: virHashStrFree (virhash.c:93)
 ==25304==    by 0x4E98AE9: virHashRemoveEntry (virhash.c:470)
 ==25304==    by 0x12A77742: qemuDriverCloseCallbackUnset (qemu_conf.c:674)
 ==25304==    by 0x12A84163: qemuProcessAutoDestroyRemove (qemu_process.c:4460)
 ==25304==    by 0x12A82A90: qemuProcessStop (qemu_process.c:4068)
 ==25304==    by 0x12A83F92: qemuProcessAutoDestroy (qemu_process.c:4429)
 ==25304==    by 0x12A77A26: qemuDriverCloseCallbackRun (qemu_conf.c:730)
 ==25304==    by 0x4E98C6A: virHashForEach (virhash.c:514)
 ==25304==    by 0x12A77B02: qemuDriverCloseCallbackRunAll (qemu_conf.c:746)
 ==25304==    by 0x12AAC17A: qemudClose (qemu_driver.c:1053)
 ==25304== 
 ==25304== Invalid read of size 1
 
 ==25304==    at 0x4A07F64: strlen (mc_replace_strmem.c:403)
 ==25304==    by 0x4E97EE5: virHashStrCode (virhash.c:78)
 ==25304==    by 0x4E98010: virHashComputeKey (virhash.c:100)
 ==25304==    by 0x4E989F5: virHashRemoveEntry (virhash.c:461)
 ==25304==    by 0x12A77A5A: qemuDriverCloseCallbackRun (qemu_conf.c:734)
 ==25304==    by 0x4E98C6A: virHashForEach (virhash.c:514)
 ==25304==    by 0x12A77B02: qemuDriverCloseCallbackRunAll (qemu_conf.c:746)
 ==25304==    by 0x12AAC17A: qemudClose (qemu_driver.c:1053)
 ==25304==    by 0x4F1E202: virConnectDispose (datatypes.c:144)
 ==25304==    by 0x4E913DF: virObjectUnref (virobject.c:139)
 ==25304==    by 0x4F285DF: virConnectClose (libvirt.c:1458)
 ==25304==    by 0x432159: remoteClientFreeFunc (remote.c:653)
 ==25304==  Address 0x1554e281 is 1 bytes inside a block of size 37 free'd
 ==25304==    at 0x4A063F0: free (vg_replace_malloc.c:446)
 ==25304==    by 0x4E78C12: virFree (memory.c:309)
 ==25304==    by 0x4E97FC1: virHashStrFree (virhash.c:93)
 ==25304==    by 0x4E98AE9: virHashRemoveEntry (virhash.c:470)
 ==25304==    by 0x12A77742: qemuDriverCloseCallbackUnset (qemu_conf.c:674)
 ==25304==    by 0x12A84163: qemuProcessAutoDestroyRemove (qemu_process.c:4460)
 ==25304==    by 0x12A82A90: qemuProcessStop (qemu_process.c:4068)
 ==25304==    by 0x12A83F92: qemuProcessAutoDestroy (qemu_process.c:4429)
 
 ==25304==    by 0x12A77A26: qemuDriverCloseCallbackRun (qemu_conf.c:730)
 ==25304==    by 0x4E98C6A: virHashForEach (virhash.c:514)
 ==25304==    by 0x12A77B02: qemuDriverCloseCallbackRunAll (qemu_conf.c:746)
 ==25304==    by 0x12AAC17A: qemudClose (qemu_driver.c:1053)
 
 ==25304== 
 
 ==25304== Invalid read of size 2
 
 ==25304==    at 0x4A08D6C: memcpy (mc_replace_strmem.c:882)
 ==25304==    by 0x4E993D8: getblock (virhashcode.c:39)
 ==25304==    by 0x4E994BF: virHashCodeGen (virhashcode.c:80)
 ==25304==    by 0x4E97EFA: virHashStrCode (virhash.c:78)
 ==25304==    by 0x4E98010: virHashComputeKey (virhash.c:100)
 ==25304==    by 0x4E989F5: virHashRemoveEntry (virhash.c:461)
 ==25304==    by 0x12A77A5A: qemuDriverCloseCallbackRun (qemu_conf.c:734)
 ==25304==    by 0x4E98C6A: virHashForEach (virhash.c:514)
 ==25304==    by 0x12A77B02: qemuDriverCloseCallbackRunAll (qemu_conf.c:746)
 ==25304==    by 0x12AAC17A: qemudClose (qemu_driver.c:1053)
 ==25304==    by 0x4F1E202: virConnectDispose (datatypes.c:144)
 ==25304==    by 0x4E913DF: virObjectUnref (virobject.c:139)
 ==25304==  Address 0x1554e282 is 2 bytes inside a block of size 37 free'd
 ==25304==    at 0x4A063F0: free (vg_replace_malloc.c:446)
 ==25304==    by 0x4E78C12: virFree (memory.c:309)
 
 ==25304==    by 0x4E97FC1: virHashStrFree (virhash.c:93)
 ==25304==    by 0x4E98AE9: virHashRemoveEntry (virhash.c:470)
 ==25304==    by 0x12A77742: qemuDriverCloseCallbackUnset (qemu_conf.c:674)
 ==25304==    by 0x12A84163: qemuProcessAutoDestroyRemove (qemu_process.c:4460)
 ==25304==    by 0x12A82A90: qemuProcessStop (qemu_process.c:4068)
 ==25304==    by 0x12A83F92: qemuProcessAutoDestroy (qemu_process.c:4429)
 ==25304==    by 0x12A77A26: qemuDriverCloseCallbackRun (qemu_conf.c:730)
 ==25304==    by 0x4E98C6A: virHashForEach (virhash.c:514)
 ==25304==    by 0x12A77B02: qemuDriverCloseCallbackRunAll (qemu_conf.c:746)
 ==25304==    by 0x12AAC17A: qemudClose (qemu_driver.c:1053)
 ==25304==";;RedHatEnterpriseLinux7/RHEL7-38974
859;;;;;;;;;3;"Scenario 2: cancel migration
 ""the act of migration uses an auto-destroy guest on the destination until the source has gotten far enough along in the migration process""
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-38974
859;;;;;;;;;4;" on target host
 # service libvirtd stop
 # setenforce 0 # necessary since SELinux doesn't transition valgrind to run qemu
 # valgrind libvirtd"; ;;RedHatEnterpriseLinux7/RHEL7-38974
859;;;;;;;;;5;"on source host
 # virsh Welcome to virsh, the virtualization interactive terminal

 Type:  'help' for help with commands
        'quit' to quit

 virsh # create rhelguest1.xml

 Domain fedora-local created from rhelguest1.xml

 4.migrate the guest to target and canclled it before the migration finished

 virsh # migrate rhelguest1 --live qemu+ssh://xx.xx.xx.xx/system --verbose
 root@xx.xx.xx.xx's password:

 Migration: [ 38 %]^Cerror: operation aborted: migration job: canceled by client";"step 4: 
 shouldn't have the mem leak in target host as the step 2, while canceledd the migration before it was finished
​​";;RedHatEnterpriseLinux7/RHEL7-38974
860;RHEL7-38980;[Sound devices][ac97] Start a guest with ac97 sound model;"Verify guest starts with correct qemu command line when sound model is set to ac97
";Fangge Jin (fjin);High;Positive;Automated;;1;"Edit or define a guest with ""ac97"" sound device and spice graphic";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-38980
860;;;;;;;;;2;"2. start guest
 # virsh start domain";​​;;RedHatEnterpriseLinux7/RHEL7-38980
860;;;;;;;;;3;"3. Check qemu command line:

 # ps e -C qemu-kvm|grep -E 'sound|AUDIO'";"qemu command line includes:

 -device AC97,id=sound0,bus=pci.0,addr=0x4
 ...QEMU_AUDIO_DRV=spice
";;RedHatEnterpriseLinux7/RHEL7-38980
860;;;;;;;;;4;The following steps are optional:;​​;;RedHatEnterpriseLinux7/RHEL7-38980
860;;;;;;;;;5;"5. Use virt-viewer to connect to guest. 

 # virt-viewer domain   ";​​;;RedHatEnterpriseLinux7/RHEL7-38980
860;;;;;;;;;6;"6. login guest and verify.
    # lspci | grep -i ac";"Output:
 ...
 00:0b.0 Multimedia audio controller: Intel Corporation 82801AA AC'97 Audio Controller (rev 01)";;RedHatEnterpriseLinux7/RHEL7-38980
860;;;;;;;;;7;"7. In guest, play a multi-media file
"; Can hear sound;;RedHatEnterpriseLinux7/RHEL7-38980
861;RHEL7-38981;Start a guest with invalid source file for random backend virtio-rng device;"Start a guest with invalid random source file for random backend virtio-rng device
BZ786408, BZ1347642";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1.Prepare a domain with an arbitrary file as RNG backend file, which is not a valid random source.
 # virsh edit V
     <rng model='virtio'>
       <backend model='random'>/var/lib/libvirt/images/fd.img</backend>
     </rng>";"1. Domain can be edited and save,
 
 Note:
 It is because libvirt has dropped restrictions on rng backend path in BZ1347642.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-38981
861;;;;;;;;;2;"2.Try to start the domain
 # virsh start V
​​";"2.Output:
 Domain V started.";;RedHatEnterpriseLinux7/RHEL7-38981
862;RHEL7-39099;KS-TC-IB: Establish an SRP connection manually and run IO over SRP(SCSI) device;KS-TC-IB: Establish an SRP connection manually and run IO over SRP(SCSI) device;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-39099
863;RHEL7-39105;KS-TC-IB: iser;KS-TC-IB: iser;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-39105
864;RHEL7-39106;KS-TC-IB: srptools;KS-TC-IB: srptools;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-39106
865;RHEL7-39107;KS-TC-IB: srp_multipath_io_stress;KS-TC-IB: srp_multipath_io_stress;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-39107
866;RHEL7-39108;KS-TC-IB: librdmacm-utils;KS-TC-IB: librdmacm-utils;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-39108
867;RHEL7-39109;KS-TC-IB: openmpi functionality testing under root;KS-TC-IB: openmpi functionality testing under root;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-39109
868;RHEL7-39111;Test  a domain with special characters in domain name - '/';"Bug 639923 - libvirt allows you to create a domain with '/' in the name
";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Scenario 1:  include '/' in domain name
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-39111
868;;;;;;;;;2;"Define:
 1) 
 # virsh define /tmp/rhel7.xml 
 error: Failed to define domain from /tmp/rhel7.xml
 error: XML error: name rhel7/ cannot contain '/'
 
 2)
 # virsh define /tmp/rhel7.xml 
 error: Failed to define domain from /tmp/rhel7.xml
 error: XML error: name / cannot contain '/'";"
​​";;RedHatEnterpriseLinux7/RHEL7-39111
868;;;;;;;;;3;"Create:
 1) 
 # virsh create /tmp/rhel7.xml 
 error: Failed to create domain from /tmp/rhel7.xml
 error: XML error: name rhel7/ cannot contain '/'
 
 2)
 # virsh create /tmp/rhel7.xml 
 error: Failed to create domain from /tmp/rhel7.xml
 error: XML error: name / cannot contain '/'";​​;;RedHatEnterpriseLinux7/RHEL7-39111
869;RHEL7-39112;[start] - Start a (previous defined) inactive domain with special charaters in domain name;"1.With NON-ACSII characters in domain name
Refer to:
Bug 1282846 - libvirt can not start a VM with non-ACSII chars name: Invalid machine name (from systemd) - POST";Fangge Jin (fjin);High;Positive;Not Automated;;1;" Start the guest with non-ACSII chars name
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  -     kīмсhī-∨м               shut off
 
 #virsh start kīмсhī-∨м"; the guest should able to start successfully after bug 1282846 fixed;Test Case;RedHatEnterpriseLinux7/RHEL7-39112
870;RHEL7-39631;[reset] [negative] Reset a shutoff domain;Reset a shutoff domain;Fangge Jin (fjin);Medium;Negative;Automated;;1;"# virsh list --all
 Id Name State
 \----------------------------------------------------
 - rhel5 shut off
 
 virrsh reset rhel5
 error: Failed to reset domain rhel5
 error: Requested operation is not valid: domain is not running";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-39631
871;RHEL7-39632;[dompmsuspend] suspend a running domain after changing its memory;"1.Change mem size of a running domain, then dompmsuspend
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" #virsh start guest (with 4G mem)
 
 # virsh setmem guest 2G
 
 # virsh dompmsuspend guest --target disk
 
​​"; The guest should be suspended successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-39632
872;RHEL7-39640;Dump a domain when libvirtd service is down.;Bug 851452 - unexpected result of virsh save when stop libvirtd;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Prepare a running guest test.
 
  # service libvirtd stop
 
 # virsh dump test /tmp/test.dump
 
​​";"Output:
 error: Failed to reconnect to the hypervisor
 error: no valid connection
 error: Failed to connect socket to '/var/run/libvirt/libvirt-sock': No such file or directory
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-39640
873;RHEL7-39642;Check file descriptor and pipe info during dumping;"Check file descriptor and pipe info during dumping
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" # virsh dump qcow2 /var/lib/libvirt/qemu/dump/qcow2.dump --verbose
 
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-39642
873;;;;;;;;;2;"Before the dump finishes:
 
 # lsof /var/lib/libvirt/qemu/dump/qcow2.dump; lsof |grep pipe|grep libvirt_i;  lsof |grep pipe|grep qemu-kvm
​​";"The fd is owned by libvirt_iohelper, and both libvirt_iohelper and qemu have a pipe with same node
 
 Output:
 1) 
 # lsof /var/lib/libvirt/qemu/dump/qcow2.dump
 COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME
 libvirt_i 31216 root 1w REG 8,3 325058560 266903 /var/lib/libvirt/qemu/dump/qcow2.dump
 
 2) 
 # lsof |grep pipe|grep libvirt_i
 libvirt_i **4210** root 0r FIFO 0,8 0t0 **396315** pipe
 
 # lsof |grep pipe|grep qemu-kvm
 qemu-kvm 4552 qemu 18w FIFO 0,8 0t0 **396315** pipe
 ...
​​";;RedHatEnterpriseLinux7/RHEL7-39642
874;RHEL7-39664;[setvcpus] [negative] - Change number of virtual CPUs active in a guest domain with invalid arguments;"1. Invatlid number
 2. Invalid string
 3. Invalid number or string with interactive virsh terminal 
Refer to:
 Bug 605660 - virsh interactive terminal will print bogus error after invalid setvcpus commands - Closed
Bug 1248277 - no error output when pass a negative number to setvcpus";Fangge Jin (fjin);Medium;Negative;Not Automated;;1; Scenario 1: set vcpu number with invalid numbers;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-39664
874;;;;;;;;;2;"1) More than the maximum configured vcpu number in guest xml
 # virsh setvcpus rhel6 7654321
 ** #echo $?**";"Output:
 error: invalid argument: requested vcpus is greater than max allowable vcpus for the live domain: 7654321 > 4

 **#echo $?**
 **1**

";;RedHatEnterpriseLinux7/RHEL7-39664
874;;;;;;;;;3;"2) Out of range values:
 
* #virsh setvcpus rhel7.2 0
* #virsh setvcpus rhel7.2 -1
* #virsh setvcpus rhel7.2 4294967296
* #virsh setvcpus rhel7.2 4294967297
";"1.#virsh setvcpus rhel7.2 0
 error: Can't set 0 processors for a VM

 2.#virsh setvcpus rhel7.2 -1
 error: Numeric value '-1' for <count> option is malformed or out of range

 3.#virsh setvcpus rhel7.2 4294967296
 error: Numeric value '4294967296' for <count> option is malformed or out of range

 4.#virsh setvcpus rhel7.2 4294967297
 error: Numeric value '4294967297' for <count> option is malformed or out of range";;RedHatEnterpriseLinux7/RHEL7-39664
874;;;;;;;;;4;"Scenario 2: set vcpu number with invalid string
 # virsh setvcpus rhel6 asdfad
 ** #echo $?**";"# virsh setvcpus guest asdfad
 error: Invalid number of virtual CPUs
 **#echo $?**
 **1**

";;RedHatEnterpriseLinux7/RHEL7-39664
874;;;;;;;;;5;"Scenario 3: set invalid vcpu numbers with interactive virsh terminal
 # virsh -c qemu:///system
 Welcome to virsh, the virtualization interactive terminal.
 Type: 'help' for help with commands
 'quit' to quit
 virsh # setvcpus 1 cdrom_test
 error: Invalid number of virtual CPUs

 virsh # setvcpus cdrom_test 7654321
 error: invalid argument in argument out of range: 7654321

 virsh # setvcpus cdrom_test asdf
 error: Invalid number of virtual CPUs"; ;;RedHatEnterpriseLinux7/RHEL7-39664
875;RHEL7-39666;The count of vcpu with config flag should be compared with the maximum vcpus with config flag;"Refer to:
 Bug 847198 - The count of vcpu with config flag should be compared with the maximum vcpus with config flag
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" # virsh vcpucount rhel6.2-new
 maximum config 3
 maximum live 3
 current config 2
 current live 2
 
 
 
 
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-39666
875;;;;;;;;;2;"# virsh setvcpus rhel6.2-new 4 --maximum --config
 
 # virsh vcpucount rhel6.2-new
 maximum config 4
 maximum live 3
 current config 2
 current live 2";​​;;RedHatEnterpriseLinux7/RHEL7-39666
875;;;;;;;;;3;"# virsh setvcpus rhel6.2-new 4 --config
 (successfully)";"There is no error like:
 error: invalid argument: requested vcpus is greater than max allowable vcpus
 for the domain: 4 > 3
 
 
 Refer to:
 Bug 847198 - The count of vcpu with config flag should be compared with the maximum vcpus with config flag";;RedHatEnterpriseLinux7/RHEL7-39666
875;;;;;;;;;4;"# virsh vcpucount rhel6.2-new
 maximum config 4
 maximum live 3
 current config 4
 current live 2";​​;;RedHatEnterpriseLinux7/RHEL7-39666
876;RHEL7-39670;[vcpucount] [negative] - Test exclusive arguments;"Test exclusive arguments
Bug 1024245 - vcpucount don't check exclusive options.";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" # virsh vcpucount <vm-name> --config --live
 error: Options --live and --config are mutually exclusive";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-39670
877;RHEL7-39671;[vcpupin] [negative] - Pin domain vcpu to none;Pin domain vcpu to none;Fangge Jin (fjin);Medium;Negative;Automated;;1;" # virsh vcpupin rhel7 0 1,^1
 
 
 
​​";"error: Invalid cpulist '1,^1'
 
 
 Refer to:
 Bug 949212 - vcpupin accept cpulist set equal to none";Test Case;RedHatEnterpriseLinux7/RHEL7-39671
877;;;;;;;;;2;"# virsh vcpupin rhel7 0 1,^1 --config
​​";error: Invalid cpulist '1,^1';;RedHatEnterpriseLinux7/RHEL7-39671
878;RHEL7-39672;[vcpuinfo] Check libvirtd memory leak when executing vcpuinfo;Check libvirtd memory leak when executing vcpuinfo;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 1) stop libvirtd -
 # /etc/init.d/libvirtd stop
 
 2) run libvirtd under valgrind -
 #valgrind --leak-check=full libvirtd
 
 3) Open other terminal and run ""virsh vcpuinfo $guest"" many times ($guest is the name of some active
 guest)
 # virsh list --all
 Id Name State
 ----------------------------------
 9 rhel55 running
 - rhel39 shut off
 - rhel6 shut off
 # virsh vcpuinfo rhel55
 
 4) ctl-C out of the valgrind commend in step 2). and check the memory leak";" There should be no memory leak
 ==16741== LEAK SUMMARY:
 ==16741== definitely lost: 0 bytes in 0 blocks
 ==16741== indirectly lost: 0 bytes in 0 blocks
 ==16741== possibly lost: 9,032 bytes in 51 blocks
 ==16741== still reachable: 1,511,844 bytes in 13,719 blocks
 ==16741== suppressed: 0 bytes in 0 blocks
 ==16741== Reachable blocks (those to which a pointer was found) are not shown.
 ==16741== To see them, rerun with: --leak-check=full --show-reachable=yes
 ==16741==
 ==16741== For counts of detected and suppressed errors, rerun with: -v
 ==16741== ERROR SUMMARY: 15 errors from 12 contexts (suppressed: 31 from 9)
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-39672
879;RHEL7-39676;[Hyper-V][Backup]Backup when a partition is mounted under multiple paths.;RHEL 7 Bug 1169724 ;Yaju Cao (yacao);Medium;Positive;Automated;;1;"1. In the guest, Mount a disk under multiple paths
 
 For example,
 For RHEL6
 mount /dev/sdb1 /mnt/sdb1 
 mount /dev/sdb1 /mnt/sdb1_bak
 # grep sdb1 /proc/mounts
 
 For RHEL7, please use 
 mount --bind /home /mnt 
 # grep home /proc/mounts
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-39676
879;;;;;;;;;2;"2. Perform backup on the host
 
 
  e.g. wbadmin start backup -backupTarget:Q:\ -hyperv:Hyper-V-Manager-2012-R2
 
​​";Backup can complete successfully;;RedHatEnterpriseLinux7/RHEL7-39676
880;RHEL7-39677;[Hyper-V][General operation]CPU Offline is not supported(Bug 1167380);Bug 1167380 ;Yaju Cao (yacao);Medium;Positive;Automated;;1;"Refer to bug: https://bugzilla.redhat.com/show_bug.cgi?id=1167380 
 Boot a guest with multiple vCPUs";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-39677
880;;;;;;;;;2;"Try to offline some vCPU
 # echo 0 > /sys/devices/system/cpu/cpu1/online ";"vCPUs could not be offlined: ""-bash: echo: write error: Function not implemented"". The guest could still work well.";;RedHatEnterpriseLinux7/RHEL7-39677
881;RHEL7-39904;[Hyper-V][Reliability]Storage: Add/remove multiple disks (>60 ) to the guest;RHEL7 Bug 1254049, refer to https://bugzilla.redhat.com/show_bug.cgi?id=1254049#c11 ;Yaju Cao (yacao);Medium;Positive;Automated;;1;"1. Add/remove multiple disks, and check call track and console log.please download the script 
 http://fileshare.englab.nay.redhat.com/pub/section1/s13rd/scripts/hyperv/test_add_remove_multiple_scsi_id_rhel7_39904.ps1 
 PowerShell script to reproduce the issue:

$numdisk = 0
$DPATH = ""C:\Users\Public\Documents\Hyper-V\Virtual hard disks\""
$VMName = ""Fedora22_64_gen1""
$maxnum = 64

do {
$DISK = ""$DPATH\b1254049_$numdisk.vhdx""
New-VHD -SizeBytes 1GB -Path $DISK -Dynamic
Add-VMHardDiskDrive -VMName $VMNAME -ControllerType SCSI -ControllerNumber 0 -Path $DISK
$numdisk++
} while ($numdisk -le $maxnum)

$numdisk = 0
do {
$cloc = $numdisk + 1
Remove-VMHardDiskDrive -VMName $VMNAME -ControllerNumber 0 -ControllerType SCSI -ControllerLocation $cloc
$numdisk++
} while ($numdisk -le $maxnum)

$numdisk = 0
do {
$DISK = ""$DPATH\b1254049_$numdisk.vhdx""
Remove-Item $DISK
$numdisk++
} while ($numdisk -le $maxnum)

After running test cases, remove all the disks tested.";"1. VM works well, no crash
2. Report ""INQUIRY result too short"" once
# dmesg | grep ""INQUIRY result too short""
[    1.633911] scsi host3: scsi scan: INQUIRY result too short (5), using 36
3. Don't dump trace ""scsi_prep_async_scan called twice""";Test Case;RedHatEnterpriseLinux7/RHEL7-39904
882;RHEL7-39918;KS-TC-IB: openmpi functionality testing under non-root user;KS-TC-IB: openmpi functionality testing under non-root user;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-39918
883;RHEL7-39919;KS-TC-IB: mpich2 testing;KS-TC-IB: mpich2 testing;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-39919
884;RHEL7-39921;KS-TC-IB: mpi-hostfile;KS-TC-IB: mpi-hostfile;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-39921
885;RHEL7-39922;KS-TC-IB: mvapich testing;KS-TC-IB: mvapich testing;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-39922
886;RHEL7-39923;KS-TC-IB: mvapich-psm;KS-TC-IB: mvapich-psm;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-39923
887;RHEL7-39924;KS-TC-IB: mvapich2 testing;KS-TC-IB: mvapich2 testing;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-39924
888;RHEL7-39925;KS-TC-IB: mvapich2-psm;KS-TC-IB: mvapich2-psm;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-39925
889;RHEL7-40177;virsh doesn't hang after several rounds of operations that use stream;"NB, this is not restricted to screenshot only, but any API using streams could have hit this issue. 
But yeah, all other stream using APIs do take longer time to finish, so screenshot is perfect for verification and testing.

Bug 770919 - Sometimes virsh command screenshot may hang - FIXED (libvirt)";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" Check the screenshot command when running with loops.
 # for i in {1..100}; do virsh screenshot rhel6; sleep 1; done
 
​​";" The command will not hang.
 Screenshot saved to rhel6-xxxxxx.ppm, with type of image/x-portable-pixmap
 ....";Test Case;RedHatEnterpriseLinux7/RHEL7-40177
890;RHEL7-40178;[Hyper-V][Memory]Change MMIO gap to a valid value(128MB-3.5GB) -Gen1 Only;Reference: http://blogs.technet.com/b/virtualization/archive/2013/07/24/enabling-linux-support-on-windows-server-2012-r2-hyper-v.aspx, https://github.com/LIS/lis-test/blob/master/WS2012R2/lisa/setupscripts/MMIO_Set_Invalid_GapSize.ps1 ;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;"1. Check the initial MMIO gap of the guest
 $dmesg|grep pci_bus";"pci_bus 0000:00: resource 8 [mem 0xf8000000-0xfffbffff]

 The MMIO gap is 4096MB - 0xf8000000
 This is the default MMIO gap: 128MB";Test Case;RedHatEnterpriseLinux7/RHEL7-40178
890;;;;;;;;;2;2. Shutdown the guest;​​;;RedHatEnterpriseLinux7/RHEL7-40178
890;;;;;;;;;3;"3. Download the script from 
 http://fileshare.englab.nay.redhat.com/pub/section1/s13rd/scripts/hyperv/SetMMIOGap.ps1
 You need to edit the script first. Set the  vmname as your vm's name, change the newGapSize to your target size, the value accept between 128 to 3584.
 Then execute the script.";"It should return True, please pay attention that it needs turn off VM.
";;RedHatEnterpriseLinux7/RHEL7-40178
890;;;;;;;;;4;"4. Start the VM and Check the MMIO gap of the guest again,
 $dmesg|grep pci_bus";"pci_bus 0000:00: resource 8 [mem 0xc0000000-0xfffbffff]
 The MMIO gap is 4096MB-0xc0000000 , 
 This should be equal to the target size you set at step 3.

 Here the example is set as 1024 in the script, 0xc0000000 equal to 3221225472, it means 3072MB, 4096-3072=1024
";;RedHatEnterpriseLinux7/RHEL7-40178
891;RHEL7-40185;[cpu-stats] negative test;"1. test without domain name
 2. test with non-existing domain name
 3.test with shutoff domain
 4.test with invalid arguments
";Fangge Jin (fjin);Medium;Negative;Automated;;1;"Scenario 1: test without domain name 
 # virsh cpu-stats --count -1 --total
 error: command 'cpu-stats' requires <domain> option
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40185
891;;;;;;;;;2;"Scenario 2: test with non-existing domain name 
 # virsh cpu-stats rhel61
 error: failed to get domain 'rhel61'
 error: Domain not found: no domain with matching name 'rhel61'";​​;;RedHatEnterpriseLinux7/RHEL7-40185
891;;;;;;;;;3;"Scenario 3: test with shutoff domain
 # virsh destroy rhel62
 Domain rhel62 destroyed
 
 # virsh cpu-stats rhel62
 error: Failed to retrieve CPU statistics for domain 'rhel62'
 error: Requested operation is not valid: domain is not running
​​";"Refer to:
 Bug 902655 - Impove the error message for cpu-stats shutdown guest - FIXED in RHEL7, while found in RHEL6";;RedHatEnterpriseLinux7/RHEL7-40185
891;;;;;;;;;4;"Scenario 4: test with invalid arguments
 1. # virsh cpu-stats guest xyz
 error: Numeric value 'xyz' for <start> option is malformed or out of range
 
 2. # virsh cpu-stats guest --start xyz
 error: Numeric value 'xyz' for <start> option is malformed or out of range
 
 3. # virsh cpu-stats guest --count xyz
 error: Numeric value 'xyz' for <start> option is malformed or out of range
 
 4. # virsh cpu-stats guest --count 99999999999
 error: Numeric value '99999999999' for <count> option is malformed or out of range
​​";"Refer to:
 Bug 907732 - libvirt do not check the invalid parameters for cpu-stats - FIXED in RHEL7, while found in RHEL6
​​";;RedHatEnterpriseLinux7/RHEL7-40185
892;RHEL7-40209;KS-TC-IB: dapl;KS-TC-IB: dapl;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-40209
893;RHEL7-40210;KS-TC-IB: ibacm over InfiniBand;KS-TC-IB: ibacm over InfiniBand;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-40210
894;RHEL7-40211;KS-TC-IB: infiniband-diags;KS-TC-IB: infiniband-diags;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-40211
895;RHEL7-40212;KS-TC-IB: netperf;KS-TC-IB: netperf;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-40212
896;RHEL7-40213;KS-TC-IB: libibverbs-utils;KS-TC-IB: libibverbs-utils;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-40213
897;RHEL7-40214;KS-TC-IB: mpich2 (mpich-3.2);KS-TC-IB: mpich2 (mpich-3.2);Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-40214
898;RHEL7-40215;KS-TC-IB: mpitests;KS-TC-IB: mpitests;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-40215
899;RHEL7-40216;KS-TC-IB: mvapich;KS-TC-IB: mvapich;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-40216
900;RHEL7-40217;KS-TC-IB: mvapich-psm;KS-TC-IB: mvapich-psm;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-40217
901;RHEL7-40218;KS-TC-IB: mvapich2;KS-TC-IB: mvapich2;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-40218
902;RHEL7-40219;KS-TC-IB: mvapich2-psm;KS-TC-IB: mvapich2-psm;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-40219
903;RHEL7-40220;KS-TC-IB: openmpi (root);KS-TC-IB: openmpi (root);Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-40220
904;RHEL7-40221;KS-TC-IB: perftest;KS-TC-IB: perftest;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-40221
905;RHEL7-40222;KS-TC-IB: qperf;KS-TC-IB: qperf;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-40222
906;RHEL7-40223;KS-TC-IB: rds-tools;KS-TC-IB: rds-tools;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-40223
907;RHEL7-40224;KS-TC-IB: mstflint;KS-TC-IB: mstflint;Zhaojuan Guo (zguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-40224
908;RHEL7-40229;[iothreadpin] [ negative] Control domain IOThread pinning to host physical CPUs with invalid arguments;"1. Invalid cpulist: a
 
";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" # virsh iothreadpin vm2 2 a
 error: Invalid cpulist 'a'
 
 [root@server diff-libvirt]# echo $?
 1";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40229
909;RHEL7-40233;[setvcpus] [negative] Test exclusive arguments;"1. Set maximum limit with --live --maximum
";Fangge Jin (fjin);Medium;Negative;Not Automated;;1; # virsh setvcpus aa 7 --maximum --live;" .# virsh setvcpus aa 7 --maximum --live
 error: --maximum must be used with --config only
";Test Case;RedHatEnterpriseLinux7/RHEL7-40233
910;RHEL7-40347;[setmem][--size] - Change current memory allocation with specified size unit;"1. Set with --size= M , G, GB
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" # virsh setmem rhel55 --size=512M
 # virsh dumpxml rhel55|grep -i mem
 <memory unit='KiB'>1048576</memory>
 <currentMemory unit='KiB'>524288</currentMemory>
 
 # virsh setmem rhel55 --size=1G
 [root@rhel62-release schemas]# virsh dumpxml rhel55|grep -i mem
 <memory unit='KiB'>1048576</memory>
 <currentMemory unit='KiB'>1048576</currentMemory>
 
 # virsh setmem rhel55 --size=1GB
 # virsh dumpxml rhel55|grep -i mem
 <memory unit='KiB'>1048576</memory>
 
 <currentMemory unit='KiB'>976564</currentMemory>
 
 # virsh setmem rhel55 --size=1.5GB
 error: memory size has to be a number";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40347
911;RHEL7-40348;[iothreaddel] [negative] Delete a nonexistent iothread with --config for running domain;"Delete a nonexistent iothread with --config for running domain
";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"1) Prepare a running guest with iothreadinfo like below:
 # virsh iothreadinfo rhel7d2
  IOThread ID     CPU Affinity   
 ---------------------------------------------------
  1               4
  2               6
  6               1-4,6
  8               1-4,6
 
 2) # virsh iothreaddel rhel7d2 12345 --config
 error: invalid argument: cannot find IOThread '12345' in persistent iothreadids
 
 3) # virsh iothreaddel rhel7d2 12345 --current
 error: invalid argument: cannot find IOThread '12345' in iothreadids list
 
 4) # virsh iothreaddel rhel7d2 1 --current
 
 5) # virsh iothreadinfo rhel7d2 
  IOThread ID     CPU Affinity   
 ---------------------------------------------------
  2               6
  6               1-4,6
  8               1-4,6";" 
 Refer to:
 Bug 1218145 - vm deadlock when deleting a nonexistent iothread with --config
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-40348
912;RHEL7-40350;[numatune] set domain numa mode with integer;"1. Use integer as mode type
 Refer to:
 Bug 1047234 - virsh command numatune accept integer as mode type.";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"
 # virsh numatune dom_test
 numa_mode : strict
 numa_nodeset :
 
 # virsh numatune test-vm --mode 0
 # virsh numatune test-vm
 numa_mode : strict
 numa_nodeset :
 
 
 # virsh numatune test-vm --mode 1
 # virsh numatune test-vm
 numa_mode : preferred
 numa_nodeset :
 
 # virsh numatune test-vm --mode 2
 # virsh numatune test-vm
 numa_mode : interleave
 numa_nodeset :
 
 # virsh numatune test-vm --mode 3
 error: Unable to change numa parameters
 error: invalid argument: unsupported numa_mode: '3'
 # virsh numatune test-vm
 numa_mode : interleave
 numa_nodeset :
 
 # virsh numatune test-vm --mode -1
 error: Unable to change numa parameters
 error: invalid argument: unsupported numa_mode: '-1'
 # virsh numatune test-vm
 numa_mode : interleave
 numa_nodeset :"; Refer to: Bug 1047234 - virsh command numatune accept integer as mode type.;Test Case;RedHatEnterpriseLinux7/RHEL7-40350
913;RHEL7-40351;[vcpucout] - Print virtual cpus count with --guest;Test with --guest;Fangge Jin (fjin);Medium;Positive;Automated;;1;"prepare guest with agent and qemu-ga is running in guest
 
 # virsh dumpxml r6
 <vcpu placement='static'>2</vcpu>
 <channel type='unix'>
 <source mode='bind' path='/var/lib/libvirt/qemu/r6.agent'/>
 <target type='virtio' name='org.qemu.guest_agent.0'/>
 <alias name='channel0'/>
 <address type='virtio-serial' controller='0' bus='0' port='8'/>
 </channel>
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40351
913;;;;;;;;;2;"after guest os start
 # virsh setvcpus r6 1 --guest
 
 # virsh vcpucount r6 \--guest
 1
 
 # virsh setvcpus r6 2 --guest
 
 # virsh vcpucount r6 \--guest
 2";​​;;RedHatEnterpriseLinux7/RHEL7-40351
914;RHEL7-40352;[setvcpus] -  Modify cpu state in the guest with --guest;"1. Modify cpu state in the guest with --guest
";Fangge Jin (fjin);Medium;Positive;Automated;;1;"Prepare a running domain with guest agent.
 
 # virsh vcpucount rhel7.2-save
 maximum      config         4
 maximum      live           4
 current      config         3
 current      live           3
​​";"In the guest:
 # lscpu
 Architecture:          x86_64
 CPU op-mode(s):        32-bit, 64-bit
 Byte Order:            Little Endian
 CPU(s):                3
 On-line CPU(s) list:   0-2
";Test Case;RedHatEnterpriseLinux7/RHEL7-40352
914;;;;;;;;;2;"# virsh setvcpus rhel6 2 --guest
 
 # virsh vcpucount rhel6 --guest
 2";" Note: The vcpu count can't be changed with --guest if the new number is greater than the previous number.
 
 
 rhel6 should be changed with 2 vcpus successfully. 
 
 In the guest:
 # lscpu
 Architecture:          x86_64
 CPU op-mode(s):        32-bit, 64-bit
 Byte Order:            Little Endian
 CPU(s):                3
 On-line CPU(s) list:   0,2
 Off-line CPU(s) list:  1
​​";;RedHatEnterpriseLinux7/RHEL7-40352
915;RHEL7-40356;[setvcpus] [--maximum --config] - Change the maximum limit of virtual CPUs active in a guest domain;"Set maximum limit with --config --maximum
";Fangge Jin (fjin);Medium;Positive;Automated;;1;"# virsh setvcpus rhel6 --maximum --config 5
 
 # virsh vcpucount rhel6.2-new
 maximum config 5
 maximum live 4
 current config 3
 current live 3
 
 # virsh dumpxml rhel6
 
 #virsh destroy rhel6
 #virsh dumpxml rhel6";" The Max cpu will change with shutdown status and forever
 ...........
 <vcpu current='3'>**5**</vcpu>
 ...............";Test Case;RedHatEnterpriseLinux7/RHEL7-40356
916;RHEL7-40357;[undefine] Undefine a guest with various options.;"1.With --managed-save / --storage / --remove-all-storage / --wipe-storage / --snapshots-metadata 
 2.Read only mode";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" Undefine with --managed-save
 4.# virsh define pure.xml
 
 5. # virsh start pure
 Domain pure started
 
 6. # virsh list --all
 Id Name State
 \----------------------------------
 3 pure running
 
 7. # virsh managedsave pure
 Domain pure state saved by libvirt
 
 8 . # ll /var/lib/libvirt/qemu/save
 total 1934468
 -rw-------. 1 root root 1980887460 Apr 18 13:44 pure.save
 
 9 . # virsh undefine pure --managed-save
 Domain pure has been undefined
 
 10. # ll /var/lib/libvirt/qemu/save
 total 0";" 10. The save file is removed.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-40357
916;;;;;;;;;2;"Undefine with --snapshots-metadata
 11.# virsh define pure.xml
 
 12 # virsh start pure
 Domain pure started
 
 13 # virsh snapshot-create-as pure
 Domain snapshot 1334740282 created
 
 14 # virsh undefine pure --snapshots-metadata
 Domain pure has been undefined";​​;;RedHatEnterpriseLinux7/RHEL7-40357
916;;;;;;;;;3;"Undefine with --wipe-storage --storage
 15. # virsh define pure.xml
 Domain pure defined from pure.xml
 
 16. # virsh undefine pure --storage vda --wipe-storage
 Domain pure has been undefined
 Wiping volume 'vda'(/data/images/pure.img) ... Done.
 Volume 'vda' removed.
 
 17. #ll /data/images/pure.img
 ls: cannot access /data/images/pure.img: No such file or directory";​​;;RedHatEnterpriseLinux7/RHEL7-40357
916;;;;;;;;;4;"Undefine with --remove-all-storage
 18. 
 Prepare a domain with two disks.
 Note: The two disks must be managed by libvirt(that's to say the two disks must be in storage pool of libvirt), or you will receive this error when undefine guest with --remove-all-storage: storage volume 'vda'(/90121/fjin/test.qcow2) is not managed by libvirt. Remove it manually.
 If the storage volume is created just now, please update your default pool with the following command to check for your updated files,
 # virsh pool-refresh default
 
 
 # virsh dumpxml dom
 <domain type='qemu'>
 ......
 <disk type='file' device='disk'>
 <driver name='qemu' type='qcow2'/>
 <source file='/var/lib/libvirt/images/rhel6u3.img'/>  ==> this disk is in storage pool ""default"".
 <target dev='vda' bus='virtio'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03'
 function='0x0'/>
 </disk>
 <disk type='file' device='disk'>
 <driver name='qemu' type='qcow2'/>
 <source file='/var/lib/libvirt/images/test.qcow2'/>  ==> this disk is in storage pool ""default"".
 <target dev='vdb' bus='virtio'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x05'
 function='0x0'/>
 </disk>
 ......
 </domain>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40357
916;;;;;;;;;5;"#virsh start rhel6u3
 
 # virsh undefine rhel6u3 --remove-all-storage
 error: Storage volume deletion is supported only on stopped domains";​​;;RedHatEnterpriseLinux7/RHEL7-40357
916;;;;;;;;;6;"#virsh destroy rhel6u3
 
 # virsh undefine rhel6u3 --remove-all-storage
 Domain rhel6u3 has been undefined
 Volume '/var/lib/libvirt/images/rhel6u3.qcow2' removed.
 Volume '/var/lib/libvirt/images/test.qcow2' removed.
 
 # ll /var/lib/libvirt/images/rhel6u3.qcow2
 ls: cannot access /var/lib/libvirt/images/rhel6u3.qcow2: No such file or directory
 
 ll /var/lib/libvirt/images/test.qcow2
 ls: cannot access /var/lib/libvirt/images/test.qcow2: No such file or directory";​​;;RedHatEnterpriseLinux7/RHEL7-40357
916;;;;;;;;;7;"For readonly mode, you will get
 virsh -r
 virsh > undefine ayal
 error: Failed to undefine domain ayal
 error: operation virDomainUndefine forbidden for read only access";"For readonly mode, you will be forbidden to undefine a guest
 FYI: notice ""cache='none'"" with underline in pure.xml. That will cause virsh
 start failed in RHEL7 libvirt-1.0.4-1.el7. That is qemu-kvm's bug [see
 bugzilla [bug 911990](https://bugzilla.redhat.com/show_bug.cgi?id=911990)
 commit 15].";;RedHatEnterpriseLinux7/RHEL7-40357
917;RHEL7-40465;[vol-delete][--delete-snapshots] Delete a rbd backend volume together with its snapshots - new for RHEL7.3;"1. Delete a rbd backend volume together with its snapshots
 
 Refer to:
 Bug 1281710 - It's better support to delete snapshots for rbd volume";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1. Try to delete volume $poolName/rbd1.img without --delete-snapshots
 # virsh vol-delete $poolName/rbd1.img
 error: Failed to delete vol $poolName/rbd1.img
 error: failed to remove volume '$poolName/rbd1.img': Directory not empty
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-40465
917;;;;;;;;;2;"2.Delete volume $poolName/rbd1.img with --delete-snapshots
 # virsh vol-delete $poolName/rbd1.img --delete-snapshots
 Vol $poolName/rbd1.img deleted
 
 # virsh vol-list --pool rbd-pool
  Name                                          Path                                    
 ------------------------------------------------------------------------------
 
 On the ceph server:
 # rbd list $poolName
 (rbd1.img is not listed)";​​;;RedHatEnterpriseLinux7/RHEL7-40465
918;RHEL7-40466;[undefine] [--delete-snapshots --remove-all-storage] Undefine a guest and remove the storage and snapshots in the meanwhile - new for RHEL7.3;"1. Undefine a guest and remove the rbd backend storage and snapshots
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" Scenario 1: Undefine guest --delete-snapshots with --remove-all-storage
 1)# virsh undefine rhel7.2 --remove-all-storage --delete-snapshots
 Domain rhel7.2 has been undefined
 Volume 'vda'(rbd/r7.raw) removed.
 
 2)# virsh vol-list rbd-pool
  Name                 Path                                    
 ------------------------------------------------------------------------------
 
 On ceph server:
 3) # rbd list rbd
 
 
​​";" 2) r7.raw is not listed
 
 3) r7.raw is not listed.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-40466
918;;;;;;;;;2;"Scenario 2(negative): Use --delete-snapshots without --remove-all-storage
 # virsh undefine rhel7.2  --delete-snapshots
 error: Option --remove-all-storage is required by option --delete-snapshots";​​;;RedHatEnterpriseLinux7/RHEL7-40466
919;RHEL7-40480;[blkdeviotune] [--xxx-iops-sec] Set  I/O operations limit per second when guest is running;"For a running guest
 1. Set read I/O operations limit per second lively and persistently
 2. Set write I/O operations limit per second lively and persistently
 3. Set total I/O operations limit per second lively and persistently
";Fangge Jin (fjin);Medium;Positive;Automated;;1;Set xxx_iops_sec lively;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40480
919;;;;;;;;;2;"set read_iops_sec lively
 
 1) # virsh blkdeviotune rhel6u2 hda --read-iops-sec 50
 
 check if the setting take effect:
 2) # virsh blkdeviotune rhel6u2 hda
 
 
 
 
 
 
 
 
 
 
 
 
 
 
​​";" set iotune read-iops-sec --live
 
 1) # virsh blkdeviotune rhel6u2 hda --read-iops-sec 50
 
 
 2) #virsh blkdeviotune rhel6u2 hda
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 50
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     : 
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
 
​​";;RedHatEnterpriseLinux7/RHEL7-40480
919;;;;;;;;;3;"3) #virsh dumpxml rhel6u2
 
 
 
 
 
 
 
 
 
 
 
 
​​";"3) # virsh dumpxml rhel6u2
 ...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw' cache='none'/>
 <source file='/var/lib/libvirt/images/rhel6u2'/>
 <target dev='hda' bus='ide'/>
 **** **<iotune>**
 ** <read_iops_sec>50</read_iops_sec>**
 ** </iotune>**
 <address type='drive' controller='0' bus='0' target='0' unit='0'/>
 </disk>
​​";;RedHatEnterpriseLinux7/RHEL7-40480
919;;;;;;;;;4;"4) login the guest ,check the hda's read iops approximately 50/s
 # fio --filename=/root/test --direct=1 --rw=read --bs=512K --size=100M --name=test --iodepth=1";"4)
 
 **test: (g=0): rw=read, bs=512K-512K/512K-512K/512K-512K, ioengine=sync, iodepth=1
 fio-2.1
 Starting 1 process
 Jobs: 1 (f=1): [R] [60.0% done] [22016KB/0KB/0KB /s] [**43/0/0 iops**] [eta 00m:Jobs: 1 (f=1): [R] [80.0% done] [23040KB/0KB/0KB /s] [**45/0/0 iops**] [eta 00m:Jobs: 1 (f=1): [R] [100.0% done] [22528KB/0KB/0KB /s] [**44/0/0 iops**] [eta 00m:00s]
 test: (groupid=0, jobs=1): err= 0: pid=1741: Tue Jun 4 08:15:57 2013
 read : io=102400KB, bw=22625KB/s, **iops=44**, runt= 4526msec
 ---";;RedHatEnterpriseLinux7/RHEL7-40480
919;;;;;;;;;5;"set write_iops_sec 100 lively
 
 1) # virsh blkdeviotune rhel6u2 hda --write-iops-sec 100
 
 check if the setting take effect:
 2)# virsh blkdeviotune rhel6u2 hda
 
 
 
 
 
 
 
 
 
 
 
 
 
​​";"
 
 1) # virsh blkdeviotune rhel6u2 hda --write-iops-sec 100
 
 
 2) #virsh blkdeviotune rhel6u2 hda
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 100
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     : 
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
 
​​";;RedHatEnterpriseLinux7/RHEL7-40480
919;;;;;;;;;6;"3) # virsh dumpxml rhel6u2
 
 
 
 
 
 
 
 
 
 
 
 
 4) login the guest ,check the hda's read iops approximately 100/s
 # fio --filename=/root/test --direct=1 --rw=write --bs=256K --size=100M --name=test --iodepth=1";"3)
 ...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw' cache='none'/>
 <source file='/var/lib/libvirt/images/rhel6u2'/>
 <target dev='hda' bus='ide'/>
 **** **<iotune>**
 ** <write_iops_sec>100</write_iops_sec>**
 ** </iotune>**
 <address type='drive' controller='0' bus='0' target='0' unit='0'/>
 </disk>
 
 4)
 **test: (g=0): rw=read, bs=256K-256K/256K-256K/256K-256K, ioengine=sync, iodepth=1
 fio-2.1
 Starting 1 process
 test: Laying out IO file(s) (1 file(s) / 100MB)
 Jobs: 1 (f=1): [W] [42.9% done] [0KB/12032KB/0KB /s] [**0/47/0 iops**] [eta 00m:
 ** [0/46/0 iops] **[eta 00m:Jobs: 1 (f=1): [W] [57.1% done] [0KB/12019KB/0KB /s]Jobs: 1 (f=1): [W] [62.5% done] [0KB/11776KB/0KB /s] Jobs: 1 (f=1): [W] [75.0% done] [0KB/11252KB/0KB /s] Jobs: 1 (f=1): [W] [87.5% done] [0KB/17646KB/0KB /s]
 test: (groupid=0, jobs=1): err= 0: pid=3119: Tue Jun 4 07:33:24 2013
 **write**: io=102400KB, bw=15389KB/s, **iops=60**, runt= 6654msec";;RedHatEnterpriseLinux7/RHEL7-40480
919;;;;;;;;;7;"Set xxx_iops_sec persistently
";​​;;RedHatEnterpriseLinux7/RHEL7-40480
919;;;;;;;;;8;"set iotune read_iops_sec --config
 
 1) # virsh blkdeviotune rhel6u2 hda --read-iops-sec 150 --config
 
 check if the setting take effect:
 2) # virsh blkdeviotune rhel6u2 hda --config
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
​​";"
 
 1) # virsh blkdeviotune rhel6u2 hda --read-iops-sec 50--config
 
 
 2) # virsh blkdeviotune rhel6u2 hda --config
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 150
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     : 
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
​​";;RedHatEnterpriseLinux7/RHEL7-40480
919;;;;;;;;;9;"3) After restart the guest, we could see the following vaule in qemu
 # ps -ef |grep rhel6u2
 qemu 10748 1 9 15:47 ? 00:00:00 /usr/libexec/qemu-kvm -name rhel6u2 -S -M pc-1.3 -enable-kvm -m 4001 -smp 2,sockets=2,cores=1,threads=1
 --- ,**iops_wr=1****50** ---
 
 
 4) login the guest ,check the hda's read iops";​​;;RedHatEnterpriseLinux7/RHEL7-40480
919;;;;;;;;;10;"set write_iops_sec 100 persistently
 
 1) # virsh blkdeviotune rhel6u2 hda --write-iops-sec 100 --config
 
 check if the setting take effect:
 2) # virsh blkdeviotune rhel6u2 hda --config
 
 
 
 
 
 
 
 
 
 
 
 
 
 
​​";"
 
 1) # virsh blkdeviotune rhel6u2 hda --write-iops-sec 100 --config
 
 
 2)# virsh blkdeviotune rhel6u2 hda --config
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 100
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     : 
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
​​";;RedHatEnterpriseLinux7/RHEL7-40480
919;;;;;;;;;11;"3) restart the domian, we could see the following vaule in qemu
 # ps -ef |grep rhel6u2
 qemu 10748 1 9 15:47 ? 00:00:00 /usr/libexec/qemu-kvm -name rhel6u2 -S -M pc-1.3 -enable-kvm -m 4001 -smp 2,sockets=2,cores=1,threads=1
 --- ,******** **iops_wr=100**---
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40480
919;;;;;;;;;12;4) login the guest ,check the hda's read iops;​​;;RedHatEnterpriseLinux7/RHEL7-40480
919;;;;;;;;;13;"set total_ops_sec 100 persistently
 
 1) # virsh blkdeviotune rhel6u2 hda --total-iops-sec 1000 --config
 
 check if the setting take effect:
 2)# virsh blkdeviotune rhel6u2 hda --config";"
 
 1)# virsh blkdeviotune rhel6u2 hda --total-iops-sec 1000 --config
 
 
 2) # virsh blkdeviotune rhel6u2 hda --config
 total_bytes_sec: 1024000
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 1000
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0";;RedHatEnterpriseLinux7/RHEL7-40480
920;RHEL7-40483;[blkdeviotune] [--xxx-bytes-sec] Set I/O throughput limit in bytes per second when guest is running;"For a running guest
 1. Set read I/O throughput limit in bytes per second lively and persistently
 2. Set write I/O throughput limit in bytes per second lively and persistently
 3. Set total I/O throughput limit in bytes per second lively and persistently";Fangge Jin (fjin);Medium;Positive;Automated;;1; Set xxx_bytes_sec lively;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40483
920;;;;;;;;;2;"set write_bytes_sec 10M/s
 
 1) # virsh blkdeviotune rhel6u2 hda --write-bytes-sec 10000000
 
 check if the setting take effect:
 2) # virsh blkdeviotune rhel6u2 hda
 
 
 
 
 
 
 
 
 
 
 
 
 
 
​​";" 
 
 1) # virsh blkdeviotune rhel6u2 hda --write-bytes-sec 10000000
 
 
 2) #virsh blkdeviotune rhel6u2 hda
 total_bytes_sec: 0
 read_bytes_sec : 10000000
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :drive-ide0-0-0
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
 
 Note: group name is set to drive-<alias name of disk> by default if it's not set
​​";;RedHatEnterpriseLinux7/RHEL7-40483
920;;;;;;;;;3;"3) #virsh dumpxml rhel6u2
 
 
 
 
 
 
 
 
 
 
 
 
​​";"3) # virsh dumpxml rhel6u2
 ...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw' cache='none'/>
 <source file='/var/lib/libvirt/images/rhel6u2'/>
 <target dev='hda' bus='ide'/>
 <iotune>
    <write_bytes_sec>10000000</write_bytes_sec>
 </iotune>
 <alias name='ide0-0-0'/>
 <address type='drive' controller='0' bus='0' target='0' unit='0'/>
 </disk>
 
​​";;RedHatEnterpriseLinux7/RHEL7-40483
920;;;;;;;;;4;4) login the guest ,check the hda's write rate approximately 10M/s;"4)
 # dd if=/dev/zero of=./test.out oflag=direct bs=1M count=100
 100+0 records in
 100+0 records out
 104857600 bytes (105 MB) copied, 10.0819 s, 10.4 MB/s";;RedHatEnterpriseLinux7/RHEL7-40483
920;;;;;;;;;5;"set read_bytes_sec 20M/s
 
 1) # virsh blkdeviotune rhel6u2 hda --read-bytes-sec 2000000
 
 check if the setting take effect:
 2) # virsh blkdeviotune rhel6u2 hda
 
 
 
 
 
 
 
 
 
 
 
 
 
 
​​";"
 
 1) # virsh blkdeviotune rhel6u2 hda --read-bytes-sec 2000000
 
 
 2) # virsh blkdeviotune rhel6u2 hda
 total_bytes_sec: 0
 read_bytes_sec : 20000000
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :drive-ide0-0-0
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
​​";;RedHatEnterpriseLinux7/RHEL7-40483
920;;;;;;;;;6;"3) #virsh dumpxml rhel6u2
 
 
 
 
 
 
 
 
 
 
 
 
 
 4) login the guest ,check the hda's write rate approximately 20M/s";"3) # virsh dumpxml rhel6u2
 ...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw' cache='none'/>
 <source file='/var/lib/libvirt/images/rhel6u2'/>
 <target dev='hda' bus='ide'/>
 <iotune>
 <read_bytes_sec>20000000</read_bytes_sec>
 </iotune>
 <alias name='ide0-0-0'/>
 <address type='drive' controller='0' bus='0' target='0' unit='0'/>
 </disk>
 
 4) # dd if=./test.out of=/dev/null bs=1M
 100+0 records in
 100+0 records out
 104857600 bytes (105 MB) copied, 5.05478 s, 20.7 MB/s
 
 write_bytes_sec updated but read-bytes-sec reseted.";;RedHatEnterpriseLinux7/RHEL7-40483
920;;;;;;;;;7;"Set total_bytes_sec 30M/s
 
 1) # virsh blkdeviotune rhel6u2 hda --total-bytes-sec 30000000
 
 check if the setting take effect:
 2) # virsh dumpxml rhel6u2
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 3) # virsh dumpxml rhel6u2
 
 
 
 
 
 
 
 
 
 
 
 4) login the guest ,both the write and read rate won't exceed 30M/s";" 
 
 # virsh blkdeviotune rhel6u2 hda --total-bytes-sec 30000000
 
 
 #virsh blkdeviotune rhel6u2 hda
 total_bytes_sec: 30000000
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 
 3) ...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw' cache='none'/>
 <source file='/var/lib/libvirt/images/rhel6u2'/>
 <target dev='hda' bus='ide'/>
 **** **<iotune>**
 ** <total_bytes_sec>30000000</total_bytes_sec>**
 ** </iotune>**
 <address type='drive' controller='0' bus='0' target='0' unit='0'/>
 </disk>
 ...
​​";;RedHatEnterpriseLinux7/RHEL7-40483
920;;;;;;;;;8;" Set xxx_bytes_sec persistently
";​​;;RedHatEnterpriseLinux7/RHEL7-40483
920;;;;;;;;;9;"set write_bytes_sec 10M/s --config
 # virsh blkdeviotune rhel6u2 hda --write-bytes-sec 10000000 --config
 
 
 #virsh blkdeviotune rhel6u2 hda --config
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
​​";"#virsh blkdeviotune rhel6u2 hda --config
 total_bytes_sec: 0
 read_bytes_sec : 10000000
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :drive-ide0-0-0
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
​​";;RedHatEnterpriseLinux7/RHEL7-40483
920;;;;;;;;;10;"# virsh dumpxml rhel6u2 --inactive
 
​​";"...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw' cache='none'/>
 <source file='/var/lib/libvirt/images/rhel6u2'/>
 <target dev='hda' bus='ide'/>
 **** ** <iotune>**
 ** <write_bytes_sec>10000000</write_bytes_sec>**
 ** </iotune>**
 <alias name='ide0-0-0'/>
 <address type='drive' controller='0' bus='0' target='0' unit='0'/> </disk>";;RedHatEnterpriseLinux7/RHEL7-40483
920;;;;;;;;;11;"#reboot the guest, check the qemu command
 #ps -ef|grep rhel6u2
 
 
​​";"we could see the following vaule in qemu
 # ps -ef |grep rhel6u2
 qemu 10748 1 9 15:47 ? 00:00:00 /usr/libexec/qemu-kvm -name rhel6u2 -S -M pc-1.3 -enable-kvm -m 4001 -smp 2,sockets=2,cores=1,threads=1
 --- ,**bps_wr=10000000** ---";;RedHatEnterpriseLinux7/RHEL7-40483
920;;;;;;;;;12;login the guest check the guest's write rate;​​;;RedHatEnterpriseLinux7/RHEL7-40483
920;;;;;;;;;13;"set read_bytes_sec 20M/s --config
 
 # virsh blkdeviotune rhel6u2 hda --read-bytes-sec 2000000 --config
 
 
 # virsh blkdeviotune rhel6u2 hda --config
 
 
 
 #virsh dumpxml rhel6u2 --inactive
 
 
 #reboot the guest, check the qemu command
 #ps -ef|grep rhel6u2
 
 
 login the guest check the guest's read rate";​​;;RedHatEnterpriseLinux7/RHEL7-40483
920;;;;;;;;;14;"Set total_bytes_sec 30M/s --config
 # virsh blkdeviotune rhel6u2 hda --total-bytes-sec 30000000 --config
 
 
 
 
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40483
920;;;;;;;;;15;# virsh blkdeviotune rhel6u2 hda --config;"# virsh blkdeviotune rhel6u2 hda --config
 total_bytes_sec: 30000000
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 1024
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0";;RedHatEnterpriseLinux7/RHEL7-40483
920;;;;;;;;;16;"# virsh dumpxml rhel6u2 --inactive
 
 
 #reboot the guest, check the qemu command
 #ps -ef|grep rhel6u2
 
 
 login the guest ,both the write and read rate won't exceed 30M/s";​​;;RedHatEnterpriseLinux7/RHEL7-40483
921;RHEL7-40484;[blkdeviotune] [--xxx-bytes-sec-max] Set xxx max in bytes when guest is running;"For a running guest:
 1. Set --total-bytes-sec-max
 2. Set --write-bytes-sec-max
 3. Set --read-bytes-sec-max";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 17. set the \--total-bytes-sec-max to 10M
 
 17.1 #virsh blkdeviotune vm hdb --total-bytes-sec-max 10000000
 
 # virsh blkdeviotune vm hdb
 
​​";" 17.1 If total_bytes_sec is not set (as 0), the total_bytes_sec_max won't be set in qemu, but will exist in vm's xml
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
 
 Note: group name is set to drive-<alias name of disk> by default if it's not set
 
 <yalzhang>  test on libvirt-1.3.4-1, it will fail if set write-bytes-sec-max when write-bytes-sec not set.
 # virsh blkdeviotune rh7.2 vda --total-bytes-sec-max 10000000
 error: Unable to change block I/O throttle
 error: internal error: Unexpected error
 
 # virsh dumpxml rh7.2 | grep iotune
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-40484
921;;;;;;;;;2;"# virsh dumpxml vm | grep hdb -a6
​​";"<disk type='file' device='disk'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/a.img'/>
 <backingStore/>
 <target dev='hdb' bus='ide'/>
 <iotune>
 <total_bytes_sec_max>10000000</total_bytes_sec_max>
 </iotune>
 <alias name='ide0-0-1'/>
 <address type='drive' controller='0' bus='0' target='0' unit='1'/>
 </disk>";;RedHatEnterpriseLinux7/RHEL7-40484
921;;;;;;;;;3;"17.2 Following 17.1 set total_bytes_sec to any value other than 0
 
 # virsh blkdeviotune vm hdb --total-bytes-sec 1
 
 # virsh blkdeviotune vm hdb
 
 
 
​​";"17.2
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 1
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 10000000
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-40484
921;;;;;;;;;4;# virsh dumpxml vm | grep hdb -a7;"# virsh dumpxml vm | grep hdb -a7
 ...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/a.img'/>
 <backingStore/>
 <target dev='hdb' bus='ide'/>
 <iotune>
 <total_bytes_sec>1</total_bytes_sec>
 <total_bytes_sec_max>10000000</total_bytes_sec_max>
 </iotune>
 <alias name='ide0-0-1'/>
 <address type='drive' controller='0' bus='0' target='0' unit='1'/>
 </disk>";;RedHatEnterpriseLinux7/RHEL7-40484
921;;;;;;;;;5;"17.3 set the --write-bytes-sec-max/--read-bytes-sec-max will mutexly clear the --total-bytes-sec-max
 
 # virsh blkdeviotune vm hdb --write-bytes-sec-max 10000000
 
 # virsh blkdeviotune vm hdb";"17.3
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 1
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 10000000
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0";;RedHatEnterpriseLinux7/RHEL7-40484
921;;;;;;;;;6;"# virsh dumpxml vm | grep hdb -a7
​​";"...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/a.img'/>
 <backingStore/>
 <target dev='hdb' bus='ide'/>
 <iotune>
 <total_bytes_sec>1</total_bytes_sec>
 <write_bytes_sec_max>10000000</write_bytes_sec_max>
 </iotune>
 <alias name='ide0-0-1'/>
 <address type='drive' controller='0' bus='0' target='0' unit='1'/>
 </disk>";;RedHatEnterpriseLinux7/RHEL7-40484
921;;;;;;;;;7;"18. set the --write-bytes-sec-max to 10M
 
 
 18.1 #virsh blkdeviotune vm hdb --write-bytes-sec-max 10000000
 
 # virsh blkdeviotune vm hdb
 
 
 
​​";"18.1
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
 
​​";;RedHatEnterpriseLinux7/RHEL7-40484
921;;;;;;;;;8;"# virsh dumpxml vm | grep hdb -a7
 ...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/a.img'/>
 <backingStore/>
 <target dev='hdb' bus='ide'/>
 <iotune>
 <write_bytes_sec_max>10000000</write_bytes_sec_max>
 </iotune>
 <alias name='ide0-0-1'/>
 <address type='drive' controller='0' bus='0' target='0' unit='1'/>
 </disk>";​​;;RedHatEnterpriseLinux7/RHEL7-40484
921;;;;;;;;;9;"18.2 Following 18.1 set write_bytes_sec to any value other than 0
 
 # virsh blkdeviotune vm hdb --write-bytes-sec 1
 
 # virsh blkdeviotune vm hdb
 
 
 
​​";"18.2
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 1
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 10000000
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
​​";;RedHatEnterpriseLinux7/RHEL7-40484
921;;;;;;;;;10;"18.3 set the --total-bytes-sec-max/--read-bytes-sec-max will mutexly clear the --write-bytes-sec-max
 
 # virsh blkdeviotune vm hdb --total-bytes-sec-max 10000000
 
 # virsh blkdeviotune vm hdb";"18.3
 ]# virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 1
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 10000000
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0";;RedHatEnterpriseLinux7/RHEL7-40484
921;;;;;;;;;11;19. set the --read-bytes-sec-max to 10M;"19.1
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
​​";;RedHatEnterpriseLinux7/RHEL7-40484
921;;;;;;;;;12;"# virsh dumpxml vm | grep hdb -a7
 ...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/a.img'/>
 <backingStore/>
 <target dev='hdb' bus='ide'/>
 <iotune>
 <read_bytes_sec_max>10000000</read_bytes_sec_max>
 </iotune>
 <alias name='ide0-0-1'/>
 <address type='drive' controller='0' bus='0' target='0' unit='1'/>
 </disk>";​​;;RedHatEnterpriseLinux7/RHEL7-40484
921;;;;;;;;;13;"19.2
 # virsh blkdeviotune vm hdb";"19.2
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 1
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 10000000
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0";;RedHatEnterpriseLinux7/RHEL7-40484
921;;;;;;;;;14;"19.3
 # virsh blkdeviotune vm hdb";"19.3
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 1
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 10000000
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0";;RedHatEnterpriseLinux7/RHEL7-40484
922;RHEL7-40485;[blkdeviotune] [--xxx-iops-sec-max] Set xxx I/O ioperations when guest is running;"For a running guest:
 1. Set --total-iops-sec-max
 2. Set --write-iops-sec-max
 3. Set --read-iops-sec-max
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 20. set the \--total-iops-sec-max to 100
 20.1 #virsh blkdeviotune vm hdb --total-iops-sec-max 100
 # virsh blkdeviotune vm hdb
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
​​";" 20.1
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     : drive-ide0-0-1  
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
 
 Note: group name is set to driver-<alias name of disk> by default if it's not set
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-40485
922;;;;;;;;;2;"# virsh dumpxml vm | grep hdb -a7
 ...
 </disk>
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/a.img'/>
 <backingStore/>
 <target dev='hdb' bus='ide'/>
 <iotune>
 <total_iops_sec_max>100</total_iops_sec_max>
 </iotune>
 <alias name='ide0-0-1'/>
 <address type='drive' controller='0' bus='0' target='0' unit='1'/>
 </disk>";​​;;RedHatEnterpriseLinux7/RHEL7-40485
922;;;;;;;;;3;"20.2 Following 20.1 set total_iops_sec to any value other than 0
 # virsh blkdeviotune vm hdb --total-iops-sec 1
 # virsh blkdeviotune vm hdb
 
 
 
 
 
 
​​";"20.2
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 1
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 100
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     : drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
​​";;RedHatEnterpriseLinux7/RHEL7-40485
922;;;;;;;;;4;"20.3 set the --write-iops-sec-max/--read-iops-sec-max will mutexly clear the --total-iops-sec-max
 # virsh blkdeviotune vm hdb --write-iops-sec-max 100
 # virsh blkdeviotune vm hdb";"20.3
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 1
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 100
 size_iops_sec : 0
 group_name     : drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0";;RedHatEnterpriseLinux7/RHEL7-40485
922;;;;;;;;;5;"21. set the --read-iops-sec-max to 100
 21.1 #virsh blkdeviotune vm hdb --read-iops-sec-max 100
 # virsh blkdeviotune vm hdb
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
​​";"21.1
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0";;RedHatEnterpriseLinux7/RHEL7-40485
922;;;;;;;;;6;"# virsh dumpxml vm | grep hdb -a6
 ...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/a.img'/>
 <backingStore/>
 <target dev='hdb' bus='ide'/>
 <iotune>
 <read_iops_sec_max>100</read_iops_sec_max>
 </iotune>
 <alias name='ide0-0-1'/>
 <address type='drive' controller='0' bus='0' target='0' unit='1'/>
 </disk>";​​;;RedHatEnterpriseLinux7/RHEL7-40485
922;;;;;;;;;7;"21.2 Following 21.1 set read_iops_sec to any value other than 0
 # virsh blkdeviotune vm hdb --read-iops-sec 1
 # virsh blkdeviotune vm hdb
​​";"21.2
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 1
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 100
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0";;RedHatEnterpriseLinux7/RHEL7-40485
922;;;;;;;;;8;"21.3 set the --write-iops-sec-max/--total-iops-sec-max will mutexly clear the --read-iops-sec-max
 # virsh blkdeviotune vm hdb --write-iops-sec-max 100
 # virsh blkdeviotune vm hdb";"21.3
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 1
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 100
 size_iops_sec : 0
 group_name     :drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0";;RedHatEnterpriseLinux7/RHEL7-40485
922;;;;;;;;;9;"22. set the --write-iops-sec-max to 100
 22.1 #virsh blkdeviotune vm hdb --write-iops-sec-max 100
 # virsh blkdeviotune vm hdb
​​";"22.1
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
​​";;RedHatEnterpriseLinux7/RHEL7-40485
922;;;;;;;;;10;"# virsh dumpxml vm | grep hdb -a6
 ...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/a.img'/>
 <backingStore/>
 <target dev='hdb' bus='ide'/>
 <iotune>
 <write_iops_sec_max>100</write_iops_sec_max>
 </iotune>
 <alias name='ide0-0-1'/>
 <address type='drive' controller='0' bus='0' target='0' unit='1'/>
 </disk>";​​;;RedHatEnterpriseLinux7/RHEL7-40485
922;;;;;;;;;11;"22.2 Following 22.1 set write_iops_sec to any value other than 0
 # virsh blkdeviotune vm hdb --write-iops-sec 1
 # virsh blkdeviotune vm hdb
​​";"22.2
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 1
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 100
 size_iops_sec : 0
 group_name     :drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0";;RedHatEnterpriseLinux7/RHEL7-40485
922;;;;;;;;;12;"22.3 set the --read-iops-sec-max/--total-iops-sec-max will mutexly clear the --write-iops-sec-max
 # virsh blkdeviotune vm hdb --read-iops-sec-max 100
 # virsh blkdeviotune vm hdb";"22.3
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 1
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 100
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     :drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0";;RedHatEnterpriseLinux7/RHEL7-40485
923;RHEL7-40486;[blkdeviotune] [--size-iops-sec] Set I/O size in bytes when guest is running;"Set I/O size in bytes when guest is running
            
";Fangge Jin (fjin);High;Positive;Not Automated;;1;" 23. set the --size-iops-sec to 5
 
 23.1 
 # virsh blkdeviotune vm hdb --size-iops-sec 5
 
 #virsh blkdeviotune vm hdb
 
​​";" 23.1
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 group_name     : drive-drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-40486
923;;;;;;;;;2;"# virsh dumpxml vm| grep hdb -a6
 ...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/a.img'/>
 <backingStore/>
 <target dev='hdb' bus='ide'/>
 <iotune>
 <size_iops_sec>5</size_iops_sec>
 </iotune>
 <alias name='ide0-0-1'/>
 <address type='drive' controller='0' bus='0' target='0' unit='1'/>
 </disk>";​​;;RedHatEnterpriseLinux7/RHEL7-40486
923;;;;;;;;;3;"23.2 
 Following 23.1 set total_iops_sec/read_iops_sec/write_iops_sec to any value other than 0:
 
 # virsh blkdeviotune vm hdb --total-iops-sec 100
 
 # virsh blkdeviotune vm hdb";"23.2
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 100
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 10
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 5
 group_name     : drive-drive-ide0-0-1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0";;RedHatEnterpriseLinux7/RHEL7-40486
924;RHEL7-40488;[blkdeviotune] Test the relation between blkdev I/O rate limits and their maximum limits;Test the relation between blkdev I/O rate limits and their maximum limits;Fangge Jin (fjin);High;Positive;Automated;;1;" 24.
 when following xxx_xxx_max are not set.
 \--total-bytes-sec-max \--read-bytes-sec-max \--write-bytes-sec-max
 \--total-iops-sec-max \--read-iops-sec-max \--write-iops-sec-max
 setting following value will automaticallly set above value with rate 10:1,
 and the xxx_xxx_max value won't affect the vm's xml
 \--total-bytes-sec \--read-bytes-sec \--write-bytes-sec --total-iops-sec \--read-iops-sec \--write-iops-sec
 
 24.1 nothing is set by blkdeviotune
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 
 24.2. set the value of --total-bytes-sec --total-iops-sec
 # virsh blkdeviotune vm hdb --total-bytes-sec 1000 --total-iops-sec 100
 
 # virsh blkdeviotune vm hdb
 
​​";" 24.2
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 1000
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 100
 read_iops_sec : 0
 write_iops_sec : 0
 total_bytes_sec_max: 100
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 10
 read_iops_sec_max: 0
 write_iops_sec_max: 0
 size_iops_sec : 0
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-40488
924;;;;;;;;;2;"24.3. set the value of --read-bytes-sec --write-bytes-sec --read-iops-sec --write-iops-sec
 # virsh destroy vm; virsh start vm
 # virsh blkdeviotune vm hdb --read-bytes-sec 200 --write-bytes-sec 300 --read-iops-sec 20 --write-iops-sec 30
 # virsh blkdeviotune vm hdb";"24.3
 # virsh blkdeviotune vm hdb
 total_bytes_sec: 0
 read_bytes_sec : 200
 write_bytes_sec: 300
 total_iops_sec : 0
 read_iops_sec : 20
 write_iops_sec : 30
 total_bytes_sec_max: 0
 read_bytes_sec_max: 20
 write_bytes_sec_max: 30
 total_iops_sec_max: 0
 read_iops_sec_max: 2
 write_iops_sec_max: 3
 size_iops_sec : 0
 
​​";;RedHatEnterpriseLinux7/RHEL7-40488
924;;;;;;;;;3;"# virsh dumpxml vm | grep hdb -a12
 ...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/a.img'/>
 <backingStore/>
 <target dev='hdb' bus='ide'/>
 <iotune>
 <read_bytes_sec>200</read_bytes_sec>
 <write_bytes_sec>300</write_bytes_sec>
 <read_iops_sec>20</read_iops_sec>
 <write_iops_sec>30</write_iops_sec>
 </iotune>
 <alias name='ide0-0-1'/>
 <address type='drive' controller='0' bus='0' target='0' unit='1'/>
 </disk>";​​;;RedHatEnterpriseLinux7/RHEL7-40488
925;RHEL7-40490;[blkdeviotune] [negative] Check block dev io paramters for a non-existing domain;"1. Check blkdevio info for a non-existing domain
Refer to:
 Bug 969362 - The error info need further implement while check disk's block I/O throttling info for an non-existent domain - FIXED
";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" check disk's block I/O throttling info for an non-existent domain
 can get the expect error info
 
 # virsh blkdeviotune afasdfjls vda
 error: failed to get domain 'afasdfjls'
 error: Domain not found: no domain with matching name 'afasdfjls'";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40490
926;RHEL7-40491;Set read_bytes_sec/write_bytes_sec/total_bytes_sec together at the same time; ;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" Edit the guest'xml ,add the following content
 --
 -<iotune>
 <write_bytes_sec>1000</write_bytes_sec>
 <read_bytes_sec>2000</read_bytes_sec>
 <total_bytes_sec>3000</total_bytes_sec>
 </iotune>";" # virsh edit rhel72
 error: XML error: total and read/write bytes_sec cannot be set at the same time
 Failed. Try again? [y,n,f,?]:";Test Case;RedHatEnterpriseLinux7/RHEL7-40491
926;;;;;;;;;2;"Edit the guest'xml add the following
 --
 <iotune>
 <read_bytes_sec>2000</read_bytes_sec>
 <write_bytes_sec>1000</write_bytes_sec>
 <read_iops_sec>2000</read_iops_sec>
 <write_iops_sec>1000</write_iops_sec>
 </iotune>
 
 then start the guest";"# virsh blkdeviotune rhel72 vda --config
 total_bytes_sec: 0
 read_bytes_sec : 2000
 write_bytes_sec: 1000
 total_iops_sec : 0
 read_iops_sec : 2000
 write_iops_sec : 1000
 
 #ps aux|grep rhel72
 qemu 11614 94.3 0.0 4760504 29640 ? Sl 19:14 0:29 /usr/libexec/qemu-kvm -name rhel72 --
 -drive file=/var/lib/libvirt/images/rhel7_qcow2.img,if=none,id=drive-virtio-disk0,format=qcow2,cache=none**,bps_rd=2000,bps_wr=1000,iops_rd=2000,iops_wr=1000**";;RedHatEnterpriseLinux7/RHEL7-40491
927;RHEL7-40493;[blkiotune] [--weight] - Boundary testing;--weight is in range [100, 1000]. After kernel 2.6.39, the value could be in the range [10, 1000].;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" As the range of is"" --weight <number> IO Weight in range [10, 1000]"",try
 all the possible values to test,eg:
 
 #virsh start rhel6
 
 
 #virsh blkiotune rhel6 --weight 0
 
 
 #virsh blkiotune rhel6 --weight 1
 
 
 #virsh blkiotune rhel6 --weight 100
 
 
 #virsh blkiotune rhel6 --weight 1000
 
 
 #virsh blkiotune rhel6 --weight 12.3
 
 
 # virsh blkiotune rhel61 --weight 9
 
 # virsh blkiotune rhel7.2  --weight 10
 
 # virsh blkiotune rhel7.2  --weight 1001
 
 #  virsh blkiotune rhel7.2  --weight -1
​​";" 14.Check the output should be right.
 # virsh blkiotune rhel61 --weight 0
 error: Invalid value of 0 for I/O weight
 
 # virsh blkiotune rhel61 --weight 1
 error: Unable to change blkio parameters
 error: Invalid value '1' for 'blkio.weight': Invalid argument
 
 # virsh blkiotune rhel61 --weight 100
 
 # virsh blkiotune rhel61
 weight : 100
 
 # virsh blkiotune rhel61 --weight 1000
 
 # virsh blkiotune rhel61
 weight : 1000
 
 # virsh blkiotune rhel61 --weight 12.3
 error: Numeric value '12.3' for <weight> option is malformed or out of range
 
 # virsh blkiotune rhel7.2  --weight 9
 error: Unable to change blkio parameters
 error: Invalid value '9' for 'blkio.weight': Invalid argument
 
 # virsh blkiotune rhel7.2
 weight         : 10
 
 # virsh blkiotune rhel7.2  --weight 1001
 error: Unable to change blkio parameters
 error: Invalid value '1001' for 'blkio.weight': Invalid argument
 
 #  virsh blkiotune rhel7.2  --weight -1
 error: Invalid value of -1 for I/O weight
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-40493
928;RHEL7-40494;[blkiotune] [--device-weights] Set/get per-device IO weights;Set/get per-device IO weights;Fangge Jin (fjin);High;Positive;Not Automated;;1;" 15.
 15.1 #virsh start test
 15.2 # virsh blkiotune test --device-weights /dev/sda,400 --config
 15.3 #virsh destroy test
 15.4 #virsh start test
 15.5 # virsh blkiotune test
 \-----------------------------------------------------------------------------
 ---";" 15.
 15.5 # virsh blkiotune test
 weight : 1000
 device_weight : /dev/sda,400";Test Case;RedHatEnterpriseLinux7/RHEL7-40494
929;RHEL7-40495;[blkiotune] [--device-xxx-iops-sec] Set/get per-device read/write I/O limit per second;"1. Set/get --device-read-iops-sec
 2. Set/get --device-write-iops-sec
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 16.1 # virsh start r6
 
 16.2 # virsh blkiotune r6
 weight : 1000
 device_weight :
 device_read_iops_sec:
 device_write_iops_sec:
 device_read_bytes_sec:
 device_write_bytes_sec:
 
 
 
 16.3 # virsh blkiotune r6 --device-read-iops-sec /dev/sda,1234
 
 16.4 # virsh blkiotune r6
 weight : 1000
 device_weight :
 device_read_iops_sec: /dev/sda,1234
 device_write_iops_sec:
 device_read_bytes_sec:
 device_write_bytes_sec:
 
 
 16.5 # virsh blkiotune r6 --device-write-iops-sec /dev/sda,12345
 
 16.6# virsh blkiotune r6
 weight : 1000
 device_weight :
 device_read_iops_sec: /dev/sda,1234
 device_write_iops_sec: /dev/sda,12345
 device_read_bytes_sec:
 device_write_bytes_sec:";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40495
930;RHEL7-40496;[blkiotune] [--device-xxx-bytes-sec] Set/get per-device bytes read/wrote per second;"1. Set/get --device-read-bytes-sec
 2. Set/get --device-write-bytes-sec";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 16.7 # virsh blkiotune r6 --device-read-bytes-sec /dev/sda,123456
 16.8 # virsh blkiotune r6
 weight : 1000
 device_weight :
 device_read_iops_sec: /dev/sda,1234
 device_write_iops_sec: /dev/sda,12345
 device_read_bytes_sec: /dev/sda,123456
 device_write_bytes_sec:
 
 
 
 16.9 # virsh blkiotune r6 --device-write-bytes-sec /dev/sda,1234567
 16.10 # virsh blkiotune r6
 weight : 1000
 device_weight :
 device_read_iops_sec: /dev/sda,1234
 device_write_iops_sec: /dev/sda,12345
 device_read_bytes_sec: /dev/sda,123456
 device_write_bytes_sec: /dev/sda,1234567
 
 
 16.11# virsh blkiotune r6 --device-write-bytes-sec /dev/sda,0
 16.12 # virsh blkiotune r6
 weight : 1000
 device_weight :
 device_read_iops_sec: /dev/sda,1234
 device_write_iops_sec: /dev/sda,12345
 device_read_bytes_sec: /dev/sda,123456
 device_write_bytes_sec:";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40496
931;RHEL7-40497;[blockcopy] [--wait]  The command will block when --wait is specified.;"1. --wait:
     The command blocks until
     1) the mirroring phase begins
     2) or the optional timeout in seconds elapses (--wait --timeout)
     3) or SIGINT is sent (usually with ""Ctrl-C"")
";Fangge Jin (fjin);Medium;Positive;Automated;;1;"1. prepare a transient guest
 # virsh create rh7.2.xml
 Domain rh7.2 created from rh7.2.xml
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-40497
931;;;;;;;;;2;"Scenario 1: 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40497
931;;;;;;;;;3;"2. 
 # virsh blockcopy rh7.2 vda /tmp/bak --wait
 ^C
 Copy aborted";"2. the terminal will hang until SIGINT is sent (usually with ""Ctrl-C"")";;RedHatEnterpriseLinux7/RHEL7-40497
931;;;;;;;;;4;"Scenario 2:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40497
931;;;;;;;;;5;"3. # virsh blockcopy rh7.2 sdb /tmp/bak1 --wait
 
 Now in mirroring phase
 # 
​​";"3. the terminal hang until in mirroring phase
​​";;RedHatEnterpriseLinux7/RHEL7-40497
932;RHEL7-40498;[blockcopy] [--pivot] pivot over to the copy after copying phase completes and the job will end cleanly;pivot over to the copy after copying phase completes and the job will end cleanly;Fangge Jin (fjin);Medium;Positive;Automated;;1;" virsh # blockcopy test vda /var/lib/libvirt/images/bak --wait --pivot
 Successfully pivoted
 copying:
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw' cache='none'/>
 <source file='/var/lib/libvirt/images/test'>
 <seclabel relabel='no'/>
 </source>
 <mirror file='/var/lib/libvirt/images/bak' format='raw'/>
 <target dev='vda' bus='virtio'/>
 <alias name='virtio-disk0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/>
 </disk>
 Finished:
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw' cache='none'/>
 <source file='/var/lib/libvirt/images/bak'>
 <seclabel relabel='no'/>
 </source>
 <target dev='vda' bus='virtio'/>
 <alias name='virtio-disk0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/>
 </disk>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40498
933;RHEL7-40499;[blockcopy] [--finish] The jobs will end cleanly after copying phase completes when --finish is specified.;The jobs will end cleanly after copying phase completes when --finish is specified.;Fangge Jin (fjin);Medium;Positive;Automated;;1;" # virsh blockcopy test vda /var/lib/libvirt/images/bak --wait --verbose
 --finish
 Block Copy: [100 %]
 Successfully copied
 
 copying:
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw' cache='none'/>
 <source file='/var/lib/libvirt/images/test'>
 <seclabel relabel='no'/>
 </source>
 <mirror file='/var/lib/libvirt/images/bak' format='raw'/>
 <target dev='vda' bus='virtio'/>
 <alias name='virtio-disk0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/>
 </disk>
 
 finished:
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw' cache='none'/>
 <source file='/var/lib/libvirt/images/test'>
 <seclabel relabel='no'/>
 </source>
 <target dev='vda' bus='virtio'/>
 <alias name='virtio-disk0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/>
 </disk>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40499
934;RHEL7-40500;[blockcopy] [--xml] Use --xml to describe the destination file name;Use --xml to describe the destination file name;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 15. blockcopy with --xml
 15.1. prepare a xml file as follow
 #cat destdisk.xml
 <disk>
 <source file='/tmp/dest.img'/>
 </disk>
 15.2. start the block copy
 # virsh blockcopy vm hdb --xml destdisk.xml
 Block Copy started
 15.3. check the block job is in progress
 # virsh blockjob --info vm hdb
 Block Copy: [ 39 %]
 15.4. check the vm's xml
 # virsh dumpxml vm
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/a.img'/>
 <backingStore/>
 <mirror type='file' file='/tmp/dest.img' format='raw' job='copy'> <=== check the mirror info is correct
 <format type='raw'/>
 <source file='/tmp/dest.img'/>
 </mirror>
 <target dev='hdb' bus='ide'/>
 <alias name='ide0-0-1'/>
 <address type='drive' controller='0' bus='0' target='0' unit='1'/>
 </disk>
 15.5. abort the block job and use qcow2 as dest format in xml
 # virsh blockjob --abort vm hdb; rm -f /tmp/dest.img
 # cat destdisk_qcow2.xml
 <disk>
 <driver type='qcow2'/>
 <source file='/tmp/dest.img'/>
 </disk>
 15.6. start block copy
 # virsh blockcopy vm hdb --xml destdisk_qcow2.xml
 Block Copy started
 15.7. check the block job
 # virsh blockjob --info vm hdb
 Block Copy: [ 33 %]
 15.8. check the mirror info in vm's xml
 # virsh dumpxml vm
 ...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/a.img'/>
 <backingStore/>
 <mirror type='file' file='/tmp/dest.img' format='qcow2' job='copy' ready='yes'>
 <format type='qcow2'/>
 <source file='/tmp/dest.img'/>
 </mirror>
 <target dev='hdb' bus='ide'/>
 <alias name='ide0-0-1'/>
 <address type='drive' controller='0' bus='0' target='0' unit='1'/>
 </disk>
 ...
 15.9. check the copied img's info
 # qemu-img info /tmp/dest.img
 image: /tmp/dest.img
 file format: qcow2
 virtual size: 3.0G (3221225472 bytes)
 disk size: 3.6G
 cluster_size: 65536
 Format specific information:
 compat: 1.1
 lazy refcounts: false
 refcount bits: 16
 corrupt: false";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40500
935;RHEL7-40501;[blockcopy][--format] Specify the destination file format;"
Specify the destination file format
    
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 16. blockcopy with --format
 16.1. # virsh blockcopy vm hdb --dest /tmp/1.img --format qcow2
 Block Copy started
 
 16.2. the block copy is in progress
 # virsh blockjob --info vm hdb
 Block Copy: [ 25 %]
 
 16.3. check the copied image format info
 # qemu-img info /tmp/1
 image: /tmp/1
 file format: qcow2
 virtual size: 3.0G (3221225472 bytes)
 disk size: 880M
 cluster_size: 65536
 Format specific information:
 compat: 1.1
 lazy refcounts: false
 refcount bits: 16
 corrupt: false
 
 16.4. check the mirror info
 # virsh dumpxml vm
 ...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/a.img'/>
 <backingStore/>
 <mirror type='file' file='/tmp/1.img' format='qcow2' job='copy' ready='yes'>
 <format type='qcow2'/>
 <source file='/tmp/1.img'/>
 </mirror>
 <target dev='hdb' bus='ide'/>
 <alias name='ide0-0-1'/>
 <address type='drive' controller='0' bus='0' target='0' unit='1'/>
 </disk>
 ...";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40501
935;;;;;;;;;2;"7. set copy file format
 # virsh blockcopy test vda /var/lib/libvirt/images/bak --raw
 Block Copy started
 
 # virsh blockjob test vda
 Block Copy: [ 7 %]
 
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw' cache='none'/>
 <source file='/var/lib/libvirt/images/test'>
 <seclabel relabel='no'/>
 </source>
 <mirror file='/var/lib/libvirt/images/bak' format='raw'/>
 <target dev='vda' bus='virtio'/>
 <alias name='virtio-disk0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/>
 </disk>
 
 When finished:
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw' cache='none'/>
 <source file='/var/lib/libvirt/images/test'>
 <seclabel relabel='no'/>
 </source>
 <mirror type='file' file='/var/lib/libvirt/images/bak' format='raw' job='copy' ready='yes'/>
 <target dev='vda' bus='virtio'/>
 <alias name='virtio-disk0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/>
 </disk>";​​;;RedHatEnterpriseLinux7/RHEL7-40501
936;RHEL7-40504;[blockcopy] [bandwidth] Specify copying bandwidth limit;Bug 1328675 - virsh: blockpull: bad error on arg overflow: argument key 'speed' must not be negative;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Scenario 1: without --bytes, the scale defaults to MiB/s
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;2;"# virsh blockcopy test vda /var/lib/libvirt/images/bak
 error: unsupported configuration: external destination file for disk vda
 already exists and is not a block device: /var/lib/libvirt/images/bak
 
 
 **Stop the blockcopy job then do the following steps:**
 # virsh blockjob test vda --abort
 
 #rm -rf /var/lib/libvirt/images/bak";​​;;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;3;"# virsh blockcopy test vda /var/lib/libvirt/images/bak 1
 Block Copy started
 
 # virsh blockjob test vda
 Block Copy: [ 6 %] Bandwidth limit: 1 MB/s
 
 # virsh blockjob test vda
 Block Copy: [ 100 %] Bandwidth limit: 1 MB/s";​​;;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;4;"Scenario 2: with --bytes, the scale will be bytes/s
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;5;"2-1 positive integer
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;6;"a) 
 virsh # blockcopy rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 /tmp/blockcopy.img --bytes 4294967295
 Block Copy started
 
 virsh # blockjob rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 
 Block Copy: [  3 %]    Bandwidth limit: 4294967295 bytes/s (4.000 GiB/s)
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;7;"# virsh blockjob rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 --abort
 
 # rm /tmp/blockcopy.img
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;8;"b)
 virsh # blockcopy rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 /tmp/blockcopy.img --bytes 1
 Block Copy started
 
 virsh # blockjob rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 
 Block Copy: [  0 %]    Bandwidth limit: 1 bytes/s (1.000 B/s)";​​;;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;9;"# virsh blockjob rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 --abort
 
 # rm /tmp/blockcopy.img";​​;;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;10;"c)
 Note: 9223372036854775807 is the maximum value of signed long long
 
 virsh # blockcopy rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 /tmp/blockcopy.img --bytes 9223372036854775807
 Block Copy started
 
 virsh # blockjob rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 
 Block Copy: [  4 %]    Bandwidth limit: 9223372036854775807 bytes/s (8.000 EiB/s)";​​;;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;11;"# virsh blockjob rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 --abort
 
 # rm /tmp/blockcopy.img";​​;;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;12;"d)
 virsh # blockcopy rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 /tmp/blockcopy.img --bytes 9223372036854775808
 error: internal error: argument key 'speed' must not be negative
​​";Bug 1328675 - virsh: blockpull: bad error on arg overflow: argument key 'speed' must not be negative;;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;13;"e)
 virsh # blockcopy rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 /tmp/blockcopy.img --bytes 922337203685477580800000
 error: Scaled numeric value '922337203685477580800000' for <--bandwidth> option is malformed or out of range
 
 virsh # blockjob rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 
 No current block job for /var/lib/libvirt/images/rhel6.6-GUI.1460973087
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;14;2-2 negative integer;​​;;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;15;"a)
 virsh # blockcopy rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 /tmp/blockcopy.img --bytes -1
 error: internal error: argument key 'speed' must not be negative
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;16;"b)
 virsh # blockcopy rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 /tmp/blockcopy.img --bytes -1000
 error: internal error: argument key 'speed' must not be negative";​​;;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;17;"c)
 virsh # blockcopy rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 /tmp/blockcopy.img --bytes -1000000000000000000000000
 error: Scaled numeric value '-1000000000000000000000000' for <--bandwidth> option is malformed or out of range
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;18;"2-3 zero
 equivalent to don't set the bandwidth at all
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40504
936;;;;;;;;;19;"virsh # blockcopy rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 /tmp/blockcopy.img --bytes 0
 Block Copy started
 
 virsh # blockjob rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 
 Block Copy: [  4 %]
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40504
937;RHEL7-40505;[blockcopy] [--reuse-external] Use an existing file as destination;Use an existing file as destination;Fangge Jin (fjin);Medium;Positive;Automated;;1;" 5.blockcopy with exist image
 5.1 You should use the existing file which **generated by blockcopy command**, and **can not** use qemu-img to create a file.
 
 # virsh blockcopy test vda /var/lib/libvirt/images/bak --reuse-external
 Block Copy started
 
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw' cache='none'/>
 <source file='/var/lib/libvirt/images/test'>
 <seclabel relabel='no'/>
 </source>
 <mirror file='/var/lib/libvirt/images/bak'/>
 <target dev='vda' bus='virtio'/>
 <alias name='virtio-disk0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/>
 </disk>
 
 # virsh blockjob test vda
 Block Copy: [100 %]
 
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw' cache='none'/>
 <source file='/var/lib/libvirt/images/test'>
 <seclabel relabel='no'/>
 </source>
 <mirror file='/var/lib/libvirt/images/bak' ready='yes'/>
 <target dev='vda' bus='virtio'/>
 <alias name='virtio-disk0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/>
 </disk>";"After step 5.2.2, do not show below error:
 5.2.2 Do block copy again
 # virsh blockcopy test vda --wait --pivot --verbose --reuse-external
 /tmp/test.img
 error: block copy still active: disk 'vda' already in active block copy job
 After step 5.2.3, no active job listed.";Test Case;RedHatEnterpriseLinux7/RHEL7-40505
937;;;;;;;;;2;"2. reuse-external with qcow2 format image.
 # qemu-img create -f qcow2 /tmp/test.qcow2 1G
 Formatting '/tmp/test.qcow2', fmt=qcow2 size=1073741824 encryption=off cluster_size=65536 lazy_refcounts=off refcount_bits=16
 # virsh blockcopy rh7.2  sdb /tmp/test.qcow2 --reuse-external
 Block Copy started
 # virsh blockjob rh7.2 sdb
 Block Copy: [100 %]
 # virsh dumpxml rh7.2
 ...
     <disk type='block' device='lun'>
       <driver name='qemu' type='raw' cache='none' io='native'/>
       <source dev='/dev/sdb'/>
       <backingStore/>
       <mirror type='file' file='/tmp/test.qcow2' ** format='qcow2' ** job='copy' ready='yes'>
         <format type='qcow2'/>
         <source file='/tmp/test.qcow2'/>
       </mirror>
       <target dev='sdb' bus='scsi'/>
       <alias name='scsi0-0-0-1'/>
       <address type='drive' controller='0' bus='0' target='0' unit='1'/>
     </disk>
​​";"use external qcow2 format image
​​";;RedHatEnterpriseLinux7/RHEL7-40505
937;;;;;;;;;3;"3. # virsh blockjob rh7.2 sdb --abort
 # qemu-img create -f raw /tmp/test.raw 1G
 Formatting '/tmp/test.raw', fmt=raw size=1073741824
 # virsh blockcopy rh7.2  sdb /tmp/test.raw --reuse-external
 Block Copy started
 # virsh blockjob rh7.2 sdb
 Block Copy: [100 %]
 # virsh dumpxml rh7.2
     <disk type='block' device='lun'>
       <driver name='qemu' type='raw' cache='none' io='native'/>
       <source dev='/dev/sdb'/>
       <backingStore/>
       <mirror type='file' file='/tmp/test.raw' ** format='raw' ** job='copy' ready='yes'>
     **    <format type='raw'/> **
         <source file='/tmp/test.raw'/>
       </mirror>
       <target dev='sdb' bus='scsi'/>
       <alias name='scsi0-0-0-1'/>
       <address type='drive' controller='0' bus='0' target='0' unit='1'/>
     </disk>
​​";"use external raw format image
​​";;RedHatEnterpriseLinux7/RHEL7-40505
938;RHEL7-40506;[blockcopy] [ --shallow] Copy the top disk only;Copy the top disk only;Fangge Jin (fjin);Medium;Positive;Automated;;1;" 6.blockcopy with exist image and with --shallow
 # qemu-img create -f qcow2 /tmp/top.img 1G
 Formatting '/tmp/top.img', fmt=qcow2 size=1073741824 encryption=off cluster_size=65536 lazy_refcounts=off refcount_bits=16
 
 # virsh blockcopy rh7.2 vda /tmp/top.img --reuse-external --wait --verbose --shallow
 Block Copy: [100 %]
 Now in mirroring phase
 
 # qemu-img info /tmp/top.img
 image: /tmp/top.img
 file format: qcow2
 virtual size: 1.0G (1073741824 bytes)
 disk size: 2.2M
 cluster_size: 65536
 Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false
​​";"--shallow will copy the top disk only
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-40506
938;;;;;;;;;2;"blockcopy without --shallow.
 # qemu-img create -f qcow2 /store/no.img 10G
 Formatting '/tmp/no.img', fmt=qcow2 size=3221225472 encryption=off cluster_size=65536 lazy_refcounts=off refcount_bits=16
 
 # virsh blockcopy rh7.2 vda --reuse-external /store/no.img --wait --verbose
 Block Copy: [100 %]
 Now in mirroring phase
 # qemu-img info /store/no.img
 image: /store/no.img
 file format: qcow2
 virtual size: 10G (10737418240 bytes)
 disk size: 17G
 cluster_size: 65536
 Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false
 
​​";"without --shallow, will copy all including all the back chain
​​";;RedHatEnterpriseLinux7/RHEL7-40506
939;RHEL7-40507;[blockcopy] [ --blockdev] Copy a block dev;Copy a block dev;Fangge Jin (fjin);Medium;Positive;Automated;;1;" 17. blockcopy with --blockdev
 17.1. prepare a usb disk on host
 # fdisk -l | grep sdc -A10
 Disk /dev/sdc: 8004 MB, 8004304896 bytes, 15633408 sectors
 Units = sectors of 1 * 512 = 512 bytes
 Sector size (logical/physical): 512 bytes / 512 bytes
 I/O size (minimum/optimal): 512 bytes / 512 bytes
 
 17.2. # virsh blockcopy vm hdb --dest /dev/sdc --format qcow2 --blockdev
 Block Copy started
 
 17.3. check the mirror info in vm's xml
 # virsh dumpxml vm
 ...
 <disk type='file' device='disk'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/a.img'/>
 <backingStore/>
 <mirror type='block' job='copy' ready='yes'>
 <format type='qcow2'/>
 <source dev='/dev/sdc'/>
 </mirror>
 <target dev='hdb' bus='ide'/>
 <alias name='ide0-0-1'/>
 <address type='drive' controller='0' bus='0' target='0' unit='1'/>
 </disk>
 ...";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40507
940;RHEL7-40508;[blockcopy] [granularity] Specify the granularity that will be copied when a dirty region is detected;"Specify the granularity that will be copied when a dirty region is detected
            
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 18. blockcopy with --granularity
 18. 1. # virsh blockcopy vm hdb /tmp/1 --granularity 100
 error: invalid argument: granularity must be power of 2
 
 18. 2. # virsh blockcopy vm hdb /tmp/1 --granularity 128
 error: internal error: unable to execute QEMU command 'drive-mirror':
 Parameter 'granularity' expects a value in range [512B, 64MB]
 
 18. 3. # virsh blockcopy vm hdb /tmp/1 --granularity 1024
 Block Copy started";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40508
941;RHEL7-40509;[blockcopy] [buf-size] Specify how much data           can be simultaneously in-flight during the copy;Specify how much data can be simultaneously in-flight during the copy;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 19. blockcopy with --buf-size
 #virsh blockcopy vm hdb --dest /dev/sdc --format qcow2 --blockdev --buf-size
 10000
 Block Copy started";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40509
942;RHEL7-40510;[blockcopy] Test options combinations - inclusive options;"Test options combinations - inclusive options
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 14. blockcopy with --wait --verbose --finish --bandwidth
 #virsh blockcopy test vda /var/lib/libvirt/images/bak --wait --verbose
 --finish --bandwidth 1111111111111111
 error: numerical overflow: bandwidth must be less than 8796093022207
 
 
 #virsh blockjob test vda --bandwidth 111111111111111111
 error: numerical overflow: bandwidth must be less than 8796093022207
 
 
 #virsh blockcopy test vda /var/lib/libvirt/images/bak --wait --verbose
 --finish --bandwidth 8796093022207
 Block Copy: [100 %]
 Successfully copied
 
 delete the existing copy file
 # rm -rf /var/lib/libvirt/images/bak";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40510
942;;;;;;;;;2;"test the blockjob with bandwidth.
 # virsh blockcopy rh7.2 vda /store/blk1 --wait --verbose   --bandwidth 8796093022207
 Block Copy: [ 22 %]
 
 open another terminal
 # virsh blockjob rh7.2 vda
 Block Copy: [ 13 %]    Bandwidth limit: 9223372036853727232 bytes/s (8.000 EiB/s)
 
 # virsh blockjob rh7.2 vda --bandwidth 1024
 
 # virsh blockjob rh7.2 vda
 Block Copy: [ 16 %]    Bandwidth limit: 1073741824 bytes/s (1.000 GiB/s)
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40510
943;RHEL7-40511;[blockpull] [--wait] The command will block when --wait is specified.;"1. --wait:
     The command blocks until
     1) the operation completes
     2) or cancel the operation if the optional timeout in seconds elapses
     3) or SIGINT is sent (usually with ""Ctrl-C"")";Fangge Jin (fjin);Medium;Positive;Automated;;1;"# virsh blockpull rhel7.2 vda --base /var/lib/libvirt/images/rhel7.2.s1 --wait
 
 Pull complete
 
 after finished, check backing file:
 
 # qemu-img info rhel7.2.s4
 image: rhel7.2.s4
 file format: qcow2
 virtual size: 9.0G (9663676416 bytes)
 disk size: 964K
 cluster_size: 65536
 backing file: /var/lib/libvirt/images/rhel7.2.s1
 backing file format: qcow2
 Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false
​​";login to guest, check guest works well and all the files can be found;Test Case;RedHatEnterpriseLinux7/RHEL7-40511
944;RHEL7-40512;[blockcopy] [--verbose --wait] print periodic status updates in the terminal during blockcopy;print periodic status updates in the terminal during blockcopy;Fangge Jin (fjin);High;Positive;Automated;;1;" 1. test --wait with --verbose
 # virsh blockcopy test vda /var/lib/libvirt/images/bak --wait --verbose
 Block Copy: [ 18 %]";"Using --verbose along with --wait will produce periodic status updates.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-40512
944;;;;;;;;;2;"2. test --wait --verbose --granularity
 before qemu-kvm-rhev-2.6.0-13.el7.x86_64
 # virsh blockcopy vm1 vda /tmp/copy --granularity 4096 --wait --verbose
 Block Copy: [  0 %]
 Copy failed
 
 after qemu-kvm-rhev-2.6.0-13.el7.x86_64
 # virsh blockcopy vm1-q35-pxb vda /tmp/copy --granularity 4096 --wait --verbose
 Block Copy: [100 %]
 Now in mirroring phase
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40512
945;RHEL7-40513;[blockcopy] [--timeout --wait] The command blocks and exits after a period of time if not completed;The command blocks and exits after a period of time if not completed;Fangge Jin (fjin);Medium;Positive;Automated;;1;"Scenario 1: a small timeout value
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40513
945;;;;;;;;;2;" 12. blockcopy with --timeout --wait
 #virsh blockcopy test vda /var/lib/libvirt/images/bak --wait --timeout 1
 
 Copy aborted";​​;;RedHatEnterpriseLinux7/RHEL7-40513
945;;;;;;;;;3;# rm -rf /var/lib/libvirt/images/bak;​​;;RedHatEnterpriseLinux7/RHEL7-40513
945;;;;;;;;;4;"Scenario 2: a huge timeout value
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40513
945;;;;;;;;;5;"#virsh blockcopy test vda /var/lib/libvirt/images/bak --wait --verbose
 --timeout 100000
 Block Copy: [100 %]
 Now in mirroring phase";​​;;RedHatEnterpriseLinux7/RHEL7-40513
945;;;;;;;;;6;"Scenario 3: invalid timeout value
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40513
945;;;;;;;;;7;"# virsh blockcopy test vda /var/lib/libvirt/images/bak --wait --timeout /
 error: Numeric value '/' for <timeout> option is malformed or out of range";​​;;RedHatEnterpriseLinux7/RHEL7-40513
946;RHEL7-40514;[blockcopy] [ --async --wait] The command returns control to the user as fast as possible If job cancellation is triggered by timeout or by --finish;"
The command returns control to the user as fast as possible If job cancellation is triggered by timeout or by --finish";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 13. blockcopy with --async --wait
 virsh # blockcopy test vda /var/lib/libvirt/images/bak --async --wait
 Now in mirroring phase
 
 # rm -rf /var/lib/libvirt/images/bak";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40514
947;RHEL7-40515;[blockpull] [--verbose --wait]  print periodic status updates in the terminal during blockpull;print periodic status updates in the terminal during blockpull;Fangge Jin (fjin);Medium;Positive;Automated;;1;" 6:--verbose
 # virsh blockpull rhel6 vda --base /var/lib/libvirt/images/kvm-
 rhel7.0-x86_64-qcow2v3.s1 --wait --verbose
 Block Pull: [100 %]
 Pull complete
 after finished, check backing file:
 # qemu-img info /var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s4
 image: /var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s4
 file format: qcow2
 virtual size: 9.8G (10485760000 bytes)
 disk size: 3.9M
 cluster_size: 65536
 **backing file: /var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s1**
 backing file format: qcow2
 Format specific information:
 compat: 1.1
 lazy refcounts: false";login to guest, check guest works well and all the files can be found;Test Case;RedHatEnterpriseLinux7/RHEL7-40515
948;RHEL7-40516;[blockpull] [--timeout --wait] The command blocks and exits after a period of time if job not completed;"1: timeout before job completes
 2: job completes before timeout";Fangge Jin (fjin);Medium;Positive;Automated;;1;" Scenario 1: timeout before job completes
 # virsh blockpull rhel6 vda --base /var/lib/libvirt/images/kvm-
 rhel7.0-x86_64-qcow2v3.s1 --wait --verbose --timeout 1
 Block Pull: [ 70 %]
 Pull aborted
 
 
 verify backing file **not** changed.
 # qemu-img info /var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s4
 image: /var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s4
 file format: qcow2
 virtual size: 9.8G (10485760000 bytes)
 disk size: 1.3M
 cluster_size: 65536
 **backing file: /var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s3**
 backing file format: qcow2
 Format specific information:
 compat: 1.1
 lazy refcounts: false";login to guest, check guest works well and all the files can be found;Test Case;RedHatEnterpriseLinux7/RHEL7-40516
948;;;;;;;;;2;"Scenario 2: job completes before timeout
 
 # virsh blockpull rhel6 vda --base /var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s1 --wait --verbose --timeout 1000
 Block Pull: [100 %]
 Pull complete
 
 
 # qemu-img info /var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s4
 image: /var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s4
 file format: qcow2
 virtual size: 9.8G (10485760000 bytes)
 disk size: 3.9M
 cluster_size: 65536
 **backing file: /var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s1**
 backing file format: qcow2
 Format specific information:
 compat: 1.1
 lazy refcounts: false";login to guest, check guest works well and all the files can be found;;RedHatEnterpriseLinux7/RHEL7-40516
949;RHEL7-40517;[blockpull] [ --async --wait] The command returns control to the user as fast as possible If job cancellation is triggered by timeout or by --finish;"The command returns control to the user as fast as possible If job cancellation is triggered by timeout or by --finish
";Fangge Jin (fjin);Medium;Positive;Automated;;1;" # virsh blockpull rhel6 vda --base /var/lib/libvirt/images/kvm-
 rhel7.0-x86_64-qcow2v3.s1 --wait --async
 Pull complete
 
 
 # qemu-img info /var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s4
 image: /var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s4
 file format: qcow2
 virtual size: 9.8G (10485760000 bytes)
 disk size: 3.9M
 cluster_size: 65536
 **backing file: /var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s1**
 backing file format: qcow2
 Format specific information:
 compat: 1.1
 lazy refcounts: false";login to guest, check guest works well and all the files can be found;Test Case;RedHatEnterpriseLinux7/RHEL7-40517
950;RHEL7-40518;[blockpull] [bandwidth] Specify copying bandwidth limit ;Specify copying bandwidth limit in MiB/s;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Scenario 1: without --bytes
 the scale defaults to MiB/s
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40518
950;;;;;;;;;2;"# virsh blockpull rhel6 vda --base /var/lib/libvirt/images/kvm-
 rhel7.0-x86_64-qcow2v3.s1 --bandwidth 100000
 Block Pull started
 
 # virsh blockjob rhel6 vda
 Block Pull: [ 94 %] Bandwidth limit: 100000 MiB/s";login to guest, check guest works well and all the files can be found;;RedHatEnterpriseLinux7/RHEL7-40518
950;;;;;;;;;3;"Scenario 2: with --bytes
 the scale will be bytes/s
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40518
950;;;;;;;;;4;"2-1 positive integer
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40518
950;;;;;;;;;5;"a)
 virsh # blockpull rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 --bytes 4294967295
 Block Pull started
 
 virsh # blockjob rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087
 Block Pull: [ 12 %]    Bandwidth limit: 4294967295 bytes/s (4.000 GiB/s)";​​;;RedHatEnterpriseLinux7/RHEL7-40518
950;;;;;;;;;6;"b)
 virsh # blockpull rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 --bytes 1
 Block Pull started
 
 virsh # blockjob rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087
 Block Pull: [ 32 %]    Bandwidth limit: 1 bytes/s (1.000 B/s)";​​;;RedHatEnterpriseLinux7/RHEL7-40518
950;;;;;;;;;7;"c)
 Note: 9223372036854775807 is the maximum value of signed long long
 
 virsh # blockpull rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 --bytes 9223372036854775807
 Block Pull started
 
 virsh # blockjob rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 
 Block Pull: [ 38 %]    Bandwidth limit: 9223372036854775807 bytes/s (8.000 EiB/s)";​​;;RedHatEnterpriseLinux7/RHEL7-40518
950;;;;;;;;;8;"d)
 virsh # blockpull rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 --bytes 9223372036854775808
 error: internal error: argument key 'speed' must not be negative";​​;;RedHatEnterpriseLinux7/RHEL7-40518
950;;;;;;;;;9;"e)
 virsh # blockpull rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 --bytes 922337203685477580800000
 error: Scaled numeric value '922337203685477580800000' for <--bandwidth> option is malformed or out of range
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40518
950;;;;;;;;;10;"2-2 negative integer
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40518
950;;;;;;;;;11;"a)
 virsh # blockpull rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1461033778 --bytes -1
 error: internal error: argument key 'speed' must not be negative";​​;;RedHatEnterpriseLinux7/RHEL7-40518
950;;;;;;;;;12;"b)
 virsh # blockpull rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1461033778 --bytes -1000
 error: internal error: argument key 'speed' must not be negative";​​;;RedHatEnterpriseLinux7/RHEL7-40518
950;;;;;;;;;13;"c)
 virsh # blockpull rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1461033778 --bytes -10000000000000000000000000000
 error: Scaled numeric value '-10000000000000000000000000000' for <--bandwidth> option is malformed or out of range
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40518
950;;;;;;;;;14;"2-3 zero
 equivalent to don't set bandwidth
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40518
950;;;;;;;;;15;"virsh # blockpull rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1461033778 --bytes 0
 Block Pull started
 
 virsh # blockjob rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1461033778
 Block Pull: [ 15 %]
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40518
951;RHEL7-40519;[blockpull][--base] Specify  the new backing file;"
Specify the new backing file
            
";Fangge Jin (fjin);Medium;Positive;Automated;;1;" 4. --base
 # virsh blockpull rhel6 vda --base /var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s1
 Block Pull started
 
 after finished, check backing file:
 
 # qemu-img info /var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s4
 image: /var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s4
 file format: qcow2
 virtual size: 9.8G (10485760000 bytes)
 disk size: 3.9M
 cluster_size: 65536
 **backing file: /var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s1**
 backing file format: qcow2
 Format specific information:
 compat: 1.1
 lazy refcounts: false";login to guest, check guest works well and all the files can be found;Test Case;RedHatEnterpriseLinux7/RHEL7-40519
952;RHEL7-40520;[blockcopy] [negative] Test invalid arguments;Test invalid arguments;Fangge Jin (fjin);Medium;Negative;Not Automated;;1; Scenario 1.Invalid format string;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40520
952;;;;;;;;;2;"# virsh blockcopy vm hdb --dest /tmp/1.img --format fda
 error: unsupported configuration: unknown driver format value 'fda'";​​;;RedHatEnterpriseLinux7/RHEL7-40520
952;;;;;;;;;3;"Scenario 2. empty arguments value
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40520
952;;;;;;;;;4;"# virsh blockcopy test --dest ' ' vda
 Block Copy started
 
 # virsh blockcopy test --dest '' vda
 error: Failed to get option 'dest': Option argument is empty
 
 # virsh blockcopy test --dest /var/lib/libvirt/images/bbk --path ''
 error: Failed to get option 'path': Option argument is empty";​​;;RedHatEnterpriseLinux7/RHEL7-40520
953;RHEL7-40521;[blockcopy]Test options combinations - exclusive options;"1. --format --xml
 2. --dest --xml";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" # virsh blockcopy vm hdb --xml destdisk.xml.1 --format qcow2
 error: Options --format and --xml are mutually exclusive
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40521
953;;;;;;;;;2;"# virsh blockcopy vm hdb --xml destdisk.xml.1 --dest /tmp/1.img
 error: Options --dest and --xml are mutually exclusive";​​;;RedHatEnterpriseLinux7/RHEL7-40521
954;RHEL7-40522;[blockpull] [--keep-relative] keep the backing chain names relative when blockpulling(not supported??);"
keep the backing chain names relative when blockpulling
    
";Fangge Jin (fjin);Medium;Positive;Automated;;1;" # virsh blockpull rhel6 vda 1000 /var/lib/libvirt/images/kvm-
 rhel7.0-x86_64-qcow2v3.s1 --wait --verbose --keep-relative
 error: Requested operation is not valid: can't keep relative backing
 relationship";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40522
955;RHEL7-40523;[blockcommit] [--active] Trigger a two-phase active commit;""" When top is omitted or specified as the active image, it is also possible to specify --active to trigger a two-phase active commit.
           In the first phase, top is copied into base and the job can only be canceled, with top still containing data not yet in base. In
           the second phase, top and base remain identical until a call to blockjob with the --abort flag (keeping top as the active image
           that tracks changes from that point in time) or the --pivot flag (making base the new active image and invalidating top).""";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" # virsh blockcommit rhel6 vda --active
 Block Commit started
 
 # virsh blockjob rhel6vda
 Active Block Commit: [100 %]
 
 # virsh dumpxml qe-con | grep disk -a16
 <disk type='file' device='disk'>
 <driver type='qcow2' cache='none'/>
 <source file='/var/lib/libvirt/images/qe-con.s4'/>
 <backingStore type='file' index='1'>
 <format type='qcow2'/>
 <source file='/var/lib/libvirt/images/qe-con.s3'/>
 <backingStore type='file' index='2'>
 <format type='qcow2'/>
 <source file='/var/lib/libvirt/images/qe-con.s2'/>
 <backingStore type='file' index='3'>
 <format type='qcow2'/>
 <source file='/var/lib/libvirt/images/qe-con.s1'/>
 <backingStore type='file' index='4'>
 <format type='raw'/>
 <source file='/var/lib/libvirt/images/qe-con.img'/>
 <backingStore/>
 </backingStore>
 </backingStore>
 </backingStore>
 </backingStore>
 **<mirror type='file' job='active-commit' ready='yes'>**
 ** <format type='raw'/>**
 ** <source file='/var/lib/libvirt/images/qe-con.img'/>**
 ** </mirror>**
 <target dev='vda' bus='virtio'/>
 <alias name='virtio-disk0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
 </disk>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40523
955;;;;;;;;;2;# virsh blockjob qe-con vda --abort;"verify the cmd return immediately,and job started.
 login to guest with source file=var/lib/libvirt/images/qe-con.img (base image)
 and check all the files s1 s2 s3 s4 can be found, guest should work well";;RedHatEnterpriseLinux7/RHEL7-40523
956;RHEL7-40524;[blockcommit] [--active --wait] Trigger a two-phase active commit and make the command block until the job enters the second phase;Trigger a two-phase active commit and make the command block until the job enters the second phase;Fangge Jin (fjin);Medium;Positive;Automated;;1;"# virsh blockcommit rhel6 vda --active --wait
 Now in synchronized phase
 
 # virsh dumpxml qe-con | grep disk -a16
 <disk type='file' device='disk'>
 <driver type='qcow2' cache='none'/>
 <source file='/var/lib/libvirt/images/qe-con.s4'/>
 <backingStore type='file' index='1'>
 <format type='qcow2'/>
 <source file='/var/lib/libvirt/images/qe-con.s3'/>
 <backingStore type='file' index='2'>
 <format type='qcow2'/>
 <source file='/var/lib/libvirt/images/qe-con.s2'/>
 <backingStore type='file' index='3'>
 <format type='qcow2'/>
 <source file='/var/lib/libvirt/images/qe-con.s1'/>
 <backingStore type='file' index='4'>
 <format type='raw'/>
 <source file='/var/lib/libvirt/images/qe-con.img'/>
 <backingStore/>
 </backingStore>
 </backingStore>
 </backingStore>
 </backingStore>
 **<mirror type='file' job='active-commit' ready='yes'>**
 ** <format type='raw'/>**
 ** <source file='/var/lib/libvirt/images/qe-con.img'/>**
 ** </mirror>**
 <target dev='vda' bus='virtio'/>
 <alias name='virtio-disk0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
 </disk> ";verify the cmd wait for job to complete;Test Case;RedHatEnterpriseLinux7/RHEL7-40524
957;RHEL7-40525;[blockcommit][--verbose --wait] print periodic status updates in the terminal during blockcommit;print periodic status updates in the terminal during blockcommit;Fangge Jin (fjin);Medium;Positive;Automated;;1;" # virsh blockcommit rhel6 vda --active --verbose --wait
 Block Commit: [100 %]
 Now in synchronized phase
 # virsh dumpxml qe-con | grep disk -a16
 <disk type='file' device='disk'>
 <driver type='qcow2' cache='none'/>
 <source file='/var/lib/libvirt/images/qe-con.s4'/>
 <backingStore type='file' index='1'>
 <format type='qcow2'/>
 <source file='/var/lib/libvirt/images/qe-con.s3'/>
 <backingStore type='file' index='2'>
 <format type='qcow2'/>
 <source file='/var/lib/libvirt/images/qe-con.s2'/>
 <backingStore type='file' index='3'>
 <format type='qcow2'/>
 <source file='/var/lib/libvirt/images/qe-con.s1'/>
 <backingStore type='file' index='4'>
 <format type='raw'/>
 <source file='/var/lib/libvirt/images/qe-con.img'/>
 <backingStore/>
 </backingStore>
 </backingStore>
 </backingStore>
 </backingStore>
 **<mirror type='file' job='active-commit' ready='yes'>**
 ** <format type='raw'/>**
 ** <source file='/var/lib/libvirt/images/qe-con.img'/>**
 ** </mirror>**
 <target dev='vda' bus='virtio'/>
 <alias name='virtio-disk0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
 </disk>
 
​​";verify the cmd display the progress;Test Case;RedHatEnterpriseLinux7/RHEL7-40525
958;RHEL7-40526;[blockcommit][--pivot] Make base the new active image and invalidating top after the first phase completes;"--piovt = blockcommit --wait --active + blockjob --pivot
";Fangge Jin (fjin);Medium;Positive;Automated;;1;"#virsh blockcommit rhel6 vda --pivot
 Successfully pivoted ";"verify dumpxml like below, pivot success.
 <disk type='file' device='disk'>
 <driver name='qemu' type='qcow2' cache='none'/>
 ** <source file='/var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.img'/>**
 <target dev='vda' bus='virtio'/>
 <alias name='virtio-disk0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>
 </disk>
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-40526
958;;;;;;;;;2;log into guest and check all of files s1 s2 s3 s4 can be found.;​​;;RedHatEnterpriseLinux7/RHEL7-40526
959;RHEL7-40527;[blockcommit][--keep-overlay] Abort the job after the first phase completes;--pivot= blockcommit --wait --active + blockjob --abort;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1.  # virsh blockcommit rhel7.2 vda --keep-overlay
 Commit complete, overlay image kept
 
 2. #virsh dumpxml rhel7.2
 .....
  <disk type='file' device='disk'>
       <driver name='qemu' type='qcow2'/>
       <source file='/var/lib/libvirt/images/rhel7.2.s4'/>
       <backingStore type='file' index='1'>
         <format type='qcow2'/>
         <source file='/var/lib/libvirt/images/rhel7.2.s3'/>
         <backingStore type='file' index='2'>
           <format type='qcow2'/>
           <source file='/var/lib/libvirt/images/rhel7.2.s2'/>
           <backingStore type='file' index='3'>
             <format type='qcow2'/>
             <source file='/var/lib/libvirt/images/rhel7.2.s1'/>
             <backingStore type='file' index='4'>
               <format type='qcow2'/>
               <source file='/var/lib/libvirt/images/rhel7.2.qcow2'/>
               <backingStore/>
             </backingStore>
           </backingStore>
         </backingStore>
       </backingStore>
       <target dev='vda' bus='virtio'/>
       <alias name='virtio-disk0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
     </disk>
​​";"using --keep-overlay is shorthand for combining --active --wait with an automatic blockjob --abort
 no <mirror> element after blockcommit";Test Case;RedHatEnterpriseLinux7/RHEL7-40527
959;;;;;;;;;2;"3. start a guest with /var/lib/libvirt/images/rhel7.2.qcow2, all the files exists.
 # virsh destroy rhel7.2
 Domain rhel7.2 destroyed
 # virsh create rhel7.2.xml
 Domain rhel7.2 created from rhel7.2.xml
 # virsh dumpxm rhel7.2
   <disk type='file' device='disk'>
       <driver name='qemu' type='qcow2'/>
       <source file='/var/lib/libvirt/images/rhel7.2.qcow2'/>
       <target dev='vda' bus='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
     </disk>
 
 log in the guest and check all the files exists.
​​";3. start a guest with /var/lib/libvirt/images/rhel7.2.qcow2, all the files exists.;;RedHatEnterpriseLinux7/RHEL7-40527
960;RHEL7-40528;[blockcommit][--async] Return control to the user as fast as possible when job cancellation is triggered;"Return control to the user as fast as possible when job cancellation is triggered
            
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" # virsh blockcommit rhel6 vda --async --active
 error: --async requires at least one of --timeout, --wait, --pivot, or --keep-overlay
 
 
 # virsh blockcommit rhel6 vda --async --wait --active
 Now in synchronized phase";verify blockcommit don't wait for cancel to finish;Test Case;RedHatEnterpriseLinux7/RHEL7-40528
961;RHEL7-40529;[blockcommit][--bandwidth] Specify copying bandwidth limit;Specify copying bandwidth limit;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Scenario 1: without --bytes
 The default scale will be MiB/s 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40529
961;;;;;;;;;2;"#virsh blockcommit rhel6 vda --async --wait --active --bandwidth
 1111111111111111
 error: numerical overflow: bandwidth must be less than 8796093022207";​​;;RedHatEnterpriseLinux7/RHEL7-40529
961;;;;;;;;;3;"# virsh blockcommit rhel6 vda --active --bandwidth 1
 Block Commit started
 
 # virsh blockjob rhel6 vda
 Active Block Commit: [100 %] Bandwidth limit: 1 MiB/s";​​;;RedHatEnterpriseLinux7/RHEL7-40529
961;;;;;;;;;4;"
 # virsh blockcommit rhel6 vda --active --bandwidth 100000
 Block Commit started
 
 # virsh blockjob rhel6 vda
 Active Block Commit: [ 99 %] Bandwidth limit: 100000 MiB/s";​​;;RedHatEnterpriseLinux7/RHEL7-40529
961;;;;;;;;;5;"Scenario 2: with --bytes
 The scale will be bytes/s
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40529
961;;;;;;;;;6;"2-1 positive integar
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40529
961;;;;;;;;;7;"virsh # blockcommit rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460970549 --bytes 4294967295 --active
 Active Block Commit started
 
 virsh # blockjob rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460970549
 Active Block Commit: [100 %]    Bandwidth limit: 4294967295 bytes/s (4.000 GiB/s)";​​;;RedHatEnterpriseLinux7/RHEL7-40529
961;;;;;;;;;8;"virsh # blockcommit rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 --bytes 1 --active
 Active Block Commit started
 
 virsh # blockjob rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087
 Active Block Commit: [ 11 %]    Bandwidth limit: 1 bytes/s (1.000 B/s)
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40529
961;;;;;;;;;9;"Note: 9223372036854775807 is the maximum value of signed long long
 
 virsh # blockcommit rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 --bytes 9223372036854775807 --active
 Active Block Commit started
 
 virsh # blockjob rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087
 Active Block Commit: [100 %]    Bandwidth limit: 9223372036854775807 bytes/s (8.000 EiB/s)
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40529
961;;;;;;;;;10;"virsh #  blockcommit rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 --bytes 9223372036854775808 --active
 error: internal error: argument key 'speed' must not be negative";​​;;RedHatEnterpriseLinux7/RHEL7-40529
961;;;;;;;;;11;"virsh #  blockcommit rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 --bytes 922337203685477580800000000000 --active
 error: Scaled numeric value '922337203685477580800000000000' for <--bandwidth> option is malformed or out of range
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40529
961;;;;;;;;;12;"2-2 negative integar
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40529
961;;;;;;;;;13;"virsh # blockcommit rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460970549 --bytes -1 --active
 error: internal error: argument key 'speed' must not be negative
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40529
961;;;;;;;;;14;"virsh # blockcommit rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460970549 --bytes -10000 --active
 error: internal error: argument key 'speed' must not be negative
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40529
961;;;;;;;;;15;"virsh # blockcommit rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460970549 --bytes -1000000000000000000000000000000000000 --active
 error: Scaled numeric value '-1000000000000000000000000000000000000' for <--bandwidth> option is malformed or out of range
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40529
961;;;;;;;;;16;"2-3 zero 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40529
961;;;;;;;;;17;"virsh # blockcommit rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 --bytes 0 --active
 Active Block Commit started
 
 virsh # blockjob rhel7.2-1030 /var/lib/libvirt/images/rhel6.6-GUI.1460973087 
 Active Block Commit: [100 %]
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40529
962;RHEL7-40530;[blockcommit][--shallow] Specify the immediate backing file of the resulting top image to be committed;Specify the immediate backing file of the resulting top image to be committed;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" # virsh blockcommit rhel6 vda --shallow --active
 Block Commit started
 
 
 #virsh dumpxml rhel6
 ......
 <disk type='file' device='disk'>
 <driver name='qemu' type='qcow2' cache='none'/>
 <source file='/var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s4'/>
 <mirror type='file' job='active-commit' ready='yes'>
 <format type='qcow2'/>
 <source file='/var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s3'/>
 </mirror>
 <target dev='vda' bus='virtio'/>
 <alias name='virtio-disk0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>
 </disk>
 .......";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40530
962;;;;;;;;;2;# virsh blockjob qe-con vda --pivot;"verify dumpxml like below, pivot success.
 <disk type='file' device='disk'>
 <driver name='qemu' type='qcow2' cache='none'/>
 ** <source file='/var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s3'/>**
 <target dev='vda' bus='virtio'/>
 <alias name='virtio-disk0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>
 </disk>
​​";;RedHatEnterpriseLinux7/RHEL7-40530
962;;;;;;;;;3;log into guest and check all of files s1 s2 s3 s4 can be found.;​​;;RedHatEnterpriseLinux7/RHEL7-40530
963;RHEL7-40531;[blockcommit][--delete] Remove these invalidated files at the successful completion of the commit operation;Remove these invalidated files at the successful completion of the commit operation;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" **NOTE**: still have bug
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40531
964;RHEL7-40532;[blockcommit] [--timeout --wait] The command blocks and exits after a period of time if job not completed;The command blocks and exits after a period of time if job not completed;Fangge Jin (fjin);Medium;Positive;Automated;;1;" # virsh blockcommit rhel6 vda --timeout /
 error: invalid timeout
 # virsh blockcommit rhel6 vda --active --wait --pivot --timeout 1
 Commit aborted
 **NOTE**: still have bug
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40532
965;RHEL7-40533;[blockcommit][--keep-relative] Keep the backing file paths relative;"
Keep the backing file paths relative";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" # virsh blockcommit test6 hda --active --keep-relative
 Block Commit started";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40533
966;RHEL7-40534;[blockcommit] Test options combinations;Test options combinations;Fangge Jin (fjin);Medium;Positive;Automated;;1;"--top --base --active --verbose --pivot
  
 #virsh blockcommit rhel6 vda --top /var/lib/libvirt/images/test1.s4 --base
 /var/lib/libvirt/images/test1.s3 --active --verbose --pivot
 Block Commit: [100 %]
 Successfully pivoted
 #virsh dumpxml test1 | grep disk -a6
 <disk type='file' device='disk'>
 <driver name='qemu' type='qcow2' cache='none'/>
 <source file='/var/lib/libvirt/images/test1.s3'/>
 <target dev='hda' bus='ide'/>
 <alias name='ide0-0-0'/>
 <address type='drive' controller='0' bus='0' target='0' unit='0'/>
 </disk>";" login guest and check all the files s1 s2 s3 s4 can be found and guest works
 well";Test Case;RedHatEnterpriseLinux7/RHEL7-40534
966;;;;;;;;;2;"--shallow --active --wait --verbose --keep-overlay
 #virsh blockcommit rhel6 vda --top /var/lib/libvirt/images/test1.s4 --shallow
 --active --wait --verbose --keep-overlay
 Block Commit: [100 %]
 Commit complete
 #virsh dumpxml rhel6
 .....
 <disk type='file' device='disk'>
 <driver name='qemu' type='qcow2' cache='none'/>
 <source file='/var/lib/libvirt/images/kvm-rhel7.0-x86_64-qcow2v3.s4'/>
 <target dev='vda' bus='virtio'/>
 <alias name='virtio-disk0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>
 </disk>";"Login to guest with source file = kvm-rhel7.0-x86_64-qcow2v3.s3 and check all
 the files s1 s2 s3 s4 can be found";;RedHatEnterpriseLinux7/RHEL7-40534
967;RHEL7-40579;[blockresize] [--size] Resize block device of a running domain with different size unit;1.Test --size with different unit: GB, GiB, B;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 1. # virsh blockresize rhel62 --path /var/lib/libvirt/images/rhel62.img --size 15GB
 Block device '/var/lib/libvirt/images/rhel62.img' is resized

 2. # qemu-img info /var/lib/libvirt/images/rhel62.img
 image: /var/lib/libvirt/images/rhel62.img
 file format: raw
 virtual size:14G (15000000000 bytes)
 disk size: 935M";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40579
967;;;;;;;;;2;" 3. # virsh blockresize rhel62 --path /var/lib/libvirt/images/rhel62.img --size 15GiB
 Block device '/var/lib/libvirt/images/rhel62.img' is resized
 
 4. # qemu-img info /var/lib/libvirt/images/rhel62.img
 image: /var/lib/libvirt/images/rhel62.imgest
 file format: raw
 virtual size: 15.0G (16106127360 bytes)
 disk size: 864M
 
 5. Log into the guest, check the disk size:
 # cat /proc/partitions
 
 # fdisk -l
 (Refer to a kernel bug:
 Bug 693940 - Disk which we have a busy partition on can not show the new value after enlarge - FIXED)";"major minor #blocks name
 252 0 **16106127360** vda
 252 1 512000 vda1
 252 2 7875584 vda2
 253 0 6856704 dm-0
 253 1 1015808 dm-1";;RedHatEnterpriseLinux7/RHEL7-40579
967;;;;;;;;;3;"# virsh blockresize rhel62 --path /var/lib/libvirt/images/rhel62.img --size 1024B
 Block device '/var/lib/libvirt/images/rhel62.img' is resized
 
 # qemu-img info /var/lib/libvirt/images/rhel62.img
 image: /var/lib/libvirt/images/rhel62.img
 file format: raw
 virtual size: 1.0K (1024 bytes)
 disk size: 4.0K
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40579
968;RHEL7-40596;[blockjob] Test options combination - inclusive options;"1.--raw --bytes
2.--pivot --abort";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"--raw --bytes
  # virsh blockcopy qe-con vda /tmp/1.img --bandwidth 1
 
 # virsh blockjob --raw qe-con vda --bytes
 type=Block Copy
 bandwidth=1048576
 cur=48627712
 end=3221225472";  the bandwidth is listed in B/s;Test Case;RedHatEnterpriseLinux7/RHEL7-40596
968;;;;;;;;;2;"
 # virsh blockcommit qe-con vda --wait --verbose --active
 Block Commit: [100 %]
 Now in synchronized phase
 
 # virsh blockjob qe-con vda --pivot --abort
 
  # virsh dumpxml qe-con
 <disk type='file' device='disk'>
 <driver type='raw' cache='none'/>
    <source file='/var/lib/libvirt/images/qe-con.img'/>
 <backingStore/>
 <target dev='vda' bus='virtio'/>
 <alias name='virtio-disk0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
 </disk>";"
​​";;RedHatEnterpriseLinux7/RHEL7-40596
969;RHEL7-40597;[blockjob] Test options combination - exclusive options;"1.--info --bandwidth
2.--abort --bandwidth
3.--async --bandwidth
4.--pivot --bandwidth
5.--raw --abort
";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" # virsh blockjob qe-con vda --info --bandwidth 10
 error: Options --info and --bandwidth are mutually exclusive
 
 # virsh blockjob qe-con vda --abort --bandwidth 10  -
 # echo $?
 0
 
 # virsh blockjob rh7.2 vda --info --abort
 error: Options --info and --abort are mutually exclusive
 
   
 # virsh blockjob qe-con vda --async --bandwidth 10 
 # echo $?
 0
 
 # virsh blockjob --raw vm hdb --abort
 error: Options --raw and --abort are mutually exclusive";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40597
970;RHEL7-40598;[blockjob] [negative] Test invalid arguments;1. bandwidth out of range;Fangge Jin (fjin);Medium;Negative;Automated;;1;"  # virsh blockjob r6 vda --bandwidth 87960930222071
 error: numerical overflow: bandwidth must be less than 8796093022207";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40598
971;RHEL7-40602;[blockresize] [negative] Resize a non-existing block device;"Resize a non-existing block device
";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" # virsh domblklist rhel7.2
 Target     Source
 ------------------------------------------------
 vda        /var/lib/libvirt/images/rhel7-2.1452511757
 vdb        /tmp/test3.qcow2
 
 
 # virsh blockresize rhel7.2 sda 2221225
 error: Failed to resize block device 'sda'
 error: invalid argument: invalid path: sda
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40602
972;RHEL7-40603;Resize a block size  to a value that's not a multiple of 1024;;Fangge Jin (fjin);Medium;Positive;Automated;;1;" # virsh blockresize rhel62 --path /var/lib/libvirt/images/rhel62.img --size 900B
 Block device '/var/lib/libvirt/images/rhel62.img' is resized
 
 # qemu-img info /var/lib/libvirt/images/rhel62.img
 image: /var/lib/libvirt/images/rhel62.img
 file format: raw
 virtual size: 512 (512 bytes)
 disk size: 4.0K
 
 # ll /var/lib/libvirt/images/rhel62.img -h
 -rw-------. 1 qemu qemu 900 Mar 19 11:11 /var/lib/libvirt/images/rhel62.img
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40603
972;;;;;;;;;2;" # virsh blockresize rhel62 --path /var/lib/libvirt/images/rhel62.img --size 600B
 Block device '/var/lib/libvirt/images/rhel62.img' is resized
 
 # qemu-img info /var/lib/libvirt/images/rhel62.img
 image: /var/lib/libvirt/images/rhel62.img
 file format: raw
 virtual size: 512 (512 bytes)
 disk size: 4.0K
 
 # ll /var/lib/libvirt/images/rhel62.img -h
 -rw-------. 1 qemu qemu 600 Mar 19 11:09 /var/lib/libvirt/images/rhel62.img";​​;;RedHatEnterpriseLinux7/RHEL7-40603
973;RHEL7-40610;[console] - connect to a remote guest console via ssh;"1.ssh -t
2.ssh withou -t";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" [ssh without -t ]:
 
 On host B:
 # ssh <host A's IP> virsh console r
 root@10.66.85.217's password:
 error: Cannot run interactive console without a controlling TTY";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40610
973;;;;;;;;;2;" [ssh with -t ]:
 
 On host B:
 # ssh  -t <host A's IP> virsh console r
 root@10.66.85.217's password:
 Connected to domain r
 Escape character is ^]
 [ OK ]
 Setting hostname virtlab-66-84-201.englab.nay.redhat.com: [ OK ]
 Setting up Logical Volume Management: 2 logical volume(s) in volume group
 ""vg_virtlab6684201"" now active
 [ OK ]
 Checking filesystems
 Checking all file systems.";"Successful connection to a guest via virtual console and
 serial.";;RedHatEnterpriseLinux7/RHEL7-40610
974;RHEL7-40612;[domdisplay] - provides a URI for spice with ssl;"1. Without passwd
2.include passwd
Bug 842272 - include-passwd option can't worked when using domdisplay.";Fangge Jin (fjin);Medium;Positive;Automated;;1;" virsh # domdisplay guest
 spice://localhost?port=5900&tls-port=5907
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40612
974;;;;;;;;;2;"virsh # domdisplay guest --include-password
 spice://localhost?port=5900&tls-port=5907&password=redhat";​​;;RedHatEnterpriseLinux7/RHEL7-40612
975;RHEL7-40614;[schedinfo] [--weight] [-cap] [negative] Set --weight / --cap for QEMU hypervisor;"1. Set --weitht/--cap for QEMU hypervisor( including readonly mode), virsh will print proper error message
Bug 810078 - Nice to add an warning message about ""virsh schedinfo <domain> --cap 65535"" when use virsh connect to KVM hypervisor.";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" [qemu]
 1. Issue command
 # virsh -c qemu+ssh://$qemuhost_IP/system

 2. Issue command
 virsh # schedinfo a --cap 1234
 Scheduler : posix
 error: invalid scheduler option: cap

 3. Issue command
 virsh # schedinfo a --weight 222
 Scheduler : posix
 error: invalid scheduler option: weight";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40614
975;;;;;;;;;2;"in readonly mode,
 # virsh -c qemu+ssh://10.66.83.203/system --readonly
 Welcome to virsh, the virtualization interactive terminal.
 Type: 'help' for help with commands
 'quit' to quit
 virsh > schedinfo a --cap 11
 root@10.66.83.203's password:
 Scheduler : posix
 error: invalid scheduler option: cap
 virsh > schedinfo a --weight 22
 Scheduler : posix
 error: invalid scheduler option: weight";​​;;RedHatEnterpriseLinux7/RHEL7-40614
976;RHEL7-40615;[domxml-to-native] [spice tls] - Convert domain XML that includes spice tlsPort to native config;"
Refer to:
Bug 957077 - Convert guest domain XML config to a native guest configuration format occur an unknown error.";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"
 # echo '<?xml version=""1.0""?>
 <domain type=""kvm"">
 <name>tls-only</name>
 <memory>32768</memory>
 <os>
 <type arch=""x86_64"" machine=""pc"">hvm</type>
 </os>
 <devices>
 <graphics type=""spice"" tlsPort=""5800"" passwd=""123"" >
 <listen type=""address"" address=""::"" />
 </graphics>
 <video>
 <model type=""qxl"" vram=""32768"" heads=""1""/>
 </video>
 </devices>
 </domain>' | virsh domxml-to-native qemu-argv /dev/stdin
 LC_ALL=C PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin QEMU_AUDIO_DRV=spice /usr/libexec/qemu-kvm -name tls-only -S -machine pc,accel=kvm,usb=off -m 32 -smp 1,sockets=1,cores=1,threads=1 -uuid 40d127e3-8f1b-46bc-b221-c73040a5ca89 -no-user-config -nodefaults -chardev socket,id=charmonitor,path=/var/lib/libvirt/qemu/tls-only.monitor,server,nowait -mon chardev=charmonitor,id=monitor,mode=control -rtc base=utc -no-shutdown -no-acpi -device piix3-usb-uhci,id=usb,bus=pci.0,addr=0x1.0x2 -spice tls-port=5800,addr=::,x509-dir=/etc/pki/libvirt-spice,seamless-migration=on -vga qxl -global qxl-vga.ram_size=67108864 -global qxl-vga.vram_size=33554432 -device virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x3";make sure the domxml-to-native command works well, no error occured.;Test Case;RedHatEnterpriseLinux7/RHEL7-40615
977;RHEL7-40621;[desc] [--edit] set domain's desc or title by opening an editor;set domain's desc or title by opening an editor;Fangge Jin (fjin);Medium;Positive;Automated;;1;"  # virsh desc rhel6 --edit
 For example,edit ""It's the description for vm rhel6"" to ""It's the description for vm rhel6 - edit""
 
 Domain description updated successfully";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40621
977;;;;;;;;;2;"# virsh desc rhel6 --live
 It's the description for vm rhel6 - edit";​​;;RedHatEnterpriseLinux7/RHEL7-40621
978;RHEL7-40622;[desc] Check libvirtd memory leak when setting description for a running without a description;"Check libvirtd memory leak when setting description for a running without a description
            
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 1. prepare a running guest rhel6 without description
 <domain type='kvm' id='6'>
 <name>rhel6</name>
 <uuid>4f2e1779-7040-702c-efd0-380e87f73a5d</uuid>
 <memory>1048576</memory>
 <currentMemory>1048576</currentMemory>
 <vcpu>1</vcpu>
 ...snip...";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-40622
978;;;;;;;;;2; # valgrind -v --leak-check=full virsh desc rhel6;"  No description for domain: rhel6
 ...snip...
 ==10520== LEAK SUMMARY:
 ==10520== definitely lost: 0 bytes in 0 blocks
 ==10520== indirectly lost: 0 bytes in 0 blocks
 ==10520== possibly lost: 0 bytes in 0 blocks
 ==10520== still reachable: 127,140 bytes in 1,344 blocks
 ==10520== suppressed: 0 bytes in 0 blocks
​​";;RedHatEnterpriseLinux7/RHEL7-40622
979;RHEL7-40760;[dumpxml] [--migratable] - Get XML suitable for migrations;"--migratable provide XML suitable for migrations. It can request an XML that is suitable for migrations, 
 i.e., compatible with older libvirt releases and possibly amended with internal run-time options. 
 This option may automatically enable other options (--update-cpu, --security-info, ...) as necessary.";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" There three types confiration need to check
 Refer to:
 Bug 1230492 - RHEL7.2 Libvirt Feature: migration - test plan review

";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40760
979;;;;;;;;;2;"type 1:
 1. Edit guest with cpu host-model, and also add 'invtsc' flag as require.
 But migrate with --migratable XML failed with invtsc flag,

 ...
 <cpu mode='host-model'>
 <model fallback='allow'/>
 <feature policy='require' name='invtsc'/>
 </cpu>
 ...
 
​​";"1.# virsh dumpxml vm1 --migratable
 ... 
 <cpu mode='host-model' match='exact'>
 <model fallback='allow'>SandyBridge</model>
 <vendor>Intel</vendor> 
 <feature policy='require' name='erms'/> 
 <feature policy='require' name='smep'/> 
 <feature policy='require' name='fsgsbase'/> 
 <feature policy='require' name='rdrand'/> 
 <feature policy='require' name='f16c'/> 
 <feature policy='require' name='osxsave'/> 
 <feature policy='require' name='pcid'/>
 <feature policy='require' name='pdcm'/> 
 <feature policy='require' name='xtpr'/>
 <feature policy='require' name='tm2'/> 
 <feature policy='require' name='est'/> 
 <feature policy='require' name='smx'/> 
 <feature policy='require' name='vmx'/>
 <feature policy='require' name='ds_cpl'/> 
 <feature policy='require' name='monitor'/> 
 <feature policy='require' name='dtes64'/>
 <feature policy='require' name='pbe'/> 
 <feature policy='require' name='tm'/> 
 <feature policy='require' name='ht'/>
 <feature policy='require' name='ss'/> 
 <feature policy='require' name='acpi'/> 
 <feature policy='require' name='ds'/> 
 <feature policy='require' name='vme'/>
 <feature policy='require' name='invtsc'/> 
 </cpu> 
 
 # virsh migrate vm1 --live qemu+ssh://10.66.4.208/system --verbose 
 \--xml /tmp/vm1.xml --unsafe
 root@10.66.4.208's password: error: Requested operation is not valid:
 domain has CPU feature: invtsc 
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-40760
979;;;;;;;;;3;"type2:
 
 2. Edit guest with hostdev interface device, 
 migrate with --migratable XML failed with error, is this work as expected? 
 # virsh edit r71
 ... 
 <interface type='hostdev' managed='yes'> 
 <mac address='52:54:00:f1:8f:18'/> 
 <source> 
 <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x5'/> </source> 
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/> </interface>
 ...";"2.
 # virsh dumpxml r71 --migratable > /tmp/r71.xml
 ... 
 <interface type='hostdev' managed='yes'> 
 <mac address='52:54:00:f1:8f:18'/> 
 <driver name='vfio'/>
 <source> 
 <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x5'/> </source> 
 <alias name='hostdev0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/> </interface>
 ... 
 # virsh migrate r71 --live qemu+ssh://10.66.7.206/system 
 \--verbose --xml /tmp/r71.xml
 root@10.66.7.206's password: error: Requested operation is not valid: 
 domain has assigned non-USB host devices";;RedHatEnterpriseLinux7/RHEL7-40760
979;;;;;;;;;4;"type3:
 3. Do snapshot for guest, migrate with --migratable XML also fail 
 # virsh snapshot-list vm1 
 Name Creation Time State 
 ------------------------------------------------------------ 
 s1 2015-06-30 11:26:35 +0800 disk-snapshot
​​";"
 3. # virsh dumpxml vm1 --migratable
 ... 
 <disk type='file' device='disk'> 
 <driver name='qemu' type='qcow2'/> 
 <source file='/mnt/wzhang/rhel7.0-3.s1'> 
 <seclabel model='selinux' labelskip='yes'/> 
 </source> 
 <backingStore type='file' index='1'> 
 <format type='qcow2'/>
 <source file='/mnt/wzhang/rhel7.0-3.qcow2'/>
 <backingStore/> 
 </backingStore>
 <target dev='hda' bus='ide'/>
 <alias name='ide0-0-0'/>
 <address type='drive' controller='0' bus='0' target='0' unit='0'/> 
 </disk>
 ... 
 # virsh migrate vm1 --live qemu+ssh://10.66.4.208/system 
 \--verbose --xml /tmp/vm1s.xml
 root@10.66.4.208's password: error: Requested operation is not valid: 
 cannot migrate domain with 1 snapshots";;RedHatEnterpriseLinux7/RHEL7-40760
980;RHEL7-40761;[dumpxml] [--update-cpu] - Update guest CPU according to host CPU;"since RHEL7.4(patch: https://www.redhat.com/archives/libvir-list/2016-August/msg00697.html )--update-cpu takes effect on two conditions:
 1)  CPUs with VIR_CPU_MODE_CUSTOM and optional features or VIR_CPU_MATCH_MINIMUM
 2) CPUs with VIR_CPU_MODE_HOST_MODEL
 cpu/cpu.c
/**
 * virCPUUpdate:
 *
 * @arch: CPU architecture
 * @guest: guest CPU definition to be updated
 * @host: host CPU definition
 *
 * Updates @guest CPU definition according to @host CPU. This is required to
 * support guest CPU definitions specified relatively to host CPU, such as
 * CPUs with VIR_CPU_MODE_CUSTOM and optional features or
 * VIR_CPU_MATCH_MINIMUM, or CPUs with VIR_CPU_MODE_HOST_MODEL.
 * When the guest CPU was not specified relatively, the function does nothing
 * and returns success.
 *
 * Returns 0 on success, -1 on error.
 */

";Fangge Jin (fjin);Medium;Positive;Automated;;1;" # virsh dumpxml --update-cpu b
 You could assign a old cpu mode type for guest for host, or with default value
 you maybe could not get the differ.";" output:
 <domain type='kvm' id='14'>
 ......
 <cpu mode='custom' match=**'exact'>**
 <model fallback='allow'>SandyBridge</model>
 <vendor>Intel</vendor>
 <topology sockets='1' cores='2' threads='1'/>
 ** <feature policy='require' name='xtpr'/>**
 ** <feature policy='disable' name='tm2'/>**
 ** <feature policy='force' name='est'/>**
 ** <feature policy='require' name='ds'/>**
 ** <feature policy='disable' name='ia64'/>**
 ** <feature policy='require' name='osxsave'/>**
 ** <feature policy='require' name='pcid'/>**
 ** <feature policy='require' name='pdcm'/>**
 ** <feature policy='require' name='smx'/>**
 ** <feature policy='require' name='vmx'/>**
 ** <feature policy='require' name='ds_cpl'/>**
 ** <feature policy='require' name='monitor'/>**
 ** <feature policy='require' name='dtes64'/>**
 ** <feature policy='require' name='pbe'/>**
 ** <feature policy='require' name='tm'/>**
 ** <feature policy='require' name='ht'/>**
 ** <feature policy='require' name='ss'/>**
 ** <feature policy='require' name='acpi'/>**
 ** <feature policy='require' name='vme'/>**
 </cpu>
 ......
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-40761
981;RHEL7-40762;[dumpxml] [--security-info] Include security sensitive information in XML dump;Include security sensitive information in XML dump;Fangge Jin (fjin);Medium;Positive;Automated;;1;" # virsh dumpxml --security-info b
 To see the differ, you could set a password in display part of virt-manager";" 
 <domain type='kvm' id='14'>
 ......
 <graphics type='vnc' port='5900' autoport='yes' listen='127.0.0.1'** passwd='redhat'>**
 <listen type='address' address='127.0.0.1'/>
 </graphics>
 ......";Test Case;RedHatEnterpriseLinux7/RHEL7-40762
982;RHEL7-40763;[edit] [--skip-validate] skip validation of the XML against the schema when editing;skip validation of the XML against the schema when editing;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 5.
 5.1 Edit guest with --skip-validate
 #virsh edit $guest --skip-validate
 
 try to modify anything, change attribute options, like change
 from <vcpu placement='auto'>1</vcpu> to
 <vcpu placement='auto'>aabb</vcpu>
 
 5.2 Edit guest without --skip-validate";" 5.1 validate skipped and disabled
 # virsh edit vm2 --skip-validate
 error: XML error: maximum vcpus must be an integer
 Failed. Try again? [y,n,i,f,?]:
 
 5.2 validate enabled
 # virsh edit vm2
 error: XML document failed to validate against schema: Unable to validate doc
 against /usr/share/libvirt/schemas/domain.rng
 Extra element vcpu in interleave
 Invalid sequence in interleave
 Element domain failed to validate content
 Failed. Try again? [y,n,i,f,?]:";Test Case;RedHatEnterpriseLinux7/RHEL7-40763
983;RHEL7-40764;[edit] [negative] edit xml with a big vcpu number;edit xml with a big vcpu number;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" 4.1. Prepare a shutdown guest
 # virsh list --all
 Id Name State
 ----------------------------------------------------
 - test shut off
 
 Have in guest
 <vcpu placement='auto'>3</vcpu>
 
 4.2. Check
 #virsh start test
 #virsh destroy test
 
 4.3. Edit guest
 # virsh edit test
 <vcpu placement='auto'>10000000000000000</vcpu>";"
 
 4.3
 should see the following message while save the edit:
 error: XML error: invalid maximum number of vCPUs '10000000000000000'
 Failed. Try again? [y,n,f,?]:
 
 
 
 
 
 Refer to:
 Bug 902652 - Libvirt can't handle the varible of vcpu properly";Test Case;RedHatEnterpriseLinux7/RHEL7-40764
984;RHEL7-40767;[domiftune] [--live/--current/--config] Set the domain's network interface's bandwidth parameters lively or persistently;Set the domain's network interface's bandwidth parameters lively or persistently;Fangge Jin (fjin);Medium;Positive;Automated;;1;" 9.# virsh domiftune demo vnet0 --inbound 30000 --live
 
 10.# virsh domiftune demo vnet0";" step 10:
 inbound.average: 30000
 inbound.peak : 0
 inbound.burst : 0
 outbound.average: 20000
 outbound.peak : 0
 outbound.burst : 0
";Test Case;RedHatEnterpriseLinux7/RHEL7-40767
984;;;;;;;;;2;"11.# virsh domiftune demo vnet0 --outbound 10000 --current
 
 12.# virsh domiftune demo vnet0";"step 12:
 inbound.average: 30000
 inbound.peak : 0
 inbound.burst : 0
 outbound.average: 10000
 outbound.peak : 0
 outbound.burst : 0
";;RedHatEnterpriseLinux7/RHEL7-40767
984;;;;;;;;;3;"13.# virsh domiftune demo vnet0 --inbound 10000 --outbound 20000 --config
 
 
 
 14.# virsh domiftune demo vnet0 --config
​​";"step 13:
 error: Unable to set interface parameters
 error: invalid argument: Can't find device vnet0
 
 step 14:error: Unable to get interface parameters
 error: invalid argument: Can't find device vnet0";;RedHatEnterpriseLinux7/RHEL7-40767
984;;;;;;;;;4;"17.we should use mac address for --config option:
 # virsh domiftune raw 52:54:00:1b:6f:e5 
 
 
 
 
 
 
 18.# virsh domiftune raw 52:54:00:1b:6f:e5 --inbound 20000 --outbound 20000 --config
 
 19.# virsh destroy raw
 Domain raw destroyed
 
 # virsh start raw
 Domain raw started
 
 20.# virsh domiftune raw 52:54:00:1b:6f:e5";" step 17:
 inbound.average: 0
 inbound.peak : 0
 inbound.burst : 0
 outbound.average: 0
 outbound.peak : 0
 outbound.burst : 0
 
 
 
 
 
 
 
 
 
 step 20:
 inbound.average: 20000
 inbound.peak : 0
 inbound.burst : 0
 outbound.average: 20000
 outbound.peak : 0
 outbound.burst : 0";;RedHatEnterpriseLinux7/RHEL7-40767
985;RHEL7-40768;[domiftune] [negative] invalid value testing;"invalid value testing
            
";Fangge Jin (fjin);Medium;Negative;Automated;;1;" # virsh domiftune foo vnet0 --inbound a
 
 # virsh domiftune foo vnet0 --outbound a";" # virsh domiftune foo vnet0 --inbound a
 error: inbound format is incorrect
 
 # virsh domiftune foo vnet0 --outbound a
 error: inbound format is incorrect
 
 # virsh domiftune vr-rhel6-x86_64-kvm vnet0
 inbound.average: 20000
 inbound.peak : 0
 inbound.burst : 0
 outbound.average: 20000
 outbound.peak : 0
 outbound.burst : 0";Test Case;RedHatEnterpriseLinux7/RHEL7-40768
986;RHEL7-40769;[domiftune] boundary testing;"Refer to: 
 Bug 1043735 - virsh command domiftune bound parameter checking error";Fangge Jin (fjin);Medium;Positive;Automated;;1; # virsh domiftune rhel7new 52:54:00:c2:c6:e4 --inbound 1;" # virsh domiftune rhel7new 52:54:00:c2:c6:e4 
 inbound.average: 1
 inbound.peak : 0 
 inbound.burst : 0 
 outbound.average: 4294967 
 outbound.peak : 0 
 outbound.burst : 0";Test Case;RedHatEnterpriseLinux7/RHEL7-40769
986;;;;;;;;;2;# virsh domiftune rhel7new 52:54:00:c2:c6:e4 --inbound 4294967;"# virsh domiftune rhel7new 52:54:00:c2:c6:e4 
 inbound.average: 4294967
 inbound.peak : 0 
 inbound.burst : 0 
 outbound.average: 4294967 
 outbound.peak : 0
 outbound.burst : 0";;RedHatEnterpriseLinux7/RHEL7-40769
986;;;;;;;;;3;"# virsh domiftune rhel7 52:54:00:c6:3b:95 --inbound 4294968 
 error: Unable to set interface parameters 
 error: internal error: Child process (/sbin/tc class add dev vnet1 parent 1: classid 1:1 htb rate 4294968kbps) 
 unexpected exit status 1: Illegal ""rate"" 
 Usage: ... qdisc add ... htb [default N] [r2q N] 
 default minor id of class to which unclassified packets are sent {0} 
 r2q DRR quantums are computed as rate in Bps/r2q {10}
 debug string of 16 numbers each 0-3 {0} 
 ... class add ... htb rate R1 [burst B1] [mpu B] [overhead O] 
                                         [prio P] [slot S] [pslot PS]
                                        [ceil R2] [cburst B2] [mtu MTU] [quantum Q]
 rate rate allocated to this class (class can still borrow) 
 burst max bytes burst which can be accumulated during idle period {computed} 
 mpu minimum packet size used in rate computations 
 overhead per-packet size overhead used in rate computations
 linklay adapting to a linklayer e.g. atm 
 ceil definite upper class rate (no borrows) {rate} 
 cburst burst but for ceil {computed} 
 mtu max packet size we create rate map for {1600}
 prio priority of leaf; lowe";​​;;RedHatEnterpriseLinux7/RHEL7-40769
986;;;;;;;;;4;"# virsh domiftune rhel7 52:54:00:c6:3b:95 --inbound 4294967295 
 error: Unable to set interface parameters 
 error: internal error: Child process (/sbin/tc class add dev vnet1 parent 1: classid 1:1 htb rate 4294967295kbps) 
 unexpected exit status 1: Illegal ""rate"" 
 Usage: ... qdisc add ... htb [default N] [r2q N] default minor id of class to which unclassified packets are sent {0} r2q DRR quantums are computed as rate in Bps/r2q {10} debug string of 16 numbers each 0-3 {0} ... class add ... htb rate R1 [burst B1] [mpu B] [overhead O] [prio P] [slot S] [pslot PS] [ceil R2] [cburst B2] [mtu MTU] [quantum Q] rate rate allocated to this class (class can still borrow) burst max bytes burst which can be accumulated during idle period {computed} mpu minimum packet size used in rate computations overhead per-packet size overhead used in rate computations linklay adapting to a linklayer e.g. atm ceil definite upper class rate (no borrows) {rate} cburst burst but for ceil {computed} mtu max packet size we create rate map for {1600} prio priority of leaf; l";​​;;RedHatEnterpriseLinux7/RHEL7-40769
987;RHEL7-40772;[update-device] Test options combinations - exclusive;"1.--current --live
 2.--current --config";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"[root@xuzhangtest2 home]# virsh update-device rhel7 cdrom1.xml --live --current
 error: Options --current and --live are mutually exclusive
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40772
987;;;;;;;;;2;"
 [root@xuzhangtest2 home]# virsh update-device rhel7 cdrom1.xml --current --config
 error: Options --current and --config are mutually exclusive";​​;;RedHatEnterpriseLinux7/RHEL7-40772
988;RHEL7-40773;[update-device] Test options combinations - inclusive;"1. --live --config
";Fangge Jin (fjin);Medium;Positive;Automated;;1;" scenario 10: update device with option ""live"" and ""config"" on running domain
 [root@xuzhangtest2 home]# virsh start rhel7
 Domain rhel7 started
 [root@xuzhangtest2 home]# virsh dumpxml rhel7|grep -A 5 disk
 ......
 <disk type='file' device='cdrom'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/temp1.img'/>
 <target dev='hdc' bus='ide'/>
 <readonly/>
 <alias name='ide0-1-0'/>
 </disk>
 ......
 [root@xuzhangtest2 home]# virsh update-device rhel7 cdrom2.xml --live --config
 Device updated successfully
 [root@xuzhangtest2 home]# virsh dumpxml rhel7|grep -A 5 disk
 ......
 <disk type='file' device='cdrom'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/temp2.img'/>
 <target dev='hdc' bus='ide'/>
 <readonly/>
 <alias name='ide0-1-0'/>
 </disk>
 ......
 [root@xuzhangtest2 home]# virsh destroy rhel7
 Domain rhel7 destroyed
 [root@xuzhangtest2 home]# virsh dumpxml rhel7|grep -A 5 disk
 ......
 <disk type='file' device='cdrom'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/temp2.img'/>
 <target dev='hdc' bus='ide'/>
 <readonly/>
 <address type='drive' controller='0' bus='1' target='0' unit='0'/>
 </disk>
 ......";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40773
988;;;;;;;;;2;"scenario 11:update device with option ""live"" and ""config"" on shutoff domain
 [root@xuzhangtest2 home]# virsh update-device rhel7 cdrom1.xml --live --config
 error: Failed to update device from cdrom1.xml
 error: Requested operation is not valid: cannot do live update a device on inactive domain";​​;;RedHatEnterpriseLinux7/RHEL7-40773
989;RHEL7-40774;"[update-device][driver] update virtio driver attributes ""queues"" by update-device (not support)";"Refer to:
 Bug 1029732 - Libvirt can not update/modify queues value of interface element using update-device command";Fangge Jin (fjin);Medium;Positive;Automated;;1;" Forbid to update/modify queues value of interface
 # virsh start r7
 # virsh dumpxml r7 |grep -aA8 interface
 <interface type='network'>
 <mac address='52:54:00:02:0a:7a'/>
 <source network='default'/>
 <target dev='vnet0'/>
 <model type='virtio'/>
 <driver name='vhost' queues='2'/>
 <alias name='net0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
 </interface>
 ...
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40774
989;;;;;;;;;2;"2.Update the interface queue value using update-device
 # cat nic.xml
 <interface type='network'>
 <mac address='52:54:00:02:0a:7a'/>
 <source network='default'/>
 <target dev='vnet0'/>
 <model type='virtio'/>
 <alias name='net0'/>
 <driver name='vhost' queues='4'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
 </interface>
 
 # virsh update-device r7 nic.xml --current";cannot modify virtio network device driver attributes;;RedHatEnterpriseLinux7/RHEL7-40774
990;RHEL7-40775;[update-device] [--force] Force device update;"e.g., to eject a CD-ROM even if it is locked/mounted in the domain
";Fangge Jin (fjin);Medium;Positive;Automated;;1;" update device with option force on running domain
 [root@xuzhangtest2 home]# virsh start rhel7
 Domain rhel7 started
 login guest, mount the cdrom to /mnt.
 
 [root@xuzhangtest2 home]# virsh dumpxml rhel7|grep -A 5 disk
 ......
 <disk type='file' device='cdrom'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/temp2.img'/>
 <target dev='hdc' bus='ide'/>
 <readonly/>
 <alias name='ide0-1-0'/>
 </disk>
 ......
 
 [root@xuzhangtest2 home]# virsh update-device rhel7 cdrom1.xml
 error: Failed to update device from cdrom1.xml
 error: operation failed: Unable to eject media before changing it
 
 [root@xuzhangtest2 home]# virsh update-device rhel7 cdrom1.xml --force
 Device updated successfully
 
 [root@xuzhangtest2 home]# virsh dumpxml rhel7|grep -A 5 disk
 ......
 <disk type='file' device='cdrom'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/temp1.img'/>
 <target dev='hdc' bus='ide'/>
 <readonly/>
 <alias name='ide0-1-0'/>
 </disk>
 ......";"<yalzhang> test on  libvirt-1.3.4-1.el7.x86_64, no need to run the command twice.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-40775
991;RHEL7-40783;[attach-disk] - Attach disk from args with variuos options;"1. --mode: specify the mode: readonly or shareable
 2. --type: specify the type as alternative to the disk default
 3. --print-xml: print XML document rather than attach the disk
4. --sourcetype --driver --subdriver --cache --address --serial --shareable";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" Scenario 1: specify the mode with --mode
 8.1 #virsh start demo; #virsh attach-disk demo /var/lib/libvirt/images/foo.img vdb --mode readonly
 
 8.2 # virsh detach-disk demo vdb
 
 8.3 #virsh attach-disk demo /var/lib/libvirt/images/foo.img vdb --mode shareable";" 8
 8.1 Disk attached successfully.But can not mount or format the disk in
 guest.
 
 
 
 8.3 Disk attached successfully. And you can format the disk and write to it.";Test Case;RedHatEnterpriseLinux7/RHEL7-40783
991;;;;;;;;;2;"Scenario 2: specify the type as alternative to the disk default with --type
 The type can be lun, cdrom or floppy, this use only replaces the media within the existing virtual cdrom or floppy device; consider using update-device for this usage instead
 
 9.1prepare a vm with cdrom
 #virsh dumpxml demo
 ....
    <disk type='block' device='cdrom'>
       <driver name='qemu' type='raw'/>
       <backingStore/>
       <target dev='hdd' bus='usb' tray='open'/>
       <readonly/>
       <alias name='usb-disk3'/>
     </disk>
 ....
 
 9.2 # qemu-img create -f qcow2 /tmp/testqcow2.img 100M
 
 
 9.3 # virsh attach-disk rhel7.2 --source /tmp/testqcow2.img --target hdd --targetbus usb --sourcetype file --driver qemu --subdriver raw --type cdrom
 Disk attached successfully
 # virsh dumpxml rhel7.2
 ....
    <disk type='file' device='cdrom'>
       <driver name='qemu' type='qcow2'/>
       <source file='/tmp/testqcow2.img'/>
       <backingStore/>
       <target dev='hdd' bus='usb'/>
       <readonly/>
       <alias name='usb-disk3'/>
     </disk>
 ....";"
 9.3 Disk attached successfully";;RedHatEnterpriseLinux7/RHEL7-40783
991;;;;;;;;;3;"Scenario 3: print XML document rather than attach the disk with --print-xml
 15.1 non-exist domain
 # virsh attach-disk fake_non_exist /tmp/aa.img vdd --print-xml
 <disk type='file'>
 <source file='/tmp/aa.img'/>
 <target dev='vdd'/>
 </disk>
 
 15.2 with exist domain
 # virsh attach-disk kvm-rhel6.5-x86_64-qcow2-virtio /tmp/aa.img vdd --print-xml
 <disk type='file'>
 <source file='/tmp/aa.img'/>
 <target dev='vdd'/>
 </disk>";​​;;RedHatEnterpriseLinux7/RHEL7-40783
991;;;;;;;;;4;"Scenario 4:  --sourcetype --driver --subdriver --cache --address --serial --shareable
 10. # virsh attach-disk --domain test1 --source /var/lib/libvirt/images/vol-test2.qcow2 --target vdc --sourcetype file --driver qemu --subdriver qcow2 --cache default --address pci:0x0000.0x00.0x1e.0x00 --serial `WD-WMAP9A966149` --shareable
 
 11. Check if the new disk file has been added into domain
 # virsh dumpxml demo
 
 12. Run command 'fdisk -l' in guest and mount to check if it is
 readable/writible
 
 13. Restart the guest and check
 restart in the guest by 'init 6' or other, do not destroy it on the host. The device will still exists in the guest.
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40783
992;RHEL7-40792;[change-media] Change media of CD or floppy drive with --current/--config;"1. --config: 
  for a running domain
2. --current:
 ";Fangge Jin (fjin);Medium;Positive;Automated;;1;"  Scenario 1: update media with --config
 # virsh change-media rhel6u2 hdc /var/lib/libvirt/images/aaa.iso --update --config
 succeeded to complete action update on media
 
 # virsh destroy rhel6u2
 Domain rhel6u2 destroyed
 
 # virsh dumpxml rhel6u2
 ...
 <disk type='file' device='cdrom'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/aaa.iso'/>
 <target dev='hdc' bus='ide'/>
 <readonly/>
 <address type='drive' controller='0' bus='1' target='0' unit='0'/>
 </disk>
 ...
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40792
992;;;;;;;;;2;"Scenario 2: update media with --current
 # virsh change-media rhel6u2 hdc /var/lib/libvirt/images/bbb.iso **--update**
 --current
 succeeded to complete action update on media
 # virsh dumpxml rhel6u2
 ...
 <disk type='file' device='cdrom'>
 <driver name='qemu' type='raw'/>
 <source file='/var/lib/libvirt/images/bbb.iso'/>
 <target dev='hdc' bus='ide'/>
 <readonly/>
 <address type='drive' controller='0' bus='1' target='0' unit='0'/>
 </disk>
 ...";​​;;RedHatEnterpriseLinux7/RHEL7-40792
993;RHEL7-40793;[change-media] Bug 923053 - change-media can not insert media on block type cdrom;;Fangge Jin (fjin);Medium;Positive;Automated;;1;"  10. insert media on block type cdrom(bug 923053)
 10.1 start the guest with
 <disk type='block' device='cdrom'>
 <driver name='qemu' type='raw'/>
 <target dev='sdc' bus='ide' />
 <readonly/>
 </disk>
 
 10.2 Change media
 # virsh change-media guest hdc /dev/sdb --insert
 succeeded to complete action insert on media
 
 10.3 Check the domain xml
 # virsh dumpxml guest |grep cdrom -A 7
 
 
 
  After step 10.3, the new media should be added to domain.";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40793
994;RHEL7-40796;[metadata] [--remove] remove the metadata corresponding to an uri;"For a running domain:
1. remove metadata with --config
2. remove metadata with --current
3. remove metadata with --live
 
 Bug 1186666 - The virsh metadata --remove command always show success even specify an un-exsitng metadata element[WONTFIX]
";Fangge Jin (fjin);Medium;Positive;Automated;;1;"Preparations:
 Prepare a guest with metadata:
  #virsh dumpxml vm1
 ......
 <metadata>
 <herp:derp xmlns:foobar=""http://foo.bar/"" xmlns:herp=""http://herp.derp/""/>
 </metadata>
 
 Start the guest";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40796
994;;;;;;;;;2;"For a running domain:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-40796
994;;;;;;;;;3;Scenario1: remove the metadata corresponding to an uri with --config;​​;;RedHatEnterpriseLinux7/RHEL7-40796
994;;;;;;;;;4;12. # virsh metadata vm1 --uri http://herp.derp/ --config --remove;"12. # virsh metadata vm1 --uri http://herp.derp/ --config --remove
 Metadata removed";;RedHatEnterpriseLinux7/RHEL7-40796
994;;;;;;;;;5;13. #virsh destroy vm1;"13. #virsh destroy vm1
 Domain vm1 destroyed";;RedHatEnterpriseLinux7/RHEL7-40796
994;;;;;;;;;6;14. #virsh start vm1;"14. #virsh start vm1
 Domain vm1 started";;RedHatEnterpriseLinux7/RHEL7-40796
994;;;;;;;;;7;15. #virsh metadata vm1 --uri http://herp.derp/;"15. # virsh metadata vm1 --uri http://herp.derp/
 error: metadata not found: Requested metadata element is not present";;RedHatEnterpriseLinux7/RHEL7-40796
994;;;;;;;;;8;Reset test env;​​;;RedHatEnterpriseLinux7/RHEL7-40796
994;;;;;;;;;9;"Scenario 2: remove the metadata corresponding to an uri with --current
";​​;;RedHatEnterpriseLinux7/RHEL7-40796
994;;;;;;;;;10;19. #virsh metadata vm1 --uril http://herp.derp/ --remove --current;"19. # virsh metadata vm1 --uri http://herp.derp/ --current --remove
 Metadata removed";;RedHatEnterpriseLinux7/RHEL7-40796
994;;;;;;;;;11;20. #virsh metadata vm1 --uri http://herp.derp/ --current;"20. # virsh metadata vm1 --uri http://herp.derp/ --current
 error: metadata not found: Requested metadata element is not present";;RedHatEnterpriseLinux7/RHEL7-40796
994;;;;;;;;;12;Reset test env;​​;;RedHatEnterpriseLinux7/RHEL7-40796
994;;;;;;;;;13;Scenario 3: remove the metadata corresponding to an uri with --live;​​;;RedHatEnterpriseLinux7/RHEL7-40796
994;;;;;;;;;14;Refer step 19~20;​​;;RedHatEnterpriseLinux7/RHEL7-40796
995;RHEL7-40797;[metadata][--edit] Set domain's medata by opening an editor;"refer to:
 Bug 1245525 - libvirt should reject metadata elements not belonging to any namespace
";Fangge Jin (fjin);Medium;Positive;Automated;;1; Scenario 9: Set metadata by opening an editor with --edit;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-40797
995;;;;;;;;;2;22. #virsh metadata vm1 --edit --uri http://herp.derp/ --key turb;"22. # virsh metadata vm1 --uri http://herp.derp/ --key turb --edit
 Metadata modified
 Check domain's metadata has been changed.";;RedHatEnterpriseLinux7/RHEL7-40797
995;;;;;;;;;3;"23. Edit guest's xml, add multi same metadata in guest's xml, save the guest's xml, only 1 record will generated
 #virsh edit 7.0
 --
   <metadata>
 <foobar:herp2erp xmlns:foobar=""http://foo.bar3/""/>
 <foobar:herp2erp xmlns:foobar=""http://foo.bar3/""/>
 <foobar:herp2erp xmlns:foobar=""http://foo.bar3/""/>
 <foobar:herp2erp xmlns:foobar=""http://foo.bar3/""/>
 <foobar:herp2erp xmlns:foobar=""http://foo.bar3/""/>
 <foobar:herp2erp xmlns:foobar=""http://foo.bar3/""/>
 <foobar:herp2erp xmlns:foobar=""http://foo.bar3/""/>
   </metadata>";"only 1 record will generated
 #virsh dumpxml 7.0
   <metadata>
     <foobar:herp2erp xmlns:foobar=""http://foo.bar3/""/>
   </metadata>";;RedHatEnterpriseLinux7/RHEL7-40797
995;;;;;;;;;4;"24.Edit guest's xml, add multi same invalid metadata without described name space in the guest's xml, save the guest's xml
 # virsh edit 7.0
 --
   <metadata>
     <herp2erp xmlns:foobar=""http://foo.bar3/"" xmlns:herp2=""http://herp.derp/""/>
     <herp2erp xmlns:foobar=""http://foo.bar3/"" xmlns:herp2=""http://herp.derp/""/>
     <herp2erp xmlns:foobar=""http://foo.bar3/"" xmlns:herp2=""http://herp.derp/""/>
     <herp2erp xmlns:foobar=""http://foo.bar3/"" xmlns:herp2=""http://herp.derp/""/>
     <herp2erp xmlns:foobar=""http://foo.bar3/"" xmlns:herp2=""http://herp.derp/""/>
     <herp2erp xmlns:foobar=""http://foo.bar3/"" xmlns:herp2=""http://herp.derp/""/>
     <herp2erp xmlns:foobar=""http://foo.bar3/"" xmlns:herp2=""http://herp.derp/""/>
   </metadata>
 
 #virsh dumpxml 7.0";"libvirt will remove the invalid sub-elements from <metadata> element from guest's xml
 since bug 1245525 has fixed the issue
 #virsh dumpxml 7.0
 --
   <metadata/>";;RedHatEnterpriseLinux7/RHEL7-40797
996;RHEL7-41739;[vol-delete][--delete-snapshots][negative] Delete a non-rbd backend volume together with its snapshots - new for RHEL7.3;"Refer to: 
 Bug 1299688 - Improve error message when delete snapshots for a non-rbd backend";Fangge Jin (fjin);Medium;Negative;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-41739
997;RHEL7-41742;[domstate] [--reason] Get domain state after core dump;;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 10:#virsh dump --live demo /tmp/dump
 #virsh domstate --reason demo";" 10:during dump: Domain test.img dumped to /tmp/dump
 after dump: running (unpaused)";Test Case;RedHatEnterpriseLinux7/RHEL7-41742
997;;;;;;;;;2;"11:#virsh dump --crash demo /tmp/dump
 #virsh domstate --reason demo";"11:during dump: Domain test.img dumped to /tmp/dump
 after dump: shut off (crashed)";;RedHatEnterpriseLinux7/RHEL7-41742
997;;;;;;;;;3;"12:rename the guest image file,and run
 #virsh start demo
 the guest fail to start
 #virsh domstate --reason demo";12:shut off (failed);;RedHatEnterpriseLinux7/RHEL7-41742
998;RHEL7-41743;[domstate] [--reason] Get domain state after save/restore;Get domain state after save/restore, domjobabort while saving.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Scenario 1: check domstate after save
 1.#virsh start demo
 #virsh save demo /tmp/save.img
 #virsh domstate --reason demo";"1.during saving : paused (saving)
 after saving: shut off (saved)";Test Case;RedHatEnterpriseLinux7/RHEL7-41743
998;;;;;;;;;2;"Scenraio 2: check domstate after abortjob during saving
 2.#virsh start demo
 #virsh save demo /tmp/save.img
 
 before save complete run:
 #virsh domjobabort demo
 #virsh domstate --reason demo";2.running (save canceled);;RedHatEnterpriseLinux7/RHEL7-41743
998;;;;;;;;;3;"Scenario 3: check domstate after restore frome a saved file
 3.#virsh restore /tmp/save.img
 #virsh domstate --reason demo";3.running (restored);;RedHatEnterpriseLinux7/RHEL7-41743
999;RHEL7-41805;[nodesuspend] [negative] Invalid arguments;"1.Invalid duration value

Refer to:
 Bug 765698 - Improve virsh nodesuspend output information - FIXED
";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" # virsh nodesuspend mem disk
 error: Invalid duration argument
 
 [root@localhost /]# echo $?
 1";"<yalzhang>I checked the error messages is 
 error: Numeric value 'disk' for <duration> option is malformed or out of range
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-41805
1000;RHEL7-41956;[start] Start virtlogd.service manually;"virtlogd service can be started manually by ""systemctl start virtlogd""";Fangge Jin (fjin);Critical;Positive;Manual Only;;1;"Install libvirt packages freshly:
 1) First, remove the libvirt* packages installed previously:
 # yum erase libvirt*
 
 2) Then configure latest libvirt repo, and install libvirt packages
 # yum install libvirt
 
 Or download  latest libvirt packages manually, and install by
 # rpm -ivh ./libvirt*.rpm
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41956
1000;;;;;;;;;2;"Start virtlogd service manually:
 # systemctl start virtlogd
​​";​​;;RedHatEnterpriseLinux7/RHEL7-41956
1000;;;;;;;;;3;"Check virtlogd.service:
 # systemctl status virtlogd.service
​​";virtlogd is active;;RedHatEnterpriseLinux7/RHEL7-41956
1000;;;;;;;;;4;"Check virtlogd process:
 #  ps -o ppid,pid,pgid,sid,tpgid,tty,stat,command -C ""virtlogd""";"virtlogd process exists. Output:
 
 PPID   PID  PGID   SID TPGID TT  STAT  COMMAND
     1    25489   25489     25489    -1      ?    Ssl    /usr/sbin/virtlogd";;RedHatEnterpriseLinux7/RHEL7-41956
1001;RHEL7-41957;"[virtlogd] [non-root user] Check qemu log when stdio handler is ""logd""";"For non-root user, virtlogd will be auto-spawned with --timeout 30 when guest starts. And qemu log is recorded in file ~/.cache/libvirt/qemu/rhel7.2.log.
 Note: virtlogd is stdio handler by default.";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Log in host as non-root user
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41957
1001;;;;;;;;;2;"Start a guest to produce some qemu log:
 $ virsh start rhel7.2
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-41957
1001;;;;;;;;;3;"Check virtlogd process:
 $ps aux|grep virtlogd
​​";"Virtlogd process is auto-spawned as ""/usr/sbin/virtlogd --timeout=30"" when starting a guest under non-root user.

 Output:
 fjin     23564  0.0  0.1 195316  8620 ?        Sl   16:16   0:00 /usr/sbin/virtlogd --timeout=30";;RedHatEnterpriseLinux7/RHEL7-41957
1001;;;;;;;;;4;"Check the existence of qemu log file:
 # ls ~/.cache/libvirt/qemu/log/";"The qemu log file exists.
 
 Output:
 rhel7.2.log";;RedHatEnterpriseLinux7/RHEL7-41957
1001;;;;;;;;;5;"Check the content of qemu log file:
 # cat ~/.cache/libvirt/qemu/log/rhel7.2.log";The qemu log are written into log file correctly;;RedHatEnterpriseLinux7/RHEL7-41957
1001;;;;;;;;;6;"Destroy & start the guest again.
 $ virsh destroy rhel7.2
 
 $virsh start rhel7.2";​​;;RedHatEnterpriseLinux7/RHEL7-41957
1001;;;;;;;;;7;"Check the content of qemu log file:
 # cat ~/.cache/libvirt/qemu/log/rhel7.2.log";The log for the second start is appended to the log file.;;RedHatEnterpriseLinux7/RHEL7-41957
1002;RHEL7-41959;[Reload] Reload virtlogd.service;when reloading virtlogd.service, virtlogd will re-exec itself with the new configuration(loaded from virtlogd.conf);Fangge Jin (fjin);Critical;Positive;Not Automated;;1;"Make sure virtlogd.service is running
 # systemctl status virtlogd
 
 Note:
 If virtlogd is not running, start it:
 # systemctl start virtlogd
​​";"virtlogd is active. Output:
 
 ● virtlogd.service - Virtual machine log manager
    Loaded: loaded (/usr/lib/systemd/system/virtlogd.service; indirect; vendor preset: disabled)
    Active: active (running) since 一 2016-02-01 16:21:05 CST; 1h 10min ago
 ...
  Main PID: 25757 (virtlogd)
    CGroup: /system.slice/virtlogd.service
            └─25757 /usr/sbin/virtlogd";Test Case;RedHatEnterpriseLinux7/RHEL7-41959
1002;;;;;;;;;2;"Reload virtlogd:
 # systemctl reload virtlogd";​​;;RedHatEnterpriseLinux7/RHEL7-41959
1002;;;;;;;;;3;"Check virtlogd status:
 # systemctl status virtlogd
​​";"The virtlogd is runing and the pid doesn't change. 
 
 Output:
 ● virtlogd.service - Virtual machine log manager
    Loaded: loaded (/usr/lib/systemd/system/virtlogd.service; indirect; vendor preset: disabled)
    Active: active (running) since 一 2016-02-01 16:21:05 CST; 1h 10min ago
 ...
   Process: 26239 ExecReload=/bin/kill -USR1 $MAINPID (code=exited, status=0/SUCCESS)
  Main PID: 25757 (virtlogd)
    CGroup: /system.slice/virtlogd.service
            └─25757 /usr/sbin/virtlogd";;RedHatEnterpriseLinux7/RHEL7-41959
1003;RHEL7-41960;[upgrade] upgrade from 1.2.17(RHEL7.2) to latest version- libvirtd is enabled and active;virtlogd will be enabled and active after upgrading;Fangge Jin (fjin);High;Positive;Not Automated;;1;"0. Install libvirt 1.2.17
 
 And start libvirtd service
 # systemctl start libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41960
1003;;;;;;;;;2;"1. Check libvirtd.service status
 # systemctl status libvirtd
 ● libvirtd.service - Virtualization daemon
    Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; enabled; vendor preset: enabled)
    Active: active (running) since 三 2016-02-24 14:34:33 CST; 6s ago
      Docs: man:libvirtd(8)
            http://libvirt.org
​​";"libvirtd is enabled and active
​​";;RedHatEnterpriseLinux7/RHEL7-41960
1003;;;;;;;;;3;"2. Upgrade libvirt version to latest version
​​";​​;;RedHatEnterpriseLinux7/RHEL7-41960
1003;;;;;;;;;4;"3. After upgrading finished, check libvirtd status
 # systemctl status libvirtd
 ● libvirtd.service - Virtualization daemon
    Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; enabled; vendor preset: enabled)
    Active: active (running) since 三 2016-02-24 14:35:43 CST; 9s ago
      Docs: man:libvirtd(8)
            http://libvirt.org
  Main PID: 15805 (libvirtd)
​​";libvirtd is enabled and active;;RedHatEnterpriseLinux7/RHEL7-41960
1003;;;;;;;;;5;"4. Check virtlogd.socket status
 # systemctl status virtlogd.socket
 ● virtlogd.socket - Virtual machine log manager socket
    Loaded: loaded (/usr/lib/systemd/system/virtlogd.socket; enabled; vendor preset: disabled)
    Active: active (listening) since 三 2016-02-24 14:35:43 CST; 51s ago
    Listen: /var/run/libvirt/virtlogd-sock (Stream)
​​";"virtlogd.socket is enabled and active
​​";;RedHatEnterpriseLinux7/RHEL7-41960
1003;;;;;;;;;6;"5. Try to start a guest
 # virsh start $guest
 
 Check guest log file : /var/log/libvirt/qemu/$guest.log
​​";"Guest can be started successfully and guest log is recorded in log file correctly
​​";;RedHatEnterpriseLinux7/RHEL7-41960
1004;RHEL7-41962;[virtlogd][Stop] Stop virtlogd service when guest is running;If virtlogd is stopped when guest is running, new output of the qemu process will not be written into $guest.log file.;Fangge Jin (fjin);High;Negative;Not Automated;;1;"Set virtlogd as the log handler:

 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.

 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 

 (Re)start libvirtd:
 # systemctl restart libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41962
1004;;;;;;;;;2;"Start a guest with spice graphic: 
 # virsh start $guest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-41962
1004;;;;;;;;;3;"Check the opened file descriptor of qemu log file:
 # lsof /var/log/libvirt/qemu$guest.log
​​";"qemu log file is opened by virtlogd. Output:
 
 COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF    NODE NAME
 virtlogd 2833 root   16w   REG  253,0    85291 1114803 /var/log/libvirt/qemu/$guest.log";;RedHatEnterpriseLinux7/RHEL7-41962
1004;;;;;;;;;4;"Stop virtlogd service
 # systemctl stop virtlogd
​​";​​;;RedHatEnterpriseLinux7/RHEL7-41962
1004;;;;;;;;;5;"Connect to guest by spice client, and check qemu log:
 1) # tailf /var/log/libvirt/qemu/$guest.log
 2) # virt-viewer $guest
 or # remote-viewer spice://<ip>:<port>
 3) close virt-viewer
 4) check the output of tailf";4) No new log printed;;RedHatEnterpriseLinux7/RHEL7-41962
1005;RHEL7-41966;[virtlogd][-h | --help] Display virtlogd help;N/A;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"#  virtlogd --help 
​​";"Output:
 
 Usage:
   virtlogd [options]
 
 Options:
   -h | --help            Display program help:
   -v | --verbose         Verbose messages.
   -d | --daemon          Run as a daemon & write PID file.
   -t | --timeout <secs>  Exit after timeout period.
   -f | --config <file>   Configuration file.
   -V | --version         Display version information.
   -p | --pid-file <file> Change name of PID file.
 
 libvirt log management daemon:
 
   Default paths:
 
     Configuration file (unless overridden by -f):
       /etc/libvirt/virtlogd.conf
 
     Sockets:
       /var/run/libvirt/virtlogd-sock
 
     PID file (unless overridden by -p):
       /var/run/virtlogd.pid";Test Case;RedHatEnterpriseLinux7/RHEL7-41966
1006;RHEL7-41967;[virtlogd][-v | --verbose] Display virtlogd verbose messages;"This option will set log level to 2(info log) if log level is not set or set to a value>2.
 
log_level in /etc/libvirt/virtlogd.conf | expected result
default | info log is printed
1 | debug log is printed
2 | info log is printed
3 | info log is printed
4 | info log is printed
 Bug 1325072 - ""virtlogd --verbose"" doesn't output verbose messages";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Stop virtlogd socket:
 # systemctl stop virtlogd.socket
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41967
1006;;;;;;;;;2;"Make sure virtlogd process doesn't exist:
 # ps aux|grep virtlogd
 (no output)
";​​;;RedHatEnterpriseLinux7/RHEL7-41967
1006;;;;;;;;;3;"Set log_level in /etc/libvirt/virtlogd.conf according to the test matrix in description field. For example:
 
 log_level = 1";​​;;RedHatEnterpriseLinux7/RHEL7-41967
1006;;;;;;;;;4;"Start virtlogd in foreground with --verbose:
 # virtlogd --verbose";"Get expected result as described in test matrix. 
 
 For example, output: 
 2016-04-08 06:59:36.714+0000: 3512: info : virObjectNew:202 : OBJECT_NEW: obj=0x7f26876386e0 classname=virNetServerService
 2016-04-08 06:59:36.714+0000: 3512: info : virObjectNew:202 : OBJECT_NEW: obj=0x7f2687638a20 classname=virNetSocket
 2016-04-08 06:59:36.714+0000: 3512: info : virNetSocketNew:277 : RPC_SOCKET_NEW: sock=0x7f2687638a20 fd=7 errfd=-1 pid=0 localAddr=127.0.0.1;0, remoteAddr=<null>
​​";;RedHatEnterpriseLinux7/RHEL7-41967
1007;RHEL7-41968;[virtlogd][-d | --daemon] Run as a daemon & write PID file;N/A;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Stop virtlogd.socket and libvirtd service:
 #systemctl stop virtlogd.socket
 
 # systemctl stop libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41968
1007;;;;;;;;;2;"Run libvirtd as a daemon:
 # libvirtd -d";​​;;RedHatEnterpriseLinux7/RHEL7-41968
1007;;;;;;;;;3;"Make sure virtlogd process doesn't exist:
 # ps aux|grep virtlogd
 (no output)
";​​;;RedHatEnterpriseLinux7/RHEL7-41968
1007;;;;;;;;;4;"Run virtlogd as a daemon: 
 # virtlogd -d
​​";The command returns immediately;;RedHatEnterpriseLinux7/RHEL7-41968
1007;;;;;;;;;5;"Check virtlogd process:
 #  ps -o ppid,pid,pgid,sid,tpgid,tty,stat,command -C ""virtlogd""
";"virtlogd process exists and its ppid is 1:
 
  PPID   PID  PGID   SID TPGID TT       STAT COMMAND
     1 28494 28493 28493    -1 ?        Sl   virtlogd -d";;RedHatEnterpriseLinux7/RHEL7-41968
1007;;;;;;;;;6;"Start a guest:
 # virsh start $guest
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-41968
1007;;;;;;;;;7;"Check the content of qemu log file:
 # cat /var/log/libvirt/qemu/$guest.log";The domain log is written into $guest.log file correctly;;RedHatEnterpriseLinux7/RHEL7-41968
1008;RHEL7-41969;[virtlogd][-t | --timeout] Start virtlogd with --timeout <SECONDS> and without active guests;Verify that virtlogd process exits after SECONDS have elapsed with no opened log file;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set argument --timeout in /etc/sysconfig/virtlogd:

 VIRTLOGD_ARGS=""--timeout=30""
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41969
1008;;;;;;;;;2;"Restart virtlogd service
 # systemctl restart virtlogd";​​;;RedHatEnterpriseLinux7/RHEL7-41969
1008;;;;;;;;;3;"Check virtlogd process:
 # ps -fC virtlogd
​​";"virtlogd is started with --timeout=30.
 
 Output:
 UID        PID  PPID  C STIME TTY          TIME CMD
 root     24440     1  0 12:13 ?        00:00:00 /usr/sbin/virtlogd --timeout=30";;RedHatEnterpriseLinux7/RHEL7-41969
1008;;;;;;;;;4;"After 30s, check virtlogd process again:
 # ps aux|grep virtlogd 
​​";No virtlogd process exists after 30s.;;RedHatEnterpriseLinux7/RHEL7-41969
1009;RHEL7-41970;[virtlogd][-f | --config] Start virtlogd with specified configuration file;This option can specify the configuration file instead of using the default file( /etc/libvirt/virtlogd.conf);Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set argument --config in /etc/sysconfig/virtlogd:

 VIRTLOGD_ARGS=""--config /etc/libvirt/virtlogd-new.conf""
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41970
1009;;;;;;;;;2;"Prepare the new virtlogd conf file:
 
 1) Create /etc/libvirt/virtlogd-new.conf with new configuration for some parameters:
 
 #cat /etc/libvirt/virtlogd-new.conf
 log_level = 2
 log_outputs=""1:file:/var/log/libvirt/virtlogd-new.log""
 
 2) Modify the selinux context of the new virtlogd conf file(according to the default conf file):
 # ll /etc/libvirt/virtlogd.conf -Z
 -rw-r--r--. root root system_u:object_r:virtlogd_etc_t:s0 /etc/libvirt/virtlogd.conf
 
 # ll /etc/libvirt/virtlogd-new.conf -Z
 -rw-r--r--. root root unconfined_u:object_r:virt_etc_t:s0 /etc/libvirt/virtlogd-new.conf
 
 # chcon system_u:object_r:virtlogd_etc_t:s0  /etc/libvirt/virtlogd-new.conf";​​;;RedHatEnterpriseLinux7/RHEL7-41970
1009;;;;;;;;;3;"Restart virtlogd service:
 # systemctl restart virtlogd
 
 
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-41970
1009;;;;;;;;;4;"Check virtlogd process:
 #  ps -fC ""virtlogd""";"virtlogd is started with --config argument:
 
 UID        PID  PPID  C STIME TTY          TIME CMD
 root     28445     1  0 13:10 ?        00:00:00 /usr/sbin/virtlogd
 --config /etc/libvirt/virtlogd-new.conf";;RedHatEnterpriseLinux7/RHEL7-41970
1009;;;;;;;;;5;"Check the new virtlogd log file:
 
 # cat /var/log/libvirt/virtlogd-new.log
​​";INFO Logs are recorded in the new log file. This proves that --config takes effect;;RedHatEnterpriseLinux7/RHEL7-41970
1010;RHEL7-41971;[virtlogd][-V | --version] Display version information.;N/A;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Query the version of libvirt: 
 # rpm -q libvirt
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41971
1010;;;;;;;;;2;"Display virtlogd version info by:
 # virtlogd --version
​​";"The version info is same as last step.
 
 Output:
 virtlogd (libvirt) 1.3.5";;RedHatEnterpriseLinux7/RHEL7-41971
1011;RHEL7-41972;[virtlogd][-p | --pid-file] Change name of PID file.;This option can specify the pid file instead of using the default file(/var/run/virtlogd.pid);Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Set argument --pid-file in /etc/sysconfig/virtlogd:
 
 VIRTLOGD_ARGS=""--pid-file /var/run/virtlogd-new.pid""";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41972
1011;;;;;;;;;2;"Restart virtlogd:
 # systemctl restart virtlogd";​​;;RedHatEnterpriseLinux7/RHEL7-41972
1011;;;;;;;;;3;"Check virtlogd process:
 #  ps -fC ""virtlogd""
​​";"virtlogd is started with ""-pid-file /var/run/virtlogd-new.pid"":

 UID        PID  PPID  C STIME TTY          TIME CMD
 root     28445     1  0 13:10 ?        00:00:00 /usr/sbin/virtlogd --pid-file /var/run/virtlogd-new.pid
";;RedHatEnterpriseLinux7/RHEL7-41972
1011;;;;;;;;;4;"Check the content of the new pid file:
 # cat /var/run/virtlogd-new.pid 
​​";"Virtlogd pid is output correctly:

 28445";;RedHatEnterpriseLinux7/RHEL7-41972
1012;RHEL7-41973;Restart virtlogd.service when guest is running;"Bug 1311035 - New qemu log is not writen into log file after restarting virtlogd when guest is running - NOTABUG
If virtlogd is restarted when guest is running, new output of the qemu process will not be written into $guest.log file";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"0. Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf 
 or Set stdio_handler = ""logd"" in /etc/libvirt/qemu.conf";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-41973
1012;;;;;;;;;2;"1. Start a guest
 # virsh start $guest
 # virsh dumpxml $guest
     <graphics type='spice' port='5900' autoport='yes' listen='0.0.0.0'>
       <listen type='address' address='0.0.0.0'/>
     </graphics>";"
​​";;RedHatEnterpriseLinux7/RHEL7-41973
1012;;;;;;;;;3;"2. Restart virtlogd service
 # systemctl restart virtlogd";"
​​";;RedHatEnterpriseLinux7/RHEL7-41973
1012;;;;;;;;;4;"3.
 1) Open spice client(by virt-viewer or remote-viewer or virt-manager), connect to guest
 2) Check file /var/log/libvirt/qemu/$guest.log";"2) New log is writen into /var/log/libvirt/qemu/$guest.log file:
 
 main_channel_link: add main channel client
 main_channel_handle_parsed: net test: latency 0.512000 ms, bitrate 800312622 bps (763.237593 Mbps)
 red_dispatcher_set_cursor_peer: 
 inputs_connect: inputs channel client create
​​";;RedHatEnterpriseLinux7/RHEL7-41973
1012;;;;;;;;;5;"4. Check virtlogd service status
 # systemctl status virtlogd
 ● virtlogd.service - Virtual machine log manager
    Loaded: loaded (/usr/lib/systemd/system/virtlogd.service; indirect; vendor preset: disabled)
    Active: active (running) xxxxxxxxxx
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-41973
1012;;;;;;;;;6;"5. Destroy the guest
 # virsh destroy $guest
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-41973
1012;;;;;;;;;7;"6.Check the domain destroy log is recorded in $guest.log file:
 # cat $guest.log";"2016-01-28T05:23:26.413382Z qemu-system-x86_64: terminating on signal 15 from pid 5045 
 2016-01-28 05:23:26.617+0000: shutting down";;RedHatEnterpriseLinux7/RHEL7-41973
1013;RHEL7-41976;$guest.log file is created in right directory with right permission;;Fangge Jin (fjin);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-41976
1014;RHEL7-41977;[virtlogd]Check qemu log when guest starts;When start guest, qemu log file will be created and the stdout of qemu process will be written into log file by virtlogd.;Fangge Jin (fjin);Critical;Positive;Automated;;1;"Set virtlogd as the log handler:
 
 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.
 
 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 
 
 (Re)start libvirtd
 # systemctl restart libvirtd
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41977
1014;;;;;;;;;2;"Remove the existing $guest.log files:
 # rm /var/log/libvirt/qemu/* -f";​​;;RedHatEnterpriseLinux7/RHEL7-41977
1014;;;;;;;;;3;"Start a guest with serial console
 (so qemu process will produce log when guest starts).
​​";​​;;RedHatEnterpriseLinux7/RHEL7-41977
1014;;;;;;;;;4;"Check the permission of $guest.log:
 # ll -h /var/log/libvirt/qemu/
";"The log file is rw permission.

 Output:
 total 98K
 -rw-------. 1 root root  52K 1月  27 16:35 rhel7.2.log
";;RedHatEnterpriseLinux7/RHEL7-41977
1014;;;;;;;;;5;"Check the content of $guest.log file:
 # cat /var/log/libvirt/qemu/rhel7.2.log";"The domain start log is writen into it correctly:

 2016-02-19 04:44:54.567+0000: starting up libvirt version: 1.3.2, package: 1.fc24_v1.3.1_308_g647ac97 (Unknown, 2016-02-19-07:06:36, localhost.localdomain), qemu version: 2.5.0 (qemu-2.5.0-4.fc24), hostname: localhost.localdomain
 LC_ALL=C PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin QEMU_AUDIO_DRV=spice /usr/bin/qemu-system-x86_64 -name rhel7 -S -machine pc-i440fx-2.5,accel=kvm,usb=off -cpu Penryn -m 1000 -realtime mlock=off -smp 1,maxcpus=10,sockets=10,cores=1,threads=1 -uuid 5d648cd8-fc41-420c-a546-3ca951b4838e -no-user-config -nodefaults -device sga -chardev socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-rhel7/monitor.sock,server,nowait -mon chardev=charmonitor,id=monitor,mode=control -rtc base=localtime,clock=vm,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-shutdown -global PIIX4_PM.disable_s3=0 -global PIIX4_PM.disable_s4=1 -boot order=cd,menu=on,reboot-timeout=0,splash-time=3000,strict=on -device pci-bridge,chassis_nr=1,id=pci.1,bus=pci.0,addr=0x6 -device pci-bridge,chassis_nr=2,id=pci.2,bus=pci.1,addr=0x8 -device piix3-usb-uhci,id=usb,bus=pci.0,addr=0x1.0x2 -device virtio-scsi-pci,id=scsi0,max_sectors=10000,bus=pci.0,addr=0xb -device virtio-serial-pci,id=virtio-serial0,bus=pci.1,addr=0x5 -device usb-ccid,id=ccid0 -drive file=/90121/fjin/r7raw.raw,format=raw,if=none,id=drive-virtio-disk0,cache=none -device virtio-blk-pci,scsi=off,bus=pci.0,addr=0x5,drive=drive-virtio-disk0,id=virtio-disk0 -netdev tap,fd=25,id=hostnet0,vhost=on,vhostfd=26 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:54:00:d3:3b:95,bus=pci.0,addr=0x3 -chardev spicevmc,id=charsmartcard0,name=smartcard -device ccid-card-passthru,chardev=charsmartcard0,id=smartcard0,bus=ccid0.0 -chardev pty,id=charserial0 -device isa-serial,chardev=charserial0,id=serial0 -chardev spicevmc,id=charchannel0,name=vdagent -device virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0 -chardev socket,id=charchannel1,path=/var/lib/libvirt/qemu/channel/target/domain-rhel7/org.qemu.guest_agent.0,server,nowait -device virtserialport,bus=virtio-serial0.0,nr=2,chardev=charchannel1,id=channel1,name=org.qemu.guest_agent.0 -device usb-tablet,id=input0 -spice port=5900,addr=0.0.0.0,disable-ticketing,seamless-migration=on -device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vgamem_mb=16,bus=pci.0,addr=0x2 -device intel-hda,id=sound0,bus=pci.0,addr=0x4 -device hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -device virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x7 -device pvpanic,ioport=1285 -msg timestamp=on
 char device redirected to /dev/pts/1 (label charserial0)
";;RedHatEnterpriseLinux7/RHEL7-41977
1015;RHEL7-41978;"[virtlogd]Check qemu log when guest fails to start due to ""qemu process exits"" error";"Verify the error log can be recorded correctly when guest failed to start due to ""qemu process exits""";Fangge Jin (fjin);High;Negative;Not Automated;;1;"Set virtlogd as the log handler:
 
 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.
 
 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 
 
 (Re)start libvirtd
 # systemctl restart libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41978
1015;;;;;;;;;2;"Set hugepage to 0 on host:
 # sysctl vm.nr_hugepages=0
​​";​​;;RedHatEnterpriseLinux7/RHEL7-41978
1015;;;;;;;;;3;"Start a guest with hugepage setting.
 # virsh start rhel7.2
 
​​";"Start failed.
 
 Output:
 error: Failed to start domain rhel7.2
 error: internal error: process exited while connecting to monitor: 2016-02-02T05:57:17.526821Z qemu-system-x86_64: -object memory-backend-file,id=ram-node0,prealloc=yes,mem-path=/dev/hugepages/libvirt/qemu,share=yes,size=524288000: unable to map backing store for hugepages: Cannot allocate memory
​​";;RedHatEnterpriseLinux7/RHEL7-41978
1015;;;;;;;;;4;"Check the domain log file:
 # ls /var/log/libvirt/qemu
​​";"The domain log file is created.
 
 Output:
 rhel7.2.log
​​";;RedHatEnterpriseLinux7/RHEL7-41978
1015;;;;;;;;;5;"Check the content of domain log file:
 # cat /var/log/libvirt/qemu/rhel7.2.log
​​";"Log is recorded correctly. Output:
 
 2016-02-02 05:57:17.388+0000: starting up libvirt version: 1.3.2, package: 1.fc24_v1.3.1_79_g63e15ad (Unknown, 2016-01-30-07:03:55, localhost.localdomain), qemu version: 2.5.0 (qemu-2.5.0-3.fc24), hostname: localhost.localdomain
 LC_ALL=C PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin QEMU_AUDIO_DRV=spice /usr/bin/qemu-system-x86_64 -name rhel7.2 -S -machine pc-i440fx-2.5,accel=kvm,usb=off,mem-merge=off -cpu Penryn -m 1000 -realtime mlock=on -smp 4,sockets=4,cores=1,threads=1 -object memory-backend-file,id=ram-node0,prealloc=yes,mem-path=/dev/hugepages/libvirt/qemu,share=yes,size=524288000 -numa node,nodeid=0,cpus=0-1,memdev=ram-node0 -object memory-backend-file,id=ram-node1,prealloc=yes,mem-path=/dev/hugepages/libvirt/qemu,size=524288000 -numa node,nodeid=1,cpus=2-3,memdev=ram-node1 -uuid 5d648cd8-fc41-420c-a546-3ca951b4838e -no-user-config -nodefaults -device sga -chardev socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-rhel7.2/monitor.sock,server,nowait -mon chardev=charmonitor,id=monitor,mode=control -rtc base=localtime,clock=vm,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-shutdown -global PIIX4_PM.disable_s3=0 -global PIIX4_PM.disable_s4=1 -boot order=cd,menu=on,reboot-timeout=0,splash-time=3000,strict=on -device pci-bridge,chassis_nr=1,id=pci.1,bus=pci.0,addr=0x6 -device pci-bridge,chassis_nr=2,id=pci.2,bus=pci.1,addr=0x8 -device piix3-usb-uhci,id=usb,bus=pci.0,addr=0x1.0x2 -device virtio-scsi-pci,id=scsi0,max_sectors=10000,bus=pci.0,addr=0xb -device virtio-serial-pci,id=virtio-serial0,bus=pci.1,addr=0x5 -device usb-ccid,id=ccid0 -drive file=/90121/fjin/r7raw.raw,format=raw,if=none,id=drive-virtio-disk0,cache=none -device virtio-blk-pci,scsi=off,bus=pci.0,addr=0x5,drive=drive-virtio-disk0,id=virtio-disk0 -netdev tap,fd=27,id=hostnet0,vhost=on,vhostfd=30 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:54:00:d3:3b:95,bus=pci.0,addr=0x3 -chardev spicevmc,id=charsmartcard0,name=smartcard -device ccid-card-passthru,chardev=charsmartcard0,id=smartcard0,bus=ccid0.0 -chardev pty,id=charserial0 -device isa-serial,chardev=charserial0,id=serial0 -chardev spicevmc,id=charchannel0,name=vdagent -device virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0 -chardev socket,id=charchannel1,path=/var/lib/libvirt/qemu/channel/target/domain-rhel7.2/org.qemu.guest_agent.0,server,nowait -device virtserialport,bus=virtio-serial0.0,nr=2,chardev=charchannel1,id=channel1,name=org.qemu.guest_agent.0 -device usb-tablet,id=input0 -spice port=5905,addr=0.0.0.0,disable-ticketing,seamless-migration=on -device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vgamem_mb=16,bus=pci.0,addr=0x2 -device intel-hda,id=sound0,bus=pci.0,addr=0x4 -device hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -device virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x7 -device pvpanic,ioport=1285 -msg timestamp=on
 2016-02-02T05:57:17.526821Z qemu-system-x86_64: -object memory-backend-file,id=ram-node0,prealloc=yes,mem-path=/dev/hugepages/libvirt/qemu,share=yes,size=524288000: unable to map backing store for hugepages: Cannot allocate memory
 2017-04-06 05:17:24.165+0000: shutting down, reason=failed
​​";;RedHatEnterpriseLinux7/RHEL7-41978
1016;RHEL7-41979;[virtlogd] Start virtlogd with default max_size and max_backups;"Verify that by default, guest.log file rotates when the file reaches 2MB and at most 3 backup files can exist:
1) When the file reaches to 2MB, virtlogd will create a new log file and write new log into it. While the old log files are renamed as: $guest.log -> $guest.log.0, $guest.log.0 -> $guest.log.1, etc.
2) When the number of backup files reaches to 3, virtlogd will remove the oldest backup file.";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Clear the content of qemu log file rhel7.2.log:
 # > /var/log/libvirt/qemu/rhel7.2.log
 
 Remove the other qemu log files:
 # rm /var/log/libvirt/qemu/rhel7.2.log.*";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41979
1016;;;;;;;;;2;"Record the content of qemu log file in a temporary file:
 # tailf /var/log/libvirt/qemu/rhel7.2.log | tee -a /tmp/rhel7.2.log";​​;;RedHatEnterpriseLinux7/RHEL7-41979
1016;;;;;;;;;3;"Start & destroy guest continually, to produce a lot of qemu logs:
 
 # while true; do virsh start rhel7.2; virsh destroy rhel7.2;done
​​";​​;;RedHatEnterpriseLinux7/RHEL7-41979
1016;;;;;;;;;4;"Wait a while, check the qemu log file(please be patient):
 # ll -h
​​";"1) The size of file rhel7.2.log is smaller than 2M
 2) File rhel7.2.log.0 exists, the size is 2M

 Output:
 total 2.1M
 -rw-------. 1 root root  60K 8月   5 14:16 rhel7.2.log
 -rw-------. 1 root root 2.0M 8月   5 14:16 rhel7.2.log.0";;RedHatEnterpriseLinux7/RHEL7-41979
1016;;;;;;;;;5;Check the content of qemu log files.;"1) The content of rhel7.2.log.0 is same as file /tmp/rhel7.2.log
 2) The last line of rhel7.2.log.0 is continued by the first line of rhel7.2.log seamlessly";;RedHatEnterpriseLinux7/RHEL7-41979
1016;;;;;;;;;6;"Wait more time, check the domain log file again:
 # ll -h
";"1) rhel7.2.log.0 and rhel7.2.log.1 are 2.0M
 2) rhel7.2.log is smaller than 2M
 
 Output:
 total 4.1K
 -rw-------. 1 root root  31K 8月  5 16:41 rhel7.2.log
 -rw-------. 1 root root 2.0M 8月  5 16:41 rhel7.2.log.0
 -rw-------. 1 root root 2.0M 8月  5 16:35 rhel7.2.log.1";;RedHatEnterpriseLinux7/RHEL7-41979
1016;;;;;;;;;7;Check the content of qemu log files.;The content of rhel7.2.log.1 is same as original rhel7.2.log.0 (also same as file /tmp/rhel7.2.log);;RedHatEnterpriseLinux7/RHEL7-41979
1016;;;;;;;;;8;"Wait more time, check the domain log file again:
 # ll -h
​​";"1) rhel7.2.log.0, rhel7.2.log.1 and rhel7.2.log.2 are 2.0M
 2) rhel7.2.log is smaller than 2M

 Output:
 total 484K
 -rw-------. 1 root root  35K 8月  5 16:42 rhel7.2.log
 -rw-------. 1 root root 2.0M 8月  5 16:42 rhel7.2.log.0
 -rw-------. 1 root root 2.0M 8月  5 16:41 rhel7.2.log.1
 -rw-------. 1 root root 2.0M 8月  5 16:35 rhel7.2.log.2";;RedHatEnterpriseLinux7/RHEL7-41979
1016;;;;;;;;;9;Check the content of qemu log files.;"1) The content of rhel7.2.log.2 issame as original rhel7.2.log.1 (also same as file /tmp/rhel7.2.log)
 2) The content of rhel7.2.log.1 is same as original rhel7.2.log.0";;RedHatEnterpriseLinux7/RHEL7-41979
1016;;;;;;;;;10;"Wait more time, check the domain log file again:
 # ll -h
​​";"1) rhel7.2.log.0, rhel7.2.log.1 and rhel7.2.log.2 are 2.0M
 2) rhel7.2.log is smaller than 2M


 Output:
 total 520K
 -rw-------. 1 root root 7.3K 8月  5 16:43 rhel7.2.log
 -rw-------. 1 root root 2.0M 8月  5 16:43 rhel7.2.log.0
 -rw-------. 1 root root 2.0M 8月  5 16:42 rhel7.2.log.1
 -rw-------. 1 root root 2.0M 8月  5 16:41 rhel7.2.log.2";;RedHatEnterpriseLinux7/RHEL7-41979
1016;;;;;;;;;11;Check the content of qemu log files.;"1) The content of rhel7.2.log.2 is same as original rhel7.2.log.1
 2) The content of rhel7.2.log.1 is same as original rhel7.2.log.0";;RedHatEnterpriseLinux7/RHEL7-41979
1017;RHEL7-41981;"Check  qemu log file handler when stdio handler is ""file""";"Qemu log is written into $guest.log file directly by qemu process when stdio_handler=""file""";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set stdio handler to file and restart libvirtd:
 
 # vim /etc/libvirt/qemu.conf:
 stdio_handler = ""file""

 # systemctl restart libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41981
1017;;;;;;;;;2;"Start a guest:
 # virsh start rhel7.2-1
​​";​​;;RedHatEnterpriseLinux7/RHEL7-41981
1017;;;;;;;;;3;"Check the opened file descriptor of qemu log file:
 # lsof /var/log/libvirt/qemu/rhel7.2-1.log 
 
​​";"qemu log file is opened by qemu-kvm process.
 
 Output: 
 COMMAND     PID USER   FD   TYPE DEVICE SIZE/OFF  NODE NAME
 qemu-kvm 27958 qemu    1w   REG  253,0     6001 87512 /var/log/libvirt/qemu/rhel7.2-1.log
 qemu-kvm 27958 qemu    2w   REG  253,0     6001 87512 /var/log/libvirt/qemu/rhel7.2-1.log";;RedHatEnterpriseLinux7/RHEL7-41981
1018;RHEL7-41983;[virtlogd]Remove the qemu log file  when guest is running;If the log file is removed when guest is running, new output of the qemu process will not be written into $guest.log file;Fangge Jin (fjin);High;Negative;Not Automated;;1;"Set virtlogd as the log handler:

 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.

 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 

 (Re)start libvirtd:
 # systemctl restart libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41983
1018;;;;;;;;;2;"Start a guest with spice graphic:
 # virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-41983
1018;;;;;;;;;3;"Check  the existence of qemu log file:
 # ls /var/log/libvirt/qemu/
​​";"The qemu log file exists.

 Output:
 rhel7.2.log";;RedHatEnterpriseLinux7/RHEL7-41983
1018;;;;;;;;;4;"Remove qemu log file
 # rm /var/log/libvirt/qemu/rhel7.2.log
​​";​​;;RedHatEnterpriseLinux7/RHEL7-41983
1018;;;;;;;;;5;"Connect to guest by spice client:

 # virt-viewer rhel7.2
";"
 
​​";;RedHatEnterpriseLinux7/RHEL7-41983
1018;;;;;;;;;6;"Check  the existence of qemu log file:
 # ls /var/log/libvirt/qemu/";No rhel7.2.log in the output.;;RedHatEnterpriseLinux7/RHEL7-41983
1018;;;;;;;;;7;"Destroy guest:
 # virsh destroy $guest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-41983
1018;;;;;;;;;8;"Check  the existence of qemu log file:
 # ls /var/log/libvirt/qemu/
​​";A new rhel7.2.log file is created;;RedHatEnterpriseLinux7/RHEL7-41983
1018;;;;;;;;;9;"Check the content of qemu log file:
 # cat /var/log/libvirt/qemu/rhel7.2.log
​​";"New domain log is recorded:

 2016-02-01 09:49:48.251+0000: shutting down, reason=destroyed";;RedHatEnterpriseLinux7/RHEL7-41983
1019;RHEL7-41984;[virtlogd]Start guest when a $guest.log file larger than 2M(maximum size for log file) already exists;If a $guest.log file larger than 2MB already exists, then start guest, the old $guest.log will be renamed to $guest.log.0, and virtlogd will create a new $guest.log file.;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Set virtlogd as the log handler:

 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.

 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 

 (Re)start libvirtd
 # systemctl restart libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41984
1019;;;;;;;;;2;"Prepare a qemu log file whose size is larger than 2MB in directory /var/log/libvirt/qemu/ :
 
 # ls -l /var/log/libvirt/qemu/
​​";"Output:
 -rw-------. 1 root root 2105964 Aug 25 16:41 test1.log";;RedHatEnterpriseLinux7/RHEL7-41984
1019;;;;;;;;;3;"Start guest
 # virsh start test1
​​";​​;;RedHatEnterpriseLinux7/RHEL7-41984
1019;;;;;;;;;4;"Check the existence of qemu log file:
 # ls -l /var/log/libvirt/qemu/ 
 
​​";"A new test1.log file is created immediately, and the previous test1.log is renamed to test1.log.0

 Output:
 -rw-------. 1 root root    5540 Aug 25 16:48 test1.log
 -rw-------. 1 root root 2105964 Aug 25 16:41 test1.log.0";;RedHatEnterpriseLinux7/RHEL7-41984
1019;;;;;;;;;5;"Check the content of qemu log file: 
 # cat /var/log/libvirt/qemu/test1.log
​​";log is recorded in the new log file correctly;;RedHatEnterpriseLinux7/RHEL7-41984
1020;RHEL7-41990;[virtlogd][Reload] Reload virtlogd.service when guest is running;Verify that virtlogd keeps the opened FDs when reload virtlogd.service when guest is running.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set virtlogd as the log handler:

 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.

 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 

 (Re)start libvirtd:
 # systemctl restart libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41990
1020;;;;;;;;;2;"Start a guest with spice graphic: 
 # virsh start $guest";​​;;RedHatEnterpriseLinux7/RHEL7-41990
1020;;;;;;;;;3;"Check the opened file descriptor of qemu log file:
 # lsof /var/log/libvirt/qemu/rhel7.2.log
​​";"qemu log file is opened by virtlogd.

 Output:
 COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF  NODE NAME
 virtlogd 4289 root   16w   REG  253,0    31787 87509 /var/log/libvirt/qemu/rhel7.2.log";;RedHatEnterpriseLinux7/RHEL7-41990
1020;;;;;;;;;4;"Reload virtlogd service:
 # systemctl reload virtlogd
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-41990
1020;;;;;;;;;5;"Check virtlogd status:
 # systemctl status virtlogd";"Virtlogd is active after reloading:

 ● virtlogd.service - Virtual machine log manager
    Loaded: loaded (/usr/lib/systemd/system/virtlogd.service; indirect; vendor preset: disabled)
    Active: active (running) since 一 2016-02-01 16:21:05 CST; 1h 10min ago
      Docs: man:virtlogd(8)
            http://libvirt.org
   Process: 26239 ExecReload=/bin/kill -USR1 $MAINPID (code=exited, status=0/SUCCESS)
  Main PID: 25757 (virtlogd)
    CGroup: /system.slice/virtlogd.service
            └─25757 /usr/sbin/virtlogd";;RedHatEnterpriseLinux7/RHEL7-41990
1020;;;;;;;;;6;"Check the opened FD again:
 # lsof /var/log/libvirt/qemu/rhel7.2.log";qemu log file is still opened by virtlogd.;;RedHatEnterpriseLinux7/RHEL7-41990
1020;;;;;;;;;7;"Open&close guest graphic via spice client, and check qemu log:
 1) # tailf /var/log/libvirt/qemu/$guest.log
 2) # virt-viewer $guest
 3) close virt-viewer
 4) check the output of tailf";"4) graphic connect & disconnect logs are recorded correctly. Output:
 
 main_channel_link: add main channel client
 main_channel_handle_parsed: net test: latency 48.529000 ms, bitrate 2031746031 bps (1937.624007 Mbps)
 inputs_connect: inputs channel client create
 red_dispatcher_set_cursor_peer: 
 (close graphic)
 red_channel_client_disconnect: rcc=0x7f7286b82000 (channel=0x7f728587c000 type=3 id=0)
 red_channel_client_disconnect: rcc=0x7f728670e000 (channel=0x7f72858d3200 type=2 id=0)
 red_channel_client_disconnect_dummy: rcc=0x7f728682d000 (channel=0x7f7286a132e0 type=5 id=0)
 snd_channel_put: SndChannel=0x7f7286672000 freed
 red_channel_client_disconnect_dummy: rcc=0x7f7286828000 (channel=0x7f7286a13440 type=6 id=0)
 snd_channel_put: SndChannel=0x7f7285cd8000 freed
 red_channel_client_disconnect: rcc=0x7f72865ab000 (channel=0x7f7285874000 type=1 id=0)
 main_channel_client_on_disconnect: rcc=0x7f72865ab000
 red_client_destroy: destroy client 0x7f728578e500 with #channels=6
 red_dispatcher_disconnect_cursor_peer: 
 red_channel_client_disconnect: rcc=0x7f7286b87000 (channel=0x7f72858c6580 type=4 id=0)
 red_dispatcher_disconnect_display_peer:";;RedHatEnterpriseLinux7/RHEL7-41990
1021;RHEL7-41996;[virtlogd][-t | --timeout] Start virtlogd with --timeout <SECONDS> and with active guests;Verify that virtlogd will not timeout as long as a qemu log file is opened(it means a guest is running);Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set argument --timeout in /etc/sysconfig/virtlogd:
 
 VIRTLOGD_ARGS=""--timeout=30""
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41996
1021;;;;;;;;;2;"Restart virtlogd service
 # systemctl restart virtlogd";​​;;RedHatEnterpriseLinux7/RHEL7-41996
1021;;;;;;;;;3;"Start two domains
​​";​​;;RedHatEnterpriseLinux7/RHEL7-41996
1021;;;;;;;;;4;"Destroy one domain
 # virsh destroy rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-41996
1021;;;;;;;;;5;"After 30s, check virtlogd process
 # ps -fC virtlogd
 
​​";virtlogd process exists.;;RedHatEnterpriseLinux7/RHEL7-41996
1021;;;;;;;;;6;"Destroy the other domain
 # virsh destroy rhel7.2-1
​​";​​;;RedHatEnterpriseLinux7/RHEL7-41996
1021;;;;;;;;;7;"After 30s, check libvirtd process
 # ps -fC virtlogd
 
​​";virtlogd process doesn't exist;;RedHatEnterpriseLinux7/RHEL7-41996
1022;RHEL7-41998;[virtlogd]Check qemu log  when start multiple domains;"Verify that each guest has its own $guest.log file when there are multiple domains.
";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set virtlogd as the log handler:

 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.

 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 

 (Re)start libvirtd
 # systemctl restart libvirtd
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-41998
1022;;;;;;;;;2;"Start two domains:
 # virsh start rhel7.2
 # virsh start rhel7.2-1";​​;;RedHatEnterpriseLinux7/RHEL7-41998
1022;;;;;;;;;3;"Check the existence of qemu log files:
 # ls /var/log/libvirt/qemu/
​​";"each domain has its own log file.

 Output:
 rhel7.2.log
 rhel7.2-1.log";;RedHatEnterpriseLinux7/RHEL7-41998
1022;;;;;;;;;4;"Check content of qemu log files:
 # cat /var/log/libvirt/qemu/rhel7.2.log
  
 # cat /var/log/libvirt/qemu/rhel7.2-1.log";logs are recorded correctly;;RedHatEnterpriseLinux7/RHEL7-41998
1023;RHEL7-42015;[virtlogd] [Reload] [negative] Virtlogd.service reload failed with invalid configuration;set invalid configuration in virtlogd.conf, virtlogd will fail to reload;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Make sure virtlogd is running:
 # systemctl status virtlogd
​​";Virtlogd is in active status.;Test Case;RedHatEnterpriseLinux7/RHEL7-42015
1023;;;;;;;;;2;"Set invalid configuration for virtlogd in /etc/libvirt/virtlogd.conf. For example:
 
 max_clients = a";"
​​";;RedHatEnterpriseLinux7/RHEL7-42015
1023;;;;;;;;;3;"Reload virtlogd:
 # systemctl reload virtlogd
 
 # echo $?
 0";"
​​";;RedHatEnterpriseLinux7/RHEL7-42015
1023;;;;;;;;;4;"Check the status of virtlogd:
 # systemctl status virtlogd
​​";"virtlogd is in failed status.
 
 Output:
 ● virtlogd.service - Virtual machine log manager
    Loaded: loaded (/usr/lib/systemd/system/virtlogd.service; indirect; vendor preset: disabled)
    Active: failed (Result: exit-code) since 二 2016-02-02 10:14:01 CST; 6s ago";;RedHatEnterpriseLinux7/RHEL7-42015
1024;RHEL7-42016;[virtlogd] [start] [negative] Virtlogd.serivce start failed with invalid configuration;"Set invalid configuration in virtlogd.conf, virtlogd will fail to start and enters failed status
 Bug 1276239 - Restart libvirtd service should report error when setting negative value for parameters expected unsigned value in qemu.conf - NOTABUG";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Set invalid configuration for virtlogd in /etc/libvirt/virtlogd.conf. For example:
 
 max_clients = a";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-42016
1024;;;;;;;;;2;"Restart virtlogd:
 # systemctl restart virtlogd

 # echo $?
 0";"
​​";;RedHatEnterpriseLinux7/RHEL7-42016
1024;;;;;;;;;3;"Check the status of virtlogd:
 # systemctl status virtlogd";"virtlogd is in failed status. Output:
 
 ● virtlogd.service - Virtual machine log manager
    Loaded: loaded (/usr/lib/systemd/system/virtlogd.service; indirect; vendor preset: disabled)
    Active: failed (Result: exit-code) since 二 2016-02-02 10:14:01 CST; 6s ago
​​";;RedHatEnterpriseLinux7/RHEL7-42016
1025;RHEL7-42017;[negative] Starts virtlogd process in foreground with invalid configuration;Set invalid configuration in /etc/libvirt/virtlogd.conf, virtlogd will fail to start and output clear error message.;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Stop virtlogd socket:
 # systemctl stop virtlogd.socket
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42017
1025;;;;;;;;;2;"Make sure virtlogd process doesn't exist:
 # ps aux|grep virtlogd
 (no output)
";​​;;RedHatEnterpriseLinux7/RHEL7-42017
1025;;;;;;;;;3;"Set invalid configuration in /etc/libvirt/virtlogd.conf: 
 max_clients = a
";"
​​";;RedHatEnterpriseLinux7/RHEL7-42017
1025;;;;;;;;;4;"Start virtlogd in foreground:
 # virtlogd
 
 
 
​​";"virtlogd fails to start.
 
 Output:
 2016-02-02 02:22:05.107+0000: 29975: info : libvirt version: 1.3.2, package: 1.fc24_v1.3.1_79_g63e15ad (Unknown, 2016-01-30-07:03:55, localhost.localdomain)
 2016-02-02 02:22:05.107+0000: 29975: info : hostname: localhost.localdomain
 2016-02-02 02:22:05.107+0000: 29975: error : main:1027 : Can't load config file: configuration file syntax error: /etc/libvirt/virtlogd.conf:59: expecting a value: /etc/libvirt/virtlogd.conf
​​";;RedHatEnterpriseLinux7/RHEL7-42017
1025;;;;;;;;;5;"# echo $?
 1";Virtlogd exits with 1;;RedHatEnterpriseLinux7/RHEL7-42017
1026;RHEL7-42022;Start virtlogd process in foreground;Virtlogd can write qemu log normally when runs in foreground.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Stop virtlogd.socket and libvirtd service:
 #systemctl stop virtlogd.socket
 
 # systemctl stop libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42022
1026;;;;;;;;;2;"Check virtlogd process:
 # ps -C virtlogd
";"virtlogd process doesn't exist.
 
 Output:
 PID TTY          TIME CMD";;RedHatEnterpriseLinux7/RHEL7-42022
1026;;;;;;;;;3;"Run libvirtd as a daemon
 # libvirtd -d";​​;;RedHatEnterpriseLinux7/RHEL7-42022
1026;;;;;;;;;4;"Run virtlogd in foreground:
 
 # virtlogd
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42022
1026;;;;;;;;;5;"Check virtlogd process
 #  ps -o ppid,pid,pgid,sid,tpgid,tty,stat,command -C ""virtlogd""
  ";"virtlogd process exists. Output:
 
 
  PPID   PID  PGID   SID TPGID TT       STAT COMMAND
 26995 28470 28470 26995 28470 pts/0    Sl+  virtlogd";;RedHatEnterpriseLinux7/RHEL7-42022
1026;;;;;;;;;6;"Start a guest:
 # virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42022
1026;;;;;;;;;7;"Check the opened file descriptor of qemu log file:
 # lsof /var/log/libvirt/qemu/rhel7.2.log";qemu log file is opened by virtlogd;;RedHatEnterpriseLinux7/RHEL7-42022
1026;;;;;;;;;8;"Check the content of qemu log file:
 # cat /var/log/libvirt/qemu/rhel7.2.log
​​";Qemu log is recorded in /var/log/libvirt/qemu/$guest.log correctly;;RedHatEnterpriseLinux7/RHEL7-42022
1027;RHEL7-42024;[Restart] Restart virtlogd.service;virtlogd service can be restarted by systemctl;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Make sure virtlogd is running:
 # systemctl status virtlogd
 
 Note:
 If virtlogd is not running, start it:
 # systemctl start virtlogd
​​";"virtlogd is running. Output:
 
 ● virtlogd.service - Virtual machine log manager
    Loaded: loaded (/usr/lib/systemd/system/virtlogd.service; indirect; vendor preset: disabled)
    Active: active (running) since 二 2016-02-02 10:00:41 CST; 9s ago
 ...
  Main PID: 453 (virtlogd)
    CGroup: /system.slice/virtlogd.service
            └─453 /usr/sbin/virtlogd";Test Case;RedHatEnterpriseLinux7/RHEL7-42024
1027;;;;;;;;;2;"Restart virtlogd service:
 # systemctl restart virtlogd";​​;;RedHatEnterpriseLinux7/RHEL7-42024
1027;;;;;;;;;3;"Check virtlogd status:
 # systemctl status virtlogd
 
 
 
 
 
​​";"Virtlogd.service is active and the pid has changed.
 
 ● virtlogd.service - Virtual machine log manager
    Loaded: loaded (/usr/lib/systemd/system/virtlogd.service; indirect; vendor preset: disabled)
    Active: active (running) since 二 2016-02-02 11:03:11 CST; 4s ago
 ....
  Main PID: 462 (virtlogd)
    CGroup: /system.slice/virtlogd.service
            └─462 /usr/sbin/virtlogd
​​";;RedHatEnterpriseLinux7/RHEL7-42024
1027;;;;;;;;;4;"Check virtlogd process:
 #  ps -o ppid,pid,pgid,sid,tpgid,tty,stat,command -C ""virtlogd""
  ";"virtlogd process exists. Output:
 
 PPID   PID  PGID   SID TPGID TT  STAT  COMMAND
     1    462   462     462    -1      ?    Ssl    virtlogd";;RedHatEnterpriseLinux7/RHEL7-42024
1028;RHEL7-42026;[Stop] Stop virtlogd.service;virtlogd service can be stopped by systemctl;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Make sure virtlogd is running:
 # systemctl status virtlogd
​​";"virtlogd is running.
 
 Output:
 ● virtlogd.service - Virtual machine log manager
    Loaded: loaded (/usr/lib/systemd/system/virtlogd.service; indirect; vendor preset: disabled)
    Active: active (running) since 二 2016-02-02 10:00:41 CST; 9s ago";Test Case;RedHatEnterpriseLinux7/RHEL7-42026
1028;;;;;;;;;2;"Stop virtlogd service
 # systemctl stop virtlogd
 
​​";"virtlogd is stopped.
 
 Output:
 Warning: Stopping virtlogd.service, but it can still be activated by:
   virtlogd.socket";;RedHatEnterpriseLinux7/RHEL7-42026
1028;;;;;;;;;3;"Check virtlogd status
 # systemctl status virtlogd
 
​​";"virtlogd is inactive.
 
 Output:
 ● virtlogd.service - Virtual machine log manager
    Loaded: loaded (/usr/lib/systemd/system/virtlogd.service; indirect; vendor preset: disabled)
    Active: inactive (dead) since 二 2016-02-02 11:02:15 CST; 22s ago
​​";;RedHatEnterpriseLinux7/RHEL7-42026
1028;;;;;;;;;4;"Check virtlogd process:
 #  ps -C ""virtlogd""";2) Nothing output;;RedHatEnterpriseLinux7/RHEL7-42026
1029;RHEL7-42027;[negative] Run another virtlogd process when a virtlogd process is already running;Only one virtlogd process can be lauched at the same time, so the second virtlogd process will fail to start and output clear error message.;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Make sure one virtlogd process is already running:
 # ps -C virtlogd
​​";"Output:
 PID     TTY   TIME      CMD
 28470 ?       00:00:00 virtlogd";Test Case;RedHatEnterpriseLinux7/RHEL7-42027
1029;;;;;;;;;2;"Start another virtlogd process in foreground:
 # virtlogd
 
​​";"virtlogd fails to start.
 
 Output: 
 2016-03-01 09:25:30.938+0000: 13415: info : libvirt version: 1.3.1, package: 1.el7 (Red Hat, Inc. <http://bugzilla.redhat.com/bugzilla>, 2016-02-22-07:41:07, x86-021.build.eng.bos.redhat.com)
 2016-03-01 09:25:30.938+0000: 13415: info : hostname: intel-q9550-4-2.englab.nay.redhat.com
 2016-03-01 09:25:30.938+0000: 13415: error : virPidFileAcquirePath:422 : Failed to acquire pid file '/var/run/virtlogd.pid': Resource temporarily unavailable";;RedHatEnterpriseLinux7/RHEL7-42027
1029;;;;;;;;;3;"# echo $?
 1";Virtlogd exits with 1;;RedHatEnterpriseLinux7/RHEL7-42027
1030;RHEL7-42049;[nwfilter-define] [negative] Define a new network filter with invalid attribute;"Define a new network filter with invalid attribute
";Fangge Jin (fjin);Medium;Negative;Automated;;1;"# virsh nwfilter-undefine disallow-arp
 Network filter disallow-arp undefined
 
 # cat disallow-arp.xml
 <filter name='disallow-arp' chain='arp'>
 <rule action='dropaaaa' direction='inout' priority='500'/>
 </filter>
 
 # virsh nwfilter-define disallow-arp.xml
 error: Failed to define network filter from disallow-arp.xml
 error: unsupported configuration: unknown rule action attribute value";"
 
 
 
 
 
 
 
 
 Define failed
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-42049
1031;RHEL7-42056;[Ctrl-C] Terminate a virtlogd process in foreground by Ctrl-C;virtlogd process in foreground can be terminated by Ctrl-C;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Stop virtlogd socket:
 # systemctl stop virtlogd.socket
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42056
1031;;;;;;;;;2;"Check virtlogd process:
 # ps -C virtlogd
";"virtlogd process doesn't exist.
 
 Output:
 PID TTY          TIME CMD";;RedHatEnterpriseLinux7/RHEL7-42056
1031;;;;;;;;;3;"Start virtlogd in foreground:
 # virtlogd
";​​;;RedHatEnterpriseLinux7/RHEL7-42056
1031;;;;;;;;;4;"Check virtlogd process:
 # ps -C virtlogd
​​";"Virtlogd process exists.
 
 Output:
 PID      TTY   TIME       CMD
 22615 ?        00:00:00 virtlogd";;RedHatEnterpriseLinux7/RHEL7-42056
1031;;;;;;;;;5;"Terminate virtlogd by Ctrl-C:
 # virtlogd
 ^C
";virtlogd is terminated by Ctrl+C;;RedHatEnterpriseLinux7/RHEL7-42056
1031;;;;;;;;;6;"Check virtlogd process:
 # ps -C virtlogd";"virtlogd process doesn't exist.
 
 Output:
 PID TTY          TIME CMD ";;RedHatEnterpriseLinux7/RHEL7-42056
1032;RHEL7-42058;[negative] Start virtlogd process in foreground with invalid argument;"Start virtlogd with invalid arguments in command line, virtlogd will fail to start and output clear error message.
";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Stop virtlogd socket:
 # systemctl stop virtlogd.socket
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42058
1032;;;;;;;;;2;"Make sure virtlogd process doesn't exist:
 # ps aux|grep virtlogd
 (no output)
";​​;;RedHatEnterpriseLinux7/RHEL7-42058
1032;;;;;;;;;3;"Start virtlogd in foreground with invalid argument:
 # virtlogd -t a
​​";"virtlogd fails to start.
 
 Output:
 2016-02-04 03:28:18.873+0000: 21828: info : libvirt version: 1.3.2, package: 1.fc24_v1.3.1_92_g6ec319b (Unknown, 2016-02-03-07:03:32, localhost.localdomain)
 2016-02-04 03:28:18.873+0000: 21828: info : hostname: localhost.localdomain
 2016-02-04 03:28:18.873+0000: 21828: error : main:972 : Invalid value for timeout
​​";;RedHatEnterpriseLinux7/RHEL7-42058
1032;;;;;;;;;4;"# echo $?
 1";Virtlogd exits with 1;;RedHatEnterpriseLinux7/RHEL7-42058
1033;RHEL7-42062;[net-info] [negative] Print network information - non-existing network;Print network information - non-existing network.;Fangge Jin (fjin);Medium;Negative;Automated;;1;#virsh net-list --all;"# virsh net-list --all
 Name State Autostart Persistent
 \--------------------------------------------------------------------
 test active yes yes
 default inactive no yes";Test Case;RedHatEnterpriseLinux7/RHEL7-42062
1033;;;;;;;;;2;"
 #virsh net-info test1";"# virsh net-info test1
 error: failed to get network 'test1'
 error: Network not found: no network with matching name 'test1'";;RedHatEnterpriseLinux7/RHEL7-42062
1034;RHEL7-42063;[net-update][--command delete] update parts of an existing network's configuration;Check update parts of an existing network's configuration.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"# virsh net-start definebr1
 Network definebr1 started
 
 # virsh net-dumpxml definebr1
 <network>
 <name>definebr1</name>
 <uuid>fb09e249-7cce-252e-2417-c47d6d60b3d6</uuid>
 <forward mode='nat'/>
 <bridge name='definebr1' stp='on' delay='0' />
 <mac address='52:54:00:D5:9B:F0'/>
 <ip address='10.0.0.1' netmask='255.255.255.0'>
 <dhcp>
 <range start='10.0.0.2' end='10.0.0.5' />
 <range start='10.0.0.8' end='10.0.0.10' />
 <range start='10.0.0.14' end='10.0.0.253' />
 </dhcp>
 </ip>
 </network> 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42063
1034;;;;;;;;;2;"For an active network
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42063
1034;;;;;;;;;3;"Scenario 1: Delete a part with --live
 # cat net-update.xml
 <range start='10.0.0.14' end='10.0.0.253' />
 
 13. # virsh net-update --network definebr1 --command delete --section ip-
 dhcp-range --xml net-update.xml --live
 Updated network definebr1 live state
 
 # virsh net-dumpxml definebr1
 <network>
 <name>definebr1</name>
 <uuid>fb09e249-7cce-252e-2417-c47d6d60b3d6</uuid>
 <forward mode='nat'/>
 <bridge name='definebr1' stp='on' delay='0' />
 <mac address='52:54:00:D5:9B:F0'/>
 <ip address='10.0.0.1' netmask='255.255.255.0'>
 <dhcp>
 <range start='10.0.0.2' end='10.0.0.5' />
 <range start='10.0.0.8' end='10.0.0.10' />
 </dhcp>
 </ip>
 </network>";​​;;RedHatEnterpriseLinux7/RHEL7-42063
1034;;;;;;;;;4;"Scenaro 2: delete a part with --current
 # virsh net-update --network definebr1 --command delete --section ip-
 dhcp-range --xml net-update.xml --current
 Updated network definebr1 live state
 
 # virsh net-dumpxml definebr1
 <network>
 <name>definebr1</name>
 <uuid>fb09e249-7cce-252e-2417-c47d6d60b3d6</uuid>
 <forward mode='nat'/>
 <bridge name='definebr1' stp='on' delay='0' />
 <mac address='52:54:00:D5:9B:F0'/>
 <ip address='10.0.0.1' netmask='255.255.255.0'>
 <dhcp>
 <range start='10.0.0.2' end='10.0.0.5' />
 <range start='10.0.0.8' end='10.0.0.10' />
 </dhcp>
 </ip>
 </network>";​​;;RedHatEnterpriseLinux7/RHEL7-42063
1034;;;;;;;;;5;"Scenaro 3: delete a part with --config
 # virsh net-update --network definebr1 --command delete --section ip-
 dhcp-range --xml net-update.xml --config
 Updated network definebr1 persistent config
 
 # virsh net-dumpxml definebr1
 <network>
 <name>definebr1</name>
 <uuid>fb09e249-7cce-252e-2417-c47d6d60b3d6</uuid>
 <forward mode='nat'/>
 <bridge name='definebr1' stp='on' delay='0' />
 <mac address='52:54:00:D5:9B:F0'/>
 <ip address='10.0.0.1' netmask='255.255.255.0'>
 <dhcp>
 <range start='10.0.0.2' end='10.0.0.5' />
 <range start='10.0.0.8' end='10.0.0.10' />
 <range start='10.0.0.14' end='10.0.0.253'/>
 </dhcp>
 </ip>
 </network>
 
 Check the effect:
 1). # virsh net-destroy definebr1
 Network definebr1 destroyed
 
 2)# virsh net-start definebr1
 Network definebr1 started
 
 3)# virsh net-dumpxml definebr1
 <network>
 <name>definebr1</name>
 <uuid>fb09e249-7cce-252e-2417-c47d6d60b3d6</uuid>
 <forward mode='nat'/>
 <bridge name='definebr1' stp='on' delay='0' />
 <mac address='52:54:00:D5:9B:F0'/>
 <ip address='10.0.0.1' netmask='255.255.255.0'>
 <dhcp>
 <range start='10.0.0.2' end='10.0.0.5' />
 <range start='10.0.0.8' end='10.0.0.10' />
 </dhcp>
 </ip>
 </network>";​​;;RedHatEnterpriseLinux7/RHEL7-42063
1034;;;;;;;;;6;"For an inactive network:
 # virsh net-list --all
 Name State Autostart Persistent
 \--------------------------------------------------
 default active yes yes
 definebr1 inactive no yes
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42063
1034;;;;;;;;;7;"Delete a part with --live
 # virsh net-update --network definebr1 --command delete --section ip-
 dhcp-range --xml net-update.xml --live
 error: Failed to update network definebr1
 error: Requested operation is not valid: network is not running";​​;;RedHatEnterpriseLinux7/RHEL7-42063
1035;RHEL7-42064;[net-create] [negative]- Create a network from an XML file - an empty file;Create a network from an XML file - an empty file.;Fangge Jin (fjin);Medium;Negative;Automated;;1;"4. Try an empty file name
 #virsh net-create """"
 
 
 
 #echo $?";"4.
 # virsh net-create """"
 error: Failed to get option 'file': Option argument is empty
 
 # echo $?
 1";Test Case;RedHatEnterpriseLinux7/RHEL7-42064
1036;RHEL7-42066;[virtlogd] virtlogd log testing - logout outputs;"Verify that various log_outputs settings for virtlogd can take effect. Test matrix: 
log_level | log_outputs
1 | 1:stderr
1 | 2:file:/var/log/libvirt/virtlogd.log
1 | 3:journald
1 | 4:syslog:libvirtd";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Configure virtlogd log in /etc/libvirt/virtlogd.conf according to the test matrix in description field.
 
 log_level=1
 log_outputs=""log_outputs""";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42066
1036;;;;;;;;;2;"Restart virtlogd:
 # systemctl restart virtlogd
 
 Note:
 For log_outputs=1:stderr, need to start virtlogd in foreground:
 1) Stop libvirtd and virtlogd service:
 # systemctl stop libvirtd
 # systemctl stop virtlogd.socket
 
 2) Start libvirtd as a daemon:
 # libvirtd -d
 
 3) Start virtlogd in foreground:
 # virtlogd 2>&1| tee -a /tmp/std-virtlogd.log";​​;;RedHatEnterpriseLinux7/RHEL7-42066
1036;;;;;;;;;3;Do some operations to produce corresponding level of log;​​;;RedHatEnterpriseLinux7/RHEL7-42066
1036;;;;;;;;;4;Check virtlogd log;​​;;RedHatEnterpriseLinux7/RHEL7-42066
1036;;;;;;;;;5;How to produce virtlogd log:;​​;;RedHatEnterpriseLinux7/RHEL7-42066
1036;;;;;;;;;6;"1) How to produce error log:
 Start another virtlogd process in foreground: # virtlogd 2> /tmp/std-virtlogd.log";"The error log:
 
 2017-04-21 11:04:32.995+0000: 31886: error : virPidFileAcquirePath:422 : Failed to acquire pid file '/var/run/virtlogd.pid': Resource temporarily unavailable";;RedHatEnterpriseLinux7/RHEL7-42066
1036;;;;;;;;;7;"2) How to produce warn log:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42066
1036;;;;;;;;;8;How to check virtlogd log:;​​;;RedHatEnterpriseLinux7/RHEL7-42066
1036;;;;;;;;;9;"1) For log_outputs=1:stderr, check the redirected file:
 # cat /tmp/std-virtlogd.log|grep error
 
 # cat /tmp/std-virtlogd.log |grep warning
 
 # cat /tmp/std-virtlogd.log|grep info
 
 # cat /tmp/std-virtlogd.log|grep debug";"All level log messages are written to stderr.
​​";;RedHatEnterpriseLinux7/RHEL7-42066
1036;;;;;;;;;10;"2) For log_outputs=2:file:/var/log/libvirt/virtlogd.log:
 # cat /var/log/libvirt/virtlogd.log |grep error
 
 # cat /var/log/libvirt/virtlogd.log |grep warning
 
 # cat /var/log/libvirt/virtlogd.log |grep info
 
 # cat /var/log/libvirt/virtlogd.log |grep debug";"1) ""info"", ""warning"", ""error"" log messages are written to /var/log/libvirt/virtlogd.log.
 2) NO ""debug"" log messages output.
​​";;RedHatEnterpriseLinux7/RHEL7-42066
1036;;;;;;;;;11;"3) For log_outputs=3:journald:
 # journalctl -f";"1) ""warning"", ""error"" log messages are written to journal log.
 2) NO ""debug"" and ""info"" log messages output.
​​";;RedHatEnterpriseLinux7/RHEL7-42066
1036;;;;;;;;;12;"4) For log_outputs=4:syslog:virtlogd
 # cat /var/log/messages | grep virtlogd | grep error 

 # cat /var/log/messages| grep virtlogd | grep warning

 # cat /var/log/messages| grep virtlogd | grep info

 # cat /var/log/messages| grep virtlogd | grep debug";"Only ""error"" log messages are written to /var/log/messages.
 
​​";;RedHatEnterpriseLinux7/RHEL7-42066
1037;RHEL7-42067;[virtlogd] virtlogd log testing - log level;"Verify that various log_level settings for virtlogd can take effect. Test matrix: 
log_level | log_outputs
4 | 1:file:/var/log/libvirt/virtlogd.log
3 | 1:file:/var/log/libvirt/virtlogd.log
2 | 1:file:/var/log/libvirt/virtlogd.log
1 | 1:file:/var/log/libvirt/virtlogd.log";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Stop virtlogd.service:
 # systemctl stop virtlogd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42067
1037;;;;;;;;;2;"Clear previous log:
 # > /var/log/libvirt/virtlogd.log";​​;;RedHatEnterpriseLinux7/RHEL7-42067
1037;;;;;;;;;3;"Configure virtlogd log in /etc/libvirt/virtlogd.conf according to the test matrix in description field.

 log_level=log_level
 log_outputs=""1:file:/var/log/libvirt/virtlogd.log""";​​;;RedHatEnterpriseLinux7/RHEL7-42067
1037;;;;;;;;;4;"Start virtlogd service:
 # systemctl start virtlogd
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-42067
1037;;;;;;;;;5;"Do some operations to produce corresponding level of log, refer to case:
 RHEL7-42066 - [virtlogd] virtlogd log testing - logout outputs ";​​;;RedHatEnterpriseLinux7/RHEL7-42067
1037;;;;;;;;;6;"Check log messages:
 # cat /var/log/libvirt/virtlogd.log | grep error
 # cat /var/log/libvirt/virtlogd.log | grep warning
 # cat /var/log/libvirt/virtlogd.log | grep info
 # cat /var/log/libvirt/virtlogd.log | grep debug";"For log_level=1, all levels of log are written.
 For log_level=2, only info, warning and error log are written.
 For log_level=3, only warning and error log are written.
 For log_level=4, only error log is written.";;RedHatEnterpriseLinux7/RHEL7-42067
1038;RHEL7-42068;[virtlogd] virtlogd log testing - log filter;"Verify that various log_filters settings for virtlogd can take effect. Test matrix: 
log_level | log_filters | log_outputs
4 | 1:+logging 2:event 3:rpc | 1:file:/var/log/libvirt/virtlogd.log";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Stop virtlogd service
 # systemctl stop virtlogd
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42068
1038;;;;;;;;;2;"Clear previous log:
 # > /var/log/libvirt/virtlogd.log";​​;;RedHatEnterpriseLinux7/RHEL7-42068
1038;;;;;;;;;3;"Configure virtlogd log in /etc/libvirt/virtlogd.conf according to the test matrix in description field:
 
 log_level = 4
 log_filters=""1:+logging 2:event 3:rpc""
 log_outputs=""1:file:/var/log/libvirt/virtlogd.log""";​​;;RedHatEnterpriseLinux7/RHEL7-42068
1038;;;;;;;;;4;"Start virtlogd:
 # systemctl start virtlogd";​​;;RedHatEnterpriseLinux7/RHEL7-42068
1038;;;;;;;;;5;"Check log messages:
 # cat /var/log/libvirt/virtlogd.log
​​";"1) For filter ""1:+logging""
 It includes debug log with stack traces for logging log.
 
 2017-04-22 03:24:40.726+0000: 28985: debug : main:989 : Decided on pid file path '/var/run/virtlogd.pid'
 /usr/sbin/virtlogd(virLogMessage+0x9f)[0x562653e7803f]
 /usr/sbin/virtlogd(main+0x6f5)[0x562653e30be5]
 /lib64/libc.so.6(__libc_start_main+0xf5)[0x7fc55c2d7b35]
 /usr/sbin/virtlogd(+0x3860d)[0x562653e3360d]
 
 2) For filter ""2:event""
 It includes info log with stack traces for event log, and NO debug log for event log.
 
 For example:
 This log can be found:
 2016-02-04 03:13:12.098+0000: 21431: info : virEventPollRunOnce:641 : EVENT_POLL_RUN: nhandles=4 timeout=-1
 
 This log is not found:
 2017-04-22 03:14:30.923+0000: 28527: debug : virEventPollMakePollFDs:401 : Prepare n=0 w=1, f=7 e=1 d=0
 
 3) For filter ""3:rpc""
 It includes no debug/info log for rpc.
 
 For example, this log can't be found:
 2017-04-22 03:01:21.322+0000: 28206: debug : virNetServerProgramNew:84 : prog=0x55aee5d5fce0
 
 4) For other category without a specified filter:
 NO debug/info/warn log for other category.
 
 For example, NO such debug log for util:
 2017-04-22 03:01:21.322+0000: 28212: debug : virThreadJobSetWorker:77 : Thread 28212 is running worker virNetServerHandleJob";;RedHatEnterpriseLinux7/RHEL7-42068
1038;;;;;;;;;6;"Start another virtlogd process in foreground:
 # virtlogd 
​​";"Error log can be found for util log:
 
 2017-04-22 03:27:34.816+0000: 29291: error : virPidFileAcquirePath:422 : Failed to acquire pid file '/var/run/virtlogd.pid': Resource temporarily unavailable
​​";;RedHatEnterpriseLinux7/RHEL7-42068
1039;RHEL7-42160;[nodedev-dumpxml] The driver in output of virsh command nodedev-dumpxml should be updated timely;"Refer to:
 Bug 979290 - The driver in output of virsh command nodedev-dumpxml should be updated timely - FIXED";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1. check the pci driver with virsh command nodedev-dumpxml.
 # virsh nodedev-dumpxml pci_0000_04_00_0
 <device>
 <name>pci_0000_04_00_0</name>
 <parent>pci_0000_00_1e_0</parent>
 <driver>
 <name>**e1000**</name>
 </driver>
 <capability type='pci'>
 <domain>0</domain>
 <bus>4</bus>
 <slot>0</slot>
 <function>0</function>
 <product id='0x107c'>82541PI Gigabit Ethernet Controller</product>
 <vendor id='0x8086'>Intel Corporation</vendor>
 </capability>
 </device>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42160
1039;;;;;;;;;2;"2. check it's driver with kernel command
 # readlink -f /sys/bus/pci/devices/0000\:04\:00.0/driver/
 /sys/bus/pci/drivers/e1000";​​;;RedHatEnterpriseLinux7/RHEL7-42160
1039;;;;;;;;;3;"3. change the pci's driver to others, such as change from driver e1000 to driver vfio-pci
 # virsh nodedev-detach pci_0000_04_00_0
 Device pci_0000_04_00_0 detached";​​;;RedHatEnterpriseLinux7/RHEL7-42160
1039;;;;;;;;;4;"4. check the driver with kernel command again, it is changed to pci-stub
 # readlink -f /sys/bus/pci/devices/0000\:04\:00.0/driver/
 /sys/bus/pci/drivers/vfio-pci";​​;;RedHatEnterpriseLinux7/RHEL7-42160
1039;;;;;;;;;5;"5. check the driver with virsh command nodedev-dumpxml, it is updated.
 # virsh nodedev-dumpxml pci_0000_04_00_0
 <device>
 <name>pci_0000_04_00_0</name>
 <parent>pci_0000_00_1e_0</parent>
 <driver>
 <name>vfio-pci</name>
 </driver>
 <capability type='pci'>
 <domain>0</domain>
 <bus>4</bus>
 <slot>0</slot>
 <function>0</function>
 <product id='0x107c'>82541PI Gigabit Ethernet Controller</product>
 <vendor id='0x8086'>Intel Corporation</vendor>
 </capability>
 </device>";​​;;RedHatEnterpriseLinux7/RHEL7-42160
1040;RHEL7-42161;[secret-list] - list secrets of type=ceph/iscsi;"Refer to:
Bug 1000155 - virsh secret-list does not list ceph and iscsi Usage information - FIXED
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1. Create ceph secret 
 (see <http://libvirt.org/formatsecret.html>)
 
 # cat ceph-secret.xml
 <secret ephemeral='no' private='yes'>
 <description>CEPH passphrase example</description>
 <auth type='ceph' username='myname'/>
 <usage type='ceph'>
 <name>ceph_example</name>
 </usage>
 </secret>
 
 # virsh secret-define ceph-secret.xml
 Secret 1b40a534-8301-45d5-b1aa-11894ebb1735 created
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42161
1040;;;;;;;;;2;"2. Create iscsi secret
 (see <http://libvirt.org/formatsecret.html>)
 
 # cat iscsi-secret.xml
 <secret ephemeral='no' private='yes'>
 <description>iSCSI secret</description>
 <auth type='chap' username='rhat'/>
 <usage type='iscsi'>
 <target>libvirtiscsi</target>
 </usage>
 </secret>
 
 # virsh secret-define iscsi-secret.xml
 Secret e97e561f-2c9f-4274-b4d7-14626319bd42 created";​​;;RedHatEnterpriseLinux7/RHEL7-42161
1040;;;;;;;;;3;"3. virsh secret-list
 
 
 
​​";"Expected results:
 UUID Usage
 -----------------------------------------------------------
 1b40a534-8301-45d5-b1aa-11894ebb1735 ceph ceph_example
 e97e561f-2c9f-4274-b4d7-14626319bd42 iscsi libvirtiscsi
 
 should not be :
 UUID Usage
 -----------------------------------------------------------
 1b40a534-8301-45d5-b1aa-11894ebb1735 Unused
 e97e561f-2c9f-4274-b4d7-14626319bd42 iscsi Unused";;RedHatEnterpriseLinux7/RHEL7-42161
1041;RHEL7-42167;[--reuse-external] Create an external snapshot that reuses an existing external disk file;"If --reuse-external is specified, and the snapshot XML requests an external snapshot with a destination of an existing file, then the destination must exist and be pre-created with correct format and metadata. The file is then reused; otherwise, a snapshot is refused to avoid losing contents of the existing files.";Fangge Jin (fjin);Medium;Positive;Automated;;1;"--reuse-external  reuse any existing external files
 
 1) # qemu-img create -f qcow2 backup.qcow2 8G
 Formatting 'backup.qcow2', fmt=qcow2 size=8589934592 encryption=off
 cluster_size=65536
 # qemu-img create -f qcow2 -o
 backing_file=/var/lib/libvirt/images/backup.qcow2
 /var/lib/libvirt/images/rhel6u3.qcow2
 Formatting '/var/lib/libvirt/images/rhel6u3.qcow2', fmt=qcow2 size=8589934592
 backing_file='/var/lib/libvirt/images/backup.qcow2' encryption=off
 cluster_size=65536
 
 2) # cat vol-backing-file.xml
 <volume>
 <name>rhel6-new.qcow2</name>
 <capacity>4096000000</capacity>
 <allocation>0</allocation>
 <target>
 <path>/var/lib/libvirt/images/rhel6-new.qcow2</path>
 <format type='qcow2'/>
 </target>
 <backingStore>
 <path>/var/lib/libvirt/images/rhel6.qcow2</path>
 <format type='qcow2'/>
 </backingStore>
 </volume>
 
 3) # virsh vol-create default vol-backing-file.xml
 Vol rhel6-new.qcow2 created from volbackingstore.xml
 
 4) Create a new guest and link with the new created volume path.
 
 5) # virsh snapshot-create-as rhel6 s1 --diskspec
 vda,file=/var/lib/libvirt/images/rhel6-new.qcow2 --reuse-external --disk-only";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42167
1042;RHEL7-42168;[snapshot-create-as] [--live] Create a live snapshot from a set of args(only support external checkpoints);Create a live snapshot from a set of args(only support external checkpoints);Fangge Jin (fjin);Medium;Positive;Automated;;1;"--live           take a live snapshot
 --memspec <string>  memory attributes: [file=]name[,snapshot=type]
 [--diskspec] <string>  disk attributes: disk[,snapshot=type][,driver=type][,file=name]
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42168
1042;;;;;;;;;2;"1)
 # virsh dumpxml test6
 <disk type='file' device='disk'>
 <driver name='qemu' type='qcow2' cache='none'/>
 <source file='/var/lib/libvirt/images/test6.img'/>
 <target dev='hda' bus='ide'/>
 <address type='drive' controller='0' bus='0' target='0' unit='0'/>
 </disk>";​​;;RedHatEnterpriseLinux7/RHEL7-42168
1042;;;;;;;;;3;"2)
 # virsh snapshot-create-as test6 s8 --memspec file=/tmp/s8.mem --diskspec
 hda,file=/tmp/s8.img --live
 Domain snapshot s8 created
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42168
1042;;;;;;;;;4;"3)
 # virsh dumpxml test6
 <disk type='file' device='disk'>
 <driver name='qemu' type='qcow2' cache='none'/>
 <source file='/tmp/s8.img'/>
 <target dev='hda' bus='ide'/>
 <alias name='ide0-0-0'/>
 <address type='drive' controller='0' bus='0' target='0' unit='0'/>
 </disk>";​​;;RedHatEnterpriseLinux7/RHEL7-42168
1043;RHEL7-42170;[snapshot-create-as] [--atomic] Take creating snapshot as an atomic operation;" If --atomic is specified, libvirt will guarantee that the snapshot either succeeds, or fails with no changes; not all hypervisors support this.  If this flag is not specified, then some hypervisors may fail after partially performing the action, and dumpxml must be used to see whether any partial changes occurred.";Fangge Jin (fjin);Medium;Positive;Automated;;1;"--atomic         require atomic operation
 
 Create one domain with two disk via virt-manager or edit guest'xml
 
 # virsh dumpxml dom
 <domain type='qemu'>
 ......
 <disk type='file' device='disk'>
 <driver name='qemu' type='qcow2'/>
 <source file='/var/lib/libvirt/images/foo.img'/>
 <target dev='vda' bus='virtio'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03'
 function='0x0'/>
 </disk>
 <disk type='file' device='disk'>
 <driver name='qemu' type='qcow2'/>
 <source file='/var/lib/libvirt/images/bar.img'/>
 <target dev='vdb' bus='virtio'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x05'
 function='0x0'/>
 </disk>
 ......
 </domain>
 
 # virsh snapshot-create-as rhel6u32 --atomic --disk-only";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42170
1044;RHEL7-42171;[snapshot-create-as] [--diskspec] Specify per disk attributes when creating a snapshot;"The --diskspec option can be used to control how --disk-only and external checkpoints create external files.  This option can occur multiple times, according to the number of <disk> elements in the domain xml. Each <diskspec> is in the form disk[,snapshot=type][,driver=type][,file=name].  A diskspec must be provided for disks backed by block devices as libvirt doesn't auto-generate file names for those.  To include a literal comma in disk or in file=name, escape it with a second comma.
A literal --diskspec must precede each diskspec unless all three of domain, name, and description are also present.  For example, a diskspec of ""vda,snapshot=external,file=/path/to,,new"" results in the following XML:
   <disk name='vda' snapshot='external'>
       <source file='/path/to,new'/>
   </disk>";Fangge Jin (fjin);Medium;Positive;Automated;;1;"[--diskspec] <string>  disk attributes: disk[,snapshot=type][,driver=type][,file=name]
 
 
 # virsh start rhel6u32
 Domain rhel6u32 started
 
 # virsh snapshot-create-as rhel6u32 --disk-only --diskspec
 vda,snapshot=external,driver=qcow2,file=/var/lib/libvirt/images/rhel6u32-disk-snap
 Domain snapshot 1334904039 created
 
 # virsh snapshot-dumpxml rhel6u32 1334904039
 <domainsnapshot>
 <name>1334904039</name>
 <state>disk-snapshot</state>
 <creationTime>1334904039</creationTime>
 <disks>
 <disk name='vda' snapshot='external'>
 <driver type='qcow2'/>
 <source file='/var/lib/libvirt/images/rhel6u32-disk-snap'/>
 </disk>
 </disks>
 
 # ll /var/lib/libvirt/images/rhel6u32-disk-snap
 -rw-------. 1 qemu qemu 262144 Apr 20 14:40 /var/lib/libvirt/images/rhel6u32-disk-snap";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42171
1045;RHEL7-42172;[snapshot-create-as] [--disk-only] Create a snapshot that captures only disk state but not vm state;Create a snapshot that captures only disk state but not vm state;Fangge Jin (fjin);Medium;Positive;Automated;;1;"--disk-only      capture disk state but not vm state

 Scenario 1 :The guest is running:
 1.# virsh start test10
 Domain test10 started

 2.# virsh list --all
 Id Name State
 ----------------------------------------------------
 21 test10 running

 3.# virsh snapshot-create-as test10 --disk-only
 Domain snapshot 1476750680 created

 4.#virsh dumpxml test10
 ......
 <disk type='file' device='disk'>
 <driver name='qemu' type='qcow2' cache='none'/>
 <source file='/var/lib/libvirt/images/rhel7.3.1476750680'/>
 <backingStore type='file' index='1'>
 <format type='raw'/>
 <source file='/var/lib/libvirt/images/rhel7.3.qcow2'/>
 <backingStore/>
 </backingStore>
 <target dev='vda' bus='virtio'/>
 <alias name='virtio-disk0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
 </disk>
 ......

 Scenario 2 :The guest is shutoff:
 1.# virsh destroy test10
 Domain test10 destroyed

 2.# virsh list --all
 Id Name State
 ------------------------------------------------------   test10 shut off

 3.# virsh dumpxml test10
 ......
 <disk type='file' device='disk'>
 <driver name='qemu' type='qcow2' cache='none'/>
 <source file='/var/lib/libvirt/images/rhel7.3.1476750680'/>
 <target dev='vda' bus='virtio'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
 </disk>
 ......
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42172
1046;RHEL7-42178;[snapshot-create-as] [--no-metadata] take snapshot but create no metadata;take snapshot but create no metadata.;Fangge Jin (fjin);Medium;Positive;Automated;;1;"# virsh snapshot-create-as rhel6u31 --no-metadata
 Domain snapshot 1334882395 created
 
 # virsh snapshot-list rhel6u31
 Name Creation Time State
 ------------------------------------------------------------
 
 # qemu-img info rhel6u3.qcow2
 image: rhel6u3.qcow2
 file format: qcow2
 virtual size: 3.3G (3543347712 bytes)
 disk size: 3.8G
 cluster_size: 65536
 Snapshot list:
 ID TAG VM SIZE DATE VM CLOCK
 1 1334882395 0 2012-04-20 08:39:55 00:00:00.000";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42178
1047;RHEL7-42179;[snapshot-create-as][--quiesce] quiesce guest's file systems when creating snapshot;quiesce guest's file systems when creating snapshot;Fangge Jin (fjin);Medium;Positive;Automated;;1;"Install qemu-guest-agent rpm in guest.
 
 # virsh snapshot-create-as --quiesce --disk-only domain
 Domain snapshot 1334900269 created";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42179
1048;RHEL7-42181;[snapshot-dumpxml] [--security-info] - dump xml for a domain snapshot that includes security sensitive information;dump xml for a domain snapshot that includes security sensitive information;Fangge Jin (fjin);Medium;Positive;Automated;;1;"1) add passwd for vnc in the xml
 #virsh edit $guest
 ...
 <graphics type='vnc' port='-1' autoport='yes' **passwd='abc'**/>
 ...
 
 2) then create snapshot
 # virsh snapshot-create-as r7 security
 check this
 # virsh snapshot-dumpxml r7 security
 ...
 <graphics type='vnc' port='-1' autoport='yes' />
 ...
 
 3) # virsh snapshot-dumpxml r7 security **\--security-info**
 ...
 <graphics type='vnc' port='-1' autoport='yes' **passwd='abc'**/>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42181
1049;RHEL7-42182;[snapshot-info] [negative] Returns basic information about a snapshot;Nagative test for returns basic information about a snapshot;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Scenario 1
 # virsh snapshot-info rhel62
 error: --snapshotname or --current is required
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42182
1049;;;;;;;;;2;"Scenario 2
 # virsh snapshot-info rhel62 1347351182 --current
 error: --snapshotname and --current are mutually exclusive";​​;;RedHatEnterpriseLinux7/RHEL7-42182
1050;RHEL7-42183;[snapshot-current] [rw mode] [snapshotname] change the current snapshot;change the current snapshot;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"#virsh snapshot-create rhel6 toy-snapshot.xml
 
 1) # virsh snapshot-current rhel6 --name
 #virsh snapshot-create-as rhel6 security
 
 2) #virsh snapshot-current rhel6 security
 
 3) #virsh snapshot-current rhel6 --name";"1)
 toy-snapshot
 
 2)Snapshot security set as current
 
 3) security";Test Case;RedHatEnterpriseLinux7/RHEL7-42183
1051;RHEL7-42184;[snapshot-current][rw mode] [ --security-info] Get current snapshot XML including security sensitive information;--security-info  include security sensitive information in the XML;Fangge Jin (fjin);Medium;Positive;Automated;;1;"1) add passwd for vnc in the xml
 #virsh edit $guest
 ...
 <graphics type='vnc' port='-1' autoport='yes' **passwd='abc'**/>
 ...
 
 2) then create snapshot
 # virsh snapshot-create-as r7 security
 check this
 # virsh snapshot-current r7
 ...
 <graphics type='vnc' port='-1' autoport='yes' />
 ...
 
 3)# virsh snapshot-current r7 --security-info
 ...
 <graphics type='vnc' port='-1' autoport='yes' passwd='abc'/>
 ...";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42184
1052;RHEL7-42185;[snapshot-current] [ro mode]- get the current snapshot;Get the current snapshot;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Prerequisite
 Make sure you have a guest with qcow2 image for os image
 1. open two terminals
 [on the first terminal]
 1. create a xml named guest-snapshot.xml with following contents:
 <domainsnapshot>
 <name>guest-snapshot</name>
 <description>snapshot API testing - get currrent snapshot</description>
 </domainsnapshot>
 
 2. virsh snapshot-create guest guest-snapshot.xml";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-42185
1052;;;;;;;;;2;"Scenario 1: output the snapshot XML for the domain's current snapshot
 [on the second terminal]
 # virsh -r
 virsh > snapshot-current guest
 <domainsnapshot>
 <name>guest-snapshot</name>
 <description>snapshot API testing - get currrent snapshot</description>
 <state>shutoff</state>
 <creationTime>1300703253</creationTime>
 <domain>
 <uuid>5dc45c5d-1ef0-d04b-ece5-ddbf61350e3c</uuid>
 </domain>
 </domainsnapshot>
 virsh > snapshot-dumpxml guest guest-snapshot
 <domainsnapshot>
 <name>guest-snapshot</name>
 <description>snapshot API testing - get currrent snapshot</description>
 <state>shutoff</state>
 <creationTime>1300703253</creationTime>
 <domain>
 <uuid>5dc45c5d-1ef0-d04b-ece5-ddbf61350e3c</uuid>
 </domain>
 </domainsnapshot>";​​;;RedHatEnterpriseLinux7/RHEL7-42185
1052;;;;;;;;;3;"Scenario 2(negative):output the snapshot XML for the domain's current snapshot when there is no snapshot
 [on the first terminal]
 delete current snapshot
 # virsh snapshot-delete toy toy-snapshot";After delete all of the snapshot, you could get none return;;RedHatEnterpriseLinux7/RHEL7-42185
1052;;;;;;;;;4;"[on the second terminal]
 virsh > snapshot-current guest";​​;;RedHatEnterpriseLinux7/RHEL7-42185
1053;RHEL7-42186;[snapshot-delete] [--children] - delete snapshot and all children;--children    delete snapshot and all children;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1). Start a domain:
 # virsh start toy
 
 2). Create a snapshot:
 # virsh snapshot-create toy
 
 3). List all of the snapshots:
 # virsh snapshot-list toy
 
 4). Create another snapshot:
 # virsh snapshot-create toy
 
 5) List all of the snapshots (the new snapshot should be a child of the snapshot in step 2):
 # virsh snapshot-list toy
 
 6). Delete the snapshot from step 2), and all of its children:
 # virsh snapshot-delete --children toy 1281535709
 
 
 7). List all of the snapshots, 1281535709 from step 2) and 1281535958 from step 4) should be gone:
 # virsh snapshot-list toy";"1) # virsh start toy
 Domain toy started
 
 2) # virsh snapshot-create toy
 
 
 3) # virsh snapshot-list toy
 Name Creation Time State
 \---------------------------------------------------
 1281535709 2010-08-11 22:08:29 +0800 running
 
 4) # virsh snapshot-create toy
 
 5) # virsh snapshot-list toy
 Name Creation Time State
 \---------------------------------------------------
 1281535709 2010-08-11 22:08:29 +0800 running
 1281535958 2010-08-11 22:12:38 +0800 running
 
 6) # virsh snapshot-delete --children toy 1281535709
 
 7) # virsh snapshot-list toy
 Name Creation Time State
 \---------------------------------------------------";Test Case;RedHatEnterpriseLinux7/RHEL7-42186
1054;RHEL7-42187;[snapshot-delete] [--children-only] - delete only children but not snapshot;--children-only  delete children but not snapshot;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"4.1 #virsh snapshot-create rhel6
 
 4.2 #virsh snapshot-create rhel6
 
 4.3 #virsh snapshot-list rhel6
 
 4.4 Delete the snapshot created in 4.1 with --children-only
 
 # virsh snapshot-delete --children-only rhel6 1316213881
 Domain snapshot 1316213881 children deleted
 
 4.5 #virsh snapshot-list rhel6";"4.3 # virsh snapshot-list rhel6
 Name Creation Time State
 \------------------------------------------------------------
 1316213881 2011-09-17 06:58:01 +0800 shutoff
 1316213947 2011-09-17 06:59:07 +0800 shutoff
 
 4.4# virsh snapshot-delete --children-only rhel6 1316213881
 Domain snapshot 1316213881 children deleted
 
 4.5# virsh snapshot-list rhel6
 Name Creation Time State
 \------------------------------------------------------------
 1316213881 2011-09-17 06:59:07 +0800 shutoff";Test Case;RedHatEnterpriseLinux7/RHEL7-42187
1055;RHEL7-42188;[snapshot-delete] [--metadata] - delete only the snapshot metadata;--metadata     delete only libvirt metadata, leaving snapshot contents behind;Fangge Jin (fjin);Medium;Positive;Automated;;1;"5.1 #virsh snapshot-create rhel6
 
 5.2 #virsh snapshot-list rhe6
 
 5.3 # virsh snapshot-delete --metadata rhel6 1316213947
 
 5.4 # virsh snapshot-list rhel6
 
 
 
 
 5.5 # qemu-img info /var/lib/libvirt/images/rhel6-qcow2";"
 5.2 # virsh snapshot-list rhel6
 Name Creation Time State
 \------------------------------------------------------------
 1316213947 2011-09-17 06:59:07 +0800 shutoff
 
 5.3 # virsh snapshot-delete --metadata rhel6 1316213947
 Domain snapshot 1316213947 deleted
 
 5.4 # virsh snapshot-list rhel6
 Name Creation Time State
 \------------------------------------------------------------
 
 5.5 # qemu-img info /var/lib/libvirt/images/rhel6-qcow2
 image: /var/lib/libvirt/images/rhel6-qcow2
 file format: qcow2
 virtual size: 6.0G (6442450944 bytes)
 disk size: 1.4G
 cluster_size: 65536
 Snapshot list:
 ID TAG VM SIZE DATE VM CLOCK
 1 1316213947 0 2011-10-11 08:53:22 00:00:00.000";Test Case;RedHatEnterpriseLinux7/RHEL7-42188
1056;RHEL7-42189;[snapshot-delete] [--current] - delete current domain snapshot;Delete current domain snapshot.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"# virsh snapshot-current r7
 <domainsnapshot>
 ** <name>security</name>**
 <state>shutoff</state>
 <parent>
 <name>ss150</name>
 </parent>
 .......
 
 #virsh snapshot-delete r7 --current
 Domain snapshot security deleted
 
 check current snapshot
 # virsh snapshot-current r7
 <domainsnapshot>
 ** <name>ss150</name>**
 <state>shutoff</state>
 <parent>
 <name>ss149</name>
 </parent>
 ...";it will delete domain current snapshot;Test Case;RedHatEnterpriseLinux7/RHEL7-42189
1057;RHEL7-42190;virsh snapshot-delete --children-only bypasses safety check for deleting disk-only children;"Bug 956506 - virsh snapshot-delete --children-only bypasses safety check for deleting disk-only children (RHEL7)- FIXED
Bug 903052 - virsh snapshot-delete --children-only bypasses safety check for deleting disk-only children (RHEL6)- WONTFIX";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"# virsh snapshot-create-as rhel6 disk001 **--disk-only**
 Domain snapshot disk001 created
 # virsh snapshot-list rhel6 --tree
 internel
 |
 +- disk001
 7.1
 # virsh snapshot-delete rhel6 disk001
 error: Failed to delete snapshot disk001
 error: unsupported configuration: deletion of 1 external disk snapshots not
 supported yet
 7.2
 # virsh snapshot-delete rhel6 internel --children
 error: Failed to delete snapshot internel
 error: unsupported configuration: deletion of 1 external disk snapshots not
 supported yet
 7.3
 # virsh snapshot-delete rhel6 internel --children-only
 Domain snapshot internel children deleted
 # virsh snapshot-list rhel6 --tree
 internel
 
 
  7)
 then 7.1 and 7.2 return error then 7.3 should return **error** too
 but if 7.1 and 7.2 and 7.3 all work then this case should **pass **";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42190
1058;RHEL7-42191;libvirt should clean and revert env after fail to create snapshot with a bad img using --reuse-external - 906639;libvirt should clean and revert env after fail to create snapshot with a bad img using --reuse-external - 906639;Fangge Jin (fjin);High;Positive;Automated;;1;"1.prepare a running guest
 # virsh list
 Id Name State
 ----------------------------------------------------
 8 bug running
 2.touch a empty(bad)img for snapshot create
 **#touch /var/lib/libvirt/images/bug.bad**
 # ll /tmp/bad
 ls: cannot access /tmp/bad: No such file or directory
 3.create a snapshot --with reuse-external even add atomic
 #**virsh snapshot-create-as bug bad --memspec /tmp/bad --reuse-external --atomic**
 error: internal error unable to execute QEMU command 'transaction':
 Could not open '/var/lib/libvirt/images/bug.bad': Invalid argument
 #echo $?
 1
 \----------------------------------------------------------------------------
 ---------------------
 
​​";3 will get error but ** /tmp/bad** should be **deleted **;Test Case;RedHatEnterpriseLinux7/RHEL7-42191
1059;RHEL7-42194;[snapshot-revert] [--current] Revert to current snapshot;Revert to current snapshot.;Fangge Jin (fjin);Medium;Positive;Automated;;1;"Preparations:
 1. create a snapshot
 # virsh snapshot-create toy toy-snapshot.xml
 toy-snapshot.xml is a file with contents:
 <domainsnapshot>
 <name>toy-snapshot</name>
 <description>snapshot API test - revert domain to a snapshot</description>
 </domainsnapshot>
 
 2. wait till step 1 is finished
 
 3. check if the snapshot is defined
 # virsh snapshot-list toy
 
 4. login into the guest, create two files in ""/tmp""
 # cd /tmp
 # > aircraft
 # > airplane
 
 5. add some strings to file ""/tmp/airplane"" and ""/tmp/aircraft"" in guest
 # for i in {1..10000}; do echo ""hello, girl"" >> /tmp/airplane; echo ""hi, man"" >> /tmp/aircraft; done
 
 6. create snapshot same as step1
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42194
1059;;;;;;;;;2;"revert to current snapshot
 # virsh snapshot-revert toy --current
 
 9. login into the guest, check whether file ""/tmp/airplane"" and
 ""/tmp/aircraft"" exists
 
 # ls -l /tmp/airplane /tmp/aircraft";"
 exists
 lines: 10000
 line of ""airplane"": hello, girl
 line of ""aircraft"": hi, man";;RedHatEnterpriseLinux7/RHEL7-42194
1060;RHEL7-42195;[snapshot-revert] [--paused] leaves domain in paused state after reverting;leaves domain in paused state after reverting;Fangge Jin (fjin);Medium;Positive;Automated;;1;"Preparations:
 # virsh list
 Id Name State
 \----------------------------------------------------
 24 rhel6u31 shutoff
 
 #virsh snapshot-create-as rhel6u31 snap1
 
 # virsh snapshot-list rhel6u31
 Name Creation Time State
 \------------------------------------------------------------
 snap1 2012-04-19 14:51:05 +0800 shutoff
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42195
1060;;;;;;;;;2;"Revert to snapshot with --paused
 # virsh snapshot-revert rhel6u31 snap1 --paused
 
 # virsh list
 Id Name State
 \----------------------------------------------------
 24 rhel6u31 paused";​​;;RedHatEnterpriseLinux7/RHEL7-42195
1061;RHEL7-42196;[snapshot-revert] [--running] leaves domain in running state after reverting;leaves domain in running state after reverting;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Preparations:
 
 # virsh snapshot-list rhel6u31
 Name Creation Time State
 \------------------------------------------------------------
 snap1 2012-04-19 14:51:05 +0800 shutoff
 snap2 2012-04-19 15:06:19 +0800 shutoff
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42196
1061;;;;;;;;;2;"Revert to a snapshot with --running
 # virsh snapshot-revert rhel6u31 snap2 --running
 [root@hongming images]# virsh list
 Id Name State
 \----------------------------------------------------
 25 rhel6u31 running 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42196
1062;RHEL7-42197;[snapshot-edit] [--current] set edited snapshot as current;Set edited snapshot as current.;Fangge Jin (fjin);Medium;Positive;Automated;;1; #virsh snapshot-list rhel-qcow2;"Name Creation Time State
 \------------------------------------------------------------
 1317019732 2011-09-26 14:48:52 +0800 running
 1317019831 2011-09-26 14:50:31 +0800 running";Test Case;RedHatEnterpriseLinux7/RHEL7-42197
1062;;;;;;;;;2;"#virsh snapshot-edit rhel-qcow2 1317019732 --current
 change ""<on_crash>destroy</on_crash>"" to ""<on_crash>restart</on_crash>"" and
 save.";​​;;RedHatEnterpriseLinux7/RHEL7-42197
1062;;;;;;;;;3;#virsh snapshot-current rhel-qcow2;"<domainsnapshot>
 <name>1317019732</name>
 ....
 <on_reboot>restart</on_reboot>
 <on_crash>restart</on_crash>
 ......";;RedHatEnterpriseLinux7/RHEL7-42197
1063;RHEL7-42198;[snapshot-edit] [--rename] allow renaming an existing snapshot;Allow renaming an existing snapshot.;Fangge Jin (fjin);Medium;Positive;Automated;;1;"# virsh snapshot-edit --rename r7 ss
 update from <name>ss</name> to <name>sss</name>
 
 # virsh snapshot-dumpxml r7 ss
 error: Domain snapshot not found: no snapshot with matching name 'ss'
 
 # virsh snapshot-dumpxml r7 sss
 <domainsnapshot>
 <name>sss</name>
 <state>shutoff</state>
 <parent>
 <name>ss150</name>
 </parent>
 ......";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42198
1064;RHEL7-42199;[snapshot-edit] [--clone] allow cloning the snapshot metadata when changing the name;allow cloning the snapshot metadata when changing the name;Fangge Jin (fjin);Medium;Positive;Automated;;1;"# virsh snapshot-edit r7 sss --clone (renam <name> sss to ssss )
 Snapshot sss cloned to ssss.
 
 # virsh snapshot-dumpxml r7 sss
 
 # virsh snapshot-dumpxml r7 ssss
 **only <name> is different **";there is 2 snapshot after clone sss and ssss;Test Case;RedHatEnterpriseLinux7/RHEL7-42199
1065;RHEL7-42200;[snapshot-create] [--no-metadata] take snapshot but create no metadata;take snapshot but create no metadata;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"# virsh snapshot-create rhel6u31 --no-metadata
 Domain snapshot 1334882395 created
 
 # virsh snapshot-list rhel6u31
 Name Creation Time State
 ------------------------------------------------------------
 
 # qemu-img info rhel6u3.qcow2
 image: rhel6u3.qcow2
 file format: qcow2
 virtual size: 3.3G (3543347712 bytes)
 disk size: 3.8G
 cluster_size: 65536
 Snapshot list:
 ID TAG VM SIZE DATE VM CLOCK
 1 1334882395 0 2012-04-20 08:39:55 00:00:00.000";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42200
1066;RHEL7-42201;[snapshot-create][--quiesce] quiesce guest's file systems when creating snapshot;quiesce guest's file systems when creating snapshot;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Install qemu-guest-agent rpm in guest.
 
 # virsh snapshot-create --quiesce --disk-only domain
 Domain snapshot 1334900269 created";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42201
1067;RHEL7-42202;[snapshot-create] [--atomic] Take creating snapshot as an atomic operation;"--atomic is to make the snapshot  transaction is done when success and no change when failure.
In qemu(after qemu-1.1), external snapshot creation always uses 'transaction' to keep atomic; internal snapshot creation is inherently atomic because it pauses vm when 'savevm'.
So --atomic is pointless for qemu. We only cover the minimal test for this flag.
";Fangge Jin (fjin);Low;Positive;Not Automated;;1;"1. Create internal snapshot with --atomic
 # virsh snapshot-create-as rhel s1 --atomic
​​";"Snapshot created
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-42202
1067;;;;;;;;;2;"2. Create external snapshot with --atomic
 # virsh snapshot-create-as rhel s2 --atomic --disk-only";Snapshot created;;RedHatEnterpriseLinux7/RHEL7-42202
1068;RHEL7-42203;[snapshot-create] [--disk-only] Create a snapshot that captures only disk state but not vm state;Create a snapshot that captures only disk state but not vm state;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;Install qemu-guest-agent in guest.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42203
1068;;;;;;;;;2;"# virsh snapshot-create f16 --disk-only Domain snapshot 1332999912 created
 
 after snapshot, dump guest xml:
 <disk type='file' device='disk'>
 <driver name='qemu' type='qcow2' cache='none'/>
 <source file='/var/lib/libvirt/images/f16qcow2.1332999912'/>
 <target dev='vda' bus='virtio'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/>
 </disk>";​​;;RedHatEnterpriseLinux7/RHEL7-42203
1069;RHEL7-42204;[snapshot-create] [--reuse-external] Create an external snapshot that reuses an existing external disk file;Create an external snapshot that reuses an existing external disk file;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1) Create a disk image file based on the current used disk:
 # virsh domblklist rhel7.2
 Target     Source
 ------------------------------------------------
 vda        /var/lib/libvirt/images/rhel7.2.qcow2
 
 # qemu-img create -f qcow2 -o  backing_file=/var/lib/libvirt/images/rhel7.2.qcow2 /var/lib/libvirt/images/new.qcow2
 Formatting '/var/lib/libvirt/images/new.qcow2', fmt=qcow2 size=9663676416 backing_file=/var/lib/libvirt/images/rhel7.2.qcow2 encryption=off cluster_size=65536 lazy_refcounts=off refcount_bits=16
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42204
1069;;;;;;;;;2;"2) Prepare a snapshot xml:
 #  cat /tmp/snapshot.xml 
 <domainsnapshot>
   <description>Snapshot of OS install and updates</description>
   <disks>
     <disk name='/var/lib/libvirt/images/rhel7.2.qcow2'>
       <source file='/var/lib/libvirt/images/new.qcow2'/>
     </disk>
   </disks>
 </domainsnapshot>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42204
1069;;;;;;;;;3;"3) virsh # snapshot-create rhel7.2 --xmlfile /tmp/snapshot.xml --reuse-external --disk-only
 Domain snapshot 1463396889 created from '/tmp/snapshot.xml'
 
 virsh # snapshot-list rhel7.2
  Name                 Creation Time             State
 ------------------------------------------------------------
  1463396889           2016-05-16 19:08:09 +0800 disk-snapshot";​​;;RedHatEnterpriseLinux7/RHEL7-42204
1070;RHEL7-42205;[snapshot-create] [--live] Take the snapshot while the guest is running(only support external checkpoints);Take the snapshot while the guest is running(only support external checkpoints);Fangge Jin (fjin);Medium;Positive;Automated;;1;"1)
 # cat snapshot2.xml
 <domainsnapshot>
 <name>s2</name>
 <state>running</state>
 <memory snapshot='external' file='/tmp/s2.mem'/>
 <disks>
 <disk name='hda' snapshot='external'>
 <driver type='qcow2'/>
 <source file='/tmp/s2.img'/>
 </disk>
 </disks>
 </domainsnapshot>
 
 2)
 # virsh snapshot-create test6 snapshot2.xml --live
 Domain snapshot s2 created from 'snapshot2.xml'
 
 3)
 # virsh dumpxml test6
 <disk type='file' device='disk'>
 <driver name='qemu' type='qcow2' cache='none'/>
 <source file='/tmp/s2.img'/>
 <target dev='hda' bus='ide'/>
 <alias name='ide0-0-0'/>
 <address type='drive' controller='0' bus='0' target='0' unit='0'/>
 </disk>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42205
1071;RHEL7-42226;[pool-define-as] [--adapter-wwnn --adapter-wwpn [--adapter-parent parent]] defines the wwnn and wwpn to be used for the fc_host adapter type pool.;defines the wwnn and wwpn to be used for the fc_host adapter type ;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"9.1. # virsh pool-define-as npiv-pool scsi --adapter-wwnn 2101001b32a90002
 --adapter-wwpn 2101001b32a90003 --adapter-parent scsi_host5 --target /dev/disk
 /by-path/
 Pool npiv-pool defined
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42226
1071;;;;;;;;;2;"9.2. # virsh pool-define-as npiv-pool scsi --adapter-wwnn 2101001b32a90002
 --adapter-wwpn 2101001b32a90003 --adapter-parent scsi_host5 --target /dev/disk
 /by-path/ --source-host localhost
 Pool npiv-pool defined
​​";<== currently we need to add --source-host or something else to make it work.;;RedHatEnterpriseLinux7/RHEL7-42226
1071;;;;;;;;;3;"9.3. # virsh pool-list --all
 Name State Autostart
 \-------------------------------------------
 boot-scratch inactive no
 default active yes
 npiv-pool inactive no
​​";<==== check the pool is in inactive status.;;RedHatEnterpriseLinux7/RHEL7-42226
1071;;;;;;;;;4;"9.4. # virsh pool-dumpxml npiv-pool
 <pool type='scsi'>
 <name>npiv-pool</name>
 <uuid>9cd6fb5d-97fb-4cc3-91f1-ebbecec417ba</uuid>
 <capacity unit='bytes'>0</capacity>
 <allocation unit='bytes'>0</allocation>
 <available unit='bytes'>0</available>
 <source>
 <adapter type='fc_host' parent='scsi_host5' wwnn='2101001b32a90002' wwpn='2101001b32a90003'/>
 </source>
 <target>
 <path>/dev/disk/by-path</path>
 <permissions>
 <mode>0755</mode>
 <owner>-1</owner>
 <group>-1</group>
 </permissions>
 </target>
 </pool>
​​";<========check the pool's xml has correct name, type, adapter-parent, wwnn, wwpn, target.;;RedHatEnterpriseLinux7/RHEL7-42226
1072;RHEL7-42227;[pool-define-as] [--adapter-name name] defines the scsi_hostN adapter name to be used for the scsi_host          adapter type pool;"The parent optionally provides the name of the scsi_hostN node device to be used for the vHBA.
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"8.1. # virsh pool-create-as npiv-pool scsi --adapter-name host5 --target
 /dev/disk/by-path/
 Pool npiv-pool created
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42227
1072;;;;;;;;;2;"8.2. # virsh pool-define-as npiv-pool scsi --adapter-name host5 --target
 /dev/disk/by-path/ --source-host haha
 Pool npiv-pool defined";<== currently we need to add --source-host or something else to make it work.;;RedHatEnterpriseLinux7/RHEL7-42227
1072;;;;;;;;;3;"8.3. # virsh pool-list --all
 Name State Autostart
 \-------------------------------------------
 boot-scratch inactive no
 default active yes
 npiv-pool inactive no
 
​​";<==== check the pool is in inactive status.;;RedHatEnterpriseLinux7/RHEL7-42227
1072;;;;;;;;;4;"8.4. # virsh pool-dumpxml npiv-pool
 <pool type='scsi'>
 <name>npiv-pool</name>
 <uuid>244aa7ec-c58a-4909-a73d-87fb21182b02</uuid>
 <capacity unit='bytes'>0</capacity>
 <allocation unit='bytes'>0</allocation>
 <available unit='bytes'>0</available>
 <source>
 <adapter type='scsi_host' name='host5'/>
 </source>
 <target>
 <path>/dev/disk/by-path</path>
 <permissions>
 <mode>0755</mode>
 <owner>-1</owner>
 <group>-1</group>
 </permissions>
 </target>
 </pool>
​​";<========check the pool's xml has correct name, type, adapter-name, target.;;RedHatEnterpriseLinux7/RHEL7-42227
1073;RHEL7-42228;[pool-define-as] [--auth-type --auth-username] [--secret-usage/--serect-uuid] Define a pool with authentication info;"Define a pool with authentication info
";Fangge Jin (fjin);Medium;Positive;Automated;;1;"Scenario 1:  test with a iscsi storage
 
 1) on iscsi server, has following targets
 /etc/tgt/targets.conf(This file is for RHEL6)
 
 
 # tail -5 /etc/tgt/targets.conf
 <target lento.com.sunyi:target1>
 backing-store /iscsi/1.img
 backing-store /iscsi/2.img
 incominguser redhat redhat
 </target>
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42228
1073;;;;;;;;;2;"2) on host, create secret file
 # cat ~/secret.xml
 <secret ephemeral='no' private='yes'>
 <description>iSCSI secret</description>
 <auth type='chap' username='redhat'/>
 <usage type='iscsi'>
 <target>libvirtiscsi</target>
 </usage>
 </secret>

 # virsh secret-define secret.xml
 Secret 501f8e6b-fd72-4b29-b1a9-4fdf007a4c41 created

 # MYSECRET=`printf %s ""redhat"" | base64`
 
 # virsh secret-set-value 501f8e6b-fd72-4b29-b1a9-4fdf007a4c41 $MYSECRET
 Secret value set";​​;;RedHatEnterpriseLinux7/RHEL7-42228
1073;;;;;;;;;3;"3)  use pool-define-as to define the pool
 3.1) use secret-usage to indicate secret
 # virsh pool-define-as test-iscsi iscsi --source-host 10.66.100.103 --source-dev lento.com.sunyi:target1 --target /dev/disk/by-path --auth-type chap --auth-username redhat --secret-usage libvirtiscsi
 Pool test-iscsi defined

 3.2) use secret-uuid to indicate secret
 # virsh pool-define-as test-iscsi iscsi --source-host 10.66.100.103 --source-dev lento.com.sunyi:target1 --target /dev/disk/by-path --auth-type chap --auth-username redhat --secret-uuid 501f8e6b-fd72-4b29-b1a9-4fdf007a4c41
 Pool test-iscsi defined";​​;;RedHatEnterpriseLinux7/RHEL7-42228
1073;;;;;;;;;4;"4) check the pool is in inactive status
 # virsh pool-list --all
 Name State Autostart
 \-------------------------------------------
 ...
 test-iscsi inactive no";​​;;RedHatEnterpriseLinux7/RHEL7-42228
1073;;;;;;;;;5;"5) check the xml has correct content
 # virsh pool-dumpxml test-iscsi
 <pool type='iscsi'> <==== type is correct
 <name>test-iscsi</name>
 <uuid>b25d528b-6ded-4601-84c7-ac9533b5c2fe</uuid>
 <capacity unit='bytes'>0</capacity>
 <allocation unit='bytes'>0</allocation>
 <available unit='bytes'>0</available>
 <source>
 <host name='10.66.100.103'/> <==== host name is correct
 <device path='lento.com.sunyi:target1'/> <==== target is correct
 <auth type='chap' username='redhat'> <===== auth type and user name is correct
 <secret usage='libvirtiscsi'/>
 or
 <secret uuid='501f8e6b-fd72-4b29-b1a9-4fdf007a4c41'/>
 <===== secret is correct
 </auth>
 </source>
 <target>
 <path>/dev/disk/by-path</path>
 <permissions>
 <mode>0755</mode>
 <owner>-1</owner>
 <group>-1</group>
 </permissions>
 </target>
 </pool>";​​;;RedHatEnterpriseLinux7/RHEL7-42228
1073;;;;;;;;;6;"Scenario 2(optional): test with rbd storage
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42228
1073;;;;;;;;;7;"1)  prepare a ceph environment.
 (We have a monitor 10.66.4.150
 rbd pool: libvirt-pool
 username: libvirt
 secret: AQDw3lpVAOYmFhAAN/7HOTc0z7dke+CbwZ4efg==

2) on host, create the secret
 # cat secret.ceph
 <secret ephemeral='no' private='no'>
 <usage type='ceph'>
 <name>client.libvirt.secret</name>
 </usage>
 </secret>

#virsh secret-define secret.ceph
 Secret 6e4f663d-695e-44e5-a34e-0720597f4464 created

# virsh secret-set-value --secret 6e4f663d-695e-44e5-a34e-0720597f4464 --base64 AQDw3lpVAOYmFhAAN/7HOTc0z7dke+CbwZ4efg==
 Secret value set

 3) define a pool with following pool-create-as cmd
 # virsh pool-define-as test-ceph rbd --source-host 10.66.4.150 --auth-type
 ceph --auth-username libvirt --secret-usage ""client.libvirt.secret"" --source-name libvirt-pool
 Pool test-ceph defined

 4) check the pool is defined in inactive status.
 # virsh pool-list --all
 Name State Autostart
 \-------------------------------------------
 ...
 test-ceph inactive no

 5) check the pool's xml is correctly set
 # virsh pool-dumpxml test-ceph
 <pool type='rbd'>
 <name>test-ceph</name>
 <uuid>0b043a56-26fd-435a-9a48-8ac581e10962</uuid>
 <capacity unit='bytes'>0</capacity>
 <allocation unit='bytes'>0</allocation>
 <available unit='bytes'>0</available>
 <source>
 <host name='10.66.4.150'/>
 <name>libvirt-pool</name> <=== check
 <auth type='ceph' username='libvirt'> <=== check
 <secret usage='client.libvirt.secret'/> <=== check
 </auth>
 </source>
 </pool>";​​;;RedHatEnterpriseLinux7/RHEL7-42228
1074;RHEL7-42230;[pool-create-as] [--auth-type --auth-username] [--secret-usage/--serect-uuid]Create a iscsi/rbd pool with authentication info;Create a iscsi/rbd pool with authentication info;Fangge Jin (fjin);Medium;Positive;Automated;;1;"Scenario 1: test with iscsi storage
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42230
1074;;;;;;;;;2;"9.1. on iscsi server, has following targets
 /etc/tgt/targets.conf(This file is for RHEL6)
 # tail -5 /etc/tgt/targets.conf
 <target lento.com.sunyi:target1>
 backing-store /iscsi/1.img
 backing-store /iscsi/2.img
 incominguser redhat redhat
 </target>

​​";​​;;RedHatEnterpriseLinux7/RHEL7-42230
1074;;;;;;;;;3;"9.2. on host, create secret file
 # cat ~/secret.xml
 <secret ephemeral='no' private='yes'>
 <description>iSCSI secret</description>
 <auth type='chap' username='redhat'/>
 <usage type='iscsi'>
 <target>libvirtiscsi</target>
 </usage>
 </secret>

 # virsh secret-define secret.xml
 Secret 501f8e6b-fd72-4b29-b1a9-4fdf007a4c41 created

 # MYSECRET=`printf %s ""redhat"" | base64`
 
 # virsh secret-set-value 501f8e6b-fd72-4b29-b1a9-4fdf007a4c41 $MYSECRET
 Secret value set";​​;;RedHatEnterpriseLinux7/RHEL7-42230
1074;;;;;;;;;4;"9.3. create pool with pool-create-as
 9.3.1 use secret usage to indicate secret
 # virsh pool-create-as test-iscsi iscsi --source-host 10.66.100.103 --source-dev lento.com.sunyi:target1 --target /dev/disk/by-path --auth-type chap
 --auth-username redhat --secret-usage libvirtiscsi
 Pool test-iscsi created

 9.3.2 use secret uuid to indicate secret
 # virsh pool-create-as test-iscsi iscsi --source-host 10.66.100.103 --source-dev lento.com.sunyi:target1 --target /dev/disk/by-path --auth-type chap
 --auth-username redhat --secret-uuid 501f8e6b-fd72-4b29-b1a9-4fdf007a4c41
 Pool test-iscsi created";9. You should successfully create a pool;;RedHatEnterpriseLinux7/RHEL7-42230
1074;;;;;;;;;5;"9.4. check the pool created successfully
 # virsh pool-list
 Name State Autostart
 \-------------------------------------------
 ...
 test-iscsi active no";​​;;RedHatEnterpriseLinux7/RHEL7-42230
1074;;;;;;;;;6;"9.5. check the pool's xml
 # virsh pool-dumpxml test-iscsi
 <pool type='iscsi'>
 <name>test-iscsi</name>
 <uuid>1ef60267-1639-47f3-a105-d3b8f6ccafdd</uuid>
 <capacity unit='bytes'>5368906240</capacity>
 <allocation unit='bytes'>5368906240</allocation>
 <available unit='bytes'>0</available>
 <source>
 <host name='10.66.100.103' port='3260'/>
 <device path='lento.com.sunyi:target1'/>
 <auth type='chap' username='redhat'>
     <secret usage='libvirtiscsi'/>
    or
    <secret uuid='501f8e6b-fd72-4b29-b1a9-4fdf007a4c41'/>
 </auth>
 </source>
 <target>
 <path>/dev/disk/by-path</path>
 <permissions>
 <mode>0755</mode>
 <owner>-1</owner>
 <group>-1</group>
 </permissions>
 </target>
 </pool>";​​;;RedHatEnterpriseLinux7/RHEL7-42230
1074;;;;;;;;;7;"9.6. check the pool has correct volumes
 # virsh vol-list test-iscsi
 Name Path
 \-----------------------------------------------------------------------------
 -
 unit:0:0:1 /dev/disk/by-path/ip-10.66.100.103:3260-iscsi-
 lento.com.sunyi:target1-lun-1
 unit:0:0:2 /dev/disk/by-path/ip-10.66.100.103:3260-iscsi-
 lento.com.sunyi:target1-lun-2";​​;;RedHatEnterpriseLinux7/RHEL7-42230
1074;;;;;;;;;8;"Scenraio 2(optional): test with rbd storage
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42230
1074;;;;;;;;;9;"10 test pool-create-as with ""[--auth-type authtype --auth-username username
 --secret-usage usage]"" with ceph storage
 
 10.1. prepare a ceph environment.
 (We have a monitor 10.66.4.150
 rbd pool: libvirt-pool
 username: libvirt
 secret: AQDw3lpVAOYmFhAAN/7HOTc0z7dke+CbwZ4efg==
 
 
 10.2. on host, create the secret
 # cat secret.ceph
 <secret ephemeral='no' private='no'>
 <usage type='ceph'>
 <name>client.libvirt.secret</name>
 </usage>
 </secret>

#virsh secret-define secret.ceph
 Secret 6e4f663d-695e-44e5-a34e-0720597f4464 created

 # virsh secret-set-value --secret 6e4f663d-695e-44e5-a34e-0720597f4464
 --base64 AQDw3lpVAOYmFhAAN/7HOTc0z7dke+CbwZ4efg==
 Secret value set

 
 10.3. create the pool with pool-create-as as follow
 # virsh pool-create-as test-ceph rbd --source-host 10.66.4.150 --auth-type
 ceph --auth-username libvirt --secret-usage ""client.libvirt.secret"" --source-
 name libvirt-pool
 Pool test-ceph created

 
 10.4. list the pools
 # virsh pool-list
 Name State Autostart
 \-------------------------------------------
 ..
 test-ceph active no

 
 10.5. check the pool's xml is correctly set
 # virsh pool-dumpxml test-ceph
 <pool type='rbd'>
 <name>test-ceph</name>
 <uuid>835ab956-c27f-45c6-9973-28681c856583</uuid>
 <capacity unit='bytes'>139701780480</capacity>
 <allocation unit='bytes'>135</allocation>
 <available unit='bytes'>99704680448</available>
 <source>
 <host name='10.66.4.150'/> <====== check
 <name>libvirt-pool</name> <====== check
 <auth type='ceph' username='libvirt'> <====== check
 <secret usage='client.libvirt.secret'/> <====== check
 </auth>
 </source>
 </pool>

10.6. check the volume could be correctly listed in the pool
 # virsh vol-list test-ceph
 Name Path
 \-----------------------------------------------------------------------------
 -
 yy1.img libvirt-pool/yy1.img";​​;;RedHatEnterpriseLinux7/RHEL7-42230
1075;RHEL7-42231;[pool-create-as] [--adapter-name name] defines the scsi_hostN adapter name to be used for the scsi_host           adapter type pool;defines the scsi_hostN adapter name to be used for the scsi_host adapter type pool;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"11.1. # virsh pool-create-as npiv-pool scsi --adapter-name host5 --target
 /dev/disk/by-path/
 Pool npiv-pool created
 
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42231
1075;;;;;;;;;2;"11.2. # virsh pool-create-as npiv-pool scsi --adapter-name host5 --target
 /dev/disk/by-path/ --source-host 1
 Pool npiv-pool created
";"<== currently we need to add --source-host or
 something else to make it work.";;RedHatEnterpriseLinux7/RHEL7-42231
1075;;;;;;;;;3;"11.3. # virsh pool-list
 Name State Autostart
 \-------------------------------------------
 default active yes
 host15 active no
 npiv-pool active no";​​;;RedHatEnterpriseLinux7/RHEL7-42231
1075;;;;;;;;;4;"11.4. # virsh pool-dumpxml npiv-pool
 <pool type='scsi'>
 <name>npiv-pool</name>
 <uuid>fb73a45a-5dc0-47ce-8bed-9bb0166dea06</uuid>
 <capacity unit='bytes'>0</capacity>
 <allocation unit='bytes'>0</allocation>
 <available unit='bytes'>0</available>
 <source>
 <adapter type='scsi_host' name='host5'/>
 </source>
 <target>
 <path>/dev/disk/by-path</path>
 <permissions>
 <mode>0755</mode>
 <owner>-1</owner>
 <group>-1</group>
 </permissions>
 </target>
 </pool>";check the pool's name, type and adapter name and type are correct in xml.;;RedHatEnterpriseLinux7/RHEL7-42231
1076;RHEL7-42232;[pool-create-as] [--adapter-wwnn --adapter-wwpn [--adapter-parent parent]] defines the wwnn and wwpn to           be used for the fc_host adapter type pool;"The parent optionally provides the name of the scsi_hostN node device to be used for the vHBA.
Bug 1224088 - Using ""pool-create-as"" to create a scsi pool with wwnn&wwpn has redundant xml check. - FIXED";Fangge Jin (fjin);Medium;Positive;Automated;;1;"12.1. # virsh pool-create-as npiv-pool scsi --adapter-wwnn 2101001b32a90002
 --adapter-wwpn 2101001b32a90003 \--adapter-parent scsi_host5 --target
 /dev/disk/by-path/

 Pool npiv-pool created

";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42232
1076;;;;;;;;;2;"12.2. # virsh pool-create-as npiv-pool scsi --adapter-wwnn 2101001b32a90002
 --adapter-wwpn 2101001b32a90003 \--adapter-parent scsi_host5 --target
 /dev/disk/by-path/ --source-host localhost
 Pool npiv-pool created";"<== currently we need to add --source-host or
 something else to make it work.";;RedHatEnterpriseLinux7/RHEL7-42232
1076;;;;;;;;;3;"12.3. # virsh pool-list
 Name State Autostart
 \-------------------------------------------
 default active yes
 npiv-pool active no";​​;;RedHatEnterpriseLinux7/RHEL7-42232
1076;;;;;;;;;4;"12.4. # virsh pool-dumpxml npiv-pool
 <pool type='scsi'>
 <name>npiv-pool</name>
 <uuid>c3ff1601-891a-459f-aeea-e9c93775b80f</uuid>
 <capacity unit='bytes'>21474836480</capacity>
 <allocation unit='bytes'>21474836480</allocation>
 <available unit='bytes'>0</available>
 <source>
 <adapter type='fc_host' parent='scsi_host5' managed='yes' wwnn='2101001b32a90002' wwpn='2101001b32a90003'/>
 </source>
 <target>
 <path>/dev/disk/by-path</path>
 <permissions>
 <mode>0755</mode>
 <owner>-1</owner>
 <group>-1</group>
 </permissions>
 </target>
 </pool>
​​";"check the pool's name, type and wwnn, wwpn, parent adapter name are correct
 in xml.";;RedHatEnterpriseLinux7/RHEL7-42232
1077;RHEL7-42233;Bug 835782 - when create the netfs pool, virsh pool-create-as do not remount the target dir which is mounted for another device firstly.;;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" For bug 835782
 # mount /dev/sda6 /mnt
 #mount
 /dev/sda6 on /mnt type ext3 (rw,relatime,seclabel,data=ordered)
 # virsh pool-create-as \--name pool-nfs --type netfs --source-host
 10.66.90.121 --source-path /vol/S3/libvirtmanual \--target /mnt/ --source-
 format nfs
 error: Failed to create pool pool-nfs
 error: Requested operation is not valid: Target '/mnt' is already mounted
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42233
1078;RHEL7-42250;check information-leak-after-failed-read;check information-leak-after-failed-read;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-42250
1079;RHEL7-42251;check ST modules;check ST modules;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-42251
1080;RHEL7-42252;check scsi_debug on map;check scsi_debug on map;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-42252
1081;RHEL7-42253;scsi_debug module test scsi_debug_BZ_1124082;"scsi_debug module test
 scsi_debug_BZ_1124082";Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-42253
1082;RHEL7-42254;install debug_kernel test bz1004841;" install debug_kernel test
bz1004841";Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-42254
1083;RHEL7-42255;different format device read/write date errata/6.2.z/bz752375 /kernel/errata/6.2...;" different format device read/write date
 errata/6.2.z/bz752375
   /kernel/errata/6.2.z/bz752375
 
Step | Expected Result
errata/6.2.z/bz752375 | pass";Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-42255
1084;RHEL7-42256;linux LTP-LITE test;linux LTP-LITE test;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-42256
1085;RHEL7-42257;linux OS reboot test; linux OS reboot test;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-42257
1086;RHEL7-42258;linux Insert leap second test;linux Insert leap second test;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-42258
1087;RHEL7-42259;DM stripe_width calculation test;DM stripe_width calculation test;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-42259
1088;RHEL7-42261;check scsi_debug log scsi_debug_BZ_1124082;"check scsi_debug log
 scsi_debug_BZ_1124082";Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-42261
1089;RHEL7-42263;dm-crypt test sanity_io_rw;"dm-crypt test
sanity_io_rw";Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-42263
1090;RHEL7-42265;Libata sanity test sanity;"Libata sanity test
 sanity";Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-42265
1091;RHEL7-42267;Error Hanlding feature testing;Error Hanlding feature testing;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-42267
1092;RHEL7-42268;Enhance UA handling feature testing;Enhance UA handling feature testing;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-42268
1093;RHEL7-42269;[attach-interface] Attach-interface with --live --current --persistent options;"when guest is running, do attach-> check->restart->check; when guest is down, do attach->check->start->check, the options operations here is shared between all the interface type. (remember to clear the interface in previous scenarios) 
scenario | guest status | options | attach-interface/device expected result
1 | running | no option | --live
 | down | no option | failed
2 | running | --live | effect the live domain
 | down | --live | failed
3 | running | --config | take effect on next boot
 | down | --config  | 
4 | running | --persistent | and like --live --config for a running domain
 | down | --persistent | behaves like --config for an offline domain
5 | running | --config --live | 
 | down | --config --live | 
6 |  running |  --current --live |  --current can not use with other options
 |  down | --current --live | --current can not use with other options
7 | running | --current | affect the current domain state. 
 | down | --current | affect the current domain state. ";Yalan Zhang (yalzhang);Critical;Positive;Manual Only;;1; senario 1: no option;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;2;" running:
 1. # virsh attach-interface rhel7.2 network default --mac 52:54:00:98:c4:a0
 Interface attached successfully
​​";"
 succeed";;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;3;2. # virsh dumpxml rhel7.2 |grep /interface -B9;"interface exists  
 <interface type='network'>
       <mac address='52:54:00:98:c4:a0'/>
       <source network='default' bridge='virbr0'/>
 ......";;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;4;"3. restart then check 
 # virsh destroy rhel7.2; virsh start rhel7.2
 # virsh dumpxml rhel7.2 | grep /interface -B9";no interface as in step 2 with mac 52:54:00:98:c4:a0;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;5;"remember to clear the interface in previous scenarios
 down:
 1. # virsh attach-interface rhel7.2 network default --mac 52:54:00:98:c4:a0";"error: Failed to attach interface
 error: Requested operation is not valid: domain is not running";;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;6;scenario 2:  with --live;​​;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;7;The steps and expected result is the save as senario 1;​​;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;8;scenario3: with --config;​​;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;9;"remember to clear the interface in previous scenarios
 running
 1. # virsh attach-interface rhel7.2 network default --mac 52:54:00:98:c4:a0 --config
 Interface attached successfully";succeed ;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;10;"2. 
 # virsh dumpxml rhel7.2 | grep /interface -B7
​​";no interface with mac 52:54:00:98:c4:a0;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;11;"3. restart and check
  # virsh destroy rhel7.2 ; virsh start rhel7.2 
 # virsh dumpxml rhel7.2 | grep -B1 -A6  52:54:00:98:c4:a0";"the interface exists 
 # virsh dumpxml rhel7.2 | grep -B1 -A6  52:54:00:98:c4:a0  
     <interface type='network'>
       <mac address='52:54:00:98:c4:a0'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;12;"remember to clear the interface in previous scenarios
 down:
 1. # virsh  attach-interface rhel7.2 network default --mac 52:54:00:98:c4:a0 --config
 Interface attached successfully";succeed;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;13;"2. 
 # virsh dumpxml rhel7.2 | grep -B1 -A6  52:54:00:98:c4:a0";interface exists;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;14;"3. # virsh start rhel7.2
 # virsh dumpxml rhel7.2 | grep -B1 -A6  52:54:00:98:c4:a0";interface exists;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;15;scenario 4: with --persistent;​​;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;16;"running: 
 clean the interface in above scenario
 1. # virsh attach-interface rhel7.2 network default --mac 52:54:00:98:c4:a0 --persistent
 Interface attached successfully";​​;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;17;2. # virsh dumpxml rhel7.2 | grep -B1 -A6  52:54:00:98:c4:a0 ;"  <interface type='network'>
       <mac address='52:54:00:98:c4:a0'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;18;"3. # virsh destroy rhel7.2; virsh start rhel7.2
 # virsh dumpxml rhel7.2 | grep -B1 -A6  52:54:00:98:c4:a0";still exists as step2;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;19;down:;​​;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;20;"1. # virsh attach-interface rhel7.2 network default --mac 52:54:00:98:c4:a0 --persistent
 Interface attached successfully
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;21;2. # virsh dumpxml rhel7.2 | grep -B1 -A6  52:54:00:98:c4:a0;interface exists;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;22;"3. # virsh start rhel7.2 ; virsh dumpxml rhel7.2 | grep -B1 -A6  52:54:00:98:c4:a0";still exists;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;23;senario 5: --config --live;​​;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;24;running;​​;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;25;"1. # virsh attach-interface rhel7.2 network default --mac 52:54:00:98:c4:a0 --config --live
 Interface attached successfully
 # virsh dumpxml rhel7.2 | grep -B1 -A6  52:54:00:98:c4:a0";"  <interface type='network'>
       <mac address='52:54:00:98:c4:a0'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;26;"2. # virsh destroy rhel7.2 ; 
  virsh dumpxml rhel7.2 | grep -B1 -A6  52:54:00:98:c4:a0";interface still exists;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;27;down;​​;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;28;"# virsh attach-interface rhel7.2 network default --mac 52:54:00:98:c4:a0 --config --live
​​";"error: Failed to attach interface
 error: Requested operation is not valid: domain is not running";;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;29;senario 6: --current --live;​​;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;30;running;​​;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;31;"# virsh attach-interface rhel7.2 network default --mac 52:54:00:98:c4:a0 --current --live
​​";error: Options --current and --live are mutually exclusive;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;32;down;​​;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;33;"# virsh attach-interface rhel7.2 network default --mac 52:54:00:98:c4:a0 --current --live
​​";error: Options --current and --live are mutually exclusive;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;34;senario 7: --current;​​;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;35;running;​​;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;36;"1. # virsh attach-interface rhel7.2 network default --mac 52:54:00:98:c4:a0 --current
 Interface attached successfully";succeed;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;37;2. # virsh dumpxml rhel7.2 | grep -B1 -A6  52:54:00:98:c4:a0; interface exists;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;38;"3. # virsh destroy rhel7.2 ; virsh start rhel7.2
 # virsh dumpxml rhel7.2 | grep -B1 -A6  52:54:00:98:c4:a0";no output;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;39;down;​​;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;40;"1.  # virsh attach-interface rhel7.2 network default --mac 52:54:00:98:c4:a0 --current
 Interface attached successfully
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;41;2. # virsh dumpxml rhel7.2 | grep -B1 -A6  52:54:00:98:c4:a0;interface exists;;RedHatEnterpriseLinux7/RHEL7-42269
1093;;;;;;;;;42;"3.  # virsh start rhel7.2; virsh dumpxml rhel7.2 | grep -B1 -A6  52:54:00:98:c4:a0";interface exists;;RedHatEnterpriseLinux7/RHEL7-42269
1094;RHEL7-42270;[vol-create-as] [--prealloc-metadata] preallocate metadata (for qcow2 instead of full allocation) when creating volume;This option creates a sparse image file with metadata, resulting in higher performance compared to images with no preallocation and only slightly higher initial disk space usage.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1) # virsh vol-create-as default vol-test.qcow2 4194304000 --allocation
 3024347136 --format qcow2 --prealloc-metadata
 
 2) # ll /var/lib/libvirt/images/
 -rw-------. 1 root root 4195155968 Mar 15 14:01 vol-test.qcow2
 
 3) Check image info
 # qemu-img info /var/lib/libvirt/images/vol-test.qcow2
 image: /var/lib/libvirt/images/vol-test.qcow2
 file format: qcow2
 virtual size: 3.9G (4194304000 bytes)
 disk size: 720K
 cluster_size: 65536
 Format specific information:
 compat: 0.10";Vol vol-test.qcow2 created;Test Case;RedHatEnterpriseLinux7/RHEL7-42270
1094;;;;;;;;;2;"Compare the disk size with volume created without --prealloc-metadata:
 4) # virsh vol-create-as default vol-test2.qcow2 4194304000 --allocation
 3024347136 --format qcow2
 
 5) # qemu-img info /var/lib/libvirt/images/vol-test2.qcow2
 image: /var/lib/libvirt/images/vol-test2.qcow2
 file format: qcow2
 virtual size: 3.9G (4194304000 bytes)
 disk size: 136K
 cluster_size: 65536
 Format specific information:
 compat: 0.10
​​";"when with --prealloc-metadata, disk size is a littter higher.
​​";;RedHatEnterpriseLinux7/RHEL7-42270
1095;RHEL7-42271;[vol-create-as] [--backing-vol vol-name-or-key-or-path] Take a snapshot of an existing volume.;Take a snapshot of an existing volume.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1.Create a volume first:
 1) # virsh vol-create-as default vol-test2.qcow2 4194304000 --allocation
 3024347136 --format qcow2
 
 2) # ll /var/lib/libvirt/images/
 -rw-------. 1 root root 197120 Mar 15 14:01 vol-test2.qcow2";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42271
1095;;;;;;;;;2;"2.create a new vol use vol-test2.qcow2 to be a backing up
 # virsh vol-create-as default vol-new.qcow2 4194304000 --allocation
 3024347136 --format qcow2 --backing-vol /var/lib/libvirt/images/vol-test2.qcow2 --backing-vol-format qcow2";"create ok
​​";;RedHatEnterpriseLinux7/RHEL7-42271
1095;;;;;;;;;3;"3. # virsh vol-list default
​​";both vol-test2.qcow2 and vol-new.qcow2 exist.;;RedHatEnterpriseLinux7/RHEL7-42271
1096;RHEL7-42272;[vol-create-from] [--prealloc-metadata] preallocate metadata (for qcow2 instead of full allocation) when creating volume;[--prealloc-metadata] preallocate metadata (for qcow2 images which don't support full allocation). This option creates a sparse image file with metadata, resulting in higher performance compared to images with no preallocation and only slightly higher initial disk space usage.;Fangge Jin (fjin);Medium;Positive;Automated;;1;"1) # virsh vol-create-from default vol-test3.xml /var/lib/libvirt/images/vol-test.qcow2 --prealloc-metadata
 
 ( $ExistvolName is our exist
 volume,here we must specify the absolute path )";"1) # virsh vol-create-from default vol-test3.xml /var/lib/libvirt/images/foo.img
 --prealloc-metadata
 Vol vol-test3 created from input vol foo.img";Test Case;RedHatEnterpriseLinux7/RHEL7-42272
1096;;;;;;;;;2;"2) check our pool has been added successfully!
 # virsh vol-list default";" 2) # virsh vol-list default
 Name Path
 \-----------------------------------------
 foo.img /var/lib/libvirt/images/foo.img
 vol-test /var/lib/libvirt/images/vol-test
 vol-test2 /var/lib/libvirt/images/vol-test2
 vol-test3 /var/lib/libvirt/images/vol-test3";;RedHatEnterpriseLinux7/RHEL7-42272
1096;;;;;;;;;3;"3) check the img info
 # qemu-img info /var/lib/libvirt/images/vol-test3";"image: /var/lib/libvirt/images/vol-test3
 file format: qcow2
 virtual size: 3.9G (4194304000 bytes)
 disk size: 720K
 cluster_size: 65536";;RedHatEnterpriseLinux7/RHEL7-42272
1097;RHEL7-42273;[vol-create-from] [--reflink] Perform a COW lightweight copy when creating from an existing vol;Perform a COW lightweight copy when creating from an existing vol;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Preparations:
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42273
1097;;;;;;;;;2;"6.1 prepare a lv or usb disk or hard disk and format it to btrfs.
 # mkfs.btrfs /dev/sdc -f
 Btrfs v3.16.2
 See http://btrfs.wiki.kernel.org for more information.
 Turning ON incompat feature 'extref': increased hardlink limit per file to
 65536
 fs created label (null) on /dev/sdc
 nodesize 16384 leafsize 16384 sectorsize 4096 size 7.45GiB";​​;;RedHatEnterpriseLinux7/RHEL7-42273
1097;;;;;;;;;3;"6.2 mount the btrfs device to a dir
 #mkdir /btrfs; mount /dev/sdc /btrfs
 
 # mount | grep btrfs
 /dev/sdc on /btrfs type btrfs (rw,relatime,seclabel,space_cache)";​​;;RedHatEnterpriseLinux7/RHEL7-42273
1097;;;;;;;;;4;"6.3 create dir pool and volume for /btrfs
 # qemu-img create -f raw /btrfs/1.raw 1G
 Formatting '/btrfs/1.raw', fmt=raw size=1073741824";​​;;RedHatEnterpriseLinux7/RHEL7-42273
1097;;;;;;;;;5;"#cat btrfs_pool.xml
 <pool type='dir'>
 <name>btrfs</name>
 <uuid>4fc87db3-e96a-42ab-b46e-1511532ac422</uuid>
 <capacity unit='bytes'>8004304896</capacity>
 <allocation unit='bytes'>2164981760</allocation>
 <available unit='bytes'>5839323136</available>
 <source>
 </source>
 <target>
 <path>/btrfs</path>
 <permissions>
 <mode>0755</mode>
 <owner>0</owner>
 <group>0</group>
 </permissions>
 </target>
 </pool>";​​;;RedHatEnterpriseLinux7/RHEL7-42273
1097;;;;;;;;;6;"# virsh pool-create btrfs_pool.xml
 Pool btrfs created from btrfs_pool.xml
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42273
1097;;;;;;;;;7;"# virsh vol-list btrfs
 Name Path
 ----------------------------------------------------------------------------
 1.raw /btrfs/1.raw";​​;;RedHatEnterpriseLinux7/RHEL7-42273
1097;;;;;;;;;8;"6.4 create volume from existing 1.raw
 # cat vol.xml
 <volume type='file'>
 <name>1.raw.clone</name>
 <key>/btrfs/1.raw.clone</key>
 <source>
 </source>
 <capacity unit='bytes'>1073741824</capacity>
 <allocation unit='bytes'>4513792</allocation>
 <target>
 <path>/btrfs/1.raw.clone</path>
 <format type='raw'/>
 <permissions>
 <mode>0644</mode>
 <owner>0</owner>
 <group>0</group>
 <label>unconfined_u:object_r:default_t:s0</label>
 </permissions>
 <timestamps>
 <atime>1432285559.414676648</atime>
 <mtime>1432285551.616586536</mtime>
 <ctime>1432285551.616586536</ctime>
 </timestamps>
 </target>
 </volume>";​​;;RedHatEnterpriseLinux7/RHEL7-42273
1097;;;;;;;;;9;"create vol with --reflink:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42273
1097;;;;;;;;;10;"# virsh vol-create-from btrfs vol.xml /btrfs/1.raw --reflink
 Vol 1.raw.clone created from input vol 1.raw";​​;;RedHatEnterpriseLinux7/RHEL7-42273
1097;;;;;;;;;11;"# virsh pool-refresh btrfs; virsh vol-list btrfs
 Pool btrfs refreshed
 Name Path
 ----------------------------------------------------------------------------
 1.raw /btrfs/1.raw
 1.raw.clone /btrfs/1.raw.clone";​​;;RedHatEnterpriseLinux7/RHEL7-42273
1098;RHEL7-42274;[vol-name] [negative] - Get vol name by key or path - invalid vol path;Get vol name by key or path - invalid vol path;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Parsing wrong argument.
 #virsh vol-name guest3";"#virsh vol-name guest3
 error: failed to get vol 'guest3'
 error: Storage volume not found: no storage vol with matching path
 
 Note:
 Do not show below extra error log:
 #virsh vol-name guest3
 error: failed to get vol 'guest3', specifying --(null) might help
 error: Storage volume not found: no storage vol with matching path";Test Case;RedHatEnterpriseLinux7/RHEL7-42274
1099;RHEL7-42275;[vol-name] [negative] - Get vol path by name or key - invalid vol key;Get volume path by name or key - invalid vol key;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;# virsh vol-path 2008R2.img;"error: failed to get vol '2008R2.img', specifying --pool might help
 error: Storage volume not found: no storage vol with matching path";Test Case;RedHatEnterpriseLinux7/RHEL7-42275
1100;RHEL7-42276;[vol-resize] [--shirnk] Shrink a storage volume;Bug 1021802 - virsh vol-resize does not shrink volume - FIXED;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Preparations:
 prepare two vols with raw and qcows format
 create pool and volume
 
 Refer to case:
 https://tcms.engineering.redhat.com/case/216539/?from_plan=7651
 https://tcms.engineering.redhat.com/case/433752/?from_plan=7651
 
 # virsh vol-list pool-dir --details
 Name Path Type Capacity Allocation
 -------------------------------------------------------------------------
 vol1 /var/lib/libvirt/images/pool-dir/vol1 file 5.00 GiB 260.00 KiB
 vol2 /var/lib/libvirt/images/pool-dir/vol2 file 5.00 GiB 1.00 GiB
 
 # virsh vol-info /var/lib/libvirt/images/pool-dir/vol1 pool-dir
 Name: vol1
 Type: file
 Capacity: 5.00 GiB
 Allocation: 260.00 KiB
 
 # virsh vol-info /var/lib/libvirt/images/pool-dir/vol2 pool-dir
 Name: vol2
 Type: file
 Capacity: 5.00 GiB
 Allocation: 1.00 GiB
 
 # qemu-img info /var/lib/libvirt/images/pool-dir/vol1
 image: /var/lib/libvirt/images/pool-dir/vol1
 file format: qcow2
 virtual size: 5.0G (5368709120 bytes)
 disk size: 260K
 cluster_size: 65536
 Format specific information:
 compat: 0.10
 refcount bits: 16
 
 # qemu-img info /var/lib/libvirt/images/pool-dir/vol2
 image: /var/lib/libvirt/images/pool-dir/vol2
 file format: raw
 virtual size: 5.0G (5368709120 bytes)
 disk size: 1.0G
 
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-42276
1100;;;;;;;;;2;"Scenario 1: shrink volume size for qcow2(not supported)
";​​;;RedHatEnterpriseLinux7/RHEL7-42276
1100;;;;;;;;;3;"
 # virsh vol-info /var/lib/libvirt/images/pool-dir/vol1 pool-dir
 Name: vol1
 Type: file
 Capacity: 5.00 GiB
 Allocation: 260.00 KiB
 
 # virsh vol-resize /var/lib/libvirt/images/pool-dir/vol1 1G pool-dir --shrink
 error: Failed to change size of volume 'vol1' to 1G
 error: invalid argument: Can't shrink capacity below current capacity with shrink flag explicitly specified
 
 <== this is expected for now, cause shrink a qcow2 file required to modify its metada and this is not supported yet.
";​​;;RedHatEnterpriseLinux7/RHEL7-42276
1100;;;;;;;;;4;Scenario 2: shrink volume size for raw;​​;;RedHatEnterpriseLinux7/RHEL7-42276
1100;;;;;;;;;5;"2-1 shrink size is above allocation
 # virsh vol-info /var/lib/libvirt/images/pool-dir/vol2 pool-dir
 Name: vol2
 Type: file
 Capacity: 5.00 GiB
 Allocation: 1.00 GiB
 
 # virsh vol-resize /var/lib/libvirt/images/pool-dir/vol2 2G --shrink
 Size of volume 'vol2' successfully changed to 2G
 check volme size shirnked
 
 # virsh vol-info /var/lib/libvirt/images/pool-dir/vol2 pool-dir
 Name: vol2
 Type: file
 Capacity: 2.00 GiB
 Allocation: 1.00 GiB
 
​​";"if shrink size is above allocation, command success
 # virsh vol-resize /var/lib/libvirt/images/pool-dir/vol2 2G --shrink
 Size of volume 'vol2' successfully changed to 2G
 
 # virsh vol-info /var/lib/libvirt/images/pool-dir/vol2 pool-dir
 Name: vol2
 Type: file
 Capacity: 2.00 GiB
 Allocation: 1.00 GiB
 
​​";;RedHatEnterpriseLinux7/RHEL7-42276
1100;;;;;;;;;6;"2.2 shirnk size is below existing allocation, error report
 # virsh vol-resize /var/lib/libvirt/images/pool-dir/vol2 500M --shrink --pool pool-dir
 error: Failed to change size of volume 'vol2' to 500M
 error: invalid argument: can't shrink capacity below existing allocation
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42276
1101;RHEL7-42277;[vol-resize] [--shirnk --delta];Bug 1220213 - vol-resize with --delta --shrink does not shrink the volume - FIXED;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"known issue:
 # virsh vol-info /var/lib/libvirt/images/pool-dir/vol2 pool-dir
 Name: vol2
 Type: file
 Capacity: 7.00 GiB
 Allocation: 5.00 GiB
 
 # virsh vol-resize /var/lib/libvirt/images/pool-dir/vol2 -2G pool-dir --shrink --delta
 Size of volume 'vol2' successfully changed by 2G
 
 # virsh vol-info /var/lib/libvirt/images/pool-dir/vol2 pool-dir
 Name: vol2
 Type: file
 Capacity: 5.00 GiB
 Allocation: 5.00 GiB";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42277
1102;RHEL7-42278;[vol-clone] [--reflink] use btrfs COW lightweight copy when cloning;"When --reflink is specified, perform a COW lightweight copy, where the data blocks are copied only when modified.  If this isnot possible, the copy fails.
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Preparations:
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42278
1102;;;;;;;;;2;"1) prepare a lv or usb disk or hard disk and format it to btrfs.
 # mkfs.btrfs /dev/sdc -f
 Btrfs v3.16.2
 See http://btrfs.wiki.kernel.org for more information.
 Turning ON incompat feature 'extref': increased hardlink limit per file to
 65536
 fs created label (null) on /dev/sdc
 nodesize 16384 leafsize 16384 sectorsize 4096 size 7.45GiB";​​;;RedHatEnterpriseLinux7/RHEL7-42278
1102;;;;;;;;;3;"2) mount the btrfs device to a dir
 #mkdir /btrfs; mount /dev/sdc /btrfs
 # mount | grep btrfs
 /dev/sdc on /btrfs type btrfs (rw,relatime,seclabel,space_cache)";​​;;RedHatEnterpriseLinux7/RHEL7-42278
1102;;;;;;;;;4;"3)create dir pool and volume for /btrfs
 # qemu-img create -f raw /btrfs/1.raw 1G
 Formatting '/btrfs/1.raw', fmt=raw size=1073741824
 
 #cat btrfs_pool.xml
 <pool type='dir'>
 <name>btrfs</name>
 <uuid>4fc87db3-e96a-42ab-b46e-1511532ac422</uuid>
 <capacity unit='bytes'>8004304896</capacity>
 <allocation unit='bytes'>2164981760</allocation>
 <available unit='bytes'>5839323136</available>
 <source>
 </source>
 <target>
 <path>/btrfs</path>
 <permissions>
 <mode>0755</mode>
 <owner>0</owner>
 <group>0</group>
 </permissions>
 </target>
 </pool>
 
 # virsh pool-create btrfs_pool.xml
 Pool btrfs created from btrfs_pool.xml
 
 # virsh vol-list btrfs
 Name Path
 \-----------------------------------------------------------------------------
 -
 1.raw /btrfs/1.raw
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42278
1102;;;;;;;;;5;run vol-clone with --reflink;​​;;RedHatEnterpriseLinux7/RHEL7-42278
1102;;;;;;;;;6;"# virsh vol-clone 1.raw 1.raw.clone --pool btrfs --reflink
 Vol 1.raw.clone cloned from 1.raw
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42278
1102;;;;;;;;;7;"#virsh pool-refresh btrfs; virsh vol-list btrfs
 Pool btrfs refreshed
 Name Path
 \-----------------------------------------------------------------------------
 -
 1.raw /btrfs/1.raw
 1.raw.clone /btrfs/1.raw.clone";​​;;RedHatEnterpriseLinux7/RHEL7-42278
1103;RHEL7-42279;[vol-clone] [--prealloc-metadata] preallocate metadata (for qcow2) when cloning;[--prealloc-metadata] preallocate metadata (for qcow2 images which don't support full allocation). This option creates a sparse image file with metadata, resulting in higher performance compared to images with no preallocation and only slightly higher initial disk space usage.;Fangge Jin (fjin);Medium;Positive;Automated;;1;"1)
 <volume>
 <name>volds</name>
 <target>
 <path>/var/lib/libvirt/images/vol-test</path>
 <format type='qcow2'/>
 </target>
 <allocation>0</allocation>
         <capacity unit=""G"">5</capacity>
 </volume>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42279
1103;;;;;;;;;2;"2)
 # virsh vol-create default vol-test.xml --prealloc-metadata";​​;;RedHatEnterpriseLinux7/RHEL7-42279
1103;;;;;;;;;3;"3) clone the vol with the --prealloc-metadata option
 # virsh vol-clone /var/lib/libvirt/images/vol-test test2_clone2.img --prealloc-metadata";​​;;RedHatEnterpriseLinux7/RHEL7-42279
1103;;;;;;;;;4;"4) check img info
 #qemu-img info test2_clone2.img
 
​​";"#qemu-img info test2_clone2.img
 image: test2_clone2.img
 file format: qcow2
 virtual size: 10G (10737418240 bytes)
 disk size: 1.7M
 cluster_size: 65536
 Format specific information:
 compat: 0.10
​​";;RedHatEnterpriseLinux7/RHEL7-42279
1103;;;;;;;;;5;# ll test2_clone2.img;-rw-r--r--. 1 36 kvm 10739318784 Dec 21 03:42 test2_clone2.img;;RedHatEnterpriseLinux7/RHEL7-42279
1104;RHEL7-42280;[vol-upload] [--offset --length] Upload only part of the contents of local-file to a storage volume.;"   --offset <number>  volume offset to upload to
    --length <number>  amount of data to upload";Fangge Jin (fjin);Medium;Positive;Automated;;1;"1 Check the local disk
 # ll /var/lib/libvirt/images/
 -rw-r--r--. 1 root root 2012545024 Mar 27 14:25 rhelguest1.img
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42280
1104;;;;;;;;;2;"2 On remote
 create a disk with the same name in remote
 #qemu-img create -f qcow2 /var/lib/libvirt/images/rhelguest1.img 3G
 # guestfish -i /var/lib/libvirt/images/foo.img
 Could not open option rom 'sgabios.bin': No such file or directory
 guestfish: no operating system was found on this disk";​​;;RedHatEnterpriseLinux7/RHEL7-42280
1104;;;;;;;;;3;"3. On local
 # virsh -c qemu+ssh://xx.xx.xx.xx/system vol-upload --pool default
 rhelguest1.img /var/lib/libvirt/images/rhelguest1.img --offset 0 --length
 2012545024";​​;;RedHatEnterpriseLinux7/RHEL7-42280
1104;;;;;;;;;4;"4.On remote:
 #virsh pool-refresh default
 # virsh vol-list default
 Name Path
 \-----------------------------------------
 test.qcow2 /var/lib/libvirt/images/test.qcow2
 demo.img /var/lib/libvirt/images/demo.img
 rhelguest1 /var/lib/libvirt/images/rhelguest1.img";​​;;RedHatEnterpriseLinux7/RHEL7-42280
1104;;;;;;;;;5;"5.# guestfish -i /var/lib/libvirt/images/foo.img
 Could not open option rom 'sgabios.bin': No such file or directory
 Welcome to guestfish, the libguestfs filesystem interactive shell for
 editing virtual machine filesystems.
 Type: 'help' for help on commands
 'man' to read the manual
 'quit' to quit the shell
 Operating system: Red Hat Enterprise Linux Server release 6.1 (Santiago)
 /dev/VolGroup/lv_root mounted on /
 /dev/vda1 mounted on /boot
 ><fs> ls /home
 123
 ><fs> vi
 use 'vi filename' to edit a file
 ><fs> vi /home/123
 ><fs> cat /home/123
 asdf
 ><fs> quit";​​;;RedHatEnterpriseLinux7/RHEL7-42280
1105;RHEL7-42359;[Input devices] [keyboard] [virtio] Start a guest with virtio keyboard;Virtio keyboard, introduced in RHEL7.3, takes precedence over usb/ps2 keyboard.;Fangge Jin (fjin);High;Positive;Automated;;1;Define or edit a guest with virtio keyboard;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42359
1105;;;;;;;;;2;"Check dumpxml
 # virsh dumpxml $guest
 ...
     <input type='keyboard' bus='virtio'>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0a' function='0x0'/>
     </input>
 ...
";"virtio keyboard has pci address


";;RedHatEnterpriseLinux7/RHEL7-42359
1105;;;;;;;;;3;"Start the guest
 # virsh start fedora23
 Domain fedora23 started
";​​;;RedHatEnterpriseLinux7/RHEL7-42359
1105;;;;;;;;;4;"Check dumpxml again:
 # virsh dumpxml $guest
 ...
     <input type='keyboard' bus='virtio'>
       <alias name='input0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0a' function='0x0'/>
     </input>
 ...

";"virtio keyboard has alias name
​​";;RedHatEnterpriseLinux7/RHEL7-42359
1105;;;;;;;;;5;"Check qemu command line:
 # ps aux|grep fedora23| grep virtio-keyboard";"qemu command line includes:
 ......
 -device virtio-keyboard-pci,id=input0,bus=pci.0,addr=0xa
 ......
";;RedHatEnterpriseLinux7/RHEL7-42359
1105;;;;;;;;;6;The following steps are optional:;​​;;RedHatEnterpriseLinux7/RHEL7-42359
1105;;;;;;;;;7;"Open guest graphic, and type something by keyboard
";Characters can be input by keyboard;;RedHatEnterpriseLinux7/RHEL7-42359
1106;RHEL7-42360;[Input devices] [tablet] [virtio] Start a guest with virtio tablet- absolute cursor;"Virtio tablet, introduced in RHEL7.3, also functions as an absolute cursor. 
And virtio tablet should take precedence over usb tablet.";Fangge Jin (fjin);High;Positive;Automated;;1;Define or edit a guest with virtio tablet;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42360
1106;;;;;;;;;2;"Check dumpmxl
 # virsh dumpxml $guest
 
​​";"virtio tablet has pci address.
 
 Output:
 ...
     <input type='tablet' bus='virtio'>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0a' function='0x0'/>
     </input>
​​";;RedHatEnterpriseLinux7/RHEL7-42360
1106;;;;;;;;;3;"Start the guest
 # virsh start fedora23
 Domain fedora23 started
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42360
1106;;;;;;;;;4;"Check guest xml again:
 # virsh dumpxml $guest
​​";"virtio tablet has alias name.

 Output:
 ...
     <input type='tablet' bus='virtio'>
       <alias name='input0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0a' function='0x0'/>
     </input>
 ...";;RedHatEnterpriseLinux7/RHEL7-42360
1106;;;;;;;;;5;"Check qemu command line:
 # ps aux|grep fedora23";"Output:
 -device virtio-tablet-pci,id=input0,bus=pci.0,addr=0xa";;RedHatEnterpriseLinux7/RHEL7-42360
1106;;;;;;;;;6;The following steps are optional:;​​;;RedHatEnterpriseLinux7/RHEL7-42360
1106;;;;;;;;;7;"Stop spice-vdagent.service in guest if graphic type=spice:
 # systemctl stop spice-vdagentd";​​;;RedHatEnterpriseLinux7/RHEL7-42360
1106;;;;;;;;;8;"1) Open guest graphic, click in the guest graphic, and move mouse

 2) Move the mouse out of the guest graphic, and use mouse in host

 3) Try to open a folder or file or terminal to verify mouse work well in guest
​​";"1) virtual cursor moves in sync with the local desktop cursor.

 2) Mouse can move and be used between guest and host freely

 3)The mouse functions well
​​";;RedHatEnterpriseLinux7/RHEL7-42360
1106;;;;;;;;;9;"In guest:
 # demsg|grep tablet -i
 
 [    2.503978] input: QEMU Virtio Tablet as /devices/pci0000:00/0000:00:0a.0/virtio4/input/input4
  ";​​;;RedHatEnterpriseLinux7/RHEL7-42360
1107;RHEL7-42361;[Input devices] [mouse] [virtio] Start a guest with virtio mouse - relative cursor;"Virtio mouse, introduced in RHEL7.3, also functions as an relative cursor. 
And virtio mouse should take precedence over usb/ps2 mouse.";Fangge Jin (fjin);High;Positive;Automated;;1;Define or edit a guest with virtio mouse ;"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-42361
1107;;;;;;;;;2;"Check dumpxml
 # virsh dumpxml $guest
 ...
     <input type='mouse' bus='virtio'>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </input>
 ...
​​";virtio mouse has pci address;;RedHatEnterpriseLinux7/RHEL7-42361
1107;;;;;;;;;3;"Start the guest
 # virsh start fedora23
 Domain fedora23 started
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42361
1107;;;;;;;;;4;"Check guest xml again:
 # virsh dumpxml $guest
 ...
     <input type='mouse' bus='virtio'>
       <alias name='input0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </input>
 ...
​​";"virtio mouse has alias name
​​";;RedHatEnterpriseLinux7/RHEL7-42361
1107;;;;;;;;;5;"Check qemu command line:
 # ps aux|grep fedora23";"...
 -device virtio-mouse-pci,id=input0,bus=pci.0,addr=0x9
 ...";;RedHatEnterpriseLinux7/RHEL7-42361
1108;RHEL7-42362;[Input devices] [passthrough] [virtio] Start a guest with virtio passthrough input pci device;Passthrough a host input device to guest.;Fangge Jin (fjin);High;Positive;Not Automated;;1;1. Define or edit a guest with virtio passthrough input pci device;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42362
1108;;;;;;;;;2;"2. Check guest xml:
 # virsh dumpxml $guest
 ...
     <input type='passthrough' bus='virtio'>
       <source evdev='/dev/input/by-path/pci-0000\:00\:1d.2-usb-0\:1\:1.0-event-kbd'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </input>
 ...
";passthrough device has pci address;;RedHatEnterpriseLinux7/RHEL7-42362
1108;;;;;;;;;3;"3. Start guest:
 # virsh start fedora23
 Domain fedora23 started
";​​;;RedHatEnterpriseLinux7/RHEL7-42362
1108;;;;;;;;;4;"4. Check qemu command line:
 #""ps aux|grep qemu-kvm|grep virtio-input-host-pci""

 Note:
 If keyboard is passthroughed to guest, it will be unavailable on host. Then you will have to ssh to the host to check qemu command line, like:
 # ssh <hostname> ""ps aux|grep qemu-kvm|grep virtio-input-host-pci""
";"Output includes:
 -device virtio-input-host-pci,id=input0,evdev=/dev/input/by-path/pci-0000\:00\:1d.2-usb-0\:1\:1.0-event-kbd,bus=pci.0,addr=0x9";;RedHatEnterpriseLinux7/RHEL7-42362
1108;;;;;;;;;5;The following steps are optional:;​​;;RedHatEnterpriseLinux7/RHEL7-42362
1108;;;;;;;;;6;5. On local host, open guest graphic by virt-viewer or virt-manager;​​;;RedHatEnterpriseLinux7/RHEL7-42362
1108;;;;;;;;;7;"6. In guest window, try to input some characters in guest by keyboard
";Characters can be input in guest by keyboard successfully;;RedHatEnterpriseLinux7/RHEL7-42362
1108;;;;;;;;;8;"7. On local host, try to input some characters in host by keyboard
";Can't input successfully;;RedHatEnterpriseLinux7/RHEL7-42362
1108;;;;;;;;;9;"8. # virsh destroy fedora23
";​​;;RedHatEnterpriseLinux7/RHEL7-42362
1108;;;;;;;;;10;9.After guest is destroyed, try to input some characters in host A by keyboard;On local host, keyboard can be used again.;;RedHatEnterpriseLinux7/RHEL7-42362
1109;RHEL7-42373;WALA-TC: [General] Check the boot messages;WALA-TC: [General] Check the boot messages;Yuxin Sun (yuxisun);Critical;Positive;Automated;;1;"Prepare a VM named VM-test and login.
 1. Check the boot messages:
 # cat /var/log/messages
​​";"There's no error messages.
 Acceptable messages:
 * The rngd fail because there's no 'rdrand' cpu flag in /proc/cpuinfo
 * Kdump fail please check if crashkernel=xxx is in kernel parameters and if RHEL-7 the memory must be >= 2G
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-42373
1109;;;;;;;;;2;config;​​;;RedHatEnterpriseLinux7/RHEL7-42373
1110;RHEL7-42378;Migrate a guest with virtio passthrough input pci device lively;Live migration with virtio passthrough input device is not supported.;Fangge Jin (fjin);Low;Negative;Not Automated;;1;"1. Config virtio passthrough input pci for guest. Refer to case:
 RHEL7-42362 - [Input devices] [passthrough] [virtio] Start a guest with virtio passthrough input pci device 
 
 Note:
 Make sure to choose an input device that exists on both source and target host, for example:
 # ls /dev/input/event2 
 /dev/input/event2
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42378
1110;;;;;;;;;2;"2. Do migraition:
 # virsh migrate fedora23 qemu+ssh://10.66.83.38/system --live --verbose
 error: internal error: unable to execute QEMU command 'migrate': State blocked by non-migratable device '0000:00:09.0/virtio-input-host'
​​";"Migration failed.
​​";;RedHatEnterpriseLinux7/RHEL7-42378
1111;RHEL7-42382;[SR-IOV] Prepare: Mellanox network adapters  - Bug 1302184  1177728;"The case is to prepare the environment for SRIOV testing with Mellanox network adapters
 
SRIOV mojo page: https://mojo.redhat.com/docs/DOC-178216 
 
The environment configuration for Mellanox NIC : https://mojo.redhat.com/docs/DOC-1094862 
";Jingjing Shao (jishao);High;Positive;Not Automated;;1;Do the test case as below;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42382
1111;;;;;;;;;2;RHEL7-18505 - [SR-IOV] Hotplug/unplug VF with managed='yes' - bug 844287, 843016;​​;;RedHatEnterpriseLinux7/RHEL7-42382
1111;;;;;;;;;3;RHEL7-42385 - [SR-IOV][Mellanox] : Attach vf device with single port mode - bug 1267191 1447680 ;​​;;RedHatEnterpriseLinux7/RHEL7-42382
1111;;;;;;;;;4;"RHEL7-18525 - [Hot-plug] Attach VF from inactive network to running guest (negative) - bug 1002438 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42382
1111;;;;;;;;;5;RHEL7-98410 - [interface hotplug] [hostdev] attach hostdev interface/device with different elements/attributes - bug 997561;​​;;RedHatEnterpriseLinux7/RHEL7-42382
1111;;;;;;;;;6;RHEL7-18501 - [PF passthrough] Hot-plug PF to vm;​​;;RedHatEnterpriseLinux7/RHEL7-42382
1111;;;;;;;;;7;RHEL7-18499 - [PCI assignment] Hot unplug PF;​​;;RedHatEnterpriseLinux7/RHEL7-42382
1111;;;;;;;;;8;RHEL7-18508 - [SR-IOV] Reboot guest with assigned VF;​​;;RedHatEnterpriseLinux7/RHEL7-42382
1112;RHEL7-42384;[domifaddr] Report guest ip addresses on virtual networks - bug 1588336;"Report guest's ip by 2 ways, from dnsmasq lease file and from the guest agent. --source lease will report all the interface use the dnsmasq from host's side, and --agent will report all the interface info on the guest from guest's side.
domifaddr only handle the interface connected to libvirted controlled network, such as nat, route, isolated, open. not for birdge, macvtap, hostdev or others";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1.  Use domifaddr to check  the guest's IP and log in the guest to confirm.
 
 # virsh start rhel7.2
 Domain rhel7.2 started
 
 # virsh domuuid rhel7.2
 25707737-6554-4b85-bc33-339a7e8b878c
 
 # virsh domid rhel7.2
 5
​​";1.login guest to check the address, the result should be consistent with result returned by libvirt.;Test Case;RedHatEnterpriseLinux7/RHEL7-42384
1112;;;;;;;;;2;# virsh domifaddr rhel7.2;" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  vnet0      52:54:00:03:fa:3d    ipv6         2001:db8:ca2:2:1::6d/64
  -          -                    ipv4         192.168.122.253/24
  vnet1      52:54:00:02:59:a0    ipv4         192.168.122.102/24
  -          -                    ipv6         2001:db8:ca2:2:1::70/64";;RedHatEnterpriseLinux7/RHEL7-42384
1112;;;;;;;;;3;"# virsh domifaddr 5
  ";same as above;;RedHatEnterpriseLinux7/RHEL7-42384
1112;;;;;;;;;4;"# virsh domifaddr 25707737-6554-4b85-bc33-339a7e8b878c
​​";same as above;;RedHatEnterpriseLinux7/RHEL7-42384
1112;;;;;;;;;5;"2. # virsh domifaddr 5 --source lease
​​";same as above;;RedHatEnterpriseLinux7/RHEL7-42384
1112;;;;;;;;;6;"# virsh domifaddr 5 --source agent
 
​​";" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  lo         00:00:00:00:00:00    ipv4         127.0.0.1/8
  -          -                    ipv6         ::1/128
  ens8       52:54:00:03:fa:3d    ipv4         192.168.122.253/24
  -          -                    ipv6         2001:db8:ca2:2:1::6d/128
  -          -                    ipv6         fe80::5054:ff:fe03:fa3d/64
  virbr0     52:54:00:4a:73:50    ipv4         192.168.124.1/24
  virbr0-nic 52:54:00:4a:73:50    N/A          N/A
  ens9       52:54:00:02:59:a0    ipv4         192.168.122.102/24
  -          -                    ipv6         2001:db8:ca2:2:1::70/128
  -          -                    ipv6         fe80::411a:3ffc:96af:4e9d/64
 
 (all the interfaces on vm is displayed, compare with the output from vm by ""ip a show"")";;RedHatEnterpriseLinux7/RHEL7-42384
1112;;;;;;;;;7;"# virsh domifaddr rhel7.2 vnet1
​​";" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  vnet1      52:54:00:b9:14:c7    ipv4         192.168.123.86/24
  -          -                    ipv6         2001:db8:ca2:2:1::97/64";;RedHatEnterpriseLinux7/RHEL7-42384
1112;;;;;;;;;8;"# virsh domifaddr rhel7.2 ens8  --source agent
  ";" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  ens8       52:54:00:03:fa:3d    ipv4         192.168.122.253/24
  -          -                    ipv6         2001:db8:ca2:2:1::6d/128
  -          -                    ipv6         fe80::5054:ff:fe03:fa3d/64";;RedHatEnterpriseLinux7/RHEL7-42384
1112;;;;;;;;;9;"# virsh domifaddr rhel7.2 ens8  --source agent --full
  
​​";" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  ens8       52:54:00:03:fa:3d    ipv4         192.168.122.253/24
  ens8       52:54:00:03:fa:3d    ipv6         2001:db8:ca2:2:1::6d/128
  ens8       52:54:00:03:fa:3d    ipv6         fe80::5054:ff:fe03:fa3d/64";;RedHatEnterpriseLinux7/RHEL7-42384
1112;;;;;;;;;10;"# virsh domifaddr rhel7.2 vnet1  --source lease --full
​​";" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  vnet1      52:54:00:b9:14:c7    ipv4         192.168.123.86/24
  vnet1      52:54:00:b9:14:c7    ipv6         2001:db8:ca2:2:1::97/64";;RedHatEnterpriseLinux7/RHEL7-42384
1112;;;;;;;;;11;"# virsh domifaddr rhel7.2 --source agent --interface eth1 --full
​​";" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  eth1       52:54:00:b9:14:c7    ipv4         192.168.123.86/24
  eth1       52:54:00:b9:14:c7    ipv6         2001:db8:ca2:2:1::97/64
  eth1       52:54:00:b9:14:c7    ipv6         fe80::5054:ff:feb9:14c7/64";;RedHatEnterpriseLinux7/RHEL7-42384
1112;;;;;;;;;12;"# virsh domifaddr rhel  --source arp 
 
​​";" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  vnet0      52:54:00:03:fa:3d    ipv4         192.168.122.253/0
  vnet1      52:54:00:02:59:a0    ipv4         192.168.122.102/0";;RedHatEnterpriseLinux7/RHEL7-42384
1112;;;;;;;;;13;"3. Add multiple ip address for the guest eth0
 multiple ip alias can be show with the same name.
 # virsh domifaddr rhel7.2 --source agent
 
 
​​";"  Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  lo         00:00:00:00:00:00    ipv4         127.0.0.1/8
  -          -                    ipv6         ::1/128
  eth0     52:54:00:27:0b:8f    ipv4         192.168.122.10/24
  -          -                    ipv6         fe80::5054:ff:fe27:b8f/64
  -          -                    ipv4         192.168.122.11/24
  -          -                    ipv4         192.168.122.12/24
  -          -                    ipv4         192.168.122.13/24
  eth1     52:54:00:fe:80:17    ipv4         192.168.122.20/24
  -          -                    ipv6         fe80::5054:ff:fefe:8017/64
  virbr0     52:54:00:86:5f:43    ipv4         192.168.122.1/24
  virbr0-nic 52:54:00:86:5f:43    ipv6         fe80::5054:ff:fe86:5f43/64";;RedHatEnterpriseLinux7/RHEL7-42384
1112;;;;;;;;;14;"# virsh domifaddr test3 --source agent --full
​​";" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  lo         00:00:00:00:00:00    ipv4         127.0.0.1/8
  lo         00:00:00:00:00:00    ipv6         ::1/128
  eth0     52:54:00:27:0b:8f    ipv4         192.168.122.10/24
  eth0     52:54:00:27:0b:8f    ipv6         fe80::5054:ff:fe27:b8f/64
  eth0     52:54:00:27:0b:8f    ipv4         192.168.122.11/24
  eth0     52:54:00:27:0b:8f    ipv4         192.168.122.12/24
  eth0     52:54:00:27:0b:8f    ipv4         192.168.122.13/24
  eth1     52:54:00:fe:80:17    ipv4         192.168.122.20/24
  eth1     52:54:00:fe:80:17    ipv6         fe80::5054:ff:fefe:8017/64
  virbr0     52:54:00:86:5f:43    ipv4         192.168.122.1/24
  virbr0-nic 52:54:00:86:5f:43    ipv6         fe80::5054:ff:fe86:5f43/64";;RedHatEnterpriseLinux7/RHEL7-42384
1112;;;;;;;;;15;"4. some negative scenario
 
 
 
 
 
 
 
 
 
  
​​";"4. when the guest is not start or not exist, it will report error.
 after the qemu-guest-agent service stop on the guest, the command --source agent can not get ip.
​​";;RedHatEnterpriseLinux7/RHEL7-42384
1113;RHEL7-42385;[SR-IOV][Mellanox] : Attach vf device with single port mode - bug 1267191  1447680;"According to the comment : https://bugzilla.redhat.com/show_bug.cgi?id=1447680#c14
 
the dual port mode of mellanox is not supported in libvirt, just use the single port mode.
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;"1. Choose the vf as below
  |   +- pci_0000_05_00_0
   |   |   |
   |   |   +- net_p7p1_e4_1d_2d_48_26_11
   |   |   +- net_p7p2_e4_1d_2d_48_26_12
   |   |     
   |   +- pci_0000_05_00_1
   |   |   |
   |   |   +- net_p7p1_0_9e_57_38_a2_0b_cb
 
   |   +- pci_0000_05_00_5
   |   |   |
   |   |   +- net_p7p1_4_b2_4f_51_b6_ee_d2
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42385
1113;;;;;;;;;2;"2.Check the phys_port_id of  PF  port
 # cat /sys/devices/pci0000:00/0000:00:02.2/0000:05:00.0/net/p7p1/phys_port_id
 
 # cat /sys/devices/pci0000:00/0000:00:02.2/0000:05:00.0/net/p7p2/phys_port_id
​​";"Output:
 e41d2d0300482611
 e41d2d0300482612";;RedHatEnterpriseLinux7/RHEL7-42385
1113;;;;;;;;;3;"3. Check the phys_port_id of vf 
 # cat  /sys/devices/pci0000:00/0000:00:02.2/0000:05:00.1/net/p7p1_0/phys_port_id
 # cat /sys/devices/pci0000:00/0000:00:02.2/0000:05:00.5//net/p7p1_4/phys_port_id
​​";"Output:
 e41d2d0300482611
 e41d2d0300482612";;RedHatEnterpriseLinux7/RHEL7-42385
1113;;;;;;;;;4;So the vf  pci_0000_05_00_1 depands on port p7p1, the vf  pci_0000_05_00_5 depands on port p7p2 port.;​​;;RedHatEnterpriseLinux7/RHEL7-42385
1113;;;;;;;;;5;"4. Prepare the device xml as below.
 # cat hostdev.xml 
 <interface type='hostdev' managed='yes'>
 <mac address='02:24:6b:89:bc:e9'/>
 <source>
 <address type='pci' domain='0x0000' bus='0x05' slot='0x00' function='0x1'/>
 </source>
 <vlan>
 <tag id='42'/>
 </vlan>
 </interface> 
 
 # cat hostdev2.xml 
 <interface type='hostdev' managed='yes'>
 <mac address='56:cf:93:90:a2:19'/>
 <source>
 <address type='pci' domain='0x0000' bus='0x05' slot='0x00' function='0x5'/>
 </source>
 <vlan>
 <tag id='43'/>
 </vlan>
 </interface>
​​"; ;;RedHatEnterpriseLinux7/RHEL7-42385
1113;;;;;;;;;6;"5. Keep the device p7p1 down and the p7p2 up, to hotplug.
 # ip l set p7p1 down
 # ip l set p7p2 up
 # ip l
​​";"Output:
 39: p7p1: <BROADCAST,MULTICAST> mtu 1500 qdisc mq state DOWN mode DEFAULT group default qlen 1000
 40: p7p2: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
​​";;RedHatEnterpriseLinux7/RHEL7-42385
1113;;;;;;;;;7;# virsh attach-device rhel hostdev.xml;"Output:
 error: Failed to attach device from hostdev.xml
 error: internal error: Unable to configure VF 0 of PF 'p7p1' because the PF is not online. Please change host network config to put the PF online.
​​";;RedHatEnterpriseLinux7/RHEL7-42385
1113;;;;;;;;;8;"# virsh attach-device rhel hostdev2.xml 
 
​​";"Output:
 Device attached successfully";;RedHatEnterpriseLinux7/RHEL7-42385
1113;;;;;;;;;9;"6. Keep the device p7p1 up and the p7p2 down, to hotplug.
 # ip l set p7p1 up
 # ip l set p7p2 down
 # ip l
​​";"Output:
  p7p1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
 40: p7p2: <BROADCAST,MULTICAST> mtu 1500 qdisc mq state DOWN mode DEFAULT group default qlen 1000";;RedHatEnterpriseLinux7/RHEL7-42385
1113;;;;;;;;;10;# virsh attach-device rhel hostdev.xml;"Output:
 Device attached successfully";;RedHatEnterpriseLinux7/RHEL7-42385
1113;;;;;;;;;11;# virsh attach-device rhel hostdev2.xml;"Output:
 error: Failed to attach device from hostdev2.xml
 error: internal error: Unable to configure VF 4 of PF 'p7p2' because the PF is not online. Please change host network config to put the PF online.
​​";;RedHatEnterpriseLinux7/RHEL7-42385
1113;;;;;;;;;12;"7. Keep the device p7p1 down and the p7p2 down, to hotplug.
 # ip l set p7p1 down
 # ip l set p7p2 down
 # ip l    
​​";"Output:     
  39: p7p1: <BROADCAST,MULTICAST> mtu 1500 qdisc mq state DOWN mode DEFAULT group default qlen 1000
 40: p7p2: <BROADCAST,MULTICAST> mtu 1500 qdisc mq state DOWN mode DEFAULT group default qlen 1000
​​";;RedHatEnterpriseLinux7/RHEL7-42385
1113;;;;;;;;;13;# virsh attach-device rhel hostdev.xml;"Output:
 error: Failed to attach device from hostdev.xml
 error: internal error: Unable to configure VF 0 of PF 'p7p1' because the PF is not online. Please change host network config to put the PF online.";;RedHatEnterpriseLinux7/RHEL7-42385
1113;;;;;;;;;14;# virsh attach-device rhel hostdev2.xml;"Output:
 error: Failed to attach device from hostdev2.xml
 error: internal error: Unable to configure VF 4 of PF 'p7p2' because the PF is not online. Please change host network config to put the PF online.";;RedHatEnterpriseLinux7/RHEL7-42385
1113;;;;;;;;;15;"8. Keep the device p7p1 up and the p7p2 up, to hotplug.
 # ip l set p7p1 up
 # ip l set p7p2 up
 # ip l   ";"Output:              
 39: p7p1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
 40: p7p2: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000";;RedHatEnterpriseLinux7/RHEL7-42385
1113;;;;;;;;;16;# virsh attach-device rhel hostdev.xml;"Output:
 Device attached successfully";;RedHatEnterpriseLinux7/RHEL7-42385
1113;;;;;;;;;17;# virsh attach-device rhel hostdev2.xml;"Output:
 Device attached successfully";;RedHatEnterpriseLinux7/RHEL7-42385
1114;RHEL7-42387;[SR-IOV]  Migrate the guest with VFs in VF pool (no support);Migrate the guest with VFs in VF pool;Jingjing Shao (jishao);Medium;Negative;Not Automated;;1;"1. Prepare the network as below
 # virsh net-dumpxml hostnet";"Output:
 <network>
   <name>hostnet</name>
   <uuid>7d59cd95-7052-3c51-3401-eeef52177df9</uuid>
   <forward mode='hostdev' managed='yes'>
     <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x1'/>
     <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x3'/>
   </forward>
 </network>";Test Case;RedHatEnterpriseLinux7/RHEL7-42387
1114;;;;;;;;;2;"2.Prepare a running guest and attach the network device to guest
 
 #virsh attach-interface r6-4 network hostnet
";"Output:
 Interface attached successfully";;RedHatEnterpriseLinux7/RHEL7-42387
1114;;;;;;;;;3;"3. Check the device info in the guest
 #virsh dumpxml r6-4 | grep interface -A 10
​​";"Output:
 .....
 <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:fa:a5:c6'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x1'/>
       </source>
       <alias name='hostdev0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 ................";;RedHatEnterpriseLinux7/RHEL7-42387
1114;;;;;;;;;4;"4.  Do the migration
 virsh migrate --live r6-4 qemu+ssh://10.66.70.102/system";"Output: 
 virsh migrate --live r6-4 qemu+ssh://10.66.70.102/system
   *****10.66.70.102 is machine to migrate ************************
 error: Requested operation is not valid: domain has assigned non-USB host devices";;RedHatEnterpriseLinux7/RHEL7-42387
1115;RHEL7-42396;[network][hostdev] Using invalid PF(non-existent or normal interface ) or interface dev specified with name in hostdev network   - bug 971325 1311464;"negative test: invalid PF(non-existent PF or normal interface without vf, 2 PFs), invalid vf(specified with name, duplicated pci address) should report error, and libvirtd not crash.
Due to limitations in standard single-port PCI ethernet card driver design - only SR-IOV (Single Root I/O Virtualization) virtual function (VF) devices can be assigned in this manner; to assign a standard single-port PCI or PCIe ethernet card to a guest, use the traditional <hostdev> device definition.
";Yalan Zhang (yalzhang);High;Negative;Not Automated;;1;"Scenario 1:
 1. find out the SRIOV PF and a normal interface
 # virsh nodedev-list --tree
   ...
   +- pci_0000_00_01_0
   |   |
   |   +- pci_0000_03_00_0
   |   +- pci_0000_03_00_1          <---- PF
   |   |   |
   |   |   +- net_ens1f1_00_1b_21_39_8b_19
   |   |
   |   +- pci_0000_03_10_1
   |   |   |
   |   |   +- net_enp3s16f1_ce_da_81_95_c3_2e
   |   |
   |   +- pci_0000_03_10_3
   |   |   |
   |   |   +- net_enp3s16f3_3e_0c_a6_c0_5e_a7
   |   |
   ...
   |   +- pci_0000_01_00_0           <---- a normal interface
   |       |
   |       +- net_eth0_d8_d3_85_7e_61_9b
   ...
 
 # lspci | grep 82576
 03:00.0 Ethernet controller: Intel Corporation 82576 Gigabit Network Connection (rev 01)
 03:00.1 Ethernet controller: Intel Corporation 82576 Gigabit Network Connection (rev 01)
 03:10.1 Ethernet controller: Intel Corporation 82576 Virtual Function (rev 01)
 03:10.3 Ethernet controller: Intel Corporation 82576 Virtual Function (rev 01)
 03:10.5 Ethernet controller: Intel Corporation 82576 Virtual Function (rev 01)
 03:10.7 Ethernet controller: Intel Corporation 82576 Virtual Function (rev 01)
 03:11.1 Ethernet controller: Intel Corporation 82576 Virtual Function (rev 01)
 03:11.3 Ethernet controller: Intel Corporation 82576 Virtual Function (rev 01)
 03:11.5 Ethernet controller: Intel Corporation 82576 Virtual Function (rev 01)
​​";" Assign a non-existent interface, it will report error and libvirtd will not crash. That is, the error should not like this:
 ""error: Failed to reconnect to the hypervisor""
 
 Step 2:
 use non-existent interface not PF, it will report error and not crash
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-42396
1115;;;;;;;;;2;"2. assign a non-existent interface
 # cat passthrough.xml
 <network>
    <name>passthrough</name>
    <forward mode='hostdev' managed='yes'>
      <pf dev='eth99'/>   <!---- non-existent interface -->
    </forward>
 </network>
 
 #virsh net-define passthrough.xml
 Network passthrough defined from passthrough.xml
 
 # virsh net-start passthrough";"error: Failed to start network pass
 error: internal error: No usable Vf's present on SRIOV PF eth99";;RedHatEnterpriseLinux7/RHEL7-42396
1115;;;;;;;;;3;"3. assign a normal interface (eg. eth0)
 # cat passthrough.xml
 <network>
    <name>passthrough</name>
    <forward mode='hostdev' managed='yes'>
      <pf dev='eth0'/>
    </forward>
 </network>
 #virsh net-define passthrough.xml
 Network passthrough defined from passthrough.xml
 # virsh netstart passthrough
​​";"error: Failed to start network passthrough
 error: internal error: No usable Vf's present on SRIOV PF eth0
​​";;RedHatEnterpriseLinux7/RHEL7-42396
1115;;;;;;;;;4;"4. assign a VF
 <network>
    <name>passthrough</name>
    <forward mode='hostdev' managed='yes'>
      <pf dev='enp3s16f1'/>
    </forward>
 </network>
 #virsh net-define passthrough.xml
 Network passthrough defined from passthrough.xml
 # virsh netstart passthrough
​​";"error: Failed to start network passthrough
 error: internal error: No usable Vf's present on SRIOV PF eth0
 
 (use VF not PF name, It will report error and libvirtd will not crash.)";;RedHatEnterpriseLinux7/RHEL7-42396
1115;;;;;;;;;5;"Scenario 2:
 5. Define and start a network with forward mode=hostdev and interface pool specified with interface's name which is not supported currently.
 # cat testnet.xml
 <network>
 <name>testnet</name>
 <forward dev='eth4' mode='hostdev' managed='yes'>
 <driver name='vfio'/>
 <interface dev='eth0'/>
 </forward>
 </network>
 # virsh net-define testnet.xml
​​";"error: Failed to define network from net.xml
 error: XML error: <forward dev='eth4'> must match first <interface dev='eth0'/> in network testnet
 
 
 (use interface name not PCI address, check the error messages)
 
 
 
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-42396
1115;;;;;;;;;6;"edit to the same device eth0
 <network>
 <name>testnet</name>
 <forward dev='eth0' mode='hostdev' managed='yes'>
 <driver name='vfio'/>
 <interface dev='eth0'/>
 </forward>
 </network>
 # virsh net-define net.xml
​​";"error: Failed to define network from net.xml
 error: unsupported configuration: hostdev network 'testnet' lists 'eth0' in the device pool, but hostdev networks require all devices to be listed by PCI address, not network device name";;RedHatEnterpriseLinux7/RHEL7-42396
1115;;;;;;;;;7;"scenario 3
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42396
1115;;;;;;;;;8;"1. hostdev network with duplicate pci address can not be defined or created.
 # cat passthrough1.xml
 <network>
 <name>passthrough1</name>
  <forward mode='hostdev' managed='yes'>
     <driver name='vfio'/>
     <address type='pci' domain='0000' bus='03' slot='10' function='4'/>
     <address type='pci' domain='0000' bus='03' slot='10' function='5'/>
     <address type='pci' domain='0000' bus='03' slot='10' function='4'/>
     <address type='pci' domain='0000' bus='03' slot='10' function='6'/>
     <address type='pci' domain='0000' bus='03' slot='10' function='4'/>
   </forward>
 </network>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-42396
1115;;;;;;;;;9;# virsh net-define passthrough1.xml;"error: Failed to define network from passthrough1.xml
 error: XML error: PCI device '0000:03:0a.4' can only be listed once in network passthrough1";;RedHatEnterpriseLinux7/RHEL7-42396
1115;;;;;;;;;10;# virsh net-create passthrough1.xml;"error: Failed to create network from passthrough1.xml
 error: XML error: PCI device '0000:03:0a.4' can only be listed once in network passthrough1";;RedHatEnterpriseLinux7/RHEL7-42396
1115;;;;;;;;;11;"2. net-edit will fail if add a duplicate vf in hostdev network.
 # virsh net-dumpxml passthrough1
 <network>
   <name>passthrough1</name>
   <uuid>57f2706c-fafc-4adb-88da-0e607606ddb3</uuid>
   <forward mode='hostdev' managed='yes'>
     <driver name='vfio'/>
     <address type='pci' domain='0x0000' bus='0x03' slot='0x0a' function='0x4'/>
     <address type='pci' domain='0x0000' bus='0x03' slot='0x0a' function='0x5'/>
     <address type='pci' domain='0x0000' bus='0x03' slot='0x0a' function='0x6'/>
   </forward>
 </network>
 ...
 error: XML error: PCI device '0000:03:0a.4' can only be listed once in network passthrough1
 Failed. Try again? [y,n,f,?]:";​​;;RedHatEnterpriseLinux7/RHEL7-42396
1116;RHEL7-42400;[virsh] [-c] Connect to a hypervisor URI;Connect to a hypervisor URI;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Scenario 1(positive):
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-42400
1116;;;;;;;;;2;" # virsh -c qemu:///system
 OR
 # virsh --connect qemu:///system
​​";"# virsh -c qemu:///system
 Welcome to virsh, the virtualization interactive terminal.
 Type: 'help' for help with commands
 'quit' to quit
 virsh # list --all
 Id Name State
 \----------------------------------
 \- rhel39 shut off
 \- rhel55 shut off
 virsh #";;RedHatEnterpriseLinux7/RHEL7-42400
1116;;;;;;;;;3;Scenario 2(negative): Connect to an invalide URI;​​;;RedHatEnterpriseLinux7/RHEL7-42400
1116;;;;;;;;;4;" **# virsh -c xen+ssh://10.66.72.24/system list --all
 root@10.66.72.24's password:
 error: failed to connect to the hypervisor
 error: no valid connection
 error: no connection driver available for URI xen:///system
 root@10.66.72.24's password:
 error: Failed to reconnect to the hypervisor";​​;;RedHatEnterpriseLinux7/RHEL7-42400
1117;RHEL7-42401;[virsh -c] Check memory leak with virsh -c {invalid URI};Check memory leak with virsh -c {invalid URI};Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"give a incomplete qemu/xen URI etc
 # valgrind -v --leak-check=full virsh -c qemu";"error: internal error no QEMU URI path given, try qemu:///system
 error: failed to connect to the hypervisor
 ...snip...
 **Note: there is little memory leak now, but it isn't caused by libvirt component, it is caused by funciton ""gnutls_global_init"", confirmed with developer this will be ignored. **
 **Please double check it is not caused by libvirt component, such as ""virsh_cms"" etc...**
 ==4562== **14 bytes in 1 blocks are definitely lost in loss record 27 of 140**
 ==4562== at 0x4C28409: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)
 ==4562== by 0x8619D71: strdup (in /usr/lib64/libc-2.16.so)
 ==4562== by 0x98E970B: p11_kit_registered_module_to_name (in /usr/lib64/libp11-kit.so.0.0.0)
 ==4562== by 0x6C3676C: gnutls_pkcs11_init (in /usr/lib64/libgnutls.so.26.22.5)
 ==4562== by 0x6C200C1: **gnutls_global_init **(in /usr/lib64/libgnutls.so.26.22.5)
 ==4562== by 0x4F1AFD1: ??? (in /usr/lib64/libvirt.so.0.1000.3)
 ==4562== by 0x79D4ABF: pthread_once (in /usr/lib64/libpthread-2.16.so)
 ==4562== by 0x4F1CB26: virInitialize (in /usr/lib64/libvirt.so.0.1000.3)
 ==4562== by 0x40BA19: ??? (in /usr/bin/virsh)
 ==4562== by 0x85B5A04: (below main) (in /usr/lib64/libc-2.16.so)
 ==4562==
 ==4562==** LEAK SUMMARY:**
 ==4562== definitely lost: **14 bytes in 1 blocks**
 ==4562== indirectly lost: 0 bytes in 0 blocks
 ==4562== possibly lost: 0 bytes in 0 blocks
 ==4562== still reachable: 120,476 bytes in 1,080 blocks
 ==4562== suppressed: 0 bytes in 0 blocks";Test Case;RedHatEnterpriseLinux7/RHEL7-42401
1118;RHEL7-43013;[udp] check performance of udp type interface ;UDP: support udp type interface, guest can ping each other.;Yalan Zhang (yalzhang);Low;Positive;Not Automated;;1;" 1. prepare 2 guests with below interfaces
 # virsh edit  rhel7.2
     <interface type='udp'>
       <source address='127.0.0.1' port='5558'>
         <local address='127.0.0.1' port='6667'/>
       </source>
   </interface>
 
 # virsh edit tftp6.6
   <interface type='udp'>
       <source address='127.0.0.1' port='6667'>
         <local address='127.0.0.1' port='5558'/>
       </source>
     </interface>
 (the source and local address for these 2 guests are opposite, this build a tunnel for the 2 vms)
​​";"1.  the guest start successfully.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-43013
1118;;;;;;;;;2;"2. start the guests
 # virsh start rhel7.2
 ==> start successfully
 
 # virsh dumpxml rhel7.2 | grep /interface -B9";"   <interface type='udp'>
       <mac address='52:54:00:7b:ac:2d'/>
       <source address='127.0.0.1' port='5558'>
         <local address='127.0.0.1' port='6667'/>
       </source>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-43013
1118;;;;;;;;;3;"3. 
 # virsh start tftp6.6
 ==> start successfully
 
 # virsh dumpxml tftp6.6 | grep /interface -B8
  
​​";"   <interface type='udp'>
       <mac address='52:54:00:45:c8:32'/>
       <source address='127.0.0.1' port='6667'>
         <local address='127.0.0.1' port='5558'/>
       </source>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";;RedHatEnterpriseLinux7/RHEL7-43013
1118;;;;;;;;;4;"4. login the 2 guests, then config ip address, and ping each other.
 
 on rhel7.2
 # ifconfig eth0 10.10.10.10/24
 
 on tftp6.6
 # ifconfig eth0 10.10.10.20/24 and check the ip 
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-43013
1118;;;;;;;;;5;"5. on rhel7.2, # ping 10.10.10.10
 on tftp6.6, # ping 10.10.10.20";the 2 can access to each other;;RedHatEnterpriseLinux7/RHEL7-43013
1119;RHEL7-43066;[Ethernet] Define an Ethernet with local IPv6 address --bug1311857;"On IPv6 supported host, define and start an Ethernet via XML describing local IPv6 address. Verify the Ethernet can get local IP and ping to global IP. 
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;" 1. Prepare the following xml:
 <interface type='ethernet'  name='eth0'>
  <start mode='onboot'/>
  <protocol family='ipv6'>
  </protocol>
 </interface>

";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-43066
1119;;;;;;;;;2;"2.Define new eth0 with local ipv6 address
 # virsh iface-define new-eth0-ipv6.xml

 # virsh iface-start eth0";"Output:
 Interface eth0 defined
 Interface eth0 started";;RedHatEnterpriseLinux7/RHEL7-43066
1119;;;;;;;;;3;"3.Check the dumpxml of eth0
 # virsh iface-dumpxml eth0
​​";"Output:
 <interface type='ethernet'  name='eth0'>
 <protocol family='ipv6'>
 <ip address='fe80::4637:e6ff:fe95:3e4' prefix='64'/>
 </protocol>
 <link speed='1000' state='up'/>
 <mac address='44:37:e4:95:03:e4'/>
 </interface>";;RedHatEnterpriseLinux7/RHEL7-43066
1119;;;;;;;;;4;"4.Check the config of eth0
 
 # cat /etc/sysconfig/network-scripts/ifcfg-eth0
 
 
 # ifconfig eth0
 
​​";"Output:
 DEVICE='eth0'
 ONBOOT='yes'
 IPV6INIT='yes'
 IPV6_AUTOCONF='no'
 
 eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
 inet6 fe80::4637:e6ff:fe95:3e4   prefixlen  64  scopeid 0x20<link>
 ether 44:37:e6:95:03:e4  txqueuelen 1000 (Ethernet)
 RX  packets 19039112 bytes 23654482433 (22.0 GiB)
 RX  errors  0  deopped  387 overruns  0 feame 0
 TX   packets  3086476  bytes  274814603 (262.0 MiB)
 TX   errors  0  dropped 0 overruns 0 carrier 0  collisions 0
 device interrupts 20 memory 0xfe400000-fe420000
​​";;RedHatEnterpriseLinux7/RHEL7-43066
1120;RHEL7-43202;[Ethernet]Define an ipv6 Ethernet wtih autoconf;"Define and start an Ethernet via XML describing   autoconf 
 
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;"1. Check the origin config of eno1
  # ifconfig  eno1";"Output:   
 eno1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 10.16.64.108  netmask 255.255.248.0  broadcast 10.16.71.255
         inet6 2620:52:0:1040:9657:a5ff:fec4:82e7  prefixlen 64  scopeid 0x0<global>
         inet6 fe80::9657:a5ff:fec4:82e7  prefixlen 64  scopeid 0x20<link>
         ether 94:57:a5:c4:82:e7  txqueuelen 1000  (Ethernet)
         RX packets 735547  bytes 67479371 (64.3 MiB)
         RX errors 0  dropped 7  overruns 0  frame 0
         TX packets 5023  bytes 1360292 (1.2 MiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
         device memory 0x92d00000-92dfffff 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-43202
1120;;;;;;;;;2;"2. Destroy the origin interface 
 # virsh iface-destroy eno1
 # virsh iface-undefine eno1
​​";"Output:
 Interface eno1 destroyed
 Interface eno1 undefined";;RedHatEnterpriseLinux7/RHEL7-43202
1120;;;;;;;;;3;"2, Prepare a xml as below
 # cat ipv6-autoconf.xml
​​";"Output:
 <interface type='ethernet' name='eno1'>
 <start mode='onboot'/>
 <protocol family='ipv6'>
 <autoconf/>
 </protocol>
 </interface>";;RedHatEnterpriseLinux7/RHEL7-43202
1120;;;;;;;;;4;"3. Define and start  the eno1
 # virsh iface-define ipv6-autoconf.xml
 # virsh iface-start eno1
​​";"Output:
 Interface eno1 defined from ipv6-autoconf.xml
 Interface eno1 started";;RedHatEnterpriseLinux7/RHEL7-43202
1120;;;;;;;;;5;"4. Check the eth0
 # virsh iface-list --all 
 
 
 # virsh iface-dumpxml eno1
​​";"Output:
  Name                 State      MAC Address
 ---------------------------------------------------
  eno1                 active     94:57:a5:c4:82:e7
  eno2                 active     94:57:a5:c4:82:e8
 
 
 <interface type='ethernet' name='eno1'>
   <protocol family='ipv6'>
     <ip address='2620:52:0:1040:9657:a5ff:fec4:82e7' prefix='64'/>
     <ip address='fe80::9657:a5ff:fec4:82e7' prefix='64'/>
   </protocol>
   <link speed='1000' state='up'/>
   <mac address='94:57:a5:c4:82:e7'/>
 </interface>";;RedHatEnterpriseLinux7/RHEL7-43202
1120;;;;;;;;;6;"5.Check the config of eno1
 # cat /etc/sysconfig/network-scripts/ifcfg-eno1
 
 
 # ifconfig  eno1";"Output:
 DEVICE=""eno1""
 ONBOOT=""yes""
 IPV6INIT=""yes""
 IPV6_AUTOCONF=""yes""
 DHCPV6C=""no""
 
 eno1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet6 2620:52:0:1040:9657:a5ff:fec4:82e7  prefixlen 64  scopeid 0x0<global>
         inet6 fe80::9657:a5ff:fec4:82e7  prefixlen 64  scopeid 0x20<link>
         ether 94:57:a5:c4:82:e7  txqueuelen 1000  (Ethernet)
         RX packets 758241  bytes 86178943 (82.1 MiB)
         RX errors 0  dropped 7  overruns 0  frame 0
         TX packets 14234  bytes 2011319 (1.9 MiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
         device memory 0x92d00000-92dfffff  
 
​​";;RedHatEnterpriseLinux7/RHEL7-43202
1120;;;;;;;;;7;"6. Destroy eno1 
 # virsh iface-destroy eno1 
​​";"Output:
 Interface eno1 destroyed";;RedHatEnterpriseLinux7/RHEL7-43202
1120;;;;;;;;;8;"7.Undefine eno1
 # virsh iface-undefine eno1
​​";"Output:
 Interface eno1 undefined";;RedHatEnterpriseLinux7/RHEL7-43202
1121;RHEL7-43206;[domrename] - rename an inactive domain;"Verify that an inactive without snapshot or managedsave can be renamed successfully.
";Fangge Jin (fjin);High;Positive;Automated;;1;"Rename domain with a new name:
 # virsh domrename fedora23 new
​​";"
 Output:
 Domain successfully renamed";Test Case;RedHatEnterpriseLinux7/RHEL7-43206
1121;;;;;;;;;2;"Check virsh return status after domrename:
 # echo $?
 0";"The return value is 0
​​";;RedHatEnterpriseLinux7/RHEL7-43206
1121;;;;;;;;;3;"Check domname after renaming:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-43206
1121;;;;;;;;;4;"a. # virsh list --all
 
​​";"Output:
  Id    Name                           State
 ----------------------------------------------------
  -     new                            shut off
​​";;RedHatEnterpriseLinux7/RHEL7-43206
1121;;;;;;;;;5;"b. # virsh list --name --all
 
​​";"new
​​";;RedHatEnterpriseLinux7/RHEL7-43206
1121;;;;;;;;;6;"c. # virsh dumpxml new |grep '<name'
 
​​";"Output:
   <name>new</name>
​​";;RedHatEnterpriseLinux7/RHEL7-43206
1121;;;;;;;;;7;"d. # virsh domname cfb8039e-b5a0-4ded-a3bd-3fda90543b0b
 
​​";"Output:
 new";;RedHatEnterpriseLinux7/RHEL7-43206
1121;;;;;;;;;8;"e. # virsh start new
​​";"Start successfully
​​";;RedHatEnterpriseLinux7/RHEL7-43206
1122;RHEL7-43207;[domrename] [event] - listen to domrename events when renaming a domain;Verify an event will be emitted and recorded by libvirt when renaming a domain.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"In terminal one, listen to all events in loop:
 # virsh event --all --loop
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43207
1122;;;;;;;;;2;"In terminal two, rename an inactive domain:
 # virsh domrename fedora23 new
​​";"Output:
 Domain successfully renamed";;RedHatEnterpriseLinux7/RHEL7-43207
1122;;;;;;;;;3;"3. Check terminal one
​​";"There are events listed for renaming in terminal one.
 
 Output:
 event 'lifecycle' for domain fedora23: Undefined Renamed
 event 'lifecycle' for domain new: Defined Renamed
​​";;RedHatEnterpriseLinux7/RHEL7-43207
1123;RHEL7-43208;[domrename] [negative] - rename domain with invalid name;"Verify that domrename will fail if the new name is invalid. Cover these situations: 
 
* rename to itself
* rename to another domain's name
* rename to a name with invalid characters
  * an empty string
  * a string including ""/""
Refer to:
 Bug 1333232 - domrename should not allow to use invalid characters in domain name
";Fangge Jin (fjin);Medium;Negative;Automated;;1;"Scenario 1: rename domain to itself
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43208
1123;;;;;;;;;2;"# virsh domrename new new
";"Rename fails.

 Output:
 error: Requested operation is not valid: Can't rename domain to itself";;RedHatEnterpriseLinux7/RHEL7-43208
1123;;;;;;;;;3;"# echo $?
 1";Return value is 1;;RedHatEnterpriseLinux7/RHEL7-43208
1123;;;;;;;;;4;"# virsh list --all

";"The domain name doesn't change.

 Output:
  Id    Name                           State
 ----------------------------------------------------
  -     new                            shut off
  -     rhel7.2                        shut off";;RedHatEnterpriseLinux7/RHEL7-43208
1123;;;;;;;;;5;"Scenario 2: rename domain to another domain's name
";​​;;RedHatEnterpriseLinux7/RHEL7-43208
1123;;;;;;;;;6;"# virsh domrename new rhel7.2

";error: Requested operation is not valid: domain with name 'rhel7.2' already exists;;RedHatEnterpriseLinux7/RHEL7-43208
1123;;;;;;;;;7;"# echo $?
 1
";​​;;RedHatEnterpriseLinux7/RHEL7-43208
1123;;;;;;;;;8;"# virsh list --all
";"The domain name doesn't change.

 Output:
  Id    Name                           State
 ----------------------------------------------------
  -     new                            shut off
  -     rhel7.2                        shut off";;RedHatEnterpriseLinux7/RHEL7-43208
1123;;;;;;;;;9;"Scenario 3: rename domain to empty string
";​​;;RedHatEnterpriseLinux7/RHEL7-43208
1123;;;;;;;;;10;"# virsh domrename new """"
";"Rename fails.

 Output:
 error: Failed to get option 'new-name': Option argument is empty";;RedHatEnterpriseLinux7/RHEL7-43208
1123;;;;;;;;;11;"Scenario 4: rename domain to a string including  '/'
";​​;;RedHatEnterpriseLinux7/RHEL7-43208
1123;;;;;;;;;12;# virsh domrename new a/b;"Rename fails.

 Output is like:
 error: Failed to rename Domain new: new-name a/b cannot contain '/'";;RedHatEnterpriseLinux7/RHEL7-43208
1124;RHEL7-43209;[Migration][-dname][--xml][--p2p] Change live domain xml on target host when do live migration -  p2p migration - virDomainMigrateToURI2 API - bug1295405;Check the dxml works correctly with virDomainMigrateToURI2 API.;Yan Fu (yafu);Medium;Positive;Not Automated;;1;"Start the guest on the source host;";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43209
1124;;;;;;;;;2;"Dump the guest xml: 
 
* #virsh dumpxml rhel7.2 --migratable > rhel72.xml
Add the following line in rhel72.xml: 
 
* <title>test</title>
";​​;;RedHatEnterpriseLinux7/RHEL7-43209
1124;;;;;;;;;3;"Execute the program on the source host: 
 
* #./dommigrate qemu+ssh:///system qemu+ssh://10.73.*.*/system rhel7.2 ""`cat rhel72.xml`""

​​";"Output:
 target xml:<domain type='kvm'>
   <name>rhel7.2</name>
 ...
 </domain>.
 Attempting to connect to the source hypervisor...
 root@localhost's password: 
 Attempting to retrieve domain rhel7.2...
 Attempting to migrate rhel7.2 to qemu+ssh://10.73.*.*/system...
 Migration finished with success.
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-43209
1124;;;;;;;;;4;"After the migration completed, check the guest xml on the target host
 
* #virsh dumpxml rhel7.2
 ... <title>test</title> ...";Can see the line added;;RedHatEnterpriseLinux7/RHEL7-43209
1125;RHEL7-43210;[virsh dump][--memory-only][--format] Dump guest's memory only with empty string for format--bug1272301;"The default coredump file format is ELF
";Yan Fu (yafu);Medium;Negative;Not Automated;;1;" 1.Prepare a running guest:
 # virsh list --all
 Id Name State 
 ---------------------------------------------------- 
 1 rhel7.2 running";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43210
1125;;;;;;;;;2;"2.virsh dump rhel7.2 /tmp/rhel72.dump --format  '' --memory-only 
 #Domain rhel7.2 dumped to /tmp/rhel72.dump";"2.dump completed correctly.
 
​​";;RedHatEnterpriseLinux7/RHEL7-43210
1125;;;;;;;;;3;"3.Check the format of dump file: 
 #file /tmp/rhel72.dump /
​​";"3. dump file can be generated with the default ""ELF"" format correctly.
 
 Output:
 tmp/rhel72.dump: ELF 64-bit LSB core file x86-64, version 1 (SYSV), SVR4-style";;RedHatEnterpriseLinux7/RHEL7-43210
1126;RHEL7-43212;[domrename] [negative] - rename a  domain that is in active/managedsaved/paused status;"Verify that domrename will fail if domain is not in pure inactive status, including active, saved, paused.
Bug 1314594 - Libvirt should reject to rename a domain in saved status.
";Fangge Jin (fjin);Medium;Negative;Automated;;1;Scenario 1: rename an active domain;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43212
1126;;;;;;;;;2;"# virsh domrename rhel7.2 aaa
";"Rename fails.

 Output:
 error: Requested operation is not valid: cannot rename active domain";;RedHatEnterpriseLinux7/RHEL7-43212
1126;;;;;;;;;3;"Check virsh return status after domrename:
 # echo $?";Return value is 1;;RedHatEnterpriseLinux7/RHEL7-43212
1126;;;;;;;;;4;"Scenario 2: rename a paused domain
";​​;;RedHatEnterpriseLinux7/RHEL7-43212
1126;;;;;;;;;5;# virsh suspend rhel7.2;​​;;RedHatEnterpriseLinux7/RHEL7-43212
1126;;;;;;;;;6;"# virsh domrename rhel7.2 new

";"Rename fails.

 Output:
 error: Requested operation is not valid: cannot rename active domain";;RedHatEnterpriseLinux7/RHEL7-43212
1126;;;;;;;;;7;Scenario 3: rename a managedsaved domain;​​;;RedHatEnterpriseLinux7/RHEL7-43212
1126;;;;;;;;;8;"# virsh managedsave rhel7.2
";​​;;RedHatEnterpriseLinux7/RHEL7-43212
1126;;;;;;;;;9;"After managedsave is finished, rename domain:
 # virsh domrename rhel7.2 new
";"Rename fails.

 Output:
 error: Requested operation is not valid: domain with a managed saved state can't be renamed";;RedHatEnterpriseLinux7/RHEL7-43212
1126;;;;;;;;;10;"# virsh list --all --managed-save
";"Domain is in saved status.
 
 Output:
  Id    Name                           State
 ----------------------------------------------------
  -     rhel7.2                          saved";;RedHatEnterpriseLinux7/RHEL7-43212
1127;RHEL7-43216;[domrename] [negative] - rename a domain with snapshots;Verify that domrename will fail if domain has snapshots.;Fangge Jin (fjin);Medium;Negative;Automated;;1;"Destroy guest
 # virsh destroy 24
​​";Domain 24 destroyed;Test Case;RedHatEnterpriseLinux7/RHEL7-43216
1127;;;;;;;;;2;"# virsh domrename rhel7.2 rhel7.2-new
​​";"Rename failed.
 
 Output:
 error: Requested operation is not valid: cannot rename domain with snapshots";;RedHatEnterpriseLinux7/RHEL7-43216
1127;;;;;;;;;3;"# virsh list --all
​​";"Domain name doesn't change. Output:
 
  Id    Name                           State
 ----------------------------------------------------
  -     rhel7.2                       shut off";;RedHatEnterpriseLinux7/RHEL7-43216
1128;RHEL7-43223;[Qos] Set bandwidth the several interface types which are not supported Qos - bug 1311928 1319044;Define bandwidth in the hostdev interface will report error - 1319044   --target  --model should not support on interface type of hostdev, [Bug 1311928] Attach interface with type of hostdev supports options of --model and --target   ->not fix;Yalan Zhang (yalzhang);Low;Negative;Not Automated;;1;hostdev type interface;;Test Case;RedHatEnterpriseLinux7/RHEL7-43223
1128;;;;;;;;;2;"on sriov host, and prepare a vf, such as vf with pci address 0000:03:10:5
 
  1. hotplug an interface
 # virsh attach-interface R7.2 hostdev 0000:03:10:5 --inbound 1000,2000,1024  --managed";"error: Failed to attach interface
 error: unsupported configuration: bandwidth settings are not supported for hostdev interfaces";;RedHatEnterpriseLinux7/RHEL7-43223
1128;;;;;;;;;3;"2. plug an interface when the guest is offline
 # virsh attach-interface R7.2 hostdev 0000:03:10:5 --inbound 1000,2000,1024  --managed --persistent
 Interface attached successfully
 
 # virsh start R7.2
​​";"error: Failed to start domain R7.2
 error: unsupported configuration: bandwidth settings are not supported for hostdev interfaces";;RedHatEnterpriseLinux7/RHEL7-43223
1128;;;;;;;;;4;"3. start or create a guest with bandwidth defined in hostdev interface
 
 # vim R7.2.xml
 <interface type='hostdev' managed='yes'> 
 <driver name='vfio'/> 
 <source>
 <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x5'/> 
 </source> 
 <bandwidth>
 <inbound average='1000' peak='5000' floor='200' burst='1024'/> 
 <outbound average='128' peak='256' burst='256'/> 
 </bandwidth>
 </interface>
 
 # virsh define R7.2.xml
 Domain R7.2 defined from R7.2.xml
 
 # virsh start R7.2
​​";"error: Failed to start domain R7.2
 error: unsupported configuration: bandwidth settings are not supported for hostdev interfaces
 
​​";;RedHatEnterpriseLinux7/RHEL7-43223
1128;;;;;;;;;5;# virsh create R7.2.xml;"error: Failed to create domain from R7.2.xml
 error: unsupported configuration: bandwidth settings are not supported for hostdev interfaces";;RedHatEnterpriseLinux7/RHEL7-43223
1128;;;;;;;;;6;"user type interface
     <interface type='user'>
       <mac address='52:54:00:6a:c0:e1'/>
       <bandwidth>
         <inbound average='300' peak='800' burst='256'/>
         <outbound average='200' peak='500' burst='256'/>
       </bandwidth>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";the patch has not been acked..;;RedHatEnterpriseLinux7/RHEL7-43223
1128;;;;;;;;;7;not reject, guest can start;​​;;RedHatEnterpriseLinux7/RHEL7-43223
1128;;;;;;;;;8;"mcast type interface
     <interface type='mcast'>
       <mac address='52:54:00:6d:90:01'/>
       <source address='230.0.0.1' port='5558'/>
       <bandwidth>
         <inbound average='300' peak='800' burst='256'/>
         <outbound average='200' peak='500' burst='256'/>
       </bandwidth>
       <model type='rtl8139'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
";​​;;RedHatEnterpriseLinux7/RHEL7-43223
1128;;;;;;;;;9;not reject, guest can start;​​;;RedHatEnterpriseLinux7/RHEL7-43223
1128;;;;;;;;;10;"server/client type interface
     <interface type='server'>
       <mac address='52:54:00:e0:42:72'/>
       <source port='5558'/>
       <bandwidth>
         <inbound average='300' peak='800' burst='256'/>
         <outbound average='200' peak='500' burst='256'/>
       </bandwidth>
       <model type='rtl8139'/>
       <alias name='net2'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0a' function='0x0'/>
     </interface>

 OR

     <interface type='client'>
       <mac address='52:54:00:6b:d2:da'/>
       <source address='127.0.0.1' port='5558'/>
       <bandwidth>
         <inbound average='300' peak='800' burst='256'/>
         <outbound average='200' peak='500' burst='256'/>
       </bandwidth>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
";​​;;RedHatEnterpriseLinux7/RHEL7-43223
1128;;;;;;;;;11;not reject, guest can start;​​;;RedHatEnterpriseLinux7/RHEL7-43223
1128;;;;;;;;;12;"udp type interface
     <interface type='udp'>
       <mac address='52:54:00:76:10:c1'/>
       <source address='127.0.0.1' port='5558'>
         <local address='127.0.0.1' port='6667'/>
       </source>
       <bandwidth>
         <inbound average='300' peak='800' burst='256'/>
         <outbound average='200' peak='500' burst='256'/>
       </bandwidth>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-43223
1128;;;;;;;;;13;not reject, guest can start;​​;;RedHatEnterpriseLinux7/RHEL7-43223
1129;RHEL7-43226;[detach-interface] Detach-interface with option --persistent if the interface has different pci addresses between inactive dumpxml and active dumpxml - bug 1223608 - need update;detach-interface or device with the flag --persistent should be succeed;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1.Start a guest rhel6.6
​​";we can use --config/--live/--current to detach the interface successfully.;Test Case;RedHatEnterpriseLinux7/RHEL7-43226
1129;;;;;;;;;2;"2.Issue the attach-interface with --live option for three times continually:
 #virsh attach-interface rhel6.6 network default --live";​​;;RedHatEnterpriseLinux7/RHEL7-43226
1129;;;;;;;;;3;3.# virsh attach-interface rhel6.6 network default --persistent;​​;;RedHatEnterpriseLinux7/RHEL7-43226
1129;;;;;;;;;4;"4.# virsh dumpxml rhel6.6|grep -A8 '<interface'
 ...
     <interface type='network'>
       <mac address='52:54:00b:e7:70'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet4'/>
       <model type='rtl8139'/>
       <alias name='net4'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0c' function='0x0'/>
     </interface>
 ...";​​;;RedHatEnterpriseLinux7/RHEL7-43226
1129;;;;;;;;;5;"5.# virsh dumpxml rhel6.6 --inactive|grep -A8 '<interface'
 ...
     <interface type='network'>
       <mac address='52:54:00b:e7:70'/>
       <source network='default'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
 ...";​​;;RedHatEnterpriseLinux7/RHEL7-43226
1129;;;;;;;;;6;6.Check the results of step4 and step5, to find that the newly added interface has differnt pci addresses between inactive dumpxml and active dumpxml.;​​;;RedHatEnterpriseLinux7/RHEL7-43226
1129;;;;;;;;;7;7.# virsh detach-interface rhel6.6 network --mac 52:54:00b:e7:70 --persistent;​​;;RedHatEnterpriseLinux7/RHEL7-43226
1130;RHEL7-43288;[attach-interface][macvtap] Attach interface or device with type of direct - bug 1313264;"       attach-interface domain type source [[[--live] [--config] | [--current]] | [--persistent]] [--target target] [--mac mac] [--script script] [--model model] [--inbound average,peak,burst,floor] [--outbound average,peak,burst] [--managed] [--print-xml]
 
direct interface | attach-interace
support | --target, --model, --mac, --print-xml --live,--config, --current, --persistent(RHEL7-42269) --inbound, --outbound
do not support | --script(RHEL7-18679), --managed";Yalan Zhang (yalzhang);Critical;Positive;Automated;;1;"prepare a running vm
 1.  print xml with multiple attribute
 # virsh attach-interface rhel7 direct enp0s25 --target test --model virtio --mac 52:54:00:98:c4:a3 --inbound 100,200,100  --outbound 100,200,100 --print-xml";"output:
  <interface type='direct'>
   <source dev='enp0s25'/>
   <target dev='test'/>
   <mac address='52:54:00:98:c4:a3'/>
   <model type='virtio'/>
   <bandwidth>
     <inbound average='100' peak='200' burst='100'/>
     <outbound average='100' peak='200' burst='100'/>
   </bandwidth>
 </interface>";Test Case;RedHatEnterpriseLinux7/RHEL7-43288
1130;;;;;;;;;2;2. # virsh dumpxml rhel7 | grep /interface -B9;the interface not plugged;;RedHatEnterpriseLinux7/RHEL7-43288
1130;;;;;;;;;3;"3. # virsh attach-interface rhel7 direct enp0s25 --target test --model virtio --mac 52:54:00:98:c4:a3 --inbound 100,200,100  --outbound 200,300,200 
​​";"output:
 Interface attached successfully";;RedHatEnterpriseLinux7/RHEL7-43288
1130;;;;;;;;;4;"4. # virsh dumpxml rhel7 | grep /interface -B11
 
 check the mac, source dev, mode(by default is vepa), bandwidth, target dev";"output: 
 <interface type='direct'>
       <mac address='52:54:00:98:c4:a3'/>
       <source dev='enp0s25' mode='vepa'/>
       <bandwidth>
         <inbound average='100' peak='200' burst='100'/>
         <outbound average='200' peak='300' burst='200'/>
       </bandwidth>
       <target dev='test'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-43288
1130;;;;;;;;;5;"5. on host, check mac, target name, source dev, mode
 # ip -d link show test";"190: test@enp0s25: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc htb state UNKNOWN mode DEFAULT qlen 500
     link/ether 52:54:00:98:c4:a3 brd ff:ff:ff:ff:ff:ff promiscuity 0 
     macvtap  mode vepa addrgenmode eui64 
​​";;RedHatEnterpriseLinux7/RHEL7-43288
1130;;;;;;;;;6;"6. # systemctl restart libvirtd
 # virsh dumpxml rhel7 | grep /interface -B11";the interface still exists;;RedHatEnterpriseLinux7/RHEL7-43288
1130;;;;;;;;;7;"7. # virsh save rhel7 rhel7.save
 Domain rhel7 saved to rhel7.save
 
 # virsh list 
  Id    Name                           State
 ----------------------------------------------------
 
 # virsh restore rhel7.save
 Domain restored from rhel7.save
​​";save and restore succeed;;RedHatEnterpriseLinux7/RHEL7-43288
1130;;;;;;;;;8;8. # virsh dumpxml rhel7 | grep /interface -B11;the interface still exists;;RedHatEnterpriseLinux7/RHEL7-43288
1130;;;;;;;;;9;"9. # virsh detach-interface rhel7 direct 52:54:00:98:c4:a3
 # virsh dumpxml rhel7 | grep /interface -B9";the interface detached;;RedHatEnterpriseLinux7/RHEL7-43288
1131;RHEL7-43289;[hotplug][bridge] Attach bridge type interface by attach-interface and attach-device;attach or detach a bridge type interface;Yalan Zhang (yalzhang);Critical;Positive;Manual Only;;1;" 1. attach-interface with type of bridge
 # virsh start R7.2
 Domain R7.2 started
 On host:
 # systemctl stop NetworkManager
 # brctl addbr br0
 # brctl addif br0 eth0
 # ifconfig eth0 0.0.0.0
 # dhclient br0
 # brctl show
 bridge name    bridge id        STP enabled    interfaces
 br0        8000.1c6f6506bc81    no        eth0
";"


";Test Case;RedHatEnterpriseLinux7/RHEL7-43289
1131;;;;;;;;;2;"2. # virsh attach-interface R7.2 bridge br0
";Interface attached successfully;;RedHatEnterpriseLinux7/RHEL7-43289
1131;;;;;;;;;3;"3. check the interface attached
 # virsh dumpxml R7.2 | grep /interface -B8

  


";"   <interface type='bridge'>
       <mac address='52:54:00:6b:5a:1b'/>
       <source bridge='br0'/>
       <target dev='vnet1'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-43289
1131;;;;;;;;;4;# brctl show;"bridge name    bridge id        STP enabled    interfaces
 br0        8000.1c6f6506bc81    no        eth0
                                                         vnet1";;RedHatEnterpriseLinux7/RHEL7-43289
1131;;;;;;;;;5;"# virsh domifaddr R7.2 --source agent
";" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
 ......
  ** ens13      52:54:00:7f:97:05    ipv4         10.66.7.3/22  **

 (there are interfaces on guest list with mac and ip, guest get public ip)";;RedHatEnterpriseLinux7/RHEL7-43289
1131;;;;;;;;;6;"4.. log in the guest, and check a new network interface attached, and it can get an IP with the same subnet of the host.
 # ping www.baidu.com
";ping succeed;;RedHatEnterpriseLinux7/RHEL7-43289
1131;;;;;;;;;7;"5. Restart the guest with ""init 6"" on the guest, the interface exists after restart.";after guest reboot, the hotplug device still exsits;;RedHatEnterpriseLinux7/RHEL7-43289
1131;;;;;;;;;8;"6. Restart libvirtd service on the host, then check if the interface still exists and work well.

 # systemctl restart libvirtd
 # virsh dumpxml R7.2 | grep /interface -B8
 guest # ping www.baidu.com";​​;;RedHatEnterpriseLinux7/RHEL7-43289
1131;;;;;;;;;9;"7. detach-interface with type of bridge
 # virsh detach-interface R7.2 bridge
 Interface detached successfully
 # virsh dumpxml R7.2 | grep /interface -B8
 check the interface with type of bridge is detached.
 login the guest and check the interface disappeared.
";"the interface can be detached.

";;RedHatEnterpriseLinux7/RHEL7-43289
1131;;;;;;;;;10;"8. Restart libvirtd service on the host, then check if the interface exists and work well
 # systemctl restart libvirtd
 # virsh dumpxml R7.2 | grep /interface -B8";after restart libvirtd, the interface still gone.;;RedHatEnterpriseLinux7/RHEL7-43289
1131;;;;;;;;;11;"9. attach-device with type of bridge
 # cat bridge.xml
 <interface type='bridge'>
 <source bridge='br0'/>
 <alias name='ua-27f15b2d-1450-4392-9b0d-7638fbf48fc3'/>
 </interface>

 # virsh attach-device R7.2 bridge.xml
";"Device attached successfully
";;RedHatEnterpriseLinux7/RHEL7-43289
1131;;;;;;;;;12;"10. # virsh dumpxml R7.2 | grep /interface -B8
";"the interface exists
";;RedHatEnterpriseLinux7/RHEL7-43289
1132;RHEL7-43292;[spice] Start guest with spice  port=-1;"Verify libvirt will generate a port for guest automatically when port=-1 and autoport=no, and the generated port will be released after guest is saved.
 Bug 1299696 - Set spice graphic port to '-1', the port allocated to the guest can't be used again after the guest is managedsaved or shutoff.";Yan Fu (yafu);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set spice port='-1', autoport=no
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43292
1132;;;;;;;;;2;"Check the xml of the guest: 
 #virsh dumpxml rhel7.2
​​";"libvirt add autoport='no' in the xml automatically.
 
 Output:
   ... 
 <graphics type='spice' port='-1' autoport='no' listen='0.0.0.0'>
       <listen type='address' address='0.0.0.0'/>
 </graphics> 
 ...";;RedHatEnterpriseLinux7/RHEL7-43292
1132;;;;;;;;;3;"Start guest:
 # virsh start rhel7.2";​​;;RedHatEnterpriseLinux7/RHEL7-43292
1132;;;;;;;;;4;"Dumpxml:
 # virsh dumpxml rhel7.2";"A port is generated by libvirt automatically.
 
 Output:
 <graphics type='spice' port='5900' autoport='no' listen='0.0.0.0'> <listen type='address' address='0.0.0.0'/> </graphics>
​​";;RedHatEnterpriseLinux7/RHEL7-43292
1132;;;;;;;;;5;"The following steps are to verify that allocated port is released when guest is saved.
​​";​​;;RedHatEnterpriseLinux7/RHEL7-43292
1132;;;;;;;;;6;" Do managed save and start:
 #virsh managedsave rhel7.2 
 Domain rhel7.2 state saved by libvirt 
 
   #virsh start rhel7.2
 Domain rhel7.2 started";Guest starts successfully after managedsave;;RedHatEnterpriseLinux7/RHEL7-43292
1133;RHEL7-43293;[driver][multiqueue] Test multiqueue in virtio-net for direct type interface - bug 1240439 1313264;"multiqueue support for macvtap devices, new for rhel7.3. 
mode | source dev | comment
bridge | physical interface | will be covered in this case
vepa | physical interface | not test for manual
private | physical interface | not test for manual
passthrough | physical interface  | will be covered in this case
passthrough | vf | will be covered in this case";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"scenario 1:
  1.1. prepare guest xml with macvtap/mq
 # cat rh7.xml | grep /interface -B7
       <interface type='direct'>
       <mac address='52:54:00:4a:a4:9c'/>
       <source dev='eth0' mode='bridge'/>
       <model type='virtio'/>
       <driver queues='2'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 # virt-xml-validate rh7.xml 
​​";rh7.xml validates;Test Case;RedHatEnterpriseLinux7/RHEL7-43293
1133;;;;;;;;;2;"1.2. define/start guest
 # virsh define rh7.xml 
 Domain rh7 defined from rh7.xml
 # virsh start rh7 
 Domain rh7 started
 # virsh dumpxml rh7|grep /interface -B8
     <interface type='direct'>
       <mac address='52:54:00:4a:a4:9c'/>
       <source dev='eth0' mode='bridge'/>
       <target dev='macvtap1'/>
       <model type='virtio'/>
       <driver queues='2'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";guest can start successfully;;RedHatEnterpriseLinux7/RHEL7-43293
1133;;;;;;;;;3;"1.3. check qemu cmd line
 # ps aux | grep qemu-kvm  |grep -v grep| sed 's/-device/\n-device/g' | grep ""virtio-net-pci""
​​";"-device virtio-net-pci,mq=on,vectors=6,netdev=hostnet0,id=net0,mac=52:54:00:ca:81:cd,bus=pci.0,addr=0x3 -chardev pty,id=charserial0 
 
 (there is mq=on, vectors=2N+2 in the qemu command line)
​​";;RedHatEnterpriseLinux7/RHEL7-43293
1133;;;;;;;;;4;"1.4. login guest to check
 # ethtool -l eth0
 
​​";"Channel parameters for eth0:
 Pre-set maximums: 0
 RX: 0
 TX: 0
 Other: 0
 Combined: ** 2 **
 Current hardware settings:
 RX: 0
 TX: 0
 Other: 0
 Combined: ** 1 **";;RedHatEnterpriseLinux7/RHEL7-43293
1133;;;;;;;;;5;"1.5. set the combined queue and check
 # ethtool -L eth0 combined 2
 # ethtool -l eth0";"Channel parameters for eth0:
 Pre-set maximums:
 RX: 0
 TX: 0
 Other: 0
 Combined: 2
 Current hardware settings:
 RX: 0
 TX: 0
 Other: 0
 Combined: 2";;RedHatEnterpriseLinux7/RHEL7-43293
1133;;;;;;;;;6;"1.6 set to invalid value
 # ethtool -L eth0 combined 3
​​";Cannot set device channel parameters: Invalid argument;;RedHatEnterpriseLinux7/RHEL7-43293
1133;;;;;;;;;7;"scenario 2: for macvtap network
​​";​​;;RedHatEnterpriseLinux7/RHEL7-43293
1133;;;;;;;;;8;"2.1 define and start a direct network
 # virsh net-dumpxml direct-macvtap
 <network>
   <name>direct-macvtap</name>
   <uuid>556d36b4-70e7-4dc9-8720-6e00f8d77c66</uuid>
   <forward dev='enp0s25' mode='bridge'>
     <interface dev='enp0s25'/>
   </forward>
 </network>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-43293
1133;;;;;;;;;9;"2.2 edit a guest's xml to use this network and define multiqueue
 # virsh edit rhel7.2 
   <interface type='network'>
       <source network='direct-macvtap'/>
       <model type='virtio'/>
       <driver queues='5'/>
     </interface>
 # virsh start rhel7.2
 Domain rhel7.2 started
​​";"guest can be started
​​";;RedHatEnterpriseLinux7/RHEL7-43293
1133;;;;;;;;;10;"2.2 check qemu command line, there is ""mq=on, vectors=12""
 # ps aux |grep qemu-kvm|grep -v grep|sed 's/-device/\n-device/g'|grep ""virtio-net-pci""
​​";-device virtio-net-pci,mq=on,vectors=12,netdev=hostnet0,id=net0,mac=52:54:00:8f:0b:65,bus=pci.0,addr=0x3 -chardev pty,id=charserial0;;RedHatEnterpriseLinux7/RHEL7-43293
1133;;;;;;;;;11;"2.3 login the guest and check
 # ethtool -l eth0
 
 
 
 
 
 
 
​​";"Channel parameters for eth0:
 Pre-set maximums:
 RX:        0
 TX:        0
 Other:        0
 Combined:    5
 Current hardware settings:
 RX:        0
 TX:        0
 Other:        0
 Combined:    1";;RedHatEnterpriseLinux7/RHEL7-43293
1133;;;;;;;;;12;"# ethtool -L eth0 combined 5
 # ethtool -l eth0";"Channel parameters for eth0:
 Pre-set maximums:
 RX:        0
 TX:        0
 Other:        0
 Combined:    5
 Current hardware settings:
 RX:        0
 TX:        0
 Other:        0
 Combined:    5";;RedHatEnterpriseLinux7/RHEL7-43293
1133;;;;;;;;;13;"# ethtool -L eth0 combined 3
 # ethtool -l eth0";"Channel parameters for eth0:
 Pre-set maximums:
 RX:        0
 TX:        0
 Other:        0
 Combined:    5
 Current hardware settings:
 RX:        0
 TX:        0
 Other:        0
 Combined:    3";;RedHatEnterpriseLinux7/RHEL7-43293
1133;;;;;;;;;14;"# ethtool -L eth0 combined 8
​​";Cannot set device channel parameters: Invalid argument;;RedHatEnterpriseLinux7/RHEL7-43293
1133;;;;;;;;;15;replace the mode to vepa mode;​​;;RedHatEnterpriseLinux7/RHEL7-43293
1133;;;;;;;;;16;replace the mode to private mode;​​;;RedHatEnterpriseLinux7/RHEL7-43293
1133;;;;;;;;;17;replace the mode to passthrough mode;​​;;RedHatEnterpriseLinux7/RHEL7-43293
1133;;;;;;;;;18;"use sriov, and enable the vf
 replace the mode to passthrough mode and the dev to vf";​​;;RedHatEnterpriseLinux7/RHEL7-43293
1134;RHEL7-43294;"[event] - ""Virsh event --loop"" exits when connection is unreachable - new for RHEL7.3";"""Virsh event --loop"" exits when connection is unreachable";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Prepare two hosts
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43294
1134;;;;;;;;;2;"1. On host A:
 # virsh -c qemu+ssh://${host B}/system event --loop --all";​​;;RedHatEnterpriseLinux7/RHEL7-43294
1134;;;;;;;;;3;"2. Break the network connection between host A and host B through one of the following methods:
 a) On host A, # iptables -A INPUT -s <ip of host B> -j DROP
 Note: Recover the network after the test by: # iptables -F
 
 b) On host A, # ifconfig <name of ethernet card> down
 
 c) On host B, # ifconfig <name of ethernet card> down
 
 Note: 
 Check ethernet card name by # ifconfig
 Recover the network after the test by: # ifconfig <name of ethernet card> up
​​";​​;;RedHatEnterpriseLinux7/RHEL7-43294
1134;;;;;;;;;4;"3. Check the virsh command on host A, after 35s(keepalive times out), virsh command exits automatically:
 # virsh event --loop --all 
 error: Disconnected from qemu:///system due to keepalive timeout
 events received: 0
 error: internal error: client socket is closed
 # 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-43294
1135;RHEL7-43296;[Virtual networks] check static routes for collision with existing routes/interfaces on host - bug 1094205;network should check for collision of the route both for the network's own address range, but also for its static routes.;Yalan Zhang (yalzhang);High;Positive;Automated;;1;"1.  prepare 2 xml below and define networks.
 
 # cat def.xml
 <network>
   <name>def</name>
   <forward mode='nat'/>
     <ip address='192.168.120.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.120.2' end='192.168.120.254'/>
     </dhcp>
   </ip>
   <route address='192.168.222.0' prefix='24' gateway='192.168.120.1'/> 
 </network>
 
 # cat test.xml
 <network>
   <name>test</name>
   <forward mode='nat'/>
    <ip address='192.168.222.1' netmask='255.255.255.0'>  
     <dhcp>
       <range start='192.168.222.2' end='192.168.222.254'/>
     </dhcp>
   </ip>
 </network>
 
 # virsh net-define def.xml
 # virsh net-define test.xml
 
​​";"
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-43296
1135;;;;;;;;;2;2. # virsh net-list --inactive;" Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  def                  inactive   no            yes
  test                 inactive   no            yes";;RedHatEnterpriseLinux7/RHEL7-43296
1135;;;;;;;;;3;"3. start def first, and check the route table
 
 # virsh net-start def
 Network def started
 
 # route -n | grep 192.168.222
​​";"output:
 192.168.222.0   192.168.120.1   255.255.255.0   UG    1      0        0 virbr1
 
 (start the 1st network with route setting, there will be a new route item in the route table just as what we defined after the network started)";;RedHatEnterpriseLinux7/RHEL7-43296
1135;;;;;;;;;4;"4. start the 2nd network 
 
 # virsh net-start test
​​";"error: Failed to start network test
 error: internal error: Network is already in use by interface virbr1";;RedHatEnterpriseLinux7/RHEL7-43296
1135;;;;;;;;;5;"5. destroy def
 
 # virsh net-destroy def
 Network def destroyed
 
 # virsh net-list --inactive
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  def                  inactive   no            yes
  test                 inactive   no            yes
​​";​​;;RedHatEnterpriseLinux7/RHEL7-43296
1135;;;;;;;;;6;"6. start test first, then start def, it will fail as well
 
 # virsh net-start test
 Network test started
 
 # route -n  | grep 192.168.222
​​";"output:
 192.168.222.0   0.0.0.0         255.255.255.0   U     0      0        0 virbr2";;RedHatEnterpriseLinux7/RHEL7-43296
1135;;;;;;;;;7;"7.  # virsh net-start def
​​";"error: Failed to start network def
 error: internal error: Route address '192.168.222.0' conflicts with IP address for 'virbr2'";;RedHatEnterpriseLinux7/RHEL7-43296
1136;RHEL7-43302;[vol-create-as] [--print-xml] print XML document, but don't define/create - new for RHEL7.3;print XML document, but don't define/create;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"0. Check existing volumes before testing:
 # ls /var/lib/libvirt/images/
 fedora23.qcow2  r7raw.raw  rhel7.2-released.qcow2
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43302
1136;;;;;;;;;2;"1. # virsh vol-create-as default vol-test2.qcow2 4194304000 --allocation 3024347136 --format qcow2 --print-xml
​​";"<volume>
   <name>vol-test2.qcow2</name>
   <capacity>4194304000</capacity>
   <allocation>3024347136</allocation>
   <target>
     <format type='qcow2'/>
   </target>
 </volume>";;RedHatEnterpriseLinux7/RHEL7-43302
1136;;;;;;;;;3;"2. Check the volumes in pool default:
 1) # virsh vol-list default
  Name                 Path                                    
 ------------------------------------------------------------------------------
  fedora23.qcow2       /var/lib/libvirt/images/fedora23.qcow2  
  r7raw.raw            /var/lib/libvirt/images/r7raw.raw       
  rhel7.2-released.qcow2 /var/lib/libvirt/images/rhel7.2-released.qcow2
​​";vol-test2.qcow2 is not created.;;RedHatEnterpriseLinux7/RHEL7-43302
1136;;;;;;;;;4;"2) # ls /var/lib/libvirt/images/
 fedora23.qcow2          r7raw.raw               rhel7.2-released.qcow2  
​​";vol-test2.qcow2 is not created.;;RedHatEnterpriseLinux7/RHEL7-43302
1137;RHEL7-43308;[pool-create-as][--build] perform a pool-build after creation - new for RHEL7.3;perform a pool-build after creation;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"0. 
 1)Prepare a free partion(e.g. /dev/sdb3)
 
 2)Target path doesn't exist
 # ls /test
 ls: cannot access /test: No such file or directory
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43308
1137;;;;;;;;;2;"1. 
 # virsh pool-create-as test1 fs --target /test --source-dev /dev/sdb3  --source-format xfs --build
​​";Pool test1 created;;RedHatEnterpriseLinux7/RHEL7-43308
1137;;;;;;;;;3;"2. Check pool is test1 is created successfully
 # virsh pool-list --all
 
​​";" Name                 State      Autostart 
 -------------------------------------------
  default              active     yes       
  test1                active     no       ";;RedHatEnterpriseLinux7/RHEL7-43308
1137;;;;;;;;;4;"3. Check the target path is created:
 # ls /test
 [root@fjin ~]# 
​​";"Target path /test exists
​​";;RedHatEnterpriseLinux7/RHEL7-43308
1137;;;;;;;;;5;"4. Check fs /dev/sdb3 is mounted on /test:
 # df -T
​​";"Filesystem                                                   Type     1K-blocks      Used Available Use% Mounted on
 ......
 /dev/sdb3                                                    xfs          12972       880     12092   7% /test";;RedHatEnterpriseLinux7/RHEL7-43308
1138;RHEL7-43309;[pool-create-as][--no-overwrite] do not overwrite an existing pool of this type- new for RHEL7.3;do not overwrite an existing pool of this type;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 0. 
 1) Prepare a free partion(e.g. /dev/sdb3)
 
 2) Make fs on /dev/sdb3:
 # mkfs.xfs /dev/sdb3
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43309
1138;;;;;;;;;2;"1.
 # virsh pool-create-as test1 fs --target /test --source-dev /dev/sdb3  --source-format xfs --no-overwrite";"error: Failed to create pool test1
 error: Storage pool already built: Existing filesystem of type 'xfs' found on device '/dev/sdb3'
​​";;RedHatEnterpriseLinux7/RHEL7-43309
1138;;;;;;;;;3;"2. Check pool test1 is not created:
 # virsh pool-list --all
     
​​";" Name                 State      Autostart 
 -------------------------------------------
  default              active     yes  ";;RedHatEnterpriseLinux7/RHEL7-43309
1139;RHEL7-43310;[pool-create-as][--overwrite]overwrite any existing data- new for RHEL7.3;overwrite any existing data;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"  0. 
 1) Prepare a free partion(e.g. /dev/sdb3)
 
 2) Make fs on /dev/sdb3:
 # mkfs.xfs /dev/sdb3
 
 3) Create a file in /test
 # cd /test
 # touch haha
 # ls /test/haha
 /test/haha
 
 4) Umount /test:
 # umount /test";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43310
1139;;;;;;;;;2;"1. 
 # virsh pool-create-as test1 fs --target /test --source-dev /dev/sdb3  --source-format xfs --overwrite
​​";Pool test1 created;;RedHatEnterpriseLinux7/RHEL7-43310
1139;;;;;;;;;3;"2. Check pool is test1 is created successfully
 # virsh pool-list --all ";" Name                 State      Autostart 
 -------------------------------------------
  default              active     yes       
  test1                active     no       ";;RedHatEnterpriseLinux7/RHEL7-43310
1139;;;;;;;;;4;"3. Check the disk is overwriten:
 # ls /test
 [root@fjin ~]#";"The original file haha doesn't exist.
​​";;RedHatEnterpriseLinux7/RHEL7-43310
1139;;;;;;;;;5;"4. 
 # df -T
​​";"Filesystem                                                   Type     1K-blocks      Used Available Use% Mounted on
 ...
 /dev/sdb3                                                    xfs          12972       880     12092   7% /test
 
​​";;RedHatEnterpriseLinux7/RHEL7-43310
1140;RHEL7-43324;[pool-create][--build] perform a pool-build after creation - new for RHEL7.3;perform a pool-build after creation;Fangge Jin (fjin);Medium;Positive;Automated;;1;" 0. 
 1)Prepare a free partion(e.g. /dev/sdb3)
 
 2)Target path doesn't exist
 # ls /test
 ls: cannot access /test: No such file or directory";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43324
1140;;;;;;;;;2;"1.
 1) Prepare a pool xml
 # cat pool.xml
 <pool type='fs'>
   <name>test1</name>
   <source>
     <device path='/dev/sdb3'/>
     <format type='xfs'/>
   </source>
   <target>
     <path>/test</path>
   </target>
 </pool>
 
 2)
 # virsh pool-create pool.xml  --build";"2)
 Pool test1 created from pool.xml";;RedHatEnterpriseLinux7/RHEL7-43324
1140;;;;;;;;;3;"2. Check pool is test1 is created successfully
 # virsh pool-list --all
​​";" Name                 State      Autostart 
 -------------------------------------------
  default              active     yes       
  test1                active     no       ";;RedHatEnterpriseLinux7/RHEL7-43324
1140;;;;;;;;;4;"3. Check the target path is created:
 # ls /test
 [root@fjin ~]#";Target path /test exists;;RedHatEnterpriseLinux7/RHEL7-43324
1140;;;;;;;;;5;"4. Check fs /dev/sdb3 is mounted on /test:
 # df -T";"Filesystem                                                   Type     1K-blocks      Used Available Use% Mounted on
 ......
 /dev/sdb3                                                    xfs          12972       880     12092   7% /test";;RedHatEnterpriseLinux7/RHEL7-43324
1141;RHEL7-43325;[pool-create][--no-overwrite] do not overwrite an existing pool of this type- new for RHEL7.3;do not overwrite an existing pool of this type;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 0.
 1) Prepare a free partion(e.g. /dev/sdb3)
 
 2) Make fs on /dev/sdb3:
 # mkfs.xfs /dev/sdb3";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43325
1141;;;;;;;;;2;"1.
 1) Prepare a pool xml
 # cat pool.xml
 <pool type='fs'>
   <name>test1</name>
   <source>
     <device path='/dev/sdb3'/>
     <format type='xfs'/>
   </source>
   <target>
     <path>/test</path>
   </target>
 </pool>
 
 2)
 # virsh pool-create-as test1 fs --target /test --source-dev /dev/sdb3  --source-format xfs --no-overwrite error: Failed to create pool test1
​​";"2)
 error: Storage pool already built: Existing filesystem of type 'xfs' found on device '/dev/sdb3'";;RedHatEnterpriseLinux7/RHEL7-43325
1141;;;;;;;;;3;"2. Check pool test1 is not created:
 # virsh pool-list --all
     
​​";" Name                 State      Autostart 
 -------------------------------------------
  default              active     yes  ";;RedHatEnterpriseLinux7/RHEL7-43325
1142;RHEL7-43326;[pool-create][--overwrite]overwrite any existing data- new for RHEL7.3;overwrite any existing data;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 0.
 1) Prepare a free partion(e.g. /dev/sdb3)
 
 2) Make fs on /dev/sdb3:
 # mkfs.xfs /dev/sdb3
 
 3) Create a file in /test
 # cd /test
 # touch haha
 # ls /test/haha
 /test/haha
 
 4) Umount /test:
 # umount /test1";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43326
1142;;;;;;;;;2;"1.
 1) Prepare a pool xml
 # cat pool.xml
 <pool type='fs'>
   <name>test1</name>
   <source>
     <device path='/dev/sdb3'/>
     <format type='xfs'/>
   </source>
   <target>
     <path>/test</path>
   </target>
 </pool>
 
 2)
 # virsh pool-create-as test1 fs --target /test --source-dev /dev/sdb3  --source-format xfs --overwrite";"2)
 Pool test1 created2.";;RedHatEnterpriseLinux7/RHEL7-43326
1142;;;;;;;;;3;"2.Check pool is test1 is created successfully
 # virsh pool-list --all Name                 State      
 
​​";"Autostart
 -------------------------------------------
  default              active     yes       
  test1                active     no      ";;RedHatEnterpriseLinux7/RHEL7-43326
1142;;;;;;;;;4;"3. Check the disk is overwriten:
 # ls /test
 [root@fjin ~]
​​";The original file haha doesn't exist.;;RedHatEnterpriseLinux7/RHEL7-43326
1142;;;;;;;;;5;"4.
 # df -T";"Filesystem                                                   Type     1K-blocks      Used Available Use% Mounted on
 ...
 /dev/sdb3                                                    xfs          12972       880     12092   7% /test";;RedHatEnterpriseLinux7/RHEL7-43326
1143;RHEL7-43345;[pool-start] [--build]          build the pool as normal- new for RHEL7.3;Build the pool as normal.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 0. 
 1)Prepare a free partion(e.g. /dev/sdb3)
 
 2)Target path doesn't exist
 # ls /test
 ls: cannot access /test: No such file or directory";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43345
1143;;;;;;;;;2;"1.
 # virsh pool-define-as test1 fs --target /test --source-dev /dev/sdb3  --source-format xfs 
​​";Pool test1 defined;;RedHatEnterpriseLinux7/RHEL7-43345
1143;;;;;;;;;3;"2. 
 # virsh pool-start test1 --build
​​";Pool test1 started;;RedHatEnterpriseLinux7/RHEL7-43345
1143;;;;;;;;;4;"3. Check pool is test1 is created successfully
 # virsh pool-list --all";" Name                 State      Autostart 
 -------------------------------------------
  default              active     yes       
  test1                active     no       ";;RedHatEnterpriseLinux7/RHEL7-43345
1143;;;;;;;;;5;"4. Check the target path is created:
 # ls /test
 [root@fjin ~]#";Target path /test exists;;RedHatEnterpriseLinux7/RHEL7-43345
1143;;;;;;;;;6;"5. Check fs /dev/sdb3 is mounted on /test and type is xfs:
 # df -T";"Filesystem                                                   Type     1K-blocks      Used Available Use% Mounted on
 ......
 /dev/sdb3                                                    xfs          12972       880     12092   7% /test";;RedHatEnterpriseLinux7/RHEL7-43345
1144;RHEL7-43346;[pool-start][--no-overwrite] do not overwrite an existing pool of this type- new for RHEL7.3;do not overwrite an existing pool of this type;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 0.
 1) Prepare a free partion(e.g. /dev/sdb3)
 
 2) Make fs on /dev/sdb3:
 # mkfs.xfs /dev/sdb3";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43346
1144;;;;;;;;;2;"1.
 # virsh pool-define-as test1 fs --target /test --source-dev /dev/sdb3  --source-format xfs";Pool test1 defined;;RedHatEnterpriseLinux7/RHEL7-43346
1144;;;;;;;;;3;"2. 
 # virsh pool-start test1 --no-overwrite";"error: Failed to start pool test1
 error: Storage pool already built: Existing filesystem of type 'xfs' found on device '/dev/sdb3'
​​";;RedHatEnterpriseLinux7/RHEL7-43346
1144;;;;;;;;;4;"3. Check pool test1 is not created:
 # virsh pool-list --all";" Name                 State      Autostart
 -------------------------------------------
  default              active     yes
  test1                inactive   no
​​";;RedHatEnterpriseLinux7/RHEL7-43346
1145;RHEL7-43347;[pool-start][--overwrite]overwrite any existing data- new for RHEL7.3;overwrite any existing data;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 0.
 1) Prepare a free partion(e.g. /dev/sdb3)
 
 2) Make fs on /dev/sdb3:
 # mkfs.ext3 /dev/sdb3
 
 3) Mount it on a local directory:
 # mount /dev/sdb3 /test
 
 3) Create a file in /test
 # cd /test
 # touch haha
 # ls /test/haha
 /test/haha
 
 4) Umount /test:
 # umount /test";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43347
1145;;;;;;;;;2;"1.
 # virsh pool-define-as test1 fs --target /test --source-dev /dev/sdb3  --source-format xfs";Pool test1 defined;;RedHatEnterpriseLinux7/RHEL7-43347
1145;;;;;;;;;3;"2.
 # virsh pool-start test1 --overwrite";Pool test1 started;;RedHatEnterpriseLinux7/RHEL7-43347
1145;;;;;;;;;4;"3.Check pool is test1 is created successfully
 # virsh pool-list --all
 
​​";"
 Name                 State     Autostart
 -------------------------------------------
  default              active     yes       
  test1                active     no     ";;RedHatEnterpriseLinux7/RHEL7-43347
1145;;;;;;;;;5;"4. Check the disk is overwriten:
 # ls /test
 [root@fjin ~]";The original file haha doesn't exist.;;RedHatEnterpriseLinux7/RHEL7-43347
1145;;;;;;;;;6;"5.
 # df -T";"The type is xfs:
 
 Filesystem                                                   Type     1K-blocks      Used Available Use% Mounted on
 ...
 /dev/sdb3                                                    xfs          12972       880     12092   7% /test";;RedHatEnterpriseLinux7/RHEL7-43347
1146;RHEL7-43382;[attach-interface] [-print-xml] print XML document rather than attach the interface - new for RHEL7.3;"print XML document rather than attach the interface
            
";Fangge Jin (fjin);Medium;Positive;Automated;;1;"0. 
 1) Check the domain interface list:
 # virsh domiflist rhel7.2-qcow2
 
 
 2) Check default network is avalible
 # virsh net-list
 
​​";"1)
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 -          network    default    virtio      52:54:00:d3:3b:95
 -          network    default    rtl8139     52:54:00:10:f0:37
 
 2)
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     yes           yes";Test Case;RedHatEnterpriseLinux7/RHEL7-43382
1146;;;;;;;;;2;"1. # virsh attach-interface rhel7.2-qcow2 network default --print-xml
 
​​";"<interface type='network'>
   <source network='default'/>
 </interface>";;RedHatEnterpriseLinux7/RHEL7-43382
1146;;;;;;;;;3;"2. Check the domain interface list again:
 # virsh domiflist rhel7.2-qcow2
 
​​";"No new interface is added:
 
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 -          network    default    virtio      52:54:00:d3:3b:95
 -          network    default    rtl8139     52:54:00:10:f0:37";;RedHatEnterpriseLinux7/RHEL7-43382
1147;RHEL7-43383;[driver][multiqueue] Test multiqueue in virtio-net for vhost-user type of interface - bug 1207692;currently multiqueue is supported in macvtap, vhost-user and nat/route/isolated/open type interface, check the function works well.;Yalan Zhang (yalzhang);Critical;Positive;Not Automated;;1;"1. Start VM in libvirt.
 # virsh dumpxml r7-ovs
   .......
   <memory unit='KiB'>1024000</memory>
   <currentMemory unit='KiB'>1024000</currentMemory>
   <memoryBacking>
     <hugepages>
       <page size='2048' unit='KiB' nodeset='0'/>
     </hugepages>
   </memoryBacking>
   <vcpu placement='static'>4</vcpu>
   <numatune>
     <memory mode='strict' nodeset='0'/>
   </numatune>
   ......
   <cpu mode='host-model'>
     <model fallback='allow'/>
     <numa>
       <cell id='0' cpus='0-1' memory='1024000' unit='KiB' memAccess='shared'/>
     </numa>
   </cpu>
 ......
     <interface type='vhostuser'>
       <mac address='52:54:00:bb:25:74'/>
       <source type='unix' path='/var/run/openvswitch/vhost-user1' mode='client'/>
       <model type='virtio'/>
       <driver name='vhost' queues='4'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh start r7-ovs
 Domain r7-ovs started";"1.  Vm should be started successfully.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-43383
1147;;;;;;;;;2;"2. Check qemu command line:
 -netdev type=vhost-user,id=mynet1,chardev=char0,vhostforce,queues=<queues_nr>
 -device virtio-net-pci,netdev=mynet1,mac=52:54:00:02:d9:0<n>,mq=on,vectors=<2 + 2 * queues_nr>
 
 (e.g.
 # ps -ef|grep ""qemu-kvm""| grep ""queues=""
 qemu     10192     1  2 03:00 ?        00:00:27 /usr/libexec/qemu-kvm -name r7-ovs
 ......
 path=/var/run/openvswitch/vhost-user1 -netdev type=vhost-user,id=hostnet0,chardev=charnet0,queues=4 -device virtio-net-pci,mq=on,vectors=10,netdev=hostnet0.....)";"2. The queues in the qemu command lines should be the same as in the libvirt xml.
​​";;RedHatEnterpriseLinux7/RHEL7-43383
1147;;;;;;;;;3;"3. Check in Guest:
 #ethtool -L eth0 combined 4
 
 #ethtool -l eth0
​​";"Channel parameters for eth0:
 Current hardware settings:
 PX:             0
 TX:             0
 Other:          0
 Combined:       4
 ...
​​";;RedHatEnterpriseLinux7/RHEL7-43383
1147;;;;;;;;;4;"4. Can set the combined number<=queues successfully in the Guest.
 #ethtool -L eth0 combined 3
 # ethtool -l eth0";"Channel parameters for eth0:
 Pre-set maximums:
 RX:        0
 TX:        0
 Other:        0
 Combined:    4
 Current hardware settings:
 RX:        0
 TX:        0
 Other:        0
 Combined:    3";;RedHatEnterpriseLinux7/RHEL7-43383
1148;RHEL7-43384;[attach-interface] [--managed] libvirt will automatically detach/attach the device from/to host - new for RHEL7.3;libvirt will automatically detach/attach the device from/to host;Fangge Jin (fjin);Medium;Positive;Automated;;1;"0. On a sr-iov host, config vf:
 # modprobe -r igb
 # modprobe igb max_vfs=7
 # virsh nodedev-list --tree 
 computer
   |
   +- net_lo_00_00_00_00_00_00
   +- net_virbr0_nic_52_54_00_af_41_28
   +- pci_0000_00_00_0
   +- pci_0000_00_01_0
   |   |
   |   +- pci_0000_03_00_0
   |   |   |
   |   |   +- net_ens1f0_00_1b_21_39_8b_18
   |   |     
   |   +- pci_0000_03_00_1
   |   |   |
   |   |   +- net_ens1f1_00_1b_21_39_8b_19
   |   |     
   |   +- pci_0000_03_10_0
   |   |   |
   |   |   +- net_enp3s16_c6_f6_cd_3c_20_64
   |   |     
   |   +- pci_0000_03_10_1
   |   |   |
   |   |   +- net_enp3s16f1_12_de_84_c8_a6_6c
 
 # virsh nodedev-dumpxml pci_0000_03_10_0
 <device>
   <name>pci_0000_03_10_0</name>
   <path>/sys/devices/pci0000:00/0000:00:01.0/0000:03:10.0</path>
   <parent>pci_0000_00_01_0</parent>
   <driver>
     <name>igbvf</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>3</bus>
     <slot>16</slot>
     <function>0</function>
     <product id='0x10ca'>82576 Virtual Function</product>
     <vendor id='0x8086'>Intel Corporation</vendor>
     <capability type='phys_function'>
       <address domain='0x0000' bus='0x03' slot='0x00' function='0x0'/>
     </capability>
     <iommuGroup number='23'>
       <address domain='0x0000' bus='0x03' slot='0x10' function='0x0'/>
     </iommuGroup>
     <pci-express>
       <link validity='cap' port='0' speed='2.5' width='4'/>
       <link validity='sta' width='0'/>
     </pci-express>
   </capability>
 </device>
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43384
1148;;;;;;;;;2;"1. 1) Start a guest.

 2) Check guest interfaces:
 # virsh domiflist rhel7.2-fjin

";"2)
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet0      network    default    virtio      52:54:00:d3:3b:95
​​";;RedHatEnterpriseLinux7/RHEL7-43384
1148;;;;;;;;;3;"2. # virsh attach-interface rhel7.2-fjin hostdev 0000_03_10_0 --current --managed
​​";Interface attached successfully;;RedHatEnterpriseLinux7/RHEL7-43384
1148;;;;;;;;;4;"3.# virsh domiflist rhel7.2-fjin
 
​​";"Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet0      network    default    virtio      52:54:00:d3:3b:95
 -          hostdev    -          -           52:54:00:96:e3:66";;RedHatEnterpriseLinux7/RHEL7-43384
1148;;;;;;;;;5;"4. # virsh dumpxml rhel7.2-fjin 
 ...
     <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:96:e3:66'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x0'/>
       </source>
       <alias name='hostdev0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-43384
1148;;;;;;;;;6;"5. # virsh nodedev-dumpxml pci_0000_03_10_0
 
​​";"<device>
   <name>pci_0000_03_10_0</name>
   <path>/sys/devices/pci0000:00/0000:00:01.0/0000:03:10.0</path>
   <parent>pci_0000_00_01_0</parent>
   <driver>
     <name>vfio-pci</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>3</bus>
     <slot>16</slot>
     <function>0</function>
     <product id='0x10ca'>82576 Virtual Function</product>
     <vendor id='0x8086'>Intel Corporation</vendor>
     <capability type='phys_function'>
       <address domain='0x0000' bus='0x03' slot='0x00' function='0x0'/>
     </capability>
     <iommuGroup number='23'>
       <address domain='0x0000' bus='0x03' slot='0x10' function='0x0'/>
     </iommuGroup>
     <pci-express>
       <link validity='cap' port='0' speed='2.5' width='4'/>
       <link validity='sta' width='0'/>
     </pci-express>
   </capability>
 </device>
​​";;RedHatEnterpriseLinux7/RHEL7-43384
1149;RHEL7-43385;Check performance of virsh iface-* commands on host with large number of interfaces --bug  1268382 and bug 1269613;check performance of virsh iface-list / iface-dumpxml commands on host with large number of interfaces;Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;"0. prepare xml file for define iface 
 # cat iface-X.xml
 <interface type='ethernet' name='ethX'>
 <start mode='none'/> 
 <protocol family='ipv4'>
 <dhcp peerdns='yes'/>
 </protocol> 
 <protocol family='ipv6'>
 <autoconf/> 
 </protocol> 
 </interface>
 
 # for i in {1..512};do sed -e s/X/$i/ iface-X.xml > iface-$i.xml;done";"Create the files
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-43385
1149;;;;;;;;;2;"1. Define 512 interface by iface-define, check the time
 
 # time for i in {1..512};do virsh iface-define iface-$i.xml;done
 
​​";"Output:
 Interface eth1 defined from iface-1.xml
 ... 
 Interface eth512 defined from iface-512.xml 
 
 real    3m16.768s
 user    0m7.803s
 sys      0m5.948s";;RedHatEnterpriseLinux7/RHEL7-43385
1149;;;;;;;;;3;"2. Get interface list by iface-list, check the time
 # time virsh iface-list
​​";"Output:
 Name State MAC Address 
 ---------------------------------------------------
 eth0 active a0:48:1c:86:67:9c 
 lo active 00:00:00:00:00:00 
 
 real    0m2.804s
 user   0m0.014s
 sys     0m0.013s
 
 ""iface-list"" take longer, but should not longer than 1min";;RedHatEnterpriseLinux7/RHEL7-43385
1149;;;;;;;;;4;"3. Get interface list by iface-list --all, check the time
 # time virsh iface-list --all
​​";"Output:
 Name State MAC Address
 ---------------------------------------------------
 eno3 inactive eth0 active a0:48:1c:86:67:9c
 eth1 inactive ...
 lo active 00:00:00:00:00:00   
 
 real   0m1.949s
 user    0m0.061s
 sys    0m0.046s
 
 ""iface-list --all "" will take a short time(may be <5s)";;RedHatEnterpriseLinux7/RHEL7-43385
1149;;;;;;;;;5;"4. Get interface xml, check the time
 # time for i in {1..512};do virsh iface-dumpxml eth$i;done 
 
​​";"Output:
 .......
 <interface type='ethernet' name='eth512'> 
 <start mode='none'/> 
 <protocol family='ipv4'> 
 <dhcp peerdns='yes'/> 
 </protocol>
 <protocol family='ipv6'> 
 <autoconf/> 
 </protocol> 
 </interface> 
 
 real    0m18.596s
 user    0m7.743s
 sys    0m5.952s
 
 take less then 1min";;RedHatEnterpriseLinux7/RHEL7-43385
1149;;;;;;;;;6;"5. test brige type interface with vlan

 # cat br-X.xml 
 <interface type=""bridge"" name=""brX""> <start mode=""onboot""/> 
 <protocol family=""ipv4""> 
 </protocol> 
 <bridge stp=""off""> 
 <interface type=""vlan"" name=""enp0s25.X"">
 <vlan tag=""X""> 
 <interface name=""enp0s25""/> 
 </vlan> 
 </interface> 
 </bridge> 
 </interface>
 
 # for i in {1..514};do sed -e s/X/$i/ br-X.xml > br-$i.xml;done 
​​";Create the files;;RedHatEnterpriseLinux7/RHEL7-43385
1149;;;;;;;;;7;"6.  Define 514 interface by iface-define, check the time
 # time for i in {1..514};do virsh iface-define br-$i.xml;done 
​​";"Output:
 Interface br1 defined from br-1.xml
 .... 
 Interface br514 defined from br-514.xml
 
 real 6m30.884s 
 user 0m3.366s 
 sys 0m1.987s";;RedHatEnterpriseLinux7/RHEL7-43385
1149;;;;;;;;;8;"7.Dump the interface, check the time# time for i in {1..514};do virsh iface-dumpxml br$i;done 
​​";"<interface type='bridge' name='br1'>
 <protocol family='ipv6'>
 <ip address='fe80::4637:e6ff:fe95:3e4' prefix='64'/> 
 </protocol>
 <bridge>
 <interface type='vlan' name='eno1.1'>
 <link speed='1000' state='up'/> 
 <vlan tag='1'> 
 <interface name='eno1'/> 
 </vlan> 
 </interface> 
 </bridge>
 </interface>
 
 ..... 
 
 <interface type='bridge' name='br514'>
 <protocol family='ipv6'>
 <ip address='fe80::4637:e6ff:fe95:3e4' prefix='64'/> 
 </protocol>
 <bridge>
 <interface type='vlan' name='eno1.514'>
 <link speed='1000' state='up'/>
 <vlan tag='514'> 
 <interface name='eno1'/>
 </vlan>
 </interface> 
 </bridge> 
 </interface>
 
 real 0m11.419s 
 user 0m3.158s 
 sys 0m1.876s
 
 
 check the time, less than 1min";;RedHatEnterpriseLinux7/RHEL7-43385
1150;RHEL7-43387;[iface-edit]Add ability to change MAC address of interface via configuration --bug 1245424;"add ability to change MAC address of interface via configuration
From the laine'comment:
It's possible that we could add an attribute, e.g.:<mac address='00:11:22:33:44:55' modified='yes'/>
Need update the case when the bug 1245424 fixed";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;"1. list network 
 # virsh iface-list 
​​";"Output:
 Name  State MAC Address 
 --------------------------------------------------- 
 enp0s25  active b8:ac:6f:27:39:e1 
 lo  active   00:00:00:00:00:00 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-43387
1150;;;;;;;;;2;"2. Use iface-edit and add <mac address=''/to alter network mac address 
 # virsh iface-edit enp0s25 
​​";"Output:
 <interface type='ethernet' name='enp0s25'> 
 <start mode='onboot'/> 
 <protocol family='ipv4'> 
 <dhcp peerdns='yes'/> 
 </protocol> 
 <protocol family='ipv6'> 
 <autoconf/> </protocol> 
 <mac address='00:1b:21:1d:2d:3c'/> 
 </interface>";;RedHatEnterpriseLinux7/RHEL7-43387
1150;;;;;;;;;3;"3. Restart the network service 
 # service network restart   
​​";"Update the result when the bug is fixed.
​​";;RedHatEnterpriseLinux7/RHEL7-43387
1151;RHEL7-43389;[ovs] use Open vSwitch in *all* places in libvirt that currently use a Linux host bridge - bug 1114481-need update;"this is future feature need to udpate.The test case should cover (need to update once the bug fixed):1) support OVS for libvirt-managed networks. This would include libvirt creating OVS bridges, attaching a port to the local machine's IP stack, and setting up OVS' equivalent of simple packet filtering and NAT rules for these networks.2) support an OVS backend for nwfilter. This may be a bit complicated, as the nwfilter syntax is unfortunately a bit iptables-centric, and it remains to be seen how well this will map onto OVS' version of packet filtering.3) we may want/need to support some amount of management of OVS bridges that were created by configuration elsewhere on the system. One example of this is that libvirt can disable flood and learning on a Linux host bridge and manually update the forwarding table itself based on domain configuration and/or qemu events notifying of changes to the guest MAC address changes (see Bug 1099210). Either this feature would need to be VIR_ERR_NO_SUPPORT when OVS was used, or we would need to learn how to do the same thing for OVS.
";Yalan Zhang (yalzhang);High;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-43389
1152;RHEL7-43392;"[Vlan] Define the interface with vlan with name ""vlan1""   --bug 1286890 1447339"; interface name can't be changed when define a vlan type interface;Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;"1. Check the interface list
  # virsh iface-list --all
​​";"Output:
  Name                 State      MAC Address
 ---------------------------------------------------
  eno1                 active     44:37:e6:95:03:e4
  lo                   active     00:00:00:00:00:00";Test Case;RedHatEnterpriseLinux7/RHEL7-43392
1152;;;;;;;;;2;"2.Prepare a  xml file as below
 # cat vlan1.xml
 <interface type='vlan' name='vlan1'>
   <start mode='onboot'/>
   <protocol family='ipv4'>
     <ip address='192.168.177.1' prefix='24'/>
   </protocol>
   <vlan tag='1'>
     <interface name='eno1'/>
   </vlan>
 </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-43392
1152;;;;;;;;;3;"3. Define the interface
 # virsh iface-define vlan1.xml
​​";"Output:
 Interface vlan1 defined from vlan1.xml";;RedHatEnterpriseLinux7/RHEL7-43392
1152;;;;;;;;;4;"4. Check the interface list
 # virsh iface-list --all
​​";"Output:
 
  Name                 State      MAC Address
 ---------------------------------------------------
  eno1                 active     44:37:e6:95:03:e4
  lo                       active     00:00:00:00:00:00
  vlan1                 inactive  ";;RedHatEnterpriseLinux7/RHEL7-43392
1152;;;;;;;;;5;"5.Check dumpxml of the interface
 # virsh iface-dumpxml vlan1
​​";"Output:
 <interface type='vlan' name='vlan1'>
   <start mode='onboot'/>
   <protocol family='ipv4'>
     <ip address='192.168.177.1' prefix='24'/>
   </protocol>
   <vlan tag='1'>
     <interface name='eno1'/>
   </vlan>
 </interface>";;RedHatEnterpriseLinux7/RHEL7-43392
1152;;;;;;;;;6;"6. Start the interface vlan1
 # virsh iface-start vlan1
​​";"Output:
 Interface vlan1 started";;RedHatEnterpriseLinux7/RHEL7-43392
1152;;;;;;;;;7;"7. Check the dumpxml of interface vlan1
 # virsh iface-dumpxml vlan1
​​";"Output:
 <interface type='vlan' name='vlan1'>
   <protocol family='ipv4'>
     <ip address='192.168.177.1' prefix='24'/>
   </protocol>
   <protocol family='ipv6'>
     <ip address='fe80::4637:e6ff:fe95:3e4' prefix='64'/>
   </protocol>
   <link speed='100' state='up'/>
   <vlan tag='1'>
     <interface name='eno1'/>
   </vlan>
 </interface>";;RedHatEnterpriseLinux7/RHEL7-43392
1152;;;;;;;;;8;"8.Destroy/undefine the interface
 # virsh iface-destroy vlan1
 # virsh iface-undefine vlan1
​​";"Output:
 Interface vlan1 destroyed
 Interface vlan1 undefined";;RedHatEnterpriseLinux7/RHEL7-43392
1153;RHEL7-43393;Invalid;;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"
​​";"The error messages is ** not ** like this:
  # virsh domif-setlink 123 vnet1 up
 error: interface (target: vnet1) not found
 ** error: Domain not found: no domain with matching id 123 **
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-43393
1154;RHEL7-43400;Present PCIe VF devices for device assignment even if unconfigured --bug 887406 (need update);"Present PCIe VF devices for device assignment even if unconfigured
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-43400
1155;RHEL7-43408;[SR-IOV] Assign a PF whose VF is already assigned to one guest  --bug 1069542;Assign a PF whose VF is already assigned to one guest;Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;"1. Check the device list
 # virsh nodedev-list --tree";"Output:
 ......
   +- pci_0000_80_01_0
   |   |
   |   +- pci_0000_86_00_0
   |   |   |
   |   |   +- net_ens2f0_90_e2_ba_30_79_5c
   |   |     
   |   +- pci_0000_86_00_1
   |   |   |
   |   |   +- net_ens2f1_90_e2_ba_30_79_5d
   |   |     
   |   +- pci_0000_86_10_0
   |   |   |
   |   |   +- net_enp134s16_5a_37_06_04_3e_4b
   |   |     
   |   +- pci_0000_86_10_1
   |   |   |
   |   |   +- net_enp134s16f1_76_e3_e2_b4_e2_bf
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-43408
1155;;;;;;;;;2;"2. Prepare a VF xml as below and attach to a running  guest
    <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:c6:b7:84'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x0'/>
       </source>
     <model type='e1000'/>
     </interface>

 virsh attach-device r6 vf.xml";"Output:
 Device attached successfully";;RedHatEnterpriseLinux7/RHEL7-43408
1155;;;;;;;;;3;"3. Prepare a PF xml as below and attach to guest 
 # cat pf.xml
 <hostdev mode='subsystem' type='pci' managed='yes'> 
 <mac address='52:54:00:c6:b7:84'/>
 <source> 
 <address domain='0x0000' bus='0x86' slot='0x10' function='0x0'/>
 </source> 
 </hostdev>
 
 # virsh attach-device r6 pf.xml
​​";"Output:
 Device attached successfully
    <======if the bug 1069542 fixed, need output error info
 
​​";;RedHatEnterpriseLinux7/RHEL7-43408
1156;RHEL7-43419;Virt-xml-validate for acvtive dump xml file;"Bug 1177594 - virt-xml-validate cannot validate ""bridge"" attribute in ""interface/source"" element - ASSIGNED
";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. start a guest with NAT network.
 # virsh start rhel7.2
 Domain rhel7.2 started
 
 2. 
 # virsh dumpxml rhel7.2 > test.xml
 # virt-xml-validate test.xml
 test.xml validates
​​";"step 2, 
  After the bug fixed, It should not report error like this:
 
 Relax-NG validity error : Extra element devices in interleave
 a.xml:1: element domain: Relax-NG validity error : Element domain failed to validate content
 a.xml fails to validate
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-43419
1157;RHEL7-43422;[SR-IOV]  Hotplug / unplug VF with managed='no' ;Hotplug/unplug network device with managed='no';Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;"1.Check device list
 # lspci | grep 82599
 86:00.0 Ethernet controller: Intel Corporation 82599ES 10-Gigabit SFI/SFP+ Network Connection (rev 01) 
 86:00.1 Ethernet controller: Intel Corporation 82599ES 10-Gigabit SFI/SFP+ Network Connection (rev 01) 
 86:10.0 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01) 
 86:10.1 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43422
1157;;;;;;;;;2;"2. Prepare a running guest
 # virsh start myVF
 Domain myVF started";" 
​​";;RedHatEnterpriseLinux7/RHEL7-43422
1157;;;;;;;;;3;"3. Check the driver of vf on host 
 #readlink -f /sys/bus/pci/devices/0000\:86\:10.1/driver/ 
​​";"
 /sys/bus/pci/drivers/ixgbevf";;RedHatEnterpriseLinux7/RHEL7-43422
1157;;;;;;;;;4;"4. Prepare a xml with ""managed=no""and attach to guest
 # cat hostdev.xml
   <interface type='hostdev' managed='no'>
       <mac address='52:54:00:ec:52:44'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x1'/>
       </source>
     </interface>
 
 # virsh attach-device myVF hostdev.xml
 error: Failed to attach device from hostdev.xml
 error: internal error unable to execute QEMU command 'device_add': Device 'pci-assign' could not be initialized
​​";attach failed;;RedHatEnterpriseLinux7/RHEL7-43422
1157;;;;;;;;;5;"5, Detach the device from host  
 # virsh nodedev-detach pci_0000_86_10_1
​​";Device pci_0000_86_10_1 detached;;RedHatEnterpriseLinux7/RHEL7-43422
1157;;;;;;;;;6;"6,Check the driver of vf on host
 # readlink -f /sys/bus/pci/devices/0000\:86\:10.1/driver/
​​";"/sys/bus/pci/drivers/vfio-pci

 (the driver changed to vfio-pci)";;RedHatEnterpriseLinux7/RHEL7-43422
1157;;;;;;;;;7;"7. Attach the device to guest
 #virsh attach-device myVF hostdev.xml
​​";Device attached successfully;;RedHatEnterpriseLinux7/RHEL7-43422
1157;;;;;;;;;8;"8.Check the interface of the guest
 # virsh dumpxml myV | grep interface
 
 
​​";"    <interface type='hostdev' managed='no'>
       <mac address='52:54:00:ec:52:44'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x1'/>
       </source>
       <alias name='hostdev0'/>
       <address type='pci' domain='0x0000' bus='0x86' slot='0x07' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-43422
1157;;;;;;;;;9;"9.  Detach the device from guest
 # virsh detach-device myVF hostdev.xml
​​";"Device detached successful
​​";;RedHatEnterpriseLinux7/RHEL7-43422
1157;;;;;;;;;10;"10.Check the driver of device on host
 # readlink -f /sys/bus/pci/devices/0000\:86\:10.1/driver/
​​";"/sys/bus/pci/drivers/vfio-pci

 (libvirt will not manged it, so the driver keep vfio-pci)";;RedHatEnterpriseLinux7/RHEL7-43422
1157;;;;;;;;;11;"11. Attach the device pci_0000_86_10_1 to host again 
 # virsh nodedev-reattach  pci_0000_86_10_1";"
 Device pci_0000_86_10_1 re-attached";;RedHatEnterpriseLinux7/RHEL7-43422
1157;;;;;;;;;12;"12. Check the driver of device on host
 #  readlink -f /sys/bus/pci/devices/0000\:86\:10.1/driver/";"/sys/bus/pci/drivers/ixgbevf

 (this indicates the device return back to host)";;RedHatEnterpriseLinux7/RHEL7-43422
1158;RHEL7-43423;[bridge] Define a bridge using an existing Ethernet interface which is not defined;Define and start a bridge via XML containing an existing but non-defined and up Ethernet interface. Verify both the bridge and Ethernet are defined and brought up successfully. The bridge can get IP and ping to global IP.;Jingjing Shao (jishao);Medium;Negative;Not Automated;;1;"1.Check the interface list 
 # virsh iface-list --all
​​";"Output:
 
  Name                 State      MAC Address
 ---------------------------------------------------
  eth0                 active     44:37:e6:95:03:e4
  lo                   active     00:00:00:00:00:00";Test Case;RedHatEnterpriseLinux7/RHEL7-43423
1158;;;;;;;;;2;"2. Undefine the interface eth0
 # # virsh iface-destroy eth0
 # virsh iface-undefine eth0
​​";"Output:
 Interface eth0 destroyed
 Interface eth0 undefined";;RedHatEnterpriseLinux7/RHEL7-43423
1158;;;;;;;;;3;"3. Check the interface list
 # virsh iface-list --all
​​";"Output:
  Name                 State      MAC Address
 ---------------------------------------------------
  lo                   active     00:00:00:00:00:00";;RedHatEnterpriseLinux7/RHEL7-43423
1158;;;;;;;;;4;"4. Restart the network service 
 # service network restart
​​";"Output:
 Restarting network (via systemctl):                        [  OK  ]";;RedHatEnterpriseLinux7/RHEL7-43423
1158;;;;;;;;;5;"5. Prepare the xml file as below
 # cat bridge.xml
 <interface type='bridge' name='br0'>
 <start mode='onboot'/>
 <mtu size='1500'/>
 <protocol family='ipv4'>
     <ip address='10.73.33.155'/>  <==the ip addres of eth0
 </protocol>
 <bridge stp='off' delay='0.01'>
 <interface type='ethernet' name='eth0'>
 </interface>
 </bridge>
 </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-43423
1158;;;;;;;;;6;"6.Define the bridge 
 # virsh iface-define bridge.xml
​​";"Output:
 Interface br0 defined from bridge.xml";;RedHatEnterpriseLinux7/RHEL7-43423
1158;;;;;;;;;7;"7. Start the bridge 
 # virsh iface-start br0
​​";"Output:
 Interface br0 started
 
​​";;RedHatEnterpriseLinux7/RHEL7-43423
1158;;;;;;;;;8;"8.Check the ifcfg file of br0
 # cat  /etc/sysconfig/network-scripts/ifcfg-br0
​​";"Output:
 DEVICE=""br0""
 ONBOOT=""yes""
 MTU=""1500""
 TYPE=""Bridge""
 BOOTPROTO=""none""
 IPADDR=""10.73.33.155""
 STP=""off""
 DELAY=""0.01""
​​";;RedHatEnterpriseLinux7/RHEL7-43423
1158;;;;;;;;;9;9.Check the ifcfg file of eth0;"Output:
 DEVICE=""eth0""
 ONBOOT=""yes""
 MTU=""1500""
 BRIDGE=""br0""
 
​​";;RedHatEnterpriseLinux7/RHEL7-43423
1159;RHEL7-43433;[Virtual networks] start a guest with 200 macvtap interface;the time to start a guest with a number of macvtap interface is acceptable;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;" 1.  # cat net.xml
   <name>net</name>
   <forward mode= ** 'bridge' ** >
     <interface dev='enp14s0f0'/>  ====> physical interface name
     <interface dev='enp14s0f1'/>
     <interface dev='enp16s0f0'/>
     <interface dev='enp16s0f1'/>
     <interface dev='enp1s0'/>
   </forward>
 </network>
 # virsh net-define net.xml
 # virsh net-start net
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43433
1159;;;;;;;;;2;"2. # cat add.sh
 #!/bin/bash
 for ((i=1; i<=200; i++))
 do
 virsh attach-interface $1 network net --persistent
 done
 echo ""finished to attach 200 interface""";​​;;RedHatEnterpriseLinux7/RHEL7-43433
1159;;;;;;;;;3;"3.Prepare a shutdown guest with no macvtap interface.
 # chmod add.sh
 # ./add.sh r7.1";Finished to attach 200 interface;;RedHatEnterpriseLinux7/RHEL7-43433
1159;;;;;;;;;4;"4. Start the guest and check the time
 # time virsh start r7.1
 
​​";"Domain r7.1 started
 
 real    0m9.841s
 user    0m0.009s
 sys    0m0.003s
 
 
 It should be a short time less than 30s
​​";;RedHatEnterpriseLinux7/RHEL7-43433
1159;;;;;;;;;5;"5. host # ifconfig 
​​";"check there are 200 macvtap interfaces
​​";;RedHatEnterpriseLinux7/RHEL7-43433
1159;;;;;;;;;6;"6.  # virsh net-dumpxml net
 
​​";"<network connections='200'>
   <name>net</name>
   <uuid>4a37306b-445d-4514-a095-0a38f32eff94</uuid>
   <forward dev='enp14s0f0' mode='bridge'>
     <interface dev='enp14s0f0'  connections='40'/>
     <interface dev='enp14s0f1'  connections='40' />
     <interface dev='enp16s0f0' connections='40' />
     <interface dev='enp16s0f1' connections='40' />
     <interface dev='enp1s0' connections='40' />
   </forward>
 </network>
 
 check the connections should be all the same '40'(In modes where physical interfaces can be shared by multiple guest interfaces, libvirt will choose the interface that currently has the least number of connections.)
​​";;RedHatEnterpriseLinux7/RHEL7-43433
1159;;;;;;;;;7;"7. change the mode ""bridge"" to vepa/private to check the time of the guest start-up process. It should be shorter than 30s.
​​";​​;;RedHatEnterpriseLinux7/RHEL7-43433
1160;RHEL7-43572;Do live migration with guest agent configured in guest XML and guest agent service started;Guest agent will be connected on destination when migration completes if it's connected before migration;Fangge Jin (fjin);High;Positive;Not Automated;;1;Start guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43572
1160;;;;;;;;;2;"After guest boots up fully, check guest agent connection state:
 # virsh dumpxml rhel7.2-new
 
​​";"Guest agent is connected:
 
     <channel type='unix'>
       <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/domain-rhel7.2-new/org.qemu.guest_agent.0'/>
       <target type='virtio' name='org.qemu.guest_agent.0' state='connected'/>
       <alias name='channel1'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>
 
​​";;RedHatEnterpriseLinux7/RHEL7-43572
1160;;;;;;;;;3;"Do migration:
 # virsh migrate rhel7.2-new qemu+ssh://10.66.6.200/system --live --migrateuri tcp://10.66.6.200
​​";​​;;RedHatEnterpriseLinux7/RHEL7-43572
1160;;;;;;;;;4;"After migration completed, on destination, execute a virsh command that relies on guest agent:
 # virsh domtime rhel7.2-new
​​";"The virsh command executes successfully.
 
 Output:
 Time: 1458065676";;RedHatEnterpriseLinux7/RHEL7-43572
1160;;;;;;;;;5;"Check the guest agent connection state :
 # virsh dumpxml rhel7.2-new";"Guest agent is connected:
 
 Output:
     <channel type='unix'>
       <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/domain-rhel7.2-new/org.qemu.guest_agent.0'/>
       <target type='virtio' name='org.qemu.guest_agent.0' state='connected'/>
       <alias name='channel1'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>";;RedHatEnterpriseLinux7/RHEL7-43572
1161;RHEL7-43574;Restart libvirtd with guest agent configured in guest XML and guest agent service started;Guest agent will be connected after libvirtd is restarted if it's connected before this;Fangge Jin (fjin);High;Positive;Not Automated;;1;Start guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43574
1161;;;;;;;;;2;"Check guest agent connection state:
 # virsh dumpxml rhel7.2-new
​​";"Guest agent is connected:
 
     <channel type='unix'>
       <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/domain-rhel7.2-new/org.qemu.guest_agent.0'/>
       <target type='virtio' name='org.qemu.guest_agent.0' state='connected'/>
       <alias name='channel1'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>";;RedHatEnterpriseLinux7/RHEL7-43574
1161;;;;;;;;;3;"# systemctl restart libvirtd
​​";​​;;RedHatEnterpriseLinux7/RHEL7-43574
1161;;;;;;;;;4;"Run a random virsh command that relies on guest agent, e.g.
 # virsh domtime rhel7.2-new
​​";"The virsh command executes successfully.
 
 Output:
 Time: 2016-03-08 11:02:56
​​";;RedHatEnterpriseLinux7/RHEL7-43574
1161;;;;;;;;;5;"Check guest agent connection state:
 
 # virsh dumpxml rhel7.2-new";"Guest agent is connected:
 
     <channel type='unix'>
       <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/domain-rhel7.2-new/org.qemu.guest_agent.0'/>
       <target type='virtio' name='org.qemu.guest_agent.0' state='connected'/>
       <alias name='channel1'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>";;RedHatEnterpriseLinux7/RHEL7-43574
1162;RHEL7-43576;Suspend/resume guest with guest agent configured in XML and guest agent service started;"Guest agent will be connected after guest is resumed if it's connected before suspending
Refer to:
 Bug 1293351 - libvirt calls to qemu-guest-agent take 5 s just to report agent unavailability";Fangge Jin (fjin);High;Positive;Not Automated;;1;Start guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43576
1162;;;;;;;;;2;"Check guest agent connection state:
 # virsh dumpxml rhel7.2-new
​​";"Guest agent is connected:
 
     <channel type='unix'>
       <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/domain-rhel7.2-new/org.qemu.guest_agent.0'/>
       <target type='virtio' name='org.qemu.guest_agent.0' state='connected'/>
       <alias name='channel1'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>";;RedHatEnterpriseLinux7/RHEL7-43576
1162;;;;;;;;;3;"Suspend and resume guest:
 1) # virsh suspend rhel7.2-new
 
 2) # virsh resume rhel7.2-new
​​";​​;;RedHatEnterpriseLinux7/RHEL7-43576
1162;;;;;;;;;4;"Run a random virsh command that relies on guest agent, e.g.
 # virsh domtime rhel7.2-new
​​";"The virsh command executes successfully.
 
 Output:
 Time: 2016-03-08 11:02:56
​​";;RedHatEnterpriseLinux7/RHEL7-43576
1162;;;;;;;;;5;" Check guest agent connection state:
 
 # virsh dumpxml rhel7.2-new";"Guest agent is connected:
 
     <channel type='unix'>
       <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/domain-rhel7.2-new/org.qemu.guest_agent.0'/>
       <target type='virtio' name='org.qemu.guest_agent.0' state='connected'/>
       <alias name='channel1'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>";;RedHatEnterpriseLinux7/RHEL7-43576
1163;RHEL7-43582;[Guest agent] Start a guest with specified socket path for guest agent;"Verify guest agent socket source path can be specified by user
";Fangge Jin (fjin);High;Positive;Not Automated;;1;Edit or define a guest with specified socket path for guest agent.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43582
1163;;;;;;;;;2;Start guest;​​;;RedHatEnterpriseLinux7/RHEL7-43582
1163;;;;;;;;;3;"Check guest agent socket path in active xml:
 # virsh dumpxml rhel7.2 |grep agent -a3";"The guest agent socket path is same as the configured value:
 
   ...
    <channel type='unix'>
       <source mode='bind' path='/test/agent'/>
       <target type='virtio' name='org.qemu.guest_agent.0'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>";;RedHatEnterpriseLinux7/RHEL7-43582
1163;;;;;;;;;4;"Run a random virsh command that relies on guest agent:
 # virsh domtime rhel7.2
​​";"The virsh command can execute successfully.
 
 Output:
 Time: 1458127450 
​​";;RedHatEnterpriseLinux7/RHEL7-43582
1164;RHEL7-43584;"[Guest agent] Define a guest with guest agent source path starting with ""/var/lib/libvirt/qemu/channel/target/"" using root account";"Verify that path that starts with ""/var/lib/libvirt/qemu/channel/target/"" will be ignored by libvirt in root account.";Fangge Jin (fjin);Low;Positive;Not Automated;;1;Log in host with root account;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43584
1164;;;;;;;;;2;"Edit or define a guest with specified guest agent socket path which starts with ""/var/lib/libvirt/qemu/channel/target/""";​​;;RedHatEnterpriseLinux7/RHEL7-43584
1164;;;;;;;;;3;"Dumpxml:
 # virsh dumpxml rhel7.2-new
​​";"The user defined path is ignored in xml. 
 
 Output: 
 ...
    <channel type='unix'>
       <source mode='bind'/>
       <target type='virtio' name='org.qemu.guest_agent.0'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>
​​";;RedHatEnterpriseLinux7/RHEL7-43584
1165;RHEL7-43585;"[Guest agent] Define a guest with guest agent source path starting with ""$HOME/.config/libvirt/qemu/channel/target/"" using non-root account";"Verify path that starts with ""$HOME/.config/libvirt/qemu/channel/target/"" will be ignored by libvirt in non-root account
";Fangge Jin (fjin);Low;Positive;Not Automated;;1;Log in host with non-root user;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-43585
1165;;;;;;;;;2;"Edit or define a guest with specified guest agent socket path which starts with ""$HOME/.config/libvirt/qemu/channel/target/""";​​;;RedHatEnterpriseLinux7/RHEL7-43585
1165;;;;;;;;;3;"Dumpxml:
 $ virsh dumpxml rhel7.2-new
​​";"The user defined path is ignored in xml.
 
 Output:
 ...
    <channel type='unix'>
       <source mode='bind'/>
       <target type='virtio' name='org.qemu.guest_agent.0'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>";;RedHatEnterpriseLinux7/RHEL7-43585
1166;RHEL7-43588;[vhostuser] check performance of vhostuser type interface with/without shared memory - bug 1266982;check there are log if no shared memory set in vhost-user interface.;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. prepare guests which set hugepages and vhost user network:
 # virsh dumpxml rhel7.1
 <domain type='kvm'>
   <name>rhel7.1</name>
   <uuid>20af1ecf-3e55-4faf-9362-64ecb2b773ad</uuid>
   <maxMemory slots='16' unit='KiB'>5550000</maxMemory>
   <memory unit='KiB'>786432</memory>
   <currentMemory unit='KiB'>786432</currentMemory>
   <memoryBacking>
     <hugepages>
       <page size='2048' unit='KiB'/>
     </hugepages>
   </memoryBacking>
   <vcpu placement='static'>16</vcpu>
   <iothreads>4</iothreads>
   <numatune>
     <memory mode='strict' nodeset='0-1'/>
   </numatune>
 ...
   </features>
   <cpu mode='custom' match='exact'>
     <model fallback='allow'>Westmere</model>
     <numa>
       <cell id='0' cpus='0-7' memory='262144' unit='KiB' memAccess='shared'/>
       <cell id='1' cpus='8-14' memory='262144' unit='KiB' memAccess='shared'/>
       <cell id='2' cpus='15' memory='262144' unit='KiB' memAccess='shared'/>
     </numa>
   </cpu>
 ...
    <interface type='vhostuser'>
       <mac address='52:54:00:93:51:dd'/>
       <source type='unix' path='/var/run/openvswitch/vhost-user2' mode='client'/>
       <model type='virtio'/>
 <alias name='ua-09de3cbb-e85c-4526-8fe6-2b8ea0c5e03c'>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";"1.  Vm should be started successfully.
";Test Case;RedHatEnterpriseLinux7/RHEL7-43588
1166;;;;;;;;;2;"2. Start the guest and log in it, to confirm the env is OK, you can refer to RHEL7-51239 - [NFV] Test vhostuser interface with openvswtich+dpdk to set 2 guests, and confirm they can ping each other successfully.
"; ;;RedHatEnterpriseLinux7/RHEL7-43588
1166;;;;;;;;;3;"3. Destroy the guests, and edit the xml to delete the ""memAccess='shared'"", then start the guests
 # virsh edit rhel7.1
 ....
   <numa>
       <cell id='0' cpus='0-7' memory='262144' unit='KiB'/>
       <cell id='1' cpus='8-14' memory='262144' unit='KiB'/>
       <cell id='2' cpus='15' memory='262144' unit='KiB'/>
     </numa>
 ......
 ==> same for rhel7.2

 # virsh start rhel7.1
 # virsh start rhel7.2"; ;;RedHatEnterpriseLinux7/RHEL7-43588
1166;;;;;;;;;4;4. 2 guests ping each other;the 2 guests can not ping each other successfully any more.;;RedHatEnterpriseLinux7/RHEL7-43588
1166;;;;;;;;;5;"5. check the log.
 # cat /var/log/libvirt/libvirtd.log   | grep 'shared memory'
";"There are warning like ""** Mar 16 13:56:31 ibm-x3850x5-05 journal: Detected vhost-user interface without any shared memory, the interface might not be operational **"" in the log file.";;RedHatEnterpriseLinux7/RHEL7-43588
1167;RHEL7-43606;[Virtual Networks] uefi PXE boot with virtual networking (nat mode) - Bug 1290928  ---need to update;configure dnsmasq to support uefi pxe boot in nat network, not implemented yet;Yalan Zhang (yalzhang);High;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-43606
1168;RHEL7-43611;[svirt]Check the seclabel model of lxc vm after the guest failed to start-bug1176503;Libvirt won't remove the seclabel model of lxc vm after guest start fail -BZ\# 1176503 [VERIFIED];Yan Fu (yafu);Medium;Positive;Not Automated;;1;" 1.prepare a lxc vm like this(i remove the console to make guest cannot start):

<domain type='lxc'>
  <name>helloworld</name>
  <uuid>ed1955f7-4e72-40ae-8265-c193e7436c8a</uuid>
  <memory unit='KiB'>102400</memory>
  <currentMemory unit='KiB'>102300</currentMemory>
  <vcpu placement='auto'>2</vcpu>
  <numatune>
    <memory mode='strict' placement='auto'/>
  </numatune>
  <resource>
    <partition>/machine</partition>
  </resource>
  <os>
    <type arch='x86_64'>exe</type>
    <init>/bin/sh</init>
  </os>
  <clock offset='utc'/>
  <on_poweroff>destroy</on_poweroff>
  <on_reboot>restart</on_reboot>
  <on_crash>destroy</on_crash>
  <devices>
    <emulator>/usr/libexec/libvirt_lxc</emulator>
    <filesystem type='mount' accessmode='passthrough'>
      <source dir='/'/>
      <target dir='/'/>
    </filesystem>
  </devices>
  <seclabel type='dynamic' model='selinux' relabel='yes'/>  <-----have a selinux label
</domain>
#virsh --connect lxc:/// define lxc.xml";" 1.#virsh --connect lxc:/// define lxc.xml
 Domain helloworld defined from lxc.xm";Test Case;RedHatEnterpriseLinux7/RHEL7-43611
1168;;;;;;;;;2;"2..start it (will fail):
 #virsh --connect lxc:/// start helloworld";"2.will fail to start the domain
 error: Failed to start domain helloworld 
 error: unsupported configuration: At least one PTY console is required";;RedHatEnterpriseLinux7/RHEL7-43611
1168;;;;;;;;;3;"3.check the guest xml: 
 #virsh --connect lxc:/// dumpxml helloworld";"3.the seclabel for guest still exits:
   <seclabel type='dynamic' model='selinux' relabel='yes'/>
​​";;RedHatEnterpriseLinux7/RHEL7-43611
1169;RHEL7-45933;[Virtual Networks] Add support for MACVLAN_FLAG_NOPROMISC when creating macvtap interfaces - Bug 1013309 - need update;The physical interface should not enter the promiscuous mode after macvtap passthru interface create (not fix currently);Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. clean the log file, then create a macvtap interface and set a link up
 # cat /dev/null > /var/log/dmesg
 # cat /dev/null > /var/log/messages
 # cat /dev/null > /var/log/libvirt/libvirtd.log
 # service libvirtd restart
 # ip link add link enp0s25 name test type macvtap mode passthru
 # ip link set test up
​​";" The physical interface should not enter the promiscuous mode after macvtap passthru interface create.
 
 
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-45933
1169;;;;;;;;;2;"2. check the log file, there should not be """"Mar 18 10:31:30 test kernel: device enp0s25 entered promiscuous mode""
 # cat /var/log/messages | grep promiscuous
 # cat /var/log/dmesg | grep promiscuous
 # cat /var/log/libvirt/libvirtd.log | grep promiscuous";"no such log ""device enp0s25 entered promiscuous mode""";;RedHatEnterpriseLinux7/RHEL7-45933
1169;;;;;;;;;3;"3. # netstat -i
​​";"Kernel Interface table
 Iface      MTU    RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg
 enp0s25   1500   171195      0      6 0         12869      0      0      0  BMRU 
 lo       65536      108      0      0 0           108      0      0      0 LRU
 test      1500      400      0     16 0            33      0      0      0 BMRU
 virbr0    1500        0      0      0 0             0      0      0      0 BMU
 
 (step 3, the Flg should not include ""P"")";;RedHatEnterpriseLinux7/RHEL7-45933
1169;;;;;;;;;4;"4. # ip link show enp0s25
​​";"2: enp0s25: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 1000
     link/ether 00:24:7e:05:42:32 brd ff:ff:ff:ff:ff:ff 
 
 (step 4, there should not be ""promiscuous"" in the enp0s25 info.)";;RedHatEnterpriseLinux7/RHEL7-45933
1170;RHEL7-45987;[domiftune] Check and tune the bandwidth of a interface via domiftune - bug 782716;use domiftune to easily check and tune the bandwidth on a online or offline domain. the floor attribute can not be defined if the network has no bandwidth defined.;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1.  use domiftune query bandwidth settings
 # virsh start rhel7.2
 # virsh dumpxml rhel7.2 | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:ee:96:6d'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-45987
1170;;;;;;;;;2;"# virsh domiftune rhel7.2 vnet0 
​​";"inbound.average: 0
 inbound.peak   : 0
 inbound.burst  : 0
 inbound.floor  : 0
 outbound.average: 0
 outbound.peak  : 0
 outbound.burst : 0
 
 (""0"" indicates no value set.)";;RedHatEnterpriseLinux7/RHEL7-45987
1170;;;;;;;;;3;"2. ues domiftune set the bandwidth (guest is running)
 # virsh domiftune rhel7.2 vnet0 --inbound 2000,3000,2048 --outbound 2000,4000,1024
 # virsh domiftune rhel7.2 vnet0
 
​​";"inbound.average: 2000
 inbound.peak   : 3000
 inbound.burst  : 2048
 inbound.floor  : 0
 outbound.average: 2000
 outbound.peak  : 4000
 outbound.burst : 1024
​​";;RedHatEnterpriseLinux7/RHEL7-45987
1170;;;;;;;;;4;destroy then start the guest, check the bandwidth again, it have ** no ** Qos settings.(like step 1);​​;;RedHatEnterpriseLinux7/RHEL7-45987
1170;;;;;;;;;5;"3. ues domiftune with --config (guest is running, when use --config, should only se mac address of the guest)
 # virsh domiftune rhel7.2 52:54:00:ee:96:6d  --inbound 2000,3000,2048 --outbound 2000,4000,1024 --config
 # virsh domiftune rhel7.2 vnet0
 
 
 
​​";"inbound.average: 0
 inbound.peak   : 0
 inbound.burst  : 0
 inbound.floor  : 0
 outbound.average: 0
 outbound.peak  : 0
 outbound.burst : 0
 
 ( If --config is specified, affect the next boot of a persistent guest.)";;RedHatEnterpriseLinux7/RHEL7-45987
1170;;;;;;;;;6;"# virsh destroy rhel7.2
 # virsh start rhel7.2
 # virsh domiftune rhel7.2 vnet0 <=== the guest's mac";"inbound.average: 2000
 inbound.peak   : 3000
 inbound.burst  : 2048
 inbound.floor  : 0
 outbound.average: 2000
 outbound.peak  : 4000
 outbound.burst : 1024";;RedHatEnterpriseLinux7/RHEL7-45987
1170;;;;;;;;;7;"# virsh domiftune rhel7.2 52:54:00:ee:96:6d --inbound 0,0,0 --outbound 0,0,0
 # virsh domiftune rhel7.2 52:54:00:ee:96:6d";"all are ""0"", no value set then.
 If --config is specified, affect the next boot of a persistent guest.";;RedHatEnterpriseLinux7/RHEL7-45987
1170;;;;;;;;;8;"4. ues domiftune with --live (guest is running)
 # virsh domiftune rhel7.2 vnet0  --inbound 2000,3000,2048 --outbound 2000,4000,1024 --current
 # virsh domiftune rhel7.2 vnet0 
 
 
 
 
 
​​";"inbound.average: 2000
 inbound.peak   : 3000
 inbound.burst  : 2048
 inbound.floor  : 0
 outbound.average: 2000
 outbound.peak  : 4000
 outbound.burst : 1024
 
 (If --current is specified, affect the current guest state.)";;RedHatEnterpriseLinux7/RHEL7-45987
1170;;;;;;;;;9;"# virsh destroy rhel7.2
 Domain rhel7.2 destroyed
 # virsh domiftune rhel7.2 52:54:00:ee:96:6d <=== can only use mac once the guest is down";"inbound.average: 0
 inbound.peak   : 0
 inbound.burst  : 0
 inbound.floor  : 0
 outbound.average: 0
 outbound.peak  : 0
 outbound.burst : 0";;RedHatEnterpriseLinux7/RHEL7-45987
1170;;;;;;;;;10;"# virsh start rhel7.2
 Domain rhel7.2 started
 # virsh domiftune rhel7.2 vnet0";it have Qos settings just like what we have setting(--inbound 2000,3000,2048 --outbound 2000,4000,1024);;RedHatEnterpriseLinux7/RHEL7-45987
1170;;;;;;;;;11;"5. the guest is down
 # virsh domiftune rhel7.2  52:54:00:ee:96:6d   --inbound 2000,3000,2048 --outbound 2000,4000,1024 --live
 
 
 
​​";"error: Unable to set interface parameters
 error: Requested operation is not valid: domain is not running
 
 ( --live can not used when the guest is running
 If --live is specified, only the running guest collection period is affected.)
​​";;RedHatEnterpriseLinux7/RHEL7-45987
1170;;;;;;;;;12;"guest is done
 # virsh domiftune rhel7.2  52:54:00:ee:96:6d   --inbound 2000,3000,2048 --outbound 2000,4000,1024
 # virsh start rhel7.2
 # virsh domiftune rhel7.2 vnet0";"the Qos is set
​​";;RedHatEnterpriseLinux7/RHEL7-45987
1170;;;;;;;;;13;"guest is running
 # virsh domiftune rhel7.2  52:54:00:ee:96:6d   --inbound 0,0,0,0 --outbound 0,0,0,0 --current --live
​​";error: Options --current and --live are mutually exclusive ;;RedHatEnterpriseLinux7/RHEL7-45987
1170;;;;;;;;;14;"6. the default network have no bandwidth setting (guest is running)
 # virsh domiftune rhel7.2  52:54:00:ee:96:6d   --inbound 2000,3000,2048,1500 --outbound 2000,4000,1024
 
 
​​";"error: Unable to set interface parameters 
 error: Operation not supported: Invalid use of 'floor' on interface with MAC address 52:54:00:ee:96:6d - network 'default' has no inbound QoS set 
 
 (set floor will fail if the network have no bandwidth setting)";;RedHatEnterpriseLinux7/RHEL7-45987
1170;;;;;;;;;15;"the default network have bandwidth setting
 # virsh domiftune rhel7.2  52:54:00:ee:96:6d   --inbound 2000,3000,2048, 1500 --outbound 2000,4000,1024
 
 # virsh domiftune rhel7.2  52:54:00:ee:96:6d";"inbound.average: 2000
 inbound.peak   : 3000
 inbound.burst  : 2048
 inbound.floor  : 1500 
 outbound.average: 2000
 outbound.peak  : 4000
 outbound.burst : 1024";;RedHatEnterpriseLinux7/RHEL7-45987
1171;RHEL7-45994;[net-update][negative] Test exclusive arguments;Test exclusive arguments.;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Scenario 1: --current --live
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-45994
1171;;;;;;;;;2;"# virsh net-update --network definebr1 --command delete --section ip-dhcp-range --xml net-update.xml --current --live
​​";error: Options --current and --live are mutually exclusive;;RedHatEnterpriseLinux7/RHEL7-45994
1171;;;;;;;;;3;"Scenario 2: --current --config
​​";​​;;RedHatEnterpriseLinux7/RHEL7-45994
1171;;;;;;;;;4;"# virsh net-update --network definebr1 --command delete --section ip-dhcp-range --xml net-update.xml --current --config
​​";error: Options --current and --config are mutually exclusive;;RedHatEnterpriseLinux7/RHEL7-45994
1172;RHEL7-45995;[save-image-edit] [negative]Test exclusive arguments;Test exclusive arguments;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;Scenario 1. --running --paused;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-45995
1172;;;;;;;;;2;"# virsh save-image-edit /tmp/rhel7.2-new.save --running --paused
 
​​";"error: Options --running and --paused are mutually exclusive
 
 I got the erro messages is 
 error: command 'save-image-edit' doesn't support option --runnning";;RedHatEnterpriseLinux7/RHEL7-45995
1172;;;;;;;;;3;"# virsh save rhel7.2 ss.save --running --paused
 error: Failed to save domain rhel7.2 to ss.save
 error: Flags 'VIR_DOMAIN_SAVE_RUNNING' and 'VIR_DOMAIN_SAVE_PAUSED' are mutually exclusive
​​";​​;;RedHatEnterpriseLinux7/RHEL7-45995
1173;RHEL7-46077;[virtlogd] Start guest when virtlogd.socket is not active.;When virtlogd.socket is not active, guest will start failed because it can't connect to virtlogd service.;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Set virtlogd as the log handler:
 
 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.
 
 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 
 
 (Re)start libvirtd
 # systemctl restart libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-46077
1173;;;;;;;;;2;"Stop virtlogd.socket
 # systemctl stop virtlogd.socket
 
 # systemctl status virtlogd.socket
​​";virtlogd is stopped.;;RedHatEnterpriseLinux7/RHEL7-46077
1173;;;;;;;;;3;"Start a guest
 # virsh start rhel7.2
 
​​";"Start failed. Output:
 
 error: failed to connect to the hypervisor
 error: Failed to connect socket to '/var/run/libvirt/libvirt-sock': No such file or directory
​​";;RedHatEnterpriseLinux7/RHEL7-46077
1174;RHEL7-46078;[virtlogd]Check the qemu log when do live migration.;"Check qemu log when do live migration
Bug 1312188 - virtlogd failed to open qemu log file while doing migration";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set virtlogd as the log handler on source host:
 
 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.
 
 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 
 
 (Re)start libvirtd:
 # systemctl restart libvirtd
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-46078
1174;;;;;;;;;2;"Start a guest on source host:
 # virsh start rhel7.2";​​;;RedHatEnterpriseLinux7/RHEL7-46078
1174;;;;;;;;;3;"Migrate the guest to the other host:
 
 # virsh migrate rhel7.2 qemu+ssh://hp-dl385g7-06.lab.eng.pek2.redhat.com/system --live --verbose
​​";​​;;RedHatEnterpriseLinux7/RHEL7-46078
1174;;;;;;;;;4;"Check qemu log on source host:
 # cat /var/log/libvirt/qemu/rhel7.2.log
​​";"The guest shutdown log is written correctly.

 Output:
 ...
 2017-04-22 04:17:20.320+0000: shutting down, reason=migrated
 2017-04-22T04:17:20.324804Z qemu-kvm: terminating on signal 15 from pid 30257 (<unknown process>)
";;RedHatEnterpriseLinux7/RHEL7-46078
1175;RHEL7-46079;[virtlogd] [non-root user] Check virtlogd process 30s after start and destroy guest.;For non-root user, virtlogd starts with --timeout=30 by default. So after destroying all guests, virtlogd will exit after 30s.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Log in host as non-root user
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-46079
1175;;;;;;;;;2;"Start a guest:
 $ virsh start vm1";​​;;RedHatEnterpriseLinux7/RHEL7-46079
1175;;;;;;;;;3;"Check virtlogd process:
 $ ps aux|grep virtlogd
​​";"Virtlogd process is auto-spawned as ""/usr/sbin/virtlogd --timeout=30"" when starting a guest under non-root user.

 Output:
 fjin     23349  0.0  0.0 195032  4528 ?        Sl   00:48   0:00 /usr/sbin/virtlogd --timeout=30
";;RedHatEnterpriseLinux7/RHEL7-46079
1175;;;;;;;;;4;"Wait 30s, check virtlogd process again
 $ ps aux|grep virtlogd
 
​​";"virtlogd process in non-root session exists.
 
 Output:
 fjin     23349  0.0  0.0 195032  4528 ?        Sl   00:48   0:00 /usr/sbin/virtlogd --timeout=30
​​";;RedHatEnterpriseLinux7/RHEL7-46079
1175;;;;;;;;;5;"Destroy guest:
 $ virsh destroy vm1";​​;;RedHatEnterpriseLinux7/RHEL7-46079
1175;;;;;;;;;6;"Wait 30s, check virtlogd process again
 $ ps aux|grep virtlogd
​​";virtlogd process in non-root session doesn't exist;;RedHatEnterpriseLinux7/RHEL7-46079
1176;RHEL7-46084;[virtlogd] Fill all the disk space for qemu log directory when guest is running;Start guest, then fill the disk space of log directory with a large amount of data. When disk space is full, no more log data can be writen into the log file, guest keeps running normally.;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Set virtlogd as the log handler:
 
 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.
 
 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 
 
 (Re)start libvirtd
 # systemctl restart libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-46084
1176;;;;;;;;;2;"Fill the disk mounted on qemu log directory, until small space left(<2M, but enough to let the guest start):
 
 1) Create a new partition named /dev/sdb3
 
 2) # mount /dev/sdb3 /var/log/libvirt/qemu/ -o context=system_u:object_r:virt_log_t:s0
 
 3) Write data into /dev/sdb3
 dd if=/dev/zero of=/var/log/libvirt/qemu/big_file bs=1024 count=51200 && sync
 
 4) # df /dev/sdb3
 Filesystem     1K-blocks  Used Available Use% Mounted on
 /dev/sdb3       577           563   0           100% /var/log/libvirt/qemu
​​";​​;;RedHatEnterpriseLinux7/RHEL7-46084
1176;;;;;;;;;3;"Start a guest
 # virsh start rhel7.2";​​;;RedHatEnterpriseLinux7/RHEL7-46084
1176;;;;;;;;;4;"Connect to guest by spice client && disconnect continually, (this can produce lots of log data):
 
 # while true; do remote-viewer spice://10.66.6.200:5900 &  PID=$!; sleep 1; kill -9 PID; done";(Is there other way to  make qemu process output messages?);;RedHatEnterpriseLinux7/RHEL7-46084
1176;;;;;;;;;5;"Check qemu log:
 # tailf /var/log/libvirt/qemu/rhel7.2.log
 
​​";"When disk space is full, no more log data can be writen into the log file
​​";;RedHatEnterpriseLinux7/RHEL7-46084
1176;;;;;;;;;6;"Check the capacity of the disk:
 # df /dev/sdb3
 
 
​​";"Only little space is left.
 
 Output:
 Filesystem     1K-blocks  Used Available Use% Mounted on
 /dev/sdb3            577      566     0          100% /var/log/libvirt/qemu
​​";;RedHatEnterpriseLinux7/RHEL7-46084
1176;;;;;;;;;7;"Check the status of guest
 # virsh list
 
​​";"Guest is still running.
 
 Output:
  Id    Name                           State
 ----------------------------------------------------
  10    rhel7.2                        running";;RedHatEnterpriseLinux7/RHEL7-46084
1176;;;;;;;;;8;"Check syslog:
 # cat /var/log/messages | grep virtlogd";"virtlogd reports error in syslog.
 
 Output: 
 Apr 19 23:47:32 intel-5205-32-1 virtlogd: 2017-04-20 03:47:32.351+0000: 30696: error : virRotatingFileWriterAppend:473 : Unable to write to file /var/log/libvirt/qemu/rhel7.2.log: No space left on device
​​";;RedHatEnterpriseLinux7/RHEL7-46084
1176;;;;;;;;;9;"Check virtlogd process:
 # ps -C virtlogd
​​";"virtlogd process exists.
 
 Output: 
 PID     TTY    TIME      CMD
 30696 ?        00:00:00  virtlogd";;RedHatEnterpriseLinux7/RHEL7-46084
1177;RHEL7-46085;[virtlogd] Start guest when all the disk space for qemu log directory is occupied;"Start guest when there is no enough disk space in log directory.Guest will fail to start.
 Bug 1320924 - ""Process exited prior to exec"" when start guest with no enough space for qemu log and virtlogd is enabled.";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Scenario 1: qemu log file exists before guest starts( this is to test no space to append log data to existing file)
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-46085
1177;;;;;;;;;2;"Touch a log file in the qemu log directory, and fill the disk mounted on it until small space left:
 
 1) Create a new partition named /dev/sdb3
 
 2) # mount /dev/sdb3 /var/log/libvirt/qemu/ -o context=system_u:object_r:virt_log_t:s0
 
 3) Touch a qemu log file:
 # touch /var/log/libvirt/qemu/vm2.log
 
 4) Write data into /dev/sdb3
 dd if=/dev/zero of=/var/log/libvirt/qemu/big_file bs=1024 count=51200 && sync
 
 5) # df /dev/sdb3
 Filesystem     1K-blocks  Used Available Use% Mounted on
 /dev/sdb3       577           566   0           100% /var/log/libvirt/qemu";​​;;RedHatEnterpriseLinux7/RHEL7-46085
1177;;;;;;;;;3;"Set virtlogd as the log handler:

 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.

 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 

 (Re)start libvirtd
 # systemctl restart libvirtd
​​";​​;;RedHatEnterpriseLinux7/RHEL7-46085
1177;;;;;;;;;4;"Start a guest
 # virsh start rhel7.2
 
​​";"Start failed with clear error message, output:
 
 error: Failed to start domain rhel7.2
 error: Unable to open file: /var/log/libvirt/qemu/rhel7.2.log: No space left on device
​​";;RedHatEnterpriseLinux7/RHEL7-46085
1177;;;;;;;;;5;"Scenario 2: no qemu log file exists before guest starts(this is to test no space to create new log file)
​​";​​;;RedHatEnterpriseLinux7/RHEL7-46085
1177;;;;;;;;;6;"Fill the disk mounted on qemu log directory, until small space left:
 
 1) Create a new partition named /dev/sdb3
 
 2) # mount /dev/sdb3 /var/log/libvirt/qemu/ -o context=system_u:object_r:virt_log_t:s0
 
 3) Fill the disk with some data until a little space left:
 # dd if=/dev/zero of=/var/log/libvirt/qemu/test.out bs=1k count=12050
 
 4) # df /dev/sdb3
 Filesystem        1K-blocks      Used Available Use%   Mounted on
 /dev/sdb3              12972     12940        32   100%   /var/log/libvirt/qemu
​​";​​;;RedHatEnterpriseLinux7/RHEL7-46085
1177;;;;;;;;;7;"Set virtlogd as the log handler:
 
 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.
 
 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 
 
 (Re)start libvirtd
 # systemctl restart libvirtd";​​;;RedHatEnterpriseLinux7/RHEL7-46085
1177;;;;;;;;;8;"Start a guest
 # virsh start rhel7.2
​​";"Start failed. Output:
 error: Failed to start domain rhel7.2
 error: internal error: Process exited prior to exec: 
​​";;RedHatEnterpriseLinux7/RHEL7-46085
1178;RHEL7-46211;[create] - Create a domain from xml when the same domain is defined before;Create a domain from xml when the same domain is defined before;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Scenario 1:domain creates failed
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-46211
1178;;;;;;;;;2;"1) Define a guest 
 (that can't be started successfully due to an error, e.g. domain interface uses a non-existing network
 # cat /tmp/rhel7.2.xml
 <domain type='kvm'>
   <name>rhel7.2-raw-2</name>
   <uuid>b8cc1d8d-e002-47ba-9bf5-773d3e471f83</uuid>
 ..........
     <interface type='network'>
       <mac address='52:54:00:ab:4c:d0'/>
       <source network='default1'/>
       <model type='virtio'/>
     </interface>
 )
 # virsh define /tmp/rhel7.2.xml
 
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  -     rhel7.2-raw-2                  shut off
 
 2) #virsh create /tmp/rhel7.2.xml
 error: Failed to create domain from /tmp/rhel7.2.xml
 error: Network not found: no network with matching name 'default1'
 
 3) # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  -     rhel7.2-raw-2                  shut off
​​";"2) Domain failed to create
 
 3) Domain rhel7.2-raw-2 is in shutoff status
​​";;RedHatEnterpriseLinux7/RHEL7-46211
1178;;;;;;;;;3;"Scenario 2:domain creates successfully
​​";​​;;RedHatEnterpriseLinux7/RHEL7-46211
1178;;;;;;;;;4;"1)Define a guest
 # cat /tmp/rhel7.2.xml
 <domain type='kvm'>
   <name>rhel7.2-raw-2</name>
   <uuid>b8cc1d8d-e002-47ba-9bf5-773d3e471f83</uuid>
 ..........
     <interface type='network'>
       <mac address='52:54:00:ab:4c:d0'/>
       <source network='default'/>
       <model type='virtio'/>
     </interface>
 
 # virsh define /tmp/rhel7.2.xml
 
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  -     rhel7.2-raw-2                  shut off
 
 2) Change something in /tmp/rhel7.2.xml, but make sure guest can be created by /tmp/rhel7.2.xml
 e.g. delete interface in xml
 
 3) # virsh create /tmp/rhel7.2.xml
 Domain rhel7.2-raw-2 created from /tmp/rhel7.2.xml

 4) # virsh dumpxml rhel7.2-raw-2 --inactive|grep interface

 5) # virsh dumpxml rhel7.2-raw-2 |grep interface";"4) Domain inactive xml should not be overwritten by active xml, so interface should still exist in inactive xml:
     <interface type='network'>
     </interface>
 
 5) No interface exists in active xml
​​";;RedHatEnterpriseLinux7/RHEL7-46211
1179;RHEL7-46212;[Migration][--undefinesource] Undefine vm from source host when do live migration - covered in RHEL7-17339;"According to this patch:  qemu: fix migration flags undefinesource cannot work 
 Test matrix:
 non-p2p migration, p2p migration
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;Define and start a guest on source host;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-46212
1179;;;;;;;;;2;"Do migration with --undefinesource:
 
* # virsh migrate <domain> qemu+ssh://${target_host_ip}/system --live --undefinesource [--p2p]
";​​;;RedHatEnterpriseLinux7/RHEL7-46212
1179;;;;;;;;;3;"After migration completes, check domain status on both source and target host:
 
* # virsh list --all
";"* On source host, domain is undefined
* On target host, domain is running
";;RedHatEnterpriseLinux7/RHEL7-46212
1180;RHEL7-46305;[libvirtd]option '--timout' testing -- bug885386;"Test the ""--timeout"" option";Yan Fu (yafu);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-46305
1181;RHEL7-47061;Set QEMU commandline arguments in domain xml;Bug 1292131 - Validation of XML with QEMU command line fails;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1. virsh edit DOMAIN
 
 2. Edit the buffer to contain the following tags:
 <domain type='kvm' xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0'>
   <qemu:commandline>
     <qemu:arg value='-s'/>
   </qemu:commandline>
   <name>rhel7.2</name>
 
 3. Save";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47061
1181;;;;;;;;;2;"4. virsh start DOMAIN
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47061
1181;;;;;;;;;3;"5. Check qemu command line
 # ps aux|grep qemu-kvm
​​";"There is option '-s' in qemu command line:
 -s -msg timestamp=on
​​";;RedHatEnterpriseLinux7/RHEL7-47061
1182;RHEL7-47065;WALA-TC: [Storage] Change OS disk size;WALA-TC: [Storage] Change OS disk size;Yuxin Sun (yuxisun);Critical;Positive;Automated;;1;"Prepare a VM of A1 size in Azure and shutdown it.(Status is ""Stopped(deallocated)"")
 1. In Azure portal (, click the ""VIRTUAL MACHINES"" on the left panel, select the VM. Click ""Settings"" button on the top panel, then click the ""Disks"" in the ""Settings"" section.https://portal.azure.com)";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47065
1182;;;;;;;;;2;2. Click on the OS Disk, and on the OS Disk panel, try to change the os disk size to a smaller value.;"Cannot change os disk size to a smaller value.
 Azure portal shows ""successful update"" but there's a red line ""Failed"" warning messages. Click it, there're error logs: 
 Provisioning failed. Shrinking a disk from xxxxx bytes to xxxxx bytes is not supported.
";;RedHatEnterpriseLinux7/RHEL7-47065
1182;;;;;;;;;3;3. Click on the OS Disk, and on the OS Disk panel, try to change the os disk size to a bigger value.;Can change os disk size to a bigger value.;;RedHatEnterpriseLinux7/RHEL7-47065
1182;;;;;;;;;4;"4. After increasing the os disk size, start the VM and check the /dev/sda size.
 # fdisk -l /dev/sda";​​;;RedHatEnterpriseLinux7/RHEL7-47065
1182;;;;;;;;;5;"5. reboot VM then add a partition on /dev/sda, format it, mount to a folder and edit files in it.
 # fdisk /dev/sda
 # mkfs.ext4 /dev/sda3
 # mount /dev/sda3 /mnt
 touch, vi, rm, mkdir in the /mnt folder.";"Can do all of these without error.
​​";;RedHatEnterpriseLinux7/RHEL7-47065
1182;;;;;;;;;6;6. Repeat step 1-4 on a DS1 size VM. Check if the SSD disk can work well.;Can do all of these without error.;;RedHatEnterpriseLinux7/RHEL7-47065
1182;;;;;;;;;7;config;​​;;RedHatEnterpriseLinux7/RHEL7-47065
1183;RHEL7-47066;WALA-TC: [Network] Performance - iperf3 - Bandwidth;WALA-TC: [Network] Performance - iperf3 - Bandwidth;Yuxin Sun (yuxisun);Critical;Positive;Not Automated;;1;1. Prepare 2 VMs in the same size on Azure. One VM is client, the other one is server. The 2 VMs should be in the same virtual network and same subnet.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47066
1183;;;;;;;;;2;"2. On the server VM, start the iperf3 server process:
 # iperf3 -s -p 8000 -D";​​;;RedHatEnterpriseLinux7/RHEL7-47066
1183;;;;;;;;;3;"3. On the client VM, use iperf3 client process to test the bandwidth:
 # iperf3 -c [Server Private IP] -i0 -V -p 8000 -t 30 -f m -b 0 -O 3 -Z -P [parallel] -u(only for udp) -l [buffer length] -w [window size] -M [MSS]";"...
 [ ID] Interval           Transfer     Bandwidth       Jitter    Lost/Total Datagrams
 ...
 [SUM]   0.00-4.98   sec  1.46 GBytes  2520 Mbits/sec  6.461 ms  73/24218 (0.3%)
 CPU Utilization: local/sender 28.5% (0.6%u/28.1%s), remote/receiver 14.8% (1.9%u/12.8%s)";;RedHatEnterpriseLinux7/RHEL7-47066
1183;;;;;;;;;4;4. Retry step 3 with different parallel/protocol/buffer length/window size/MSS.;​​;;RedHatEnterpriseLinux7/RHEL7-47066
1183;;;;;;;;;5;5. Retry step 3 and 4 with different VM size: A9,G5;​​;;RedHatEnterpriseLinux7/RHEL7-47066
1183;;;;;;;;;6;config;​​;;RedHatEnterpriseLinux7/RHEL7-47066
1184;RHEL7-47072;[Hyper-V][Kdump]Triger kdump on different CPU in SMP guest;Trigger kdump on different CPU in SMP guest. On SMP guest, it use CPU0 by default. Make sure trigger crash on non CPU0 could also work for kdump;Yaju Cao (yacao);Medium;Positive;Automated;;1;1. Start kdump service in SMP guest;Kdump service is started;Test Case;RedHatEnterpriseLinux7/RHEL7-47072
1184;;;;;;;;;2;" 2. Trigger kdump on different CPU.
 1) script to trigger kdump
 $cat crash.sh
 #! /bin/sh
 sync; echo c > /proc/sysrq-trigger
 2) Crash your host with 
 $taskset -c 1 ./crash.sh
";"kdump could be triggered successfully.
 After guest reboot, vmcore is generated";;RedHatEnterpriseLinux7/RHEL7-47072
1185;RHEL7-47119;WALA-TC: [life cycle] Create a VM without deprovision;WALA-TC: [life cycle] Create a VM without deprovision;Yuxin Sun (yuxisun);Critical;Positive;Automated;;1;1. Prepare a VM. Add a user with ssh_key. Set root password.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47119
1185;;;;;;;;;2;"2. Shutdown it without deprovision. Then capture an image with ""I've run waagent -deprovision"" checked.";​​;;RedHatEnterpriseLinux7/RHEL7-47119
1185;;;;;;;;;3;3. Use the new image to create a VM.  Check the old user/ssh_key, root password and hostname.;"The new VM is not provisioned.
 The old user/ssh_key and root password can work well. The hostname is the old hostname. The new username cannot work.";;RedHatEnterpriseLinux7/RHEL7-47119
1185;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-47119
1186;RHEL7-47229;WALA-TC: [Settings] Reset remote access;WALA-TC: [Settings] Reset remote access;Yuxin Sun (yuxisun);Critical;Positive;Automated;;1;"1. Prepare a VM in Azure (ASM mode). The user is certificated with ssh_key.
 1.1 Check the ssh configuration:
 # cat /etc/ssh/sshd_config|grep -E 'PasswordAuthentication|ChallengeResponseAuthentication'
 1.2 Check if can access the VM from other hosts.";"1.1 # cat /etc/ssh/sshd_config|grep -E 'PasswordAuthentication|ChallengeResponseAuthentication'
 PasswordAuthentication no
 ChallengeResponseAuthentication no
 1.2 Cannot access the VM from other hosts.
 Permission denied (publickey,gssapi-keyex,gssapi-with-mic).";Test Case;RedHatEnterpriseLinux7/RHEL7-47229
1186;;;;;;;;;2;"2. In the new Azure portal ( ) , click the ""VIRTUAL MACHINES"" on the left panel. Select the VM, then click the ""Reset Remote Access"" button on top of the panel.https://portal.azure.com";"Can execute ""Reset Remote Access"" successfully.";;RedHatEnterpriseLinux7/RHEL7-47229
1186;;;;;;;;;3;"3.1 Check if can access the VM from other hosts.
 3.2 Check the ssh configuration file:
 # ls -l /etc/ssh
 # cat /etc/ssh/sshd_config|grep -E 'PasswordAuthentication|ChallengeResponseAuthentication'";"3.1 Can access the VM from other hosts.
 3.2 It makes a backup of the old sshd_config and generates a new file.
 # ls -l /etc/ssh
 -rw-------. 1 root root   3880 Apr  1 15:13 sshd_config
 -rw-r--r--. 1 root root   3878 Apr  1 15:13 sshd_config_2016-04-01T07:13:25Z
 # cat /etc/ssh/sshd_config|grep -E 'PasswordAuthentication|ChallengeResponseAuthentication'
 PasswordAuthentication yes
 ChallengeResponseAuthentication no";;RedHatEnterpriseLinux7/RHEL7-47229
1186;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-47229
1187;RHEL7-47247;[net-dhcp-leases] - invalid argument value;Check invalid argument value for net-dhcp-leases.;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Scenario 1: empty arguments value
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47247
1187;;;;;;;;;2;"# virsh net-dhcp-leases default --mac ''
 error: Failed to get option 'mac': Option argument is empty
 
 # virsh net-dhcp-leases default --mac ' '
 error: Failed to get leases info for default
 error: invalid MAC address:";​​;;RedHatEnterpriseLinux7/RHEL7-47247
1187;;;;;;;;;3;"Scenario 2: invalid mac address
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47247
1187;;;;;;;;;4;"# virsh net-dhcp-leases default --mac 99
 error: Failed to get leases info for default
 error: invalid MAC address: 99";​​;;RedHatEnterpriseLinux7/RHEL7-47247
1188;RHEL7-47248;[net-event] Invalid arguments;Check invalid arguments for net-event.;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Scenario 1: empty arguments value
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47248
1188;;;;;;;;;2;"# virsh net-event default --event ''
 error: Failed to get option 'event': Option argument is empty
 
 # virsh net-event default --event ' '
 error: unknown event type
 
 # virsh event rhel7.2 --event ''
 error: Failed to get option 'event': Option argument is empty
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47248
1188;;;;;;;;;3;"Scenario 2: invalid event type
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47248
1188;;;;;;;;;4;"# virsh net-event default --event ss
 error: unknown event type ss
 
 # virsh event rhel7.2 --event 'ss'
 error: unknown event type ss.";​​;;RedHatEnterpriseLinux7/RHEL7-47248
1189;RHEL7-47249;[domifaddr] - Test when domain name is a number;"Bug 1254152 - error should be improved when use some virsh command get failure - FIXED
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1.prepare a guest which use a name which is number:
 # virsh list
  Id    Name                           State
 ----------------------------------------------------
  2     123                            running
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47249
1189;;;;;;;;;2;"2. chose a command which need pass guest name:
 # virsh domiflist 123
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet0      network    default    rtl8139     52:54:00:59:d5:b8
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47249
1189;;;;;;;;;3;"# virsh domif-setlink 123 vnet1 up
 ** error: interface (target: vnet1) not found **
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47249
1189;;;;;;;;;4;"# virsh domifstat 123 vnet1
 error: Failed to get interface stats 123 vnet1
 error: invalid argument: invalid path, 'vnet1' is not a known interface";​​;;RedHatEnterpriseLinux7/RHEL7-47249
1190;RHEL7-47250;[domifaddr]- invalid arguments value;invalid arguments value;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;Scenario 1: empty arguments value;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47250
1190;;;;;;;;;2;"# virsh domifaddr rhel7.2 ''
 error: Failed to get option 'interface': Option argument is empty";​​;;RedHatEnterpriseLinux7/RHEL7-47250
1191;RHEL7-47291;[virtlogd][Kill -SIGKILL] Kill virtlogd process by signal 9 when guest is running;If virtlogd is killed when guest is running, new output of the qemu process will not be written into $guest.log file;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Set virtlogd as the log handler:

 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.

 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 

 (Re)start libvirtd:
 # systemctl restart libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47291
1191;;;;;;;;;2;"Start a guest
 # virsh start $guest";​​;;RedHatEnterpriseLinux7/RHEL7-47291
1191;;;;;;;;;3;"Check the opened file descriptor of qemu log file:
 # lsof /var/log/libvirt/qemu/rhel7.2-min.log
 
​​";"qemu log file is opened by virtlogd. Output:
 
 COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF    NODE NAME
 virtlogd 2833 root   16w   REG  253,0    85291 1114803 /var/log/libvirt/qemu/rhel7.2-min.log";;RedHatEnterpriseLinux7/RHEL7-47291
1191;;;;;;;;;4;"Check virtlogd pid:
 # ps aux|grep virtlogd
​​";"Output:
 root      2833  0.0  0.0 298652  4912 ?        Ssl  Jun04   0:04 /usr/sbin/virtlogd";;RedHatEnterpriseLinux7/RHEL7-47291
1191;;;;;;;;;5;"Kill virtlogd process: 
 # kill -9 2833
 
 # ps aux|grep virtlogd
 (no virtlogd process exits)
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47291
1191;;;;;;;;;6;"Check the opened file descriptor of qemu log file:
 # lsof /var/log/libvirt/qemu/rhel7.2-min.log
​​";"Nothing output
​​";;RedHatEnterpriseLinux7/RHEL7-47291
1192;RHEL7-47295;WALA-TC: [func] waagent -conf;WALA-TC: [func] waagent -conf;Yuxin Sun (yuxisun);Critical;Positive;Automated;;1;"1. Install WALinuxAgent on the VM. Stop the waagent service.
 Prepare another waagent.conf file and change some values in it:
 # cp /etc/waagent.conf /etc/waagent1.conf
 # vi /etc/waagent1.conf
 set Logs.File=/var/log/waagent1.log";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47295
1192;;;;;;;;;2;"2. Run the waagent and specify the conf file:
 # waagent -daemon -conf=/etc/waagent1.conf";​​;;RedHatEnterpriseLinux7/RHEL7-47295
1192;;;;;;;;;3;"3. Check if the configurations in the specified file works.
 # ls /var/log/waagent1.log
 # cat /var/log/waagent1.log";"# ls /var/log/waagent1.log 
 /var/log/waagent1.log
 The logs are written in the /var/log/waagent1.log.
​​";;RedHatEnterpriseLinux7/RHEL7-47295
1193;RHEL7-47365;RHEL7-18716;;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-47365
1194;RHEL7-47367;WALA-TC: [WALA conf] Invoke specific program;WALA-TC: [WALA conf] Invoke specific program;Yuxin Sun (yuxisun);Critical;Positive;Automated;;1;"1. Prepare a VM(provisioned), and login.
 Put a script in the VM, such as:
 # cat /tmp/walatest.sh
 #!/bin/bash
 echo yourstring > /tmp/walatest.log
 # chmod 755 /tmp/walatest.sh ";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47367
1194;;;;;;;;;2;"2. Set the /etc/waagent.conf:
 Role.StateConsumer=/tmp/walatest.sh
 Than restart waagent
 # service waagent restart ";​​;;RedHatEnterpriseLinux7/RHEL7-47367
1194;;;;;;;;;3;"3. Check if the script is invoked.
 # cat /tmp/walatest.log ";"The script is invoked. 
 # cat /tmp/walatest.log
 yourstring ";;RedHatEnterpriseLinux7/RHEL7-47367
1195;RHEL7-47426;[virtlogd]Check the qemu log when save&restore guest.;Check qemu log when save&restore guest.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Set virtlogd as the log handler:
 
 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.
 
 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 
 
 (Re)start libvirtd:
 # systemctl restart libvirtd
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47426
1195;;;;;;;;;2;"Start a guest:
 # virsh start test1";​​;;RedHatEnterpriseLinux7/RHEL7-47426
1195;;;;;;;;;3;"Track the qemu log:
 # tailf /var/log/libvirt/qemu/test1.log";​​;;RedHatEnterpriseLinux7/RHEL7-47426
1195;;;;;;;;;4;"Save a running domain and check the qemu log:
 1) # virsh save test1 /tmp/test1.save
 2) Check the output of  tailf 
​​";"1) Save successfully.
 2) Domain shutdown log is recorded correctly. 
 
 Output: 
 2017-04-16 10:06:59.391+0000: shutting down, reason=saved
 2017-04-16T10:06:59.399113Z qemu-kvm: terminating on signal 15 from pid 25698 (<unknown process>)";;RedHatEnterpriseLinux7/RHEL7-47426
1195;;;;;;;;;5;"Restore the domain and check the qemu log:
 1) # virsh restore /tmp/test1.save
 2) Check the output of  tailf
​​";"1) Restore successfully.
 2) Domain start log is recorded correctly.
 
 Output:
 2017-04-16 10:07:36.834+0000: starting up libvirt version: 3.2.0, package: 2.virtcov.el7 (Red Hat, Inc. <http://bugzilla.redhat.com/bugzilla>, 2017-04-10-10:58:42, x86-038.build.eng.bos.redhat.com), qemu version: 2.8.0(qemu-kvm-rhev-2.8.0-6.el7), hostname: intel-5205-32-1.englab.nay.redhat.com
 LC_ALL=C PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin TZ=UTC+2 QEMU_AUDIO_DRV=spice /usr/libexec/qemu-kvm -name guest=vm2,debug-threads=on -S -object secret,id=masterKey0,format=raw,file=/var/lib/libvirt/qemu/domain-2-vm2/master-key.aes -machine pc-i440fx-rhel7.4.0,accel=kvm,usb=off,dump-guest-core=off -cpu Penryn,+vme,+x2apic,+hypervisor -m 1000 -realtime mlock=off -smp 2,maxcpus=4,sockets=4,cores=1,threads=1 -uuid 3a22ed9a-8901-41ed-9cde-6e7f563a7a4c -no-user-config -nodefaults -chardev socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-2-vm2/monitor.sock,server,nowait -mon chardev=charmonitor,id=monitor,mode=control -rtc base=localtime -no-shutdown -global PIIX4_PM.disable_s3=0 -global PIIX4_PM.disable_s4=0 -boot strict=on -device piix3-usb-uhci,id=usb,bus=pci.0,addr=0x1.0x2 -device ich9-usb-ehci1,id=usb1,bus=pci.0,addr=0x9.0x7 -device ich9-usb-uhci1,masterbus=usb1.0,firstport=0,bus=pci.0,multifunction=on,addr=0x9 -device ich9-usb-uhci2,masterbus=usb1.0,firstport=2,bus=pci.0,addr=0x9.0x1 -device ich9-usb-uhci3,masterbus=usb1.0,firstport=4,bus=pci.0,addr=0x9.0x2 -device virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x5 -drive file=/var/lib/libvirt/images/RHEL-6.8-20160414.0.qcow2,format=qcow2,if=none,id=drive-virtio-disk0,cache=none -device virtio-blk-pci,scsi=off,bus=pci.0,addr=0x7,drive=drive-virtio-disk0,id=virtio-disk0,bootindex=1 -netdev tap,fd=27,id=hostnet0 -device rtl8139,netdev=hostnet0,id=net0,mac=52:54:00:70:0c:b6,bus=pci.0,addr=0x3 -chardev pty,id=charserial0 -device isa-serial,chardev=charserial0,id=serial0 -chardev spicevmc,id=charchannel0,name=vdagent -device virtserialport,bus=virtio-serial0.0,nr=2,chardev=charchannel0,id=channel0,name=com.redhat.spice.0 -chardev socket,id=charchannel1,path=/var/lib/libvirt/qemu/channel/target/domain-2-vm2/org.qemu.guest_agent.0,server,nowait -device virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel1,id=channel1,name=org.qemu.guest_agent.0 -device usb-tablet,id=input0,bus=usb.0,port=1 -device virtio-tablet-pci,id=input1,bus=pci.0,addr=0xa -spice unix,addr=/var/lib/libvirt/qemu/domain-2-vm2/spice.sock,disable-ticketing,seamless-migration=on -device qxl-vga,id=video0,ram_size=67108864,vram_size=16777216,vram64_size_mb=0,vgamem_mb=16,max_outputs=3,bus=pci.0,addr=0xb -device qxl,id=video1,ram_size=67108864,vram_size=16777216,vram64_size_mb=0,vgamem_mb=16,max_outputs=1,bus=pci.0,addr=0x2 -device qxl,id=video2,ram_size=67108864,vram_size=16777216,vram64_size_mb=0,vgamem_mb=16,max_outputs=2,bus=pci.0,addr=0xc -device intel-hda,id=sound0,bus=pci.0,addr=0x4 -device hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -device i6300esb,id=watchdog0,bus=pci.0,addr=0x6 -watchdog-action pause -incoming defer -device virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x8 -msg timestamp=on
 char device redirected to /dev/pts/2 (label charserial0)
​​";;RedHatEnterpriseLinux7/RHEL7-47426
1196;RHEL7-47434;Check memory leak of virtlogd;"Verify that no memery leaks from virtlogd
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 1. # valgrind --leak-check=full virtlogd
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47434
1196;;;;;;;;;2;"2. # virsh start $guest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47434
1196;;;;;;;;;3;"3. # virsh destroy $guest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47434
1196;;;;;;;;;4;"4. Terminate valgrind by Ctrl+C
​​";"No memory leak 
​​";;RedHatEnterpriseLinux7/RHEL7-47434
1197;RHEL7-47438;Test a network with special characters(html) in xml;"Bug 1197580 - libvirt should escape possible invalid characters.
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Scenario 1: HTML characters in network XML
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-47438
1197;;;;;;;;;2;"1)Define a network with the following settings:
 # cat vepa-network.xml
 <network>
 ...
   <dns>
     <txt name=""example&quot;"" value=""example value&quot;"" />
     <srv service='name' protocol='tcp' domain='test-domain-name&quot;' target='.&quot;' port='1024' priority='10' weight='10'/>
     <host ip='192.168.122.2'>
       <hostname>myh&quot;ost</hostname>
       <hostname>myh&quot;ostalias</hostname>
 </host>
 </dns>
 ...
 </network>
 
 # virsh net-define vepa-network.xml 
 Network vepa-net defined from vepa-network.xml";"
​​";;RedHatEnterpriseLinux7/RHEL7-47438
1197;;;;;;;;;3;"2)Dumpxml,  the special characters are escaped correctly:
 # virsh net-dumpxml vepa-net
 ...
     <txt name='example&quot;' value='example value&quot;'/>
     <srv service='name' protocol='tcp' domain='test-domain-name&quot;' target='.&quot;' port='1024' priority='10' weight='10'/>
       <hostname>myh&quot;ost</hostname>
       <hostname>myh&quot;ostalias</hostname>
 ...";"
​​";;RedHatEnterpriseLinux7/RHEL7-47438
1197;;;;;;;;;4;"3)Try to edit the network xml, edit succeed:
 # virsh net-edit vepa-net
 Network vepa-net XML configuration edited.";"
​​";;RedHatEnterpriseLinux7/RHEL7-47438
1198;RHEL7-47439;[Migration][--offline][--persistent] Migrate vm definition;Bug 1265049 - Offline migration failed with memory device when guest is shutoff.;Fangge Jin (fjin);High;Positive;Automated;;1; Define a guest on source host;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47439
1198;;;;;;;;;2;Scenario 1: Do offline migration when guest is shutoff;​​;;RedHatEnterpriseLinux7/RHEL7-47439
1198;;;;;;;;;3;"Don't start guest, do offline migration: 
* # virsh migrate test4 qemu+ssh://10.66.4.226/system --offline --persistent
";"Migration succeed
​​";;RedHatEnterpriseLinux7/RHEL7-47439
1198;;;;;;;;;4;" On target host, check guest:
 
* # virsh list --all
"; Domain is shutoff on target;;RedHatEnterpriseLinux7/RHEL7-47439
1198;;;;;;;;;5;"Compare the domain xml on source and target:
 On target host:
 
* # virsh dumpxml $guest (--inactive)
On source host:
 
* # virsh dumpxml $guest (--inactive)
";Domain xml on target host is same as the xml on source host.;;RedHatEnterpriseLinux7/RHEL7-47439
1198;;;;;;;;;6;Scenario 2: Do offline migration when guest is running;​​;;RedHatEnterpriseLinux7/RHEL7-47439
1198;;;;;;;;;7;" Clear env:
 
* On target, undefine guest:
  * # virsh undefine $guest
";​​;;RedHatEnterpriseLinux7/RHEL7-47439
1198;;;;;;;;;8;"On source host, start guest:
 
* # virsh start $guest
";​​;;RedHatEnterpriseLinux7/RHEL7-47439
1198;;;;;;;;;9;"Do offline migration:
 
* # virsh migrate test4 qemu+ssh://10.66.4.226/system --offline --persistent
";​​;;RedHatEnterpriseLinux7/RHEL7-47439
1198;;;;;;;;;10;" On target host, check guest:
 
* # virsh list --all
"; Domain is shutoff on target;;RedHatEnterpriseLinux7/RHEL7-47439
1198;;;;;;;;;11;"Compare the domain xml on source and target:
 On target host:
 
* # virsh dumpxml $guest (--inactive)
On source host:
 
* # virsh dumpxml $guest --inactive
";Domain xml on target host is same as the inactive xml on source host.;;RedHatEnterpriseLinux7/RHEL7-47439
1199;RHEL7-47440;[vnc&spice] [ipv6] Start a guest with graphic listening on ipv6 wildcard;"Verify guest can start and be connected successfully when graphic listening to ipv6 wildcard in guest xml
";Fangge Jin (fjin);Critical;Positive;Automated;;1;"Edit or define a guest with such setting:
 1) set graphic listen address to ipv6 wildcard(0::)";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47440
1199;;;;;;;;;2;# virsh start rhel;​​;;RedHatEnterpriseLinux7/RHEL7-47440
1199;;;;;;;;;3;"# ps aux|grep qemu
​​";"For spice, the qemu command line includes ""addr=0::"" :
 
 -spice port=5905,addr=0::,...
 
 For vnc, the qemu command line includes:
 
 -vnc [0::]:5";;RedHatEnterpriseLinux7/RHEL7-47440
1199;;;;;;;;;4;"# netstat -tunap | grep 5905
​​";"The protocal is tcp6.
 The ""Local Address"" is :::5905.
 
 Output:
 
 Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    
 tcp6   0           0            :::5905                      :::*                               LISTEN      10470/qemu-kvm      
​​";;RedHatEnterpriseLinux7/RHEL7-47440
1199;;;;;;;;;5;"On client host, connect guest by ipv4 address:
 # remote-viewer vnc://10.66.5.57:5905";"Connect successfully
​​";;RedHatEnterpriseLinux7/RHEL7-47440
1199;;;;;;;;;6;"On client host, connect guest by ipv6 address:
 # remote-viewer protocolnc://[20f8::2]:5905
​​";Connect successfully;;RedHatEnterpriseLinux7/RHEL7-47440
1200;RHEL7-47488;[negative] No machine type in domain xml;"Bug 1267256 - do not crash if a machine config in /etc/libvirt is missing a machine type - FIXED
 Bug 1043572 - don't perform arch/os/hvtype validation when reading configs from disk
 Bug 971544 - unknown os type hvm
";Fangge Jin (fjin);High;Negative;Not Automated;;1; Install qemu-kvm-rhev;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47488
1200;;;;;;;;;2;Scenario 1: define a qemu guest from a xml without machine type;​​;;RedHatEnterpriseLinux7/RHEL7-47488
1200;;;;;;;;;3;"# cat /tmp/rhel7.2-1030.xml
 <domain type='kvm'>
   <name>rhel7.2-1030</name>
 ...
   <os>
     <type arch='x86_64'>hvm</type>
 ...
   <devices>
     <emulator>/usr/libexec/qemu-kvm</emulator>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47488
1200;;;;;;;;;4;# virsh define /tmp/rhel7.2-1030.xml;​​;;RedHatEnterpriseLinux7/RHEL7-47488
1200;;;;;;;;;5;"# virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  -     rhel7.2-1030                   shut off
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47488
1200;;;;;;;;;6;"# virsh dumpxml rhel7.2-1030
  <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.2.0'>hvm</type> ===> machine type is added automatically";​​;;RedHatEnterpriseLinux7/RHEL7-47488
1200;;;;;;;;;7;"Scenario 2: libvirtd load qemu domain xml that doesn't include machine type from disk on daemon startup
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47488
1200;;;;;;;;;8;"0. Prepare a guest xml in directory /etc/libvirt/qemu/ :
 #  cat /etc/libvirt/qemu/rhel7.2-1030.xml 
 ..
 <domain type='kvm'>
   <name>rhel7.2-1030</name>
 ...
   <os>
     <type arch='x86_64'>hvm</type> ====> without machine type
 ...
   <devices>
     <emulator>/usr/libexec/qemu-kvm</emulator>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47488
1200;;;;;;;;;9;2. Restart libvirtd;​​;;RedHatEnterpriseLinux7/RHEL7-47488
1200;;;;;;;;;10;"3. # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
 (domain rhel7.2-1030 is not listed)
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47488
1200;;;;;;;;;11;"4. Check libvirtd.log:
 2016-04-13 08:41:23.039+0000: 9959: error : qemuDomainDefPostParse:1431 : internal error: missing machine type";​​;;RedHatEnterpriseLinux7/RHEL7-47488
1200;;;;;;;;;12;"Scenario 3: list qemu domain when qemu package is not installed.
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47488
1200;;;;;;;;;13;"Define qemu domain, then uninstall qemu-kvm-rhev, then restart libvirtd, then virsh list --all. Expected qemu domain can still be listed.
​​";Bug 1043572 - don't perform arch/os/hvtype validation when reading configs from disk;;RedHatEnterpriseLinux7/RHEL7-47488
1201;RHEL7-47526;[Video devices] [QXL] [vram64] Start a guest with qxl vram64 set to an power-of-2 value;"Bug 1260749 - RFE: support QXL vram64 parameter
 ";Yan Fu (yafu);High;Positive;Automated;;1;"Edit or define a guest with such setting:
 1) with qxl video
 2) set vram64 set to an power-of-2 value for qxl video.";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47526
1201;;;;;;;;;2;"Check the vram64 setting in the inactive xml :
   #virsh dumpxml rhel7.2 | grep -A5 video";"vram64 value is same as the configured value.
 
 Output:
 ...
 <video>
    <model type='qxl' ram='65536' vram='65536' vram64='131072' vgamem='16384' heads='1' primary='yes'/>
    <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/> 
 </video>";;RedHatEnterpriseLinux7/RHEL7-47526
1201;;;;;;;;;3;"Start the guest:
   #virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47526
1201;;;;;;;;;4;"Check the vram64 setting in the live xml :
   #virsh dumpxml rhel7.2 | grep -A5 video
​​";"vram64 value is same as the configured value.
 
 Output:
 ...
 <video>
    <model type='qxl' ram='65536' vram='65536' vram64='131072' vgamem='16384' heads='1' primary='yes'/>     
    <alias name='video0'/>
    <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/> 
 </video>";;RedHatEnterpriseLinux7/RHEL7-47526
1201;;;;;;;;;5;"Check the qemu cmd :
 #virsh dumpxml rhel7.2 | grep -i vram64
​​";"The qemu command line includes vram64 setting: 
 
 /usr/libexec/qemu-kvm -name rhel7.2, ... vram64_size_mb=128, ...
 
 Note:
 vram64 in guest xml is in KB, vram64 in qemu command line is in MB
​​";;RedHatEnterpriseLinux7/RHEL7-47526
1201;;;;;;;;;6;"The following steps are optional:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47526
1201;;;;;;;;;7;"In guest:
   #dmesg | grep qxl
​​";"There is vram64 memory bar in the guest and the setting is the same as qemu cmds
 
 Output:
 [    1.628820] [drm] qxl: 16M of VRAM memory size   ==>vgamem value 
 [    1.628821] [drm] qxl: 63M of IO pages memory ready (VRAM domain) ==> ram value
 [    1.628821] [drm] qxl: 128M of Surface memory size       ===> the maximum of vram value and vram64
 ..
​​";;RedHatEnterpriseLinux7/RHEL7-47526
1201;;;;;;;;;8;"In guest, check the max screen resolution of the guest
​​";"Both windows and rhel guest have 4K resolution.
​​";;RedHatEnterpriseLinux7/RHEL7-47526
1202;RHEL7-47527;Test the support of QXL vram64 parameter;;Yan Fu (yafu);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-47527
1203;RHEL7-47528;[Hyper-V][Memory]Run time increase Startup RAM with multiple numa nodes - 2016 Only;https://bugzilla.redhat.com/show_bug.cgi?id=1325967 ;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;"Configure the guest vCPU or Memory to enable multiple NUMA nodes. e.g. set vCPU = 4, and config NUMA topology :
     Maximum mumber of processors: 2
     Maximum amount of memory(MB): 2048
​​";"NUMA Configuration  show :
 Processors: 4
 NUMA nodes: 2
 Sockets: 2";Test Case;RedHatEnterpriseLinux7/RHEL7-47528
1203;;;;;;;;;2;Set Startup memory, e.g. as 2048 MB, and make sure Dynamic Memory is disabled and boot the guest.;​​;;RedHatEnterpriseLinux7/RHEL7-47528
1203;;;;;;;;;3;"Increase Startup memory, e.g. to 4096 MB

 For RHEL 6 guest, you need to add a udev rule. 
 $ vi /etc/udev/rules.d/balloon.rules
 SUBSYSTEM==""memory"", ACTION==""add"", ATTR{state}=""online"""; No error occurs;;RedHatEnterpriseLinux7/RHEL7-47528
1203;;;;;;;;;4;"Check guest memory by 
 $ free -m";Total memory is increased to 4096 MB;;RedHatEnterpriseLinux7/RHEL7-47528
1203;;;;;;;;;5;Increase memory again, e.g. to 10000 MB;No error occurs;;RedHatEnterpriseLinux7/RHEL7-47528
1203;;;;;;;;;6;"Check guest memory by 
 $ free -m";Total memory is increased to 1000 MB;;RedHatEnterpriseLinux7/RHEL7-47528
1204;RHEL7-47529;Support for native TLS encryption on migration TCP transport--bug1300769;;Yan Fu (yafu);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-47529
1205;RHEL7-47530;[Hyper-V][Memory]Run time decrease Startup RAM with multiple numa nodes - 2016 Only;Disable Dynamic Memory, and decrease memory Startup RAM of running guest with multiple numa nodes, Hyper-V 2016 starts to support this;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;"Configure the guest vCPU or Memory to enable multiple NUMA nodes. e.g. set vCPU = 4, and config NUMA topology :
     Maximum mumber of processors: 2
     Maximum amount of memory(MB): 2048
​​";"NUMA Configuration  show :
 Processors: 4
 NUMA nodes: 2
 Sockets: 2";Test Case;RedHatEnterpriseLinux7/RHEL7-47530
1205;;;;;;;;;2;Set Startup memory, e.g. as 8192 MB, and make sure Dynamic Memory is disabled and boot the guest.;​​;;RedHatEnterpriseLinux7/RHEL7-47530
1205;;;;;;;;;3;"Decrease Startup memory, e.g. to 4096 MB

 For RHEL 6 guest, you need to add a udev rule. 
 $ vi /etc/udev/rules.d/balloon.rules
 SUBSYSTEM==""memory"", ACTION==""add"", ATTR{state}=""online""";No error occurs;;RedHatEnterpriseLinux7/RHEL7-47530
1205;;;;;;;;;4;"Check guest memory by 
 $ free -m";Decreased memory is reflected in the 'used' memory. For example, memory is decreased 4096 MB in Hyper-V Manager, then 4096 MB more memory is used in the guest.;;RedHatEnterpriseLinux7/RHEL7-47530
1205;;;;;;;;;5;Decrease memory again, e.g. to 2048 MB;"Check guest memory is increased to 10000 MB by 
 $ free -m";;RedHatEnterpriseLinux7/RHEL7-47530
1205;;;;;;;;;6;"Check guest memory by 
 $ free -m";Decreased memory is reflected in the 'used' memory. For example, memory is decreased 2048 MB in Hyper-V Manager, then 2048 MB more memory is used in the guest.;;RedHatEnterpriseLinux7/RHEL7-47530
1206;RHEL7-47556;"Check the element ""PCI_HEADER_TYPE"" in the nodedev-dumpxml --bug 1317531";;Jingjing Shao (jishao);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-47556
1207;RHEL7-47565;[net-update] add/delete/modify ip-dhcp-host section when the network with both ipv4 and ipv6 defined or without ip-range - BZ 1184736 1182486 868389;1)libvirt will check the ip family with excute net-update with ip-dhcp-host / ip-dhcp-range 2) --parent-index ;Yalan Zhang (yalzhang);Critical;Positive;Automated;;1;"Scenario 1: add <host> to network with both ipv4 and ipv6 address family (BZ 1184736 1182486)
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47565
1207;;;;;;;;;2;"define and start a network with both ipv6 and ipv4 sections
 # virsh net-dumpxml default
 <network>
   <name>default</name>
   <uuid>ac3350be-5fa1-405c-b19f-cf0ef7c81263</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:15:e9:3a'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
     </dhcp>
   </ip>
   <ip family='ipv6' address='2001:db8:ca2:2::1' prefix='64'>
     <dhcp>
       <range start='2001:db8:ca2:2::100' end='2001:db8:ca2:2::1ff'/>
     </dhcp>
   </ip>
 </network>
 
 # ps aux | grep dnsmasq | grep -v grep
 nobody   31572  0.0  0.0  15604   936 ?        S    13:15   0:00 /usr/sbin/dnsmasq --conf-file=/var/lib/libvirt/dnsmasq/default.conf --leasefile-ro --dhcp-script=/usr/libexec/libvirt_leaseshelper
 root     31573  0.0  0.0  15576   192 ?        S    13:15   0:00 /usr/sbin/dnsmasq --conf-file=/var/lib/libvirt/dnsmasq/default.conf --leasefile-ro --dhcp-script=/usr/libexec/libvirt_leaseshelper
 
 # cat ipv6.txt
 <host id='00:04:58:fd:e4:15:1b:09:4c:0e:09:af:e4:d3:8c:b8:ca:1e' name=""redhatipv6.redhat.com"" ip='2001:db8:ca2:2::119'/>
 
 # cat ipv4.txt
 <host mac=""00:16:3e:77:e2:ed"" name=""foo.example.com"" ip=""192.168.122.10"" />
​​";​​;;RedHatEnterpriseLinux7/RHEL7-47565
1207;;;;;;;;;3;"1. # virsh net-update default add-first ip-dhcp-host ipv6.txt --parent-index 0
 error: Failed to update network default
 error: Requested operation is not valid: the address family of a host entry IP must match the address family of the dhcp element's parent
​​";"scenario 1:
 1. as ipv4 section is the first ip section in the network, add ipv6 static host with index 0 will fail
​​";;RedHatEnterpriseLinux7/RHEL7-47565
1207;;;;;;;;;4;"2. # virsh net-update default add-first ip-dhcp-host ipv6.txt --parent-index 1
 Updated network default live state
 # virsh net-dumpxml default
 ....
  <ip family='ipv6' address='2001:db8:ca2:2::1' prefix='64'>
     <dhcp>
       <range start='2001:db8:ca2:2::100' end='2001:db8:ca2:2::1ff'/>
       <host id='00:04:58:fd:e4:15:1b:09:4c:0e:09:af:e4:d3:8c:b8:ca:1e' name='redhatipv6.redhat.com' ip='2001:db8:ca2:2::119'/>
     </dhcp>
   </ip>
 ....
 # cat /var/lib/libvirt/dnsmasq/default.hostsfile
 id:00:04:58:fd:e4:15:1b:09:4c:0e:09:af:e4:d3:8c:b8:ca:1e,redhatipv6.redhat.com,[2001:db8:ca2:2::119]
​​";2. check the static host add into the ipv6 section, the hostsfile includes the record;;RedHatEnterpriseLinux7/RHEL7-47565
1207;;;;;;;;;5;"3. # virsh net-update default add-first ip-dhcp-host ipv4.txt --parent-index 1
 
​​";"error: Failed to update network default
 error: XML error: Invalid to specify MAC address '00:16:3e:77:e2:ed' in network 'default' IPv6 static host definition
 
 
 3. fail to add ipv4 with index 1
​​";;RedHatEnterpriseLinux7/RHEL7-47565
1207;;;;;;;;;6;"4. # virsh net-update default add-first ip-dhcp-host ipv4.txt
 Updated network default live state
 
 #  cat /var/lib/libvirt/dnsmasq/default.hostsfile
 00:16:3e:77:e2:ed,192.168.122.10,foo.example.com
 ....
 start a guest with ip=00:16:3e:77:e2:ed, check the ip and hostname
 guest# dhclinet;ifconfig
 guest# hostname
​​";"4. ignore the index, the first will be choose.
 guest ip=192.168.122.10, hostname=foo
 the record will add to hostsfile
​​";;RedHatEnterpriseLinux7/RHEL7-47565
1207;;;;;;;;;7;"5. # virsh net-update default add-first ip-dhcp-host ""<host mac='00:16:3e:77:e2:10' name='bob.example.com' ip='192.168.122.200' />"" --parent-index 0
 Updated network default live state
 #  cat /var/lib/libvirt/dnsmasq/default.hostsfile
 00:16:3e:77:e2:10,192.168.122.200,bob.example.com
 ...
​​";5. try --parent-index 0;;RedHatEnterpriseLinux7/RHEL7-47565
1207;;;;;;;;;8;"6. start a guest use default with mac=00:16:3e:77:e2:10, check the ip and hostname.
 guest# ifconfig
 guest# hostname
​​";"6. guest ip= 192.168.122.200, hostname= bob
​​";;RedHatEnterpriseLinux7/RHEL7-47565
1207;;;;;;;;;9;for ip-dhcp-range;​​;;RedHatEnterpriseLinux7/RHEL7-47565
1207;;;;;;;;;10;"1. define and start a network
 # virsh net-dumpxml default
 <network>
   <name>default</name>
   <uuid>ac3350be-5fa1-405c-b19f-cf0ef7c81263</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:15:e9:3a'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
     </dhcp>
   </ip>
   <ip family='ipv6' address='2001:db8:ca2:2::1' prefix='64'>
     <dhcp>
       <range start='2001:db8:ca2:2::100' end='2001:db8:ca2:2::1ff'/>
     </dhcp>
   </ip>
 </network>
​​";"
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-47565
1207;;;;;;;;;11;"2. # virsh net-update default delete ip-dhcp-range  ""<range start='2001:db8:ca2:2::100' end='2001:db8:ca2:2::1ff'/>""
 
 (by default without --parent-index, ip-dhcp-range will match the first range when delete)
 
 
 
​​";"error: Failed to update network default
 error: internal error: mismatch of address family in range 2001:db8:ca2:2::100 - 2001:db8:ca2:2::1ff for network 192.168.122.1";;RedHatEnterpriseLinux7/RHEL7-47565
1207;;;;;;;;;12;"#  virsh net-update default delete ip-dhcp-range  ""<range start='2001:db8:ca2:2::100' end='2001:db8:ca2:2::1ff'/>"" --parent-index 1";Updated network default live state;;RedHatEnterpriseLinux7/RHEL7-47565
1207;;;;;;;;;13;"3. # virsh net-update default add ip-dhcp-range  ""<range start='2001:db8:ca2:2::200' end='2001:db8:ca2:2::2ff'/>""  --parent-index 1
​​";Updated network default live state;;RedHatEnterpriseLinux7/RHEL7-47565
1207;;;;;;;;;14;"4. # virsh net-update default add ip-dhcp-range  ""<range start='192.168.122.100' end='192.168.122.254'/>""
​​";Updated network default live state;;RedHatEnterpriseLinux7/RHEL7-47565
1207;;;;;;;;;15;"5. # virsh net-update default add ip-dhcp-range  ""<range start='192.168.122.100' end='192.168.122.200'/>"" --parent-index 1
 
​​";"error: Failed to update network default
 error: internal error: mismatch of address family in range 192.168.122.100 - 192.168.122.200 for network 2001:db8:ca2:2::1";;RedHatEnterpriseLinux7/RHEL7-47565
1208;RHEL7-47567;[net-update] add/delete forward-interface section with net-update for macvtap network - Bug 1332758;netupdate for forward-interface section: add an interface, delete an interface when the network is active or inactive should be succeed and no impact for other interfaces in the network;Yalan Zhang (yalzhang);Critical;Positive;Automated;;1;"scenario 1: add-first add-last
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;2;"add
 suppose the host has 2 physical interface, one is ens1f0, and the other is enp1s0, you can get the interface name by # ifconfig or # ip l

 define and start a macvtap network with 1 interface ens1f0 like this:

 # virsh net-dumpxml direct-macvtap
 <network>
   <name>direct-macvtap</name>
   <uuid>451e3b73-ec88-4bfd-b1ff-17ff9244a365</uuid>
   <forward dev='ens1f0' mode='bridge'>
     <interface dev='ens1f0'/>
   </forward>
 </network>

 # virsh net-start direct-macvtap
 Network direct-macvtap started
";​​;;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;3;"1. add an interface
 #  virsh net-update direct-macvtap add forward-interface ""<interface dev='enp1s0'/>""
 Updated network direct-macvtap live state
";" 
";;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;4;"2. add and add-last will append the dev; 
 check by:
 # virsh net-dumpxml direct-macvtap";"<network>
   <name>direct-macvtap</name>
   <uuid>451e3b73-ec88-4bfd-b1ff-17ff9244a365</uuid>
   <forward dev='ens1f0' mode='bridge'>
     <interface dev='ens1f0'/>
     <interface dev='enp1s0'/>
   </forward>
 </network>";;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;5;"3. hotplug 4 interfaces connected to this network to a vm
 # virsh start rhel7.2
 Domain rhel7.2 started

 # virsh attach-interface rhel7.4 network direct-macvtap   
 # virsh attach-interface rhel7.4 network direct-macvtap
 # virsh attach-interface rhel7.4 network direct-macvtap
 # virsh attach-interface rhel7.4 network direct-macvtap
";"2.



";;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;6;"4. after hotplug, check the connections of the network and the interface.
 # virsh net-dumpxml direct-macvtap";"<network connections='4'>
   <name>direct-macvtap</name>
   <uuid>451e3b73-ec88-4bfd-b1ff-17ff9244a365</uuid>
   <forward dev='ens1f0' mode='bridge'>
     <interface dev='ens1f0' connections='2'/>
     <interface dev='enp1s0' connections='2'/>
   </forward>
 </network>";;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;7;"add-last

 define and start a macvtap network with 1 interface ens1f0 like this:

 # virsh net-dumpxml direct-macvtap
 <network>
   <name>direct-macvtap</name>
   <uuid>451e3b73-ec88-4bfd-b1ff-17ff9244a365</uuid>
   <forward dev='ens1f0' mode='bridge'>
     <interface dev='ens1f0'/>
   </forward>
 </network>

 # virsh net-start direct-macvtap
 Network direct-macvtap started
"; ;;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;8;"1. add an interface
 #  virsh net-update direct-macvtap add-last forward-interface ""<interface dev='enp1s0'/>""
";"Updated network direct-macvtap live state
";;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;9;"2. add and add-last will append the dev; 
 check by:
 # virsh net-dumpxml direct-macvtap";"<network>
   <name>direct-macvtap</name>
   <uuid>451e3b73-ec88-4bfd-b1ff-17ff9244a365</uuid>
   <forward dev='ens1f0' mode='bridge'>
     <interface dev='ens1f0'/>
     <interface dev='enp1s0'/>
   </forward>
 </network>";;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;10;"add-first

 define and start a macvtap network with 1 interface ens1f0 like this:

 # virsh net-dumpxml direct-macvtap
 <network>
   <name>direct-macvtap</name>
   <uuid>451e3b73-ec88-4bfd-b1ff-17ff9244a365</uuid>
   <forward dev='ens1f0' mode='bridge'>
     <interface dev='ens1f0'/>
   </forward>
 </network>
 # virsh net-start direct-macvtap
 Network direct-macvtap started
"; ;;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;11;"1. add an interface
 #  virsh net-update direct-macvtap add-first forward-interface ""<interface dev='enp1s0'/>""
 Updated network direct-macvtap live state
"; ;;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;12;"2. add-first will insert the dev.
 check by:
 # virsh net-dumpxml direct-macvtap";"<network>
   <name>direct-macvtap</name>
   <uuid>451e3b73-ec88-4bfd-b1ff-17ff9244a365</uuid>
   <forward dev='ens1f0' mode='bridge'>
   <interface dev='enp1s0'/>  
 <interface dev='ens1f0'/>
   </forward>
 </network>";;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;13;"3. add a interface already in the network dev pool
 # virsh net-update direct-macvtap add-first forward-interface ""<interface dev='ens1f0'/>""
";"error: Failed to update network direct-macvtap
 error: Requested operation is not valid: there is an existing interface entry in network 'direct-macvtap' that matches ""<interface dev='ens1f0'>""

 (it will fail if add a interface already in the interface pool)
";;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;14;"Scenario 2: delete an interface (need a host with at least 2 physical interfaces)
";​​;;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;15;"1. delete an interface  once the network is idle  (the ens1f0 and enp1s0 is the name of the physical interface on the host, you can get it by ""# ifconfig -a"", or ""# ip l show"")

 # virsh net-start direct-macvtap

 # virsh net-dumpxml direct-macvtap
 <network>
   <name>direct-macvtap</name>
   <uuid>451e3b73-ec88-4bfd-b1ff-17ff9244a365</uuid>
   <forward dev='ens1f0' mode='bridge'>
     <interface dev='ens1f0'/>
     <interface dev='enp1s0'/>
   </forward>
 </network>
";" 
";;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;16;"2. # virsh net-update direct-macvtap delete forward-interface ""<interface dev='enp1s0'/>""";Updated network direct-macvtap live state;;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;17;"3. after delete, 
 # virsh net-dumpxml direct-macvtap";"<network>
   <name>direct-macvtap</name>
   <uuid>451e3b73-ec88-4bfd-b1ff-17ff9244a365</uuid>
   <forward dev='ens1f0' mode='bridge'>
     <interface dev='ens1f0'/>   <====the interface enp1s0 is gone
   </forward>
 </network>";;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;18;"Scenario 3: delete an interface when the network is in use
"; ;;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;19;"1 prepare a network like this
 # virsh net-dumpxml direct-macvtap
 <network>
   <name>direct-macvtap</name>
   <uuid>451e3b73-ec88-4bfd-b1ff-17ff9244a365</uuid>
   <forward dev='ens1f0' mode='bridge'>
     <interface dev='ens1f0'/>
     <interface dev='enp1s0'/>
   </forward>
 </network>";​​;;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;20;"2. start a guest with below content: (or you can hotplug interfaces scenario1 step 2)
 <interface type=network>
 <source network='direct-macvtap'/>
 </interface>
 <interface type=network>
 <source network='direct-macvtap'/>
 </interface>
 <interface type=network>
 <source network='direct-macvtap'/>
 </interface>
 # virsh start rhel7";" 
";;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;21;3. after the guest started, check the connections, should be total 3, and the first interface is 2, the last is 1;"# virsh net-dumpxml direct-macvtap
 <network connections='3'>
   <name>direct-macvtap</name>
   <uuid>5940b358-d234-47f8-82e8-85d520800fb5</uuid>
   <forward dev='ens1f0' mode='bridge'>
     <interface dev='ens1f0' connections='2'/>
     <interface dev='enp1s0' connections='1'/>
   </forward>
 </network>";;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;22;"4. delete one interface while the network is in use
 # virsh net-update direct-macvtap delete forward-interface ""<interface dev='enp1s0'/>""
";"Updated network direct-macvtap live state


";;RedHatEnterpriseLinux7/RHEL7-47567
1208;;;;;;;;;23;"5. check the network and its connections
 # virsh net-dumpxml direct-macvtap";"<network connections=""2"">   <===the  connection change to ""2""
   <name>direct-macvtap</name>
   <uuid>5940b358-d234-47f8-82e8-85d520800fb5</uuid>
   <forward dev='ens1f0' mode='bridge'>
     <interface dev='ens1f0' connections='2'/>   <== ""<interface dev='enp1s0' connections='1'/>"" gone
   </forward>
 </network>
 
 (currently in libvirt 3.2.0-14, the bug 1332758 is not fixed, all connection will gone.)";;RedHatEnterpriseLinux7/RHEL7-47567
1209;RHEL7-47589;[blkdeviotune] [negative] Invalid arguments value;Bug 974010 - It should report error while the bps or iops values are not supported by guest;Fangge Jin (fjin);Medium;Negative;Automated;;1;" 16.1. prepare one running guest.
 
 16.2. Set iotune total_bytes_sec
 # virsh blkdeviotune kvm-rhel6.3-x86_64-qcow2-virtio vda --total-bytes-sec 12212221112000930000
 error: Unable to change block I/O throttle
 error: numerical overflow: block I/O throttle limit value must be less than 9223372036854775807
 
 16.3. Set iotune total_bytes_sec with option --config
 #virsh blkdeviotune kvm-rhel6.3-x86_64-qcow2-virtio hda --total-bytes-sec 12212221112000930000 --config
 error: Unable to change block I/O throttle
 error: numerical overflow: block I/O throttle limit value must be less than 9223372036854775807
 
 16.4. check in the inactive dumpxml
 # virsh dumpxml kvm-rhel6.3-x86_64-qcow2-virtio --inactive |grep -A 5 disk
 <disk type='file' device='disk'>
 <driver name='qemu' type='qcow2' cache='none'/>
 <source file='/var/lib/libvirt/images/kvm-rhel6.3-x86_64-qcow2.img'/>
 <target dev='hda' bus='virtio'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>
 </disk>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-47589
1210;RHEL7-48255;[perf]  - Get or set the current perf events for a guest.;"need to test these events: cmt, mbml, mbmt and cover the following matrix:
get perf events | without option | with --live | with --config | with --current
When guest is shutoff: | P1 | P1 error: Unable to get perf events error: Requested operation is not valid: domain is not running | P2 | P2
When guest is running: | P1 | P2 | P1 | P2
set perf events | without option | with --live | with --config | with --current
when guest is shutoff: | P1 | P2 error: Unable to enable/disable perf events error: Requested operation is not valid: domain is not running | P2 | P2
when guest is running: | P1 | P2 | P1 | P2";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Prepare an inactive guest
 # cat rhel7.2-1030.xml | grep perf
 (nothing output)
 
 # virsh define rhel7.2-1030.xml
 
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  -     rhel7.2-1030                   shut off
 
 # virsh dumpxml rhel7.2-1030|grep perf -a3
 (nothing output)";By default, there is no perf attribute in guest xml.;Test Case;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;2;"1 Get the perf events for an inactive guest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;3;"# virsh perf rhel7.2-1030 
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled
 
 
 # virsh perf rhel7.2-1030 --config
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled
 
 # virsh perf rhel7.2-1030 --current
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled
 
 # virsh perf rhel7.2-1030 --live
 error: Unable to get perf events
 error: Requested operation is not valid: domain is not running
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;4;"2 Get/set the perf events when guest is running
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;5;# virsh start rhel7.2-1030;​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;6;"# virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'";No statistic of cmt event is output.;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;7;2-1 Get the perf events for an active guest;​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;8;"# virsh perf rhel7.2-1030 
 cmt            : disabled 
 mbmt           : disabled
 mbml           : disabled
 
 # virsh perf rhel7.2-1030 --live
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled
 
 # virsh perf rhel7.2-1030 --current
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled
 
 # virsh perf rhel7.2-1030 --config
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;9;"2-2
 enable cmt event without option
";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;10;1) # virsh perf rhel7.2-1030 --enable cmt;​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;11;"2) # virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'
   perf.cmt=147456
​​";"output the values of perf.cmt
​​";;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;12;"3) # virsh perf rhel7.2-1030 
 cmt            : enabled
 mbmt         :disabled
 mbml         :disabled
 
 # virsh perf rhel7.2-1030 --config
 cmt            : disabled
 mbmt         :disabled
 mbml         :disabled";"cmt is enabled for active domain, and still disabled for inactive domain config
​​";;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;13;"4) # virsh dumpxml rhel7.2-1030
   <perf>
     <event name='cmt' enabled='yes'/>
   </perf>
 
 # virsh dumpxml rhel7.2-1030 --inactive
   <perf>
     <event name='cmt' enabled='no'/>
   </perf>";"cmt enabled is yes in active domain xml
 cmt enabled is no in inactive domain xml
​​";;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;14;"2-3 disable cmt event without option
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;15;1) # virsh perf rhel7.2-1030 --disable cmt;​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;16;"2) # virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'";"Don't output the value of perf.cmt
​​";;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;17;"3) Check perf events:
 
 # virsh perf rhel7.2-1030 
 cmt            : disabled
 mbmt         :disabled
 mbml         :disabled
 
 # virsh perf rhel7.2-1030 --config
 cmt            : disabled
 mbmt         :disabled
 mbml         :disabled";"cmt is disabled
​​";;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;18;"4) # virsh dumpxml rhel7.2-1030
   <perf>
     <event name='cmt' enabled='no'/>
   </perf>
 
 # virsh dumpxml rhel7.2-1030 --inactive
   <perf>
     <event name='cmt' enabled='no'/>
   </perf>";"cmt enabled is no in active domain xml
 cmt enabled is no in inactive domain xml";;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;19;"2-4 enable&disable cmt event with --live
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;20;"Redo steps in 2-2 and 2-3 with --live
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;21;"2-5 enable&disable cmt event with --current
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;22;"Redo steps in 2-2 and 2-3 with --current 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;23;"2-6 enable cmt event persistently with --config
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;24;"1) # virsh perf rhel7.2-1030 --enable cmt --config
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;25;"2) # virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;26;"3) Check perf events:
 
 # virsh perf rhel7.2-1030 
 cmt            : disabled
 mbmt         :disabled
 mbml         :disabled
 
 # virsh perf rhel7.2-1030 --config
 cmt            : enabled
 mbmt         :disabled
 mbml         :disabled";"cmt is enabled for inactive domain config, and disabled for active domain
​​";;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;27;"4) # virsh dumpxml rhel7.2-1030
   <perf>
     <event name='cmt' enabled='no'/>
   </perf>
 
 # virsh dumpxml rhel7.2-1030 --inactive
   <perf>
     <event name='cmt' enabled='yes'/>
   </perf>";"cmt enabled is no in active domain xml
 cmt enabled is yes in inactive domain xml";;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;28;"2-7 disable cmt event persistently with --config
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;29;1) # virsh perf rhel7.2-1030 --disable cmt --config;​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;30;"2) # virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;31;"3) Check perf events:
 
 # virsh perf rhel7.2-1030 
 cmt            : disabled
 mbmt         :disabled
 mbml         :disabled
 
 # virsh perf rhel7.2-1030 --config
 cmt            : disabled
 mbmt         :disabled
 mbml         :disabled";"cmt is disabled for inactive domain config, and disabled for active domain
​​";;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;32;"4) # virsh dumpxml rhel7.2-1030
   <perf>
     <event name='cmt' enabled='no'/>
   </perf>
 
 # virsh dumpxml rhel7.2-1030 --inactive
   <perf>
     <event name='cmt' enabled='no'/>
   </perf>";"cmt enabled is no in active domain xml
 cmt enabled is no in inactive domain xml";;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;33;2-10 destroy guest&check perf events;​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;34;# virsh destroy rhel7.2-1030;​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;35;"# virsh perf rhel7.2-1030 
 cmt            : disabled 
 mbmt         :disabled
 mbml         :disabled";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;36;"3 when guest is inactive
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;37;"3-1 enable/disable cmt event persistently without option
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;38;# virsh perf rhel7.2-1030 --enable cmt;​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;39;"# virsh perf rhel7.2-1030 
 cmt            : enabled
 mbmt         :disabled
 mbml         :disabled";"cmt is enabled
​​";;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;40;"# virsh dumpxml rhel7.2-1030
   <perf>
     <event name='cmt' enabled='yes'/>
   </perf>";"cmt enabled is yes
​​";;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;41;# virsh perf rhel7.2-1030 --disable cmt;​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;42;"# virsh perf rhel7.2-1030 
 cmt            : disabled 
 mbmt         :disabled
 mbml         :disabled";cmt is disabled;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;43;"# virsh dumpxml rhel7.2-1030
   <perf>
     <event name='cmt' enabled='no'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;44;"3-2 enable/disable cmt event with --live
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;45;"Check perf events when guest is shutoff:
 # virsh perf rhel7.2-1030 
 cmt            : disabled
 mbmt         :disabled
 mbml         :disabled";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;46;"# virsh perf rhel7.2-1030 --enable cmt --live
 error: Unable to enable/disable perf events
 error: Requested operation is not valid: domain is not running
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;47;"3-3 enable/disable cmt event with --current
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;48;"Redo the steps in scenario 3-1 with --current
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;49;"3-4 enable/disable cmt event with --config
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;50; Redo the steps in scenario 3-1 with --config;​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;51;"4 readonly mode
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;52;"# virsh -r perf rhel7.2-1030
 cmt            : disabled
 mbmt         :disabled
 mbml         :disabled
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;53;"# virsh -r perf rhel7.2-1030 --enable cmt
 error: Unable to enable/disable perf events
 error: operation forbidden: read only access prevents virDomainSetPerfEvents";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1210;;;;;;;;;54;"# virsh -r perf rhel7.2-1030 
 cmt            : disabled
 mbmt         :disabled
 mbml         :disabled";​​;;RedHatEnterpriseLinux7/RHEL7-48255
1211;RHEL7-48256;[domstats][--perf] get domain perf event statistics when perf events are enabled;get domain perf event statistics when perf events are enabled;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1) Prepare a active domain with cmt enabled:
 # virsh list
  Id    Name                           State
 ----------------------------------------------------
  32    rhel7.2-1030                   running
 
 # virsh perf rhel7.2-1030 --enable cmt,mbml,mbmt
 
 # virsh perf rhel7.2-1030
 cmt            : enabled
 mbmt         : enabled
 mbml         : enabled
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-48256
1211;;;;;;;;;2;"2) # virsh domstats rhel7.2-1030
 Domain: 'rhel7.2-1030'
   state.state=1
   state.reason=1
   cpu.time=72697022834
   cpu.user=21320000000
   cpu.system=33240000000
   balloon.current=4096000
   balloon.maximum=4096000
 ...
   perf.cmt=1032192
   perf.mbml=xxxxxxx
   perf.mbmt=xxxxxxx
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48256
1211;;;;;;;;;3;"3) # virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'
   perf.cmt=2777088
   perf.mbml=xxxxxxx
   perf.mbmt=xxxxxxx
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48256
1212;RHEL7-48263;[Migration]Live migration from RHEL7.X to RHEL7.Y, X < Y;Verify cross live migration can worked well.;Fangge Jin (fjin);Critical;Positive;Manual Only;;1;"0. 
 
* On host A, install RHEL7.X OS, and corresponding libvirt version
* On host B, install RHEL7.Y OS, and corresponding libvirt version, X<Y
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-48263
1212;;;;;;;;;2;"1. On host A, define & start a guest .
 
* # virsh start rhel7.2
";​​;;RedHatEnterpriseLinux7/RHEL7-48263
1212;;;;;;;;;3;"2. Migrate guest from host A to host B:
 
* # virsh migrate rhel7.2 qemu+ssh://10.66.6.200/system --live --verbose --p2p
";​​;;RedHatEnterpriseLinux7/RHEL7-48263
1212;;;;;;;;;4;"3. Check that guest works well on host B
 
* e.g. In guest, do disk I/O operations
";​​;;RedHatEnterpriseLinux7/RHEL7-48263
1212;;;;;;;;;5;"4. Migrate back to hostA
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48263
1212;;;;;;;;;6;"5. Check that guest works well on host A
 
* e.g. In guest, do disk I/O operations
";​​;;RedHatEnterpriseLinux7/RHEL7-48263
1213;RHEL7-48332;[perf] [negative] - Invalid arguments;"Bug 1329046 - ""virsh perf $guest --enable '' "" has memory leak.";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"# virsh perf rhel7.2-1030 --enable aaa
 error: Unable to enable/disable perf events
 error: argument unsupported: parameter 'aaa' not supported";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-48332
1213;;;;;;;;;2;"# virsh perf rhel7.2-1030 --enable "" ""
 error: Unable to enable/disable perf events
 error: argument unsupported: parameter ' ' not supported";​​;;RedHatEnterpriseLinux7/RHEL7-48332
1213;;;;;;;;;3;"#  virsh perf rhel7.2-1030 --enable ''
 error: Failed to get option 'enable': Option argument is empty";​​;;RedHatEnterpriseLinux7/RHEL7-48332
1213;;;;;;;;;4;"# virsh perf rhel7.2-1030 --enable
 error: expected syntax: --enable <string>";​​;;RedHatEnterpriseLinux7/RHEL7-48332
1214;RHEL7-48397;[Vlan] Adding Multiple VLANs to a single network interface to support bridge type interface;Adding Multiple VLANs to a single network interface to support bridge type interface;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;On the host;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-48397
1214;;;;;;;;;2;"1. Create 2 vlan interfaces on a single pyhical interface, and 2 bridges connected with them.
 check the config file of interfaces :  eth0.3、eth0.4、net_vlan3、net_vlan4
 
 # cat /etc/sysconfig/network-scripts/ifcfg-eth0
 DEVICE=eth0
 HWADDR=00:9c:02:9b:23:2e
 ONBOOT=yes
 MTU=1500
 NM_CONTROLLED=no
 
 
 # cat ifcfg-eth0.3
 
 
 # cat ifcfg-eth0.4
 
 # cat ifcfg-net_vlan3
 
 
 # cat ifcfg-net_vlan4
 
 
 
​​";"Output:
 
 
 
 DEVICE=eth0.3
 VLAN=yes
 BRIDGE=net_vlan3
 ONBOOT=yes
 MTU=1500
 NM_CONTROLLED=no
 HOTPLUG=no
 
 DEVICE=eth0.4
 VLAN=yes
 BRIDGE=net_vlan4
 ONBOOT=yes
 MTU=1500
 NM_CONTROLLED=no
 HOTPLUG=no
 
 DEVICE=net_vlan3
 TYPE=Bridge
 DELAY=0
 STP=off
 ONBOOT=yes
 MTU=1500
 DEFROUTE=no
 NM_CONTROLLED=no
 HOTPLUG=no
 
 
 DEVICE=net_vlan4
 TYPE=Bridge
 DELAY=0
 STP=off
 ONBOOT=yes
 MTU=1500
 DEFROUTE=no
 NM_CONTROLLED=no
 HOTPLUG=no";;RedHatEnterpriseLinux7/RHEL7-48397
1214;;;;;;;;;3;"2. Restart the network service
 # service network restart";​​;;RedHatEnterpriseLinux7/RHEL7-48397
1214;;;;;;;;;4;"3. Check the interface bridge
 # brctl show
​​";"Output:
 bridge name    bridge id        STP enabled    interfaces    
 net_vlan3        8000.009c029b232e    no        eth0.3
 net_vlan4        8000.009c029b232e    no        eth0.4";;RedHatEnterpriseLinux7/RHEL7-48397
1214;;;;;;;;;5;"4. check the networks is prepare as what we want
 (check the eth0.3, eth0.4 and net_vlan3, net_vlan4 are created and both of them can get dhcp address)
 
 # ifconfig 
 
 
 
 
 
 
 
 
 
​​";"Output:
 eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 192.168.1.10  netmask 255.255.255.0  broadcast 192.168.1.255
         inet6 fe80::1e6f:65ff:fe06:bc81  prefixlen 64  scopeid 0x20<link>
         ether 1c:6f:65:06:bc:81  txqueuelen 1000  (Ethernet)
         RX packets 142237  bytes 178721059 (170.4 MiB)
         RX errors 0  dropped 94  overruns 0  frame 0
         TX packets 42053  bytes 4778259 (4.5 MiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
         device interrupt 16  memory 0xfc300000-fc320000  
 
 eth0.3: flags=4931<UP,BROADCAST,RUNNING,PROMISC,ALLMULTI,MULTICAST>  mtu 1500
         ether 1c:6f:65:06:bc:81  txqueuelen 0  (Ethernet)
         RX packets 17  bytes 2032 (1.9 KiB)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 94  bytes 15606 (15.2 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
 
 eth0.4: flags=4931<UP,BROADCAST,RUNNING,PROMISC,ALLMULTI,MULTICAST>  mtu 1500
         ether 1c:6f:65:06:bc:81  txqueuelen 0  (Ethernet)
         RX packets 22  bytes 3302 (3.2 KiB)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 119  bytes 17612 (17.1 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
 
 net_vlan3: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 192.168.3.10  netmask 255.255.255.0  broadcast 192.168.3.255
         inet6 fe80::1e6f:65ff:fe06:bc81  prefixlen 64  scopeid 0x20<link>
         ether 1c:6f:65:06:bc:81  txqueuelen 0  (Ethernet)
         RX packets 99  bytes 12767 (12.4 KiB)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 183  bytes 25999 (25.3 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
 
 
 net_vlan4: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 192.168.4.10  netmask 255.255.255.0  broadcast 192.168.4.255
         inet6 fe80::1e6f:65ff:fe06:bc81  prefixlen 64  scopeid 0x20<link>
         ether 1c:6f:65:06:bc:81  txqueuelen 0  (Ethernet)
         RX packets 63  bytes 5954 (5.8 KiB)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 59  bytes 11320 (11.0 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0";;RedHatEnterpriseLinux7/RHEL7-48397
1214;;;;;;;;;6;"5. start 3 guests with bridge type interface as below
 
 # virsh dumpxml vm1 | grep /interface -B7
 
 # virsh dumpxml  vm2 | grep /interface -B7
 
 # virsh dumpxml vm3| grep /interface -B7
​​";"Output:
 <interface type='bridge'>
       <mac address='52:54:00:cc:cb:46'/>
       <source bridge='net_vlan3'/> =========> connected to net_vlan3
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh start rhel7.2
 # virsh dumpxml rhel7.2| grep /interface -B7
     <interface type='bridge'>
       <mac address='52:54:00:cf:32:49'/>
       <source bridge='net_vlan3'/> ===========> connected to net_vlan3
       <target dev='vnet2'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh start tftp6.6
 # virsh dumpxml tftp6.6 | grep /interface -B7
     <interface type='bridge'>
       <mac address='52:54:00:84:cb:4f'/>
       <source bridge='net_vlan4'/> ====================> connected to net_vlan4
       <target dev='vnet1'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";;RedHatEnterpriseLinux7/RHEL7-48397
1214;;;;;;;;;7;"4. log in the 3 guests, and check they can get ip address.

 Confirm the guests can ping the dhcp server and the host, and can ping each other in the same vlan.";​​;;RedHatEnterpriseLinux7/RHEL7-48397
1214;;;;;;;;;8;"4.1 check ip
 
 # ifconfig eth0
​​";"eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 192.168.3.11  netmask 255.255.255.0  broadcast 192.168.3.255
         inet6 fe80::5054:ff:fecc:cb46  prefixlen 64  scopeid 0x20<link>
         ether 52:54:00:cc:cb:46  txqueuelen 1000  (Ethernet)
         RX packets 89  bytes 11115 (10.8 KiB)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 61  bytes 8937 (8.7 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0";;RedHatEnterpriseLinux7/RHEL7-48397
1214;;;;;;;;;9;"4.2 check it can ping to the dhcp server
 # ping 192.168.3.253 (ping dhcp server)";"Output:
 PING 192.168.3.253 (192.168.3.253) 56(84) bytes of data.
 64 bytes from 192.168.3.253: icmp_seq=1 ttl=64 time=0.365 ms
 64 bytes from 192.168.3.253: icmp_seq=2 ttl=64 time=0.344 ms
 ^C
 --- 192.168.3.253 ping statistics ---
 2 packets transmitted, 2 received, 0% packet loss, time 1000ms
 rtt min/avg/max/mdev = 0.344/0.354/0.365/0.021 ms";;RedHatEnterpriseLinux7/RHEL7-48397
1214;;;;;;;;;10;"4.3 check it can ping to the host
 
 
 
 
​​";"Output:
 # ping 192.168.3.10 (ping the host)
 PING 192.168.3.10 (192.168.3.10) 56(84) bytes of data.
 64 bytes from 192.168.3.10: icmp_seq=1 ttl=64 time=0.188 ms
 64 bytes from 192.168.3.10: icmp_seq=2 ttl=64 time=0.168 ms
 ^C
 --- 192.168.3.10 ping statistics ---
 2 packets transmitted, 2 received, 0% packet loss, time 1000ms
 rtt min/avg/max/mdev = 0.168/0.178/0.188/0.010 ms
​​";;RedHatEnterpriseLinux7/RHEL7-48397
1214;;;;;;;;;11;"4.4 check it can ping to the guest in the same vlan
 # ping $(ip addr of rhel7.2)
​​";ping sucess;;RedHatEnterpriseLinux7/RHEL7-48397
1214;;;;;;;;;12;"4.5 check it can not ping to the guest with different vlan
 # ping $(ip addr of tftp6.6)
​​";ping fail;;RedHatEnterpriseLinux7/RHEL7-48397
1215;RHEL7-48439;[libvirtd]qemu:///session should not disconnects -- bug1315606 1297690;"
 Bug 1315606 - qemu:///session disconnects after 30 seconds
Bug 1297690 - XML-RPC error : Cannot write data: Transport endpoint is not connected


";Yan Fu (yafu);Medium;Positive;Not Automated;;1;"1.Reinstall libvirt: 
 #yum -y reinstall libvirt*
 
 2.Login host with a non-root user and touch a file for testing:
 $cat bz1240283.py#!/usr/bin/python
# See:
# https://bugzilla.redhat.com/show_bug.cgi?id=1240283#c8

import libvirt
import sys
import os
import time

if os.geteuid() == 0:
    print ""Run this program as NON-root""
    sys.exit (1)

conn = libvirt.openReadOnly(None)
if conn == None:
    print ""Unexpected error opening libvirt connection""
    sys.exit (1)
caps = conn.getCapabilities()
if caps == None:
    print ""Unexpected error getting capabilities the first time""
    sys.exit (1)

time.sleep (60)

caps = conn.getCapabilities()
print ""NOT reproduced RHBZ#1240283
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-48439
1215;;;;;;;;;2;"3. Authorize execute permission to it
 $chmod u+x bz1240283.py
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48439
1215;;;;;;;;;3;"4.Execute the file
 $./bz1240283.py
​​";"NOT reproduced RHBZ#1240283
 
 There should no errorslike:
 libvirt: XML-RPC error : Cannot write data: Broken pipe Traceback (most recent call last): File ""./bz1240283.py"", line 25, in <module> caps = conn.getCapabilities() File ""/usr/lib64/python2.7/site-packages/libvirt.py"", line 3735, in getCapabilities if ret is None: raise libvirtError ('virConnectGetCapabilities() failed', conn=self) libvirt.libvirtError: Cannot write data: Broken pipe
​​";;RedHatEnterpriseLinux7/RHEL7-48439
1215;;;;;;;;;4;"Test with libguestfs:
 <pre>1.Reinstall libvirt:
#yum -y reinstall libvirt*

2.Clean caches: #echo 3 > /proc/sys/vm/drop_caches

3.Run libguestfs-test-tool with non-root:
$libguestfs-test-tool";3.no error output.;;RedHatEnterpriseLinux7/RHEL7-48439
1216;RHEL7-48459;Define&start guest without perf elements in guest xml;;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"# cat rhel7.2.xml | grep perf
 (no output)
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-48459
1216;;;;;;;;;2;"# virsh define rhel7.2.xml
 
 # virsh dumpxml rhel7.2 | grep perf
 (no output)
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-48459
1216;;;;;;;;;3;"# virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-48459
1216;;;;;;;;;4;"# virsh perf rhel7.2
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled";perf events are all disabled by default;;RedHatEnterpriseLinux7/RHEL7-48459
1217;RHEL7-48538;[virtio-win][viostor] hotunplug virtual block drive;[virtio-win][viostor] hotunplug virtual block drive;Yu Wang (wyu);High;Positive;Not Automated;;1;"1.start VM with virtio-blk-pci(both system disk and data disk):
 CLI:
 -object iothread,id=thread0 -drive file=win.raw,if=none,id=drive-virtio-disk1,format=raw,serial=mike_cao1,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk1,id=virtio-disk1 \
 -drive file=test.raw,if=none,id=drive-virtio-disk0,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk0,id=virtio-disk0";" 1. guest boot up correctly  (still a bug, not fixed yet)
 https://bugzilla.redhat.com/show_bug.cgi?id=751700 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-48538
1217;;;;;;;;;2;"2.check whether viostor.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled viostor.sys verifier:
    #verifier.exe /standard /driver viostor.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings";"2. All the Standards flags are checked ,the verified driver fields shows ""viostor.sys""";;RedHatEnterpriseLinux7/RHEL7-48538
1217;;;;;;;;;3;"3.start host telnet client
 #telnet $host_ip $port
    {""execute"":""qmp_capabilities""}";"3.Check the output of telnet, it should contain the greeting message like the
 following:
 {""QMP"": {""version"": {""qemu"": {""micro"": 0, ""minor"": 8, ""major"": 2}, ""package"": ""(qemu-kvm-rhev-2.8.0-3.el7)""}, ""capabilities"": []}}
 {""return"": {}}";;RedHatEnterpriseLinux7/RHEL7-48538
1217;;;;;;;;;4;"4.Check whether the new disk is added in guest disk manager
    {""execute"":""query-pci""} 
    {""execute"":""query-block""}";"4. device and disk can be found in the qmp monitor
 {""bus"": 0, ""qdev_id"": ""virtio-disk0"", ""irq"": 0, ""slot"": 3, ""class_info"": {""class"": 256, ""desc"": ""SCSI controller""}  
 
 {""return"": [{""io-status"": ""ok"", ""device"": ""drive-virtio-disk0"", ""locked"": false, ""removable"": false, ""inserted"": {""iops_rd"": 0, ""detect_zeroes"": ""off"", ""image"": {""virtual-size"": 21474836480, ""filename"": ""test.raw"", ""format"": ""raw"", ""actual-size"": 10656059392, ""dirty-flag"": false}";;RedHatEnterpriseLinux7/RHEL7-48538
1217;;;;;;;;;5;"5. hot unplug a virtio block device
 {""execute"":""__com.redhat_drive_del"",""arguments"":{""id"":""drive-virtio-disk0""}}";5. no error occurs;;RedHatEnterpriseLinux7/RHEL7-48538
1217;;;;;;;;;6;6. check the device manager and disk manager;"6. cannot find datadisk on disk manager, and the blk device is still in device manager
​​";;RedHatEnterpriseLinux7/RHEL7-48538
1217;;;;;;;;;7;"7. hot unplug a block device
    {""execute"":""device_del"",""arguments"":{""id"":""virtio-disk0""}}";"7.no error occurs
 {""timestamp"": {""seconds"": 1447729940, ""microseconds"": 530268}, ""event"": ""DEVICE_DELETED"", ""data"": {""path"": ""/machine/peripheral/virtio-disk0/virtio-backend""}}
 {""timestamp"": {""seconds"": 1447729940, ""microseconds"": 531119}, ""event"": ""DEVICE_DELETED"", ""data"": {""device"": ""virtio-disk0"", ""path"": ""/machine/peripheral/virtio-disk0""}}
​​";;RedHatEnterpriseLinux7/RHEL7-48538
1217;;;;;;;;;8;8. repeat step6;8.both disk and blk device cannot find on guest;;RedHatEnterpriseLinux7/RHEL7-48538
1217;;;;;;;;;9;"9.Check whether the new disk is added in guest disk manager
    {""execute"":""query-pci""} 
    {""execute"":""query-block""}";9. disk and device can not be found in the qmp monitor;;RedHatEnterpriseLinux7/RHEL7-48538
1218;RHEL7-48544;[virtio-win][pvpanic]Install pvpanic drivers during guest installation;[virtio-win][pvpanic]Install pvpanic drivers during guest installation;Yu Wang (wyu);Critical;Positive;Not Automated;;1;"1.create iso file when test prewhql build:
 # mkisofs -iso-level 3 -r -o /path-to-your-iso-file/virtio-win-prewhql-86.iso /path-of-prewhql/virtio-win-prewhql-0.1-86 ";"1.iso file made correctly
 
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-48544
1218;;;;;;;;;2;"2.Start VM with pvpanic
 CLI:...-device pvpanic,id=pvpanic0,ioport=0x050 -no-shutdown";2.guest can be started successfully;;RedHatEnterpriseLinux7/RHEL7-48544
1218;;;;;;;;;3;"3. install pvpanic driver from virtio-win.iso during guest installation:
 during the installation stage click ""load driver ""-->""which driver you want to choose"" click browse, choose the driver we need .";3.driver can be loaded correctly;;RedHatEnterpriseLinux7/RHEL7-48544
1218;;;;;;;;;4;"4. after guest installed,check pvpanic driver info:
 in device manager,check the verion of balloon driver ,and check whether it is digital signed by redhat:
 eg: 
 # signtool /verify /kp /c pvpanic.cat  pvpanic.sys/inf";"4.driver is installed and version/copyright info is correct:
 Number of files successsfully verified:1
 Number of warnings:0
 Number of errors:0";;RedHatEnterpriseLinux7/RHEL7-48544
1219;RHEL7-48549;[virtio-win][pvpanic]live migration when pvpanic driver enabled;[virtio-win][pvpanic]live migration when pvpanic driver enabled;Yu Wang (wyu);High;Positive;Not Automated;;1;" 1.Start VM with pvpanic
 CLI:... -device pvpanic,id=pvpanic0,ioport=0x0505 -no-shutdown
"; 1.Guest can be boot up successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-48549
1219;;;;;;;;;2;"2.check whether pvpanic.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled pvpanic.sys verifier:
    #verifier.exe /standard /driver pvpanic.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings   ";"2. All the Standards flags are checked ,the verified driver fields shows ""pvpanic.sys"" ";;RedHatEnterpriseLinux7/RHEL7-48549
1219;;;;;;;;;3;"3.Start the listening side 
 CLI:... -device pvpanic,id=pvpanic0,ioport=0x0505 -no-shutdown -incoming tcp:0:5888";3.guest can be reboot successfully;;RedHatEnterpriseLinux7/RHEL7-48549
1219;;;;;;;;;4;"4. do live migration
 # telnet $HostIP $Port
 {""execute"":""qmp_capabilities""}
 {""execute"":""migrate"",""arguments"":{""uri"":""tcp:0:5888""}}";"4.from host telnet client:
    #telnet source_HostIP tcp_port4.Check the output of telnet, it should contain the greeting message like the
 following: 
 Connected to Hostip.
 Escape character is '^]'.
 {""QMP"": {""version"": {""qemu"": {""micro"": 0, ""minor"": 3, ""major"": 2}, ""package"": "" (qemu-kvm-rhev-2.3.0-31.el7)""}, ""capabilities"": []}}
 {""return"": {}}";;RedHatEnterpriseLinux7/RHEL7-48549
1219;;;;;;;;;5;"6.check the status of migration
 {""execute"":""query-migrate""}";"6.{""return"": {""status"": ""active"", ""total-time"": 12607, ""ram"": {""total"": 4312137728, ""remaining"": 3894980608, ""transferred"": 427765976}}}
 {""timestamp"": {""seconds"": 1446687891, ""microseconds"": 450930}, ""event"": ""STOP""}";;RedHatEnterpriseLinux7/RHEL7-48549
1219;;;;;;;;;6;"7. after migration, Configure regisiter for trigger BSoD by using NMI 
 1.Click on Start and then Run.
 2.In the text box in the Run window, type regedit and click OK.
 This will open the Registry Editor program.
 3.Locate the HKEY_LOCAL_MACHINE folder under My Computer and
 click on the (+) sign next the folder name to expand the folder.
 4.Continue to expand folders until you reach the
 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\CrashControl
 registry key.
 5.Select the CrashControl key under Control.
 6.From the menu, select Edit, then New and finally 32bit DWORD Value.
 7.On the right-hand side of the screen, a new value will appear.
 Name this new value NMICrashDump.
 The value must be named this exactly to function properly.
 8.Double-click on the NMICrashDump DWORD value you just created
 and set the Value data to 1.
 9.Click OK and then close Registry Editor.
 10.Restart your VM and log back in as you normally do.
​​";7. Setting up succesfully;;RedHatEnterpriseLinux7/RHEL7-48549
1219;;;;;;;;;7;"5 Generate BSoD manually  by NMI on dst guest
 {""execute"":""inject-nmi""}";"5 BSOD occurs ,Dump begin generating from 0%
​​";;RedHatEnterpriseLinux7/RHEL7-48549
1219;;;;;;;;;8;6.check qmp when process of dump collecting to 100%;"6. QMP should receive following event:{""timestamp"": {""seconds"": 1432178991, ""microseconds"": 216984}, ""event"": ""GUEST_PANICKED"", ""data"": {""action"": ""pause""}}";;RedHatEnterpriseLinux7/RHEL7-48549
1219;;;;;;;;;9;"7. check the status of guest in qmp
    {""execute"":""query-status""}
​​";"7. {""return"": {""status"": ""guest-panicked"", ""singlestep"": false, ""running"": false}}
​​";;RedHatEnterpriseLinux7/RHEL7-48549
1220;RHEL7-49080;[pxe boot][hostdev] PXE boot with PCI passthrough interface (both PF and VF) - bug 1278421;pci passthrough device support pxe boot by specify 'boot order' in interface section or 'bootdev='network'' in os section. This case cover legacy pxe boot, the os installation should be successfully. (pci passthrough do not support uefi pxe boot as ipxe-roms do not support it);Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;1.1. vf as hostdev interface +boot order;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-49080
1220;;;;;;;;;2;"set boot order=1 in the <interface> element
 # virsh dumpxml rhel7.2
 ......
  <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.2.0'>hvm</type>
 <bootmenu enable='yes' timeout='3000'/>
     <bios useserial='yes' rebootTimeout='3000'/>
   </os>
 ......
    <interface type='hostdev' managed='yes'>
      <mac address='42:4c:43:50:0c:10'/>
      <source>
        <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x3'/>
      </source>
 ** <boot order='1'/> **
 ** <rom bar='on' file='/usr/share/ipxe/808610ca.rom'/> **
         <address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/>
    </interface>
 ......

 (Note, the rom file 808610ca.rom is just for the vf device with vendor id=8086 and device id=10ca, if you use different device, should change it to corresponding file
 checked by:
 # lspci -nn | grep 03.10.3  ===> the pci address of VF or PF passthrough to guest
 03:10.3 Ethernet controller [0200]: Intel Corporation 82576 Virtual Function [8086:10ca] (rev 01)
 so the corresponding ROM file name should be ""808610ca.rom"")
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49080
1220;;;;;;;;;3;"1. # virsh start rhel7.2
 # virt-viewer rhel7.2
 press ESC to check the network boot option exists in the first place.
 
​​";"step 1. 
 SeaBIOS (Version 1.9.1-3.el7)
 Machine UUID 
 iPXE (http://ipxe.org) 00:09.0 CA80 PCI2.10 PnP PMM+3FF97560+3FEF7560 CA80
 
 Press ESC for boot menu. ====> press ESC
 Select boot device:
 1. iPXE (PCI 00:09.0)
 2. Virtio disk PCI:0:7
 3. Legacy option rom";;RedHatEnterpriseLinux7/RHEL7-49080
1220;;;;;;;;;4;"2. Then choose the iPXE to boot, it can get dhcp ip and boot from network.
​​";"step 2. 
 ======> choose 1
 Can get ip and boot from network, OS install successfully.
​​";;RedHatEnterpriseLinux7/RHEL7-49080
1220;;;;;;;;;5;"3. Change the bootmenu enable='no', repeat 1~2.
​​";"step3. 
 no boot menu displayed and the guest boot from network automatically.
​​";;RedHatEnterpriseLinux7/RHEL7-49080
1220;;;;;;;;;6;"4. delete the <bootmenu/> element, repeat 1~2.
​​";"step 4. 
 no boot menu displayed and the guest boot from network automatically.";;RedHatEnterpriseLinux7/RHEL7-49080
1220;;;;;;;;;7;"1.2 vf as hostdev interface + boot dev
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49080
1220;;;;;;;;;8;"# virsh dumpxml rhel7.2
 ......
  <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.2.0'>hvm</type>
 ** <boot dev='network'/> **
    <bootmenu enable='yes' timeout='3000'/>
     <bios useserial='yes' rebootTimeout='3000'/>
   </os>
 ......
    <interface type='hostdev' managed='yes'>
      <mac address='42:4c:43:50:0c:10'/>
      <source>
        <address type='pci' domain='0x0000' bus='0x04' slot='0x10' function='0x0'/>
      </source>
 ** <rom bar='on' file='/usr/share/ipxe/808610ca.rom'/> **
         <address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/>
    </interface>
 ......

 (note, the rom file is 808610ca.rom
 # lspci -nn | grep 03:00.0
 03:00.0 Ethernet controller [0200]: Intel Corporation 82576 Gigabit Network Connection [8086:10c9] (rev 01))
";​​;;RedHatEnterpriseLinux7/RHEL7-49080
1220;;;;;;;;;9;"same steps as above 1~4 in 1.1
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-49080
1220;;;;;;;;;10;"1.3 PF passthrough as device  + boot order
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49080
1220;;;;;;;;;11;"use PF in the hostdev element.  confirm there are no other interfaces defined in the guest.
 # virsh dumpxml t_R7.2 
 ..............
  <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.2.0'>hvm</type>
     <bootmenu enable='yes' timeout='3000'/>
     <bios useserial='yes' rebootTimeout='3000'/>
   </os>
 <hostdev mode='subsystem' type='pci' managed='yes'>
       <driver name='vfio'/>
       <source>
    **     <address domain='0x0000' bus='0x03' slot='0x00' function='0x0'/> ** ====> the PF's PCI address
       </source>
       <boot order='1'/>
       <alias name='hostdev0'/>
   **    <rom bar='on' file='/usr/share/ipxe/808610c9.rom'/> **
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </hostdev>
 ..........
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49080
1220;;;;;;;;;12;"same steps as above 1~4 in 1.1
​​";"check the guest can boot from network under both conditon(boot menu enable/disable, or no bootmenu specified).
 And once the boot menu enabled, the pxe option appear in the first place in theboot menu.
​​";;RedHatEnterpriseLinux7/RHEL7-49080
1220;;;;;;;;;13;"the rom file provided by ipxe-roms do not support uefi boot, refer to bug 1278421#c21 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49080
1221;RHEL7-49213;[PXE][bridge][macvtap] PXE boot with bridge and macvtap interface both for legacy and uefi, and cover all model type;"pxe boot with bridge and macvtap network is supported, both for legacy and UEFI bios. Test all the supported model type to check the option roms provides by ipxe-roms-qemu for each model. 
settings | model type | legacy | uefi
bridge | virtio | scenario 2, 1.1 |  scenario 2, 1.2
direct type + bridge mode | e1000e | scenario 2, step 1~2 | scenario 2, step 3~4
direct type + private mode | rtl8139 | scenario 3 | scenario 3
direct type + passthrough mode + pf | e1000 | scenario 4 | scenario 4
direct type + passthrough mode + vf | virtio | scenario 5 | scenario 5
direct type + vepa mode | not test |  N/A | N/A";Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"Scenario 1: bridge type interface + virtio
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;2;"1.1 Legacy 
 # brctl show
 bridge name  bridge id  STP enabled    interfaces
 br0        8000.1c6f6506bc81    no        eth0
 # virsh dumpxml rh7.2
 ......
  <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.2.0'>hvm</type>
     <loader readonly='yes' type='rom'>/usr/share/seabios/bios-256k.bin</loader>
 <bootmenu enable='yes' timeout='30000'/> 
     <bios useserial='yes' rebootTimeout='6553'/>
   </os>
  <interface type='bridge'>
       <mac address='52:54:00:67:07:df'/>
       <source bridge='br0'/>
       <model type='virtio'/>
 ** <boot order='1'/> **
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 ..........";​​;;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;3;"1. start the guest and check the boot menu, the ipxe should be in the first place in boot option list
 # virsh start rh7.2
 # virt-viewer rh7.2
​​";"..........
 Press ESC for boot menu ===> press ESC
 select boot device:
 1. iPXE (PCI 00:03.0)
 2. Virtio disk
 3. Legacy option rom";;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;4;"2. choose ""1"" ipxe, check the guest can get ip and boot from network
​​";"can boot from network
​​";;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;5;"3. change the bootmenu enalbe= no, start and check the guest can boot from network automatically.
​​";"can get ip and boot from network, os can be installed
​​";;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;6;"1.2 UEFI, current OVMF only support Q35 machine type + virtio
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;7;"1.2.1 not enable secboot
 # virsh dumpxml ipxetest 
 ...
  <os>
     <type arch='x86_64' machine='pc-q35-rhel7.3.0'>hvm</type>
     <loader readonly='yes' type='pflash'>/usr/share/OVMF/OVMF_CODE.secboot.fd</loader>
     <nvram>/var/lib/libvirt/qemu/nvram/ipxe-virtio_VARS.fd</nvram>
   </os>
 ...
  <interface type='bridge'>
       <mac address='52:54:00:67:07:df'/>
       <source bridge='br0'/>
       <model type='virtio'/>
 ** <boot order='1'/> **
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;8;"# virsh start ipxetest
 # virt-viewer ipxetest
​​";"the guest can boot from network and os can be intalled successfully.
​​";;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;9;"1.2.2 Enable secure boot
 note the pxe server must provide the released os, or you can not boot by pxe with secure boot enabled. 
 You will get such error:
 error: uefi/vmlinuz has invalid signature.
 error: you need to load the kernel first
 press any key to contiue....
 
 1.start a guest with the following xml:
  <os>
     <type arch='x86_64' machine='pc-q35-rhel7.3.0'>hvm</type>
     <loader readonly='yes' secure='yes'
 type='pflash'>/usr/share/OVMF/OVMF_CODE.secboot.fd</loader>
     <nvram>/var/lib/libvirt/qemu/nvram/ovmf-q35-secboot_VARS.fd</nvram>
   </os>
   <features>
     <acpi/>
     <apic/>
     <vmport state='off'/>
   **   <smm state='on'/>  **
   </features>
 ...
     <disk type='file' device='cdrom'>
       <driver name='qemu' type='raw'/>
       <source file='/var/lib/libvirt/images/UefiShell.iso'/>
       <target dev='sdb' bus='sata'/>
       <readonly/>
       <boot order='1'/>
       <address type='drive' controller='0' bus='0' target='0' unit='1'/>
     </disk>
  <interface type='bridge'>
       <mac address='52:54:00:67:07:df'/>
       <source bridge='br0'/>
       <model type='virtio'/>
     </interface>
 ...
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;10;"2. Execute the following command in the UEFI shell.
          EnrollDefaultKeys.efi
    It should succeed. Then run:
           reset -s  ";​​;;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;11;3. move the cdrom in the above xml,and add '<boot order='1'/>' in the interface section, start the guest, it will begin to pxe boot, you should install a released os revision.;​​;;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;12;"4. after the os installed, change the boot device to hd, and start the guest
 on the guest 
 # dmesg | grep -i secure
 The output contains ""Secure Boot enabled"".";​​;;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;13;"Scenario 2: direct type + bridge mode + legacy / uefi  + e1000e
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;14;"1. start a guest with below interface
    <interface type='direct'>
       <mac address='52:54:00:2e:9d:8b'/>
       <source dev='eth0' mode='bridge'/>
       <target dev='macvtap0'/>
       <model type='e1000e'/>
     **  <boot order='1'/> **
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;15;2. check the guest can boot from network;can succeed to pxe boot;;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;16;"3. use Q35 machine type, start the guest
 # virsh dumpxml ipxetest 
 ...
  <os>
     <type arch='x86_64' machine='pc-q35-rhel7.3.0'>hvm</type>
     <loader readonly='yes' type='pflash'>/usr/share/OVMF/OVMF_CODE.secboot.fd</loader>
     <nvram>/var/lib/libvirt/qemu/nvram/ipxe-virtio_VARS.fd</nvram>
   </os>
 ...
 
    <interface type='direct'>
       <mac address='52:54:00:2e:9d:8b'/>
       <source dev='eth0' mode='bridge'/>
       <target dev='macvtap0'/>
       <model type='e1000e'/>
     **  <boot order='1'/> **
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;17;4. check it can boot from network;can succeed to pxe boot;;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;18;"Scenario 3: direct type + private mode + legacy / uefi  + rtl8139
 uefi xml:
 # virsh dumpxml ipxetest
 ...
  <os>
     <type arch='x86_64' machine='pc-q35-rhel7.3.0'>hvm</type>
     <loader readonly='yes' type='pflash'>/usr/share/OVMF/OVMF_CODE.secboot.fd</loader>
     <nvram>/var/lib/libvirt/qemu/nvram/ipxe-virtio_VARS.fd</nvram>
   </os>
 ...

    <interface type='direct'>
       <mac address='52:54:00:2e:9d:8b'/>
       <source dev='eth0' mode='private'/>
       <target dev='macvtap0'/>
       <model type='rtl8139'/>
       <boot order='1'/> 
     </interface>

 legacy xml:
 # virsh dumpxml ipxetest
 ...
  <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.4.0'>hvm</type>
   </os>
 ...

    <interface type='direct'>
       <mac address='52:54:00:2e:9d:8b'/>
       <source dev='eth0' mode='private'/>
       <target dev='macvtap0'/>
       <model type='rtl8139'/>
       <boot order='1'/> 
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;19;same steps with senario2 step 1~4;can succeed to pxe boot;;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;20;"Scenario 4:direct type + passthrough mode + + pf + legacy/uefi + e1000
 uefi xml: (eth0 is pf)
 # virsh dumpxml ipxetest
 ...
  <os>
     <type arch='x86_64' machine='pc-q35-rhel7.3.0'>hvm</type>
     <loader readonly='yes' type='pflash'>/usr/share/OVMF/OVMF_CODE.secboot.fd</loader>
     <nvram>/var/lib/libvirt/qemu/nvram/ipxe-virtio_VARS.fd</nvram>
   </os>
 ...

    <interface type='direct'>
       <mac address='52:54:00:2e:9d:8b'/>
       <source dev='eth0' mode='passthrough'/>
       <target dev='macvtap0'/>
       <model type='e1000'/>
       <boot order='1'/> 
     </interface>

 legacy xml:
 # virsh dumpxml ipxetest
 ...
  <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.4.0'>hvm</type>
   </os>
 ...

    <interface type='direct'>
       <mac address='52:54:00:2e:9d:8b'/>
       <source dev='eth0' mode='passthrough'/>    
       <target dev='macvtap0'/>
       <model type='e1000'/>
       <boot order='1'/> 
     </interface>
";​​;;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;21;same steps with senario2 step 1~4;can succeed to pxe boot;;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;22;Scenario 5: direct type + passthrough mode + vf + legacy/uefi + virtio;​​;;RedHatEnterpriseLinux7/RHEL7-49213
1221;;;;;;;;;23;"same steps with senario2 step 1~4
 uefi xml: (eth0 is vf)
 # virsh dumpxml ipxetest 
 ...
  <os>
     <type arch='x86_64' machine='pc-q35-rhel7.3.0'>hvm</type>
     <loader readonly='yes' type='pflash'>/usr/share/OVMF/OVMF_CODE.secboot.fd</loader>
     <nvram>/var/lib/libvirt/qemu/nvram/ipxe-virtio_VARS.fd</nvram>
   </os>
 ...
 
    <interface type='direct'>
       <mac address='52:54:00:2e:9d:8b'/>
       <source dev='eth0' mode='passthrough'/>
       <target dev='macvtap0'/>
       <model type='e1000'/>
       <boot order='1'/> 
     </interface>
 
 legacy xml:
 # virsh dumpxml ipxetest 
 ...
  <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.4.0'>hvm</type>
   </os>
 ...
 
    <interface type='direct'>
       <mac address='52:54:00:2e:9d:8b'/>
       <source dev='eth0' mode='passthrough'/>    
       <target dev='macvtap0'/>
       <model type='e1000'/>
       <boot order='1'/> 
     </interface>
​​";can succeed to pxe boot ;;RedHatEnterpriseLinux7/RHEL7-49213
1222;RHEL7-49273;[iothreads][negative] set a big iothreads - bug 1264008;;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. edit a guest and add this in guest xml: <iothreads>1000000</iothreads> 
 # time virsh edit rh7.2
 Domain rh7.2 XML configuration edited.
 
 real    0m12.358s
 user    0m0.012s
 sys    0m0.012s
​​";"1. When edit the guest with adding big iothreads, the time is acceptable.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-49273
1222;;;;;;;;;2;"2. # virsh start rh7.2
 error: Failed to start domain rh7.2
 error: internal error: process exited while connecting to monitor: libvirt:  error : cannot execute binary /usr/libexec/qemu-kvm: Argument list too long
​​";"2. the guest can not start
​​";;RedHatEnterpriseLinux7/RHEL7-49273
1223;RHEL7-49276;[SR-IOV] Prepare: Cisco-VMFEX --bug 1251532 1257004 1276478 1323307  1422775;"Environment preparation  for Cisco-VMFEX 
";Jingjing Shao (jishao);High;Positive;Not Automated;;1;"1. attach the vf through ovirt
 we can attach the network interface to the guest, the type of network will be depend on the profile picked.
 
 choose the guest : Networks —> choose rhevm(network name) —>choose vNIC Profiles —>New VM interface profile
 if choose the vmfex, it will be a interface profile with macvtap type
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-49276
1223;;;;;;;;;2;"2.  Attach the the interface to the guest with vmfex  by pass through
 
 The interface.xml is as below:
   <interface type='hostdev' managed='yes'>
       <mac address='02:24:6b:89:bc:e9'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x06' slot='0x00' function='0x1'/>
       </source>
       <virtualport type='802.1Qbh'>
         <parameters profileid='qa-libv'/>
       </virtualport>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49276
1223;;;;;;;;;3;"3. Attach the the interface to the guest with macvtap passthrough  mode
 
 <interface type='direct'>
       <mac address='7a:3d:d6:18:19:76'/>
       <source dev='enp6s0f1' mode='passthrough'/>
       <virtualport type='802.1Qbh'>
         <parameters profileid='qa-libv'/>
       </virtualport>
       <target dev='macvtap0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
   </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-49276
1223;;;;;;;;;4;"4.  Attach the the interface to the guest with macvtap passthrough  network way
 
 # virsh net-dumpxml direct-pool
 <network>
 <name>direct-pool</name>
 <uuid>a3a19e70-c92b-8f6a-5bc1-85422f29b955</uuid>
 <forward dev='rename2' mode='passthrough'>
 <interface dev='rename2'/>
 ........
 <interface dev='eth60'/>
 </forward>
 </network>
 
 # cat  interface.xml
   <interface type='network'>
     <source network='direct-pool'/>
       <virtualport type='802.1Qbh'>
         <parameters profileid='hm-test'/>
       </virtualport>
       <model type='virtio'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49276
1223;;;;;;;;;5;RHEL7-100480 - [Cisco] Cisco-VMFEX：Hotplug/unplug network device to guest ;​​;;RedHatEnterpriseLinux7/RHEL7-49276
1223;;;;;;;;;6;RHEL7-18525 - [Hot-plug] Attach VF from inactive network to running guest (negative) - bug 1002438;​​;;RedHatEnterpriseLinux7/RHEL7-49276
1223;;;;;;;;;7;RHEL7-98410 - [interface hotplug] [hostdev] attach hostdev interface/device with different elements/attributes - bug 997561;​​;;RedHatEnterpriseLinux7/RHEL7-49276
1223;;;;;;;;;8;RHEL7-18501 - [PF passthrough] Hot-plug PF to vm;​​;;RedHatEnterpriseLinux7/RHEL7-49276
1223;;;;;;;;;9;RHEL7-18499 - [PCI assignment] Hot unplug PF;​​;;RedHatEnterpriseLinux7/RHEL7-49276
1223;;;;;;;;;10;RHEL7-18508 - [SR-IOV] Reboot guest with assigned VF;​​;;RedHatEnterpriseLinux7/RHEL7-49276
1224;RHEL7-49314;Define/create a domain with long domain name(more than 247 characters);Test a domain with long domain name(more than 247 characters);Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Scenario 1: Define a domain with a 248-character name-length
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-49314
1224;;;;;;;;;2;"# virsh define /tmp/longname.xml
 error: Failed to define domain from /tmp/longname.xml
 error: cannot create file '/etc/libvirt/qemu/11111111111111
 11111111111111111111111111111111111111111111111
 11111111111111111111111111111111111111111111111
 11111111111111111111111111111111111111111111111
 11111111111111111111111111111111111111111111111
 1111111111111111111111111111111111111111111111.xml.new': File name too long";"define failed due to file system limit
​​";;RedHatEnterpriseLinux7/RHEL7-49314
1224;;;;;;;;;3;Scenario 2: Create a domain with a 248-character name-length;​​;;RedHatEnterpriseLinux7/RHEL7-49314
1224;;;;;;;;;4;"# virsh create /tmp/longname.xml
 error: Failed to create domain from /tmp/longname.xml
 error: cannot create file ' /var/run/libvirt/qemu/11111111111111
 11111111111111111111111111111111111111111111111
 11111111111111111111111111111111111111111111111
 11111111111111111111111111111111111111111111111
 11111111111111111111111111111111111111111111111
 1111111111111111111111111111111111111111111111.xml.new': File name too long";"create failed due to file system limit
​​";;RedHatEnterpriseLinux7/RHEL7-49314
1225;RHEL7-49315;Start  a domain with 247-character name-length and do managedsave/start;Start  a domain with 247-character/number name-length and do managedsave/start;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 0. 
 Prepare a domain xml with 247-character/number domain name length:
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-49315
1225;;;;;;;;;2;"1.# virsh define /tmp/rhel7.2-1030.xml
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49315
1225;;;;;;;;;3;"2.# virsh start $guest_name
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49315
1225;;;;;;;;;4;"3.# virsh list
  ";"Guest is running:

 Id    Name                           State
 ----------------------------------------------------
  29    $guest_name  running";;RedHatEnterpriseLinux7/RHEL7-49315
1225;;;;;;;;;5;"4.Do managedsave:
 # virsh managedsave $guest_name
​​";"The domain with 247-char/number length name can be managedsaved successfully.
​​";;RedHatEnterpriseLinux7/RHEL7-49315
1225;;;;;;;;;6;"5. Start guest again:
 # virsh start $guest_name
";"Can be started successfully.
​​";;RedHatEnterpriseLinux7/RHEL7-49315
1226;RHEL7-49335;"[user][mcast] use ""user + mcast"" type interfaces to connect multiple VMs in userspace - bug 1278317";"mcast+user: user mode provide unprevileged user the access to outside, but the vms can not communicte with each other.
this configuration provides full access, user mode interface provide outside access and mcast interface provide the access to VMs in userspace.
Another method to do get this function is connect guests to a bridge via the qemu-bridge-helper, see the test case RHEL7-18721 - [bridge] Test connectivity for bridge type interface with QEMU network helper for unprivileged users - bug 833167 
";Yalan Zhang (yalzhang);Low;Positive;Not Automated;;1;"use unprivileged user to do all these steps
 1. prepare 2 shutdown guests 
 $ virsh uri
 qemu:///session
 $ virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  -     rh7.1                          shut off
  -     rhel7.1                        shut off
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-49335
1226;;;;;;;;;2;"2. edit the 2 guests with mcast and user interface
 $ virsh dumpxml rh7.1 | grep /interface -B5
     <interface type='mcast'>
       <mac address='52:54:00:6d:90:01'/>
       <source address='230.0.0.1' port='5558'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
     <interface type='user'>
       <mac address='52:54:00:6a:c0:e1'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
     </interface>
 
 $ virsh dumpxml rhel7.1 | grep /interface -B5
     <interface type='mcast'>
       <mac address='52:54:00:6d:90:01'/>
       <source address='230.0.0.1' port='5558'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
     <interface type='user'>
       <mac address='52:54:00:19:0f:96'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49335
1226;;;;;;;;;3;"3. start the 2 guests
 $ virsh start rhel7.1
 Domain rhel7.1 started
 $ virsh start rh7.1
 Domain rh7.1 started";​​;;RedHatEnterpriseLinux7/RHEL7-49335
1226;;;;;;;;;4;"4. log in the 2 guests, check there are 2 interfaces, and 1 interface will get ip 10.0.2.15
 
 for each guest:
 guest# dhclient
 guest# firefox www.baidu.com
 successfully to load the page.
​​";"each guest have 2 network interface and 1 interface will get ip 10.0.2.15, and this interface have outside access.
​​";;RedHatEnterpriseLinux7/RHEL7-49335
1226;;;;;;;;;5;"5. configure the other mcast interface
 guest rh7.1# ifconfig ens3 100.100.100.10/24
 guest rhel7.1# ifconfig ens3 100.100.100.20/24
 
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-49335
1226;;;;;;;;;6;6. ping each other, the 2 guest2 have access to each other.;the 2 guests have access to each other.;;RedHatEnterpriseLinux7/RHEL7-49335
1227;RHEL7-49336;[non-root-user] Check qemu log file handler when qemu.conf file doesn't exist;"virtlogd is used to record qemu log when no conf file exists.
Bug 1325075 - The old logging way(file) is used when no qemu.conf file exists";Yan Fu (yafu);Medium;Positive;Not Automated;;1;"1.Log in as non-root user
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-49336
1227;;;;;;;;;2;"2.start a guest:
 $virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49336
1227;;;;;;;;;3;"3.Check the virtlogd is used for logging from qemu process:
 $lsof  /home/yafu/.cache/libvirt/qemu/log/rhel7.2-log
​​";"3.output:
 lsof: WARNING: can't stat() fuse.gvfsd-fuse file system /run/user/0/gvfs
       Output information may be incomplete.
 COMMAND    PID USER   FD   TYPE DEVICE SIZE/OFF   NODE NAME
 virtlogd 20227 yafu   14w   REG  253,1    55212 326404 /home/yafu/.cache/libvirt/qemu/log/rhel7.2.log
 
​​";;RedHatEnterpriseLinux7/RHEL7-49336
1227;;;;;;;;;4;"4.Touch qemu.conf file:
 $touch /home/yafu/.config/libvirt/qemu.conf
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49336
1227;;;;;;;;;5;"5.Restart virtlogd process, then run:
 $virsh destroy rhel7.2
 $virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-49336
1227;;;;;;;;;6;"6.Check the virtlogd is used for logging from qemu process:
 $lsof  /home/yafu/.cache/libvirt/qemu/log/rhel7.2-log
​​";"6.output:
 lsof: WARNING: can't stat() fuse.gvfsd-fuse file system /run/user/0/gvfs
       Output information may be incomplete.
 COMMAND    PID USER   FD   TYPE DEVICE SIZE/OFF   NODE NAME
 virtlogd 20230 yafu   14w   REG  253,1    55212 326404 /home/yafu/.cache/libvirt/qemu/log/rhel7.2.log
 
​​";;RedHatEnterpriseLinux7/RHEL7-49336
1228;RHEL7-50472;Test a pool including special characters in pool name;"Bug 639923 - libvirt allows you to create a domain with '/' in the name
 Bug 1333248 - Libvirt rejects object name starting with '.'";Fangge Jin (fjin);Medium;Positive;Automated;;1; Scenario 1: include '/' in pool name;"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-50472
1228;;;;;;;;;2;"# cat /tmp/pool.xml 
 <pool type='dir'>
   <name>defaul/t</name>
   <uuid>a9800081-74f9-46cf-a12d-7ce63b24c361</uuid>
   <capacity unit='bytes'>160982630400</capacity>
   <allocation unit='bytes'>63092301824</allocation>
   <available unit='bytes'>97890328576</available>
   <source>
   </source>
   <target>
     <path>/var/lib/libvirt/images</path>
     <permissions>
       <mode>0711</mode>
       <owner>0</owner>
       <group>0</group>
       <label>system_u:object_r:virt_image_t:s0</label>
     </permissions>
   </target>
 </pool>
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-50472
1228;;;;;;;;;3;"# virsh pool-define /tmp/pool.xml 
 error: Failed to define pool from /tmp/pool.xml
 error: XML error: name defaul/t cannot contain '/'
​​";"define failed
​​";;RedHatEnterpriseLinux7/RHEL7-50472
1228;;;;;;;;;4;Scenario 2: pool name starting with '.';"
​​";;RedHatEnterpriseLinux7/RHEL7-50472
1229;RHEL7-50488;[vlan][macvtap][hostdev] Set vlan/vlan trunk for hostdev interface or direct type passthrough mode interface with vf - bug 910167;"vlan tag support vf used via type=hostdev and vf used by macvtap passthough, it does not support vlan trunk.
";Yalan Zhang (yalzhang);Critical;Positive;Not Automated;;1;"Scenario 1: 
 vf used via type=hostdev support vlan tag
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-50488
1229;;;;;;;;;2;"1. # lspci |grep 82576
 03:00.0 Ethernet controller: Intel Corporation 82576 Gigabit Network Connection (rev 01)
 03:00.1 Ethernet controller: Intel Corporation 82576 Gigabit Network Connection (rev 01)
 03:10.0 Ethernet controller: Intel Corporation 82576 Virtual Function (rev 01)
 03:10.1 Ethernet controller: Intel Corporation 82576 Virtual Function (rev 01)
 03:10.2 Ethernet controller: Intel Corporation 82576 Virtual Function (rev 01)
 03:10.3 Ethernet controller: Intel Corporation 82576 Virtual Function (rev 01)
 ......
 
 Add the following xml to domain's xml
 #virsh edit r63
 Domain r63 XML configuration edited.
 
 <domain>
     ......
     <interface type='hostdev' managed='yes'>
       <source>
         <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x0'/>
       </source>
       <vlan>
         <tag id='42'/>
       </vlan>
     </interface>
     ......
 </domain>
 
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-50488
1229;;;;;;;;;3;"2.  # virsh start r63
 Domain r63 started
​​";guest can start successfully.;;RedHatEnterpriseLinux7/RHEL7-50488
1229;;;;;;;;;4;3. # virsh dumpxml r63;"    ......
     <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:47:5e:c3'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x0'/>
       </source>
       <vlan>
         <tag id='42'/>
       </vlan>
       <alias name='hostdev0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
     ......";;RedHatEnterpriseLinux7/RHEL7-50488
1229;;;;;;;;;5;"3. Add the following xml to domain's xml
 #virsh edit r63
 Domain r63 XML configuration edited.
 
 <domain>
     ......
     <interface type='hostdev' managed='yes'>
       <source>
         <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x0'/>
       </source>
       <vlan trunk='yes'>
         <tag id='42'/>
         <tag id='47'/>
       </vlan>
     </interface>
     ......
 </domain>
 
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-50488
1229;;;;;;;;;6;"4. # virsh start r63
​​";"error: Failed to start domain r63
 error: unsupported configuration: vlan trunking is not supported by SR-IOV network devices";;RedHatEnterpriseLinux7/RHEL7-50488
1229;;;;;;;;;7;"scenario 2:
 vf used via macvtap passthrouth support vlan tag";​​;;RedHatEnterpriseLinux7/RHEL7-50488
1229;;;;;;;;;8;"1.# virsh dumpxml R7.2 | grep /interface -B8
     <interface type='direct'>
       <mac address='52:54:00:25:98:9b'/>
       <source dev='enp3s16f4' mode='passthrough'/>
       <vlan>
         <tag id='42'/>
       </vlan>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 2. # virsh start R7.2
 Domain R7.2 started
​​";"
 (the guest can start successfully)
​​";;RedHatEnterpriseLinux7/RHEL7-50488
1229;;;;;;;;;9;"3.  # virsh dumpxml R7.2 | grep /interface -B9
     <interface type='direct'>
       <mac address='52:54:00:25:98:9b'/>
       <source dev='enp3s16f4' mode='passthrough'/>
       <vlan trunk='yes'>
         <tag id='42'/>
         <tag id='47'/>
       </vlan>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 # virsh start R7.2
​​";"error: Failed to start domain R7.2
 error: unsupported configuration: vlan trunking is not supported by SR-IOV network devices
 
 
 (vlan trunk not support for vf)
​​";;RedHatEnterpriseLinux7/RHEL7-50488
1229;;;;;;;;;10;"4. bridge, vepa, and private mode do not support vlan tag
 edit the guest's xml as below
 # virsh edit R7.2
    <interface type='direct'>
       <mac address='52:54:00:71:0a:a5'/><source dev='enp3s16f5' mode=** 'bridge' **/>
       <vlan>
         <tag id='47'/>
       </vlan>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
     </interface>
 ...
 # virsh start R7.2
​​";"error: Failed to start domain R7.2
 error: unsupported configuration: an interface of type 'direct' is requesting a vlan tag, but that is not supported for this type of connection
 
 
 (bridge, vepa, and private mode do not support vlan tag, guest can not start.)
​​";;RedHatEnterpriseLinux7/RHEL7-50488
1229;;;;;;;;;11;"5. hot plug device
 guest is running
 # cat net.xml
   <interface type='direct'>
       <mac address='52:54:00:71:0a:a5'/>
       <source dev='enp3s16f5' mode='bridge'/>
       <vlan>
         <tag id='40'/>
       </vlan>
     </interface>
 
 # virsh attach-device R7.2 net.xml
 
​​";"error: Failed to attach device from net.xml
 error: unsupported configuration: an interface of type 'direct' is requesting a vlan tag, but that is not supported for this type of connection";;RedHatEnterpriseLinux7/RHEL7-50488
1230;RHEL7-50492;Test a domain with special characters(html) in domain xml;"Bug 1197580 - libvirt should escape possible invalid characters.
 Bug 1270427 - libvirt should escape possible invalid characters.";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"# cat escape.xml
 <domain type='kvm'>
   <name>test4&lt;</name>
   <title>A short description -&lt;&gt; title - of the domain</title>
 --
   <cpu mode='custom' match='exact'>
       <model vendor_id='uthedjdjdj&lt;&gt;'>IvyBridge&lt;&gt;</model>
       <vendor>Intel&lt;&gt;</vendor>
   </cpu>
 --
   <devices>
     <emulator>/usr/libexec/dd&lt;/qemu-kvm</emulator>
     <disk type='file' device='disk'>
       <driver name='&lt;&gt;' type='qcow2'/>
 --
     <interface type='network'>
       <rom bar='on' file='/etc/fake/boot&lt;&gt;.bin'/>
 --
     <serial type=""udp"">
       <source mode=""bind"" host=""&lt;ddd0.0.0.0&gt;"" service=""&lt;2445&gt;""/>
       <source mode=""connect"" host=""&lt;ddd0.0.0.0&gt;"" service=""&lt;2445&gt;""/>
 --
     <serial type=""tcp"">
       <source mode=""bind"" host=""&lt;ddd0.0.0.0&gt;"" service=""&lt;2445&gt;""/>
 --
     <serial type=""tcp"">
       <source mode=""connect"" host=""&lt;ddd0.0.0.0&gt;"" service=""&lt;2445&gt;""/>
 --
     <serial type=""nmdm"">
       <source master=""/dev/n&lt;mdm0&gt;A"" slave=""/dev/nm&lt;dm0&gt;B""/>
 --
     <graphics type='vnc' socket='&lt;&gt;'/>
 --
   </devices>
   <seclabel type='dynamic' model='selinux&lt;&gt;' relabel='yes'/>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-50492
1230;;;;;;;;;2;"# virsh define escape.xml 
 Domain test4< defined from escape.xml";​​;;RedHatEnterpriseLinux7/RHEL7-50492
1230;;;;;;;;;3;"# virsh dumpxml 'test4<'
   <name>test4&lt;</name>
   <title>A short description -&lt;&gt; title - of the domain</title>
     <model fallback='allow' vendor_id='uthedjdjdj&lt;&gt;'>IvyBridge&lt;&gt;</model>
     <vendor>Intel&lt;&gt;</vendor>
     <emulator>/usr/libexec/dd&lt;/qemu-kvm</emulator>
     <disk type='file' device='disk'>
       <driver name='&lt;&gt;' type='qcow2'/>
       <rom bar='on' file='/etc/fake/boot&lt;&gt;.bin'/>
       <source mode='bind' host='&lt;ddd0.0.0.0&gt;' service='&lt;2445&gt;'/>
       <source mode='connect' host='&lt;ddd0.0.0.0&gt;' service='&lt;2445&gt;'/>
       <source mode='bind' host='&lt;ddd0.0.0.0&gt;' service='&lt;2445&gt;'/>
       <source mode='connect' host='&lt;ddd0.0.0.0&gt;' service='&lt;2445&gt;'/>
       <source master='/dev/n&lt;mdm0&gt;A' slave='/dev/nm&lt;dm0&gt;B'/>
     <graphics type='vnc' socket='&lt;&gt;'/>
   <seclabel type='dynamic' model='selinux&lt;&gt;' relabel='yes'/>";​​;;RedHatEnterpriseLinux7/RHEL7-50492
1230;;;;;;;;;4;"# virsh undefine 'test4<'
 # virsh define escape.xml --validate
 error: Failed to define domain from escape.xml
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content";"The validation fails because some value (e.g. the value ""&lt;&gt;"" for driver name or socket path) is invalid, it's reasonable.";;RedHatEnterpriseLinux7/RHEL7-50492
1230;;;;;;;;;5;"Modify the invalid values in xml(e.g. change &lt;&gt; for disk driver name to a valid value ""qemu""), then do virsh define with --validate again:
 
 # virsh define escape.xml --validate
 Domain test4< defined from escape.xml
​​";​​;;RedHatEnterpriseLinux7/RHEL7-50492
1231;RHEL7-50505;Test a network with special characters in network name;"Bug 639923 - libvirt allows you to create a domain with '/' in the name
 Bug 1333248 - Libvirt rejects object name starting with '.'";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;Scenario 1: include '/' in network name;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-50505
1231;;;;;;;;;2;"# cat /tmp/network.xml 
 <network>
   <name>b/r2</name>
   <uuid>8a2e947d-c2d5-4695-2881-5f877ced63e0</uuid>
   <forward mode='route'/>
   <bridge name='br2' stp='on' delay='0'/>
   <mac address='52:54:00:ad:83:b2'/>
   <ip address='10.0.0.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='10.0.0.2' end='10.0.0.254'/>
     </dhcp>
   </ip>
 </network>";"the network can not be defined
​​";;RedHatEnterpriseLinux7/RHEL7-50505
1231;;;;;;;;;3;"# virsh net-define /tmp/network.xml 
 error: Failed to define network from /tmp/network.xml
 error: XML error: name b/r2 cannot contain '/'";​​;;RedHatEnterpriseLinux7/RHEL7-50505
1231;;;;;;;;;4;"# virsh net-create /tmp/network.xml 
 error: Failed to create network from /tmp/network.xml
 error: XML error: name b/r2 cannot contain '/'";​​;;RedHatEnterpriseLinux7/RHEL7-50505
1231;;;;;;;;;5;"Scenario 2: network name starting with '.'
 # virsh net-define net1.xml
 Network .b defined from net1.xml
 # virsh net-start .b
 Network .b started

 [root@server7 tmp]# service libvirtd restart
 Redirecting to /bin/systemctl restart  libvirtd.service

 [root@server7 tmp]# virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  .b                   active     no            yes
  default              active     yes           yes";"after restart, the network with '.' still exists.
​​";;RedHatEnterpriseLinux7/RHEL7-50505
1232;RHEL7-50985;Define&start guest with perf attribute in guest xml - on a host that doesn't support Intel CMT;"Refer to:
 Bug 1329045 - Guest got killed when restart libvirtd if guest has cmt event enabled but host doesn't support CMT";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"On a host that doesn't support Intel CMT
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-50985
1232;;;;;;;;;2;Scenario 1: define&start a guest with perf element emt enabled in xml;"
​​";;RedHatEnterpriseLinux7/RHEL7-50985
1232;;;;;;;;;3;"# cat rhel7.2.xml | grep perf
   <perf>
     <event name='cmt' enabled='yes'/>
   </perf>";"
​​";;RedHatEnterpriseLinux7/RHEL7-50985
1232;;;;;;;;;4;"# virsh define rhel7.2.xml
 
 # virsh dumpxml rhel7.2
   <perf>
     <event name='cmt' enabled='yes'/>
   </perf>";"
​​";;RedHatEnterpriseLinux7/RHEL7-50985
1232;;;;;;;;;5;# virsh start rhel7.2;"Guest fails to start
 # virsh start rhel7.2
 error: Failed to start domain rhel7.2
 error: Failed to open file '/sys/devices/intel_cqm/type': No such file or directory";;RedHatEnterpriseLinux7/RHEL7-50985
1232;;;;;;;;;6;Scenario 2: define&start a guest with perf element cmt disabled in xml;"
​​";;RedHatEnterpriseLinux7/RHEL7-50985
1232;;;;;;;;;7;"# cat rhel7.2.xml | grep perf
   <perf>
     <event name='cmt' enabled='no'/>
   </perf>";"
​​";;RedHatEnterpriseLinux7/RHEL7-50985
1232;;;;;;;;;8;"# virsh define rhel7.2.xml
 
 # virsh dumpxml rhel7.2
   <perf>
     <event name='cmt' enabled='no'/>
   </perf>";"
​​";;RedHatEnterpriseLinux7/RHEL7-50985
1232;;;;;;;;;9;# virsh start rhel7.2;"# virsh start rhel7.2
 Domain rhel7.2 started
​​";;RedHatEnterpriseLinux7/RHEL7-50985
1232;;;;;;;;;10;"# virsh perf rhel7.2
 cmt            : disabled";"
​​";;RedHatEnterpriseLinux7/RHEL7-50985
1233;RHEL7-50986;[perf] - Set perf event -  on a host that doesn't support Intel CMT;;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;On a host that doesn't support Intel CMT;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-50986
1233;;;;;;;;;2;"Scenario 1: enable cmt event for a running guest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-50986
1233;;;;;;;;;3;"# virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-50986
1233;;;;;;;;;4;"# virsh perf rhel7.2 --enable cmt
 error: Unable to enable/disable perf events
 error: Failed to open file '/sys/devices/intel_cqm/type': No such file or directory";"enable failed.
​​";;RedHatEnterpriseLinux7/RHEL7-50986
1234;RHEL7-50993;[interface hotplug][hostdev] detach the vf from the host then assign it to guest with managed=no;detach the vf from host, then assign to guest without managed=yes, will succeed.;Yalan Zhang (yalzhang);Critical;Positive;Not Automated;;1;"senario 1: start a guest
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-50993
1234;;;;;;;;;2;" 1. # virsh nodedev-list --tree
  +- pci_0000_80_01_0
   |   |
   |   +- pci_0000_86_00_0
   |   |   |
   |   |   +- net_eth6_90_e2_ba_30_79_5c
   |   |     
   |   +- pci_0000_86_00_1
   |   |   |
   |   |   +- net_eth11_90_e2_ba_30_79_5d
   |   |     
   |   +- pci_0000_86_10_0
   |   |   |
   |   |   +- net_eth2_02_24_6b_89_bc_e9
   |   |     
   |   +- pci_0000_86_10_1
   |   |   |
   |   |   +- net_eth7_02_24_6b_89_bc_e9
 2.  # readlink /sys/bus/pci/devices/0000\:86\:10.1/driver/ -f
​​";/sys/bus/pci/drivers/ixgbevf;;RedHatEnterpriseLinux7/RHEL7-50993
1234;;;;;;;;;3;"3. # virsh nodedev-detach pci_0000_86_10_1
 Device pci_0000_86_10_1 detached
 
 # readlink /sys/bus/pci/devices/0000\:86\:10.1/driver/ -f
​​";"/sys/bus/pci/drivers/vfio-pci
 
 (check the driver changed to vfio-pci after detach)
​​";;RedHatEnterpriseLinux7/RHEL7-50993
1234;;;;;;;;;4;"4. # virsh edit rhel7.2
 # virsh dumpxml rhel7.2  | grep /interface -B6
   <interface type='hostdev' managed='no'>
       <mac address='02:5a:9d:c9:17:0b'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x1'/>
       </source>
     </interface>
 # virsh start rhel7.2
​​";Domain rhel7.2 started;;RedHatEnterpriseLinux7/RHEL7-50993
1234;;;;;;;;;5;scenario 2: hotplug;​​;;RedHatEnterpriseLinux7/RHEL7-50993
1234;;;;;;;;;6;"1. ensure there is vf on the host, and there is a running guest rhel
 
  # readlink /sys/bus/pci/devices/0000\:86\:10.1/driver/ -f
 /sys/bus/pci/drivers/ixgbevf

 # virsh list 
  Id    Name                           State
 ----------------------------------------------------
  7     rhel                           running
";​​;;RedHatEnterpriseLinux7/RHEL7-50993
1234;;;;;;;;;7;"2. hotplut to the guest without ""--managed"" it will fail
 # virsh attach-interface rhel hostdev 0000:86:10.1
";"error: Failed to attach interface
 error: Requested operation is not valid: Unmanaged PCI device 0000:86:10.1 must be manually detached from the host";;RedHatEnterpriseLinux7/RHEL7-50993
1234;;;;;;;;;8;"3. detach the vf from host, then attach without --managed, will succeed
 # virsh nodedev-detach pci_0000_86_10_1
 Device pci_0000_86_10_1 detached
 
 # virsh attach-interface rhel hostdev 0000:86:10.1
​​";"Interface attached successfully
​​";;RedHatEnterpriseLinux7/RHEL7-50993
1234;;;;;;;;;9;"4. # virsh dumpxml rhel | grep /interface -B9
​​";" <interface type='hostdev'>
       <mac address='52:54:00:71:53:69'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x1'/>
       </source>
       <alias name='hostdev1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0a' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-50993
1235;RHEL7-52118;[vnc&spice][update-device]Update SPICE port setting of a running domain;"Verify that spice port setting can't be changed at run-time.
 
original setting | update setting | Expected result | Error message
autoport=yes | port={different than the run-time value} autoport=yes | update successfully, but port is not changed | 
 | port={same as run-time value} autoport=yes | update successfully, but port is not changed | 
 | port={same value} autoport=no | Update failed | For spice: error: Failed to update device from /tmp/updategraphic error: Operation not supported: cannot change port settings on spice graphics For VNC: error: Failed to update device from /tmp/updategraphic error: Operation not supported: cannot change port settings on vnc graphics
autoport=no port=5902(a valid value) | port=5903 (a new value) autoport=no | Update failed | Same as above
 | port=5902 autoport=yes | Update failed. | {comment:46}Same as above";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Prepare a domain with spice graphic and autoport according to the test matrix:

 For example:
     <graphics type='spice' autoport='yes' listen='0.0.0.0' keymap='en-us'/>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-52118
1235;;;;;;;;;2;"Start guest:
 # virsh start rhel7";​​;;RedHatEnterpriseLinux7/RHEL7-52118
1235;;;;;;;;;3;"Query spice port:
 # virsh domdisplay rhel7
";"Output:
 spice://localhost:5900";;RedHatEnterpriseLinux7/RHEL7-52118
1235;;;;;;;;;4;"Prepare a update file according to the test matrix, for example:

 # cat /tmp/updategraphic
     <graphics type='spice' port='5901' autoport='yes' listen='0.0.0.0' keymap='en-us'>
       <listen type='address' address='0.0.0.0'/>
     </graphics>";​​;;RedHatEnterpriseLinux7/RHEL7-52118
1235;;;;;;;;;5;"Update spice port by update-device:
 # virsh update-device rhel7 /tmp/updategraphic
";Get expected result as described in test matrix;;RedHatEnterpriseLinux7/RHEL7-52118
1235;;;;;;;;;6;"Check spice port in xml:
 # virsh dumpxml rhel7
​​";"Port doesn't change.
 
 Output:
 ...
     <graphics type='spice' port='5900' autoport='yes' listen='0.0.0.0' keymap='en-us'>
       <listen type='address' address='0.0.0.0'/>
     </graphics>
 ...
​​";;RedHatEnterpriseLinux7/RHEL7-52118
1236;RHEL7-52148;bz1116126-cfq_blkio-weight;bz1116126-cfq_blkio-weight;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-52148
1237;RHEL7-52149;Check_WWID_bz1032443;Check_WWID_bz1032443;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-52149
1238;RHEL7-52151;FIO;FIO;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-52151
1239;RHEL7-52152;Bonnie++;Bonnie++;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-52152
1240;RHEL7-52153;bz1175629_IO_Delay;bz1175629_IO_Delay;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-52153
1241;RHEL7-52154;bz1190273_scsi_output;bz1190273_scsi_output;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-52154
1242;RHEL7-52226;[spice] Start a guest with spice gl enabled;gl is not supported by qemu-kvm-rhev for now;Fangge Jin (fjin);High;Positive;Not Automated;;1;"0. Edit or define a guest with such setting:
 1) with spice graphic
 2) set gl to enabled.";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-52226
1242;;;;;;;;;2;1. # virsh define /tmp/rhel7.2.xml;​​;;RedHatEnterpriseLinux7/RHEL7-52226
1242;;;;;;;;;3;2. # virsh dumpxml rhel7.2;"There is ""<gl enable='yes'/>"" in dumpxml.
 
 Output:
 ...
     <graphics type='spice' autoport='no'>
       <gl enable='yes'/>
     </graphics>
 ...";;RedHatEnterpriseLinux7/RHEL7-52226
1242;;;;;;;;;4;"3. # virsh start rhel7.2
 
​​";"OpenGL is not supported by QEMU for now.
 
 Output:
 error: Failed to start domain rhel7.2
 error: unsupported configuration: This QEMU doesn't support spice OpenGL
​​";;RedHatEnterpriseLinux7/RHEL7-52226
1243;RHEL7-52251;[Virutal networks] Resolve guest's hostname for domains managed by libvirt by libvirt_nss module - BZ 1325996 - update rhel7.3;"http://libvirt.org/nss.html 
libvirt keeps a list of assigned IP addresses for libvirt networks. The NSS plugin search the list trying to find matching record for given host name.The module works in cases where IP addresses are assigned by dnsmasq. This case cover nat, isolated and route mode network, checkpoint include: 1)check the hostname list by virsh net-dhcp-leases; 2) ssh log in by hostname of the guest; 3) ping the guest's hostname. 4) update the hostname of the guest, then check if the list updated as well.
";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;" 1.Check libvirt-nss has installed:
  #rpm -q libvirt-nss
  libvirt-nss-1.3.4-1.el7.x86_64
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-52251
1243;;;;;;;;;2;"2.Add libvirt into /etc/nsswitch.conf:
   #cat /etc/nsswitch.conf
    ...
    hosts: files libvirt dns
    ...";​​;;RedHatEnterpriseLinux7/RHEL7-52251
1243;;;;;;;;;3;"3.Prepare a running guest with interface using NATed networks ;
  #virsh dumpxml rhel7.2
   ...
   <interface type='network'>
       <mac address='52:54:00:c6:3b:95'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>
     </interface>
   ...";​​;;RedHatEnterpriseLinux7/RHEL7-52251
1243;;;;;;;;;4;"4.In guest, set hostname using 'hostnamectl':
  #hostnamectl set-hostname 'nss-test'
  #service network restart
  #hostname
  nss-test
​​";​​;;RedHatEnterpriseLinux7/RHEL7-52251
1243;;;;;;;;;5;"5.Run 'virsh net-dhcp-leases' in the host and could see the hostname of the guest:
 #virsh net-dhcp-leases default
 
​​";" Expiry Time          MAC address        Protocol  IP address                Hostname        Client ID or DUID
 -------------------------------------------------------------------------------------------------------------------
  2016-05-11 15:19:15  52:54:00:c6:3b:95  ipv4      192.168.122.133/24        nss-test     -
 
 (The guest's hostname can list out.)
​​";;RedHatEnterpriseLinux7/RHEL7-52251
1243;;;;;;;;;6;"6.Ping guest's hostname:
 #ping nss-test
​​";"PING nss-test (192.168.122.133) 56(84) bytes of data.
 64 bytes from 192.168.122.133: icmp_seq=1 ttl=64 time=0.178 ms
 
 
 (ping the domain name successfully.)
​​";;RedHatEnterpriseLinux7/RHEL7-52251
1243;;;;;;;;;7;"7. # ssh root@nss-test
​​";"7. the guest can be accessed by ssh
​​";;RedHatEnterpriseLinux7/RHEL7-52251
1243;;;;;;;;;8;"8. on the guest, update the hostname, then check on the host, the hostname not changed
 # hostnamectl set-hostname nss-test2
 #virsh net-dhcp-leases default
 
 
 
​​";" Expiry Time          MAC address        Protocol  IP address                Hostname        Client ID or DUID
 -------------------------------------------------------------------------------------------------------------------
  2016-05-11 15:19:15  52:54:00:c6:3b:95  ipv4      192.168.122.133/24        nss-test     -
 
 
 (after update the hostname, need to request the ip address again(distroy-start, or ifconfig eth0 down-up), then on the host will record the new hostname)
​​";;RedHatEnterpriseLinux7/RHEL7-52251
1243;;;;;;;;;9;"9. do a destroy-start, then check the hostname is changed.
 # virsh destroy rhel7.2
 # virsh start rhel7.2
 confirm the guest has get ip address then check on the host, the hostname changed.
 #virsh net-dhcp-leases default";" Expiry Time          MAC address        Protocol  IP address                Hostname        Client ID or DUID
 -------------------------------------------------------------------------------------------------------------------
  2016-05-11 15:19:15  52:54:00:c6:3b:95  ipv4      192.168.122.133/24        nss-test2     -";;RedHatEnterpriseLinux7/RHEL7-52251
1244;RHEL7-52252;[spice] Start a guest with spice gl disabled.;Start a guest with spice gl disabled;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"0. Edit or define a guest with such setting:
 1) with spice graphic
 2) set gl to disabled.";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-52252
1244;;;;;;;;;2;"# virsh define /tmp/rhel7.2.xml 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-52252
1244;;;;;;;;;3;"# virsh dumpxml rhel7.2
 
​​";"There is ""<gl enable='no'/>"" in dumpxml.
 
 Output:
 ...
     <graphics type='spice' autoport='no' listen='127.0.0.1'>
       <listen type='address' address='127.0.0.1'/>
       <gl enable='no'/>
     </graphics>
 ...
​​";;RedHatEnterpriseLinux7/RHEL7-52252
1244;;;;;;;;;4;"# virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-52252
1244;;;;;;;;;5;"Check qemu command line:
 # ps aux|grep qemu|grep rhel7.2
​​";"The qemu command line doesn't include option ""gl"".
 
 Output:
 ...-spice port=0,disable-ticketing,seamless-migration=on";;RedHatEnterpriseLinux7/RHEL7-52252
1245;RHEL7-52253;[spice] Start a guest without gl element in domain xml;gl is disabled by default if it's not specified explicitly;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"0. Edit or define a guest with such setting:
 1) with spice graphic
 2) no gl element";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-52253
1245;;;;;;;;;2;"# virsh define /tmp/rhel7.2.xml
​​";​​;;RedHatEnterpriseLinux7/RHEL7-52253
1245;;;;;;;;;3;"# virsh dumpxml rhel7.2
​​";"No gl element in dumpxml.
 
 Output:
 ...
     <graphics type='spice' autoport='no' listen='127.0.0.1'>
       <listen type='address' address='127.0.0.1'/>
     </graphics>
​​";;RedHatEnterpriseLinux7/RHEL7-52253
1245;;;;;;;;;4;"# virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-52253
1245;;;;;;;;;5;"# ps aux|grep qemu|grep rhel7.2
​​";"The qemu command line doesn't include option ""gl"".
 
 Output:
 -spice port=0,disable-ticketing,seamless-migration=on";;RedHatEnterpriseLinux7/RHEL7-52253
1246;RHEL7-52254;[spice] Define a guest with invalid gl element  in domain xml.;Define a guest with invalid gl element value in domain xml.;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"gl enable='aaa' (invalid value)
 
 # cat /tmp/rhel7.2.xml
 ...
     <graphics type='spice' autoport='no'>
       <gl enable='aaa'/>
     </graphics>
 ...
 
 
 # virsh define /tmp/rhel7.2.xml";"Define failed.
 
 Output:
 error: Failed to define domain from /tmp/rhel7.2.xml
 error: unsupported configuration: unknown enable value 'aaa'";Test Case;RedHatEnterpriseLinux7/RHEL7-52254
1246;;;;;;;;;2;"No gl->enable attribute
 
 # cat /tmp/rhel7.2.xml
 ...
     <graphics type='spice' autoport='no'>
       <gl/>
     </graphics>
 ...
 
 # virsh define /tmp/rhel7.2.xml";"Define failed.
 
 Output:
 error: Failed to define domain from /tmp/rhel7.2.xml
 error: XML error: spice gl element missing enable";;RedHatEnterpriseLinux7/RHEL7-52254
1247;RHEL7-52255;WALA-TC: [life cycle] Create a VM through Azure Template;WALA-TC: [life cycle] Create a VM through Azure Template;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Prepare a VM os disk (.vhd) in Azure.
 1. Follow the steps in ""On-premise""- ""ARM"" section. Create a VM through Template.
https://mojo.redhat.com/docs/DOC-1072770";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-52255
1247;;;;;;;;;2;"2. Check the VM status.
 2.1 The waagent service
 # service waagent status
 2.2 uptime
 # uptime
​​";"# service waagent status
    waagent (pid xxxx) is running...
 # uptime
     02:26:11 up  1:11,  1 user,  load average: 0.00, 0.01, 0.05";;RedHatEnterpriseLinux7/RHEL7-52255
1247;;;;;;;;;3;config;​​;;RedHatEnterpriseLinux7/RHEL7-52255
1248;RHEL7-52444;[detach-disk][negative] Detach-disk with a non-existing domain or non-exising disk;Bug 803591 - virsh segfault when attempting to detach disk from non-existent domain;Fangge Jin (fjin);Medium;Negative;Automated;;1;"# virsh detach-disk vda guest
 error: failed to get domain 'vda'
 error: Domain not found: no domain with matching name 'vda'";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-52444
1248;;;;;;;;;2;"# virsh detach-disk rhel6u2 vdc
 error: No found disk whose source path or target is vdc";​​;;RedHatEnterpriseLinux7/RHEL7-52444
1249;RHEL7-52448;[python binding] Memory leaks in getMemoryStats;Memory leaks in getMemoryStats;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"7.1. Paste the following codes into test.py:
 import libvirt
 con = libvirt.open(None)
 dom = con.lookupByName('foo')
 con.getMemoryStats(0, 0)
 7.2.
 #valgrind -v --leak-check=full python test.py";"7.2
 ==17955== LEAK SUMMARY:
 ==17955== definitely lost: 0 bytes in 0 blocks
 ==17955== indirectly lost: 0 bytes in 0 blocks
 ==17955== possibly lost: 6,152 bytes in 13 blocks
 ==17955== still reachable: 759,967 bytes in 4,435 blocks
 ==17955== suppressed: 0 bytes in 0 blocks";Test Case;RedHatEnterpriseLinux7/RHEL7-52448
1250;RHEL7-52500;[python binding] Memory leaks in getCPUStats;Memory leaks in getCPUStats;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"6.1.Paste the following codes into test.py:
 import libvirt
 con = libvirt.open(None)
 dom = con.lookupByName('foo')
 con.getCPUStats(0, 0)
 **The ""foo"" is the guest name.
 6.2. #valgrind -v --leak-check=full python test.py
 
​​";"6.2.
 ==17790== LEAK SUMMARY:
 ==17790== definitely lost: 0 bytes in 0 blocks
 ==17790== indirectly lost: 0 bytes in 0 blocks
 ==17790== possibly lost: 6,152 bytes in 13 blocks
 ==17790== still reachable: 759,967 bytes in 4,435 blocks
 ==17790== suppressed: 0 bytes in 0 blocks";Test Case;RedHatEnterpriseLinux7/RHEL7-52500
1251;RHEL7-53975;[Virutal networks] Check the order of the start/end IP addresses in <nat> subelements of <network> - bug 985653;negative test: the dhcp range and port range should be checked during network define or create.;Yalan Zhang (yalzhang);Low;Negative;Automated;;1;"Scenario 1 - range in nat section
 # cat net.xml 
 <network>
   <name>myself</name>
   <uuid>18cd684d-6a73-494a-862f-21409c8f3cb5</uuid>
   <forward mode='nat'>
     <nat>
       <address start='10.66.5.27' end='10.66.5.2'/>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr8' stp='on' delay='0' />
   <mac address='52:54:00:8a:d5:ad'/>
   <ip address='192.168.128.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.128.2' end='192.168.128.254' />
     </dhcp>
   </ip>
 </network>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;2;"1. # virsh net-define net.xml
​​";"error: Failed to define network from net.xml
 error: internal error: range 10.66.5.27 - 10.66.5.2 is reversed";;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;3;"2. correct the range in nat section
 # cat net.xml
 ...
 <address end='10.66.5.27' start='10.66.5.2'/>
 ...
 # virsh net-define net.xml
 Network myself defined from net.xml
 
 # virsh net-start myself
 Network myself started
​​";​​;;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;4;"# iptables -t nat -L POSTROUTING
​​";"...
 SNAT       tcp  --  192.168.128.0/24    !192.168.128.0/24     to:10.66.5.2-10.66.5.27:1024-65535
 SNAT       udp  --  192.168.128.0/24    !192.168.128.0/24     to:10.66.5.2-10.66.5.27:1024-65535
 SNAT       all  --  192.168.128.0/24    !192.168.128.0/24     to:10.66.5.2-10.66.5.27
 ... ";;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;5;"Scenario 2 - port
​​";​​;;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;6;"# cat net.xml
 <network>
   <name>myself</name>
   <uuid>18cd684d-6a73-494a-862f-21409c8f3cb5</uuid>
   <forward mode='nat'>
     <nat>
       <address start='10.66.5.2' end='10.66.5.27'/>
       <port end='1024' start='65535'/>
     </nat>
   </forward>
   <bridge name='virbr8' stp='on' delay='0' />
   <mac address='52:54:00:8a:d5:ad'/>
   <ip address='192.168.128.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.128.2' end='192.168.128.254' />
     </dhcp>
   </ip>
 </network>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;7;"1. # virsh net-define net.xml
​​";"error: Failed to define network from net.xml
 error: Missing or invalid 'end' attribute in <port> in <nat> in <forward> in network myself
​​";;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;8;"2.# vim net.xml
 ...
 <port end='65535' start='1024'/>
 # virsh net-define net.xml
 Network myself defined from net.xml
​​";​​;;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;9;"use invalid value
 # cat nn.xml
 ....
     <nat>
       <address start='10.66.5.1' end='10.66.5.2'/>
       <port start='9' end='65536'/>
     </nat>
  ...
​​";​​;;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;10;"# virsh net-define nn.xml
​​";"error: Failed to define network from nn.xml
 error: Missing or invalid 'end' attribute in <port> in <nat> in <forward> in network myself";;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;11;"# cat nn.xml
   <port start='9' end='65535'/>
 # virsh net-define nn.xml
​​";Network myself defined from nn.xml;;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;12;"# cat nn.xml
   <port start='1' end='65535'/>
 # virsh net-define nn.xml";Network myself defined from nn.xml;;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;13;"# cat nn.xml
   <port start='-1' end='65535'/>
 # virsh net-define nn.xml";"error: Failed to define network from nn.xml
 error: Missing or invalid 'start' attribute in <port> in <nat> in <forward> in network myself";;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;14;"# cat nn.xml
 <port start='s' end='65535'/>
 # virsh net-define nn.xml
​​";"error: Failed to define network from nn.xml
 error: Missing or invalid 'start' attribute in <port> in <nat> in <forward> in network myself";;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;15;"Scenario 3 - range in dhcp section
​​";​​;;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;16;"# cat net.xml
 <network>
   <name>myself</name>
   <uuid>18cd684d-6a73-494a-862f-21409c8f3cb5</uuid>
   <forward mode='nat'>
   <bridge name='virbr8' stp='on' delay='0' />
   <mac address='52:54:00:8a:d5:ad'/>
   <ip address='192.168.127.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.128.2' end='192.168.128.254' />
     </dhcp>
   </ip>
 </network>
 
​​";"if the dhcp range is not in the network defined in ip element, the network can not be defined.
​​";;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;17;"# virsh net-define net.xml
​​";"error: Failed to define network from net.xml
 error: internal error: range 192.168.128.2 - 192.168.128.254 is not entirely within network 192.168.127.1/24";;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;18;"# virsh net-create net.xml
​​";"error: Failed to create network from net.xml
 error: internal error: range 192.168.128.2 - 192.168.128.254 is not entirely within network 192.168.128.1/24";;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;19;"# cat net.xml
 <network>
   <name>myself</name>
   <uuid>18cd684d-6a73-494a-862f-21409c8f3cb5</uuid>
   <forward mode='nat'/>
   <bridge name='virbr8' stp='on' delay='0' />
   <mac address='52:54:00:8a:d5:ad'/>
   <ip address='192.168.127.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.127.254' end='192.168.127.2' />
     </dhcp>
   </ip>
 </network>
 
​​";"with a reversed range <range start='192.168.127.254' end='192.168.127.2' /> can not start
​​";;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;20;"# virsh net-define net.xml
​​";"error: Failed to define network from net.xml
 error: internal error: range 192.168.127.254 - 192.168.127.2 is reversed";;RedHatEnterpriseLinux7/RHEL7-53975
1251;;;;;;;;;21;"# virsh net-create net.xml
​​";"error: Failed to create network from net.xml
 error: internal error: range 192.168.127.254 - 192.168.127.2 is reversed";;RedHatEnterpriseLinux7/RHEL7-53975
1252;RHEL7-54071;[virtio-win][acceptance]Run basic scsi test:online enlarge/shrink data disk;"[virtio-win][acceptance]Run basic scsi test:online enlarge/shrink data disk
";Yu Wang (wyu);Critical;Positive;Automated;;1;"1.Boot up guest with 10G data disk;
 eg,...
 -drive file=/tmp/storage.img,if=none,id=disk2,if=none,media=disk,cache=none,fo
 rmat=qcow2,werror=stop,aio=native -device scsi-
 hd,bus=scsi0.0,drive=disk2,id=scsi2  -qmp tcp:0:4444,server,nowait ";" Guest can be boot up successfully;
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-54071
1252;;;;;;;;;2;"2.Install driver from Device Manager and make sure the driver can be installed successfully. ﻿
  eg: Right-click on Computer and select Manage----> Computer Management > System Tools ->right-click on 'SCSI Controller'--->Update Driver Software... ---->Browse my computer for driver software---->Browse to the location of the driver";"Virtio driver can be installed correctly
​​";;RedHatEnterpriseLinux7/RHEL7-54071
1252;;;;;;;;;3;"3. Check whether vioscsi.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled vioscsi.sys verifier:
     #verifier.exe /standard /driver vioscsi.sys  (run as administrator)
     then reboot the guest and recheck 
     #verifier /querysettings";"All the Standards flags are checked ,the verified driver fields shows ""vioscsi.sys"" 
 
​​";;RedHatEnterpriseLinux7/RHEL7-54071
1252;;;;;;;;;4;"4. For virtio data disk,in monitor,enlarge data disk size to 20G
 eg:(HMP) (qemu) block_resize datadisk 20G
 1.(QMP){""execute"":""qmp_capabilities""}
 2.(QMP){ ""execute"": ""block_resize"", ""arguments"": { ""device"": ""disk2"", ""size"": 21474836480 }}
   
​​";"Output of QMP,
 1.{""return"": {}}
 2.{""return"": {}}
 {""return"": [{""io-status"": ""ok"", ""device"": ""disk1"", ""locked"": false, ""removable"": false, ""inserted"": {""iops_rd"": 0, ""detect_zeroes"": ""off"", ""image"": {""virtual-size"": 21474836480, ""filename"": ""win7-32.raw"", ""format"": ""raw"", ""actual-size"": 1147483648, ""dirty-flag"": false}, ""iops_wr"": 0, ""ro"": false, ""backing_file_depth"": 0, ""drv"": ""raw"", ""iops"": 0, ""bps_wr"": 0, ""write_threshold"": 0, ""encrypted"": false, ""bps"": 0, ""bps_rd"": 0, ""cache"": {""no-flush"": false, ""direct"": false, ""writeback"": true}, ""file"": ""bug-200832.raw"", ""encryption_key_missing"": false}, ""type"": ""unknown""}]}";;RedHatEnterpriseLinux7/RHEL7-54071
1252;;;;;;;;;5;"5.Check the size of the disk and also format the disk.
 on host run: qemu-img info XXX.raw
 And copy some files to this disk.";System disk enlaged to 20G successfull, Format and copy no any error.;;RedHatEnterpriseLinux7/RHEL7-54071
1252;;;;;;;;;6;"6. Shrink the data disk size to 5G
 1).(QMP){""execute"":""qmp_capabilities""}
 2).(QMP){ ""execute"": ""block_resize"", ""arguments"": { ""device"": ""disk2"", ""size"": 5368709120 }}";"Shrink successfully.
 1).{""return"": {}}
 2).{""return"": {}}
 {""return"": [{""io-status"": ""ok"", ""device"": ""disk1"", ""locked"": false, ""removable"": false, ""inserted"": {""iops_rd"": 0, ""detect_zeroes"": ""off"", ""image"": {""virtual-size"": 5368709120, ""filename"": ""win7-32.raw"", ""format"": ""raw"", ""actual-size"": 2147483648, ""dirty-flag"": false}, ""iops_wr"": 0, ""ro"": false, ""backing_file_depth"": 0, ""drv"": ""raw"", ""iops"": 0, ""bps_wr"": 0, ""write_threshold"": 0, ""encrypted"": false, ""bps"": 0, ""bps_rd"": 0, ""cache"": {""no-flush"": false, ""direct"": false, ""writeback"": true}, ""file"": ""bug.raw"", ""encryption_key_missing"": false}, ""type"": ""unknown""}]}
 
​​";;RedHatEnterpriseLinux7/RHEL7-54071
1252;;;;;;;;;7;"7.Go to disk manager and check the size of the disk. And also format disk&copy files
 on host run ""qemu-img info XXX.raw"" to check the disk size.";"The disk size becomes to 5G.
 Format and copy no any error.";;RedHatEnterpriseLinux7/RHEL7-54071
1253;RHEL7-54073;[virtio-win][acceptance]Run basic block test:online enlarge/shrink data disk;[virtio-win][acceptance]Run basic block test:online enlarge/shrink data disk;Yu Wang (wyu);Critical;Positive;Automated;;1;"1.start VM with virtio-blk-pci( data disk):
 CLI:
 -drive file=test.raw,if=none,id=drive-virtio-disk0,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,iothread=thread0,scsi=off,bus=pci.0,drive=drive-virtio-disk0,id=virtio-disk0";1. guest boot up correctly (qcow2 format disk does not support shink);Test Case;RedHatEnterpriseLinux7/RHEL7-54073
1253;;;;;;;;;2;" 2.check whether viostor.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled viostor.sys verifier:
    #verifier.exe /standard /driver viostor.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings";"2. Driver can be installed successfully 
 All the Standards flags are checked ,the verified driver fields shows ""viostor.sys"" 
   
​​";;RedHatEnterpriseLinux7/RHEL7-54073
1253;;;;;;;;;3;"3. Initialize the data Disk in disk manager    
     1) start-->run -->diskmgmt.msc
     2) Initialize Disk--> OK
     3) Right click disk 1 --> New Simple Volume --> Next --> Finish";3. in the guest disk manager ,it shows the data disk 10GB size;;RedHatEnterpriseLinux7/RHEL7-54073
1253;;;;;;;;;4;"4. check the disk size on host
 # qemu-img info test.raw";"4. the output should contains the virtual size of data disk:
 data disk:
 image: test.raw
 file format: raw
 virtual size: 10G (10737418240 bytes)
 disk size: 0";;RedHatEnterpriseLinux7/RHEL7-54073
1253;;;;;;;;;5;"5.enlarge data disk image by 20G ( if data disk is 10G ,then enlarge it to 30G)
   telnet $hostip $port
 {""execute"":""qmp_capabilities""}
 {""execute"":""block_resize"",""arguments"":{""device"":""drive-virtio-disk0"",""size"":32212254720 }}";"5.no error returns
    It shows 20G unallocated size  for the virtio disk in disk management.";;RedHatEnterpriseLinux7/RHEL7-54073
1253;;;;;;;;;6;6.format data disk as step 3;6. no error occurs;;RedHatEnterpriseLinux7/RHEL7-54073
1253;;;;;;;;;7;7. check the size of disk on my computer and disk manager;7.data disk has been enlarged to 30G;;RedHatEnterpriseLinux7/RHEL7-54073
1253;;;;;;;;;8;"8.Shink the  data disk,
   1).in disk manager,select the system disk and right click it,then select shrink  (if data disk is 10G has 8 GB unallocated disk size ,then shrink it to 2G 
   2).in monitor,shrink its size.
 {""execute"":""block_resize"",""arguments"":{""device"":""drive-virtio-disk0"",""size"":2147483648 }}";"8.in the guest disk mangater ,it shows 8G unallocated size  for the virtio disk. 
​​";;RedHatEnterpriseLinux7/RHEL7-54073
1253;;;;;;;;;9;9. Go to device manager and check the size of the disk and copy files to itself.;"9. in the guest disk manager ,it shows the datadisk 2GB size and no error occurs
​​";;RedHatEnterpriseLinux7/RHEL7-54073
1253;;;;;;;;;10;"10. check the disk size on host
 qemu-img info win.raw
 qemu-img info test.raw";"10. the output should contains the virtual size of data disk(disk size has been shrinked):
 data disk:
 image: test.raw
 file format: raw
 virtual size: 2.0G (2147483648 bytes)
 disk size: 0 
​​";;RedHatEnterpriseLinux7/RHEL7-54073
1253;;;;;;;;;11;11.reboot the guest;11.Guest still works fine ,no bsod occurs;;RedHatEnterpriseLinux7/RHEL7-54073
1254;RHEL7-54850;[xml validation] Validate guest xml file with valid gl elements;Validate guest xml file with gl elements;Fangge Jin (fjin);Medium;Positive;Manual Only;;1;"gl enable='yes'
 
 # cat /tmp/rhel7.2.xml
 ...
     <graphics type='spice' autoport='no'>
       <gl enable='yes'/>
     </graphics>
 ...
 
 # virt-xml-validate /tmp/rhel7.2.xml 
 /tmp/rhel7.2.xml validates";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-54850
1254;;;;;;;;;2;"gl enable='no'
 
 # cat /tmp/rhel7.2.xml
 ...
     <graphics type='spice' autoport='no'>
       <gl enable='no'/>
     </graphics>
 ...
 
 # virt-xml-validate /tmp/rhel7.2.xml 
 /tmp/rhel7.2.xml validates
​​";​​;;RedHatEnterpriseLinux7/RHEL7-54850
1254;;;;;;;;;3;"no gl element
 
 # cat /tmp/rhel7.2.xml
 ...
   <graphics type='spice' autoport='no'/>
 ...
 
 # virt-xml-validate /tmp/rhel7.2.xml 
 /tmp/rhel7.2.xml validates";​​;;RedHatEnterpriseLinux7/RHEL7-54850
1255;RHEL7-54893;[driver][name][hostdev] check driver for hostdev type interface;for hostdev type, the default driver is vfio, and it can load automatically when the guest start.;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;scenario 1: start guest with vfio related module loaded;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-54893
1255;;;;;;;;;2;"1. prepare an inactive guest with hostdev interafce 
 # virsh dumpxml R7.2 | grep /interface -B6
     <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:c5:60:dc'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x4'/>
       </source>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 confirm the vfio related module is loaded
 (if not, # modprobe vfio)
 # lsmod | grep vfio
 vfio_pci               36948  0
 vfio_iommu_type1       17632  0
 vfio                   26136  2 vfio_iommu_type1,vfio_pci
 irqbypass              13503  2 kvm,vfio_pci";​​;;RedHatEnterpriseLinux7/RHEL7-54893
1255;;;;;;;;;3;"2. start the guest
 # virsh start R7.2
 Domain R7.2 started
​​";"guest start successfully
 vfio related module exists
 
​​";;RedHatEnterpriseLinux7/RHEL7-54893
1255;;;;;;;;;4;"# virsh dumpxml R7.2 | grep /interface -B8
 
 
​​";"    <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:c5:60:dc'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x4'/>
       </source>
       <alias name='hostdev0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";;RedHatEnterpriseLinux7/RHEL7-54893
1255;;;;;;;;;5;# lsmod | grep vfio;"vfio_pci               36948  1
 vfio_iommu_type1       17632  1
 vfio                   26136  5 vfio_iommu_type1,vfio_pci
 irqbypass              13503  8 kvm,vfio_pci
 vfio_pci               36948  1
 vfio_iommu_type1       17632  1
 vfio                   26136  5 vfio_iommu_type1,vfio_pci
 irqbypass              13503  8 kvm,vfio_pci";;RedHatEnterpriseLinux7/RHEL7-54893
1255;;;;;;;;;6;scenario2: start guest without vfio module (same xml as in senario 1);​​;;RedHatEnterpriseLinux7/RHEL7-54893
1255;;;;;;;;;7;"1. remove the vfio related module
 # virsh destroy R7.2
 # lsmod | grep vfio
 vfio_pci               36948  0
 vfio_iommu_type1       17632  0
 vfio                   26136  2 vfio_iommu_type1,vfio_pci
 irqbypass              13503  2 kvm,vfio_pci
 
 # modprobe -r  vfio_pci
 # modprobe -r vfio_iommu_type1
 # lsmod | grep vfio
 #
 
​​";"no vfio related module
 # lsmod | grep vfio
 #";;RedHatEnterpriseLinux7/RHEL7-54893
1255;;;;;;;;;8;"2. # virsh start R7.2 
 
​​";"guest can start after remove the vfio module on host. and the vfio module will be loaded automatically when the guest start.
​​";;RedHatEnterpriseLinux7/RHEL7-54893
1255;;;;;;;;;9;# virsh dumpxml R7.2 | grep /interface -B8;"interface use vfio driver automatically
 # virsh dumpxml R7.2 | grep /interface -B8
     <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:c5:60:dc'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x4'/>
       </source>
       <alias name='hostdev0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-54893
1255;;;;;;;;;10; 3. # lsmod | grep vfio;"after R7.2 started, the vfio related module load automatically
 # lsmod | grep vfio
 vfio_iommu_type1       17632  1
 vfio_pci               36949  1
 vfio                   26136  5 vfio_iommu_type1,vfio_pci
 irqbypass              13503  3 kvm,vfio_pci";;RedHatEnterpriseLinux7/RHEL7-54893
1256;RHEL7-54936;WALA-TC: [General] Start waagent service repeatedly;WALA-TC: [General] Start waagent service repeatedly;Yuxin Sun (yuxisun);Medium;Positive;Automated;;1;"Prepare a VM named VM-test and login.
 1. Execute ""service waagent start"" twice. Check the daemon process.
 # ps aux|grep waagent";"There should be only one of each process.
 /usr/bin/python -u /usr/sbin/waagent -daemon
 python -u /usr/sbin/waagent -run-exthandlers";Test Case;RedHatEnterpriseLinux7/RHEL7-54936
1256;;;;;;;;;2;config;​​;;RedHatEnterpriseLinux7/RHEL7-54936
1257;RHEL7-54939;WALA-TC: [General] Check the waagent log;WALA-TC: [General] Check the waagent log;Yuxin Sun (yuxisun);Medium;Positive;Automated;;1;"Prepare a VM on Azure.
 1.1 Enable Verbose log in /etc/waagent.conf
 Logs.Verbose=y
 1.2 Deprovision this VM.
 ASM mode: Capture this VM as an image and create a new VM base on that.
 ARM mode: Create a VM base on this osdisk.";Verbose log is enabled.;Test Case;RedHatEnterpriseLinux7/RHEL7-54939
1257;;;;;;;;;2;2. Check the /var/log/waagent.log;There's no error logs during deprovision, provision and running processes.;;RedHatEnterpriseLinux7/RHEL7-54939
1257;;;;;;;;;3;config;​​;;RedHatEnterpriseLinux7/RHEL7-54939
1258;RHEL7-55110;WALA-TC: [Storage] Attach and Detach 64 disks;WALA-TC: [Storage] Attach and Detach 64 disks;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Prepare a VM of GS5 size in Azure.
 1.1 Attach 64 new disks on the VM. Disk size: 1023G.
 1.2 Check these disks' size in VM.
 # fdisk -l";"All the disks can be attached to the VM without error. The VM works well.
 All the disks are 1023G inside the VM";Test Case;RedHatEnterpriseLinux7/RHEL7-55110
1258;;;;;;;;;2;"2. Detach these 64 disks. Check the disks inside the VM.
 # fdisk -l";All the disks are detached without error. There's no data disks inside the VM. ;;RedHatEnterpriseLinux7/RHEL7-55110
1258;;;;;;;;;3;config;​​;;RedHatEnterpriseLinux7/RHEL7-55110
1259;RHEL7-55111;WALA-TC: [Settings] Reset remote access successively;WALA-TC: [Settings] Reset remote access successively;Yuxin Sun (yuxisun);Medium;Positive;Automated;;1;1. Prepare a VM on Azure (ASM mode).;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-55111
1259;;;;;;;;;2;"2. Run ""Reset remote access"", then check the /etc/ssh/sshd_config";It makes a backup of the old sshd_config and generates a new file.;;RedHatEnterpriseLinux7/RHEL7-55111
1259;;;;;;;;;3;"3. Run ""Reset remote access"" again, then check the /etc/ssh/sshd_config";It makes a backup of the old sshd_config and generates a new file.;;RedHatEnterpriseLinux7/RHEL7-55111
1259;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-55111
1260;RHEL7-55112;WALA-TC: [Settings] Reset password after capture;WALA-TC: [Settings] Reset password after capture;Yuxin Sun (yuxisun);Medium;Positive;Automated;;1;1. Prepare a VM on Azure (ASM mode).;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-55112
1260;;;;;;;;;2;"2. Run ""reset password""";Can login with the new password;;RedHatEnterpriseLinux7/RHEL7-55112
1260;;;;;;;;;3;3. Capture this VM as an image(don't deprovision), and create a new VM base on this image.;​​;;RedHatEnterpriseLinux7/RHEL7-55112
1260;;;;;;;;;4;"4. On the new VM, run ""reset password""";Can login with the new password;;RedHatEnterpriseLinux7/RHEL7-55112
1260;;;;;;;;;5;config;​​;;RedHatEnterpriseLinux7/RHEL7-55112
1261;RHEL7-55113;WALA-TC: [Settings] Reset password to different authenticate method;WALA-TC: [Settings] Reset password to different authenticate method;Yuxin Sun (yuxisun);Medium;Positive;Automated;;1;1. Prepare a VM on Azure (ASM mode). User account authenticates with ssh_key.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-55113
1261;;;;;;;;;2;"2. Run ""reset password"", add a new user which authenticates with password.
 Check if can login with the new user account from other workstations through password.";Can login with the new user account through password.;;RedHatEnterpriseLinux7/RHEL7-55113
1261;;;;;;;;;3;3. Prepare a VM on Azure (ASM mode). User account authenticates with password.;​​;;RedHatEnterpriseLinux7/RHEL7-55113
1261;;;;;;;;;4;"4. Run ""reset password"", reset the current user account that  authenticates with ssh_key.
 Check if can login through ssh_key.";Can login with the current user account through ssh_key.;;RedHatEnterpriseLinux7/RHEL7-55113
1261;;;;;;;;;5;config;​​;;RedHatEnterpriseLinux7/RHEL7-55113
1262;RHEL7-55114;[net-update] add/delete dns section (dns-srv dns-txt dns-host) by net-update - bug 1341460;update dns-srv, dns-txt in the network will trigger a dnsmasq restart to pick the change, will update the dns-host only need to write to the addnhosts file, no need a restart to dnsmasq.(update ip-dhcp-range, will trigger dnsmasq to restart, too, as above, but update the ip-dhcp-host, will not trigger dnsmasq restart, only modify dhcphosts file);Yalan Zhang (yalzhang);Critical;Positive;Automated;;1;"prepare a network with dns defined as below: 
 # virsh net-start network
 # virsh net-dumpxml network
 <network>
   <name>network</name>
   <uuid>2531df5b-adf0-471f-95f7-68d627053342</uuid>
   <bridge name='virbr2' stp='on' delay='0'/>
   <mac address='52:54:00:90:a1:29'/>
   <domain name='example.com'/>
   <dns>
     <txt name='example' value='example value'/>
     <srv service='name' protocol='tcp' domain='test-domain-name' target='englab.nay.redhat.com' port='1024' priority='10' weight='10'/>
     <host ip='192.168.10.2'>
       <hostname>myhost</hostname>
       <hostname>myhostalias</hostname>
     </host>
   </dns>
   <ip address='192.168.10.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.10.2' end='192.168.10.254'/>
     </dhcp>
   </ip>
 </network>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;2;"1. check the config file
 # cat /var/lib/libvirt/dnsmasq/network.conf
 ##WARNING:  THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE
 ##OVERWRITTEN AND LOST.  Changes to this configuration should be made using:
 ##    virsh net-edit network
 ## or other application using the libvirt API.
 ##
 ## dnsmasq conf file created by libvirt
 strict-order
 domain=example.com
 expand-hosts
 pid-file=/var/run/libvirt/network/network.pid
 except-interface=lo
 bind-dynamic
 interface=virbr2
 dhcp-option=3
 no-resolv
 ** txt-record=example,example value  **
 ** srv-host=_name._tcp.test-domain-name,englab.nay.redhat.com,1024,10,10 **
 dhcp-range=192.168.10.2,192.168.10.254
 dhcp-no-override
 dhcp-lease-max=253
 dhcp-hostsfile=/var/lib/libvirt/dnsmasq/network.hostsfile
 addn-hosts=/var/lib/libvirt/dnsmasq/network.addnhosts
 
 # cat /var/lib/libvirt/dnsmasq/network.addnhosts
 192.168.10.2    myhost    myhostalias    
​​";​​;;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;3;"2. # virsh net-update network delete dns-srv ""<srv service='name' protocol='tcp'/>""
 
 
​​"; Updated network network live state;;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;4;"3. check the config file just as step 2
 # cat /var/lib/libvirt/dnsmasq/network.conf
​​";"** srv-host=_name._tcp.test-domain-name,englab.nay.redhat.com,1024,10,10 ** is gone.
 
 (after delete the dns-srv, the dnsmaq will restart to get the change and the config file will changed immediately,and the srv can not be resolved in the guest any more.)";;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;5;"4. # virsh net-update network delete dns-txt ""<txt name='example'/>""
​​";"Updated network network live state
​​";;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;6;"5. check the config file just as step2
 # cat /var/lib/libvirt/dnsmasq/network.conf
​​";** txt-record=example,example value  ** is gone.;;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;7;"6. check the network xml , there are no srv or txt setting in dns section
 # virsh net-dumpxml network
 
​​";"<network>
   <name>network</name>
   <uuid>2531df5b-adf0-471f-95f7-68d627053342</uuid>
   <bridge name='virbr2' stp='on' delay='0'/>
   <mac address='52:54:00:90:a1:29'/>
   <domain name='example.com'/>
   <dns>
     <host ip='192.168.10.2'>
       <hostname>myhost</hostname>
       <hostname>myhostalias</hostname>
     </host>
   </dns>
   <ip address='192.168.10.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.10.2' end='192.168.10.254'/>
     </dhcp>
   </ip>
 </network>
​​";;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;8;"6. #  virsh net-update network delete dns-host ""<host ip='192.168.10.2'/>""
 
 
​​";"Updated network network live state
​​";;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;9;"7. #  cat /var/lib/libvirt/dnsmasq/network.addnhosts
 #";"no output 
 (no content in the network.addnhosts file)";;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;10;8. # virsh net-dumpxml network;"<network>
   <name>network</name>
   <uuid>2531df5b-adf0-471f-95f7-68d627053342</uuid>
   <bridge name='virbr2' stp='on' delay='0'/>
   <mac address='52:54:00:90:a1:29'/>
   <domain name='example.com'/>
   <ip address='192.168.10.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.10.2' end='192.168.10.254'/>
     </dhcp>
   </ip>
 </network>
 
 (no dns section )";;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;11;modify;​​;;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;12;"# virsh net-update network  modify dns-srv ""<srv service='name' protocol='udp' domain='test-domain-test' target='englab.nay.redhat.com' port='1024' priority='10' weight='10'/>""
 error: Failed to update network network
 error: Operation not supported: DNS SRV records cannot be modified, only added or deleted
 
 # virsh net-update network  modify dns-txt ""<txt name='example' value='value'/>""
 error: Failed to update network network
 error: Operation not supported: DNS TXT records cannot be modified, only added or deleted
 
 # virsh net-update network modify dns-host host.xml
 error: Failed to update network network
 error: Operation not supported: DNS HOST records cannot be modified, only added or deleted
​​";as steps;;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;13;add;​​;;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;14;"1. # virsh net-update network add dns-txt ""<txt name='example2' value='value2'/>""
​​";"Updated network network live state
 
​​";;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;15;"2. check the txt record can be added
 # virsh net-dumpxml network";"... 
 <dns>
     <txt name='example' value='example value'/>
     <txt name='example2' value='value2'/>
 </dns>
 ...";;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;16;"3. check the new record is added in the config file
 # cat /var/lib/libvirt/dnsmasq/network.conf";"...
 txt-record=example2,value2
 ...";;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;17;"4. # virsh net-update network add dns-srv ""<srv service='service' protocol='tcp' domain='test' target='englab.nay.redhat.com' port='1024' priority='10' weight='10'/>""
​​";"Updated network network live state
​​";;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;18;5. # virsh net-dumpxml network;the new srv record is added into the network's xml;;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;19;6.  # cat /var/lib/libvirt/dnsmasq/network.conf;the srv record is added into the config file;;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;20;"7. # cat host.xml
  <host ip='192.168.122.2'>
   <hostname>myhost</hostname>
    <hostname>myhostalias</hostname>
 </host>
 # virsh net-list
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  network              active     no            yes
​​";​​;;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;21;8. # virsh net-update network add dns-host host.xml;Updated network network live state;;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;22;9. # cat /var/lib/libvirt/dnsmasq/network.addnhosts;192.168.122.2    myhost    myhostalias   ;;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;23;10. # virsh net-dumpxml network;"...
  <dns>
     <host ip='192.168.122.2'>
       <hostname>myhost</hostname>
       <hostname>myhostalias</hostname>
     </host>
   </dns>
 ...";;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;24;"modify dns section when the dns enable=no
​​";​​;;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;25;"# virsh net-dumpxml network
 <network>
   <name>network</name>
   <uuid>2531df5b-adf0-471f-95f7-68d627053342</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr2' stp='on' delay='0'/>
   <mac address='52:54:00:90:a1:29'/>
   <domain name='example.com'/>
   <dns enable='no'/>
   <ip address='192.168.10.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.10.2' end='192.168.10.254'/>
     </dhcp>
   </ip>
 </network>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;26;"1. #  virsh net-update network add dns-txt ""<txt name='example2' value='value2'/>""";"error: Failed to update network network
 error: XML error: Extra data in disabled network 'network'";;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;27;"2. #  virsh net-update network add dns-srv ""<srv service='service' protocol='tcp' domain='test' target='englab.nay.redhat.com' port='1024' priority='10' weight='10'/>""";"error: Failed to update network network
 error: XML error: Extra data in disabled network 'network'";;RedHatEnterpriseLinux7/RHEL7-55114
1262;;;;;;;;;28;3. # virsh net-update network add dns-host host.xml;"error: Failed to update network network
 error: XML error: Extra data in disabled network 'network'";;RedHatEnterpriseLinux7/RHEL7-55114
1263;RHEL7-55237;[libvirtd][config]Check the default value of max_anonymous_clients;Check the default value of max_anonymous_clients;Yan Fu (yafu);Medium;Positive;Not Automated;;1;"max_anonymous_clients
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-55237
1263;;;;;;;;;2;"1. Check the description in libvirtd.conf:
 
 # The maximum length of queue of accepted but not yet
 # authenticated clients. The default value is 20. Set this to
 # zero to turn this feature off.
 #max_anonymous_clients = 20
​​";​​;;RedHatEnterpriseLinux7/RHEL7-55237
1263;;;;;;;;;3;"2.Start a guest:
 #virsh start rhel7.3";​​;;RedHatEnterpriseLinux7/RHEL7-55237
1263;;;;;;;;;4;"3.Check the default value of max_anonymous_clients:
 # cat /var/log/libvirt/libvirtd.log | grep -i clients_unauth_max";"3.
 2017-09-25 10:55:01.899+0000: 26062: debug : virNetServerCheckLimits:252 : Checking client-related limits to re-enable or temporarily suspend services: nclients=1 nclients_max=100000 nclients_unauth=1 ****nclients_unauth_max=20****
​​";;RedHatEnterpriseLinux7/RHEL7-55237
1264;RHEL7-57597;[cpu][cpu hotplug]do S4 after hotpluging cpu;Do S4 after hotpluging cpu;Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-57597
1265;RHEL7-57598;[cpu][cpu hotplug]do S3 after hotpluging cpu;"Do S3 after hotpluging cpu
";Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-57598
1266;RHEL7-57599;[cpu][cpu models]support Skylake cpu model with MPX and AVX512 (not supported in RHEL7.2);support Skylake cpu model with MPX and AVX512 (not supported in RHEL7.2);Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-57599
1267;RHEL7-57600;[cpu][cpu models]support Skylake cpu model without XSAVEC/XSAVES (not supported in RHEL7.2);"support Skylake cpu model without XSAVEC/XSAVES (not supported in RHEL7.2)
";Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-57600
1268;RHEL7-57601;[cpu][steal time] Verify that report steal time properly after a guest s4.;Verify that report steal time properly after a guest s4.;Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-57601
1269;RHEL7-57602;[cpu][steal time] Verify that report steal time properly after a guest s3;Verify that report steal time properly after a guest s3;Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-57602
1270;RHEL7-58069;* Verify the hook script is executed before libvirt performs any resource labeli...;"* Verify the hook script is executed before libvirt performs any resource labeling
* Verify the hook script is executed after libvirt has finished labeling all resources, but has not yet started the guest
* Verify the hook script is executed after the QEMU process has successfully started up
* Verify the hook script is executed before libvirt restores any labels When a QEMU guest is stopped
* Verify the hook script is executed after libvirt has released all resources
* Verify the hook script is executed at the beginning of incoming migration
* Verify the hook script is executed when restoring a saved image or automatically when restoring a managed save machine (New feature for rhel7.1)
  * Test a qemu hook with empty output when restoring a saved domain
  * Test a qemu hook for modifying disk path when restoring a saved domain
  * Test a qemu hook with empty output when restoring managedsaved domain
  * Test a qemu hook for modifying disk path when restoring a managedsaved domain
* Verify the hook script is executed when the libvirtd daemon restarts and reconnects to previously running QEMU processes
* Verify the hook script is executed when the QEMU driver is told to attach to an externally launched QEMU process
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-58069
1271;RHEL7-58635;[cpu][hotplug] Boot guest with 1 CPU, hotplug max vCPUs and run stress tool for all vcpus inside guest and poweroff guest;"Boot guest with 1 CPU,hotplug max vcpus and and run stress tool for all vcpus inside guest and poweroff guest.qemu-kvm only support 240 vcpu and qemu-rhev support 255 vcpu. Windows 7/8/8.1/10 support max 256 logical cpu and windows server 2012 r2 support vcpu > 288.
";Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-58635
1272;RHEL7-58674;[virtual desktop][virtio-vga/virtio-gpu-pci]query options of virtio-vga/virtio-gpu-pci devices;Query options of virtio-vga and virtio-gpu-pci through qemu cmd and inside qemu monitor;Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-58674
1273;RHEL7-58690;[Video devices] Start a guest with multiple videos and without primary attribute;The first video device will be marked as primary automatically;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) multiple videos
 2) don't specify primary video";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-58690
1273;;;;;;;;;2;"Check guest xml:
 # virsh dumpxml rhel7.2
​​";"The first video element is marked as primary:
 
 Output:
 ...
     <video>
       <model type='qxl' ram='65536' vram='16384' vgamem='16384' heads='1' primary='yes'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>
     </video>
     <video>
       <model type='qxl' ram='65536' vram='16384' vgamem='16384' heads='2'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </video>
     <video>
       <model type='qxl' ram='65536' vram='16384' vgamem='16384' heads='3'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </video>
​​";;RedHatEnterpriseLinux7/RHEL7-58690
1273;;;;;;;;;3;"# virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-58690
1273;;;;;;;;;4;# virsh dumpxml rhel7.2;"Output:
 ...
     <video>
       <model type='qxl' ram='65536' vram='16384' vgamem='16384' heads='1' primary='yes'/>
       <alias name='video0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>
     </video>
     <video>
       <model type='qxl' ram='65536' vram='16384' vgamem='16384' heads='2'/>
       <alias name='video1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </video>
     <video>
       <model type='qxl' ram='65536' vram='16384' vgamem='16384' heads='3'/>
       <alias name='video2'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </video>";;RedHatEnterpriseLinux7/RHEL7-58690
1274;RHEL7-58691;[Video devices] Start a guest without video device and without graphic device;video device will not be added into guest xml by libvirt automatically if graphics is NOT set in domain xml.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Define guest or edit guest with such setting:
 1) No video device
 2) No graphic device
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-58691
1274;;;;;;;;;2;"Check the guest's XML:
 # virsh dumpxml rhel7 |grep video";<video> elements doesn't exist.;;RedHatEnterpriseLinux7/RHEL7-58691
1274;;;;;;;;;3;"Start guest
 # virsh start rhel7";"Still no <video> elements after guest start.
​​";;RedHatEnterpriseLinux7/RHEL7-58691
1275;RHEL7-58694;[Video devices] Start a guest with multiple videos and one video with primary='yes';The video device with primary='yes' will be the primary video device;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) multiple videos
 2) one video is set as primary";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-58694
1275;;;;;;;;;2;"Check guest xml:
 # virsh dumpxml rhel7.2|grep video -a4
​​";"The second video is marked as primary.
 
 Output:
 ...
     <video>
       <model type='qxl' ram='65536' vram='16384' vgamem='16384' heads='2' primary='yes'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </video>
     <video>
       <model type='qxl' ram='65536' vram='16384' vgamem='16384' heads='1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>
     </video>
     <video>
       <model type='qxl' ram='65536' vram='16384' vgamem='16384' heads='3'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </video>
​​";;RedHatEnterpriseLinux7/RHEL7-58694
1275;;;;;;;;;3;"# virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-58694
1275;;;;;;;;;4;# virsh dumpxml rhel7.2|grep video -a4;"Output:
 ...
     <video>
       <model type='qxl' ram='65536' vram='16384' vgamem='16384' heads='2' primary='yes'/>
       <alias name='video0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </video>
     <video>
       <model type='qxl' ram='65536' vram='16384' vgamem='16384' heads='1'/>
       <alias name='video1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>
     </video>
     <video>
       <model type='qxl' ram='65536' vram='16384' vgamem='16384' heads='3'/>
       <alias name='video2'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </video>";;RedHatEnterpriseLinux7/RHEL7-58694
1276;RHEL7-58695;[Video devices] Start a guest with only one video element and without primary attribute;The only one video device will be the primary video device.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) only one video element 
 2) don't specify primary video";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-58695
1276;;;;;;;;;2;"Dump guest xml:
 # virsh dumpxml rhel7.2
​​";"The only video device is marked as primary by libvirt automatically.
 
 Output: 
 ...
     <video>
       <model type='cirrus' vram='16384' heads='1' primary='yes'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>
     </video>
 ...
​​";;RedHatEnterpriseLinux7/RHEL7-58695
1276;;;;;;;;;3;# virsh start rhel7.2;​​;;RedHatEnterpriseLinux7/RHEL7-58695
1276;;;;;;;;;4;"# virsh dumpxml rhel7.2|grep video -A4
​​";"Output: 
 ...
     <video>
       <model type='cirrus' vram='16384' heads='1' primary='yes'/>
       <alias name='video0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>
     </video>
 ...";;RedHatEnterpriseLinux7/RHEL7-58695
1277;RHEL7-58696;[Video devices] Start a guest with only one video element and with primary='yes';The only one video device will be the primary video device.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) only one video element 
 2) set the only video as primary video";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-58696
1277;;;;;;;;;2;"Dump guest xml:
 # virsh dumpxml rhel7.2
​​";"The only one video is marked as primary:
 
 Output:
 ...
     <video>
       <model type='cirrus' vram='16384' heads='1' primary='yes'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>
     </video>
 ...";;RedHatEnterpriseLinux7/RHEL7-58696
1277;;;;;;;;;3;# virsh start rhel7.2;​​;;RedHatEnterpriseLinux7/RHEL7-58696
1277;;;;;;;;;4;# virsh dumpxml rhel7.2;"Output:
 ...
     <video>
       <model type='cirrus' vram='16384' heads='1' primary='yes'/>
       <alias name='video0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>
     </video>
 
​​";;RedHatEnterpriseLinux7/RHEL7-58696
1278;RHEL7-58725;Modern architectures have the ability to use huge pages, such as 4MB on x86_32, 2MB on x86_64 and x86_32 PAE. From libvirt-0.7.1 on, support exists for configuration of huge pages in KVM guests.;Modern architectures have the ability to use huge pages, such as 4MB on x86_32, 2MB on x86_64 and x86_32 PAE. From libvirt-0.7.1 on, support exists for configuration of huge pages in KVM guests.;Jingjing Shao (jishao);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-58725
1279;RHEL7-58751;check_scsi_wwn;check_scsi_wwn;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-58751
1280;RHEL7-58752;check_scsi_vpd;check_scsi_vpd;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-58752
1281;RHEL7-58759;Fujitsu-bz989795;Fujitsu-bz989795;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-58759
1282;RHEL7-58777;[Timer devices] Check clock adjustment in guest xml after adjust guest rtc time inside guest during libvirtd is down and restart libvirtd;"Verify that after libvirtd is restarted, it will query the latest guest RTC offset from qemu and set active domain xml
 Bug 1139766 - need a non-event way to determine qemu's current offset from utc";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;Edit or define a guest with rtc offset set to variable;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-58777
1282;;;;;;;;;2;"Start the guest, and use virt-viewer to connect:
 # virsh start rhel7
 # virt-viewer rhel7
​​";​​;;RedHatEnterpriseLinux7/RHEL7-58777
1282;;;;;;;;;3;"Stop libvirtd service
 # systemctl stop libvirtd
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-58777
1282;;;;;;;;;4;"In guest by virt-viewer, adjust hwclock forward by 10 mins again:
 # ./addsecs 600
​​";​​;;RedHatEnterpriseLinux7/RHEL7-58777
1282;;;;;;;;;5;"Start libvirtd service:
 # systemctl start libvirtd";​​;;RedHatEnterpriseLinux7/RHEL7-58777
1282;;;;;;;;;6;"Check the time offset in domain dumpxml:
 # virsh dumpxml rhel7
 
​​";"The adjustment value is added 600 approximately.
 
 Output: 
 <clock offset='variable' adjustment='1198' basis='utc'/>
​​";;RedHatEnterpriseLinux7/RHEL7-58777
1283;RHEL7-58778;[Timer devices] Check clock adjustment in guest xml after adjust guest rtc time and live migration;"Verify guest clock adjustment keeps unchanged after adjustment guest rtc time && live migration
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;Edit or define a guest with rtc offset set to variable;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-58778
1283;;;;;;;;;2;# virsh start rhel7;​​;;RedHatEnterpriseLinux7/RHEL7-58778
1283;;;;;;;;;3;"In guest, adjust hwclock forward by 10 mins via a script(named ""addsecs"", in the attachment).
 
 # hwclock;date
 
 # ./addsecs 600
 
 # hwclock;date
​​";"After adjust hwclock by script, the hwclock time is 10 mins ahead of date.
 
 Output:
 # hwclock;date
 Mon 27 Jun 2016 04:22:06 PM CST -0.636120 seconds
 Mon Jun 27 16:22:05 CST 2016
 
 # ./addsecs 600
 
 # hwclock;date
 Mon 27 Jun 2016 04:32:21 PM CST -0.727867 seconds
 Mon Jun 27 16:22:20 CST 2016";;RedHatEnterpriseLinux7/RHEL7-58778
1283;;;;;;;;;4;"Check the time offset in domain dumpxml:
 # virsh dumpxml rhel7.2-min
​​";"The adjustment value is added 600 approximatively.
 
 Output:
 ... 
 <clock offset='variable' adjustment='1198' basis='utc'/>";;RedHatEnterpriseLinux7/RHEL7-58778
1283;;;;;;;;;5;"Do migration:
 # virsh migrate rhel7.2-min qemu+ssh://hp-dl385g7-05.lab.eng.pek2.redhat.com/system --live --verbose 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-58778
1283;;;;;;;;;6;"Check the clock adjustment in domain dumpxml on target host:
 # virsh dumpxml rhel7.2-min
​​";"The adjustment value is same as before migration.
 
 Output:
 ... 
 <clock offset='variable' adjustment='1198' basis='utc'/>
​​";;RedHatEnterpriseLinux7/RHEL7-58778
1283;;;;;;;;;7;"In guest:
 # hwclock;date
 
​​";"The hwclock time and date time are continued seamlessly. 
 
 For example, in my case:
 hwclock is about 20 mins ahead of the real time
 date is about 10 mins ahead of the real time.
 
 Output:
 Mon 27 Jun 2016 04:36:21 PM CST -0.737651 seconds
 Mon Jun 27 16:26:20 CST 2016
​​";;RedHatEnterpriseLinux7/RHEL7-58778
1284;RHEL7-58978;[virtual Networks] Start a guest with non-exists rom file - bug 1335534; Start a guest with non-exists rom file;Yalan Zhang (yalzhang);Low;Negative;Not Automated;;1;"1. Start a guest with cpu feature defined.
 # virsh dumpxml rh7.2
 ....
  <cpu mode='custom' match='exact'>
     <model fallback='allow'>Penryn</model>
     <vendor>Intel</vendor>
     <feature policy='require' name='osxsave'/>
     <feature policy='require' name='xsave'/>
     <feature policy='require' name='pdcm'/>
     <feature policy='require' name='xtpr'/>
     <feature policy='require' name='tm2'/>
     <feature policy='require' name='est'/>
     <feature policy='require' name='vmx'/>
     <feature policy='require' name='ds_cpl'/>
     <feature policy='require' name='monitor'/>
     <feature policy='require' name='dtes64'/>
     <feature policy='require' name='pbe'/>
     <feature policy='require' name='tm'/>
     <feature policy='require' name='ht'/>
     <feature policy='require' name='ss'/>
     <feature policy='require' name='acpi'/>
     <feature policy='require' name='vme'/>
   </cpu>
 ....
    <interface type='network'>
       <mac address='52:54:00:cc:cb:46'/>
       <source network='default'/>
       <model type='virtio'/>
       <rom bar='on' file='/usr/share/ipxe/1af41000.rom'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 .......
 # virsh start rh7.2
 Domain rh7.2 started
 
 
​​";"You can use below steps to get the feature policy
 # virsh capabilities > cap.xml
 # virsh cpu-baseline cap.xml
 and you will get the capabilities supported by the host, then copy it into the guest's xml.
 
 Guest can start successfully.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-58978
1284;;;;;;;;;2;"2. Destroy the guest, then edit the rom file path in the interface section to a non-exists one, and start the guest.
 # virsh destroy rh7.2
 # virsh edit rh7.2
 
 # virsh dumpxml rh7.2 | grep ""rom bar""
       <rom bar='on' file='/usr/ssssjdffdfd.rom'/>
 
 # virsh start rh7.2
​​";"The error message should include something about failed to find the rom file, like
 ""-device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:54:00:cc:cb:46,bus=pci.0,addr=0x3,rombar=1,romfile=/usr/ssssjdffdfd.rom: failed to find romfile ""/usr/ssssjdffdfd.rom""""
​​";;RedHatEnterpriseLinux7/RHEL7-58978
1285;RHEL7-58989;[migrate] [--live] - Live migrate domain to another host with shared image.;Live migrate domain to another host with shared image.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"On source machine A:
 
 Prepare a guest that uses the shared image:
 # virsh dumpxml rhel7
     <disk type='file' device='disk'>
       <driver name='qemu' type='qcow2' cache='none' />
       <source file='/nfs/fjin/rhel7.2.qcow2'/>
       <target dev='vda' bus='virtio'/>
     </disk>
 
 # virsh domblklist rhel7.2
 Target     Source
 ------------------------------------------------
 vda        /nfs/fjin/rhel7.2.qcow2
 
 # virsh start rhel7.2
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-58989
1285;;;;;;;;;2;"Do migration:
 virsh migrate rhel7 qemu+ssh://<machine b's IP>/system --live --verbose
 Migration: [100%]
​​";"You can see the migration process before migration completes
​​";;RedHatEnterpriseLinux7/RHEL7-58989
1285;;;;;;;;;3;"After migration completes, on machine A:
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  -     rhel7.2                        shut off
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-58989
1285;;;;;;;;;4;"On machine B:
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  -     rhel7.2                       running";"Do some operation inside guest, guest works well on machine B.
​​";;RedHatEnterpriseLinux7/RHEL7-58989
1286;RHEL7-58990;[migrate] [--copy-storage-all] - Live migrate domain to another host without shared image.;"Bug 1219541 - virsh migrate --copy-storage-all fails to preserve sparse disk image 
 Bug 1371749 - virsh migrate --copy-storage-all genrates a qcow2v2 image on target even if qcow2v3 image is used on source";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"On both source machine A and target machine B:
 
 1) prepare a storage pool
 # virsh pool-list
  Name                 State      Autostart 
 -------------------------------------------
  default              active     yes      
 
 
 2) prepare a volume in the storage pool:
 # virsh vol-list default
  Name                 Path                                    
 ------------------------------------------------------------------------------
  rhel7.2.qcow2        /var/lib/libvirt/images/rhel7.2.qcow2   
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-58990
1286;;;;;;;;;2;"On source machine A, prepare a running guest that uses a volume in the storage pool.
 
 # virsh domblklist mig
 Target     Source
 ------------------------------------------------
 vda        /var/lib/libvirt/images/rhel7.2.qcow2
 
 
 # virsh start mig
 
 # virsh list
 13 mig running";"
 
​​";;RedHatEnterpriseLinux7/RHEL7-58990
1286;;;;;;;;;3;"Do migration with --copy-storage-all: migration with non-shared storage with full disk copy:
 #virsh migrate --copy-storage-all mig qemu+ssh://10.66.6.38/system --live
​​";"The command will cost a long time. Please be patient.
​​";;RedHatEnterpriseLinux7/RHEL7-58990
1286;;;;;;;;;4;"After migration completes:
 
 On source machine A:
 #virsh list --all
 Id Name State
 ----------------------------------------------------
 - mig shut off
​​";​​;;RedHatEnterpriseLinux7/RHEL7-58990
1286;;;;;;;;;5;"On target machine B:
 # virsh list --all
 Id Name State
 ----------------------------------------------------
 11 mig running";Guest works well on target host.;;RedHatEnterpriseLinux7/RHEL7-58990
1286;;;;;;;;;6;"On target machine B:
 # qemu-img info /var/lib/libvirt/images/rhel7.2.qcow2
 image: /var/lib/libvirt/images/rhel7.2.qcow2
 file format: qcow2
 virtual size: 9.0G (9663676416 bytes)
 disk size: 3.7G
 cluster_size: 65536
 Format specific information:
     compat: 1.1
     lazy refcounts: true
     refcount bits: 16
     corrupt: false
​​";"The image info should be same on source and target host
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-58990
1287;RHEL7-58995;[migrate-postcopy] - Switch to post-copy during pre-copy migration using the migrate-postcopy command;;Fangge Jin (fjin);Medium;Positive;Automated;;1;" On KVM hypervisor
 1, Select two machine with the same CPU types"; All operations should complete successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-58995
1287;;;;;;;;;2;"define a guest with full xml
 refer link: https://mojo.redhat.com/docs/DOC-1004284
";no error;;RedHatEnterpriseLinux7/RHEL7-58995
1287;;;;;;;;;3;start guest, use virt-viewer to connect the guest;the guest can be started successfully;;RedHatEnterpriseLinux7/RHEL7-58995
1287;;;;;;;;;4;"make some load within the guest(using stress tools)
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-58995
1287;;;;;;;;;5;"do migration with post-copy enabled
 #virsh migrate $guest_name --live qemu+ssh://target_ip/system --verbose --unsafe --postcopy
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-58995
1287;;;;;;;;;6;"when migration in progress, open another console to run:
 #virsh migrate-postcopy $guest
​​";"verify target guest start immediately
 verify migrate complete successfully
 verify virt-viewer does not disconnect to the guest

";;RedHatEnterpriseLinux7/RHEL7-58995
1288;RHEL7-59055;[panic device] Test a domain with 247-character name-length - panic device;"Test a domain with 247-character name-length - panic device
            
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1)Prepare a domain xml with 247-character domain name length and panic device:
 # cat /tmp/rhel7.2-1030.xml
  <name>1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111</name>
   <on_crash>coredump-restart</on_crash>
   <devices>
 ...
     <panic model='isa'>
       <address type='isa' iobase='0x505'/>
     </panic>

";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59055
1288;;;;;;;;;2;"2) Define&Start guest
 # virsh define /tmp/rhel7.2-1030.xml
 # virsh start 1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111";​​;;RedHatEnterpriseLinux7/RHEL7-59055
1288;;;;;;;;;3;"3) In guest, crash guest by:
 # echo c >/proc/sysrq-trigger";​​;;RedHatEnterpriseLinux7/RHEL7-59055
1288;;;;;;;;;4;"4)) Guest will generate a dump file and restarts:
 # ll /var/lib/libvirt/qemu/dump/30-11111111111111111111-2016-05-05-21\:01\:06 
 -rw-------. 1 root root 1394749088 5月   5 21:01 /var/lib/libvirt/qemu/dump/30-11111111111111111111-2016-05-05-21:01:06";​​;;RedHatEnterpriseLinux7/RHEL7-59055
1289;RHEL7-59057;Test a domain with special characters in domain name - starting with '.';"Bug 1333248 - Libvirt rejects object name starting with '.'
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" prepare a domain for example with '.'
 in character
 
 #virsh define rhel76.xml
 # virsh list --all
​​";"  Id    Name                           State
 ----------------------------------------------------
 
  -     rhel7.6                        shut off
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-59057
1289;;;;;;;;;2;"Create:
 #virsh create rhel76.xml
​​";"Domain rhel7.6 created from test.xml
 
​​";;RedHatEnterpriseLinux7/RHEL7-59057
1290;RHEL7-59058;Test a domain with special characters in domain name - ',' and '=';"Bug 639926 - libvirt qemu driver should disallow domain names containing comma
 Bug 1276485 - qemu: VM name can't contain '='";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;Scenario 1: include ',' in domain name;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59058
1290;;;;;;;;;2;"0.
 Set vnc_auto_unix_socket=1 in qemu.conf and restart libvirtd service
 # systemctl restart libvirtd
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59058
1290;;;;;;;;;3;"1. Prepare a domain xml with 248-character domain name length, guest agent and vnc graphic device:
 # cat /tmp/rhel7,2.xml
  <name>rhel7,2</name>
   <devices>
 ...
     <channel type='unix'>
       <source mode='bind'/>
       <target type='virtio' name='org.qemu.guest_agent.0'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>
     <graphics type='vnc' autoport='yes'/>";​​;;RedHatEnterpriseLinux7/RHEL7-59058
1290;;;;;;;;;4;"2. Define guest from the xml:
 # virsh define /tmp/rhel7,2.xml 
 Domain rhel7,2 defined from /tmp/rhel7,2.xml";​​;;RedHatEnterpriseLinux7/RHEL7-59058
1290;;;;;;;;;5;"3. # virsh start rhel7,2
 Domain rhel7,2 started";​​;;RedHatEnterpriseLinux7/RHEL7-59058
1290;;;;;;;;;6;"4. Check qemu command line:
 # ps aux|grep ""rhel7,,2""";"The qemu command line arguments that relates to domain name are escaped with a comma.
 ...
 -name guest=rhel7,,2,debug-threads=on
 -object secret,id=masterKey0,format=raw,file=/var/lib/libvirt/qemu/domain-6-rhel7,,2/master-key.aes
 -chardev socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-6-rhel7,,2/monitor.sock,server,nowait
 -chardev socket,id=charchannel1,path=/var/lib/libvirt/qemu/channel/target/domain-6-rhel7,,2/org.qemu.guest_agent.0,server,nowait
 -vnc unix:/var/lib/libvirt/qemu/domain-6-rhel7,,2/vnc.sock";;RedHatEnterpriseLinux7/RHEL7-59058
1290;;;;;;;;;7;"5. Check guest agent:
 # ll /var/lib/libvirt/qemu/channel/target/domain-6-rhel7,2/org.qemu.guest_agent.0 
 srwxrwxr-x. 1 qemu qemu 0 7月   4 11:23 /var/lib/libvirt/qemu/channel/target/domain-6-rhel7,2/org.qemu.guest_agent.0
 
 # virsh domtime rhel7,2
 Time: 1467603370";​​;;RedHatEnterpriseLinux7/RHEL7-59058
1290;;;;;;;;;8;"6. Check guest graphic:
 # ll /var/lib/libvirt/qemu/domain-6-rhel7,2/vnc.sock 
 srwxrwxr-x. 1 qemu qemu 0 7月   4 11:23 /var/lib/libvirt/qemu/domain-6-rhel7,2/vnc.sock
 
 # virt-viewer rhel7,2";Guest can be connected by virt-viewer successfully;;RedHatEnterpriseLinux7/RHEL7-59058
1290;;;;;;;;;9;Scenario 2: include '=' in domain name;​​;;RedHatEnterpriseLinux7/RHEL7-59058
1290;;;;;;;;;10;"Retest step 1~6 with domain name: foo=1
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59058
1291;RHEL7-59068;Test a domain with special characters in domain name - non-english/number characters;"Bug 639599 - ""virt-xml-validate"" failed to validate guest domain configuration file if the domain name got a ""#"" in it .";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"# cat guest.xml
 <name>rhel62~!@#$%^*()\\-=[]{}|_+"":;'`,.>?</name>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59068
1291;;;;;;;;;2;"# virt-xml-validate /tmp/guest.xml
 /tmp/guest.xml validates";​​;;RedHatEnterpriseLinux7/RHEL7-59068
1291;;;;;;;;;3;"# virsh define /tmp/xp.xml
 Domain rhel62~!@#$%^*()\\-=[]{}|_+"":;'`,.>? defined from /tmp/xp.xml";Domain define successfully;;RedHatEnterpriseLinux7/RHEL7-59068
1291;;;;;;;;;4;"# virsh list --all
 Id Name State
 \----------------------------------------------------
 rhel62~!@#$%^*()\\-=[]{}|_+"":;'`,.>?";"Domain is listed successfully
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-59068
1291;;;;;;;;;5;"# virsh start rhel62~\\!\@#\$%\^\\*\\(\\)\\\\-\=\\[\\]\\{\\}\|_+\""\:\;\'\\`\,.\>\?
​​";"Note: some special characters should be escaped by ""\"" when start/undefine domain
​​";;RedHatEnterpriseLinux7/RHEL7-59068
1291;;;;;;;;;6;"# virsh undefine rhel62~\\!\@#\$%\^\\*\\(\\)\\\\-\=\\[\\]\\{\\}\|_+\""\:\;\'\\`\,.\>\?
 Domain rhel62~!@#$%^*()\\-=[]{}|_+"":;'`,.>? has been undefined";​​;;RedHatEnterpriseLinux7/RHEL7-59068
1292;RHEL7-59069;Test a domain with special characters in domain name - 'non-ACSII';Bug 1282846 - libvirt can not start a VM with non-ACSII or long names: Invalid machine name (from systemd);Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Set vnc_auto_unix_socket=1 in qemu.conf and restart libvirtd service
 # systemctl restart libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59069
1292;;;;;;;;;2;"Prepare a guest xml with non-ASCII characters in domain name
 #cat rhel6_x86_64_kvm.xml
 <domain type='kvm'>
   <name>kīмсhīkīмсhīkīмсhī-∨м</name>
 --";​​;;RedHatEnterpriseLinux7/RHEL7-59069
1292;;;;;;;;;3;"# virsh define rhel6_x86_64_kvm.xml
 Domain kīмсhīkīмсhīkīмсhī-∨м defined from rhel6_x86_64_kvm.xml
 
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  -     kīмсhīkīмсhīkīмсhī-∨м   shut off";Domain define successfully and can be listed successfully;;RedHatEnterpriseLinux7/RHEL7-59069
1292;;;;;;;;;4;"# virsh start  kīмсhīkīмсhīkīмсhī-∨м
 Domain kīмсhīkīмсhīkīмсhī-∨м started";​​;;RedHatEnterpriseLinux7/RHEL7-59069
1292;;;;;;;;;5;"#virsh dumpxml  kīмсhīkīмсhīkīмсhī-∨м
 --
 
     <channel type='unix'>
       <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/domain-6-kīмсhīkīмсhīkīмсhī-∨м/org.qemu.guest_agent.0'/>
       <target type='virtio' name='org.qemu.guest_agent.0' state='connected'/>
       <alias name='channel1'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>
 --
     <graphics type='vnc' socket='/var/lib/libvirt/qemu/domain-6-kīмсhīkīмсhīkīмсhī-∨м/vnc.sock'>
       <listen type='address' address='127.0.0.1'/>
     </graphics>";​​;;RedHatEnterpriseLinux7/RHEL7-59069
1292;;;;;;;;;6;"Check the guest agent works well
 # virsh domtime kīмсhīkīмсhīkīмсhī-∨м --pretty
 Time: 2016-03-08 11:02:56";​​;;RedHatEnterpriseLinux7/RHEL7-59069
1292;;;;;;;;;7;"Connect the guest with the vnc viewer, could connect successfully
 # virt-viewer kīмсhīkīмсhīkīмсhī-∨м";​​;;RedHatEnterpriseLinux7/RHEL7-59069
1292;;;;;;;;;8;"Do managedsave/restore with the guest, it works well
 # virsh managedsave kīмсhīkīмсhīkīмсhī-∨м
 
 Domain kīмсhīkīмсhīkīмсhī-∨м state saved by libvirt
 
 # virsh start kīмсhīkīмсhīkīмсhī-∨м
 Domain kīмсhīkīмсhīkīмсhī-∨м started";​​;;RedHatEnterpriseLinux7/RHEL7-59069
1293;RHEL7-59081;[shutdown] - Shutdown a domain in paused status.;Bug 1216281 - Guest show blackscreen after resume the guest which paused by watchdog;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1. Start a guest.
 # virsh start rhel7
 Domain rhel7 started
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59081
1293;;;;;;;;;2;"2. # virsh suspend rhel7
 Domain rhel7 suspended";​​;;RedHatEnterpriseLinux7/RHEL7-59081
1293;;;;;;;;;3;"3. # virsh shutdown rhel7
 error: Failed to shutdown domain rhel7
 error: Requested operation is not valid: domain is not running
 
 # virsh list
  Id    Name                           State
 ----------------------------------------------------
  3     rhel7                          paused";​​;;RedHatEnterpriseLinux7/RHEL7-59081
1293;;;;;;;;;4;"4.# virsh resume rhel7
 Domain rhel7 resumed
​​";Guest doesn't show black screen and works well after resuming.;;RedHatEnterpriseLinux7/RHEL7-59081
1294;RHEL7-59108;[guestvcpus] Query or modify state of vcpu in the guest (via agent);Query or modify state of vcpu in the guest (via agent);Fangge Jin (fjin);High;Positive;Not Automated;;1;" 0. Define&start a guest with guest agent and 4 vcpus:
 # cat /tmp/rhel7.xml
 <domain>
 ...
    <vcpu placement='static'>4</vcpu>
 ...
 
 # virsh define /tmp/rhel7.xml
 
 # virsh start rhel7
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;2;"In guest, check cpu state:
 # lscpu
 
​​";"Output:
 ...
 CPU(s):                4
 On-line CPU(s) list:   0-3
 ...";;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;3;"Scenario 1: query guest vpu state
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;4;"# virsh guestvcpus rhel7
 vcpus          : 0-3
 online         : 0-3
 offlinable     : 0-3
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;5;"Scenario 2: disable guest cpu
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;6;"1) disable cpu 0
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;7;# virsh guestvcpus rhel7 0 --disable;​​;;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;8;"# virsh guestvcpus rhel7 
​​";"Output:
 
 vcpus          : 0-3
 online         : 1-3
 offlinable     : 0-3";;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;9;"In guest, check cpu state:
 # lscpu
​​";"Output:
 ...
 CPU(s):                4
 On-line CPU(s) list:   1-3
 Off-line CPU(s) list:  0
 ...";;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;10;"2) disable cpu 2-3
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;11;# virsh guestvcpus rhel7 2-3 --disable;​​;;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;12;"# virsh guestvcpus rhel7 
 
 
​​";"Output:
 
 vcpus          : 0-3
 online         : 1
 offlinable     : 0-3";;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;13;"In guest, check cpu state:
 # lscpu
​​";"Output:
 ...
 CPU(s):                4
 On-line CPU(s) list:   1
 Off-line CPU(s) list:  0,2,3
 ...
​​";;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;14;"3) diable cpu 1(the last only cpu)
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;15;"# virsh guestvcpus rhel7 1 --disable
 error: internal error: unable to execute QEMU agent command 'guest-set-vcpus': pwrite(""/sys/devices/system/cpu/cpu1//online""): Device or resource busy
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;16;"# virsh guestvcpus rhel7 
 vcpus          : 0-3
 online         : 1
 offlinable     : 0-3
​​";"Guest cpu state doesn't change
​​";;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;17;"In guest, check cpu state:
 # lscpu";"Output:
 ...
 CPU(s):                4
 On-line CPU(s) list:   1
 Off-line CPU(s) list:  0,2,3
 ...";;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;18;Scenario 3: enable guest cpu;​​;;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;19;"1) enable cpu 0,2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;20;"# virsh guestvcpus rhel7 0,2 --enable
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;21;"# virsh guestvcpus rhel7 
 vcpus          : 0-3
 online         : 0-2
 offlinable     : 0-3";​​;;RedHatEnterpriseLinux7/RHEL7-59108
1294;;;;;;;;;22;"In guest, check cpu state:
 # lscpu
​​";"Output:
 ...
 CPU(s):                4
 On-line CPU(s) list:   0-2
 Off-line CPU(s) list:  3
 ...";;RedHatEnterpriseLinux7/RHEL7-59108
1295;RHEL7-59110;[pool-event] List event types, or wait for storage pool events to occur;List event types, or wait for storage pool events to occur;Fangge Jin (fjin);Medium;Positive;Not Automated;;1; --list           list valid event types;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;2;"# virsh pool-event --list
 
​​";"Output:
 
 lifecycle
 refresh";;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;3;--event <string>  which event type to wait for;​​;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;4;"In terminal one: 
 # virsh pool-event --event lifecycle
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;5;"In terminal two:
 # virsh pool-event --event refresh
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;6;"In terminal three:
 # virsh pool-define /tmp/default.xml
 Pool default defined from /tmp/default.xml
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;7;"Check terminal one output:
 
​​";"In terminal one, virsh command outputs the event ""Defined"" and exits.
 
 # virsh pool-event --event lifecycle
 event 'lifecycle' for storage pool default: Defined
 events received: 1";;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;8;Check terminal two output:;"Nothing outputs
​​";;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;9;"In terminal three:
 # virsh pool-start default
 
 # virsh pool-refresh default
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;10;"Check terminal two output:
​​";"In terminal two, virsh command outputs the event ""refresh"" and exits.
 
 # virsh pool-event --event refresh
 event 'refresh' for storage pool default
 events received: 1
​​";;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;11;--loop           loop until timeout or interrupt, rather than one-shot;​​;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;12;"In terminal one:
 # virsh pool-event --event lifecycle --loop
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;13;"In terminal two:
 # virsh pool-destroy default
​​";Pool default destroyed;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;14;"Check terminal one
​​";"In terminal one, virsh command outputs the event ""Stopped"" and doesn't exit:
 
 # virsh pool-event --event lifecycle --loop
 event 'lifecycle' for storage pool default: Stopped
​​";;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;15;"In terminal two:
 # virsh pool-start default
​​";Pool default started;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;16;Check terminal one;"In terminal one, virsh command outputs the event ""Started"" and doesn't exit:
 
 # virsh pool-event --event lifecycle --loop
 event 'lifecycle' for storage pool default: Stopped
 event 'lifecycle' for storage pool default: Started";;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;17;"Use Ctrl+C to interrupt the virsh command
​​";"Virsh command exits:
 
 # virsh pool-event --event lifecycle --loop
 event 'lifecycle' for storage pool default: Stopped
 event 'lifecycle' for storage pool default: Started
 ^Cevent loop interrupted
 events received: 2
 
 [root@fjin-6-200 ~]#
​​";;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;18;--timestamp      show timestamp for each printed event;​​;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;19;"In terminal one:
 # virsh pool-event --event lifecycle --loop --timestamp
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;20;"In terminal two:
 # virsh pool-destroy default
 Pool default destroyed
 
 # virsh pool-start default
 Pool default started
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;21;"Check terminal one
​​";"In terminal one, virsh command outputs the two events with timestamp:
 
 # virsh pool-event --event lifecycle --loop --timestamp
 2016-07-05 04:26:59.923+0000: event 'lifecycle' for storage pool default: Stopped
 2016-07-05 04:27:05.901+0000: event 'lifecycle' for storage pool default: Started
​​";;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;22;--timeout <number>  timeout seconds;​​;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;23;"In terminal one:
 # time virsh pool-event --event lifecycle --loop --timeout 10
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;24;"In terminal two, issue the following commands within 10s:
 # virsh pool-destroy default
 Pool default destroyed
 
 # virsh pool-start default
 Pool default started
 
 # virsh pool-destroy default
 Pool default destroyed
 
 # virsh pool-start default
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;25;"Wait 10s, check terminal one
​​";"Virsh command exits in 10s.
 
 # time virsh pool-event --event lifecycle --loop --timeout 10
 event 'lifecycle' for storage pool default: Stopped
 event 'lifecycle' for storage pool default: Started
 event 'lifecycle' for storage pool default: Stopped
 event 'lifecycle' for storage pool default: Started
 event loop timed out
 events received: 4
 
 
 real    0m10.017s
 user    0m0.006s
 sys    0m0.003s
​​";;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;26;"--pool <string>  filter by storage pool name or uuid
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;27;"Prepare another storage pool:
 # cat /tmp/test.xml 
 <pool type='dir'>
   <name>test</name>
   <capacity unit='bytes'>160982630400</capacity>
   <allocation unit='bytes'>57103998976</allocation>
   <available unit='bytes'>103878631424</available>
   <source>
   </source>
   <target>
     <path>/var/lib/libvirt/images1</path>
     <permissions>
       <mode>0711</mode>
       <owner>0</owner>
       <group>0</group>
       <label>system_u:object_r:virt_image_t:s0</label>
     </permissions>
   </target>
 </pool>
 
 # mkdir -p /var/lib/libvirt/images1
 
 # virsh pool-define /tmp/test.xml
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;28;"In terminal one:
 #  virsh pool-event --event lifecycle --loop --pool default
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;29;"In terminal two:
 # virsh pool-event --event lifecycle --loop --pool test
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;30;"In terminal three:
 # virsh pool-start test
 Pool test started
 
 # virsh pool-destroy test
 Pool test destroyed
 
 # virsh pool-destroy default
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;31;"Check terminal one
​​";"Virsh command outputs the event of pool default:
 
 #  virsh pool-event --event lifecycle --loop --pool default
 event 'lifecycle' for storage pool default: Stopped
​​";;RedHatEnterpriseLinux7/RHEL7-59110
1295;;;;;;;;;32;"Check terminal two
​​";"Virsh command outputs the two events of pool test
 
 # virsh pool-event --event lifecycle --loop --pool test
 event 'lifecycle' for storage pool test: Stopped
 event 'lifecycle' for storage pool test: Started
​​";;RedHatEnterpriseLinux7/RHEL7-59110
1296;RHEL7-59117;[resume] [RHEVM] Resume a suspended vm;Bug 894723 - libvirt: cannot resume a suspended vm - vm is shut down;Fangge Jin (fjin);Medium;Positive;Not Automated;;1; 1. prepare one running health vm;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59117
1296;;;;;;;;;2;"2. suspend vm
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59117
1296;;;;;;;;;3;"3. resume vm
​​";"vm is resumed successfully
​​";;RedHatEnterpriseLinux7/RHEL7-59117
1297;RHEL7-59118;Check client resource usage of virtlogd when save&restore guest;"Verify client resource(nclients) is occupied and released correctly when save&restore guest
 Bug 1325080 - Virtlogd doesn't release client resource after guest restore from a saved file.";Yan Fu (yafu);Medium;Positive;Not Automated;;1;"Set debug log for virtlogd in /etc/libvirt/virtlogd.conf:
 
 log_level = 1
 log_outputs=""1:file:/var/log/libvirt/virtlogd.log""";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59118
1297;;;;;;;;;2;"Start a guest:
  #virsh start rhel7.3";​​;;RedHatEnterpriseLinux7/RHEL7-59118
1297;;;;;;;;;3;"Track the virtlogd log:
  #tailf /var/log/libvirt/virtlogd.log | grep -i nclient";​​;;RedHatEnterpriseLinux7/RHEL7-59118
1297;;;;;;;;;4;"Save the guest:
 # virsh save rhel7.3 /tmp/save";​​;;RedHatEnterpriseLinux7/RHEL7-59118
1297;;;;;;;;;5;Check the virtlogd log;"nclients=1 and nclients=0(in order) are found in the log.
 
 Output: 
 2017-10-10 07:35:33.693+0000: 5798: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=1 nclients_max=1024 nclients_unauth=0 nclients_unauth_max=1024
 2017-10-10 07:35:33.694+0000: 5798: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=0 nclients_max=1024 nclients_unauth=0 nclients_unauth_max=1024
 
​​";;RedHatEnterpriseLinux7/RHEL7-59118
1297;;;;;;;;;6;"Restore the guest:
 #virsh restore /tmp/save";​​;;RedHatEnterpriseLinux7/RHEL7-59118
1297;;;;;;;;;7;"Check the virtlogd og  
​​";"nclients=1 and nclients=0(in order) are found in the log.
 
 Output: 
 2017-10-10 07:37:12.088+0000: 5991: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=1 nclients_max=1024 nclients_unauth=0 nclients_unauth_max=1024
 2017-10-10 07:37:13.982+0000: 5991: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=0 nclients_max=1024 nclients_unauth=0 nclients_unauth_max=1024 
​​";;RedHatEnterpriseLinux7/RHEL7-59118
1298;RHEL7-59182;List all manageable servers on a daemon;List all manageable servers on a daemon;Fangge Jin (fjin);Medium;Positive;Automated;;1;"0. Make sure libvirtd.service is active
 # systemctl status libvirtd
 
​​";"● libvirtd.service - Virtualization daemon
    Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; enabled; vendor preset: enabled)
    Active: active (running) since 三 2016-07-06 17:07:23 CST; 25s ago";Test Case;RedHatEnterpriseLinux7/RHEL7-59182
1298;;;;;;;;;2;"1. # virt-admin srv-list
 
​​";"There are two servers that can be managed by admin daemon: libvirtd and admin itself
 
  Id    Name           
 ---------------
  0     libvirtd       
  1     admin         ";;RedHatEnterpriseLinux7/RHEL7-59182
1299;RHEL7-59185;Get threadpool attributes from a server;Get threadpool attributes from a server;Fangge Jin (fjin);Medium;Positive;Automated;;1;"Set the following parameters in libvirtd.conf:
 min_workers = 6
 max_workers = 21
 prio_workers = 7
 admin_min_workers = 2
 admin_max_workers = 6
 
 # systemctl restart libvirtd
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59185
1299;;;;;;;;;2;# virt-admin srv-list;" Id    Name           
 ---------------
  0     libvirtd       
  1     admin        ";;RedHatEnterpriseLinux7/RHEL7-59185
1299;;;;;;;;;3;"# virt-admin srv-threadpool-info libvirtd
 
 
​​";"The value of prioWorkers, minWorkers and maxWorkers should be same as the values set in libvirtd.conf.
 
 Output of virt-admin command:
 minWorkers     : 6
 maxWorkers     : 21
 nWorkers       : 6
 freeWorkers    : 6
 prioWorkers    : 7
 jobQueueDepth  : 0
​​";;RedHatEnterpriseLinux7/RHEL7-59185
1299;;;;;;;;;4;"# virt-admin srv-threadpool-info admin
 
 
 
​​";"The value of minWorkers and maxWorkers should be same as the values set in libvirtd.conf.
 
 Output of virt-admin command:
 minWorkers     : 2
 maxWorkers     : 6
 nWorkers       : 2
 freeWorkers    : 0
 prioWorkers    : 0
 jobQueueDepth  : 0";;RedHatEnterpriseLinux7/RHEL7-59185
1300;RHEL7-59186;Increase minWorkers of libvirtd at runtime - maxWorkers >= new minWorkers > nWorkers;Increase minWorkers of libvirtd at runtime - maxWorkers >= new minWorkers > nWorkers, it will be set successfully and new nWorkers will be spawned (until nWorkers==new minWorkers);Fangge Jin (fjin);Critical;Positive;Automated;;1;"Make sure libvirtd.service is active
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59186
1300;;;;;;;;;2;"Get current threadpool attributes:
 
 # virt-admin srv-threadpool-info libvirtd
 minWorkers     : 5
 maxWorkers     : 20
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 5
 jobQueueDepth  : 0
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59186
1300;;;;;;;;;3;"1. nWorkers < new minWorkers < maxWorkers
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59186
1300;;;;;;;;;4;#  virt-admin srv-threadpool-set libvirtd --min-workers 10;​​;;RedHatEnterpriseLinux7/RHEL7-59186
1300;;;;;;;;;5;"# virt-admin srv-threadpool-info libvirtd
 
 
​​";"The minWorkers and nWorkers are 10:
 
 minWorkers     : 10
 maxWorkers     : 20
 nWorkers       : 10
 freeWorkers    : 10
 prioWorkers    : 5
 jobQueueDepth  : 0";;RedHatEnterpriseLinux7/RHEL7-59186
1300;;;;;;;;;6;2. nWorkers < new minWorkers = maxWorkers;​​;;RedHatEnterpriseLinux7/RHEL7-59186
1300;;;;;;;;;7;"#  virt-admin srv-threadpool-set libvirtd --min-workers 20
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59186
1300;;;;;;;;;8;"# virt-admin srv-threadpool-info libvirtd
​​";"The minWorkers and nWorkers are 20:
 
 minWorkers     : 20
 maxWorkers     : 20
 nWorkers       : 20
 freeWorkers    : 20
 prioWorkers    : 5
 jobQueueDepth  : 0";;RedHatEnterpriseLinux7/RHEL7-59186
1301;RHEL7-59203;[virtio-win][vioser] Transfer 4M data via virtio serial channel;[virtio-win][vioser] Transfer 4M data via virtio serial channel;Yu Wang (wyu);Medium;Positive;Not Automated;;1;" 1. boot a guest with virtio serial device attached
 CLI:...-device virtio-serial-pci,id=virtio-serial0,max_ports=511,bus=pci.0 -chardev socket,id=channel0,path=/tmp/tty1,server,nowait -device virtserialport,chardev=channel0,name=org.linux-kvm.port.0,bus=virtio-serial0.0,id=port0   
"; Guest boot up successfully without any error.;Test Case;RedHatEnterpriseLinux7/RHEL7-59203
1301;;;;;;;;;2;"2. Check whether vioser.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled vioser.sys verifier:
     #verifier.exe /standard /driver vioser.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";"All the Standards flags are checked ,the verified driver fields shows ""vioser.sys""";;RedHatEnterpriseLinux7/RHEL7-59203
1301;;;;;;;;;3;3. nc -U /tmp/tty1 to listen to socket on host.;Socket listening start.;;RedHatEnterpriseLinux7/RHEL7-59203
1301;;;;;;;;;4;"4. Run cmd in guest
 #copy 4Mfile \\Global.\org.linux-kvm.port.
";The file is transferred successfully, and qemu no core dump occur.;;RedHatEnterpriseLinux7/RHEL7-59203
1302;RHEL7-59204;[virtio-win][vioser] Transfer data using benchmarking tool;[virtio-win][vioser] Transfer data using benchmarking tool;Yu Wang (wyu);High;Positive;Not Automated;;1;"1 Boot VM with max_ports=511
 eg: -device virtio-serial-pci,id=virtio-serial0,max_ports=511 -chardev socket,id=channel1,path=/tmp/helloworld1,server,nowait -device virtserialport,chardev=channel1,name=com.redhat.rhevm.vdsm1,bus=virtio-serial0.0,id=port1";" Guest boot up successfully without any error.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-59204
1302;;;;;;;;;2;"2. Check whether vioser.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled vioser.sys verifier:
     #verifier.exe /standard /driver vioser.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings
​​";"All the Standards flags are checked ,the verified driver fields shows ""vioser.sys""
​​";;RedHatEnterpriseLinux7/RHEL7-59204
1302;;;;;;;;;3;3. copy benchmark.exe to guest;3 no error;;RedHatEnterpriseLinux7/RHEL7-59204
1302;;;;;;;;;4;"4 run command on host
 #nc -U /tmp/helloworld1
​​";4 no error;;RedHatEnterpriseLinux7/RHEL7-59204
1302;;;;;;;;;5;"5 run write data with benchmark on guest
 USAGE: benchmark <type> <port_name> [-s <request_size>] [-c <concurrency>] [-t <time>]
 example:benchmark w com.redhat.rhevm.vdsm1 -s 8192 -c 2 -t 10";"5 guest can trasfer data successfully
​​";;RedHatEnterpriseLinux7/RHEL7-59204
1302;;;;;;;;;6;"6 run read data with benchmark on guest
 USAGE: benchmark <type> <port_name> [-s <request_size>] [-c <concurrency>] [-t <time>]
 example:benchmark r com.redhat.rhevm.vdsm1 -s 8192 -c 2 -t 10";"6 no error
​​";;RedHatEnterpriseLinux7/RHEL7-59204
1302;;;;;;;;;7;"7. type some random data on host
 example :#nc -U /tmp/helloworld1
                helloworld
​​";"7 run read data with benchmark on guest
 Reading into 16384 byte buffers, 1 parallel requests, for 5 seconds
 Parallelism 1, throghput 11
​​";;RedHatEnterpriseLinux7/RHEL7-59204
1303;RHEL7-59208;Tune threadpool attributes to an invalid value;"Tune the threadpool attributes to an invalid value, there is a bug about it:
 Bug 1356769-The integers in output of some virt-admin commands should not be signed";Fangge Jin (fjin);High;Negative;Automated;;1;"Make sure libvirtd.service is active
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59208
1303;;;;;;;;;2;"Get current threadpool attributes:
 
 # virt-admin srv-threadpool-info libvirtd
 minWorkers     : 5
 maxWorkers     : 20
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 5
 jobQueueDepth  : 0";​​;;RedHatEnterpriseLinux7/RHEL7-59208
1303;;;;;;;;;3;"1) Set to a value more than 2^32 -1=4294967295
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59208
1303;;;;;;;;;4;"virt-admin # srv-threadpool-set libvirtd --max-workers 1000000000000000000000000000000
 
​​";"error: Numeric value '1000000000000000000000000000000' for <max-workers> option is malformed or out of range
 error: Unable to parse integer parameter 'max-workers'";;RedHatEnterpriseLinux7/RHEL7-59208
1303;;;;;;;;;5;"2) Set to a negative value
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59208
1303;;;;;;;;;6;"virt-admin # srv-threadpool-set libvirtd --min-workers -1
 
​​";"error: Numeric value '-1' for <min-workers> option is malformed or out of range
 error: Unable to parse integer parameter 'min-workers'";;RedHatEnterpriseLinux7/RHEL7-59208
1303;;;;;;;;;7;"3) Set to a string
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59208
1303;;;;;;;;;8;"virt-admin # srv-threadpool-set libvirtd --max-workers 3ffff
 error: Numeric value '3ffff' for <max-workers> option is malformed or out of range
 error: Unable to parse integer parameter 'max-workers'
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59208
1304;RHEL7-59209;[perf] Define&start guest with(out) perf attribute in guest xml;;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"From libvirt-2.0.0, libvirt add support for perf event mbmt and mbml. refer to libvirt.org 
 You should borrow a host that support intel MBM, that is a host with cpu intel E5-2600 v4 Boardwell-EP refert to memory-bandwidth-monitoring-usage-models . 
 Such as this host dell-per730-02.khw.lab.eng.bos.redhat.com 
 the E5-2600 v4 Boardwell-EP cpu support cmt together with mbm, you can check it:
 # cat /proc/cpuinfo | grep flags | uniq
 flags        : ...... ** cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local **
 
​​";"borrow a host with cpu intel E5-2600 v4 Boardwell-EP
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-59209
1304;;;;;;;;;2;Scenario 1: define&start a guest without perf element in guest xml;​​;;RedHatEnterpriseLinux7/RHEL7-59209
1304;;;;;;;;;3;"# virsh dumpxml rhel7.2 | grep perf
 # 
 (no output)
 # virsh start rhel7.2
 Domian rhel7.2 started
 # virsh perf rhel7.2
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled
 
​​";"default is disabled
 And for a host without cmt, mbm support, the result is the same
​​";;RedHatEnterpriseLinux7/RHEL7-59209
1304;;;;;;;;;4;Scenario 2: define&start a guest with perf element enabled in xml;​​;;RedHatEnterpriseLinux7/RHEL7-59209
1304;;;;;;;;;5;"1. Edit the xml to include these contents
 # cat  rhel7.2.xml
 ...
   <perf>
     <event name='cmt' enabled='yes'/>
     <event name='mbmt' enabled='yes'/>
     <event name='mbml' enabled='yes'/>
   </perf>
 ...
 # virsh define rhel7.2.xml
 Domain rhel7.2 defined from rhel7.2.xml
 # virsh start rhel7.2
 Domain rhel7.2 started
 
​​";"The guest can be started with cmt, mbmt and mbml enabled.
​​";;RedHatEnterpriseLinux7/RHEL7-59209
1304;;;;;;;;;6;"2. # virsh perf rhel7.2
 cmt            : enabled
 mbmt           : enabled
 mbml           : enabled
 
 3. # virsh domstats rhel7.2 --perf
 Domain: 'rhel7.2'
   perf.cmt=14008320
   perf.mbmt=97935360
   perf.mbml=78970880
​​";"2. the perf event status is same as what we set
 3. check the output
​​";;RedHatEnterpriseLinux7/RHEL7-59209
1304;;;;;;;;;7;Scenario 3: define&start a guest with perf element  disabled in xml;​​;;RedHatEnterpriseLinux7/RHEL7-59209
1304;;;;;;;;;8;"# vi rhel7.2.xml
 # virsh define rhel7.2.xml
 Domain rhel7.2 defined from rhel7.2.xml
 
 # virsh start rhel7.2
 Domain rhel7.2 started
 
 # virsh perf rhel7.2
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled
 
 # virsh domstats rhel7.2 --perf
 Domain: 'rhel7.2'
 (no perf related statistics)
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59209
1305;RHEL7-59312;[perf] enable&disable multiple perf events in one command;Bug 1346730 - libvirt will enable perf event which user want disable it;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;1 start guest & check perf event;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59312
1305;;;;;;;;;2;"# virsh start rhel7.2 
 Domain rhel7.2 started
 
 # virsh perf rhel7.2 
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled
 
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-59312
1305;;;;;;;;;3;"# virsh domstats rhel7.2 --perf
 Domain: 'rhel7.2'";​​;;RedHatEnterpriseLinux7/RHEL7-59312
1305;;;;;;;;;4;2 combine the cmt, mbml and mbmt;​​;;RedHatEnterpriseLinux7/RHEL7-59312
1305;;;;;;;;;5;"test below matirx:
 cmt enabled | mbml enabled | mbmt enabled
 1. -----Y--------| -----Y--------------|-----Y-------    
 2. -----Y--------|-------Y-------------|------N------
 3.-----Y--------|-------N-------------|------Y------
 4.-----N--------|-------Y-------------|------Y------";​​;;RedHatEnterpriseLinux7/RHEL7-59312
1305;;;;;;;;;6;"
 take 2 as eaxmple 
 
 # virsh perf rhel7.2
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled
 
 # virsh perf rhel7.2 --enable cmt,mbml --disable mbmt
 
 # virsh perf rhel7.2
 cmt            : enabled
 mbmt           : disabled
 mbml           : enabled
 
 # virsh domstats rhel7.2 --perf
 Domain: 'rhel7.2'
   perf.cmt=xxx
   perf.mbml=xxx
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59312
1306;RHEL7-59313;[perf] some negative scenarios for perf setting command;;Yalan Zhang (yalzhang);Medium;Negative;Not Automated;;1;"1. guest is shutdown, use --live to set perf event
 # virsh domstate rhel7.2
 shut off
 
 # virsh perf rhel7.2 --enable cmt,mbml  --disable mbmt --live
 error: Unable to enable/disable perf events
 error: Requested operation is not valid: domain is not running
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59313
1306;;;;;;;;;2;"2. --current combine with --config or --live
 guest is running
 # virsh perf rhel7.2 --enable cmt,mbml  --disable mbmt --live --current
 error: Options --current and --live are mutually exclusive
 
 # virsh perf rhel7.2 --enable cmt,mbml  --disable mbmt --current --config
 error: Options --current and --config are mutually exclusive
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59313
1306;;;;;;;;;3;"3. eventSpec duplicated in the command
 # virsh perf rhel7.2 --enable cmt,cmt --disable mbmt
 error: Unable to enable/disable perf events
 error: invalid argument: parameter 'cmt' occurs multiple times
 
 # virsh perf rhel7.2 --enable cmt --disable mbmt,cmt
 error: Unable to enable/disable perf events
 error: invalid argument: parameter 'cmt' occurs multiple times
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59313
1306;;;;;;;;;4;"4. invalid eventSpec
 # virsh perf rhel7.2 --enable 123
 error: Unable to enable/disable perf events
 error: argument unsupported: parameter '123' not supported
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59313
1306;;;;;;;;;5;"5. miss specific arguments
 # virsh perf rhel7.2 --enable
 error: expected syntax: --enable <string>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59313
1307;RHEL7-59314;Restart libvirtd with perf events cmt/mbmt/mbml enabled for a running domain;;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"Start a guest with all perf events enabled:
 
 # virsh start rhel7.2 
 Domain rhel7.2 started
 
 # virsh perf rhel7.2
 cmt            : enabled
 mbmt           : enabled
 mbml           : enabled
 
 # virsh domstats rhel7.2 --perf
 Domain: 'rhel7.2'
   perf.cmt=xxx
   perf.mbmt=xxx
   perf.mbml=xxx
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-59314
1307;;;;;;;;;2;"# service libvirtd restart
 Redirecting to /bin/systemctl restart  libvirtd.service";​​;;RedHatEnterpriseLinux7/RHEL7-59314
1307;;;;;;;;;3;"# virsh perf rhel7.2
 cmt            : enabled
 mbmt           : enabled
 mbml           : enabled
 
 # virsh domstats rhel7.2 --perf
 Domain: 'rhel7.2'
   perf.cmt=xxx
   perf.mbmt=xxx
   perf.mbml=xxx";"guets should not be shutdown and the perf.cmt, perf.mbml and perf.mbmt should be present after libvirtd restart
 
 After restart libvirtd, the statistic will be 0 for a period of time(why?). Need further research on this. 
 Asked developer about this, but he doesn't know either: https://bugzilla.redhat.com/show_bug.cgi?id=1346723#c5 
​​";;RedHatEnterpriseLinux7/RHEL7-59314
1308;RHEL7-59315;Define&start  guest with perf attribute mbmt or mbml in guest xml - on a host that  doesn't support Intel MBM but support intel cmt;"Bug 1360533 - The error message need to improve when enable a perf event on a host which do not support it
Bug 1372344 - [abrt]BUG: unable to handle kernel NULL pointer dereference at 00000000000001a0[mbml]";Yalan Zhang (yalzhang);Medium;Negative;Not Automated;;1;"1. 
 # virsh dumpxml rhel7.2 | grep /perf -B4   
 <event name='cmt' enabled='no'/>
     <event name='mbmt' enabled='yes'/>
     <event name='mbml' enabled='no'/>
   </perf>
 # virsh start rhel7.2
 error: Failed to start domain rhel7.2
 error: Unable to open perf type=26 for pid=24570: Invalid argument
​​";"guest can not start if the host do not support MBM(but support CMT), check the error mesage
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-59315
1308;;;;;;;;;2;"# virsh perf rhel7.2 --enable cmt --disable mbml,mbmt
 # virsh start rhel7.2
 Domain rhel7.2 started
 # virsh perf rhel7.2 --enable mbml
 error: Unable to enable/disable perf events
 error: Unable to open perf type=26 for pid=24713: Invalid argument";"--enable mbml/mbmt will fail if guest can not support intel MBM, check the error message
​​";;RedHatEnterpriseLinux7/RHEL7-59315
1309;RHEL7-59328;List and Retrieve identity details about a client - unix client;"Use command client-info to list and retrieve identity details about a client of type ""unix""";Fangge Jin (fjin);High;Positive;Not Automated;;1;Make sure libvirtd.service is active;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59328
1309;;;;;;;;;2;"Prepare three clients:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59328
1309;;;;;;;;;3;"1) As root user:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59328
1309;;;;;;;;;4;"[root@fjin-4-152 ~]# virsh -c qemu:///system -r
 Welcome to virsh, the virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virsh >";​​;;RedHatEnterpriseLinux7/RHEL7-59328
1309;;;;;;;;;5;"# ps -auxZ|grep virsh
 unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023 root 16118 0.0  0.0 356556 7336 pts/2 Sl+ 17:59   0:00 virsh -c qemu:///system
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59328
1309;;;;;;;;;6;"2) As non-root user:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59328
1309;;;;;;;;;7;"[fjin@fjin-4-152 ~]$ virsh -c qemu:///system
 ==== AUTHENTICATING FOR org.libvirt.unix.manage ===
 System policy prevents management of local virtualized systems
 Authenticating as: root
 Password: 
 ==== AUTHENTICATION COMPLETE ===
 Welcome to virsh, the virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virsh # 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59328
1309;;;;;;;;;8;"# ps -auxZ|grep virsh
 ...
 unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023 fjin 21965 0.0  0.0 356552 7276 pts/5 Sl+ 19:27   0:00 virsh -c qemu:///system
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59328
1309;;;;;;;;;9;"# virt-admin srv-clients-list libvirtd
​​";" Id    Transport       Connected since
 --------------------------------------------------
  31    unix            2016-07-07 18:27:39+0800
  33    unix            2016-07-07 18:28:42+0800";;RedHatEnterpriseLinux7/RHEL7-59328
1309;;;;;;;;;10;"virt-admin # client-info libvirtd 31
​​";"Each item of the output is correct:
 The selinux_context is same as the selinux context of virsh process
 
 id             : 31
 connection_time: 2016-07-07 18:27:39+0800
 transport      : unix
 readonly       : yes
 unix_user_id   : 0
 unix_user_name : root
 unix_group_id  : 0
 unix_group_name: root
 unix_process_id: 2567
 selinux_context: unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023";;RedHatEnterpriseLinux7/RHEL7-59328
1309;;;;;;;;;11;"virt-admin # client-info libvirtd 33
 
​​";"Each item of the output is correct:
 The selinux_context is same as the selinux context of virsh process
 
 id             : 33
 connection_time: 2016-07-07 18:28:42+0800
 transport      : unix
 readonly       : no
 unix_user_id   : 1000
 unix_user_name : fjin
 unix_group_id  : 1000
 unix_group_name: fjin
 unix_process_id: 2581
 selinux_context: unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023";;RedHatEnterpriseLinux7/RHEL7-59328
1310;RHEL7-59329;List and Retrieve identity details about a client - tcp client - bug 1524399;"Use command client-info to list and retrieve identity details about a client of type ""tcp""";Fangge Jin (fjin);High;Positive;Not Automated;;1;"On client host:
 # virsh -c qemu+tcp://10.66.4.152/system
 Welcome to virsh, the virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virsh #";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59329
1310;;;;;;;;;2;"On server host:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59329
1310;;;;;;;;;3;# virt-admin srv-clients-list libvirtd;"Id    Transport       Connected since
 --------------------------------------------------
  36    tcp             2016-07-07 18:34:07+0800";;RedHatEnterpriseLinux7/RHEL7-59329
1310;;;;;;;;;4;"virt-admin # client-info libvirtd 36
​​";"Each item of the output is correct:
 sock_addr can be checked by command ""netstat -tunap|grep <port>"", change port with the actual port you get.
 
 id             : 36
 connection_time: 2016-07-07 18:34:07+0800
 transport      : tcp
 readonly       : no
 sock_addr      : 10.66.5.43:50580";;RedHatEnterpriseLinux7/RHEL7-59329
1310;;;;;;;;;5;"On client host, connect to server using readonly mode
 # virsh -c qemu+tcp://server-hostname/system -r 
Welcome to virsh, the virtualization interactive terminal.

Type:  'help' for help with commands
       'quit' to quit

virsh >
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59329
1310;;;;;;;;;6;"3. on server host, check the connection info
# virt-admin client-list libvirtd
 Id    Transport       Connected since
--------------------------------------------------
 1     tcp             2018-06-21 23:31:42-0400

# virt-admin client-info libvirtd 1
id             : 1
connection_time: 2018-06-21 23:31:42-0400
transport      : tcp
readonly       : **yes**
sock_addr      : *client-ip*:33200";"The attribute of connection mode is ""readonly""
​​";;RedHatEnterpriseLinux7/RHEL7-59329
1311;RHEL7-59428;Force disconnect a client from libvirtd;Connect two clients to libvirtd, then force disconnect one client from libvirtd.;Fangge Jin (fjin);Critical;Positive;Automated;;1;First do case RHEL7-59328 - List and Retrieve identity details about a client - unix client  ;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59428
1311;;;;;;;;;2;"Disconnect one of the virsh clients:
 
 # virt-admin client-disconnect libvirtd 33
 
​​";"Output:
 
 Client '33' disconnected";;RedHatEnterpriseLinux7/RHEL7-59428
1311;;;;;;;;;3;"Check the responding virsh client:
 
 virsh # error: Disconnected from qemu:///system due to I/O error
 
​​";"The error message outputs:
 
 error: Disconnected from qemu:///system due to I/O error";;RedHatEnterpriseLinux7/RHEL7-59428
1311;;;;;;;;;4;"Check the clients list:
 
 # virt-admin srv-clients-list libvirtd";"Client ""33"" is not listed.
 
 Output:
 
  Id    Transport       Connected since
 --------------------------------------------------
  31    unix            2016-07-07 18:27:39+0800";;RedHatEnterpriseLinux7/RHEL7-59428
1312;RHEL7-59438;[SR-IOV] The VF should not be used in hostdev passthrough when it has been used in macvtap-passthrough --bug1351462;"When the bug1351462 is finished , the case should be updated    
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-59438
1313;RHEL7-59452;domdisplay]-provides URI for spice listen address='0.0.0.0'--bug1332446;;Yan Fu (yafu);Medium;Positive;Not Automated;;1;" 1.# virsh dumpxml rhel7.3
     ...
     <graphics type='spice' autoport='yes' listen='0::'>
       <listen type='address' address='0::'/>
     </graphics>
     ...";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59452
1313;;;;;;;;;2;2. #virsh start rhel7.3;​​;;RedHatEnterpriseLinux7/RHEL7-59452
1313;;;;;;;;;3;"3.#virsh dumpxml rhel7.3
     ...
     <graphics type='spice' port='5900' autoport='yes' listen='0::'>
       <listen type='address' address='0::'/>
     </graphics>
     ...";​​;;RedHatEnterpriseLinux7/RHEL7-59452
1313;;;;;;;;;4;"4.#virsh -c qmeu:///system domdisplay rhel7.3 
​​";   spice://localhost:5900;;RedHatEnterpriseLinux7/RHEL7-59452
1313;;;;;;;;;5;"5.#virsh -c qemu+ssh://intel-e31225-16-3.englab.nay.redhat.com/system domdisplay rhel7.3 
​​";  spice://intel-e31225-16-3.englab.nay.redhat.com:5900;;RedHatEnterpriseLinux7/RHEL7-59452
1313;;;;;;;;;6;"6.#virsh -c qemu+ssh://10.66.144.29/system domdisplay rhel7.3
​​";spice://10.66.144.29:5900;;RedHatEnterpriseLinux7/RHEL7-59452
1313;;;;;;;;;7;"7.#virsh -c qemu+ssh://[2620:52:0:4292:a248:1cff:feaa:1594]/system domdisplay rhel7.3
​​";spice://[2620:52:0:4292:a248:1cff:feaa:1594]:5900;;RedHatEnterpriseLinux7/RHEL7-59452
1314;RHEL7-59456;[perf] [multiple eventSpec] [negative] - Set duplicated perf events in one command;;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"# virsh perf rhel7.2 --enable cmt,cmt --disable mbmt
 error: Unable to enable/disable perf events
 error: invalid argument: parameter 'cmt' occurs multiple times
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59456
1314;;;;;;;;;2;"# virsh perf rhel7.2 --enable cmt --disable mbmt,cmt
 error: Unable to enable/disable perf events
 error: invalid argument: parameter 'cmt' occurs multiple times";​​;;RedHatEnterpriseLinux7/RHEL7-59456
1315;RHEL7-59584;[upgrade] upgrade from 1.2.17(RHEL7.2) to latest version- libvirtd is disabled and active;virtlogd will be disabled and active after upgrading;Fangge Jin (fjin);High;Positive;Not Automated;;1;"0. Install libvirt 1.2.17
 
 And start libvirtd service
 # systemctl start libvirtd
 
 And disable libvirtd service
 # systemctl disable libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59584
1315;;;;;;;;;2;"1. Check libvirtd.service status
 # systemctl status libvirtd
 ● libvirtd.service - Virtualization daemon
    Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; disabled; vendor preset: enabled)
    Active: active (running) since 三 2016-02-24 14:40:08 CST; 2s ago
      Docs: man:libvirtd(8)
            http://libvirt.org
  Main PID: 16289 (libvirtd)";libvirtd is disabled and active;;RedHatEnterpriseLinux7/RHEL7-59584
1315;;;;;;;;;3;"2. Upgrade libvirt version to latest version
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59584
1315;;;;;;;;;4;"3. After upgrading finished, check libvirtd status
 # systemctl status libvirtd
 ● libvirtd.service - Virtualization daemon
    Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; disabled; vendor preset: enabled)
    Active: active (running) since 三 2016-02-24 14:41:01 CST; 11s ago
      Docs: man:libvirtd(8)
            http://libvirt.org
  Main PID: 16527 (libvirtd)";libvirtd is disabled and active;;RedHatEnterpriseLinux7/RHEL7-59584
1315;;;;;;;;;5;"4. Check virtlogd.socket status
 # systemctl status virtlogd.socket
 ● virtlogd.socket - Virtual machine log manager socket
    Loaded: loaded (/usr/lib/systemd/system/virtlogd.socket; disabled; vendor preset: disabled)
    Active: active (running) since 三 2016-02-24 14:35:43 CST; 5min ago
    Listen: /var/run/libvirt/virtlogd-sock (Stream)";virtlogd.socket is disabled and active;;RedHatEnterpriseLinux7/RHEL7-59584
1315;;;;;;;;;6;"5. Try to start a guest
 # virsh start $guest
 
 Check guest log file : /var/log/libvirt/qemu/$guest.log";Guest can be started successfully and guest log is recorded in log file correctly;;RedHatEnterpriseLinux7/RHEL7-59584
1316;RHEL7-59585;[upgrade] upgrade from 1.2.17(RHEL7.2) to latest version- libvirtd is enabled and inactive;virtlogd will be enabled and inactive after upgrading;Fangge Jin (fjin);High;Positive;Not Automated;;1;"0. Install libvirt 1.2.17
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59585
1316;;;;;;;;;2;"1. Check libvirtd status
 # systemctl status libvirtd
 ● libvirtd.service - Virtualization daemon
    Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; enabled; vendor preset: enabled)
    Active: inactive (dead) 
​​";"libvirtd is enabled and inactive
​​";;RedHatEnterpriseLinux7/RHEL7-59585
1316;;;;;;;;;3;"2. Upgrade libvirt version to latest version
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59585
1316;;;;;;;;;4;"3. After upgrading finished, check libvirtd status
 # systemctl status libvirtd
 ● libvirtd.service - Virtualization daemon
    Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; enabled; vendor preset: enabled)
    Active: inactive (dead)";libvirtd is enabled and inactive;;RedHatEnterpriseLinux7/RHEL7-59585
1316;;;;;;;;;5;"4. Check virtlogd.socket status
 # systemctl status virtlogd.socket
 ● virtlogd.socket - Virtual machine log manager socket
    Loaded: loaded (/usr/lib/systemd/system/virtlogd.socket; enabled; vendor preset: disabled)
    Active: inactive (dead)
​​";"virtlogd.socket is enabled and inactive
​​";;RedHatEnterpriseLinux7/RHEL7-59585
1317;RHEL7-59586;[upgrade] upgrade from 1.2.17(RHEL7.2) to latest version- libvirtd is disabled and inactive;virtlogd will be disabled and inactive after upgrading;Fangge Jin (fjin);High;Positive;Not Automated;;1;"0. Install libvirt 1.2.17
 
 And disable libvirtd service
 # systemctl disable libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59586
1317;;;;;;;;;2;"1. Check libvirtd status
 # systemctl status libvirtd
 ● libvirtd.service - Virtualization daemon
    Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; disabled; vendor preset: enabled)
    Active: inactive (dead)
​​";libvirtd is disabled and inactive;;RedHatEnterpriseLinux7/RHEL7-59586
1317;;;;;;;;;3;"2. Upgrade libvirt version to latest version
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59586
1317;;;;;;;;;4;"3. After upgrading finished, check libvirtd status
 # systemctl status libvirtd
 ● libvirtd.service - Virtualization daemon
    Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; disabled; vendor preset: enabled)
    Active: inactive (dead)
​​";libvirtd is disabled and inactive;;RedHatEnterpriseLinux7/RHEL7-59586
1317;;;;;;;;;5;"4. Check virtlogd.socket status
 # systemctl status virtlogd.socket
 ● virtlogd.socket - Virtual machine log manager socket
    Loaded: loaded (/usr/lib/systemd/system/virtlogd.socket; disabled; vendor preset: disabled)
    Active: inactive (dead)";virtlogd.socket is disabled and inactive;;RedHatEnterpriseLinux7/RHEL7-59586
1318;RHEL7-59595;Check  qemu log handler when stdio_handler is not set in qemu.conf;Verify that virtlogd is used to record qemu log by default when stdio_handler is not set in qemu.conf;Fangge Jin (fjin);Critical;Positive;Not Automated;;1;"Don't set stdio handler in /etc/libvirt/qemu.conf:
 # grep '^stdio_handler' /etc/libvirt/qemu.conf
 (no output)
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59595
1318;;;;;;;;;2;"Start a guest
 # virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59595
1318;;;;;;;;;3;"Check the opened FDs of $guest.log file
 # lsof /var/log/libvirt/qemu/rhel7.2.log
​​";"qemu log file is opened by virtlogd.

 Output:
 COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME
 virtlogd 2474 root 16w REG 253,0 31787 87509 /var/log/libvirt/qemu/rhel7.2.log";;RedHatEnterpriseLinux7/RHEL7-59595
1318;;;;;;;;;4;"Check the content of /var/log/libvirt/qemu/rhel7.2.log file.
 # cat /var/log/libvirt/qemu/rhel7.2.log";The domain start log is written into the file correctly;;RedHatEnterpriseLinux7/RHEL7-59595
1319;RHEL7-59596;"Check  qemu log handler when set stdio_handler=""logd""";"Verify that virtlog is used to record qemu log when stdio_handler=""logd"" in qemu.conf";Fangge Jin (fjin);Critical;Positive;Not Automated;;1;"Set stdio hander to logd and restart libvirtd:
 
 # vim /etc/libvirt/qemu.conf:
 stdio_handler = logd

 # systemctl restart libvirtd
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59596
1319;;;;;;;;;2;"Start a guest
 # virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59596
1319;;;;;;;;;3;"Check the opened FD of $guest.log file
 # lsof /var/log/libvirt/qemu/rhel7.2.log";"qemu log file is opened by virtlogd:
 
 COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME
 virtlogd 2474 root 16w REG 253,0 31787 87509 /var/log/libvirt/qemu/rhel7.2.log";;RedHatEnterpriseLinux7/RHEL7-59596
1319;;;;;;;;;4;"Check the content of /var/log/libvirt/qemu/rhel7.2.log file.
 # cat /var/log/libvirt/qemu/rhel7.2.log";The domain start log is written into the file correctly;;RedHatEnterpriseLinux7/RHEL7-59596
1320;RHEL7-59597;Check qemu log file handler when qemu.conf file doesn't exist;"Verify that virtlogd is used to record qemu log when no qemu.conf file exists
 Bug 1325075 - The old logging way(file) is used when no qemu.conf file exists";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Remove qemu.conf file and restart libvirtd:
 # rm /etc/libvirt/qemu.conf
 
 # systemctl restart libvirtd
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59597
1320;;;;;;;;;2;"Start a guest
 # virsh start rhel7.2";​​;;RedHatEnterpriseLinux7/RHEL7-59597
1320;;;;;;;;;3;"Check the opened FD of $guest.log file
 # lsof /var/log/libvirt/qemu/rhel7.2.log";"qemu log file is opened by virtlogd:
 
 COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME
 virtlogd 2474 root 16w REG 253,0 31787 87509 /var/log/libvirt/qemu/rhel7.2.log";;RedHatEnterpriseLinux7/RHEL7-59597
1320;;;;;;;;;4;"Check the content of /var/log/libvirt/qemu/rhel7.2.log file.
 # cat /var/log/libvirt/qemu/rhel7.2.log";The domain start log is written into the file correctly;;RedHatEnterpriseLinux7/RHEL7-59597
1321;RHEL7-59599;Tune threadpool attributes to boundary values of unsigned int;"This is an invalid value testing
";Fangge Jin (fjin);High;Positive;Automated;;1;"Make sure libvirtd.service is active
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59599
1321;;;;;;;;;2;"Get current threadpool attributes:
 
 # virt-admin srv-threadpool-info libvirtd
 minWorkers     : 5
 maxWorkers     : 20
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 5
 jobQueueDepth  : 0";​​;;RedHatEnterpriseLinux7/RHEL7-59599
1321;;;;;;;;;3;"virt-admin # srv-threadpool-set libvirtd --max-workers  2147483647 --min-workers 0
 
 virt-admin # srv-threadpool-info libvirtd
 minWorkers     : 0
 maxWorkers     : 2147483647
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 50
 jobQueueDepth  : 0
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59599
1321;;;;;;;;;4;"virt-admin # srv-threadpool-set libvirtd --max-workers 4294967295 --min-workers 0
 
 virt-admin # srv-threadpool-info libvirtd
 minWorkers     : 0
 maxWorkers     : 4294967295
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 50
 jobQueueDepth  : 0";​​;;RedHatEnterpriseLinux7/RHEL7-59599
1322;RHEL7-59602;Change max_clients of libvirtd at runtime - max_clients > max_anonymous_clients;Change max_clients of libvirtd at runtime - max_clients > max_anonymous_clients, the setting will be successful;Fangge Jin (fjin);Critical;Positive;Automated;;1;"Get current clients info:
 
 # virt-admin srv-clients-info libvirtd
 nclients_max        : 6000
 nclients            : 0
 nclients_unauth_max : 30
 nclients_unauth     : 0";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59602
1322;;;;;;;;;2;"1. Change max_clients to a new value more than max_anonymous_clients
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59602
1322;;;;;;;;;3;"# virt-admin srv-clients-set libvirtd --max-clients 3000 
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59602
1322;;;;;;;;;4;"# virt-admin srv-clients-info libvirtd
​​";"The nclients_max is 3000
 
 nclients_max        : 3000
 nclients            : 0
 nclients_unauth_max : 30
 nclients_unauth     : 0";;RedHatEnterpriseLinux7/RHEL7-59602
1322;;;;;;;;;5;"Connect a virsh client to libvirtd:
 
 # virsh -c qemu:///system";​​;;RedHatEnterpriseLinux7/RHEL7-59602
1322;;;;;;;;;6;"Check libvirtd log:
​​";"The nclients_max is 3000 in log:
 
 debug : virNetServerCheckLimits:759 : Considering re-enabling services: nclients=1 nclients_max=3000 nclients_unauth=0 nclients_unauth_max=30";;RedHatEnterpriseLinux7/RHEL7-59602
1323;RHEL7-59604;Get information about the current setting of limits of clients connections;Get the default information about the setting of limits regarding connections of clients;Fangge Jin (fjin);High;Positive;Automated;;1;"Set max_clients and max-anonymous_clients in libvirtd.conf:
 
 # grep '^max' /etc/libvirt/libvirtd.conf
 max_clients = 6000
 max_anonymous_clients = 30
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59604
1323;;;;;;;;;2;"Restart libvirtd service:
 # systemctl restart libvirtd
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59604
1323;;;;;;;;;3;"Get clients info:
 
 # virt-admin srv-clients-info libvirtd
 
​​";"nclients_max        : 6000
 nclients            : 0
 nclients_unauth_max : 30
 nclients_unauth     : 0";;RedHatEnterpriseLinux7/RHEL7-59604
1324;RHEL7-59608;Change max_anonymous_clients of libvirtd at runtime;Use command of srv-clients-set to decrease max_anonymous_clients at runtime;Fangge Jin (fjin);Critical;Positive;Automated;;1;"Get current clients connection info:
 
 # virt-admin srv-clients-info libvirtd
 nclients_max        : 3000
 nclients            : 0
 nclients_unauth_max : 30
 nclients_unauth     : 0";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59608
1324;;;;;;;;;2;"1. Change max_anonymous_clients to a new value less than max_clients
 #  virt-admin srv-clients-set libvirtd --max-unauth-clients 10";​​;;RedHatEnterpriseLinux7/RHEL7-59608
1324;;;;;;;;;3;# virt-admin srv-clients-info libvirtd;"The nclients_unauth_max is 10:
 
 nclients_max        : 3000
 nclients            : 0
 nclients_unauth_max : 10
 nclients_unauth     : 0";;RedHatEnterpriseLinux7/RHEL7-59608
1324;;;;;;;;;4;"Connect a virsh client to libvirtd:
 
 # virsh -c qemu:///system";​​;;RedHatEnterpriseLinux7/RHEL7-59608
1324;;;;;;;;;5;"Check libvirtd log:
​​";"The nclients_unauth_max is 10 in log
 
 debug : virNetServerCheckLimits:759 : Considering re-enabling services: nclients=1 nclients_max=3000 nclients_unauth=0 nclients_unauth_max=10";;RedHatEnterpriseLinux7/RHEL7-59608
1325;RHEL7-59609;change max_clients and max_anonymous_clients of libvirtd together;Tune max_clients and max_anonymous_clients of libvirtd together, the setting will be successful when --max-unauth-clients < --max-clients;Fangge Jin (fjin);Critical;Positive;Automated;;1;"Get current clients connection info:
 
 # virt-admin srv-clients-info libvirtd
 nclients_max        : 3000
 nclients            : 0
 nclients_unauth_max : 10
 nclients_unauth     : 0";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59609
1325;;;;;;;;;2;"1. --max-unauth-clients < --max-clients
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59609
1325;;;;;;;;;3;#  virt-admin srv-clients-set libvirtd --max-unauth-clients 20 --max-clients 2000;​​;;RedHatEnterpriseLinux7/RHEL7-59609
1325;;;;;;;;;4;"# virt-admin srv-clients-info libvirtd
 
​​";"The nclients_max is 2000 and nclients_unauth_max is 20
 
 nclients_max        : 2000
 nclients            : 1
 nclients_unauth_max : 20
 nclients_unauth     : 0";;RedHatEnterpriseLinux7/RHEL7-59609
1325;;;;;;;;;5;2. --max-unauth-clients > --max-clients;​​;;RedHatEnterpriseLinux7/RHEL7-59609
1325;;;;;;;;;6;"#  virt-admin srv-clients-set libvirtd --max-unauth-clients 3000 --max-clients 30
 
​​";error: --max-unauth-clients must be less than --max-clients;;RedHatEnterpriseLinux7/RHEL7-59609
1326;RHEL7-59613;[cd/pwd] - change and print the current directory;"This is just the same thing in virsh API, change and print the current directory,  command can only be used in interactive mode. pwd will print the current directory.
";Fangge Jin (fjin);Medium;Positive;Automated;;1;"Enter interactive mode by command ""virt-admin"":

 # virt-admin 
 Welcome to virt-admin, the administrating virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virt-admin # 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59613
1326;;;;;;;;;2;"Change to directory /:
 virt-admin # cd /
 
 check the current directory:
 virt-admin # pwd
 /
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59613
1326;;;;;;;;;3;"Change to directory /:
 virt-admin # cd /home
 
 check the current directory
 virt-admin # pwd
 /home";​​;;RedHatEnterpriseLinux7/RHEL7-59613
1326;;;;;;;;;4;"Quit interactive mode:
 
 virt-admin # quit
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59613
1326;;;;;;;;;5;"In non-interactive mode:
 
 # virt-admin cd /
 error: cd: command valid only in interactive mode
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59613
1326;;;;;;;;;6;"In non-interactive mode:
 
 # virt-admin pwd
 /root
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59613
1327;RHEL7-59614;[echo] - echo arguments;Command echo is not supposed to be included in virt-admin. You can skip this test.;Fangge Jin (fjin);Medium;Positive;Automated;;1;"1. echo variable
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-59614
1327;;;;;;;;;2;"# echo $HOME
 /root
 
 # virt-admin echo $HOME
 /root";The output of the two commands are same;;RedHatEnterpriseLinux7/RHEL7-59614
1327;;;;;;;;;3;"2. --xml            escape for XML use
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59614
1327;;;;;;;;;4;"# virt-admin echo --xml ""&aa<""
 
​​";"The characters are translates to xml characters
 
 Output:
 
 &amp;aa&lt;";;RedHatEnterpriseLinux7/RHEL7-59614
1327;;;;;;;;;5;"3.     --shell          escape for shell use
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59614
1327;;;;;;;;;6;"# virsh echo --shell ""virsh\n""
 
 
​​";"'virsh\n'
 
 
 Note: only if arg included shell
 metacharacters(""\r\t\n !\""#$&'()*;<>?[\\\\]^`{|}~"") and with --shell,it will  be single-quoted
 
 compared to:
 # virsh echo ""virsh\n""
 virsh\n
​​";;RedHatEnterpriseLinux7/RHEL7-59614
1328;RHEL7-59615;[exit] - quit this interactive terminal;Command quit and exit take the same effect: quit this interactive terminal;Fangge Jin (fjin);Medium;Positive;Automated;;1;"Enter interactive mode by command ""virt-admin"":
 # virt-admin 
 Welcome to virt-admin, the administrating virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virt-admin #";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59615
1328;;;;;;;;;2;"Input quit:
 
 virt-admin # exit
 
 [root@localhost ~]# 
​​";"The virt-admin quits
​​";;RedHatEnterpriseLinux7/RHEL7-59615
1329;RHEL7-59616;[help] - print help - bug 1538570;"This command is supposed to list each of the virt-admin commands. 
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"# virt-admin help
 
 
​​";"Output:
 Grouped commands:
 
  Virt-admin itself (help keyword 'virt-admin'):
     cd                             change the current directory
     echo                           echo arguments
     exit                           quit this interactive terminal
     help                           print help
     pwd                            print the current directory
     quit                           quit this interactive terminal
     uri                            print the admin server URI
     version                        show version
     connect                        connect to daemon's admin server
 
  Monitoring commands (help keyword 'monitor'):
     srv-list                       list available servers on a daemon
     srv-threadpool-info            get server workerpool parameters
     srv-clients-list               list clients connected to <server>
     client-info                    retrieve client's identity info from server
     srv-clients-info               get server's client-related configuration limits
 
  Management commands (help keyword 'management'):
     srv-threadpool-set             set server workerpool parameters
     client-disconnect              force disconnect a client from the given server
     srv-clients-set                set server's client-related configuration limits";Test Case;RedHatEnterpriseLinux7/RHEL7-59616
1329;;;;;;;;;2;"# virt-admin help virt-admin
 
​​";" Virt-admin itself (help keyword 'virt-admin'):
     cd                             change the current directory
     echo                           echo arguments
     exit                           quit this interactive terminal
     help                           print help
     pwd                            print the current directory
     quit                           quit this interactive terminal
     uri                            print the admin server URI
     version                        show version
     connect                        connect to daemon's admin server";;RedHatEnterpriseLinux7/RHEL7-59616
1329;;;;;;;;;3;"# virt-admin help cd
 
​​";"  NAME
     cd - change the current directory
 
   SYNOPSIS
     cd [--dir <string>]
 
   DESCRIPTION
     Change the current directory.
 
   OPTIONS
     --dir <string>   directory to switch to (default: home or else root)";;RedHatEnterpriseLinux7/RHEL7-59616
1329;;;;;;;;;4;" print help for virt-admin cmd alias
# virt-admin help srv-list 
  NAME
    server-list - list available servers on a daemon

  SYNOPSIS
    server-list

I also try to print help other cmd aliases of virt-admin, including
srv-threadpool-info,
srv-clients-info,
srv-threadpool-set,
srv-clients-set";"All of the cmd aliases should work well
​​";;RedHatEnterpriseLinux7/RHEL7-59616
1330;RHEL7-59617;[quit] - quit this interactive terminal;Command quit and exit take the same effect: quit this interactive terminal;Fangge Jin (fjin);Medium;Positive;Automated;;1;"Enter interactive mode by command ""virt-admin"":
 # virt-admin 
 Welcome to virt-admin, the administrating virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virt-admin #";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-59617
1330;;;;;;;;;2;"Input exit:
 
 virt-admin # quit
 
 [root@localhost ~]# 
​​";"The virt-admin quits
​​";;RedHatEnterpriseLinux7/RHEL7-59617
1331;RHEL7-59618;[uri] -   print the admin server URI;Check whether it can print the admin server canonical URI;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"# virt-admin uri
 libvirtd:///system
​​";"The uri is libvirtd:///system by default.
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-59618
1332;RHEL7-59619;[version] - show version;check whether the version printed by -v/--version is correct;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"# rpm -q libvirt
​​";"Output:
 
 libvirt-2.0.0-1.el7.x86_64";Test Case;RedHatEnterpriseLinux7/RHEL7-59619
1332;;;;;;;;;2;# virt-admin version;"The version should be same as the output of ""rpm -q libvirt"":
 
 Compiled against library: libvirt 2.0.0
 Using library: libvirt 2.0.0
 Running against daemon: 2.0.0";;RedHatEnterpriseLinux7/RHEL7-59619
1333;RHEL7-59620;[connect] - connect to daemon's admin server;Test connect command of virt-admin;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;1. Connect without options;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59620
1333;;;;;;;;;2;"# virt-admin ""connect;uri""
 Connected to the admin server
 
 libvirtd:///system
​​";"The uri is libvirtd:///system by default
​​";;RedHatEnterpriseLinux7/RHEL7-59620
1334;RHEL7-59635;[domdisplay] - Output the IP address and port number for the graphical display.;Output the IP address and port number for the graphical display.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1; Get graphic domdisplay without password;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59635
1334;;;;;;;;;2;"#virsh domdisplay $guest_name

 #virsh domdisplay $guest_id

 #virsh domdisplay $guest_uuid

 #virsh domdisplay --domain $guest_name

 #virsh domdisplay --domain $guest_id

 #virsh domdisplay --domain $guest_uuid";"verify spice URI of guest can display in console

 like:
 spice://127.0.0.1:5900

 or

 vnc://127.0.0.1:0";;RedHatEnterpriseLinux7/RHEL7-59635
1334;;;;;;;;;3;Get graphic domdisplay including password;​​;;RedHatEnterpriseLinux7/RHEL7-59635
1334;;;;;;;;;4;"#virsh domdisplay $guest_name --include-password
 #virsh domdisplay $guest_id --include-password
 #virsh domdisplay $guest_uuid --include-password
 #virsh domdisplay --domain $guest_name --include-password
 #virsh domdisplay --domain $guest_id --include-password
 #virsh domdisplay --domain $guest_uuid --include-password";"step 4:
 spice://:redhat@127.0.0.1:5900

 or

 vnc://:redhat@127.0.0.1:0";;RedHatEnterpriseLinux7/RHEL7-59635
1335;RHEL7-59643;[-c / --connect URI] Connect to the specified URI - valid;Use -c/--connect to connect to the specified URI, connection will be successful when libvirtd is active ;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1. Connect to a uri
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-59643
1335;;;;;;;;;2;" # virt-admin -c libvirtd:///system
 Welcome to virt-admin, the administrating virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virt-admin #"; Connect successfully;;RedHatEnterpriseLinux7/RHEL7-59643
1335;;;;;;;;;3;"Print uri:
 
 virt-admin # uri
 
​​";"Outout:
 
 libvirtd:///system";;RedHatEnterpriseLinux7/RHEL7-59643
1335;;;;;;;;;4;"2. Connect to uri while libvirtd is inactive
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59643
1335;;;;;;;;;5;"# virt-admin -c libvirtd:///system
​​";"Output:
 
 error: Failed to connect to the admin server
 error: Failed to connect socket to '/var/run/libvirt/libvirt-admin-sock': No such file or directory";;RedHatEnterpriseLinux7/RHEL7-59643
1336;RHEL7-59644;[-d / --debug LEVEL] Enable debug messages at specified LEVEL and above;Test the -d option by checking the debug messages;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" -d 0
 DEBUG - Messages at ALL levels get logged
​​";" 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-59644
1336;;;;;;;;;2;" # virt-admin -d 0 srv-clients-list libvirtd
 
​​";"Output: 
 
 srv-clients-list: server(optdata): libvirtd
  Id    Transport       Connected since
 --------------------------------------------------";;RedHatEnterpriseLinux7/RHEL7-59644
1336;;;;;;;;;3;"-d 1 
 INFO - Logs messages at levels INFO, NOTICE, WARNING and ERROR";​​;;RedHatEnterpriseLinux7/RHEL7-59644
1336;;;;;;;;;4;"# virt-admin -d 1 srv-clients-list libvirtd
 
​​";"Output: 
 
 srv-clients-list: server(optdata): libvirtd
  Id    Transport       Connected since
 --------------------------------------------------";;RedHatEnterpriseLinux7/RHEL7-59644
1336;;;;;;;;;5;"-d 2
 NOTICE - Logs messages at levels NOTICE, WARNING and ERROR
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59644
1336;;;;;;;;;6;"# virt-admin -d 2 srv-clients-list libvirtd
  
​​";"Output:
 
 Id    Transport       Connected since
 --------------------------------------------------";;RedHatEnterpriseLinux7/RHEL7-59644
1336;;;;;;;;;7;#  virt-admin -d 2 srv-clients-list aaaaaaa;"Output:
 
 error: Server not found: No server named 'aaaaaaa'";;RedHatEnterpriseLinux7/RHEL7-59644
1336;;;;;;;;;8;"-d 3
 WARNING - Logs messages at levels WARNING and ERROR
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59644
1336;;;;;;;;;9;"# virt-admin -d 3 srv-clients-list libvirtd
  
​​";"Output:
 
 Id    Transport       Connected since
 --------------------------------------------------";;RedHatEnterpriseLinux7/RHEL7-59644
1336;;;;;;;;;10;#  virt-admin -d 3 srv-clients-list aaaaaaa;"Output:
 
 error: Server not found: No server named 'aaaaaaa'";;RedHatEnterpriseLinux7/RHEL7-59644
1336;;;;;;;;;11;"-d 4
 ERROR - Messages at only ERROR level gets logged.
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59644
1336;;;;;;;;;12;"# virt-admin -d 4 srv-clients-list libvirtd
  
​​";"Output:
 
 Id    Transport       Connected since
 --------------------------------------------------";;RedHatEnterpriseLinux7/RHEL7-59644
1336;;;;;;;;;13;#  virt-admin -d 4 srv-clients-list aaaaaaa;"Output:
 
 error: Server not found: No server named 'aaaaaaa'";;RedHatEnterpriseLinux7/RHEL7-59644
1336;;;;;;;;;14;"-d 5
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59644
1336;;;;;;;;;15;"# virt-admin -d 5 srv-clients-list libvirtd
 
​​";"Output:
 
 error: ignoring debug level 5 out of range [0-4]
  Id    Transport       Connected since
 --------------------------------------------------";;RedHatEnterpriseLinux7/RHEL7-59644
1337;RHEL7-59645;[-l / --log FILE]Output logging details to FILE;Test -l option by checking whether the log will be logged into the corresponding logfile. ;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" #  virt-admin -d 0 -l logfile srv-clients-list aaaaaaa
 
​​";" Output:
 
 srv-clients-list: server(optdata): aaaaaaa
 error: Server not found: No server named 'aaaaaaa'";Test Case;RedHatEnterpriseLinux7/RHEL7-59645
1337;;;;;;;;;2;"# cat logfile 
 
​​";"Output:
 
 [2016.07.14 15:45:18 virt-admin 23323] INFO srv-clients-list: server(optdata): aaaaaaa
 [2016.07.14 15:45:18 virt-admin 23323] ERROR Server not found: No server named 'aaaaaaa'";;RedHatEnterpriseLinux7/RHEL7-59645
1338;RHEL7-59646;[-h / --help] Print help message;Print help message;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" # virt-admin -h
​​";"Output:
 
 virt-admin [options]... [<command_string>]
 virt-admin [options]... <command> [args...]
 
   options:
     -c | --connect=URI      daemon admin connection URI
     -d | --debug=NUM        debug level [0-4]
     -h | --help             this help
     -l | --log=FILE         output logging to file
     -q | --quiet            quiet mode
     -v                      short version
     -V                      long version
          --version[=TYPE]   version, TYPE is short or long (default short)
   commands (non interactive mode):
 
  Virt-admin itself (help keyword 'virt-admin')
     cd                             change the current directory
     echo                           echo arguments
     exit                           quit this interactive terminal
     help                           print help
     pwd                            print the current directory
     quit                           quit this interactive terminal
     uri                            print the admin server URI
     version                        show version
     connect                        connect to daemon's admin server
 
  Monitoring commands (help keyword 'monitor')
     srv-list                       list available servers on a daemon
     srv-threadpool-info            get server workerpool parameters
     srv-clients-list               list clients connected to <server>
     client-info                    retrieve client's identity info from server
     srv-clients-info               get server's client-related configuration limits
 
  Management commands (help keyword 'management')
     srv-threadpool-set             set server workerpool parameters
     client-disconnect              force disconnect a client from the given server
     srv-clients-set                set server's client-related configuration limits
 
 
   (specify help <group> for details about the commands in the group)
 
   (specify help <command> for details about the command)";Test Case;RedHatEnterpriseLinux7/RHEL7-59646
1339;RHEL7-59647;[-q / --quiet] Avoid extra informational messages;"Test whether -q/--quiet option could  avoid extra informational messages
{comment:3}";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" # virt-admin -q
 virt-admin # 
​​";" No extra informattional messages output
 
 Compare with the output without -q:
 # virt-admin 
 Welcome to virt-admin, the administrating virtualization interactive terminal.

 Type:  'help' for help with commands
        'quit' to quit
 
 virt-admin # 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-59647
1339;;;;;;;;;2;"# virt-admin  -q srv-list
  0     admin          
  1     libvirtd      ";"No extra informattional messages output
 
 Compare with the output without -q:
 # virt-admin srv-list
  Id    Name           
 ---------------
  0     admin          
  1     libvirtd       ";;RedHatEnterpriseLinux7/RHEL7-59647
1339;;;;;;;;;3;"# virt-admin -q srv-clients-list libvirtd
  42    unix            2016-07-15 13:47:27+0800
​​";"No extra informational messages output
 
 Compare with the output without -q:
 # virt-admin  srv-clients-list libvirtd
  Id    Transport       Connected since
 --------------------------------------------------
  42    unix            2016-07-15 13:47:27+0800
​​";;RedHatEnterpriseLinux7/RHEL7-59647
1340;RHEL7-59648;[-v / --version=short] prints the version of the libvirt library virt-admin is coming from in short format;check whether the version printed by -v/--version is correct;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"# rpm -q libvirt
 libvirt-2.0.0-2.el7.x86_64
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59648
1340;;;;;;;;;2;" # virt-admin -v
 2.0.0";"The version should be same as ""rpm -q libvirt""
​​";;RedHatEnterpriseLinux7/RHEL7-59648
1340;;;;;;;;;3;"# virt-admin --version=short
 2.0.0
​​";"The version should be same as ""rpm -q libvirt""";;RedHatEnterpriseLinux7/RHEL7-59648
1341;RHEL7-59649;[-V / --version=long] prints the version of the libvirt library virt-admin is coming from in long format;check whether long format of the version printed by -V/--version=long is correct;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" # rpm -q libvirt
 libvirt-2.0.0-2.el7.x86_64";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59649
1341;;;;;;;;;2;"# virt-admin -V
 Virt-admin command line tool of libvirt 2.0.0
 See web site at http://libvirt.org/
 
 Compiled with support for: Daemon Debug Readline
​​";"The version should be same as ""rpm -q libvirt""";;RedHatEnterpriseLinux7/RHEL7-59649
1341;;;;;;;;;3;"# virt-admin --version=long
 Virt-admin command line tool of libvirt 2.0.0
 See web site at http://libvirt.org/
 
 Compiled with support for: Daemon Debug Readline
​​";"The version should be same as ""rpm -q libvirt""";;RedHatEnterpriseLinux7/RHEL7-59649
1342;RHEL7-59650;[command string] - Run multiple commands in one command string;Run multiple commands in one command string sparated by semicolon.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"# virt-admin 'pwd;srv-clients-list libvirtd'
 
​​";"Output:
 
 /root
 
  Id    Transport       Connected since
 --------------------------------------------------";Test Case;RedHatEnterpriseLinux7/RHEL7-59650
1343;RHEL7-59661;[-c / --connect URI] Connect to the specified URI - invalid;This is an invalid value testing. Use -c/--connect to connect to a invalid URI ;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"1. Connect to a invalid URI:
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59661
1343;;;;;;;;;2;"# virt-admin -c abc:def
​​";"Output:
 
 error: Failed to connect to the admin server
 error: unsupported configuration: Unsupported URI scheme 'abc'";;RedHatEnterpriseLinux7/RHEL7-59661
1344;RHEL7-59700;VIRT_ADMIN_DEBUG=<0 to 4> - Turn on verbose debugging of virt-admin commands.;"Bug 1357363  Some environment variables don't take effect for virt-admin
 Bug 1393854 - The error info is not accurate when setting invalid VIRT_ADMIN_DEBUG
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 1. VIRT_ADMIN_DEBUG=0
  DEBUG - Messages at ALL levels get logged";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59700
1344;;;;;;;;;2;"Open one terminal, execute a virt-admin command, e.g.:
 # virt-admin pwd";"# virt-admin pwd
 /root
 
​​";;RedHatEnterpriseLinux7/RHEL7-59700
1344;;;;;;;;;3;"Set debug level to 0 in shell
 # export VIRT_ADMIN_DEBUG=0
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59700
1344;;;;;;;;;4;"Execute the virt-admin command again:
 # virt-admin pwd
​​";"Should output the debug log:
 # virt-admin pwd
 commands: ""pwd""
 /root
​​";;RedHatEnterpriseLinux7/RHEL7-59700
1344;;;;;;;;;5;"2. VIRT_ADMIN_DEBUG=1
 INFO - Logs messages at levels INFO, NOTICE, WARNING and ERROR
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59700
1344;;;;;;;;;6;"3. VIRT_ADMIN_DEBUG=2
 NOTICE - Logs messages at levels NOTICE, WARNING and ERROR
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59700
1344;;;;;;;;;7;"4. VIRT_ADMIN_DEBUG=3
 WARNING - Logs messages at levels WARNING and ERROR
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59700
1344;;;;;;;;;8;"5. VIRT_ADMIN_DEBUG=4
 ERROR - Messages at only ERROR level gets logged";​​;;RedHatEnterpriseLinux7/RHEL7-59700
1344;;;;;;;;;9;"6 Negative test
 6.1.# export VIRT_ADMIN_DEBUG=-1
 # virt-admin
 
 
​​";"6.1# virt-admin
 error: VIRT_ADMIN_DEBUG not set with a valid numeric value
 error: VIRT_ADMIN_DEBUG not set with a valid numeric value
 Welcome to virt-admin, the administrating virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virt-admin # quit";;RedHatEnterpriseLinux7/RHEL7-59700
1344;;;;;;;;;10;"6.2 Parse args(vshAdmParseArgv) in cmd line (between vshInit and vshAdmInit):
 
 # export VIRT_ADMIN_DEBUG=-1
 # virt-admin -d 
​​";"6.2# virt-admin -d 0
 error: VIRT_ADMIN_DEBUG not set with a valid numeric value
 Welcome to virt-admin, the administrating virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virt-admin # 
 
​​";;RedHatEnterpriseLinux7/RHEL7-59700
1345;RHEL7-59701;"VIRT_ADMIN_LOG_FILE=""LOGFILE"" - Log virt-admin debug messages to a file.";Bug 1357363 Some environment variables don't take effect for virt-admin;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1.Open one terminal, set debug level:
 # export VIRT_ADMIN_DEBUG=0";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59701
1345;;;;;;;;;2;"2. Set the log file for virt-admin debug messages:
 # export VIRT_ADMIN_LOG_FILE=""admin.log""";​​;;RedHatEnterpriseLinux7/RHEL7-59701
1345;;;;;;;;;3;"3.Execute a virt-admin command, e.g.:
 # virt-admin uri";"# virt-admin uri
 commands: ""uri""
 libvirtd:///system";;RedHatEnterpriseLinux7/RHEL7-59701
1345;;;;;;;;;4;"4.Check the log file:
 # cat admin.log
​​";"# cat admin.log
 [2016.08.09 17:14:58 virt-admin 9145] INFO commands: ""uri""";;RedHatEnterpriseLinux7/RHEL7-59701
1346;RHEL7-59702;LIBVIRT_ADMIN_DEFAULT_URI - Set the default URI whose admin server to connect to;Setting admin server to connect to by default. This overrides the default URI set in any client config file.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"# export LIBVIRT_ADMIN_DEFAULT_URI=libvirtd:///system
 
 # virt-admin uri
 libvirtd:///system
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59702
1347;RHEL7-59703;VIRT_ADMIN_HISTSIZE - Set the number of commands to remember in the command history;Bug 1357363 Some environment variables don't take effect for virt-admin;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1.Open one terminal, set the number of history commands to remember:
 # export VIRT_ADMIN_HISTSIZE=2
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-59703
1347;;;;;;;;;2;"2.Enter interactive mode:
 # virt-admin
 Welcome to virt-admin, the administrating virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virt-admin #";​​;;RedHatEnterpriseLinux7/RHEL7-59703
1347;;;;;;;;;3;"3.Execute 3 different commands:
 virt-admin #pwd
 /root
 
 virt-admin # cd /
 
 virt-admin # srv-list
  Id    Name           
 ---------------
  0     admin          
  1     libvirtd       
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59703
1347;;;;;;;;;4;"4.Press ""UP"" key continually for at least 3 times to check the history commands
 virt-admin # cd /";"4.Can only get the latest 2 history commands, e.g.here only get ""cd /"" not ""pwd"" or earlier.
​​";;RedHatEnterpriseLinux7/RHEL7-59703
1348;RHEL7-59704;LIBVIRT_DEBUG=<1 to 4> - Turn on verbose debugging of all libvirt API calls;"Test the printing after setting different debug level one by one. 
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1. LIBVIRT_DEBUG=1
 Messages at level DEBUG or above";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59704
1348;;;;;;;;;2;"Set libvirt debug level to 1:
 # export LIBVIRT_DEBUG=1";​​;;RedHatEnterpriseLinux7/RHEL7-59704
1348;;;;;;;;;3;# virt-admin pwd;"Output libvirt messages of level DEBUG and above :
 
 2016-07-14 09:52:54.017+0000: 32008: debug : virEventRegisterDefaultImpl:267 : registering default event implementation
 2016-07-14 09:52:54.017+0000: 32008: debug : virEventPollAddHandle:115 : Used 0 handle slots, adding at least 10 more
 2016-07-14 09:52:54.017+0000: 32008: debug : virEventPollInterruptLocked:722 : Skip interrupt, 0 0
 2016-07-14 09:52:54.017+0000: 32008: info : virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=1 fd=4 events=1 cb=0x7f6e80170ee0 opaque=(nil) ff=(nil)
 2016-07-14 09:52:54.017+0000: 32008: debug : virEventRegisterImpl:234 : addHandle=0x7f6e80171640 updateHandle=0x7f6e801719a0 removeHandle=0x7f6e80170f40 addTimeout=0x7f6e801710c0 updateTimeout=0x7f6e801712e0 removeTimeout=0x7f6e801714b0
 ......
​​";;RedHatEnterpriseLinux7/RHEL7-59704
1348;;;;;;;;;4;"2. LIBVIRT_DEBUG=2
 Messages at level INFO or above";​​;;RedHatEnterpriseLinux7/RHEL7-59704
1348;;;;;;;;;5;# export LIBVIRT_DEBUG=2;​​;;RedHatEnterpriseLinux7/RHEL7-59704
1348;;;;;;;;;6;# virt-admin pwd;"Output libvirt messages of level DEBUG and above :
 
 2016-07-14 09:56:21.391+0000: 32511: info : virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=1 fd=4 events=1 cb=0x7fdff86ddee0 opaque=(nil) ff=(nil)
 2016-07-14 09:56:21.392+0000: 32512: info : virEventPollRunOnce:640 : EVENT_POLL_RUN: nhandles=1 timeout=-1
 /root
 
 2016-07-14 09:56:21.392+0000: 32511: info : virEventPollAddTimeout:253 : EVENT_POLL_ADD_TIMEOUT: timer=1 frequency=0 cb=0x7fdff9239790 opaque=(nil) ff=(nil)
 
 ......";;RedHatEnterpriseLinux7/RHEL7-59704
1348;;;;;;;;;7;"3. LIBVIRT_DEBUG=3
 Messages at level WARNING or above
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59704
1348;;;;;;;;;8;# export LIBVIRT_DEBUG=3;​​;;RedHatEnterpriseLinux7/RHEL7-59704
1348;;;;;;;;;9;"# virt-admin pwd
 /root";"Because there is no warning/error message produced, so no libvirt messages outputs.
 
 It will be great if you can find a method to produce warning/error messages.
​​";;RedHatEnterpriseLinux7/RHEL7-59704
1348;;;;;;;;;10;"4. LIBVIRT_DEBUG=4
 Messages at level ERROR or above";​​;;RedHatEnterpriseLinux7/RHEL7-59704
1348;;;;;;;;;11;"# virt-admin pwd
 /root";"Because there is no error message produced, so no libvirt messages outputs
 
 It will be great if you can find a method to produce warning/error messages.";;RedHatEnterpriseLinux7/RHEL7-59704
1349;RHEL7-59735;[non-root] Connect to system mode uri with non-root user;Trying to connect to system mode uri with non-root user should be not allowed.;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Login host as non-root user:
 ssh fjin@<ip>
 
 or
 Switch non-root user from root user:
 # su - fjin
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59735
1349;;;;;;;;;2;"$ virt-admin -c libvirtd:///system
 
​​";"Connect failed:
 
 error: Failed to connect to the admin server
 error: Failed to connect socket to '/var/run/libvirt/libvirt-admin-sock': Permission denied";;RedHatEnterpriseLinux7/RHEL7-59735
1350;RHEL7-59736;Connect to session mode uri with non-root user;"""virt-admin connect"" should connect to the session mode with non-root user 
Bug 1356858 - The default uri should be libvirtd:///session in non-root session";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Log in host as non-root user:
 ssh fjin@<ip>
 
 or
 Switch non-root user from root user:
 Note: must use ""su -"", not ""su""
 # su - fjin";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59736
1350;;;;;;;;;2;"Activitate libvirtd:
 $ virsh list
 
 $ ps aux|grep libvirtd
 fjin     11254  0.0  0.2 1184380 17664 ?       Sl   11:35   0:03 /usr/sbin/libvirtd --timeout=30
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59736
1350;;;;;;;;;3;"1. connect without options
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59736
1350;;;;;;;;;4;"$ virt-admin ""connect;uri""
 Connected to the admin server

 libvirtd:///session";"Connect successfully and uri is ""libvirtd:///session""
​​";;RedHatEnterpriseLinux7/RHEL7-59736
1350;;;;;;;;;5;"2. connect with specified uri
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59736
1350;;;;;;;;;6;"$ virt-admin ""connect libvirtd:///session; uri""
 Connected to the admin server
 
 libvirtd:///session
​​";"Connect successfully and uri is ""libvirtd:///session""";;RedHatEnterpriseLinux7/RHEL7-59736
1351;RHEL7-59738;[virtio-win][balloon] disable/enable balloon during guest play videos; .;Yu Wang (wyu);Medium;Positive;Not Automated;;1;" Steps:
 1. Start guest w/ virtio-balloon-pci.
 CLI:-device virtio-balloon-pci,id=balloon1"; 1. Guest could bootup successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-59738
1351;;;;;;;;;2;"2 check whether balloon.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled balloon.sys verifier:
     #verifier.exe /standard /driver balloon.sys  (run as administrator)
     then reboot the guest and recheck 
     #verifier /querysettings";"2. All the Standards flags are checked ,the verified driver fields shows
 ""balloon.sys""";;RedHatEnterpriseLinux7/RHEL7-59738
1351;;;;;;;;;3;"3. in the guest ,playing a video eg: visit www.youku.com or www.youtube.com
 ,find a video ,then play it";3. the video plays successfully ,guest did not hang;;RedHatEnterpriseLinux7/RHEL7-59738
1351;;;;;;;;;4;"4 during step 3, disable/enable balloon in device manager
 computer-->properites-->device
 manager --> right click balloon driver --> disable
 computer-->properites-->device
 manager --> right click balloon driver --> enable
​​";"4. guest did not crash
​​";;RedHatEnterpriseLinux7/RHEL7-59738
1352;RHEL7-59750;[domfsinfo] [-q] run virsh domfsinfo in quiet mode;Bug 1250287 - domfsinfo do not have output in quiet mode;Fangge Jin (fjin);Medium;Positive;Automated;;1;" Prepare a guest with guest agent, start guest
 # virsh start rhel7.2
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59750
1352;;;;;;;;;2;"When guest boots up fully, do:
 
 # virsh -q domfsinfo rhel7.2
 /                                    dm-0     xfs      vda
 /boot                                vda1     xfs      vda
 
​​";"No extra informational messages output.
 
 Compare with the output without -q:
 # virsh domfsinfo rhel7.2
 Mountpoint                           Name     Type     Target
 -------------------------------------------------------------------
 /                                    dm-0     xfs      vda
 /boot                                vda1     xfs      vda
​​";;RedHatEnterpriseLinux7/RHEL7-59750
1353;RHEL7-59751;[domstats] [--perf] get domain statistics when perf events are disabled.;get domain statistics when perf events are disabled.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Prepare a guest with perf events disabled or not set:
 
 e.g. set the perf events to no or remove perf elements from guest xml totally
 # virsh dumpxml test3
 ...
   <perf>
     <event name='cmt' enabled='no'/>
     <event name='mbmt' enabled='no'/>
     <event name='mbml' enabled='no'/>
   </perf>
 ...
 
 # virsh start test3
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59751
1353;;;;;;;;;2;"# virsh domstats test3 --perf
 Domain: 'test3'";"No perf event statistics output
​​";;RedHatEnterpriseLinux7/RHEL7-59751
1353;;;;;;;;;3;"# virsh domstats rhel7.2
 Domain: 'rhel7.2'
   state.state=1
   state.reason=1
   cpu.time=293335843744
   cpu.user=98660000000
   cpu.system=136570000000
   balloon.current=1024000
   balloon.maximum=1024000
   vcpu.current=4
   vcpu.maximum=4
   vcpu.0.state=1
   vcpu.0.time=17560000000
   vcpu.0.wait=0
   vcpu.1.state=1
   vcpu.1.time=13020000000
   vcpu.1.wait=0
   vcpu.2.state=1
   vcpu.2.time=6530000000
   vcpu.2.wait=0
   vcpu.3.state=1
   vcpu.3.time=8730000000
   vcpu.3.wait=0
   net.count=1
   net.0.name=vnet0
   net.0.rx.bytes=120613
   net.0.rx.pkts=2259
   net.0.rx.errs=0
   net.0.rx.drop=0
   net.0.tx.bytes=11101
   net.0.tx.pkts=95
   net.0.tx.errs=0
   net.0.tx.drop=0
   block.count=1
   block.0.name=vda
   block.0.path=/90121/fjin/rhel7.2.qcow2
   block.0.rd.reqs=11336
   block.0.rd.bytes=382988288
   block.0.rd.times=118470577883
   block.0.wr.reqs=1638
   block.0.wr.bytes=12147200
   block.0.wr.times=27072182541
   block.0.fl.reqs=351
   block.0.fl.times=2002630865
   block.0.allocation=9754181632
   block.0.capacity=9663676416
   block.0.physical=4019884032
 
​​";No perf event statistics output;;RedHatEnterpriseLinux7/RHEL7-59751
1354;RHEL7-59766;[Video devices] [QXL] [head] Start a guest with heads set for one qxl video;"Verify guest can start successfully with correct qemu command line when set only one qxl video and 4>=heads>=1.
Test matrix: heads=1, 4>=heads>1";Fangge Jin (fjin);High;Positive;Automated;;1;"Edit or define a guest with such setting:
 1) with one qxl video
 2) set heads to head_number  according to the test matrix in description field.";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59766
1354;;;;;;;;;2;"Start guest:
 # virsh start rhel7.4       
";​​;;RedHatEnterpriseLinux7/RHEL7-59766
1354;;;;;;;;;3;"Check qemu command line:
 # ps aux|grep rhel7.4|grep max_outputs 
​​";"max_outputs is set correctly in qemu command line.

 For example, output:
 ...
 -device qxl-vga,id=video0,ram_size=67108864,vram_size=16777216,vram64_size_mb=0,vgamem_mb=16,max_outputs=head_number ,bus=pci.0,addr=0x7";;RedHatEnterpriseLinux7/RHEL7-59766
1354;;;;;;;;;4;The following steps are optional:;​​;;RedHatEnterpriseLinux7/RHEL7-59766
1354;;;;;;;;;5;"Use remote-viewer to connect to guest:
 # remote-viewer spice://<ip>:<port>";​​;;RedHatEnterpriseLinux7/RHEL7-59766
1354;;;;;;;;;6;Click View->Displays;head_number display(s) are shown;;RedHatEnterpriseLinux7/RHEL7-59766
1354;;;;;;;;;7;Select all the displays;head_number windows are opened.;;RedHatEnterpriseLinux7/RHEL7-59766
1355;RHEL7-59821;Decrease maxWorkers of libvirtd at runtime - new maxWorkers >= nWorkers;Decrease maxWorkers of libvirtd at runtime - new maxWorkers >= nWorkers, the setting will be successful, and other values don't change;Fangge Jin (fjin);Critical;Positive;Automated;;1;" Get current value:
 # virt-admin srv-threadpool-info libvirtd
 minWorkers     : 5
 maxWorkers     : 20
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 5
 jobQueueDepth  : 0
​​";"
 maxWorkers > nWorkers
";Test Case;RedHatEnterpriseLinux7/RHEL7-59821
1355;;;;;;;;;2;"decrease maxWorkers to a value that meets: --max-workers >= nWorkers
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59821
1355;;;;;;;;;3;# virt-admin srv-threadpool-set libvirtd --max-workers 10;​​;;RedHatEnterpriseLinux7/RHEL7-59821
1355;;;;;;;;;4;"Check new value:
 # virt-admin srv-threadpool-info libvirtd
​​";"maxWorkers is 10,  other values don't change
 
 minWorkers     : 5
 maxWorkers     : 10
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 5
 jobQueueDepth  : 0";;RedHatEnterpriseLinux7/RHEL7-59821
1356;RHEL7-59822;Tune minWorkers and maxWorkers at runtime together;Tune minWorkers, maxWorkers and priority-workers at runtime together. The setting will be successful when  min-workers < =max-workers, and failed vice versa.;Fangge Jin (fjin);Critical;Positive;Automated;;1;"Get current values:
 # virt-admin srv-threadpool-info libvirtd";"minWorkers     : 5
 maxWorkers     : 30
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 10
 jobQueueDepth  : 0";Test Case;RedHatEnterpriseLinux7/RHEL7-59822
1356;;;;;;;;;2;1) --min-workers < --max-workers;​​;;RedHatEnterpriseLinux7/RHEL7-59822
1356;;;;;;;;;3;"# virt-admin srv-threadpool-set libvirtd --min-workers 2 --max-workers 31 --priority-workers 11
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59822
1356;;;;;;;;;4;# virt-admin srv-threadpool-info libvirtd;"
 
 minWorkers     : 2
 maxWorkers     : 31
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 11
 jobQueueDepth  : 0";;RedHatEnterpriseLinux7/RHEL7-59822
1356;;;;;;;;;5;2) --min-workers > --max-workers;​​;;RedHatEnterpriseLinux7/RHEL7-59822
1356;;;;;;;;;6;"# virt-admin srv-threadpool-set libvirtd --min-workers 3 --max-workers 1 --priority-workers 11
​​";error: --min-workers must be less than --max-workers;;RedHatEnterpriseLinux7/RHEL7-59822
1356;;;;;;;;;7;# virt-admin srv-threadpool-info libvirtd;"The threadpool parameters don't change:
 
 minWorkers     : 2
 maxWorkers     : 31
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 11
 jobQueueDepth  : 0";;RedHatEnterpriseLinux7/RHEL7-59822
1357;RHEL7-59823;Tune priority workers number of libvirtd at runtime;Tune priority workers number of libvirtd at runtime;Fangge Jin (fjin);High;Positive;Automated;;1;" Get current value:
 # virt-admin srv-threadpool-info libvirtd
 
​​";"You may have different current values, that's ok.
 
  minWorkers     : 5
 maxWorkers     : 30
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 5
 jobQueueDepth  : 0";Test Case;RedHatEnterpriseLinux7/RHEL7-59823
1357;;;;;;;;;2;# virt-admin srv-threadpool-set libvirtd --priority-workers 10;​​;;RedHatEnterpriseLinux7/RHEL7-59823
1357;;;;;;;;;3;"Check new value:
 # virt-admin srv-threadpool-info libvirtd
 
​​";"The prioWorkers is 10, other values don't change:
 
 minWorkers     : 5
 maxWorkers     : 30
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 10
 jobQueueDepth  : 0";;RedHatEnterpriseLinux7/RHEL7-59823
1358;RHEL7-59826;List and Retrieve identity details about a client - tls client - bug 1524399;"Use command client-info to list and retrieve identity details about a client of type ""tls""";Fangge Jin (fjin);High;Positive;Not Automated;;1;" On server host:
 # virt-admin srv-clients-list libvirtd
 
 
​​";"  Id    Transport       Connected since
 --------------------------------------------------
  1     tls             2016-07-18 20:47:12+0800";Test Case;RedHatEnterpriseLinux7/RHEL7-59826
1358;;;;;;;;;2;"# virt-admin client-info libvirtd 1
​​";"Check each item in output:
 id is same as step1
 connection time is same as step1
 transport is tls
 readonly is no
 sock addr can be checked by ""netstat -tunap|grep 34305""
 tls_x509_dname is same as client.sh
 
 id             : 1
 connection_time: 2016-07-18 20:47:12+0800
 transport      : tls
 readonly       : no
 sock_addr      : 10.66.5.43:34305
 tls_x509_dname : CN=client.nay.redhat.com,O=Red Hat,L=London,ST=London,C=GB";;RedHatEnterpriseLinux7/RHEL7-59826
1358;;;;;;;;;3;"Readonly connection
 1. on client host, connect to the server by tls in readonly mode
# virsh -c qemu+tls://server-hostname/system -r 
Welcome to virsh, the virtualization interactive terminal.

Type:  'help' for help with commands
       'quit' to quit

virsh >
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59826
1358;;;;;;;;;4;"2. check the connection using virt-admin cmd
# virt-admin client-info libvirtd 2
id             : 2
connection_time: 2018-06-22 01:42:02-0400
transport      : tls
readonly       : **yes**
sock_addr      : *client-ip*:38098
tls_x509_dname : CN=10.66.5.24,O=Red Hat,L=London,ST=London,C=GB";"The readonly attribute of tcp connection is readonly
​​";;RedHatEnterpriseLinux7/RHEL7-59826
1359;RHEL7-59827;[negative]Retrieve identity details of a non-existing client;Retrieve identity details of a non-existing client, this operation would be failed.;Fangge Jin (fjin);High;Negative;Not Automated;;1; # virt-admin srv-clients-list libvirtd;" Id    Transport       Connected since
 --------------------------------------------------
  31    unix            2016-07-07 18:27:39+0800
  33    unix            2016-07-07 18:28:42+0800";Test Case;RedHatEnterpriseLinux7/RHEL7-59827
1359;;;;;;;;;2;# virt-admin client-info libvirtd 30;error: Client not found: No client with matching ID '30';;RedHatEnterpriseLinux7/RHEL7-59827
1360;RHEL7-59828;Get the current number of clients connected to libvirtd;Get the current number of clients connected to libvirtd;Fangge Jin (fjin);High;Positive;Automated;;1;" Get current clients info:

 # virt-admin srv-clients-info libvirtd";" nclients_max        : 6000
 nclients            : 0
 nclients_unauth_max : 30
 nclients_unauth     : 0";Test Case;RedHatEnterpriseLinux7/RHEL7-59828
1360;;;;;;;;;2;"In a new terminal, connect a client to libvirtd:

 # virsh -c qemu:///system
 Welcome to virsh, the virtualization interactive terminal.

 Type:  'help' for help with commands
        'quit' to quit

 virsh #";​​;;RedHatEnterpriseLinux7/RHEL7-59828
1360;;;;;;;;;3;"Get clients info again:
 
 # virt-admin srv-clients-info libvirtd";"nclients increases 1
 
 nclients_max        : 6000
 nclients            : 1
 nclients_unauth_max : 30
 nclients_unauth     : 0";;RedHatEnterpriseLinux7/RHEL7-59828
1361;RHEL7-59829;Retrieve identity details about a client with sasl authentication;"Use command client-info to retrieve identity details about a client with sasl authentication.
Bug 1361948 - SASL info is missing in the output of ""virt-admin client-info""";Fangge Jin (fjin);High;Positive;Not Automated;;1;" 1. Connect a unix virsh client to libvirtd
 # virsh -c qemu:///system
 Please enter your authentication name: fred
 Please enter your password: 
 Welcome to virsh, the virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virsh # 
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59829
1361;;;;;;;;;2;"# virt-admin srv-clients-list libvirtd
  Id    Transport       Connected since
 --------------------------------------------------
  3     unix            2016-07-19 17:59:26+0800
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59829
1361;;;;;;;;;3;"# virt-admin client-info libvirtd 3
 id             : 3
 connection_time: 2016-07-19 17:59:26+0800
 transport      : unix
 readonly       : no
 sasl_user_name : fred
 unix_user_id   : 0
 unix_user_name : root
 unix_group_id  : 0
 unix_group_name: root
 unix_process_id: 16118
 selinux_context: unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023";"There is sasl info output: ""sasl_user_name : fred""
​​";;RedHatEnterpriseLinux7/RHEL7-59829
1362;RHEL7-59906;[negative] Decrease max_clients of libvirtd to a new value less than max_anonymous_clients;Decrease max_clients of libvirtd to a new value less than max_anonymous_clients, the setting will be not be allowed.;Fangge Jin (fjin);Critical;Negative;Automated;;1;"# virt-admin srv-clients-info libvirtd
 nclients_max        : 3000
 nclients            : 0
 nclients_unauth_max : 30
 nclients_unauth     : 0";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59906
1362;;;;;;;;;2;# virt-admin srv-clients-set libvirtd --max-clients 5;"error: Unable to change server's client-related configuration limits
 error: invalid argument: The overall maximum number of clients must be greater than the maximum number of clients waiting for authentication";;RedHatEnterpriseLinux7/RHEL7-59906
1362;;;;;;;;;3;# virt-admin srv-clients-info libvirtd;"The nclients_max doesn't change
 
 nclients_max        : 3000
 nclients            : 0
 nclients_unauth_max : 30
 nclients_unauth     : 0";;RedHatEnterpriseLinux7/RHEL7-59906
1363;RHEL7-59907;[negative] Change max_anonymous_clients of libvirtd to a new value more than max_clients;Tune max_anonymous_clients to a new value larger than max_clients, the setting will not be allowed. ;Fangge Jin (fjin);High;Negative;Automated;;1;"# virt-admin srv-clients-info libvirtd nclients_max        : 3000
 nclients            : 0
 nclients_unauth_max : 10
 nclients_unauth     : 0";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59907
1363;;;;;;;;;2;#  virt-admin srv-clients-set libvirtd --max-unauth-clients 5000;"error: Unable to change server's client-related configuration limits
 error: invalid argument: The overall maximum number of clients must be greater than the maximum number of clients waiting for authentication";;RedHatEnterpriseLinux7/RHEL7-59907
1363;;;;;;;;;3;# virt-admin srv-clients-info libvirtd;"The nclients_unauth_max doesn't change:
 
 nclients_max        : 3000
 nclients            : 1
 nclients_unauth_max : 10
 nclients_unauth     : 0";;RedHatEnterpriseLinux7/RHEL7-59907
1364;RHEL7-59908;Decrease max_clients of libvirtd at runtime - max_clients <= nclients;Decrease max_clients of libvirtd at runtime - max_clients <= nclients, the setting will be successful. However, the connection will not be allowed any longer.;Fangge Jin (fjin);Critical;Positive;Automated;;1;"Get current clients info:
 
 # virt-admin srv-clients-info libvirtd
 nclients_max        : 5000
 nclients            : 0
 nclients_unauth_max : 30
 nclients_unauth     : 0";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59908
1364;;;;;;;;;2;"Open three terminals, connect a virsh client to libvirtd in each terminal:
 1) In terminal one:
 # virsh -c qemu:///system
 
 2) In terminal two:
 # virsh -c qemu:///system
 
 3) In terminal three:
 # virsh -c qemu:///system
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59908
1364;;;;;;;;;3;"# virt-admin srv-clients-info libvirtd
 
​​";"The nclients is 3:
 
 nclients_max        : 5000
 nclients            : 3
 nclients_unauth_max : 30
 nclients_unauth     : 0
​​";;RedHatEnterpriseLinux7/RHEL7-59908
1364;;;;;;;;;4;"Set max_clients to a value less than 3:
 # virt-admin srv-clients-set libvirtd --max-clients 2 --max-unauth-clients 2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59908
1364;;;;;;;;;5;"# virt-admin srv-clients-info libvirtd 
  ";"The nclients_max and nclients_unauth_max are 2, but nclients_unauth_max is still 3:
 
 nclients_max        : 2
 nclients            : 3
 nclients_unauth_max : 2
 nclients_unauth     : 0
​​";;RedHatEnterpriseLinux7/RHEL7-59908
1364;;;;;;;;;6;"Open a new terminal, try to connect a new virsh client to libvirtd:
 # virsh -c qemu:///system
 (hangs)
​​";"Connection doesn't succeed.
​​";;RedHatEnterpriseLinux7/RHEL7-59908
1365;RHEL7-59934;Increase max_clients of libvirtd at runtime when it has been reached - max_clients > nclients;Increase max_clients of libvirtd when nclients reaches limit of the max_clients, set successfully;Fangge Jin (fjin);Critical;Positive;Automated;;1;"Get current values:
 
 # virt-admin srv-clients-info libvirtd 
 nclients_max        : 2
 nclients            : 0
 nclients_unauth_max : 2
 nclients_unauth     : 0
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59934
1365;;;;;;;;;2;"Open two terminals, connect a virsh client in each terminal:
 # virsh -c qemu:///system";​​;;RedHatEnterpriseLinux7/RHEL7-59934
1365;;;;;;;;;3;"# virt-admin srv-clients-info libvirtd 
 nclients_max        : 2
 nclients            : 2
 nclients_unauth_max : 2
 nclients_unauth     : 0
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59934
1365;;;;;;;;;4;"Increase max_clients limit:
 # virt-admin srv-clients-set libvirtd --max-clients 5
 
 # virt-admin srv-clients-info libvirtd 
 nclients_max        : 5
 nclients            : 2
 nclients_unauth_max : 2
 nclients_unauth     : 0";​​;;RedHatEnterpriseLinux7/RHEL7-59934
1365;;;;;;;;;5;"Connect a new virsh client to libvirtd:
 # virsh -c qemu:///system
 Welcome to virsh, the virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virsh # quit";"Connection succeed
​​";;RedHatEnterpriseLinux7/RHEL7-59934
1365;;;;;;;;;6;"# virt-admin srv-clients-info libvirtd 
 nclients_max        : 5
 nclients            : 3
 nclients_unauth_max : 2
 nclients_unauth     : 0";​​;;RedHatEnterpriseLinux7/RHEL7-59934
1366;RHEL7-59950;Decrease minWorkers of libvirtd at runtime;Decrease minWorkers of libvirtd at runtime, it will be set successfully and other values don't change;Fangge Jin (fjin);Critical;Positive;Automated;;1;"Get current threadpool attributes:
 
 # virt-admin srv-threadpool-info libvirtd
 minWorkers     : 5
 maxWorkers     : 20
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 5
 jobQueueDepth  : 0";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59950
1366;;;;;;;;;2;"set min_workers to 2: 
 # virt-admin srv-threadpool-set libvirtd --min-workers 2";​​;;RedHatEnterpriseLinux7/RHEL7-59950
1366;;;;;;;;;3;"Check new value:
 # virt-admin srv-threadpool-info libvirtd";"The minWorkers is 2, other values don't change:
 
 minWorkers     : 2
 maxWorkers     : 20
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 5
 jobQueueDepth  : 0";;RedHatEnterpriseLinux7/RHEL7-59950
1367;RHEL7-59951;[negative] Increase minWorkers of libvirtd at runtime - new minWorkers > maxWorkers;Increase minWorkers of libvirtd at runtime - new minWorkers > maxWorkers, and the setting will be failed;Fangge Jin (fjin);High;Negative;Automated;;1;"# virt-admin srv-threadpool-info libvirtd
 minWorkers     : 5
 maxWorkers     : 20
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 5
 jobQueueDepth  : 0";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59951
1367;;;;;;;;;2;# virt-admin srv-threadpool-set libvirtd --min-workers 32;"error: Unable to change server workerpool parameters
 error: invalid argument: minWorkers cannot be larger than maxWorkers";;RedHatEnterpriseLinux7/RHEL7-59951
1368;RHEL7-59952;Increase maxWorkers of libvirtd at runtime;Increase maxWorkers of libvirtd at runtime, and the setting will be successful and other values don't change;Fangge Jin (fjin);Critical;Positive;Automated;;1;" Get current value:
 # virt-admin srv-threadpool-info libvirtd
 minWorkers     : 2
 maxWorkers     : 20
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 50
 jobQueueDepth  : 0";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59952
1368;;;;;;;;;2;# virt-admin srv-threadpool-set libvirtd --max-workers 30;​​;;RedHatEnterpriseLinux7/RHEL7-59952
1368;;;;;;;;;3;"Check new value:
 # virt-admin srv-threadpool-info libvirtd";"maxWorkers is 30,  other values don't change
 
 minWorkers     : 2
 maxWorkers     : 30
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 50
 jobQueueDepth  : 0";;RedHatEnterpriseLinux7/RHEL7-59952
1369;RHEL7-59953;Decrease maxWorkers of libvirtd at runtime when freeWorkers >= new maxWorkers && nWorkers > new maxWorkers >= minWorkers;Decrease maxWorkers of libvirtd at runtime when freeWorkers >= new maxWorkers && nWorkers > new maxWorkers >= minWorkers, the setting will be successful and some of the workers will be killed (until nWorkers==maxWorkers);Fangge Jin (fjin);Critical;Positive;Automated;;1;" Get current value:
 # virt-admin srv-threadpool-info libvirtd
 minWorkers     : 2
 maxWorkers     : 20
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 50
 jobQueueDepth  : 0";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59953
1369;;;;;;;;;2;set maxWorkers to a value that meets: --max-workers >= --min-workers and --max-workers < nWorkers;​​;;RedHatEnterpriseLinux7/RHEL7-59953
1369;;;;;;;;;3;#  virt-admin srv-threadpool-set libvirtd --max-workers 3;​​;;RedHatEnterpriseLinux7/RHEL7-59953
1369;;;;;;;;;4;"# virt-admin srv-threadpool-info libvirtd
 
​​";"maxWorkers and nWorkers are 3, other values don't change.
 
 minWorkers     : 2
 maxWorkers     : 3
 nWorkers       : 3
 freeWorkers    : 3
 prioWorkers    : 50
 jobQueueDepth  : 0";;RedHatEnterpriseLinux7/RHEL7-59953
1370;RHEL7-59954;[negative] Decrease maxWorkers of libvirtd at runtime - new maxWorkers < minWorkers;Decrease maxWorkers of libvirtd at runtime - new maxWorkers < minWorkers, and the setting will be failed;Fangge Jin (fjin);High;Negative;Automated;;1;" Get current value:
 # virt-admin srv-threadpool-info libvirtd
 minWorkers     : 2
 maxWorkers     : 20
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 50
 jobQueueDepth  : 0";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59954
1370;;;;;;;;;2;# virt-admin srv-threadpool-set libvirtd --max-workers 1;"error: Unable to change server workerpool parameters
 error: invalid argument: minWorkers cannot be larger than maxWorkers";;RedHatEnterpriseLinux7/RHEL7-59954
1371;RHEL7-59957;Set default uri to some illegal value in libvirt-admin.conf;Bug 1367269 - The uri_default in libvirt-admin.conf doesn't take effect;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" Scenario 1:For root user:
 1.Keep default setting or set uri_default=""libvirtd:///system"" in libvirt-admin.conf, and do connect:
 # virt-admin ""connect;uri""
​​";"
 1.# virt-admin ""connect;uri""
 Connected to the admin server
 
 libvirtd:///system";Test Case;RedHatEnterpriseLinux7/RHEL7-59957
1371;;;;;;;;;2;"2.Set uri_default = ""abcde"" in libvirt-admin.conf:
 # vim /etc/libvirt/libvirt-admin.conf
 uri_default = ""abcde""
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59957
1371;;;;;;;;;3;"3.# virt-admin connect
​​";"3.# virt-admin connect
 error: Failed to connect to the admin server
 error: unsupported configuration: Unsupported URI scheme '<null>'";;RedHatEnterpriseLinux7/RHEL7-59957
1371;;;;;;;;;4;"Scenario 2:For session mode:
 4.Keep default setting or set uri_default=""libvirtd:///session"" in libvirt-admin.conf, and do connect:
 $ virt-admin ""connect;uri""";"
 4.Keep default setting or set uri_default=""libvirtd:///session"" in libvirt-admin.conf, and do connect:
 $ virt-admin ""connect;uri""
 Connected to the admin server
 
 libvirtd:///session";;RedHatEnterpriseLinux7/RHEL7-59957
1371;;;;;;;;;5;"
 5.Login with a non-root user, set uri_default = ""aaaaa"" in libvirt-admin.conf
 $ vim /home/test/.config/libvirt/libvirt-admin.conf
 uri_default = ""abcde""";"
​​";;RedHatEnterpriseLinux7/RHEL7-59957
1371;;;;;;;;;6;"6.$ virt-admin connect
 error: Failed to connect to the admin server
 error: unsupported configuration: Unsupported URI scheme '<null>'";"6.$ virt-admin connect
 error: Failed to connect to the admin server
 error: unsupported configuration: Unsupported URI scheme '<null>'";;RedHatEnterpriseLinux7/RHEL7-59957
1372;RHEL7-59958;Set uri_aliases in libvit-admin.conf;"Bug 1357364 The uri_aliases setting in libvirt-admin.conf doesn't take effect.
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 1.Set uri_aliases in libvirt-admin.conf: 
 # vim /etc/libvirt/libvirt-admin.conf 
 uri_aliases = [
   ""admin=libvirtd:///system"",
 ]
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59958
1372;;;;;;;;;2;"2.
 # virt-admin -c admin 
 Welcome to virt-admin, the administrating virtualization interactive terminal. Type: 'help' for help with commands 'quit' to quit
 virt-admin #
​​";"Virt-admin connects to libvirtd:///system successfully
 
​​";;RedHatEnterpriseLinux7/RHEL7-59958
1372;;;;;;;;;3;"virt-admin # uri
 libvirtd:///system
​​";"Uri is libvirtd:///system
​​";;RedHatEnterpriseLinux7/RHEL7-59958
1372;;;;;;;;;4;"3. # virt-admin ""connect admin;uri""
 Connected to the admin server
 
 libvirtd:///system";"Virt-admin connects to libvirtd:///system successfully and uri is libvirtd:///system
​​";;RedHatEnterpriseLinux7/RHEL7-59958
1373;RHEL7-59983;Increase minWorkers of libvirtd at runtime - - maxWorkers >= nWorkers >= new minWorkers;Increase minWorkers of libvirtd at runtime - - maxWorkers >= nWorkers >= new minWorkers, it will be set successfully and other values don't change;Fangge Jin (fjin);Critical;Positive;Automated;;1; Make sure libvirtd.service is active;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59983
1373;;;;;;;;;2;"Get current threadpool attributes:

 # virt-admin srv-threadpool-info libvirtd
 minWorkers     : 2
 maxWorkers     : 20
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 5
 jobQueueDepth  : 0";"minWorkers < nWorkers, if not, please use ""virt-admin srv-threadpool-set libvirtd --min-workers 2"" to adjust it.
​​";;RedHatEnterpriseLinux7/RHEL7-59983
1373;;;;;;;;;3;"Increase minWorkers that meet:  nWorkers > new minWorkers
 
 # virt-admin srv-threadpool-set libvirtd --min-workers 4
 
 # virt-admin srv-threadpool-info libvirtd
 minWorkers     : 4
 maxWorkers     : 20
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 5
 jobQueueDepth  : 0
​​";"The new minWorkers is set successfully and other values don't change
​​";;RedHatEnterpriseLinux7/RHEL7-59983
1373;;;;;;;;;4;"Increase minWorkers that meet:  nWorkers == new minWorkers

 # virt-admin srv-threadpool-set libvirtd --min-workers 5

 # virt-admin srv-threadpool-info libvirtd
 minWorkers     : 5
 maxWorkers     : 20
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 5
 jobQueueDepth  : 0
";"The new minWorkers is set successfully and other values don't change
​​";;RedHatEnterpriseLinux7/RHEL7-59983
1374;RHEL7-59984;Decrease maxWorkers of libvirtd at runtime when the freeWorkers < new maxWorkers && nWorkers > new maxWorkers >= minWorkers;This case test this scenario: there are some ongoing time-consuming jobs when decreasing maxWorkers, e.g. the new maxWorkers is 3, the nWorkers is 5 and freeWorkers < 3,  then the necessary number of workers will be terminated once they finish their previous job, unless other workers had already terminated, decreasing the limit to the requested value.;Fangge Jin (fjin);Critical;Positive;Manual Only;;1;" Get current values:
 # virt-admin srv-threadpool-info libvirtd
 minWorkers     : 5
 maxWorkers     : 10
 nWorkers       : 5
 freeWorkers    : 5
 prioWorkers    : 5
 jobQueueDepth  : 0
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-59984
1374;;;;;;;;;2;"Occupy 3 workers by starting migration for 3 guests:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59984
1374;;;;;;;;;3;"In terminal one:
 # virsh migrate rhel6 qemu+ssh://hp-dl385g7-06.lab.eng.pek2.redhat.com/system --live --verbose
 
 In terminal two:
 # virsh migrate rhel7 qemu+ssh://hp-dl385g7-06.lab.eng.pek2.redhat.com/system --live --verbose
 
 In terminal three:
 # virsh migrate rhel7.2 qemu+ssh://hp-dl385g7-06.lab.eng.pek2.redhat.com/system --live --verbose
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59984
1374;;;;;;;;;4;"Get current values:
 # virt-admin srv-threadpool-info libvirtd
 minWorkers     : 5
 maxWorkers     : 10
 nWorkers       : 5
 freeWorkers    : 2
 prioWorkers    : 5
 jobQueueDepth  : 0";​​;;RedHatEnterpriseLinux7/RHEL7-59984
1374;;;;;;;;;5;"Before migration finishes, change maxWorkers:
 Note: freeWorkers < new maxWorkers && nWorkers > new maxWorkers
 
 # virt-admin srv-threadpool-set libvirtd --min-workers 2 --max-workers 2
 
 # virt-admin srv-threadpool-info libvirtd
 minWorkers     : 2
 maxWorkers     : 2
 nWorkers       : 3
 freeWorkers    : 0
 prioWorkers    : 5
 jobQueueDepth  : 3
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59984
1374;;;;;;;;;6;"After one of the migrations finished:
 
 # virt-admin srv-threadpool-info libvirtd
 minWorkers     : 2
 maxWorkers     : 2
 nWorkers       : 2
 freeWorkers    : 1
 prioWorkers    : 5
 jobQueueDepth  : 0
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59984
1374;;;;;;;;;7;"After the second migration finished:
 
 # virt-admin srv-threadpool-info libvirtd
 minWorkers     : 2
 maxWorkers     : 2
 nWorkers       : 2
 freeWorkers    : 2
 prioWorkers    : 5
 jobQueueDepth  : 0
​​";​​;;RedHatEnterpriseLinux7/RHEL7-59984
1375;RHEL7-60039;[nodedevice] Negative testing : detach nodedevice without enable iommu--bug 1046919;"Detach node device need suitable environment, if not , it will be failed
";Jingjing Shao (jishao);Medium;Negative;Not Automated;;1;" 1. detach pci devices when iommu=off
 [root@sriov2 ~]# grep -irn ""iommu"" /var/log/messages
 
​​";"[root@sriov2 ~]# grep -irn ""iommu"" /var/log/messages
 19211:Jan 24 11:55:48 sriov2 kernel: [    0.000000] Kernel command line: BOOT_IMAGE=/vmlinuz-3.10.0-78.el7.x86_64 root=UUID=47dce99f-353c-45d2-9b91-88e1b9e54b71 ro vconsole.font=latarcyrheb-sun16 crashkernel=auto vconsole.keymap=us rhgb quiet intel_iommu=off
 19212:Jan 24 11:55:48 sriov2 kernel: [    0.000000] Intel-IOMMU: disabled
 ...(clipped)
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-60039
1375;;;;;;;;;2;2.  [root@sriov2 ~]# virsh nodedev-detach pci_0000_01_00_0;"error: Failed to detach device pci_0000_01_00_0
 error: Operation not supported: neither VFIO nor KVM device assignment is currently supported on this system";;RedHatEnterpriseLinux7/RHEL7-60039
1376;RHEL7-60201;[vnc] [listen type='none'] Start a guest with vnc listening  nowhere;Verify that guest can start and be connected successfully on local host when set vnc graphic listening nowhere in guest xml;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with vnc graphic
 2) set vnc listen type to none";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-60201
1376;;;;;;;;;2;" Start guest:
 # virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-60201
1376;;;;;;;;;3;"Check live xml:
 # virsh dumpxml rhel7.2
​​";"No port or address is assigned to guest.
 
 Output:
 ...
     <graphics type='vnc'>
       <listen type='none'/>
     </graphics>";;RedHatEnterpriseLinux7/RHEL7-60201
1376;;;;;;;;;4;"Check qemu command line:
 # ps aux|grep qemu|grep rhel7.2|grep vnc
 
​​";"The qemu command line includes:
 
 ... -vnc none...
​​";;RedHatEnterpriseLinux7/RHEL7-60201
1376;;;;;;;;;5;"On the local host, connect to guest by virt-viewer:
 # virt-viewer rhel7.2 --attach
​​";"Connects successfully, and guests text console or GUI is shown
 
​​";;RedHatEnterpriseLinux7/RHEL7-60201
1376;;;;;;;;;6;"Do some operation in the virt-viewer to verify the graphic works well, for example:
 # date";​​;;RedHatEnterpriseLinux7/RHEL7-60201
1377;RHEL7-60225;[spice] [spice_auto_unix_socket] start a guest with spice listening on an auto-generated unix socket;Verify guest can start and be connected successfully when set vnc graphic listening on a unix domain socket path in qemu.conf;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Enable spice_auto_unix_socket in /etc/libvirt/qemu.conf:

 spice_auto_unix_socket = 1";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-60225
1377;;;;;;;;;2;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set spice listen type to address, but don't set a specified address for vnc in domain xml
 3) set spice autoport='yes'(if don't set this, the listen type will become ""none"" automatically)";​​;;RedHatEnterpriseLinux7/RHEL7-60225
1377;;;;;;;;;3;" Start guest:
 # virsh start rhel7.4
";Guest starts successfully;;RedHatEnterpriseLinux7/RHEL7-60225
1377;;;;;;;;;4;# virsh dumpxml rhel7.4;"Spice Unix Socket path is auto-generated, and the socket path format is:
 /var/lib/libvirt/qemu/domain-{domain id}-{domain name}/spice.sock.

 Output:
 ...
     <graphics type='spice'>
       <listen type='socket' socket='/var/lib/libvirt/qemu/domain-9-rhel7.4/spice.sock'/>
     </graphics>

";;RedHatEnterpriseLinux7/RHEL7-60225
1377;;;;;;;;;5;"Check qemu command line:
 # ps aux|grep spice";"Qemu command line includes:

 -spice unix,addr=/var/lib/libvirt/qemu/domain-9-rhel7.4/spice.sock,disable-ticketing,seamless-migration=on";;RedHatEnterpriseLinux7/RHEL7-60225
1377;;;;;;;;;6;"Connect to guest by virt-viewer or virt-manager:
 # virt-viewer rhel7.4";Connect successfully;;RedHatEnterpriseLinux7/RHEL7-60225
1377;;;;;;;;;7;"Do some operation in virt-manager/virt-viewer to verify the graphic works well, for example:
 # date ";​​;;RedHatEnterpriseLinux7/RHEL7-60225
1378;RHEL7-60226;[spice] [listen type='none'] Start a guest with spice listening  nowhere;Verify that guest can start and be connected successfully on local host when set spice graphic listening nowhere in guest xml;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set spice listen type to none";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-60226
1378;;;;;;;;;2;" Start guest:
 # virsh start rhel7.2";" Guest start successfully
​​";;RedHatEnterpriseLinux7/RHEL7-60226
1378;;;;;;;;;3;"Check live xml:
 # virsh dumpxml rhel7.2";"No port or address is assigned to guest.
 
 Output:
 ...
     <graphics type='spice'>
       <listen type='none'/>
     </graphics>
 ...
​​";;RedHatEnterpriseLinux7/RHEL7-60226
1378;;;;;;;;;4;"Check qemu command line:
 # ps aux|grep rhel7.2|grep spice
​​";"The qemu command line includes ""port=0""
 
 ...-spice port=0,disable-ticketing,seamless-migration=on ...";;RedHatEnterpriseLinux7/RHEL7-60226
1378;;;;;;;;;5;"On the local host, connect to guest by virt-viewer:
 # virt-viewer rhel7.2 --attach";Connect successfully, and guests text console or GUI is shown;;RedHatEnterpriseLinux7/RHEL7-60226
1378;;;;;;;;;6;"Do some operation in the virt-viewer to verify the graphic works well, for example:
 # date";​​;;RedHatEnterpriseLinux7/RHEL7-60226
1379;RHEL7-60228;[vnc] [ no listen type] Define a guest with no specified listen type for vnc graphic;Verify that libvirt will set the listen type to address for vnc by default if don't set listen type for spice;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" Edit or define a guest with such setting:
 1) with vnc graphic
 2) don't set listen type for vnc";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-60228
1379;;;;;;;;;2;"Check guest dumpxml:
 # virsh dumpxml rhel7.4|grep gra -a2";"Listen type=address in the dumpxml:
 
 ...
     <graphics type='vnc' port='-1' autoport='yes'>
       <listen type='address'/>
     </graphics>
 ...";;RedHatEnterpriseLinux7/RHEL7-60228
1380;RHEL7-60229;[spice] [ no listen type] Define a guest with no specified listen type for spice graphic;Verify that libvirt will set the listen type to none for spice by default if don't set listen type for spice;Fangge Jin (fjin);Medium;Positive;Manual Only;;1;" Edit or define a guest with such setting:
 1) with spice graphic
 2) don't set listen type for spice";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-60229
1380;;;;;;;;;2;"Check guest dumpxml:
 # virsh dumpxml rhel7.4|grep gra -a2";"Listen type=none in the output:
 
 ...
     <graphics type='spice'>
       <listen type='none'/>
     </graphics>
 ...";;RedHatEnterpriseLinux7/RHEL7-60229
1381;RHEL7-60231;[Hyper-V][Storage]Expand SCSI disk when guest is running;Expand SCSI disk when guest is running;Yaju Cao (yacao);High;Positive;Automated;;1;" 1. Login the guest and get the size of the SCSI vhdx disk.
 # fdisk -l";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-60231
1381;;;;;;;;;2;"2. Expand the SCSI disk to a larger size.
 Open the ""Settings..."" page of the guest in Hyper-V manager.
 Click the disk used in the left side.
 ""Edit"" the disk. Choose ""Expand"" in Choose Action.
 Input a new size larger than the old one.
 Click ""finish"".";No error;;RedHatEnterpriseLinux7/RHEL7-60231
1381;;;;;;;;;3;"3. Check the disk size from Hyper-V manager.
 Click ""Inspect"". Get the values of ""Current File Size"" and ""Maximum Disk
 Size"".";"At step 3, the Maximum Disk Size = the size you input in
 step 2.";;RedHatEnterpriseLinux7/RHEL7-60231
1381;;;;;;;;;4;"4. Check the disk size.
 # fdisk -l";"At step 4, the disk size got from the RHEL guest is the same with that in step
 3.";;RedHatEnterpriseLinux7/RHEL7-60231
1381;;;;;;;;;5;"5. Check the disk that should be readable and writeable. Do some operations, such as, dd, cp, mkfs, touch and so on.
 Also Check there is no Call Trace or other error information in dmesg.#dmesg";At step 5, Check there is no Call Trace or other error information in dmesg.;;RedHatEnterpriseLinux7/RHEL7-60231
1382;RHEL7-60232;[Hyper-V][Storage]Shrink SCSI disk with logicalSectorSizeBytes 4096 and un-partitioned space  when guest is running;Shrink SCSI disk when guest is running;Yaju Cao (yacao);High;Positive;Automated;;1;" 1. Login the guest and get the partitioned size of SCSI disk. The disk should have un-partitioned space to continue below test. e.g. create 3 GB logicalSectorSizeBytes 4096 disk, New-VHD - path $vhdName -size 3G -Dynamic -LogicalSectorSizeBytes 4096 to create new disk
 # fdisk -l";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-60232
1382;;;;;;;;;2;"2. Shrink the SCSI disk.
 Choose the VM in Hyper-V manager. Click ""Edit Disk"" in the right.
 Find out where is the Virtual Block Device.  Choose ""Shrink"" in Choose Action.
 Click ""Next"". Then ""finish"".";​​;;RedHatEnterpriseLinux7/RHEL7-60232
1382;;;;;;;;;3;"3. Check the disk size from Hyper-V manager.
 Click ""Inspect"". Get the values of ""Current File Size"" and ""Maximum Disk
 Size"".";Maximum is changed same as step 2;;RedHatEnterpriseLinux7/RHEL7-60232
1382;;;;;;;;;4;"4. Check the disk size from the guest.
 # fdisk -l";"At step 4, the disk size got from the RHEL guest is the same with that in step
 3.";;RedHatEnterpriseLinux7/RHEL7-60232
1382;;;;;;;;;5;"5. Verify the disk existing partition could still be readable and writable. 
 Do some operations,  such as, dd, cp, mkfs, touch and so on.";No error occur;;RedHatEnterpriseLinux7/RHEL7-60232
1383;RHEL7-60236;[vnc] [listen type='socket'] start a guest with vnc listening on a unix domain socket path;Verify guest can start and be connected successfully when set vnc graphic listening on a unix domain socket path in guest xml;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with vnc graphic
 2) set vnc listen type to socket";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-60236
1383;;;;;;;;;2;"Start guest:
 # virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-60236
1383;;;;;;;;;3;"Check live xml:
 # virsh dumpxml rhel7.2
 
 
​​";"The socket path is auto-generated, and the path format is: ""/var/lib/libvirt/qemu/domain-{domain id}-{domain name}/vnc.sock""

 ...
     <graphics type='vnc' socket='/var/lib/libvirt/qemu/domain-8-rhel7.2/vnc.sock'>
       <listen type='socket' socket='/var/lib/libvirt/qemu/domain-8-rhel7.2/vnc.sock'/>
     </graphics>";;RedHatEnterpriseLinux7/RHEL7-60236
1383;;;;;;;;;4;"On local host, connect to guest by virt-viewer:
 # virt-viewer rhel7.2 
​​";"Connects successfully, and guests text console or GUI is shown.

";;RedHatEnterpriseLinux7/RHEL7-60236
1383;;;;;;;;;5;"Do some operation in the virt-viewer to verify the graphic works well, for example:
 # date
";​​;;RedHatEnterpriseLinux7/RHEL7-60236
1384;RHEL7-60237;[spice] [listen type='socket'] start a guest with spice listening on a unix domain socket path;"Verify guest can start and be connected successfully when set spice graphic listening on a unix domain socket path in guest xml
New in RHEL7.4";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set spice listen type to socket";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-60237
1384;;;;;;;;;2;" Start guest:
 # virsh start rhel7.4
";guest starts successfully;;RedHatEnterpriseLinux7/RHEL7-60237
1384;;;;;;;;;3;# virsh dumpxml rhel7.4;"Spice Unix Socket path is auto-generated, and the path format is: ""/var/lib/libvirt/qemu/domain-{domain id}-{domain name}/spice.sock}"":

     <graphics type='spice'>
       <listen type='socket' socket='/var/lib/libvirt/qemu/domain-6-rhel7.4/spice.sock'/>
     </graphics>
";;RedHatEnterpriseLinux7/RHEL7-60237
1384;;;;;;;;;4;"Check qemu command line:
 # ps aux|grep spice";"Qemu command line includes:

 -spice unix,addr=/var/lib/libvirt/qemu/domain-6-rhel7.4/spice.sock,disable-ticketing,seamless-migration=on";;RedHatEnterpriseLinux7/RHEL7-60237
1384;;;;;;;;;5;"Connect to guest by virt-viewer:
 # virt-viewer rhel7.4";Connect successfully;;RedHatEnterpriseLinux7/RHEL7-60237
1384;;;;;;;;;6;"Do some operation in the virt-viewer to verify the graphic works well, for example:
 # date";​​;;RedHatEnterpriseLinux7/RHEL7-60237
1385;RHEL7-60470;[virtlogd][max_size] Set max_size of log file;"Verify that max_size set in /etc/libvirt/virtlogd.conf can take effect: When the qemu log file size reaches to max_size, log file will rotate.
";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set max_size to a valid value in /etc/libvirt/virtlogd.conf, for example:
 
 max_size = 204800
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-60470
1385;;;;;;;;;2;"Restart virtlogd:
 # systemctl restart virtlogd";​​;;RedHatEnterpriseLinux7/RHEL7-60470
1385;;;;;;;;;3;"Start & destroy a guest continually, to produce a lot of qemu logs:
 
 # while true; do virsh destroy rhel7.2; virsh start rhel7.2;done
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-60470
1385;;;;;;;;;4;"Wait a while, check qemu log file:
 # ll /var/log/libvirt/qemu/rhel7.2.log* -h
 
​​";"1) The size of file rhel7.2.log is smaller than 200K
 2) File rhel7.2.log.0 exists, the size is 200K (Note: 204800B = 200K).

 Output:
 -rw-------. 1 root root 178K 8月   5 15:03 /var/log/libvirt/qemu/rhel7.2.log
 -rw-------. 1 root root 200K 8月   5 15:03 /var/log/libvirt/qemu/rhel7.2.log.0

 Note:
 If there is a rhel7.2.log file more than 200KB existed before, after restarting virtlogd, you may find that rhel7.2.log.0 is not 200KB , but wait a while, the new rhel7.2.log.0 will be 200KB.

 For example:
 # ll /var/log/libvirt/qemu/rhel7.2.log* -h
 -rw-------. 1 root root 115K 8月   5 15:55 /var/log/libvirt/qemu/rhel7.2.log
 -rw-------. 1 root root 815K 8月   5 15:55 /var/log/libvirt/qemu/rhel7.2.log.0

 After a while:
 # ll /var/log/libvirt/qemu/rhel7.2.log* -h
 -rw-------. 1 root root 156K 8月   5 15:56 /var/log/libvirt/qemu/rhel7.2.log
 -rw-------. 1 root root 200K 8月   5 15:56 /var/log/libvirt/qemu/rhel7.2.log.0
 -rw-------. 1 root root 815K 8月   5 15:56 /var/log/libvirt/qemu/rhel7.2.log.1
";;RedHatEnterpriseLinux7/RHEL7-60470
1385;;;;;;;;;5;Check the content of qemu log files;"1) The content of rhel7.2.log.0 is same as /tmp/rhel7.2.log
 2) The last line of rhel7.2.log.0 is continued by the first line of rhel7.2.log completely
​​";;RedHatEnterpriseLinux7/RHEL7-60470
1386;RHEL7-60473;[virtlogd][max_backup] Set maximum number of backup files;Verify that max_backups set in /etc/libvirt/virtlogd.conf can take effect: When the number of backup files reaches to max_backups, the oldest log file will be removed.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set max_backups to a valid value in /etc/libvirt/virtlogd.conf
 
 max_backups = 4
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-60473
1386;;;;;;;;;2;"Restart virtlogd:
 # systemctl restart virtlogd";​​;;RedHatEnterpriseLinux7/RHEL7-60473
1386;;;;;;;;;3;"Start & destroy guest continually, to produce a lot of qemu logs:
 
 # while true; do virsh start rhel7.2; virsh destroy rhel7.2;done";​​;;RedHatEnterpriseLinux7/RHEL7-60473
1386;;;;;;;;;4;"Wait a while(please be patient), check qemu log file:
 
 # ll /var/log/libvirt/qemu/rhel7.2.log* -h
 
​​";"There are 4 backup files(not include the active log file).

 Output:
 -rw-------. 1 root root 3.1K 8月   5 15:35 /var/log/libvirt/qemu/rhel7.2.log
 -rw-------. 1 root root 200K 8月   5 15:35 /var/log/libvirt/qemu/rhel7.2.log.0
 -rw-------. 1 root root 200K 8月   5 15:35 /var/log/libvirt/qemu/rhel7.2.log.1
 -rw-------. 1 root root 200K 8月   5 15:34 /var/log/libvirt/qemu/rhel7.2.log.2
 -rw-------. 1 root root 200K 8月   5 15:03 /var/log/libvirt/qemu/rhel7.2.log.3";;RedHatEnterpriseLinux7/RHEL7-60473
1386;;;;;;;;;5;"Wait more time, check qemu log again:
 
 # ll /var/log/libvirt/qemu/rhel7.2.log* -h
 
​​";"Still 4 backup files.

 Output:
 -rw-------. 1 root root  84K 8月   5 15:35 /var/log/libvirt/qemu/rhel7.2.log
 -rw-------. 1 root root 200K 8月   5 15:35 /var/log/libvirt/qemu/rhel7.2.log.0
 -rw-------. 1 root root 200K 8月   5 15:35 /var/log/libvirt/qemu/rhel7.2.log.1
 -rw-------. 1 root root 200K 8月   5 15:35 /var/log/libvirt/qemu/rhel7.2.log.2
 -rw-------. 1 root root 200K 8月   5 15:35 /var/log/libvirt/qemu/rhel7.2.log.3";;RedHatEnterpriseLinux7/RHEL7-60473
1387;RHEL7-60537;[vnc] [vnc_listen] start a guest with vnc listening on an address specified by vnc_listen;"set listen type=address for vnc in guest xml but don't set address value, vnc_listen in qemu.conf will take effect. Test matrix:{comment:34}
 
vnc_listen | 
127.0.0.1 | Refer to: RHEL7-13210 - [vnc&spice] [ipv4]Start guest with graphic listening on ipv4 localhost
::1 | Refer to: RHEL7-99679 - [vnc&spice] [ipv6] Start a guest with graphic listening on ipv6 localhost
0.0.0.0 | Refer to: RHEL7-99678 - [vnc&spice] [ipv4] Start a guest with graphic listening on ipv4 wildcard 
0:: | Refer to: RHEL7-47440 - [vnc&spice] [ipv6] Start a guest with graphic listening on ipv6 wildcard 
{host public ipv4 address} | Refer to: RHEL7-99684 - [vnc&spice][ipv4] Start a guest with graphic listening on the host's public IPv4 address 
{host public ipv6 address} | Refer to: RHEL7-99685 - [vnc&spice][ipv6] Start a guest with graphic listening on the host's public IPv6 address
{hostname} | Refer to: RHEL7-99682 - [vnc&spice] Start a guest with graphic listening on hostname ";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set vnc_listen in /etc/libvirt/qemu.conf (according to the test matrix in description field:
 
 vnc_listen = xxxx";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-60537
1387;;;;;;;;;2;"Edit or define a guest with such setting:
 1) with vnc graphic
 2) set vnc listen type to address, but don't set a specified address for vnc in domain xml";​​;;RedHatEnterpriseLinux7/RHEL7-60537
1387;;;;;;;;;3;"Start guest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-60537
1387;;;;;;;;;4;" Refer to the cases in the table for the following steps
​​";​​;;RedHatEnterpriseLinux7/RHEL7-60537
1388;RHEL7-60538;[spice] [spice_listen] start a guest with spice listening on an address specified by spice_listen;"set listen type=address for spice in guest xml but don't set specific address value, spice_listen in qemu.conf will take effect. Test matrix:{comment:35}
 
spice_listen | 
127.0.0.1 | Refer to: RHEL7-13210 - [vnc&spice] [ipv4]Start guest with graphic listening on ipv4 localhost
::1 | Refer to: RHEL7-99679 - [vnc&spice] [ipv6] Start a guest with graphic listening on ipv6 localhost
0.0.0.0 | Refer to: RHEL7-99678 - [vnc&spice] [ipv4] Start a guest with graphic listening on ipv4 wildcard 
0:: | Refer to: RHEL7-47440 - [vnc&spice] [ipv6] Start a guest with graphic listening on ipv6 wildcard 
{host public ipv4 address} | Refer to: RHEL7-99684 - [vnc&spice][ipv4] Start a guest with graphic listening on the host's public IPv4 address 
{host public ipv6 address} | Refer to: RHEL7-99685 - [vnc&spice][ipv6] Start a guest with graphic listening on the host's public IPv6 address
{hostname} | Refer to: RHEL7-99682 - [vnc&spice] Start a guest with graphic listening on hostname ";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set spice_listen in /etc/libvirt/qemu.conf (according to the test matrix in description field):
 
 spice_listen = xxxx";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-60538
1388;;;;;;;;;2;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set spice listen type to address, but don't set a specified address for spice in domain xml";​​;;RedHatEnterpriseLinux7/RHEL7-60538
1388;;;;;;;;;3; Start guest;​​;;RedHatEnterpriseLinux7/RHEL7-60538
1388;;;;;;;;;4; Refer to the cases in the table for the following steps;​​;;RedHatEnterpriseLinux7/RHEL7-60538
1389;RHEL7-60587;[cpu][cpu models]Migration test VMX TSC scaling between Skylake xeon host and none skylake xeon host;"Migration between cpu models support VMX TSC scaling and not support VMX TSC scaling, verify guest works normally and no crash happen
Notify vmx tsc scaling only support on skylake server version cpu(xeon).";Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-60587
1390;RHEL7-60588;[cpu][cpu models]Migration test VMX TSC scaling between Skylake xeon hosts with different cpu frequency;Verify time calculation should have similar results before and after migration.;Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-60588
1391;RHEL7-61474;WALA-TC: [WALA conf] Resource disk - swap - unusual check;"WALA-TC: [WALA conf] Resource disk - swap - unregular check:
non-interger multiple of 64M size check
large swap file check
over-space check
zero size check";Yuxin Sun (yuxisun);Medium;Positive;Automated;;1;"Prepare a Small(ASM) or A1(ARM) VM, and login.
 1. Non-integer size check:
 vi /etc/waagent.conf.
 ResourceDisk.EnableSwap=y
 ResourceDisk.SwapSizeMB=1023";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-61474
1391;;;;;;;;;2;"2. Reboot system
 Check swap file size. The size should be near to 70G(may smaller than 70G) and can work well.
 # free -m
";"# free -m
               total        used        free      shared  buff/cache   available
 Mem:           1676         206        1198           8         271        1256
 Swap:         1023           0       1023
​​";;RedHatEnterpriseLinux7/RHEL7-61474
1391;;;;;;;;;3;"3. Large swap check
 ResourceDisk.SwapSizeMB=70000
 Repeat step 2. Check swap size.
​​";"# free -m
               total        used        free      shared  buff/cache   available
 Mem:           1676         206        1198           8         271        1256
 Swap:         69999           0       69999";;RedHatEnterpriseLinux7/RHEL7-61474
1391;;;;;;;;;4;"4. Over-space check:
 ResourceDisk.SwapSizeMB=71000
 Repeat step 2. Check swap size. 
 
​​";"# free -m
               total        used        free      shared  buff/cache   available
 Mem:           1676         206        1198           8         271        1256
 Swap:         70357           0       70357
 It takes a while to fill the swap disk to calculate its maximum capacity  
 Before filling
 Swap:              0               0           0";;RedHatEnterpriseLinux7/RHEL7-61474
1391;;;;;;;;;5;"5. Zero size check:
 ResourceDisk.SwapSizeMB=0";"# free -m
               total        used        free      shared  buff/cache   available
 Mem:           1676         206        1198           8         271        1256
 Swap:         0           0       0
 There's an error log, which is acceptable:
 ERROR Failed to enable swap [000005] Invalid swap size [0]
​​";;RedHatEnterpriseLinux7/RHEL7-61474
1391;;;;;;;;;6;config;​​;;RedHatEnterpriseLinux7/RHEL7-61474
1392;RHEL7-61482;WALA-TC: [life cycle] Reboot a VM inside guest;WALA-TC: [life cycle] Reboot a VM inside guest;Yuxin Sun (yuxisun);Medium;Positive;Automated;;1;"Prepare a running VM on Azure
 1. Reboot VM inside the guest:
 # sudo reboot";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-61482
1392;;;;;;;;;2;"2. Wait for running. Login and check configurations
 # mount | grep /mnt/resource
 # hostname";"Can login the VM after reboot.
 # mount | grep /mnt/resource
 /dev/sdb1 on /mnt/resource type ext4 (rw,relatime,seclabel,data=ordered)
 # hostname
 The hostname is what we set.";;RedHatEnterpriseLinux7/RHEL7-61482
1392;;;;;;;;;3;config;​​;;RedHatEnterpriseLinux7/RHEL7-61482
1393;RHEL7-61761;; ;Yan Fu (yafu);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61761
1394;RHEL7-61876;fs-qe case:/nfs-utils/upgrade tag:nfs-utils,Tier1,;/nfs-utils/upgrade tag:nfs-utils,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61876
1395;RHEL7-61877;fs-qe case:/nfs-utils/Regression/bz994564-rpc-mountd-produces-stale-file-handles tag:nfs-utils,tier1,regression gset:--arch=x86_64,;/nfs-utils/Regression/bz994564-rpc-mountd-produces-stale-file-handles tag:nfs-utils,tier1,regression gset:--arch=x86_64,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61877
1396;RHEL7-61878;fs-qe case:/nfs-utils/Regression/bz1280024-lockd-and-statd-monitor-lists-get-out-of-sync tag:nfs-utils,tier1,regression;/nfs-utils/Regression/bz1280024-lockd-and-statd-monitor-lists-get-out-of-sync tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61878
1397;RHEL7-61879;fs-qe case:/nfs-utils/Regression/bz1313550-Nondeterministic-DNS-lookups-cause-NFS-kdump-targets-to-fail tag:nfs-utils,tier1,regression;/nfs-utils/Regression/bz1313550-Nondeterministic-DNS-lookups-cause-NFS-kdump-targets-to-fail tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61879
1398;RHEL7-61880;fs-qe case:/nfs-utils/Regression/bz1287894-Trying-to-automount-a-non-existent-directory-using-localhost-results-in-a-4-minute-hang tag:nfs-utils,tier1,regression;/nfs-utils/Regression/bz1287894-Trying-to-automount-a-non-existent-directory-using-localhost-results-in-a-4-minute-hang tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61880
1399;RHEL7-61881;fs-qe case:/nfs-utils/nfs4-acl-tools/bz1349645-Enforce-permission-checks-when-setting-NFS-ACLs tag:nfs-utils,tier1,regression;/nfs-utils/nfs4-acl-tools/bz1349645-Enforce-permission-checks-when-setting-NFS-ACLs tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61881
1400;RHEL7-61882;fs-qe case:/nfs-utils/nfs4-acl-tools/common tag:nfs-utils,tier1,function;/nfs-utils/nfs4-acl-tools/common tag:nfs-utils,tier1,function;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61882
1401;RHEL7-61883;fs-qe case:/nfs-utils/libnfsidmap/common tag:nfs-utils,tier1,regression;/nfs-utils/libnfsidmap/common tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61883
1402;RHEL7-61884;fs-qe case:/nfs-utils/services/systemd/nfs-config tag:nfs-utils,tier1,regression;/nfs-utils/services/systemd/nfs-config tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61884
1403;RHEL7-61885;fs-qe case:/nfs-utils/services/systemd/nfs-blkmap tag:nfs-utils,tier1,regression;/nfs-utils/services/systemd/nfs-blkmap tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61885
1404;RHEL7-61886;fs-qe case:/nfs-utils/krb5-test/bz1309420-mounting-with-sec-krb5-causes-kernel-panic-in-fips-mode-if-the-gss-context-uses-md5 param:KEYRING=1 tag:nfs-utils,tier1,regression gset:--kernel-options=fips=1,;/nfs-utils/krb5-test/bz1309420-mounting-with-sec-krb5-causes-kernel-panic-in-fips-mode-if-the-gss-context-uses-md5 param:KEYRING=1 tag:nfs-utils,tier1,regression gset:--kernel-options=fips=1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61886
1405;RHEL7-61887;fs-qe case:/nfs-utils/krb5-test/bz507341-gssd-add-time-out-argument param:NFS_VERSION=4 tag:nfs-utils,Tier1,;/nfs-utils/krb5-test/bz507341-gssd-add-time-out-argument param:NFS_VERSION=4 tag:nfs-utils,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61887
1406;RHEL7-61888;fs-qe case:/nfs-utils/krb5-test/bz507341-gssd-add-time-out-argument param:NFS_VERSION=3 tag:nfs-utils,Tier1,;/nfs-utils/krb5-test/bz507341-gssd-add-time-out-argument param:NFS_VERSION=3 tag:nfs-utils,Tier1,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61888
1407;RHEL7-61889;fs-qe case:/nfs-utils/krb5-test/bz1299004-Unhandled-EINTR-during-connection-establishment-leads-to-EACCES-failure tag:nfs-utils,tier1,regression;/nfs-utils/krb5-test/bz1299004-Unhandled-EINTR-during-connection-establishment-leads-to-EACCES-failure tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61889
1408;RHEL7-61890;fs-qe case:/nfs-utils/krb5-test/bz863241-rpc-gssd-can-pick-wrong-credential-cache tag:nfs-utils,Tier1,Regression;/nfs-utils/krb5-test/bz863241-rpc-gssd-can-pick-wrong-credential-cache tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61890
1409;RHEL7-61891;fs-qe case:/nfs-utils/krb5-test/bz1187277-rpc-mountd-can-set-up-pseudo-exports-without-the-correct-security-flavors tag:nfs-utils,tier1,regression;/nfs-utils/krb5-test/bz1187277-rpc-mountd-can-set-up-pseudo-exports-without-the-correct-security-flavors tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61891
1410;RHEL7-61892;fs-qe case:/nfs-utils/krb5-test/krb5-with-READ-delegation tag:nfs-utils,tier1,regression;/nfs-utils/krb5-test/krb5-with-READ-delegation tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61892
1411;RHEL7-61893;fs-qe case:/nfs-utils/krb5-test/bz1296607-have-a-configurable-connection-timeout-for-the-rpcgssd-service tag:nfs-utils,tier1,regression;/nfs-utils/krb5-test/bz1296607-have-a-configurable-connection-timeout-for-the-rpcgssd-service tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61893
1412;RHEL7-61894;fs-qe case:/nfs-utils/krb5-test/bz1300023-soft-lockup-in-nfs4_put_stid tag:nfs-utils,tier1,regression;/nfs-utils/krb5-test/bz1300023-soft-lockup-in-nfs4_put_stid tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61894
1413;RHEL7-61895;fs-qe case:/nfs-utils/krb5-test/bz1264999-rpc-gssd-fetches-a-TGT-on-every-machine-credential-upcall tag:nfs-utils,tier1,regression;/nfs-utils/krb5-test/bz1264999-rpc-gssd-fetches-a-TGT-on-every-machine-credential-upcall tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61895
1414;RHEL7-61927;WALA-TC: [func] setup.py install;WALA-TC: [func] setup.py install;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Prepare a VM on Azure.
 1. Download and install waagent: 
 #wget https://github.com/Azure/WALinuxAgent/archive/v2.1.5.zip  
 #unzip v2.1.5
 #cd WALinuxAgent-2.1.5
 #python setup.py install
 #cat /var/log/waagent.log
";No error logs in output and waagent.log.;Test Case;RedHatEnterpriseLinux7/RHEL7-61927
1414;;;;;;;;;2;"2. Check file exists:
 /usr/sbin/waagent waagent2.0
 /etc/waagent.conf
 /etc/logrotate.d/waagent.logrotate
 /etc/udev/rules.d/66-azure-storage.rules 99-azure-product-uuid.rules
 RHEL-6: /etc/rc.d/init.d/waagent
 RHEL-7: /lib/systemd/system/waagent.service";All these files exists.;;RedHatEnterpriseLinux7/RHEL7-61927
1414;;;;;;;;;3;"3. Check register service
 RHEL-6:
 #chkconfig --list waagent 
 RHEL-7:
 #systemctl status waagent | grep Loaded
";"waagent service is not registered.
 RHEL6:
 #chkconfig --list waagent 
 service waagent supports chkconfig, but is not referenced in any runlevel (run 'chkconfig --add waagent')
 RHEL7:
 #systemctl status waagent | grep Loaded
 Loaded: loaded (/usr/lib/systemd/system/waagent.service; disabled; vendor preset: disabled)";;RedHatEnterpriseLinux7/RHEL7-61927
1415;RHEL7-61928;WALA-TC: [func] setup.py install --register-service;WALA-TC: [func] setup.py install --register-service;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Prepare a local VM.
 1. Download and install waagent: 
 #wget  
 #unzip v2.1.5
 #cd WALinuxAgent-2.1.5
 #python setup.py install --register-service
 #cat /var/log/waagent.log 
 https://github.com/Azure/WALinuxAgent/archive/v2.1.5.zip ";No error logs in output and waagent.log.;Test Case;RedHatEnterpriseLinux7/RHEL7-61928
1415;;;;;;;;;2;"2. Check file exists:
 /usr/sbin/waagent waagent2.0
 /etc/waagent.conf
 /etc/logrotate.d/waagent.logrotate
 /etc/udev/rules.d/66-azure-storage.rules 99-azure-product-uuid.rules
 RHEL-6: /etc/rc.d/init.d/waagent
 RHEL-7: /lib/systemd/system/waagent.service";All these files exists.;;RedHatEnterpriseLinux7/RHEL7-61928
1415;;;;;;;;;3;"3. Check register service
 RHEL-6: 
 #chkconfig --list waagent 
 RHEL-7: 
 #systemctl status waagent | grep Loaded
";"waagent service is registered.
 RHEL6: 
 #chkconfig --list waagent 
 waagent         0:off 1:off 2:on 3:on 4:on 5:on 6:off
 RHEL7:
 #systemctl status waagent | grep Loaded
 Loaded: loaded (/usr/lib/systemd/system/waagent.service; enabled; vendor preset: disabled)";;RedHatEnterpriseLinux7/RHEL7-61928
1415;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-61928
1416;RHEL7-61929;WALA-TC: [func] waagent start;WALA-TC: [func] waagent start;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Prepare a VM on Azure.
 1. Stop waagent service and run ""waagent start"":
 # systemctl stop waagent
 # waagent -start
 Check waagent.log";There's no error logs in output and waagent.log;Test Case;RedHatEnterpriseLinux7/RHEL7-61929
1416;;;;;;;;;2;"Check if these processes exist:
 python /sbin/waagent -daemon
 python -u /sbin/waagent -run-exthandlers";"# ps aux|grep waagent
 root      2670  3.3  0.7 219104 12808 pts/0    S    16:12   0:00 python /sbin/waagent -daemon
 root      2675  5.0  0.8 378636 14664 pts/0    Sl   16:12   0:00 python -u /sbin/waagent -run-exthandlers
";;RedHatEnterpriseLinux7/RHEL7-61929
1416;;;;;;;;;3;config;​​;;RedHatEnterpriseLinux7/RHEL7-61929
1417;RHEL7-61930;WALA-TC: [func] waagent -run-exthandlers;WALA-TC: [func] waagent -run-exthandlers;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Prepare a VM on Azure.
 1. Stop waagent service and run ""waagent -run-exthandlers"":
 # systemctl stop waagent
 # waagent -run-exthandlers
 Check waagent.log";There's no error logs in output and waagent.log;Test Case;RedHatEnterpriseLinux7/RHEL7-61930
1417;;;;;;;;;2;"2. Check process:
 # ps aux|grep waagent
 * In RHEL-7, the run-exthandlers process cannot exists without daemon process. So there's no run-exthandler process exists.
";"RHEL6:
 run-exthandler process exists:
 # ps aux|grep waagent
 python /sbin/waagent -run-exthandlers
 RHEL7:
 # cat /var/log/waagent.log
 INFO Goal state agent WALinuxAgent-2.1.6.8 was orphaned -- exiting
 no run-exthandler process exists:
 # ps aux|grep waagent
 #";;RedHatEnterpriseLinux7/RHEL7-61930
1417;;;;;;;;;3;config;​​;;RedHatEnterpriseLinux7/RHEL7-61930
1418;RHEL7-61938;[cpu model]support Skylake-Client cpu model;From rhel7.3, qemu-kvm-rhev support Skylake-Client cpu model, check qemu can use Skylake-Client to boot guest and guest can see all Skylake-Client defined cpu flags;Zhiyi Guo (zhguo);Critical;Positive;Not Automated;;1;" 1. check qemu-kvm-rhev/qemu-kvm support cpu model Skylake-Client
 #/usr/libexec/qemu-kvm -cpu ?
 2. Boot guest with -cpu Skylake-Client on host with cpu >= skylake
 3. check flags inside guest, use cat /proc/cpuinfo on linux guest and x86info -a on windows guest
​​";" After step1:
 #/usr/libexec/qemu-kvm -cpu ?
 ....
 x86 Skylake-Client Intel Core Porcessor (Skylake)
 After step2:
 Guest/qemu no crash occur
 After step 3:
 flags enablement should equal to the flags defined for Skylake-Client model in /usr/src/debug/qemu-xxx/target/cpu.c. eg, guest should have mpx, xsavec, xgetbv1 flags(these three flags are introduced by skylake host cpu model and included into Skylake-Client)";Test Case;RedHatEnterpriseLinux7/RHEL7-61938
1419;RHEL7-61940;WALA-TC: [WALA conf] self-update;WALA-TC: [WALA conf] self-update;Yuxin Sun (yuxisun);Medium;Positive;Automated;;1;"Prepare a VM on Azure, and login.
 1. Modify the option AutoUpdate.Enabled in /etc/waagent.conf and restart waagent.
 set AutoUpdate.Enabled=y
 # systemctl restart waagent";There's no error messages.;Test Case;RedHatEnterpriseLinux7/RHEL7-61940
1419;;;;;;;;;2;"2. Check if it downloads the new WALA version and install automatically.
 The -run-exthandlers process is replaced by the new WALA egg process
 Check if the goal state agent version is the new version:
 # waagent -version";"Can downloads the new WALA version and install automatically.
 #ps aux|grep waagent
 There's no process: python -u /usr/sbin/waagent -run-exthandlers
 #ps aux|grep [-]run-exthandlers
 python -u bin/WALinuxAgent-2.1.6-py2.7.egg -run-exthandlers
 # waagent -version
 ...
 Goal state agent: 2.1.6";;RedHatEnterpriseLinux7/RHEL7-61940
1419;;;;;;;;;3;3. Run reset remote access. Check if it works.;"The reset remote access feature works well.
 # ls /etc/ssh/sshd_config*
 There's a new sshd_config_xxxxx file.";;RedHatEnterpriseLinux7/RHEL7-61940
1419;;;;;;;;;4;"4. Change waagent version to a version that higher than all the upstream versions:
 vim /usr/lib/python2.7/site-packages/azurelinuxagent/common/version.py
 AGENT_VERSION = '[higher version]'
 # systemctl restart waagent";​​;;RedHatEnterpriseLinux7/RHEL7-61940
1419;;;;;;;;;5;5. Wait for 1 minutes. Check if DO NOT use the new WALA package;"# ps aux|grep [-]run-exthandlers
 python -u /usr/sbin/waagent -run-exthandlers ";;RedHatEnterpriseLinux7/RHEL7-61940
1419;;;;;;;;;6;"6. restart waagent service again.
 Wait for 1 minute. Check if DO NOT use the new WALA package";"# ps aux|grep [-]run-exthandlers
 python -u /usr/sbin/waagent -run-exthandlers ";;RedHatEnterpriseLinux7/RHEL7-61940
1419;;;;;;;;;7;"7. Set AutoUpdate.Enabled=n
 Restart waagent service
 Check if AutoUpdate feature is disabled";"# ps aux|grep [-]run-exthandlers
 python -u /usr/sbin/waagent -run-exthandlers ";;RedHatEnterpriseLinux7/RHEL7-61940
1419;;;;;;;;;8;"8. Remove AutoUpdate.Enabled line from /etc/waagent.conf
 Restart waagent service
 Check if AutoUpdate feature is enabled";"# ps aux|grep [-]run-exthandlers
 python -u bin/WALinuxAgent-2.1.6-py2.7.egg -run-exthandlers";;RedHatEnterpriseLinux7/RHEL7-61940
1419;;;;;;;;;9;9. Check waagent.log.;"# cat /var/log/waagent.log
 There's no ERROR logs.";;RedHatEnterpriseLinux7/RHEL7-61940
1419;;;;;;;;;10;"* If there's no new WALA version on the Azure Server:
 1. Download new WALA from github:  
 2. unzip the package. Change path into the WALA folder. run ""makepkg.py"", get a zip package from eggs folder.
 3. Put the .zip file into Azure VM /var/lib/waagent folder. Put the Prod.1.manifest.xml file(In the attachment of this case) into /var/lib/waagent folder.
 4. Kill the -run-exthandlers process. Wait for a while.
 Then run step 2-4.https://github.com/Azure/WALinuxAgent";​​;;RedHatEnterpriseLinux7/RHEL7-61940
1419;;;;;;;;;11;config;​​;;RedHatEnterpriseLinux7/RHEL7-61940
1420;RHEL7-61944;[Migration][--graphicsuri] Specify graphics URI for seamless graphics migration - IP address(IPV4, IPV6);"It's used for automatically reconnecting a graphical clients at the end of migration
 Bug 980131 - RFE: add optional [--clienturi] [<clienturi>] option to the migrate command";Fangge Jin (fjin);High;Positive;Manual Only;;1;" 1.Start a guest on source host
 
* # virsh start guest
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-61944
1420;;;;;;;;;2;"2. On client host, connect spice:
 remote-viewer spice://$ipv4:5900
​​";​​;;RedHatEnterpriseLinux7/RHEL7-61944
1420;;;;;;;;;3;"3.Do migration with graphicsuri set to host B's ipv4 address:
* # virsh migrate rhel7.2 qemu+ssh:/IP/system --live --verbose --graphicsuri spice://host B's ipv4 address
Migration: [100 %]";Virsh didn't hang after migration is 100%, and the spice client doesn't disconnect.;;RedHatEnterpriseLinux7/RHEL7-61944
1420;;;;;;;;;4;"Check the actual ip used for spice:
 
* # netstat -tunap|grep 590
";Host B's IPv4 is used for spice connection;;RedHatEnterpriseLinux7/RHEL7-61944
1420;;;;;;;;;5;"4.Destroy guest on target host, retest with host B's ipv6 address:
 #remote-viewer spice://[3ffe::112]:5900
 
* # virsh migrate rhel7.2 qemu+ssh:/IP/system --live --verbose --graphicsuri spice://[host B's ipv6 address]
Migration: [100 %]
";Virsh didn't hang after migration is 100%, and the spice client doesn't disconnect.;;RedHatEnterpriseLinux7/RHEL7-61944
1420;;;;;;;;;6;"Check the actual ip used for spice:
 
* # netstat -tunap|grep 590
";Host B's IPv6 is used for spice connection;;RedHatEnterpriseLinux7/RHEL7-61944
1420;;;;;;;;;7;"(Optional)
 5.Test proxy as below
 According to the manual help page, we should use a proxy to test this option.
 
 # man virsh
 "" Optional graphicsuri overrides connection parameters used for automatically reconnecting a graphical clients at the end of migration. If omitted, libvirt will compute the parameters based on target host IP address. In case the client does not have a direct access to the network virtualization hosts are connected to and needs to connect through a proxy, graphicsuri may be used to specify the address the client should connect to. The URI is formed as follows:
 
                protocol://hostname[:port]/[?parameters]
 
 where protocol is either ""spice"" or ""vnc"" and parameters is a list of protocol specific parameters separated by '&'. Currently recognized parameters are ""tlsPort"" and ""tlsSubject"". For example,
 
                spice://target.host.com:1234/?tlsPort=4567
 
 """;"
​​";;RedHatEnterpriseLinux7/RHEL7-61944
1421;RHEL7-61945;[Migration][--graphicsuri] Specify invalid graphics URI for seamless spice migration - invalid format;"Bug 1151723 - migration will hang after use migrate with --graphicsuri and guest status will be locked
 Bug 1352836 - SPICE_MIGRATE_COMPLETED is not sent in some cases";Fangge Jin (fjin);Medium;Negative;Manual Only;;1;"# virsh start guest
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-61945
1421;;;;;;;;;2;"Connect a spice client to the guest:
 
* # virsh -c qemu+ssh://hp-dl385g7-05.lab.eng.pek2.redhat.com/system domdisplay rhel7.2
spice://hp-dl385g7-05.lab.eng.pek2.redhat.com:5900

 
* # remote-viewer spice://hp-dl385g7-05.lab.eng.pek2.redhat.com:5900
";​​;;RedHatEnterpriseLinux7/RHEL7-61945
1421;;;;;;;;;3;"Migrate the guest to host B with invalid graphicsuri:
 
* # virsh migrate rhel7.2 qemu+ssh://hp-dl385g7-06.lab.eng.pek2.redhat.com/system --live --verbose --graphicsuri abcdefg
Migration: [100 %]
";Virsh didn't hang after migration is 100%, and the spice client disconnects.;;RedHatEnterpriseLinux7/RHEL7-61945
1421;;;;;;;;;4;"After migration, connect a spice client to the guest again:
 
* # virsh -c qemu+ssh://hp-dl385g7-06.lab.eng.pek2.redhat.com/system domdisplay rhel7.2
spice://hp-dl385g7-06.lab.eng.pek2.redhat.com:5900

 
* # remote-viewer spice://hp-dl385g7-06.lab.eng.pek2.redhat.com:5900
";​​;;RedHatEnterpriseLinux7/RHEL7-61945
1421;;;;;;;;;5;"Migrate vm back to source
 
* # virsh migrate rhel7.2 qemu+ssh://$ip/system --live --verbose --graphicsuri abcdefg
";Virsh didn't hang after migration is 100%, and the spice client disconnects.;;RedHatEnterpriseLinux7/RHEL7-61945
1422;RHEL7-61955;[Migration][--graphicsuri] Migrate vm with invalid graphics URI after a migration is cancelled;"Referred bugs:
 https://bugzilla.redhat.com/show_bug.cgi?id=1151723#c10 
";Fangge Jin (fjin);Medium;Positive;Manual Only;;1; # virsh start guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-61955
1422;;;;;;;;;2;"Connect a spice client to the guest:
 
* # virsh -c qemu+ssh://hp-dl385g7-05.lab.eng.pek2.redhat.com/system domdisplay rhel7.2
spice://hp-dl385g7-05.lab.eng.pek2.redhat.com:5900

 
* # remote-viewer spice://hp-dl385g7-05.lab.eng.pek2.redhat.com:5900
";​​;;RedHatEnterpriseLinux7/RHEL7-61955
1422;;;;;;;;;3;"Migrate the guest to host B with default graphicsuri and cancel migration before it finishes:
 
* # virsh migrate rhel7.2 qemu+ssh://hp-dl385g7-06.lab.eng.pek2.redhat.com/system --live --verbose
  Migration: [ 10 %]^Cerror: operation aborted: migration job: canceled by client";​​;;RedHatEnterpriseLinux7/RHEL7-61955
1422;;;;;;;;;4;"Do migration again with invalid graphics URI:
 
* # virsh migrate rhel7.2 qemu+ssh://hp-dl385g7-06.lab.eng.pek2.redhat.com/system --live --verbose --graphicsuri abcdefg
Migration: [100 %]";Virsh didn't hang after migration is 100%, and the spice client disconnects.;;RedHatEnterpriseLinux7/RHEL7-61955
1423;RHEL7-61956;[Migration]Migrate vm with spice graphic again after an immediate cancellation of last migration;"Referred bug:
 https://bugzilla.redhat.com/show_bug.cgi?id=1151723#c17 
Manual Only";Fangge Jin (fjin);Medium;Positive;Manual Only;;1;"*   # virsh start guest
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-61956
1423;;;;;;;;;2;"Start a migration and cancel immediately
 
* # virsh migrate rhel7.2 qemu+tcp://hp-dl385g7-06.lab.eng.pek2.redhat.com/system --live --verbose  --p2p

​​";"Output:
 ^Cerror: operation aborted: migration out: canceled by client";;RedHatEnterpriseLinux7/RHEL7-61956
1423;;;;;;;;;3;"Connect a spice client to the guest:
 
* # remote-viewer spice://hp-dl385g7-05.lab.eng.pek2.redhat.com:5900

​​";​​;;RedHatEnterpriseLinux7/RHEL7-61956
1423;;;;;;;;;4;"* # virsh migrate rhel7.2 qemu+tcp://hp-dl385g7-06.lab.eng.pek2.redhat.com/system --live --verbose  --p2p
Migration: [100 %]";Virsh didn't hang after migration is 100%;;RedHatEnterpriseLinux7/RHEL7-61956
1423;;;;;;;;;5;Check remote-viewer;the spice client doesn't disconnect;;RedHatEnterpriseLinux7/RHEL7-61956
1424;RHEL7-61959;Cancel managedsave by Ctrl+C;Cancel managedsave by Ctrl+C;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"1. Run virsh managedsave, press ctrl + c to interupt the command
 # virsh managedsave rhel62
 ^C

";"1.Output:
 ^Cerror: Failed to save domain rhel62 state
 error: operation aborted: domain save job: canceled by client";Test Case;RedHatEnterpriseLinux7/RHEL7-61959
1424;;;;;;;;;2;"2.# ll /var/lib/libvirt/qemu/save/rhel62.save
​​";"2.Output:
 ls: cannot access /var/lib/libvirt/qemu/save/rhel62.save: No such file or directory";;RedHatEnterpriseLinux7/RHEL7-61959
1425;RHEL7-61961;Attach a virtio-rng device with invalid PCI address with --config;"Attach a virtio-rng device with invalid PCI address with --config
 BZ1220809";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"1.Check the libvirtd pid:
 #pidof libvirtd
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-61961
1425;;;;;;;;;2;" 1..prepare a rng device have invalid pci address
 # cat rng.xml 
     <rng model='virtio'>
       <backend model='random'>/dev/random</backend>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x0'/>
     </rng>
​​";"Note:
 1) The invalid pci address should be used by qemu implicitly
 2) An occupied pci address seen from dumpxml is not suitable for this case";;RedHatEnterpriseLinux7/RHEL7-61961
1425;;;;;;;;;3;"2. # virsh attach-device r71 rng.xml --config
 
​​";"2.Attach failed.
 Output:
 error: Failed to attach device from rng.xml
 error: XML error: Attempted double use of PCI Address 0000:00:01.0";;RedHatEnterpriseLinux7/RHEL7-61961
1425;;;;;;;;;4;"3.Check the libvirtd pid again:
 #pidof libvirtd
​​";"Libvirtd pid doesn't change.
​​";;RedHatEnterpriseLinux7/RHEL7-61961
1426;RHEL7-61966;KN-TC Nic Driver-Test case: nic/functions/offload --FUNC=checksum-rx;FUNC=checksum-rx;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61966
1427;RHEL7-61967;KN-TC Nic Driver-Test case: nic/functions/offload --FUNC=checksum-tx;;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61967
1428;RHEL7-61968;KN-TC Nic Driver-Test case: nic/functions/offload --FUNC=segmentation-tso;;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61968
1429;RHEL7-61969;KN-TC Nic Driver-Test case: nic/functions/offload --FUNC=segmentation-gso;;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61969
1430;RHEL7-61970;KN-TC Nic Driver-Test case: nic/functions/offload --FUNC=segmentation-gro;;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61970
1431;RHEL7-61974;KN-TC Nic Driver-Test case: nic/functions/offload --FUNC=segmentation-lro;;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61974
1432;RHEL7-61975;KN-TC Nic Driver-Test case: nic/functions/offload --FUNC=segmentation-ufo;;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61975
1433;RHEL7-61976;Do live migration with guest agent configured in guest XML and guest agent service stopped;Guest agent will not be connected on destination when migration completes if it's not connected before migration;Fangge Jin (fjin);High;Positive;Not Automated;;1;Start guest.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-61976
1433;;;;;;;;;2;Stop qemu-guest-agent.service in guest;"
​​";;RedHatEnterpriseLinux7/RHEL7-61976
1433;;;;;;;;;3;"Check guest agent connection state:
 # virsh dumpxml rhel7.2-new";"Guest agent is disconnected:
 
     <channel type='unix'>
       <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/domain-rhel7.2-new/org.qemu.guest_agent.0'/>
       <target type='virtio' name='org.qemu.guest_agent.0' state='disconnected'/>
       <alias name='channel1'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>";;RedHatEnterpriseLinux7/RHEL7-61976
1433;;;;;;;;;4;"Do migration:
 # virsh migrate rhel7.2-new qemu+ssh://10.66.83.38/system --live";"
​​";;RedHatEnterpriseLinux7/RHEL7-61976
1433;;;;;;;;;5;"After migration completed, on destination, execute a virsh command that relies on guest agent:
 # virsh domtime rhel7.2-new
 
​​";"
 execute failed.
 
 Output:
 error: Guest agent is not responding: QEMU guest agent is not connected
​​";;RedHatEnterpriseLinux7/RHEL7-61976
1433;;;;;;;;;6;# virsh dumpxml rhel7.2-new;"Guest agent is in disconnected state:
 
     <channel type='unix'>
       <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/domain-rhel7.2-new/org.qemu.guest_agent.0'/>
       <target type='virtio' name='org.qemu.guest_agent.0' state='disconnected'/>
       <alias name='channel1'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>";;RedHatEnterpriseLinux7/RHEL7-61976
1434;RHEL7-61978;Restart libvirtd with guest agent configured in guest XML and guest agent service stopped;"Guest agent will not be connected after libvirtd is restarted if it's not connected before this
Refer to:
 Bug 1244567 - Guest agent should report proper error while guest agent was unreachable and restart libvirtd service
";Fangge Jin (fjin);High;Positive;Not Automated;;1;Start guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-61978
1434;;;;;;;;;2;Stop qemu-guest-agent.service in guest;"
​​";;RedHatEnterpriseLinux7/RHEL7-61978
1434;;;;;;;;;3;"Check guest agent connection state:
 # virsh dumpxml rhel7.2-new";"Guest agent is disconnected:
 
     <channel type='unix'>
       <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/domain-rhel7.2-new/org.qemu.guest_agent.0'/>
       <target type='virtio' name='org.qemu.guest_agent.0' state='disconnected'/>
       <alias name='channel1'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>";;RedHatEnterpriseLinux7/RHEL7-61978
1434;;;;;;;;;4;# systemctl restart libvirtd;"
​​";;RedHatEnterpriseLinux7/RHEL7-61978
1434;;;;;;;;;5;"Run a random virsh command that relies on guest agent, e.g.
 # virsh domtime rhel7.2-new
​​";"Virsh command reports proper error right away .
 
 Output:
 error: Guest agent is not responding: QEMU guest agent is not connected
​​";;RedHatEnterpriseLinux7/RHEL7-61978
1434;;;;;;;;;6;"Check guest agent connection state:
 
 # virsh dumpxml rhel7.2-new";"Guest agent is disconnected:
 
     <channel type='unix'>
       <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/domain-rhel7.2-new/org.qemu.guest_agent.0'/>
       <target type='virtio' name='org.qemu.guest_agent.0' state='disconnected'/>
       <alias name='channel1'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>";;RedHatEnterpriseLinux7/RHEL7-61978
1435;RHEL7-61979;Suspend/resume guest with guest agent configured in XML and guest agent service stopped;"Guest agent will not be connected after guest is resumed if it's not connected before suspending
Refer to:
 Bug 1293351 - libvirt calls to qemu-guest-agent take 5 s just to report agent unavailability
";Fangge Jin (fjin);High;Positive;Not Automated;;1;Start guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-61979
1435;;;;;;;;;2;Stop qemu-guest-agent.service in guest;"
​​";;RedHatEnterpriseLinux7/RHEL7-61979
1435;;;;;;;;;3;"Check guest agent connection state:
 # virsh dumpxml rhel7.2-new";"Guest agent is disconnected:
 
     <channel type='unix'>
       <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/domain-rhel7.2-new/org.qemu.guest_agent.0'/>
       <target type='virtio' name='org.qemu.guest_agent.0' state='disconnected'/>
       <alias name='channel1'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>";;RedHatEnterpriseLinux7/RHEL7-61979
1435;;;;;;;;;4;"Suspend and resume guest:
 
 1) # virsh suspend rhel7.2-new
 
 2) # virsh resume rhel7.2-new";"
​​";;RedHatEnterpriseLinux7/RHEL7-61979
1435;;;;;;;;;5;"Run a random virsh command that relies on guest agent, e.g.
 
 # virsh domtime rhel7.2-new
​​";"Report proper error.
 
 Output:
 error: Guest agent is not responding: QEMU guest agent is not connected
​​";;RedHatEnterpriseLinux7/RHEL7-61979
1435;;;;;;;;;6;"Check guest agent connection state:
 
 # virsh dumpxml rhel7.2-new";"Guest agent is disconnected:
 
     <channel type='unix'>
       <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/domain-rhel7.2-new/org.qemu.guest_agent.0'/>
       <target type='virtio' name='org.qemu.guest_agent.0' state='disconnected'/>
       <alias name='channel1'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>";;RedHatEnterpriseLinux7/RHEL7-61979
1436;RHEL7-61980;KN-TC Nic Driver-Test case: vnic/macvtap --FUNC=macvtap-test-bridge-vmvf-remote guest_nic=virtio;;Yuying Ma (yuma);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61980
1437;RHEL7-61981;KN-TC Nic Driver-Test case: vnic/macvtap --FUNC=macvtap-test-bridge-vmvf-remote guest_nic=e1000;;Yuying Ma (yuma);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61981
1438;RHEL7-61982;KN-TC Nic Driver-Test case: vnic/macvtap --FUNC=macvtap-test-bridge-vmvf-vmvf guest_nic=virtio;;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61982
1439;RHEL7-61983;KN-TC Nic Driver-Test case: vnic/macvtap --FUNC=macvtap-test-bridge-vmvf-vmvf guest_nic=e1000;;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61983
1440;RHEL7-61984;KN-TC Nic Driver-Test case: vnic/macvtap --FUNC=macvtap-test-bridge-vmvf-vmvf-vlan guest_nic=virtio;;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61984
1441;RHEL7-61985;KN-TC Nic Driver-Test case: vnic/macvtap --FUNC=macvtap-test-bridge-vmvf-vmvf-vlan guest_nic=e1000;;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61985
1442;RHEL7-61986;KN-TC Nic Driver-Test case: vnic/macvtap --FUNC=macvtap-test-passthru-vmvf-remote guest_nic=virtio;;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61986
1443;RHEL7-61987;KN-TC Nic Driver-Test case: vnic/macvtap --FUNC=macvtap-test-passthru-vmvf-remote guest_nic=e1000;;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61987
1444;RHEL7-61988;KN-TC Nic Driver-Test case: vnic/macvtap --FUNC=macvtap-test-passthru-vmvf-vlan-remote guest_nic=virtio;;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61988
1445;RHEL7-61989;KN-TC Nic Driver-Test case: vnic/macvtap --FUNC=macvtap-test-passthru-vmvf-vlan-remote guest_nic=e1000;;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-61989
1446;RHEL7-61999;[Input devices] [mouse] [usb] Start a guest with usb mouse- relative cursor;USB mouse also functions as a relative cursor, it takes precedence over ps2 mouse;Fangge Jin (fjin);High;Positive;Automated;;1;1. Define or edit a guest with usb mouse;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-61999
1446;;;;;;;;;2;"2. # virsh dumpxml rhel7
 ...
     <input type='mouse' bus='usb'>
       <address type='usb' bus='0' port='1'/>
     </input>
 ...
";"libvirt assigns usb address for usb mouse
​​";;RedHatEnterpriseLinux7/RHEL7-61999
1446;;;;;;;;;3;"3. # virsh start rhel7
";​​;;RedHatEnterpriseLinux7/RHEL7-61999
1446;;;;;;;;;4;"4. Check the qemu command line:
 # ps aux|grep qemu-kvm|grep usb-mouse";"The qemu command line includes:

 -device usb-mouse,id=input1,bus=usb.0,port=1";;RedHatEnterpriseLinux7/RHEL7-61999
1447;RHEL7-62064;[Input devices] [keyboard] [usb] Start a guest with usb keyboard;USB keyboard is added manually and takes precedence over PS2 keyboard.;Fangge Jin (fjin);High;Positive;Automated;;1;0. Define or edit a guest with usb keyboard;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62064
1447;;;;;;;;;2;"1. # virsh dumpxml rhel7
 ...
     <input type='keyboard' bus='usb'>
       <address type='usb' bus='0' port='2'/>
     </input>
";"Libvirt assigns usb address for usb keyboard.
​​";;RedHatEnterpriseLinux7/RHEL7-62064
1447;;;;;;;;;3;"2. Start guest
 # virsh start rhel7";​​;;RedHatEnterpriseLinux7/RHEL7-62064
1447;;;;;;;;;4;"3. Check qemu command line:
 # ps aux|grep qemu-kvm|grep usb-kbd";"Qemu command line includes:

 -device usb-kbd,id=input0,bus=usb.0,port=2";;RedHatEnterpriseLinux7/RHEL7-62064
1447;;;;;;;;;5;The following steps are optional:;​​;;RedHatEnterpriseLinux7/RHEL7-62064
1447;;;;;;;;;6;"4. Connect to guest by virt-viewer or other client:
 # virt-viewer rhel7";​​;;RedHatEnterpriseLinux7/RHEL7-62064
1447;;;;;;;;;7;5. Type something in guest by keyboard;USB keyboard works well;;RedHatEnterpriseLinux7/RHEL7-62064
1448;RHEL7-62083;WALA-TC: [WALA conf] reset system account;WALA-TC: [WALA conf] reset system account;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Prepare a VM on Azure with username ""azureuser"", and login.
 1. Set Provisioning.AllowResetSysUser=n in /etc/waagent.conf.";Provisioning.AllowResetSysUser=n;Test Case;RedHatEnterpriseLinux7/RHEL7-62083
1448;;;;;;;;;2;"2. Check the UID_MIN value, and check your account UID, and change the uid to a smaller value
 # grep -R ""^UID_MIN"" /etc/login.defs
 # id -u azureuser
 # usermod -u 400 azureuser";"RHEL-6: UID_MIN is 500
 RHEL-7: UID_MIN is 1000
 # id -u azureuser
 The uid is echo to the UID_MIN
 # usermod -u 400 azureuser
 # id -u azureuser
 400";;RedHatEnterpriseLinux7/RHEL7-62083
1448;;;;;;;;;3;"3. Deprovision this VM
 # waagent -deprovision
 Shutdown the VM. Capture an image(with ""I've run deprovision"" checked), and create a new VM base on this image.
 During provisioning, set user name ""azureuser"" and set a new password.
 Try to login with the new password";"Cannot login with the new password. Can login with the old password.
 There's an error log in the waagent.log:
 ERROR Provision failed: (000004)Failed to handle ovf-env.xml: (000007)User azureuser is a system user. Will not set passwd.";;RedHatEnterpriseLinux7/RHEL7-62083
1448;;;;;;;;;4;"4. Set Provisioning.AllowResetSysUser=y in /etc/waagent.conf.
 Repeat step 2-4";Can login with the new password;;RedHatEnterpriseLinux7/RHEL7-62083
1448;;;;;;;;;5;config;​​;;RedHatEnterpriseLinux7/RHEL7-62083
1449;RHEL7-62132;[General] Extension update;[General] Extension update;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;1. Prepare a VM on Azure with old version extension installed. (VMAccessForLinux-1.4.0.0);​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62132
1449;;;;;;;;;2;"2. Check if the extension can update automatically. (Update to VMAccessForLinux-1.4.1.0)
 Check if there's error log in /var/log/waagent.log";"Extension can be updated.
 There's no error logs in waagent.log.";;RedHatEnterpriseLinux7/RHEL7-62132
1449;;;;;;;;;3;"3. Execute ""reset remote access"" to check if the new extension works well.";"Can reset remote access.
 The new extension works well.";;RedHatEnterpriseLinux7/RHEL7-62132
1450;RHEL7-62139;[virtlogd][max_size] Reload virtlogd with new value for max_size;Verify that when reload virtlogd, max_size will be reloaded from /etc/libvirt/virtlogd.conf;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Make sure virtlog service is active:
 # systemctl status virtlogd
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62139
1450;;;;;;;;;2;"Set max_size to a valid value in /etc/libvirt/virtlogd.conf, for example:
 
 max_size = 204800
";"
​​";;RedHatEnterpriseLinux7/RHEL7-62139
1450;;;;;;;;;3;"Reload virtlogd service
 # systemctl reload virtlogd";​​;;RedHatEnterpriseLinux7/RHEL7-62139
1450;;;;;;;;;4;"Start & destroy guest continually, to produce a lot of qemu logs:
 
 # while true; do virsh start rhel7.2; virsh destroy rhel7.2;done
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-62139
1450;;;;;;;;;5;"Wait a while, check qemu log file:
 # ll /var/log/libvirt/qemu/rhel7.2.log* -h
​​";"New rhel7.2.log is created, the old one is renamed to rhel7.2.log.0 whose size is 200K.

 Output:
 -rw-------. 1 root root 178K Aug   5 15:03 /var/log/libvirt/qemu/rhel7.2.log
 -rw-------. 1 root root 200K Aug  5 15:03 /var/log/libvirt/qemu/rhel7.2.log.0

 Note:
 If there is a rhel7.2.log file more than 200KB existed before, after reloading virtlogd, you may find that rhel7.2.log.0 is not 200KB , but wait more time, the new rhel7.2.log.0 will be 200KB.

 For example:
 # ll /var/log/libvirt/qemu/rhel7.2.log* -h
 -rw-------. 1 root root 115K Aug   5 15:55 /var/log/libvirt/qemu/rhel7.2.log
 -rw-------. 1 root root 815K Aug   5 15:55 /var/log/libvirt/qemu/rhel7.2.log.0
 -rw-------. 1 root root 2.0M Aug   5 15:54 /var/log/libvirt/qemu/rhel7.2.log.1

 After a while:
 # ll /var/log/libvirt/qemu/rhel7.2.log* -h
 -rw-------. 1 root root 156K Aug   5 15:56 /var/log/libvirt/qemu/rhel7.2.log
 -rw-------. 1 root root 200K Aug   5 15:56 /var/log/libvirt/qemu/rhel7.2.log.0
 -rw-------. 1 root root 815K Aug   5 15:56 /var/log/libvirt/qemu/rhel7.2.log.1
 -rw-------. 1 root root 2.0M Aug   5 15:55 /var/log/libvirt/qemu/rhel7.2.log.2";;RedHatEnterpriseLinux7/RHEL7-62139
1451;RHEL7-62140;[virtlogd][max_backups] Reload virtlogd with new value for max_backups;Verify that when reload virtlogd, max_backups will be reloaded from /etc/libvirt/virtlogd.conf;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Make sure virtlog service is active:
 # systemctl status virtlogd
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62140
1451;;;;;;;;;2;"Set  max_backups to a valid value in /etc/libvirt/virtlogd.conf, for example:
 
 max_backups = 4
 
 (Note: the new value must be different from the old value.)
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-62140
1451;;;;;;;;;3;"Reload virtlogd:
 # systemctl reload virtlogd";​​;;RedHatEnterpriseLinux7/RHEL7-62140
1451;;;;;;;;;4;"Start & destroy guest continually, to produce a lot of qemu logs:
 
 # while true; do virsh start rhel7.2; virsh destroy rhel7.2;done";"
​​";;RedHatEnterpriseLinux7/RHEL7-62140
1451;;;;;;;;;5;"Wait a while(please be patient), check  qemu log file:
 
 # ll /var/log/libvirt/qemu/rhel7.2.log* -h
​​";"there are 4 backup files.

 Output:
 -rw-------. 1 root root 3.1K Aug   5 15:35 /var/log/libvirt/qemu/rhel7.2.log
 -rw-------. 1 root root 2.0M  Aug  5 15:35 /var/log/libvirt/qemu/rhel7.2.log.0
 -rw-------. 1 root root 2.0M Aug   5 15:35 /var/log/libvirt/qemu/rhel7.2.log.1
 -rw-------. 1 root root 2.0M Aug   5 15:34 /var/log/libvirt/qemu/rhel7.2.log.2
 -rw-------. 1 root root 2.0M Aug   5 15:03 /var/log/libvirt/qemu/rhel7.2.log.3
​​";;RedHatEnterpriseLinux7/RHEL7-62140
1451;;;;;;;;;6;"Wait more time, check qemu log again:
 
 # ll /var/log/libvirt/qemu/rhel7.2.log* -h
 
​​";"still 4 backup files.

 Output:
 -rw-------. 1 root root  84K Aug   5 15:35 /var/log/libvirt/qemu/rhel7.2.log
 -rw-------. 1 root root 2.0M Aug   5 15:35 /var/log/libvirt/qemu/rhel7.2.log.0
 -rw-------. 1 root root 2.0M Aug   5 15:35 /var/log/libvirt/qemu/rhel7.2.log.1
 -rw-------. 1 root root 2.0M Aug   5 15:35 /var/log/libvirt/qemu/rhel7.2.log.2
 -rw-------. 1 root root 2.0M Aug   5 15:35 /var/log/libvirt/qemu/rhel7.2.log.3";;RedHatEnterpriseLinux7/RHEL7-62140
1452;RHEL7-62154;[Memory management] The memtune in xml should not disappear after restarting libvirtd - 1211548;[Memory management] The memtune in xml should not disappear after restarting libvirtd - 1211548;Fangge Jin (fjin);Medium;Positive;Automated;;1;" 1. Prepare a running vm:
 # virsh list
  Id    Name                           State
 ----------------------------------------------------
  19    r7                                running

 2. No memtune settings
 # virsh memtune r7
 hard_limit     : unlimited
 soft_limit     : unlimited
 swap_hard_limit: unlimited
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62154
1452;;;;;;;;;2;"3. Set a big memtune value then recheck:

 # virsh memtune r7 --hard-limit 9007199254740900
 # virsh memtune r7
 hard_limit     : 9007199254740900
 soft_limit     : unlimited
 swap_hard_limit: unlimited

 # virsh dumpxml r7|grep memtune -A 3
   <memtune>
     <hard_limit unit='KiB'>9007199254740900</hard_limit>
   </memtune>
";"# virsh memtune r7
 hard_limit     : 9007199254740900
 soft_limit     : unlimited
 swap_hard_limit: unlimited";;RedHatEnterpriseLinux7/RHEL7-62154
1452;;;;;;;;;3;"4. Restart libvirtd and recheck:

 # service libvirtd restart
 Redirecting to /bin/systemctl restart  libvirtd.service

 # virsh memtune r7
 hard_limit     : 9007199254740900
 soft_limit     : unlimited
 swap_hard_limit: unlimited

 # virsh dumpxml r7|grep memtune -A 3
   <memtune>
     <hard_limit unit='KiB'>9007199254740900</hard_limit>
   </memtune>
"; ;;RedHatEnterpriseLinux7/RHEL7-62154
1453;RHEL7-62155;[Memory management] Edit guest XML with smbios /sysinfo /idmap /metadata and memory device - 1223631;"Refer to:
 Bug 1223631 - smbios, sysinfo, idmap, metadata will lose if we set a memory device in the xml
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 1.Edit a guest xml with smbios /sysinfo /idmap /metadata and memory device: 
 # virsh edit rhel7d1
 ...
   <maxMemory slots='16' unit='KiB'>2560000</maxMemory>
   <memory unit='KiB'>1024000</memory>
   <currentMemory unit='KiB'>1024000</currentMemory>
 ...
 <sysinfo type='smbios'>
     <bios>
       <entry name='vendor'>LENOVO</entry>
     </bios>
   </sysinfo>
   <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.1.0'>hvm</type>
     <boot dev='hd'/>
     <boot dev='cdrom'/>
     <bootmenu enable='yes' timeout='3000'/>
     <bios useserial='yes' rebootTimeout='0'/>
     <smbios mode='sysinfo'/>
   </os>
   <idmap>
     <uid start='0' target='1000' count='10'/>
     <gid start='0' target='1000' count='10'/>
   </idmap>
 ...
 <cpu mode='host-model'>
     <numa>
       <cell id='0' cpus='0,2' memory='513024' unit='KiB'/>
       <cell id='1' cpus='1,3' memory='513024' unit='KiB'/>
     </numa>
 </cpu>
 ...
     <memory model='dimm'>
       <target>
         <size unit='KiB'>512000</size>
         <node>1</node>
       </target>
     </memory>
 ...
 
 # virsh edit r7
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62155
1453;;;;;;;;;2;2. Start the guest, recheck the xml, all the attributes still exist.;​​;;RedHatEnterpriseLinux7/RHEL7-62155
1454;RHEL7-62160;[Video devices] Start a guest with multiple videos and more than one with primary='yes';When more than one video device is set with primary='yes', libvirt will report error. ;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Define or edit guest with such setting:
 1) multiple videos
 2) more than one video are set as primary
 
 # virsh define rhel7.xml
 
 or # virsh edit rhel7
​​";"Got such error in the terminal:
 
 error: unsupported configuration: Only one primary video device is supported
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-62160
1455;RHEL7-62280;[watchdog] Dump a guest with long domain name by watchdog;"Verify dump guest with long domain name by watchdog can succeed{comment:4}
 Bug 1334237 - Dump a guest with long domain name by watchdog failed";Fangge Jin (fjin);High;Positive;Automated;;1;"Start guest:
 # virsh start $uuid";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62280
1455;;;;;;;;;2;"Trigger watchdog, refer to: How to trigger watchdog  
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-62280
1455;;;;;;;;;3;"Wait for some time, check the status of guest:
 # virsh list";guest is paused;;RedHatEnterpriseLinux7/RHEL7-62280
1455;;;;;;;;;4;"Check dump file:
 #ll /var/lib/libvirt/qemu/dump/
​​";"dump file exists, its name is in format: {domain id}-{the first 21 characters of domain name}-{date}.

 Output:
 -rw-------. 1 root root 1822568040 Jul 26 09:59 6-11111111111111111111-2016-07-26-09:59:37";;RedHatEnterpriseLinux7/RHEL7-62280
1455;;;;;;;;;5;"Wait more time until dump is finished, Check guest status:
 # virsh list
​​";"guest is running
​​";;RedHatEnterpriseLinux7/RHEL7-62280
1456;RHEL7-62351;[Timer devices]Start a guest with pit timer;"Verify guests start successfully with correct qemu command line when pit timer is set
";Fangge Jin (fjin);High;Positive;Automated;;1;"Prepare a guest with pit timer:
 # virsh dumpxml rhel7
 ...
 <clock offset='utc'>
 <timer name='pit' />
 </clock>
 ...
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62351
1456;;;;;;;;;2;# virsh start rhel7;​​;;RedHatEnterpriseLinux7/RHEL7-62351
1456;;;;;;;;;3;"# ps -aux | grep rhel7
​​";"qemu command line includes:

 ...-rtc base=utc -global kvm-pit.lost_tick_policy=delay ...";;RedHatEnterpriseLinux7/RHEL7-62351
1457;RHEL7-62352;[Timer devices]Start a guest with rtc timer;Verify guests start successfully with correct qemu command line when rtc timer is set;Fangge Jin (fjin);High;Positive;Automated;;1;"Prepare a guest with rtc timer:
 # virsh dumpxml rhel7
 ...
 <clock offset='utc'>
    <timer name='rtc'/>
 </clock>
 ...";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62352
1457;;;;;;;;;2;# virsh start rhel7;​​;;RedHatEnterpriseLinux7/RHEL7-62352
1457;;;;;;;;;3;"# ps -aux | grep rhel7
​​";"qemu command line includes:

 ...-rtc base=utc ...";;RedHatEnterpriseLinux7/RHEL7-62352
1458;RHEL7-62374;[connect] - (Re)connect to a valid URI;Connect to a daemon's server;Fangge Jin (fjin);Medium;Positive;Not Automated;;1; 1. connect to a specific uri;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62374
1458;;;;;;;;;2;"Enter interactive mode by command ""virt-admin"":
 # virt-admin 
 Welcome to virt-admin, the administrating virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virt-admin #";​​;;RedHatEnterpriseLinux7/RHEL7-62374
1458;;;;;;;;;3;"virt-admin # connect libvirtd:///system
 Reconnected to the admin server
 
 virt-admin # uri
 libvirtd:///system";Connect successfully;;RedHatEnterpriseLinux7/RHEL7-62374
1458;;;;;;;;;4;"2. ReConnect to the prior URI
";​​;;RedHatEnterpriseLinux7/RHEL7-62374
1458;;;;;;;;;5;"virt-admin # connect
 Connected to the admin server
 
 virt-admin # uri
 libvirtd:///system";"The uri doesn't change after ""reconnect""";;RedHatEnterpriseLinux7/RHEL7-62374
1459;RHEL7-62375;[connect] - connect to an invalid URI;"This is a negtive test.
Bug 1365903 - virt-admin reports a message indicating success when it fails to connect";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;connect to an invalid uri;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62375
1459;;;;;;;;;2;"# virt-admin connect aaaaa
 error: Failed to connect to the admin server
 error: unsupported configuration: Unsupported URI scheme '<null>'
 
 # echo $?
 1
​​";"Connect failed and return value is 1
​​";;RedHatEnterpriseLinux7/RHEL7-62375
1460;RHEL7-62378;WALA-TC: [General] Logrotate;WALA-TC: [General] Logrotate;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;1. Prepare a VM on azure with WALA installed.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62378
1460;;;;;;;;;2;"2. Execute logrotate manually.
 # logrotate -vf /etc/logrotate.conf";Can generate a log rotate file like: /var/log/waagent.log-20160815.gz;;RedHatEnterpriseLinux7/RHEL7-62378
1460;;;;;;;;;3;"3. Extract the .gz file and check if the time of messages are earlier than messages in /var/log/waagent.log
 # gunzip waagent.log- 20160816.gz";"Can extract .gz file. 
 The time of messages are earlier than messages in /var/log/waagent.log";;RedHatEnterpriseLinux7/RHEL7-62378
1460;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-62378
1461;RHEL7-62387;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/t...;"KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/parameters/primary_reselect 
";Amit Supugade (asupugad);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62387
1462;RHEL7-62388;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/t...;"KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/Regression/bz1050224-System-lockup-with-2-LACP-bonded-interfaces-vlan-over-bond-interface
";Amit Supugade (asupugad);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62388
1463;RHEL7-62389;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/t...;"KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/Regression/bz1100970-Inactive-bonding-slave-device-should-not-drop-LLDP-type-packets
";Amit Supugade (asupugad);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62389
1464;RHEL7-62390;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/t...;"KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/Regression/bz1210322-netlink-interface-is-missing
";Amit Supugade (asupugad);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62390
1465;RHEL7-62391;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/t...;"KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/Regression/bz1277950-Missing-TSO6-VXLAN-offloading-in-bonding
";Amit Supugade (asupugad);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62391
1466;RHEL7-62392;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/t...;"KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/Regression/bz1285719-Kernel-sends-spurious-RTM_NEWLINK-and-RTM_DELLINK-netlink-notifications


";Amit Supugade (asupugad);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62392
1467;RHEL7-62393;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/t...;"KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/Regression/bz1289198-Inactive-bond-slaves-report-dropped-packets
";Amit Supugade (asupugad);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62393
1468;RHEL7-62394;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/t...;"KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/Regression/bz1292358-DAD-on-bonding-interface
";Amit Supugade (asupugad);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62394
1469;RHEL7-62395;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/t...;"KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/Regression/bz747546-Failed-to-get-speed-and-duplex-from-NIC-in-bonding
";Amit Supugade (asupugad);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62395
1470;RHEL7-62396;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/t...;"KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/Regression/bz802676-bonding-with-round-robin-do-not-come-up-after-restart
";Amit Supugade (asupugad);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62396
1471;RHEL7-62397;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/t...;"KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/Regression/bz805098-netconsole-stops-working-after-bonding-interface-restarted
";Amit Supugade (asupugad);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62397
1472;RHEL7-62398;KN-TC Team Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree...;"KN-TC Team Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/Regression/bz1176697-team-avoid-possible-underflow-of-count_pending-value-for-notify_peers-and-mcast_rejoin
";Amit Supugade (asupugad);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62398
1473;RHEL7-62399;KN-TC Team Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree...;"KN-TC Team Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/Regression/bz1225396-macvtap-link-isn-t-restored-after-team-LACP-fail-and-bring-back
";Amit Supugade (asupugad);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62399
1474;RHEL7-62400;KN-TC Team Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree...;"KN-TC Team Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/Regression/bz1242628-delay-up-not-respected-in-teamd-setup
";Amit Supugade (asupugad);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62400
1475;RHEL7-62401;KN-TC Team Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree...;"KN-TC Team Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/Regression/bz1264175-teamd-was-killed-early-when-shutdown
";Amit Supugade (asupugad);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62401
1476;RHEL7-62402;KN-TC Team Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree...;"KN-TC Team Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/Regression/bz1273052-teamd-fails-to-start-after-reboot
";Amit Supugade (asupugad);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62402
1477;RHEL7-62403;KN-TC Team Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree...;"KN-TC Team Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/Regression/bz1347818-Communication-over-libteam-LACP-fails-because-Aggregation-bit-is-not-set
";Amit Supugade (asupugad);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62403
1478;RHEL7-62458;Reset guest after panicked guest is preserved;"Reset guest after panicked guest is preserved, check its status
Bug 1269575 - Guest state ""crashed"" does not get updated after ""virsh reset""";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"0. Prepare a guest as below:
 # virsh dumpxml rhel7
 ...
   <on_crash>preserve</on_crash>
 ...
     <panic model='isa'>
       <address type='isa' iobase='0x505'/>
     </panic>
 ...
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62458
1478;;;;;;;;;2;1. Start guest;​​;;RedHatEnterpriseLinux7/RHEL7-62458
1478;;;;;;;;;3;"2. In guest:
 1) stop kdump service
 # systemctl stop kdump
 
 2)
 # echo c > /proc/sysrq-trigger
​​";​​;;RedHatEnterpriseLinux7/RHEL7-62458
1478;;;;;;;;;4;"3. Check guest status
 # virsh list
  Id    Name                           State
 ----------------------------------------------------
  80    rhel7                          crashed
 
 # virsh domstate rhel7 --reason
 crashed (panicked)
​​";​​;;RedHatEnterpriseLinux7/RHEL7-62458
1478;;;;;;;;;5;"4. Reset guest and check guest status again:
 
 # virsh reset rhel7
 Domain rhel7 was reset
 
 # virsh list
  Id    Name                           State
 ----------------------------------------------------
  80    rhel7                          paused
 
 # virsh domstate rhel7 --reason
 paused (crashed)";​​;;RedHatEnterpriseLinux7/RHEL7-62458
1478;;;;;;;;;6;"5.Resume guest and check guest status again:
 
 # virsh resume rhel7
 Domain rhel7 resumed
 
 # virsh list
  Id    Name                           State
 ----------------------------------------------------
  80    rhel7                          running
 
 # virsh domstate rhel7 --reason
 running (unpaused)";​​;;RedHatEnterpriseLinux7/RHEL7-62458
1479;RHEL7-62467;LIBVIRT_ADMIN_DEFAULT_URI takes precedence over uri_default(in virtlogd.conf) when both are set;"Test the precedence of default uri setting: LIBVIRT_ADMIN_DEFAULT_URI > libvirt-admin.conf
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Scenario 1:
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62467
1479;;;;;;;;;2;"1. Set uri_default in configuration to ""libvirtd:///system"":
 
 #  /etc/libvirt/libvirt-admin.conf
 uri_default = ""libvirtd:///system""";​​;;RedHatEnterpriseLinux7/RHEL7-62467
1479;;;;;;;;;3;"2. Set LIBVIRT_ADMIN_DEFAULT_URI to a different value, e.g.:  ""aaa:///dd""
 
 # export LIBVIRT_ADMIN_DEFAULT_URI=aaa:///ddd
​​";​​;;RedHatEnterpriseLinux7/RHEL7-62467
1479;;;;;;;;;4;"# virt-admin connect
 error: Failed to connect to the admin server
 error: unsupported configuration: Unsupported URI scheme 'aaa'";"Connect failed.
​​";;RedHatEnterpriseLinux7/RHEL7-62467
1479;;;;;;;;;5;"Scenario 2:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-62467
1479;;;;;;;;;6;"1. Set uri_default in configuration to ""ccc:///ddd""
 # cat /etc/libvirt/libvirt-admin.conf
 uri_default = ""ccc:///ddd""";​​;;RedHatEnterpriseLinux7/RHEL7-62467
1479;;;;;;;;;7;"2. Set LIBVIRT_ADMIN_DEFAULT_URI to ""libvirtd:///system""
 
 # export LIBVIRT_ADMIN_DEFAULT_URI=libvirtd:///system
​​";​​;;RedHatEnterpriseLinux7/RHEL7-62467
1479;;;;;;;;;8;"# virt-admin ""connect;uri""
 Connected to the admin server
 
 libvirtd:///system";"Connect to libvirtd:///system successfully
​​";;RedHatEnterpriseLinux7/RHEL7-62467
1480;RHEL7-62468;WALA-TC: [General] Access the VM with both ssh key and password;WALA-TC: [General] Access the VM with both ssh key and password;Yuxin Sun (yuxisun);Medium;Positive;Automated;;1;1.Prepare a ssh key .pem file.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62468
1480;;;;;;;;;2;2. Create a VM, authenticate with both ssh key and password.;​​;;RedHatEnterpriseLinux7/RHEL7-62468
1480;;;;;;;;;3;"3. After the VM is created, access to the VM with both ssh key and password
​​";"Can access to the VM with ssh key.
 Can access to the VM from other machines with password";;RedHatEnterpriseLinux7/RHEL7-62468
1480;;;;;;;;;4;"4. Check sudo permission:
 # cat /etc/sudoers.d/waagent
 Check sshd_config:
 # cat /etc/ssh/sshd_config|grep PasswordAuthentication";"# cat /etc/sudoers.d/waagent
 azureuser ALL=(ALL) ALL
 # cat /etc/ssh/sshd_config |grep PasswordAuthentication
 PasswordAuthentication yes";;RedHatEnterpriseLinux7/RHEL7-62468
1480;;;;;;;;;5;config;​​;;RedHatEnterpriseLinux7/RHEL7-62468
1481;RHEL7-62470;[virtual disks][iothreads] set a big iothreads - bug 1264008;"
set a big iothreads";Yalan Zhang (yalzhang);Medium;Negative;Automated;;1;"1. edit a guest and add this in guest xml: <iothreads>1000000</iothreads> 
 # time virsh edit rh7.2
 Domain rh7.2 XML configuration edited.
 
 real    0m12.358s
 user    0m0.012s
 sys    0m0.012s
​​";"1. When edit the guest with adding big iothreads, the time is acceptable.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-62470
1481;;;;;;;;;2;"2. # virsh start rh7.2
 error: Failed to start domain rh7.2
 error: internal error: process exited while connecting to monitor: libvirt:  error : cannot execute binary /usr/libexec/qemu-kvm: Argument list too long
​​";"2. the guest can not start
​​";;RedHatEnterpriseLinux7/RHEL7-62470
1482;RHEL7-62471;Set read_bytes_sec/write_bytes_sec/total_bytes_sec together at the same time;"
Set read_bytes_sec/write_bytes_sec/total_bytes_sec together at the same time";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" 1. Edit the guest'xml ,add the following content.
  # virsh edit rhel72
 --
 -<iotune>
 <write_bytes_sec>1000</write_bytes_sec>
 <read_bytes_sec>2000</read_bytes_sec>
 <total_bytes_sec>3000</total_bytes_sec>
 </iotune>";"Output:
 error: XML error: total and read/write bytes_sec cannot be set at the same time
 Failed. Try again? [y,n,f,?]:";Test Case;RedHatEnterpriseLinux7/RHEL7-62471
1482;;;;;;;;;2;"2. Edit the guest'xml add the following and start guest
 --
 <iotune>
 <read_bytes_sec>2000</read_bytes_sec>
 <write_bytes_sec>1000</write_bytes_sec>
 <read_iops_sec>2000</read_iops_sec>
 <write_iops_sec>1000</write_iops_sec>
 </iotune>

​​";​​;;RedHatEnterpriseLinux7/RHEL7-62471
1482;;;;;;;;;3;" # virsh blkdeviotune rhel72 vda --config
 total_bytes_sec: 0
 read_bytes_sec : 2000
 write_bytes_sec: 1000
 total_iops_sec : 0
 read_iops_sec : 2000
 write_iops_sec : 1000

 #ps aux|grep rhel72
 qemu 11614 94.3 0.0 4760504 29640 ? Sl 19:14 0:29 /usr/libexec/qemu-kvm -name rhel72 --
 -drive file=/var/lib/libvirt/images/rhel7_qcow2.img,if=none,id=drive-virtio-disk0,format=qcow2,cache=none,bps_rd=2000,bps_wr=1000,iops_rd=2000,iops_wr=1000";​​;;RedHatEnterpriseLinux7/RHEL7-62471
1483;RHEL7-62472;Resize a block size  to a value that's not a multiple of 1024;"Resize a block size  to a value that's not a multiple of 1024
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" # virsh blockresize rhel62 --path /var/lib/libvirt/images/rhel62.img --size 900B
 Block device '/var/lib/libvirt/images/rhel62.img' is resized

 # qemu-img info /var/lib/libvirt/images/rhel62.img
 image: /var/lib/libvirt/images/rhel62.img
 file format: raw
 virtual size: 1.0K (1024 bytes)
 disk size: 0

 # ll /var/lib/libvirt/images/rhel62.img -h
 -rw-------. 1 qemu qemu 900 Mar 19 11:11 /var/lib/libvirt/images/rhel62.img
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62472
1483;;;;;;;;;2;" # virsh blockresize rhel62 --path /var/lib/libvirt/images/rhel62.img --size 600B
 Block device '/var/lib/libvirt/images/rhel62.img' is resized

 # qemu-img info /var/lib/libvirt/images/rhel62.img
 image: /var/lib/libvirt/images/rhel62.img
 file format: raw
 virtual size: 1.0K (1024 bytes)
 disk size: 0

 # ll /var/lib/libvirt/images/rhel62.img -h
 -rw-------. 1 qemu qemu 600 Mar 19 11:09 /var/lib/libvirt/images/rhel62.img";​​;;RedHatEnterpriseLinux7/RHEL7-62472
1484;RHEL7-62531;[Video devices] Retrieve runtime ram/vram values when set multiple qxl video devices with different ram/vram values;"Verify that libvirt can retrieve the actual ram/vram value from qemu at runtime correctly when multiple devices(more than two) with different ram/varm values are configured. Which can be verifid by migration or save/restore
Before Bug 1358728 is fixed, libvirt retrieves wrong values for the second video device";Yan Fu (yafu);High;Positive;Not Automated;;1;"Start guest
 # virsh start rhel7.2";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62531
1484;;;;;;;;;2;"Check live vram/ram size:
 # virsh dumpxml rhel7.2
​​";"Libvirt retrieves the run time values of vram/ram.
 
 Output: 
 ...
     <video>
       <model type='qxl' ram='524288' vram='16384' vgamem='16384' heads='1' primary='yes'/>
       <alias name='video0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>
     </video> 
     <video>
       <model type='qxl' ram='65536' vram='32768' vgamem='8192' heads='3'/>
       <alias name='video1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </video>
     <video>
       <model type='qxl' ram='32768' vram='65536' vgamem='8192' heads='7'/>
       <alias name='video2'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
     </video>
 ...
 
 Note:
 The runtime value may be different than the configured value";;RedHatEnterpriseLinux7/RHEL7-62531
1484;;;;;;;;;3;"Do migration or managedsave/start to verify the retrieved values are correct:
 
 1)
 # virsh migrate rhel7.2 qemu+ssh://10.66.144.76/system --live --verbose
 Migration: [100 %]
 
 or
 2) 
 # virsh managedsave rhel7.2
 # virsh start rhel7.2
​​";"
 
 1) 
 migration complete correctly
 
 
 2)
 managedsave/start successfully
​​";;RedHatEnterpriseLinux7/RHEL7-62531
1485;RHEL7-62532;Do live migration with auto-generated guest agent socket path from RHEL7.5(or newer) to RHEL7.4(or  older version);"Do migration with default guest agent socket path from 1.3.x to 1.2.17 should be successful
 Bug 1320470 - Migrating guest with default guest agent socket path from 1.3.x to 1.2.17 failed";Yan Fu (yafu);High;Positive;Not Automated;;1; 1.On source host,start guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62532
1485;;;;;;;;;2;"2.Do migration:
  #virsh migrate mig1 qemu+ssh://10.66.144.76/system --live --verbose
   Migration: [100 %]";​​;;RedHatEnterpriseLinux7/RHEL7-62532
1485;;;;;;;;;3;"3.Check the guest agent socket of the guest on the target host after migration completes:
​​";"The source path is auto-generated by libvirt, the format is as:
 /var/lib/libvir/qemu/channel/target/domain-{domain id}-{the first 20 characters of domain name}/org.qemu.guest_agent.{n}.
 
 ...
       <channel type='unix'>
       <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/domain-mig1/org.qemu.guest_agent.0'/>
       <target type='virtio' name='org.qemu.guest_agent.0' state='connected'/>
       <alias name='channel1'/>
       <address type='virtio-serial' controller='0' bus='0' port='2'/>
     </channel>";;RedHatEnterpriseLinux7/RHEL7-62532
1485;;;;;;;;;4;"Run a random virsh command that relies on guest agent, e.g.
 # virsh domtime mig1 --pretty
​​";"The virsh command executes successfully.
 
 Output:
 Time: 2016-03-08 11:02:56
​​";;RedHatEnterpriseLinux7/RHEL7-62532
1486;RHEL7-62540;[spice/vnc] Query display URI of graphic listening on ipv6 wildcard;"Verify ""virsh domdisplay"" can output correct URI when graphic listening on ipv6 wildcard.";Yan Fu (yafu);Medium;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice or vnc graphic
 2) set graphic listen on ipv6 wildcard(0::)";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62540
1486;;;;;;;;;2;Start guest;​​;;RedHatEnterpriseLinux7/RHEL7-62540
1486;;;;;;;;;3;"Check the graphic ip and port in dumpxml:
 # virsh dumpxml $guest | grep gra";​​;;RedHatEnterpriseLinux7/RHEL7-62540
1486;;;;;;;;;4;"Query URI on local host:
 #virsh -c qemu:///system domdisplay rhel7.3 
​​";"The ip and port is same as in dumpxml, and in correct format.
 
 Output:   
 spice://localhost:5900";;RedHatEnterpriseLinux7/RHEL7-62540
1486;;;;;;;;;5;"Query URI on remote host, virsh connection uses hostname
 #virsh -c qemu+ssh://intel-e31225-16-3.englab.nay.redhat.com/system domdisplay rhel7.3 
​​";"The ip and port is same as in dumpxml, and in correct format.
 
 Output:  
 spice://intel-e31225-16-3.englab.nay.redhat.com:5900";;RedHatEnterpriseLinux7/RHEL7-62540
1486;;;;;;;;;6;"Query URI on remote host, virsh connection uses host ipv4 address
 #virsh -c qemu+ssh://10.66.144.29/system domdisplay rhel7.3
​​";"The ip and port is same as in dumpxml, and in correct format.
 
 Output:  
 spice://10.66.144.29:5900";;RedHatEnterpriseLinux7/RHEL7-62540
1486;;;;;;;;;7;"Query URI on remote host, virsh connection uses host public ipv6 address
 #virsh -c qemu+ssh://[2620:52:0:4292:a248:1cff:feaa:1594]/system domdisplay rhel7.3
​​";"The ip and port is same as in dumpxml, and in correct format.
 
 Output:  
 spice://[2620:52:0:4292:a248:1cff:feaa:1594]:5900";;RedHatEnterpriseLinux7/RHEL7-62540
1487;RHEL7-62542;[spice][tls] Query display URI of spice tls  that has password with/without --include-password;"Verify ""virsh domdisplay"" can output correct URI for spice tls connection with password, both with and without --include-password
 Bug 842272 - include-passwd option can't worked when using domdisplay.";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set spice password";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-62542
1487;;;;;;;;;2;Start guest;​​;;RedHatEnterpriseLinux7/RHEL7-62542
1487;;;;;;;;;3;"Check the graphic ip and port in dumpxml:
 # virsh dumpxml $guest --security-info| grep gra";​​;;RedHatEnterpriseLinux7/RHEL7-62542
1487;;;;;;;;;4;"Get graphic domdisplay without password:
 # virsh domdisplay guest
​​";"The ip and port is same as in dumpxml, and in correct format.
 
 Output:  
 spice://localhost:5900?tls-port=5901";;RedHatEnterpriseLinux7/RHEL7-62542
1487;;;;;;;;;5;"Get graphic domdisplay including password:
 # virsh domdisplay guest --include-password
​​";"The password, ip and port is same as in dumpxml, and in correct format.
 
 Output:  
 spice://localhost:5900?tls-port=5901&password=redhat";;RedHatEnterpriseLinux7/RHEL7-62542
1488;RHEL7-62831;fs-qe case:/nfs-utils/krb5-test/bz1294939-once-RPC_CRED_KEY_EXPIRE_SOON-is-set-it-doesnot-appear-to-be-unset tag:nfs-utils,tier1,regression;/nfs-utils/krb5-test/bz1294939-once-RPC_CRED_KEY_EXPIRE_SOON-is-set-it-doesnot-appear-to-be-unset tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-62831
1489;RHEL7-63090;[dns] Allow limiting a <forwarder> element to certain domains - REF bug 1331796;The dns element can have 0 or more <forwarder> elements. Each forwarder element  defines an alternate DNS server to use for some, or all, DNS requests sent to this network's DNS server.;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"scenario 1: use external dns server
​​";"If an addr is specified by itself, then all DNS requests to the network's DNS server will be forwarded to the DNS server at that address with no exceptions
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-63090
1489;;;;;;;;;2;"1. prepare an network xml with <forwarder addr='8.8.8.8'/>
 # cat net
 <network>
   <name>net</name>
   <forward mode='nat'/>
   <bridge name='virbr9' stp='on' delay='0'/>
   <mac address='52:54:00:57:aa:e4'/>
   <dns>
     <forwarder addr='8.8.8.8'/>
   </dns>
   <ip address='192.168.20.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.20.2' end='192.168.20.254'/>
     </dhcp>
   </ip>
 </network>
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-63090
1489;;;;;;;;;3;"2. define and start the network
 # virsh net-define net
 # virsh net-start net";"
​​";;RedHatEnterpriseLinux7/RHEL7-63090
1489;;;;;;;;;4;"3. check the config file
 #  cat /var/lib/libvirt/dnsmasq/net.conf
 
 (there is server=8.8.8.8 and no-resolv)
 
​​";"##...
 strict-order
 server=8.8.8.8
 no-resolv
 pid-file=/var/run/libvirt/network/net.pid
 except-interface=lo
 bind-dynamic
 interface=virbr9
 dhcp-range=192.168.20.2,192.168.20.254
 dhcp-no-override
 dhcp-authoritative
 dhcp-lease-max=253
 dhcp-hostsfile=/var/lib/libvirt/dnsmasq/net.hostsfile
 addn-hosts=/var/lib/libvirt/dnsmasq/net.addnhosts

 (indicates all DNS requests to the network's DNS server will be forwarded to the 8.8.8.8, and do not resolv by host's file or dns)
​​";;RedHatEnterpriseLinux7/RHEL7-63090
1489;;;;;;;;;5;"scenario 2: use external dns server
​​";​​;;RedHatEnterpriseLinux7/RHEL7-63090
1489;;;;;;;;;6;"1. prepare xml as below
 # cat net
 <network>
   <name>net</name>
   <forward mode='nat'/>
   <bridge name='virbr9' stp='on' delay='0'/>
   <mac address='52:54:00:57:aa:e4'/>
   <dns>
      <forwarder domain='example.test' addr='192.168.20.254'/>
     <forwarder domain='new.example.test' addr='192.168.20.50'/>
    <forwarder domain='travel.dom' addr='192.168.20.100'/>
   </dns>
   <ip address='192.168.20.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.20.2' end='192.168.20.254'/>
     </dhcp>
   </ip>
 </network>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-63090
1489;;;;;;;;;7;"2. define and start the network
 # virsh net-define net
 Network net defined from net
 # virsh net-start net
 Network net started";​​;;RedHatEnterpriseLinux7/RHEL7-63090
1489;;;;;;;;;8;"3. check the config file
 # cat /var/lib/libvirt/dnsmasq/net.conf
 ##WARNING:  THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE
 ##OVERWRITTEN AND LOST.  Changes to this configuration should be made using:
 ##    virsh net-edit net
 ## or other application using the libvirt API.
 ##
 ## dnsmasq conf file created by libvirt
 strict-order
 server=/example.test/192.168.20.254
 server=/new.example.test/192.168.20.50
 server=/travel.dom/192.168.20.100
 pid-file=/var/run/libvirt/network/net.pid
 except-interface=lo
 bind-dynamic
 interface=virbr9
 dhcp-range=192.168.20.2,192.168.20.254
 dhcp-no-override
 dhcp-authoritative
 dhcp-lease-max=253
 dhcp-hostsfile=/var/lib/libvirt/dnsmasq/net.hostsfile
 addn-hosts=/var/lib/libvirt/dnsmasq/net.addnhosts
​​";"If both domain and addr are specified, then all requests that match the given domain will be forwarded to the DNS server at addr.
 and other request that can not match the given domain, will be resolved by host's standard DNS forwarding";;RedHatEnterpriseLinux7/RHEL7-63090
1489;;;;;;;;;9;"Scenario 3: only domainis specified
 # cat net
 <network>
   <name>net</name>
   <forward mode='nat'/>
   <bridge name='virbr9' stp='on' delay='0'/>
   <mac address='52:54:00:57:aa:e4'/>
   <dns>
      <forwarder domain='example.test'/>
     <forwarder domain='new.example.test'/>
    <forwarder domain='travel.dom'/>
   </dns>
   <ip address='192.168.20.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.20.2' end='192.168.20.254'/>
     </dhcp>
   </ip>
 </network>
 
 # cat /var/lib/libvirt/dnsmasq/net.conf
 ##WARNING:  THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE
 ##OVERWRITTEN AND LOST.  Changes to this configuration should be made using:
 ##    virsh net-edit net
 ## or other application using the libvirt API.
 ##
 ## dnsmasq conf file created by libvirt
 strict-order
 server=/example.test/#
 server=/new.example.test/#
 server=/travel.dom/#
 pid-file=/var/run/libvirt/network/net.pid
 except-interface=lo
 bind-dynamic
 interface=virbr9
 dhcp-range=192.168.20.2,192.168.20.254
 dhcp-no-override
 dhcp-authoritative
 dhcp-lease-max=253
 dhcp-hostsfile=/var/lib/libvirt/dnsmasq/net.hostsfile
 addn-hosts=/var/lib/libvirt/dnsmasq/net.addnhosts
​​"; If only domainis specified, then all matching domains will be resolved locally (or via the host's standard DNS forwarding if they can't be resolved locally).;;RedHatEnterpriseLinux7/RHEL7-63090
1489;;;;;;;;;10;scenario 3: Compound conditions;​​;;RedHatEnterpriseLinux7/RHEL7-63090
1489;;;;;;;;;11;"1. start a network 
  # virsh net-dumpxml net
 <network>
   <name>net</name>
   <uuid>7823f366-99b1-4dc6-9716-b7a2e5a5fb34</uuid>
   <forward mode='nat'/>
   <bridge name='virbr9' stp='on' delay='0'/>
   <mac address='52:54:00:57:aa:e4'/>
   <dns>
     <forwarder addr='8.8.8.8'/>
     <forwarder domain='example.test' addr='192.168.20.254'/>
     <forwarder domain='new.example.test' addr='192.168.20.50'/>
    <forwarder domain='travel.dom' addr='192.168.20.100'/>
   </dns>
   <ip address='192.168.20.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.20.2' end='192.168.20.254'/>
       <host mac='00:16:3e:77:e2:ea' ip='192.168.20.254'/>
     <host mac='00:16:3e:77:e2:22' ip='192.168.20.50'/>
     </dhcp>
   </ip>
 </network>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-63090
1489;;;;;;;;;12;"2. # cat /var/lib/libvirt/dnsmasq/net.conf
 ##WARNING:  THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE
 ##OVERWRITTEN AND LOST.  Changes to this configuration should be made using:
 ##    virsh net-edit net
 ## or other application using the libvirt API.
 ##
 ## dnsmasq conf file created by libvirt
 strict-order
 no-resolv  
 server=8.8.8.8  
 server=/example.test/192.168.20.254  
 server=/new.example.test/192.168.20.50  
 server=/travel.dom/192.168.20.100  
 dhcp-authoritative
 pid-file=/var/run/libvirt/network/net.pid
 except-interface=lo
 bind-dynamic
 interface=virbr9
 dhcp-range=192.168.20.2,192.168.20.254
 dhcp-no-override
 dhcp-lease-max=253
 dhcp-hostsfile=/var/lib/libvirt/dnsmasq/net.hostsfile
 addn-hosts=/var/lib/libvirt/dnsmasq/net.addnhosts";"check the config file, should like
 ** no-resolv  **
 ** server=8.8.8.8  **
 ** server=/example.test/192.168.20.254  **
 ** server=/new.example.test/192.168.20.50  **
 ** server=/travel.dom/192.168.20.100  **";;RedHatEnterpriseLinux7/RHEL7-63090
1490;RHEL7-63153;fs-qe case:/nfs-utils/rpm-install/bz1203765-After-updating-nfs-utils-the-nfs-server-service-fails-to-start-on-boot tag:nfs-utils,tier1,regression;/nfs-utils/rpm-install/bz1203765-After-updating-nfs-utils-the-nfs-server-service-fails-to-start-on-boot tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63153
1491;RHEL7-63154;fs-qe case:/nfs-utils/rpm-install/common tag:nfs-utils,tier1,regression;/nfs-utils/rpm-install/common tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63154
1492;RHEL7-63155;fs-qe case:/nfs-utils/rpm-install/bz1245804-Cannot-properly-enable-the-nfs-secure-service tag:nfs-utils,tier1,regression;/nfs-utils/rpm-install/bz1245804-Cannot-properly-enable-the-nfs-secure-service tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63155
1493;RHEL7-63157;fs-qe case:/nfs-utils/function/nfs-server-reboot tag:nfs-utils,tier1,regression;/nfs-utils/function/nfs-server-reboot tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63157
1494;RHEL7-63158;fs-qe case:/nfs-utils/function/nfs-referrals/base tag:nfs-utils,tier1,regression gset:--arch=x86_64,;/nfs-utils/function/nfs-referrals/base tag:nfs-utils,tier1,regression gset:--arch=x86_64,;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63158
1495;RHEL7-63159;"fs-qe case:/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";"/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63159
1496;RHEL7-63160;fs-qe case:/nfs-utils/function/nfs-referrals/bz1340690-NFSv4-2-referrals-with-SELinux-enforcing-cause-kernel-panic tag:nfs-utils,tier1,regression;/nfs-utils/function/nfs-referrals/bz1340690-NFSv4-2-referrals-with-SELinux-enforcing-cause-kernel-panic tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63160
1497;RHEL7-63161;fs-qe case:/nfs-utils/function/grace-period/bz1234598-Early-grace-period-expiry-with-NFSv4-1 tag:nfs-utils,tier1,regression;/nfs-utils/function/grace-period/bz1234598-Early-grace-period-expiry-with-NFSv4-1 tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63161
1498;RHEL7-63162;fs-qe case:/nfs-utils/function/export-mount-local tag:nfs-utils,tier1,function;/nfs-utils/function/export-mount-local tag:nfs-utils,tier1,function;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63162
1499;RHEL7-63163;fs-qe case:/nfs-utils/function/pnfs/blklayout/base tag:nfs-utils,tier1,regression;/nfs-utils/function/pnfs/blklayout/base tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63163
1500;RHEL7-63164;fs-qe case:/nfs-utils/function/pnfs/blklayout/recall-layout tag:nfs-utils,tier1,regression;/nfs-utils/function/pnfs/blklayout/recall-layout tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63164
1501;RHEL7-63165;fs-qe case:/nfs-utils/function/pnfs/blklayout/redirect-io tag:nfs-utils,tier1,regression;/nfs-utils/function/pnfs/blklayout/redirect-io tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63165
1502;RHEL7-63166;fs-qe case:/nfs-utils/function/netgroup/bz1231998-rpc-mountd-does-not-check-for-membership-of-IP-addresses-in-netgroups-if-the-IP-is-resolvable tag:nfs-utils,tier1,regression;/nfs-utils/function/netgroup/bz1231998-rpc-mountd-does-not-check-for-membership-of-IP-addresses-in-netgroups-if-the-IP-is-resolvable tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63166
1503;RHEL7-63167;fs-qe case:/nfs-utils/function/related-module-test/lockd tag:nfs-utils,tier1,regression;/nfs-utils/function/related-module-test/lockd tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63167
1504;RHEL7-63168;fs-qe case:/nfs-utils/function/related-module-test/ipv6 tag:nfs-utils,tier1,regression;/nfs-utils/function/related-module-test/ipv6 tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63168
1505;RHEL7-63170;fs-qe case:/nfs-utils/rpcbind/bz1186933-rpcbind-causes-General-Protection-Fault tag:nfs-utils,tier1,regression;/nfs-utils/rpcbind/bz1186933-rpcbind-causes-General-Protection-Fault tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63170
1506;RHEL7-63171;fs-qe case:/nfs-utils/rpcbind/rpm_install tag:nfs-utils,tier1,regression;/nfs-utils/rpcbind/rpm_install tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63171
1507;RHEL7-63172;fs-qe case:/nfs-utils/rpcbind/common tag:nfs-utils,tier1,regression;/nfs-utils/rpcbind/common tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63172
1508;RHEL7-63173;fs-qe case:/nfs-utils/rpcbind/warm_start tag:nfs-utils,tier1,regression;/nfs-utils/rpcbind/warm_start tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63173
1509;RHEL7-63195;[virtual network] check net function for 'open' network - bug 846810;"forward mode=open
bridge device created/destroyed, dnsmasq run as needed(dhcp,dns), but no iptables rules";Yalan Zhang (yalzhang);Medium;Positive;Automated;;1;"check no iptables created 
 1. define and start a network with forward mode='open' 
 # cat open.xml 
 <network>
   <name>open</name>
   <uuid>81ff0d90-c91e-6742-64da-4a736edb9a9b</uuid>
   <bridge name=""virbr8""/>
   <mac address='12:34:56:78:9A:BC'/>
   <forward mode=""open""/>
   <ip address=""192.168.200.1"" netmask=""255.255.255.0"">
   <dhcp>
       <range start='192.168.200.2' end='192.168.200.254'/>
     </dhcp>
   </ip>
  <ip family='ipv6' address='2001:db8:ca2:2::1' prefix='64'>
     <dhcp>
       <range start='2001:db8:ca2:2::10' end='2001:db8:ca2:2::ff'/>
     </dhcp>
   </ip>
 </network>
 # virsh net-define open.xml
 Network open defined from open.xml
 # virsh net-start open
 Network open started
​​";" The network can be defined and started
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-63195
1509;;;;;;;;;2;"2. after the network started, check no libvirt added rules for this network
 # iptables -L -nv | grep virbr8   =====> virbr8 is the bridge which the network connected.";no output;;RedHatEnterpriseLinux7/RHEL7-63195
1509;;;;;;;;;3;"3. # service libvirtd restart
 # iptables -L -nv | grep virbr8 ====> check again
​​";"no forward rules added 
​​";;RedHatEnterpriseLinux7/RHEL7-63195
1509;;;;;;;;;4;"4. check the dnsmasq process
 # ps -aux | grep dnsmasq
​​";"nobody   18261  0.0  0.0  15544   876 ?        S    15:25   0:00 /sbin/dnsmasq --conf-file=/var/lib/libvirt/dnsmasq/open.conf --leasefile-ro --dhcp-script=/usr/libexec/libvirt_leaseshelper
 root     18591  0.0  0.0 112652   956 pts/3    S+   15:35   0:00 grep --color=auto dnsmasq";;RedHatEnterpriseLinux7/RHEL7-63195
1509;;;;;;;;;5;"5. # cat /var/lib/libvirt/dnsmasq/open.conf
​​";"##WARNING:  THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE
 ##OVERWRITTEN AND LOST.  Changes to this configuration should be made using:
 ##    virsh net-edit open
 ## or other application using the libvirt API.
 ##
 ## dnsmasq conf file created by libvirt
 strict-order
 pid-file=/var/run/libvirt/network/open.pid
 except-interface=lo
 bind-dynamic
 interface=virbr8
 dhcp-range=192.168.200.2,192.168.200.254
 dhcp-no-override
 dhcp-range=2001:db8:ca2:2::10,2001:db8:ca2:2::ff,64
 dhcp-lease-max=493
 dhcp-hostsfile=/var/lib/libvirt/dnsmasq/open.hostsfile
 addn-hosts=/var/lib/libvirt/dnsmasq/open.addnhosts
 enable-ra";;RedHatEnterpriseLinux7/RHEL7-63195
1509;;;;;;;;;6;below steps are optional;​​;;RedHatEnterpriseLinux7/RHEL7-63195
1509;;;;;;;;;7;"5. start a guest connected to this network
 Note: dhcp only works when the firewalld service is inactive on the host
 on the host
 # systemctl stop firewalld.service
 # systemctl status firewalld.service
 ● firewalld.service - firewalld - dynamic firewall daemon
    Loaded: loaded (/usr/lib/systemd/system/firewalld.service; enabled; vendor preset: enabled)
    Active: inactive (dead) since Wed 2016-09-28 11:01:29 CST; 28s ago
 .....
 on the guest 
 # dhclient  
 # dhclient -6
 # ifconfig
 ens3: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 192.168.200.213  netmask 255.255.255.0  broadcast 192.168.200.255
         inet6 2001:db8:ca2:2::a3  prefixlen 64  scopeid 0x0<global>
         inet6 fe80::5054:ff:fef6:14f3  prefixlen 64  scopeid 0x20<link>
         ether 52:54:00:f6:14:f3  txqueuelen 1000  (Ethernet)
         RX packets 12  bytes 1636 (1.5 KiB)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 28  bytes 3824 (3.7 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
 # ping 192.168.200.1
 PING 192.168.200.1 (192.168.200.1) 56(84) bytes of data.
 64 bytes from 192.168.200.1: icmp_seq=1 ttl=64 time=0.296 ms
 64 bytes from 192.168.200.1: icmp_seq=2 ttl=64 time=0.267 ms
 
 --- 192.168.200.1 ping statistics ---
 2 packets transmitted, 2 received, 0% packet loss, time 1001ms
 rtt min/avg/max/mdev = 0.267/0.281/0.296/0.022 ms
 # ping6 2001:db8:ca2:2::1
 PING 2001:db8:ca2:2::1(2001:db8:ca2:2::1) 56 data bytes
 64 bytes from 2001:db8:ca2:2::1: icmp_seq=1 ttl=64 time=0.483 ms
 64 bytes from 2001:db8:ca2:2::1: icmp_seq=2 ttl=64 time=0.239 ms
 
 # ping www.baidu.com
 
​​";"1. the guest can obtain a dhcp ip both ipv4 and ipv6
 2. can ping the virbr8 by ipv6 and ipv4
​​";;RedHatEnterpriseLinux7/RHEL7-63195
1509;;;;;;;;;8;"check the dns service works well
 6. on the guest
 # nslookup www.baidu.com
 Server:        192.168.200.1
 Address:    192.168.200.1#53
 
 Non-authoritative answer:
 www.baidu.com    canonical name = www.a.shifen.com.
 Name:    www.a.shifen.com
 Address: 119.75.213.51
 Name:    www.a.shifen.com
 Address: 119.75.213.50
 # nslookup www.google.com
 Server:        192.168.200.1
 Address:    192.168.200.1#53
 
 Non-authoritative answer:
 Name:    www.google.com
 Address: 74.125.200.99
 Name:    www.google.com
 Address: 74.125.200.105
 Name:    www.google.com
 Address: 74.125.200.104
 Name:    www.google.com
 Address: 74.125.200.106
 Name:    www.google.com
 Address: 74.125.200.147
 Name:    www.google.com
 Address: 74.125.200.103
​​";the dns service works well;;RedHatEnterpriseLinux7/RHEL7-63195
1509;;;;;;;;;9;"7. update the network with dns setting
 # virsh net-update open add dns-txt '<txt name=""example"" value=""example value""/>' --live --config
 Updated network open persistent config and live state
 on the guest,
 # dig -t txt example

 ; <<>> DiG 9.9.4-RedHat-9.9.4-36.el7 <<>> -t txt example
 ;; global options: +cmd
 ;; Got answer:
 ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 64902
 ;; flags: qr aa rd ra ad; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0

 ;; QUESTION SECTION:
 ;example.            IN    TXT

 ;; ANSWER SECTION:
 example.        0    IN    TXT    ""example value""

 ;; Query time: 2 msec
 ;; SERVER: 192.168.200.1#53(192.168.200.1)
 ;; WHEN: Thu Aug 25 17:20:46 CST 2016
 ;; MSG SIZE  rcvd: 51
​​";"can resolve txt record successfully.
​​";;RedHatEnterpriseLinux7/RHEL7-63195
1509;;;;;;;;;10;"8. do save---> restore,
​​";the network on the guest works well as before;;RedHatEnterpriseLinux7/RHEL7-63195
1509;;;;;;;;;11;9. migrate a guest to another host with open type interface,;it will be succeed.;;RedHatEnterpriseLinux7/RHEL7-63195
1510;RHEL7-63196;[virtual network] define a network with forward mode 'open' - bug 846810;basic test for open type network, negative test;Yalan Zhang (yalzhang);Medium;Negative;Automated;;1;"3. without ip
 # cat open1
 <network>
   <name>open</name>
   <forward mode='open'/>
  <bridge name=""virbr2"" stp=""on"" delay=""0"" />
 <mac address='00:16:3E:5D:C7:9E'/>
 </network>
 # virsh net-define open1
";"error: Failed to define network from open1
 error: XML error: open forwarding requested, but no IP address provided for network 'open'";Test Case;RedHatEnterpriseLinux7/RHEL7-63196
1510;;;;;;;;;2;"4. specify a dev, will report error
 # cat open1
 <network>
   <name>open</name>
   <forward mode='open' dev='enp0s25'/>
 <ip address='192.168.200.1' netmask='255.255.255.0'/>
 </network>
 # virsh net-define open1
";"error: Failed to define network from open1
 error: XML error: forward dev not allowed for network 'open' with forward mode='open'";;RedHatEnterpriseLinux7/RHEL7-63196
1511;RHEL7-63255;WALA-TC: [func] waagent register-service;WALA-TC: [func] waagent register-service;Yuxin Sun (yuxisun);Medium;Positive;Automated;;1;"Prepare a VM on Azure
 1. Stop waagent service and unregister.
 RHEL-7:
 # systemctl stop waagent
 # systemctl disable waagent
 RHEL-6:
 # service waagent stop
 # chkconfig --del waagent
";"# ps aux|grep waagent
 No waagent -daemon process
 RHEL-7:
 # systemctl status waagent
  Loaded: loaded (/usr/lib/systemd/system/waagent.service; disabled; vendor preset: disabled)
 RHEL-6:
 # chkconfig --list waagent
 service waagent supports chkconfig, but is not referenced in any runlevel (run 'chkconfig --add waagent')
";Test Case;RedHatEnterpriseLinux7/RHEL7-63255
1511;;;;;;;;;2;"2. waagent register-service
";"# waagent register-service
 Register WALinuxAgent service
 Stop WALinuxAgent service
 Start WALinuxAgent service";;RedHatEnterpriseLinux7/RHEL7-63255
1511;;;;;;;;;3;"3. Check service
 # ps aux|grep waagent
 RHEL-7:
 # systemctl status waagent
 RHEL-6:
 # chkconfig --list waagent
";"RHEL-7:
  Loaded: loaded (/usr/lib/systemd/system/waagent.service; enabled; vendor preset: disabled)
 RHEL-6:
 # chkconfig --list waagent
 waagent            0:off    1:off    2:on    3:on    4:on    5:on    6:off";;RedHatEnterpriseLinux7/RHEL7-63255
1511;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-63255
1512;RHEL7-63367;Define&start guest with all the perf attribute  in guest xml - on a host that supports Intel MBM and CMT;;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Scenario 1： define&start a guest with all perf events enabled in xml
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-63367
1512;;;;;;;;;2;"# cat rhel7.2.xml | grep perf
   <perf>
     <event name='cmt' enabled='yes'/>
     <event name='mbmt' enabled='yes'/>
     <event name='mbml' enabled='yes'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-63367
1512;;;;;;;;;3;"# virsh define rhel7.2.xml
 
 # virsh dumpxml rhel7.2
   <perf>
     <event name='cmt' enabled='yes'/>
     <event name='mbmt' enabled='yes'/>
     <event name='mbml' enabled='yes'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-63367
1512;;;;;;;;;4;# virsh start rhel7.2;​​;;RedHatEnterpriseLinux7/RHEL7-63367
1512;;;;;;;;;5;"# virsh perf rhel7.2
 cmt            : enabled
 mbmt           : enabled
 mbml           : enabled";"The perf events are enabled
​​";;RedHatEnterpriseLinux7/RHEL7-63367
1512;;;;;;;;;6;"# virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'
   perf.cmt=xxxxxx
   perf.mbmt=xxxxxx
   perf.mbml=xxxxxx";​​;;RedHatEnterpriseLinux7/RHEL7-63367
1512;;;;;;;;;7;" Scenario 2: define&start a guest with some perf events enabled and some perf events disabled in xml
​​";​​;;RedHatEnterpriseLinux7/RHEL7-63367
1512;;;;;;;;;8;" # cat rhel7.2.xml | grep perf
   <perf>
     <event name='cmt' enabled='yes'/>
     <event name='mbmt' enabled='no'/>
     <event name='mbml' enabled='yes'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-63367
1512;;;;;;;;;9;"# virsh define rhel7.2.xml
 
 # virsh dumpxml rhel7.2
   <perf>
     <event name='cmt' enabled='yes'/>
     <event name='mbmt' enabled='no'/>
     <event name='mbml' enabled='yes'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-63367
1512;;;;;;;;;10;"# virsh perf rhel7.2
 cmt            : enabled
 mbmt           : disabled
 mbml           : enabled";cmt and mbml are enabled, mbmt is disabled.;;RedHatEnterpriseLinux7/RHEL7-63367
1512;;;;;;;;;11;"# virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'
   perf.cmt=xxxxxx
   perf.mbml=xxxxx
​​";"only get statistic of cmt and mbml
​​";;RedHatEnterpriseLinux7/RHEL7-63367
1512;;;;;;;;;12;Scenario 3: define&start a guest with all perf events disabled in xml;​​;;RedHatEnterpriseLinux7/RHEL7-63367
1512;;;;;;;;;13;"# cat rhel7.2.xml | grep perf
   <perf>
     <event name='cmt' enabled='no'/>
     <event name='mbmt' enabled='no'/>
     <event name='mbml' enabled='no'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-63367
1512;;;;;;;;;14;"# virsh define rhel7.2.xml
 
 # virsh dumpxml rhel7.2
   <perf>
     <event name='cmt' enabled='no'/>
     <event name='mbmt' enabled='no'/>
     <event name='mbml' enabled='no'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-63367
1512;;;;;;;;;15;"# virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-63367
1512;;;;;;;;;16;"# virsh perf rhel7.2
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled";​​;;RedHatEnterpriseLinux7/RHEL7-63367
1512;;;;;;;;;17;"# virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'";​​;;RedHatEnterpriseLinux7/RHEL7-63367
1513;RHEL7-63370;Define&start guest with cmt event in guest xml - on a host that supports Intel CMT;;Fangge Jin (fjin);Medium;Positive;Not Automated;;1; Scenario 1: define&start a guest with perf element emt enabled in xml; ;Test Case;RedHatEnterpriseLinux7/RHEL7-63370
1513;;;;;;;;;2;"# cat rhel7.2.xml | grep perf
   <perf>
     <event name='cmt' enabled='yes'/>
   </perf>
 
 # virsh define rhel7.2.xml
​​";​​;;RedHatEnterpriseLinux7/RHEL7-63370
1513;;;;;;;;;3;"# virsh dumpxml rhel7.2
   <perf>
     <event name='cmt' enabled='yes'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-63370
1513;;;;;;;;;4;# virsh start rhel7.2;​​;;RedHatEnterpriseLinux7/RHEL7-63370
1513;;;;;;;;;5;"# virsh perf rhel7.2
 cmt            : enabled";​​;;RedHatEnterpriseLinux7/RHEL7-63370
1513;;;;;;;;;6;"# virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'
   perf.cmt=xxxxxx";​​;;RedHatEnterpriseLinux7/RHEL7-63370
1513;;;;;;;;;7;Scenario 2: define&start a guest with perf element emt disabled in xml;​​;;RedHatEnterpriseLinux7/RHEL7-63370
1513;;;;;;;;;8;"# cat rhel7.2.xml | grep perf
   <perf>
     <event name='cmt' enabled='no'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-63370
1513;;;;;;;;;9;# virsh define rhel7.2.xml;​​;;RedHatEnterpriseLinux7/RHEL7-63370
1513;;;;;;;;;10;"# virsh dumpxml rhel7.2
   <perf>
     <event name='cmt' enabled='no'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-63370
1513;;;;;;;;;11;# virsh start rhel7.2;​​;;RedHatEnterpriseLinux7/RHEL7-63370
1513;;;;;;;;;12;"# virsh perf rhel7.2
 cmt            : disabled";​​;;RedHatEnterpriseLinux7/RHEL7-63370
1513;;;;;;;;;13;"# virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'
 cmt:              : disabled
 mbmt           : disabled
 mbml           : disabled";cmt is disabled;;RedHatEnterpriseLinux7/RHEL7-63370
1514;RHEL7-63371;Define&start guest with mbmt/mbml event in guest xml - on a host that supports Intel MBM;;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Scenario 1： define&start a guest with mbmt event enabled in xml
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-63371
1514;;;;;;;;;2;"# cat rhel7.2.xml | grep perf
   <perf>
     <event name='mbmt' enabled='yes'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-63371
1514;;;;;;;;;3;"# virsh define rhel7.2.xml
 
 # virsh dumpxml rhel7.2
   <perf>
     <event name='mbmt' enabled='yes'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-63371
1514;;;;;;;;;4;# virsh start rhel7.2;​​;;RedHatEnterpriseLinux7/RHEL7-63371
1514;;;;;;;;;5;"# virsh perf rhel7.2
 cmt            : disabled
 mbmt           : enabled
 mbml           : disabled";"only mbmt is enabled
​​";;RedHatEnterpriseLinux7/RHEL7-63371
1514;;;;;;;;;6;"# virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'
   perf.mbmt=xxxxxx";​​;;RedHatEnterpriseLinux7/RHEL7-63371
1514;;;;;;;;;7;Scenario 2： define&start a guest with mbmt event disabled in xml;​​;;RedHatEnterpriseLinux7/RHEL7-63371
1514;;;;;;;;;8;"# cat rhel7.2.xml | grep perf
   <perf>
     <event name='mbmt' enabled='no'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-63371
1514;;;;;;;;;9;"# virsh define rhel7.2.xml
 
 # virsh dumpxml rhel7.2
   <perf>
     <event name='mbmt' enabled='no'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-63371
1514;;;;;;;;;10;# virsh start rhel7.2;​​;;RedHatEnterpriseLinux7/RHEL7-63371
1514;;;;;;;;;11;"# virsh perf rhel7.2
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled";​​;;RedHatEnterpriseLinux7/RHEL7-63371
1514;;;;;;;;;12;"# virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'";"no event statistics output
​​";;RedHatEnterpriseLinux7/RHEL7-63371
1514;;;;;;;;;13;"Scenario 3: replace mbmt with mbml in scenario 1 and test again
​​";​​;;RedHatEnterpriseLinux7/RHEL7-63371
1514;;;;;;;;;14;"Scenario 4: replace mbmt with mbml in scenario 2 and test again
​​";​​;;RedHatEnterpriseLinux7/RHEL7-63371
1515;RHEL7-63414;"fs-qe case:/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";"/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-63414
1516;RHEL7-63519;[emulatorpin] emulatorpin to non-exists cpu (negtive test) - bug 1366484 1316384;[CPU Management] som negative scenarios for cputune - bug 1366484 1316384;Yalan Zhang (yalzhang);Medium;Negative;Not Automated;;1;"preapre a guest with below setting
   <vcpu placement='static' cpuset='2' current='1'>4</vcpu>
 
 # virsh start rhel
 Domain rhel started
 
 # virsh emulatorpin rhel 
 emulator: CPU Affinity
 ----------------------------------
        *: 2";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-63519
1516;;;;;;;;;2;"1. suppose your host has 4 physical cpu
 # virsh emulatorpin rhel 5
 # virsh emulatorpin rhel 5 --config";error: CPU 5 in cpulist '5' exceed the maxcpu 4;;RedHatEnterpriseLinux7/RHEL7-63519
1516;;;;;;;;;3;"2. # virsh destroy rhel
 Domain rhel destroyed
 
 # virsh edit rhel
 ...
  <vcpu placement='static' cpuset='2' current='1'>4</vcpu>
   <cputune>
     <emulatorpin cpuset='8'/>
   </cputune>
 ...";​​;;RedHatEnterpriseLinux7/RHEL7-63519
1516;;;;;;;;;4;# virsh start rhel;"error: Failed to start domain rhel
 error: Unable to write to '/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d6\x2drhel.scope/emulator/cpuset.cpus': Numerical result out of range";;RedHatEnterpriseLinux7/RHEL7-63519
1517;RHEL7-63554;[virtio-win][viostor] Live migration from dataplane=on to dataplane=off;[virtio-win][viostor] Live migration from dataplane=on to dataplane=off;Yu Wang (wyu);Medium;Positive;Not Automated;;1;"1.start VM with dataplane (both system disk and data disk):
 CLI:
 -object iothread,id=thread0 -drive file=win.raw,if=none,id=drive-virtio-disk1,format=raw,serial=mike_cao1,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk1,id=virtio-disk1
 -drive file=test.raw,if=none,id=drive-virtio-disk0,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk0,id=virtio-disk0";1.Guest can be started successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-63554
1517;;;;;;;;;2;" 2.check whether viostor.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled viostor.sys verifier:
    #verifier.exe /standard /driver viostor.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings  
​​";"2. All the Standards flags are checked ,the verified driver fields shows ""viostor.sys"" 
​​";;RedHatEnterpriseLinux7/RHEL7-63554
1517;;;;;;;;;3;"3.boot up dst guest with “-incoming tcp:0:5888” (w/o dataplane):
 CLI:
 -drive file=win.raw,if=none,id=drive-virtio-disk1,format=raw,serial=mike_cao1,cache=none -device virtio-blk-pci,scsi=off,bus=pci.0,drive=drive-virtio-disk1,id=virtio-disk1
 -drive file=test.raw,if=none,id=drive-virtio-disk0,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,scsi=off,bus=pci.0,drive=drive-virtio-disk0,id=virtio-disk0 -incoming tcp:0:5888";3.listenning port start successfully;;RedHatEnterpriseLinux7/RHEL7-63554
1517;;;;;;;;;4;"4.do live migration:
     #telnet source_HostIP tcp_port
    {""execute"": ""qmp_capabilities""}
    {""execute"": ""migrate"",""arguments"":{""uri"": ""tcp:0:5888""}}
​​";"4.live migration successfully
 {""QMP"": {""version"": {""qemu"": {""micro"": 0, ""minor"": 8, ""major"": 2}, ""package"": ""(qemu-kvm-rhev-2.8.0-3.el7)""}, ""capabilities"": []}}
 {""return"": {}}";;RedHatEnterpriseLinux7/RHEL7-63554
1517;;;;;;;;;5;"6. check migration status until it is finished.
 {""execute"":""query-migrate""}";"6.{""return"": {""status"": ""completed"", ""downtime"": 784, ""total-time"": 39211,
 ""ram"": {""total"": 4312203264, ""remaining"": 311296, ""transferred"": 1338822235}}}";;RedHatEnterpriseLinux7/RHEL7-63554
1517;;;;;;;;;6;7.run crystal benchmark on system/data disk(default params );7. run without error;;RedHatEnterpriseLinux7/RHEL7-63554
1517;;;;;;;;;7;"8.reboot guest
  {""execute"":""system_reset""}";"8. reboot successfully
​​";;RedHatEnterpriseLinux7/RHEL7-63554
1518;RHEL7-63611;[xml validation] [negative] Validate guest xml file with invalid gl elements;Validate guest xml file with invalid gl elements;Fangge Jin (fjin);Low;Negative;Manual Only;;1;"gl enable='aaa' (invalid value)
 
 # cat /tmp/rhel7.2.xml
 ...
     <graphics type='spice' autoport='no'>
       <gl enable='aaa'/>
     </graphics>
 ...
 
 # virt-xml-validate /tmp/rhel7.2.xml 
 
 
 Note: Please make sure xml validation can succeed without the graphics element 
​​";"Validation fails.
 
 Output:
 Relax-NG validity error : Extra element devices in interleave
 /tmp/rhel7.2.xml:32: element devices: Relax-NG validity error : Element domain failed to validate content
 /tmp/rhel7.2.xml fails to validate";Test Case;RedHatEnterpriseLinux7/RHEL7-63611
1518;;;;;;;;;2;"No gl->enable attribute
 
 # cat /tmp/rhel7.2.xml
 ...
     <graphics type='spice' autoport='no'>
       <gl/>
     </graphics>
 ...
 
 # virt-xml-validate /tmp/rhel7.2.xml 
 
 Note: Please make sure xml validation can succeed without the graphics element 
​​";"Validation fails.
 
 Output:
 Relax-NG validity error : Extra element devices in interleave
 /tmp/rhel7.2.xml:32: element devices: Relax-NG validity error : Element domain failed to validate content
 /tmp/rhel7.2.xml fails to validate";;RedHatEnterpriseLinux7/RHEL7-63611
1519;RHEL7-63846;"[domstate] [--reason] Check guest's domstate reason after guest core dumped by ""virsh dump""";The domain states after dump are different when the dump types are different;Fangge Jin (fjin);Medium;Positive;Automated;;1;" 10:#virsh dump --live demo /tmp/dump
 #virsh domstate --reason demo";" 10:during dump: Domain test.img dumped to /tmp/dump
 after dump: running (unpaused)";Test Case;RedHatEnterpriseLinux7/RHEL7-63846
1519;;;;;;;;;2;"11:#virsh dump --crash demo /tmp/dump
 #virsh domstate --reason demo";"11:during dump: Domain test.img dumped to /tmp/dump
 after dump: shut off (crashed)";;RedHatEnterpriseLinux7/RHEL7-63846
1519;;;;;;;;;3;"12:rename the guest image file(to make guest fail to start),and run
 #virsh start demo
 
 #virsh domstate --reason demo";12:shut off (failed);;RedHatEnterpriseLinux7/RHEL7-63846
1520;RHEL7-64395;fs-qe case:/nfs-utils/Regression/bz1330045-getcwd-fails-on-mounted-nfsv3 tag:nfs-utils,tier1,regression;/nfs-utils/Regression/bz1330045-getcwd-fails-on-mounted-nfsv3 tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-64395
1521;RHEL7-64397;"fs-qe case:/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";"/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-64397
1522;RHEL7-64408;IDM-SSSD-TC: ldap_provider: cache_performance: Verify the existence Of Timestamp Cache;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;1;"Verify the existence of file /var/lib/sss/db/timestamps_domain.ldb
 # ls /var/lib/sss/db
​​"; File should exist;Test Case;RedHatEnterpriseLinux7/RHEL7-64408
1523;RHEL7-64409;IDM-SSSD-TC: ldap_provider: cache_performance: Verify ldb cache updates on user lookup;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;1;" Run a user lookup
 # getent passwd testuser";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64409
1523;;;;;;;;;2;"Run ldbsearch on cache_domain.ldb and timestamps_domain.ldb to verify the timestamp updates.
 # ldbsearch -H /var/lib/sss/db/cache_LDAP.ldb
 # ldbsearch -H /var/lib/sss/db/timestamps_LDAP.ldb";Cache files should get updated.;;RedHatEnterpriseLinux7/RHEL7-64409
1524;RHEL7-64410;IDM-SSSD-TC: ldap_provider: cache_performance: Expire user entries in cache and verify the updates;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;1;" Run sss_cache to expire the user records
 # sss_cache -E";" 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-64410
1524;;;;;;;;;2;"Run ldbsearch on cache_domain.ldb and timestamps_domain.ldb to verify the timestamp updates.
 # ldbsearch -H /var/lib/sss/db/cache_LDAP.ldb
 # ldbsearch -H /var/lib/sss/db/timestamps_LDAP.ldb";Cache record attribute dataExpireTimestamp should be set to 1 on both ldb caches.;;RedHatEnterpriseLinux7/RHEL7-64410
1525;RHEL7-64411;IDM-SSSD-TC: ldap_provider: cache_performance: Refresh user entries after expiry and verify the cache updates;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;1; Run a user lookup, after expiring the record.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64411
1525;;;;;;;;;2;Run ldbsearch on cache_domain.ldb and timestamps_domain.ldb to verify the timestamp updates.;"On cache_domain.ldb : dataExpireTimestamp set to 1.
 On timestamps_domain.ldb: dataExpireTimestamp set to a different value.";;RedHatEnterpriseLinux7/RHEL7-64411
1526;RHEL7-64412; IDM-SSSD-TC: ldap_provider: cache_performance: Expire entries in cache and run user auth;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;1;" After expiring the record, execute user login and logout.
 # sss_cache -E
 # ssh -l testuser localhost";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64412
1526;;;;;;;;;2;Run ldbsearch on cache_domain.ldb and timestamps_domain.ldb to verify the timestamp updates.;"On cache_domain.ldb : dataExpireTimestamp set to 1.
 On timestamps_domain.ldb: dataExpireTimestamp set to a different value.";;RedHatEnterpriseLinux7/RHEL7-64412
1527;RHEL7-64414;IDM-SSSD-TC: ldap_provider: cache_performance: Set refresh expired interval to 40 and verify user record updates;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;1; Set entry_cache_timeout = 160 & refresh_expired_interval =40 in sssd.conf;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64414
1527;;;;;;;;;2;Clean cache and restart sssd service.;​​;;RedHatEnterpriseLinux7/RHEL7-64414
1527;;;;;;;;;3;Run a user lookup and expire the cache entries;​​;;RedHatEnterpriseLinux7/RHEL7-64414
1527;;;;;;;;;4;Wait for 40 seconds and run ldbsearch on cache_domain.ldb & timestamps_domain.ldb to verify the timestamp updates.;"On cache_domain.ldb : dataExpireTimestamp set to 1.
 On timestamps_domain.ldb: dataExpireTimestamp set to a different value.";;RedHatEnterpriseLinux7/RHEL7-64414
1528;RHEL7-64416;IDM-SSSD-TC: ldap_provider: cache_performance: Set use fully qualified names to true and verify cache updates;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;1; Set use_fully_qualified_names = true in sssd.conf;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64416
1528;;;;;;;;;2;Clean cache and restart sssd service.;​​;;RedHatEnterpriseLinux7/RHEL7-64416
1528;;;;;;;;;3;"Run a user lookup.
 # getent passwd testuser@LDAP";​​;;RedHatEnterpriseLinux7/RHEL7-64416
1528;;;;;;;;;4;Run ldbsearch on cache_domain.ldb & timestamps_domain.ldb to verify the updates.;Both the caches to be updated with user entry.;;RedHatEnterpriseLinux7/RHEL7-64416
1529;RHEL7-64417;IDM-SSSD-TC: ldap_provider: cache_performance: Set case sensitive to false and verify cache updates;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;1; Set case_sensitive = false in sssd.conf;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64417
1529;;;;;;;;;2;Clean cache and restart sssd service.;​​;;RedHatEnterpriseLinux7/RHEL7-64417
1529;;;;;;;;;3;"Run a user lookup.
 # getent passwd TESTUSER@LDAP";​​;;RedHatEnterpriseLinux7/RHEL7-64417
1529;;;;;;;;;4;Run ldbsearch on cache_domain.ldb & timestamps_domain.ldb to verify the updates.;Both the caches to be updated with user entry.;;RedHatEnterpriseLinux7/RHEL7-64417
1530;RHEL7-64418;IDM-SSSD-TC: ldap_provider: cache_performance: Verify ldb cache updates on group lookup;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;1;Create a group with name : “Group R A”;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64418
1530;;;;;;;;;2;"Run a group lookup 
 #getent group ""Group R A""";​​;;RedHatEnterpriseLinux7/RHEL7-64418
1530;;;;;;;;;3;Run ldbsearch on cache_domain.ldb and timestamps_domain.ldb to verify the timestamp updates.;Both the caches to be updated with group entry;;RedHatEnterpriseLinux7/RHEL7-64418
1531;RHEL7-64419;IDM-SSSD-TC: ldap_provider: cache_performance: Expire group record in cache and verify the updates;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;1; Run sss_cache -E to expire the group records;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64419
1531;;;;;;;;;2;Run ldbsearch on cache_domain.ldb and timestamps_domain.ldb to verify the timestamp updates;"On cache_domain.ldb : dataExpireTimestamp set to 1.
 On timestamps_domain.ldb: dataExpireTimestamp set to 1.";;RedHatEnterpriseLinux7/RHEL7-64419
1532;RHEL7-64420;IDM-SSSD-TC: ldap_provider: cache_performance: Refresh group record after expiry and verify the cache updates;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;1;" Run a group lookup, after expiring the record.
 # sss_cache -E
 # getent group ""Group R A""";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64420
1532;;;;;;;;;2;Run ldbsearch on cache_domain.ldb and timestamps_domain.ldb to verify the timestamp updates.;"On cache_domain.ldb : dataExpireTimestamp set to 1.
 On timestamps_domain.ldb: dataExpireTimestamp set to a value, say 1473110975 
​​";;RedHatEnterpriseLinux7/RHEL7-64420
1533;RHEL7-64422;IDM-SSSD-TC: ldap_provider: cache_performance: Set refresh expired interval to 40 and verify Group record updates;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;1;Set entry_cache_timeout = 160 & refresh_expired_interval =40 in sssd.conf;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64422
1533;;;;;;;;;2;Clean cache and restart sssd service.;​​;;RedHatEnterpriseLinux7/RHEL7-64422
1533;;;;;;;;;3;Run a group lookup and expire the cache entries.;​​;;RedHatEnterpriseLinux7/RHEL7-64422
1533;;;;;;;;;4;Wait for 40 seconds and run ldbsearch on cache_domain.ldb & timestamps_domain.ldb to verify the timestamp updates.;"On cache_domain.ldb : dataExpireTimestamp set to 1.
 On timestamps_domain.ldb: dataExpireTimestamp set to a different value.";;RedHatEnterpriseLinux7/RHEL7-64422
1534;RHEL7-64423;IDM-SSSD-TC: ldap_provider: cache_performance: Delete an existing user and verify cache updates;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;1;Set refresh_expired_interval = 40 in sssd.conf;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64423
1534;;;;;;;;;2;Clean cache and restart sssd service;​​;;RedHatEnterpriseLinux7/RHEL7-64423
1534;;;;;;;;;3;Run a user lookup to cache the user;​​;;RedHatEnterpriseLinux7/RHEL7-64423
1534;;;;;;;;;4;Delete the user from ldap server.;​​;;RedHatEnterpriseLinux7/RHEL7-64423
1534;;;;;;;;;5;Wait for 40 seconds and run ldbsearch on cache_domain.ldb & timestamps_domain.ldb to verify the timestamp updates.;"On cache_domain.ldb: User does not exist, as expected.
 On timestamps_domain.ldb: User does not exist, as expected.";;RedHatEnterpriseLinux7/RHEL7-64423
1535;RHEL7-64424;IDM-SSSD-TC: ldap_provider: cache_performance: Modify user attribute and verify cache updates;Cache performance RFE test.;Amith Kumar Peethambaran (apeetham);High;Positive;Automated;;1;Set refresh_expired_interval = 40 in sssd.conf;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64424
1535;;;;;;;;;2;Clean cache and restart sssd service.;​​;;RedHatEnterpriseLinux7/RHEL7-64424
1535;;;;;;;;;3;Run a user lookup to cache the user.;​​;;RedHatEnterpriseLinux7/RHEL7-64424
1535;;;;;;;;;4;Change user's home directory in the ldap server.;​​;;RedHatEnterpriseLinux7/RHEL7-64424
1535;;;;;;;;;5;Wait for 40 seconds and run ldbsearch on cache_domain.ldb & timestamps_domain.ldb to verify the timestamp updates.;"On cache_domain.ldb: User home directory updated, as expected.
 On timestamps_domain.ldb: dataExpireTimestamp updated and is in sync with cache_domain.ldb.";;RedHatEnterpriseLinux7/RHEL7-64424
1536;RHEL7-64594;Define&start guest without perf elements in guest xml;Define&start guest without perf elements in guest xml;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"# cat rhel7.2.xml | grep perf
 (no output)
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64594
1536;;;;;;;;;2;"# virsh define rhel7.2.xml
 
 # virsh dumpxml rhel7.2 | grep perf
 (no output)
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-64594
1536;;;;;;;;;3;"# virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64594
1536;;;;;;;;;4;"# virsh perf rhel7.2
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled";perf events are all disabled by default;;RedHatEnterpriseLinux7/RHEL7-64594
1537;RHEL7-64595;Define&start guest with cmt event in guest xml - on a host that supports Intel CMT;Define&start guest with cmt event in guest xml - on a host that supports Intel CMT;Fangge Jin (fjin);Medium;Positive;Not Automated;;1; Scenario 1: define&start a guest with perf element emt enabled in xml; ;Test Case;RedHatEnterpriseLinux7/RHEL7-64595
1537;;;;;;;;;2;"# cat rhel7.2.xml | grep perf
   <perf>
     <event name='cmt' enabled='yes'/>
   </perf>
 
 # virsh define rhel7.2.xml
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64595
1537;;;;;;;;;3;"# virsh dumpxml rhel7.2
   <perf>
     <event name='cmt' enabled='yes'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-64595
1537;;;;;;;;;4;# virsh start rhel7.2;​​;;RedHatEnterpriseLinux7/RHEL7-64595
1537;;;;;;;;;5;"# virsh perf rhel7.2
 cmt            : enabled";​​;;RedHatEnterpriseLinux7/RHEL7-64595
1537;;;;;;;;;6;"# virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'
   perf.cmt=xxxxxx";​​;;RedHatEnterpriseLinux7/RHEL7-64595
1537;;;;;;;;;7;Scenario 2: define&start a guest with perf element emt disabled in xml;​​;;RedHatEnterpriseLinux7/RHEL7-64595
1537;;;;;;;;;8;"# cat rhel7.2.xml | grep perf
   <perf>
     <event name='cmt' enabled='no'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-64595
1537;;;;;;;;;9;# virsh define rhel7.2.xml;​​;;RedHatEnterpriseLinux7/RHEL7-64595
1537;;;;;;;;;10;"# virsh dumpxml rhel7.2
   <perf>
     <event name='cmt' enabled='no'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-64595
1537;;;;;;;;;11;# virsh start rhel7.2;​​;;RedHatEnterpriseLinux7/RHEL7-64595
1537;;;;;;;;;12;"# virsh perf rhel7.2
 cmt            : disabled";​​;;RedHatEnterpriseLinux7/RHEL7-64595
1537;;;;;;;;;13;"# virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'
 cmt:              : disabled
 mbmt           : disabled
 mbml           : disabled";cmt is disabled;;RedHatEnterpriseLinux7/RHEL7-64595
1538;RHEL7-64596;Define&start guest with mbmt/mbml event in guest xml - on a host that supports Intel MBM;Define&start guest with mbmt/mbml event in guest xml - on a host that supports Intel MBM;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Scenario 1： define&start a guest with mbmt event enabled in xml
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64596
1538;;;;;;;;;2;"# cat rhel7.2.xml | grep perf
   <perf>
     <event name='mbmt' enabled='yes'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-64596
1538;;;;;;;;;3;"# virsh define rhel7.2.xml
 
 # virsh dumpxml rhel7.2
   <perf>
     <event name='mbmt' enabled='yes'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-64596
1538;;;;;;;;;4;# virsh start rhel7.2;​​;;RedHatEnterpriseLinux7/RHEL7-64596
1538;;;;;;;;;5;"# virsh perf rhel7.2
 cmt            : disabled
 mbmt           : enabled
 mbml           : disabled";"only mbmt is enabled
​​";;RedHatEnterpriseLinux7/RHEL7-64596
1538;;;;;;;;;6;"# virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'
   perf.mbmt=xxxxxx";​​;;RedHatEnterpriseLinux7/RHEL7-64596
1538;;;;;;;;;7;Scenario 2： define&start a guest with mbmt event disabled in xml;​​;;RedHatEnterpriseLinux7/RHEL7-64596
1538;;;;;;;;;8;"# cat rhel7.2.xml | grep perf
   <perf>
     <event name='mbmt' enabled='no'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-64596
1538;;;;;;;;;9;"# virsh define rhel7.2.xml
 
 # virsh dumpxml rhel7.2
   <perf>
     <event name='mbmt' enabled='no'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-64596
1538;;;;;;;;;10;# virsh start rhel7.2;​​;;RedHatEnterpriseLinux7/RHEL7-64596
1538;;;;;;;;;11;"# virsh perf rhel7.2
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled";​​;;RedHatEnterpriseLinux7/RHEL7-64596
1538;;;;;;;;;12;"# virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'";"no event statistics output
​​";;RedHatEnterpriseLinux7/RHEL7-64596
1538;;;;;;;;;13;"Scenario 3: replace mbmt with mbml in scenario 1 and test again
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64596
1538;;;;;;;;;14;"Scenario 4: replace mbmt with mbml in scenario 2 and test again
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64596
1539;RHEL7-64597;Define&start guest with all the perf attribute  in guest xml - on a host that supports Intel MBM and CMT;Define&start guest with all the perf attribute in guest xml - on a host that supports Intel MBM and CMT;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Scenario 1： define&start a guest with all perf events enabled in xml
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64597
1539;;;;;;;;;2;"# cat rhel7.2.xml | grep perf
   <perf>
     <event name='cmt' enabled='yes'/>
     <event name='mbmt' enabled='yes'/>
     <event name='mbml' enabled='yes'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-64597
1539;;;;;;;;;3;"# virsh define rhel7.2.xml
 
 # virsh dumpxml rhel7.2
   <perf>
     <event name='cmt' enabled='yes'/>
     <event name='mbmt' enabled='yes'/>
     <event name='mbml' enabled='yes'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-64597
1539;;;;;;;;;4;# virsh start rhel7.2;​​;;RedHatEnterpriseLinux7/RHEL7-64597
1539;;;;;;;;;5;"# virsh perf rhel7.2
 cmt            : enabled
 mbmt           : enabled
 mbml           : enabled";"The perf events are enabled
​​";;RedHatEnterpriseLinux7/RHEL7-64597
1539;;;;;;;;;6;"# virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'
   perf.cmt=xxxxxx
   perf.mbmt=xxxxxx
   perf.mbml=xxxxxx";​​;;RedHatEnterpriseLinux7/RHEL7-64597
1539;;;;;;;;;7;" Scenario 2: define&start a guest with some perf events enabled and some perf events disabled in xml
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64597
1539;;;;;;;;;8;" # cat rhel7.2.xml | grep perf
   <perf>
     <event name='cmt' enabled='yes'/>
     <event name='mbmt' enabled='no'/>
     <event name='mbml' enabled='yes'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-64597
1539;;;;;;;;;9;"# virsh define rhel7.2.xml
 
 # virsh dumpxml rhel7.2
   <perf>
     <event name='cmt' enabled='yes'/>
     <event name='mbmt' enabled='no'/>
     <event name='mbml' enabled='yes'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-64597
1539;;;;;;;;;10;"# virsh perf rhel7.2
 cmt            : enabled
 mbmt           : disabled
 mbml           : enabled";cmt and mbml are enabled, mbmt is disabled.;;RedHatEnterpriseLinux7/RHEL7-64597
1539;;;;;;;;;11;"# virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'
   perf.cmt=xxxxxx
   perf.mbml=xxxxx
​​";"only get statistic of cmt and mbml
​​";;RedHatEnterpriseLinux7/RHEL7-64597
1539;;;;;;;;;12;Scenario 3: define&start a guest with all perf events disabled in xml;​​;;RedHatEnterpriseLinux7/RHEL7-64597
1539;;;;;;;;;13;"# cat rhel7.2.xml | grep perf
   <perf>
     <event name='cmt' enabled='no'/>
     <event name='mbmt' enabled='no'/>
     <event name='mbml' enabled='no'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-64597
1539;;;;;;;;;14;"# virsh define rhel7.2.xml
 
 # virsh dumpxml rhel7.2
   <perf>
     <event name='cmt' enabled='no'/>
     <event name='mbmt' enabled='no'/>
     <event name='mbml' enabled='no'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-64597
1539;;;;;;;;;15;"# virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64597
1539;;;;;;;;;16;"# virsh perf rhel7.2
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled";​​;;RedHatEnterpriseLinux7/RHEL7-64597
1539;;;;;;;;;17;"# virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'";​​;;RedHatEnterpriseLinux7/RHEL7-64597
1540;RHEL7-64598;Define&start guest with perf attribute in guest xml - on a host that doesn't support Intel CMT;"Refer to:
 Bug 1329045 - Guest got killed when restart libvirtd if guest has cmt event enabled but host doesn't support CMT";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"On a host that doesn't support Intel CMT
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-64598
1540;;;;;;;;;2;Scenario 1: define&start a guest with perf element emt enabled in xml;"
​​";;RedHatEnterpriseLinux7/RHEL7-64598
1540;;;;;;;;;3;"# cat rhel7.2.xml | grep perf
   <perf>
     <event name='cmt' enabled='yes'/>
   </perf>";"
​​";;RedHatEnterpriseLinux7/RHEL7-64598
1540;;;;;;;;;4;"# virsh define rhel7.2.xml
 
 # virsh dumpxml rhel7.2
   <perf>
     <event name='cmt' enabled='yes'/>
   </perf>";"
​​";;RedHatEnterpriseLinux7/RHEL7-64598
1540;;;;;;;;;5;# virsh start rhel7.2;"Guest fails to start
 # virsh start rhel7.2
 error: Failed to start domain rhel7.2
 error: Failed to open file '/sys/devices/intel_cqm/type': No such file or directory";;RedHatEnterpriseLinux7/RHEL7-64598
1540;;;;;;;;;6;Scenario 2: define&start a guest with perf element cmt disabled in xml;"
​​";;RedHatEnterpriseLinux7/RHEL7-64598
1540;;;;;;;;;7;"# cat rhel7.2.xml | grep perf
   <perf>
     <event name='cmt' enabled='no'/>
   </perf>";"
​​";;RedHatEnterpriseLinux7/RHEL7-64598
1540;;;;;;;;;8;"# virsh define rhel7.2.xml
 
 # virsh dumpxml rhel7.2
   <perf>
     <event name='cmt' enabled='no'/>
   </perf>";"
​​";;RedHatEnterpriseLinux7/RHEL7-64598
1540;;;;;;;;;9;# virsh start rhel7.2;"# virsh start rhel7.2
 Domain rhel7.2 started
​​";;RedHatEnterpriseLinux7/RHEL7-64598
1540;;;;;;;;;10;"# virsh perf rhel7.2
 cmt            : disabled";"
​​";;RedHatEnterpriseLinux7/RHEL7-64598
1541;RHEL7-64599;Define&start  guest with perf attribute mbmt or mbml in guest xml - on a host that  doesn't support Intel MBM but support intel cmt;"Bug 1360533 - The error message need to improve when enable a perf event on a host which do not support it
 Bug 1372344 - [abrt]BUG: unable to handle kernel NULL pointer dereference at 00000000000001a0[mbml]";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. 
 # virsh dumpxml rhel7.2 | grep /perf -B4   
 <event name='cmt' enabled='no'/>
     <event name='mbmt' enabled='yes'/>
     <event name='mbml' enabled='no'/>
   </perf>
 # virsh start rhel7.2
 error: Failed to start domain rhel7.2
 error: Unable to open perf type=26 for pid=24570: Invalid argument
​​";"guest can not start if the host do not support MBM(but support CMT), check the error mesage
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-64599
1541;;;;;;;;;2;"# virsh perf rhel7.2 --enable cmt --disable mbml,mbmt
 # virsh start rhel7.2
 Domain rhel7.2 started
 # virsh perf rhel7.2 --enable mbml
 error: Unable to enable/disable perf events
 error: Unable to open perf type=26 for pid=24713: Invalid argument";"--enable mbml/mbmt will fail if guest can not support intel MBM, check the error message
​​";;RedHatEnterpriseLinux7/RHEL7-64599
1542;RHEL7-64600;3.2.1[perf] - Get or set the current perf events for a guest.;"need to test these events: cmt, mbml, mbmt and cover the following matrix:
 
get perf events | without option | with --live | with --config | with --current
When guest is shutoff: | P1 | P1 error: Unable to get perf events error: Requested operation is not valid: domain is not running | P2 | P2
When guest is running: | P1 | P2 | P1 | P2
set perf events | without option | with --live | with --config | with --current
when guest is shutoff: | P1 | P2 error: Unable to enable/disable perf events error: Requested operation is not valid: domain is not running | P2 | P2
when guest is running: | P1 | P2 | P1 | P2";Fangge Jin (fjin);Medium;Positive;Automated;;1;"Prepare an inactive guest
 # cat rhel7.2-1030.xml | grep perf
 (nothing output)
 
 # virsh define rhel7.2-1030.xml
 
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  -     rhel7.2-1030                   shut off
 
 # virsh dumpxml rhel7.2-1030|grep perf -a3
 (nothing output)";By default, there is no perf attribute in guest xml.;Test Case;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;2;"1 Get the perf events for an inactive guest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;3;"# virsh perf rhel7.2-1030 
 
 
 # virsh perf rhel7.2-1030 --config
 
 
 # virsh perf rhel7.2-1030 --current
 
 
 
​​";"cmt            : disabled
 mbmt           : disabled
 mbml           : disabled
 cpu_cycles     : disabled
 instructions   : disabled
 cache_references: disabled
 cache_misses   : disabled
 branch_instructions: disabled
 branch_misses  : disabled
 bus_cycles     : disabled
 stalled_cycles_frontend: disabled
 stalled_cycles_backend: disabled
 ref_cpu_cycles : disabled
 cpu_clock      : disabled
 task_clock     : disabled
 page_faults    : disabled
 context_switches: disabled
 cpu_migrations : disabled
 page_faults_min: disabled
 page_faults_maj: disabled
 alignment_faults: disabled
 emulation_faults: disabled
 
 (the output are the same, all the events are disabled)";;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;4;"# virsh perf rhel7.2-1030 --live
​​";"error: Unable to get perf events
 error: Requested operation is not valid: domain is not running";;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;5;"2 Get/set the perf events when guest is running
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;6;# virsh start rhel7.2-1030;​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;7;"# virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'";No statistic of cmt event is output.;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;8;2-1 Get the perf events for an active guest;​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;9;"# virsh perf rhel7.2-1030 
 
 
 # virsh perf rhel7.2-1030 --live
 
 
 # virsh perf rhel7.2-1030 --current
 
 
 # virsh perf rhel7.2-1030 --config
​​";"cmt            : disabled
 mbmt           : disabled
 mbml           : disabled
 cpu_cycles     : disabled
 instructions   : disabled
 cache_references: disabled
 cache_misses   : disabled
 branch_instructions: disabled
 branch_misses  : disabled
 bus_cycles     : disabled
 stalled_cycles_frontend: disabled
 stalled_cycles_backend: disabled
 ref_cpu_cycles : disabled
 cpu_clock      : disabled
 task_clock     : disabled
 page_faults    : disabled
 context_switches: disabled
 cpu_migrations : disabled
 page_faults_min: disabled
 page_faults_maj: disabled
 alignment_faults: disabled
 emulation_faults: disabled
 
 (the output are the same, all events are disabled)
​​";;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;10;"2-2
 enable one event without option
";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;11;1) # virsh perf rhel --enable instructions;​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;12;"2) # virsh domstats rhel --perf
 Domain: 'rhel'
   perf.instructions=10057908
​​";"output the values of perf.instructions
​​";;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;13;"3) # virsh perf rhel7.2-1030 
 
 # virsh perf rhel7.2-1030 --config
​​";"instructions is enabled for active domain, and still disabled for inactive domain config
 
 and all the other event keep disabled
​​";;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;14;"4) # virsh dumpxml rhel7.2-1030
   <perf>
     <event name='instructions' enabled='yes'/>
   </perf>
 
 # virsh dumpxml rhel7.2-1030 --inactive | grep perf
           ===> no output";"the event enabled is yes in active domain xml
 
 no perf setting in inactive domain xml
​​";;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;15;"2-3 disable one  event without option
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;16;"1) # virsh perf rhel --disable cpu_clock
 cpu_clock      : disabled";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;17;"2) # virsh domstats rhel --perf
 Domain: 'rhel'";Don't output the value of perf.cpu_clock;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;18;"3) Check perf events:
 
 # virsh perf rhel
 
 # virsh perf rhel --config
​​";"all events are disabled
​​";;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;19;"4) # virsh dumpxml rhel7.2-1030
   <perf>
     <event name='cpu_clock' enabled='no'/>
   </perf>
 
 
 # virsh dumpxml rhel7.2-1030 --inactive | grep perf
           ===> no output ";"event enabled is no in active domain xml
 
 
 no setting in inactive domain xml";;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;20;"2-4 enable&disable cmt event with --live
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;21;"Redo steps in 2-2 and 2-3 with --live
​​"; same result  as above 'without option';;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;22;"2-5 enable&disable cmt event with --current
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;23;"Redo steps in 2-2 and 2-3 with --current 
​​";same result as above 'without option' when guest is running;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;24;"2-6 enable cmt event persistently with --config
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;25;"1) # virsh perf rhel7.2-1030 --enable instructions --config
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;26;"2) # virsh domstats rhel7.2-1030 --perf
 Domain: 'rhel7.2-1030'";no data for instructions;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;27;"3) Check perf events:
 
 # virsh perf rhel  | grep instructions
 instructions   : disabled
 ...
 
 # virsh perf rhel --config | grep instructions
 instructions   : enabled
 ...";"instructions is enabled for inactive domain config, and disabled for active domain
​​";;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;28;"4) # virsh dumpxml rhel | grep perf
           ===> no output
 
 # virsh dumpxml rhel --inactive | grep /perf -B2
   <perf>
     <event name='instructions' enabled='yes'/>
   </perf>
​​";"instructions  setting is not in the live config(default to disabled)
 instructions enabled is yes in inactive domain xml";;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;29;"2-7 disable one event persistently with --config
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;30;"1)# virsh perf rhel --disable instructions --config
 instructions   : disabled";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;31;"2) # virsh domstats rhel --perf
 Domain: 'rhel'";no data;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;32;"3) Check perf events:
 
 # virsh perf rhel7.2-1030 
 ===> all disabled
 
 # virsh perf rhel7.2-1030 --config
 ===> all disabled";"instructions is disabled for inactive domain config, and disabled for active domain
​​";;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;33;"4) # virsh dumpxml rhel | grep /perf -B2
 ===> no output
 
  # virsh dumpxml rhel --inactive | grep /perf -B2
   <perf>
     <event name='instructions' enabled='no'/>
   </perf>
​​";"the event setting not exist in active domain(default to disabled)
 cmt enabled is no in inactive domain xml";;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;34;2-10 destroy guest&check perf events;​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;35;# virsh destroy rhel7.2-1030;​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;36;"# virsh perf rhel7.2-1030 
 ===> all disabled";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;37;"3 when guest is inactive
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;38;"3-1 enable/disable cmt event persistently without option
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;39;"# virsh perf rhel --enable instructions
 instructions   : enabled";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;40;"# virsh perf rhel 
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled
 cpu_cycles     : disabled
 instructions   : enabled
 .....";"instructions is enabled, all others are disabled
​​";;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;41;"# virsh dumpxml rhel | grep /perf -B2
   <perf>
     <event name='instructions' enabled='yes'/>
   </perf>
​​";"instructions enabled is yes
​​";;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;42;"# virsh perf rhel --disable instructions
 instructions   : disabled";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;43;"# virsh perf rhel 
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled
 cpu_cycles     : disabled
 instructions   : disabled
 ...";instructions is disabled;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;44;"# virsh dumpxml rhel | grep /perf -B2
   <perf>
     <event name='instructions' enabled='no'/>
   </perf>";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;45;"3-2 enable/disable cmt event with --live
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;46;"Check perf events when guest is shutoff:
 # virsh perf rhel7.2-1030 
 ===> all disabled
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;47;"# virsh perf rhel --enable instructions --live
 
​​";"error: Unable to enable/disable perf events
 error: Requested operation is not valid: domain is not running
​​";;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;48;"3-3 enable/disable cmt event with --current
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;49;"Redo the steps in scenario 3-1 with --current
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;50;"3-4 enable/disable cmt event with --config
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;51; Redo the steps in scenario 3-1 with --config;​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;52;"4 readonly mode
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;53;"# virsh -r perf rhel7.2-1030
 cmt            : disabled
 mbmt         :disabled
 mbml         :disabled
 ...
​​";session mode can show the settings, all disabled;;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;54;"# virsh -r perf rhel7.2-1030 --enable cmt
​​";"error: Unable to enable/disable perf events
 error: operation forbidden: read only access prevents virDomainSetPerfEvents";;RedHatEnterpriseLinux7/RHEL7-64600
1542;;;;;;;;;55;"# virsh -r perf rhel7.2-1030 
 cmt            : disabled
 mbmt         :disabled
 mbml         :disabled
 ...";all disabled;;RedHatEnterpriseLinux7/RHEL7-64600
1543;RHEL7-64601;3.2.2[perf] enable&disable multiple perf events in one command;Bug 1346730 - libvirt will enable perf event which user want disable it;Yalan Zhang (yalzhang);Medium;Positive;Automated;;1;1 start guest & check perf event;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64601
1543;;;;;;;;;2;"start guest without perf setting in xml
 # virsh start rhel
 Domain rhel started
 
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-64601
1543;;;;;;;;;3;# virsh perf rhel;"cmt            : disabled
 mbmt           : disabled
 mbml           : disabled
 cpu_cycles     : disabled
 instructions   : disabled
 cache_references: disabled
 cache_misses   : disabled
 branch_instructions: disabled
 branch_misses  : disabled
 bus_cycles     : disabled
 stalled_cycles_frontend: disabled
 stalled_cycles_backend: disabled
 ref_cpu_cycles : disabled
 cpu_clock      : disabled
 task_clock     : disabled
 page_faults    : disabled
 context_switches: disabled
 cpu_migrations : disabled
 page_faults_min: disabled
 page_faults_maj: disabled
 alignment_faults: disabled
 emulation_faults: disabled
​​";;RedHatEnterpriseLinux7/RHEL7-64601
1543;;;;;;;;;4;"# virsh domstats rhel --perf
​​";"Domain: 'rhel'
 
 (no data)";;RedHatEnterpriseLinux7/RHEL7-64601
1543;;;;;;;;;5;2 combine the events;​​;;RedHatEnterpriseLinux7/RHEL7-64601
1543;;;;;;;;;6;"test below matirx:
 cmt enabled | mbml enabled | mbmt enabled
 1. -----Y--------| -----Y--------------|-----Y-------    
 2. -----Y--------|-------Y-------------|------N------
 3.-----Y--------|-------N-------------|------Y------
 4.-----N--------|-------Y-------------|------Y------";"cmt / mbml / mbmt are not supported since rhel7.5, please choose another event to test
 
 and the expected result is that all the disable/ enable event are set as the command, each one should not interfere others";;RedHatEnterpriseLinux7/RHEL7-64601
1543;;;;;;;;;7;"
 take 2 as eaxmple 
 
 # virsh perf rhel7.2
 cmt            : disabled
 mbmt           : disabled
 mbml           : disabled
 
 # virsh perf rhel7.2 --enable cmt,mbml --disable mbmt
 
 # virsh perf rhel7.2
 cmt            : enabled
 mbmt           : disabled
 mbml           : enabled
 
 # virsh domstats rhel7.2 --perf
 Domain: 'rhel7.2'
   perf.cmt=xxx
   perf.mbml=xxx
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64601
1544;RHEL7-64602;3.2.3[perf] [multiple eventSpec] [negative] - Set duplicated perf events in one command;[perf] [multiple eventSpec] [negative] - Set duplicated perf events in one command;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"# virsh perf rhel --enable cpu_cycles,cpu_cycles --disable instructions
 error: Unable to enable/disable perf events
 error: invalid argument: parameter 'cpu_cycles' occurs multiple times

 # virsh perf rhel
 ===> no changes, and all disabled
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64602
1544;;;;;;;;;2;"# virsh perf rhel --enable cpu_cycles --disable instructions,cpu_cycles
 error: Unable to enable/disable perf events
 error: invalid argument: parameter 'cpu_cycles' occurs multiple times
 
 # virsh perf rhel
 ==> no changes, and all disabled";​​;;RedHatEnterpriseLinux7/RHEL7-64602
1545;RHEL7-64603;3.2.4[perf] - Set perf event -  on a host that doesn't support Intel CMT;[perf] - Set perf event - on a host that doesn't support Intel CMT;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;On a host that doesn't support Intel CMT;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64603
1545;;;;;;;;;2;"Scenario 1: enable cmt event for a running guest
";​​;;RedHatEnterpriseLinux7/RHEL7-64603
1545;;;;;;;;;3;"# virsh start rhel7.2
";​​;;RedHatEnterpriseLinux7/RHEL7-64603
1545;;;;;;;;;4;"# virsh perf rhel7.2 --enable cmt
 error: Unable to enable/disable perf events
 error: Failed to open file '/sys/devices/intel_cqm/type': No such file or directory";"enable failed.



";;RedHatEnterpriseLinux7/RHEL7-64603
1545;;;;;;;;;5;"since rhel7.5, cmt/mbml/mbmt are not supported any more
 
 # virsh perf ovmf1 --enable cmt
 error: Unable to enable/disable perf events
 error: argument unsupported: unable to enable host cpu perf event for cmt
 
 
 # virsh perf ovmf1 --enable mbmt
 error: Unable to enable/disable perf events
 error: argument unsupported: unable to enable host cpu perf event for mbmt
 
 
 # virsh perf ovmf1 --enable mbml
 error: Unable to enable/disable perf events
 error: argument unsupported: unable to enable host cpu perf event for mbml
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-64603
1546;RHEL7-64604;Restart libvirtd with perf events cmt/mbmt/mbml enabled for a running domain;Restart libvirtd with perf events cmt/mbmt/mbml enabled for a running domain;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"Start a guest with all perf events enabled:
 
 # virsh start rhel7.2 
 Domain rhel7.2 started
 
 # virsh perf rhel7.2
 cmt            : enabled
 mbmt           : enabled
 mbml           : enabled
 
 # virsh domstats rhel7.2 --perf
 Domain: 'rhel7.2'
   perf.cmt=xxx
   perf.mbmt=xxx
   perf.mbml=xxx
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-64604
1546;;;;;;;;;2;"# service libvirtd restart
 Redirecting to /bin/systemctl restart  libvirtd.service";​​;;RedHatEnterpriseLinux7/RHEL7-64604
1546;;;;;;;;;3;"# virsh perf rhel7.2
 cmt            : enabled
 mbmt           : enabled
 mbml           : enabled
 
 # virsh domstats rhel7.2 --perf
 Domain: 'rhel7.2'
   perf.cmt=xxx
   perf.mbmt=xxx
   perf.mbml=xxx";"guets should not be shutdown and the perf.cmt, perf.mbml and perf.mbmt should be present after libvirtd restart
 
 After restart libvirtd, the statistic will be 0 for a period of time(why?). Need further research on this. 
 Asked developer about this, but he doesn't know either: https://bugzilla.redhat.com/show_bug.cgi?id=1346723#c5 
​​";;RedHatEnterpriseLinux7/RHEL7-64604
1547;RHEL7-64605;3.2.5[perf] [negative] - Invalid arguments;"Bug 1329046 - ""virsh perf $guest --enable '' "" has memory leak.";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"# virsh perf rhel7.2-1030 --enable aaa
​​";"error: Unable to enable/disable perf events
 error: argument unsupported: parameter 'aaa' not supported";Test Case;RedHatEnterpriseLinux7/RHEL7-64605
1547;;;;;;;;;2;"# virsh perf rhel7.2-1030 --enable "" ""
​​";"error: Unable to enable/disable perf events
 error: argument unsupported: parameter ' ' not supported";;RedHatEnterpriseLinux7/RHEL7-64605
1547;;;;;;;;;3;"#  virsh perf rhel7.2-1030 --enable ''
​​";error: Failed to get option 'enable': Option argument is empty;;RedHatEnterpriseLinux7/RHEL7-64605
1547;;;;;;;;;4;"# virsh perf rhel7.2-1030 --enable
​​";error: expected syntax: --enable <string>;;RedHatEnterpriseLinux7/RHEL7-64605
1548;RHEL7-64649;Give more clearly error info when call allocPages and specify a 0 page size --bug 1265114;Give more clearly error info when call allocPages and specify a 0 page size --bug 1265114;Jingjing Shao (jishao);Medium;Negative;Not Automated;;1;"# python
 Python 2.7.5 (default, Jul 21 2016, 10:17:44) 
 [GCC 4.8.5 20150623 (Red Hat 4.8.5-4)] on linux2
 Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
 >>> import libvirt
 >>> conn=libvirt.open()
 >>> conn.allocPages({0:40},0,1)
 libvirt:  error : operation failed: page size 0 is not available on node 0
 Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
  File ""/usr/lib64/python2.7/site-packages/libvirt.py"", line 3665, in allocPages
    if ret == -1: raise libvirtError ('virNodeAllocPages() failed', conn=self)
 libvirt.libvirtError: operation failed: page size 0 is not available on node 0";"Not the error as below:
 libvirt.libvirtError: Failed to read file 
 '/sys/devices/system/node/node0/hugepages/': Is a directory";Test Case;RedHatEnterpriseLinux7/RHEL7-64649
1549;RHEL7-64650;[setvcpus] Check the vcpupin configuration when cold-unplug vcpu with vcpupin config - bug 1316371;Check the vcpupin config when cold-unplug vcpu --bug 1316371;Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;" 1.# virsh dumpxml r7.2 | grep vcpu 
  <vcpu placement='static' cpuset='1-3'>4</vcpu>
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-64650
1549;;;;;;;;;2;"2. #virsh vcpupin r7.2 --config
 VCPU: CPU Affinity
 ----------------------------------
   0: 1-3
   1: 1-3
   2: 1-3
   3: 1-3";​​;;RedHatEnterpriseLinux7/RHEL7-64650
1549;;;;;;;;;3;3. # virsh vcpupin r7.2  3 3 --config;​​;;RedHatEnterpriseLinux7/RHEL7-64650
1549;;;;;;;;;4;"4. # virsh vcpupin  r7.2  --config
 VCPU: CPU Affinity
 ----------------------------------
   0: 1-3
   1: 1-3
   2: 1-3
   3: 3";​​;;RedHatEnterpriseLinux7/RHEL7-64650
1549;;;;;;;;;5;"5. remove cpu 3
 # virsh setvcpus r7.2  3 --config";​​;;RedHatEnterpriseLinux7/RHEL7-64650
1549;;;;;;;;;6;"6. # virsh vcpupin r7.2  --config
​​";"VCPU: CPU Affinity
 ----------------------------------
   0: 1-3
   1: 1-3
   2: 1-3
   3: 3
 (the vcpupin config for cpu 3 which is disable is not removed)";;RedHatEnterpriseLinux7/RHEL7-64650
1550;RHEL7-64651;Check the action which caused libvirtd memleak --bug 1316433;Check the action which caused libvirtd memleak --bug 1316433;Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;" # virsh list 
 Id    Name                           State
----------------------------------------------------
 7     r7.2                           running

start valgrind on another terminal:
# service libvirtd stop
# valgrind --leak-check=full libvirtd

# virsh domstats r7.2  
 Domain: 'r7.2'
  state.state=1
  state.reason=1
  cpu.time=34367393971
  cpu.user=2120000000
  cpu.system=8550000000
  balloon.current=615424
  balloon.maximum=615424
  vcpu.current=3
  vcpu.maximum=4
  vcpu.0.state=1
  vcpu.0.time=13950000000
  vcpu.0.wait=0
  vcpu.1.state=1
  vcpu.1.time=6930000000
  vcpu.1.wait=0
  vcpu.2.state=1
  vcpu.2.time=7810000000
  vcpu.2.wait=0
  net.count=2
  net.0.name=vnet0
  net.0.rx.bytes=166688
  net.0.rx.pkts=3197
  net.0.rx.errs=0
  net.0.rx.drop=0
  net.0.tx.bytes=732
  net.0.tx.pkts=10
  net.0.tx.errs=0
  net.0.tx.drop=0
  net.1.name=vnet1
  net.1.rx.bytes=166688
  net.1.rx.pkts=3197
  net.1.rx.errs=0
  net.1.rx.drop=0
  net.1.tx.bytes=732
  net.1.tx.pkts=10
  net.1.tx.errs=0
  net.1.tx.drop=0
  block.count=2
  block.0.name=vda
  block.0.path=/var/lib/libvirt/images/r7.2.img
  block.0.rd.reqs=6268
  block.0.rd.bytes=147808256
  block.0.rd.times=2594141293
  block.0.wr.reqs=976
  block.0.wr.bytes=10103296
  block.0.wr.times=1503970051
  block.0.fl.reqs=223
  block.0.fl.times=2063729523
  block.0.allocation=1648623616
  block.0.capacity=107374182400
  block.0.physical=1648627712
  block.1.name=hda
  block.1.rd.reqs=4
  block.1.rd.bytes=152
  block.1.rd.times=113308
  block.1.wr.reqs=0
  block.1.wr.bytes=0
  block.1.wr.times=0
  block.1.fl.reqs=0
  block.1.fl.times=0
  block.1.allocation=0


on the terminal which run valgrind
Check the info printed<pre>==4345== Memcheck, a memory error detector
==4345== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.
==4345== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info
==4345== Command: libvirtd
==4345== 
mmap: Invalid argument
==4419== 
==4419== HEAP SUMMARY:
==4419==     in use at exit: 2,960,151 bytes in 21,792 blocks
==4419==   total heap usage: 115,781 allocs, 93,989 frees, 853,914,189 bytes allocated
==4419== 
==4419== 5 bytes in 1 blocks are possibly lost in loss record 106 of 1,979
==4419==    at 0x4C27BE3: malloc (vg_replace_malloc.c:299)
==4419==    by 0x8349889: strdup (strdup.c:42)
==4419==    by 0x60463E4: __trans_list_add (in /usr/lib64/libnl-3.so.200.23.0)
==4419==    by 0x5DDD810: ??? (in /usr/lib64/libnl-route-3.so.200.23.0)
==4419==    by 0x400F1E2: call_init (dl-init.c:82)
==4419==    by 0x400F1E2: _dl_init (dl-init.c:131)
.....";" search the key words ""virDomainListGetStats""
 it should not print the info as below
 
 ==3408== 1,868 bytes in 32 blocks are definitely lost in loss record 840 of 866
==3408==    at 0x4C29BFD: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)
==3408==    by 0x82F5039: strndup (in /usr/lib64/libc-2.17.so)
==3408==    by 0x55096D6: virStrndup (virstring.c:758)
==3408==    by 0x550981E: virStringSplitCount (virstring.c:96)
==3408==    by 0x1E89F5D4: qemuGetSchedInfo (qemu_driver.c:1402)
==3408==    by 0x1E89F5D4: qemuDomainHelperGetVcpus (qemu_driver.c:1564)
==3408==    by 0x1E89FA3D: qemuDomainGetStatsVcpu (qemu_driver.c:18974)
==3408==    by 0x1E884CA0: qemuDomainGetStats (qemu_driver.c:19409)
==3408==    by 0x1E884CA0: qemuConnectGetAllDomainStats (qemu_driver.c:19499)
==3408==    by 0x55BFF55: virDomainListGetStats (libvirt-domain.c:11371)
==3408==    by 0x121B44: remoteDispatchConnectGetAllDomainStats (remote.c:6190)
==3408==    by 0x121B44: remoteDispatchConnectGetAllDomainStatsHelper (remote_dispatch.h:615)
==3408==    by 0x561B1F1: virNetServerProgramDispatchCall (virnetserverprogram.c:437)
==3408==    by 0x561B1F1: virNetServerProgramDispatch (virnetserverprogram.c:307)
==3408==    by 0x561641C: virNetServerProcessMsg (virnetserver.c:135)
==3408==    by 0x561641C: virNetServerHandleJob (virnetserver.c:156)
==3408==    by 0x550EDF4: virThreadPoolWorker (virthreadpool.c:145)Should be like this: definitely lost: 0 bytes in 0 blocks
 ==28680== LEAK SUMMARY:
 ==28680==    definitely lost: 0 bytes in 0 blocks
 ==28680==    indirectly lost: 0 bytes in 0 blocks
 ==28680==      possibly lost: 2,704 bytes in 39 blocks
 ==28680==    still reachable: 3,515,570 bytes in 36,449 blocks
 ==28680==                       of which reachable via heuristic:
 ==28680==                         stdstring          : 3,876 bytes in 131 blocks
 ==28680==         suppressed: 0 bytes in 0 blocks
 ==28680== 
 ==28680== For counts of detected and suppressed errors, rerun with: -v
 ==28680== ERROR SUMMARY: 23 errors from 23 contexts (suppressed: 0 from 0)
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-64651
1551;RHEL7-64702;[nodecpumap] Check the nodecpumap on machine with many cores --bug 1329819 1456793;Check the nodecpumap on machine with many cores --bug 1329819;Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;"# lscpu
Architecture:          x86_64
CPU op-mode(s):        32-bit, 64-bit
Byte Order:            Little Endian
CPU(s):                240
On-line CPU(s) list:   0-239
Thread(s) per core:    2
Core(s) per socket:    15
Socket(s):             8
NUMA node(s):          8
Vendor ID:             GenuineIntel
CPU family:            6
Model:                 62
Model name:            Intel(R) Xeon(R) CPU E7-2890 v2 @ 2.80GHz
Stepping:              7
CPU MHz:               1237.687
BogoMIPS:              5600.56
Virtualization:        VT-x
L1d cache:             32K
L1i cache:             32K
L2 cache:              256K
L3 cache:              38400K
NUMA node0 CPU(s):     0-14,120-134
NUMA node1 CPU(s):     15-29,135-149
NUMA node2 CPU(s):     30-44,150-164
NUMA node3 CPU(s):     45-59,165-179
NUMA node4 CPU(s):     60-74,180-194
NUMA node5 CPU(s):     75-89,195-209
NUMA node6 CPU(s):     90-104,210-224
NUMA node7 CPU(s):     105-119,225-239

# virsh nodecpumap --pretty
CPUs present:   240
CPUs online:    240
CPU map:        0-239
";" as the result at left, check the output format for --pretty
";Test Case;RedHatEnterpriseLinux7/RHEL7-64702
1551;;;;;;;;;2;"2. offline some cpu and nodecpumap can display right cpu struct:

 # echo 0 > /sys/devices/system/cpu/cpu239/online

 # virsh nodecpumap --pretty
 CPUs present:   240
 CPUs online:    239
 CPU map:        0-238

 # virsh nodecpumap
 CPUs present:   240
 CPUs online:    239
 CPU map:        yyyyyyyyyy.......(238y).......-  (238 y + -)
";refer bug 1456793, check the cpu map, the offline cpu display as '-', online cpu display as 'y', and the location should be correct;;RedHatEnterpriseLinux7/RHEL7-64702
1552;RHEL7-64782;[migration] migrate guest with network, direct and bridge type interface with full xml;"click this link then click ""open in document"" to get the overall view RHEL-118434 - Migrate vm with various network interfaces ";Yalan Zhang (yalzhang);Low;Positive;Not Automated;;1;1. prepare and start the network if needed both on src and dst host(the network on src and des should keep the same name, xml refer to the table);​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64782
1552;;;;;;;;;2;"2. prepare and start the vm with the interface xml, (you can dump the interface xml for further use
 # virsh dumpxml rhel | sed -n ""/interface/,/interface/p"" > interface1.xml 
​​"; guest should start successfully;;RedHatEnterpriseLinux7/RHEL7-64782
1552;;;;;;;;;3;"3. check the qemu command line net part(take nat full xml as example)
 # ps aux | grep qemu-kvm";"-netdev tap,fds=27:29:30:31:32,id=hostnet0,
 vhost=on,vhostfds=34:35:36:37:38,
 sndbuf=1600 
 -device virtio-net-pci,
 tx=bh,ioeventfd=on,event_idx=off,
 csum=off,gso=off,host_tso4=off,host_tso6=off,host_ecn=off,host_ufo=off,mrg_rxbuf=off,
 guest_csum=off,guest_tso4=off,guest_tso6=off,guest_ecn=off,guest_ufo=off,
 mq=on,vectors=12,rx_queue_size=1024,tx_queue_size=256,
 host_mtu=9000,netdev=hostnet0,
 id=net0,mac=52:54:00:98:c4:a3,
 bus=pci.0,addr=0x3,
 rombar=1,bootindex=2 ";;RedHatEnterpriseLinux7/RHEL7-64782
1552;;;;;;;;;4;"4. prepare the env and do migration after the guest boot up
 #  virsh migrate rhel qemu+ssh://sriov/system --live --verbose"; migration succeed;;RedHatEnterpriseLinux7/RHEL7-64782
1552;;;;;;;;;5;"5. on the dst host, check the guest's status should be running
 # virsh list"; guest on dst host should be running;;RedHatEnterpriseLinux7/RHEL7-64782
1552;;;;;;;;;6;" 6. on the dst host, check the guest's interface xml and compare with the one before migration
 # virsh dumpxml rhel | grep /interface -B30
 
 (you can dump to a file and compare with the one generated from step 2 by diff)";should be no changes;;RedHatEnterpriseLinux7/RHEL7-64782
1552;;;;;;;;;7; 7. check the qemu command line on dst host;  same with step 7;;RedHatEnterpriseLinux7/RHEL7-64782
1552;;;;;;;;;8;" 8. on dst, login guest to check the network function, 
 guest ping outside
 guest ping endpoint
 guest ping host
 host ping outside
 host ping guest
 
 (for macvtap and bridge type, if dst and src host are in different subnet, need to restart the network service on guest to get new ip address.)";"for nat: ping succeed
 for bridge:  ping succeed
 for macvtap: guest ping outside always succeed, others refer to https://mojo.redhat.com/docs/DOC-934431 
 
 
 
 
 
 (for macvtap performance refer to https://mojo.redhat.com/docs/DOC-934431#jive_content_id_31_The_result_of_the_direct_type_interface )";;RedHatEnterpriseLinux7/RHEL7-64782
1552;;;;;;;;;9;9. check the performance of the elements in xml if there is;​​;;RedHatEnterpriseLinux7/RHEL7-64782
1552;;;;;;;;;10;"1) for nat and bridge, check the connectivity
 # brctl show";"bridge name bridge id STP enabled interfaces
 virbr0 8000.5254007c5391 yes testtap  <==== the tap device is connected to the bridge
 virbr0-nic";;RedHatEnterpriseLinux7/RHEL7-64782
1552;;;;;;;;;11;"2) check target name on host if there is below settting 
 <target dev='testtap'/>
 
 # ip l show testtap";"for nat and bridge:
 8: testtap: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 9000 qdisc htb master virbr0 state UNKNOWN mode DEFAULT qlen 1000
     link/ether fe:54:00:98:c4:a3 brd ff:ff:ff:ff:ff:ff
 
 for macvtap:
 
​​";;RedHatEnterpriseLinux7/RHEL7-64782
1552;;;;;;;;;12;"3) check multiqueues if there is
 <driver ... queues='5'>
 
 on guest:
 # ethtool -l eth0";"Channel parameters for eth0:
 Pre-set maximums:
 RX: 0
 TX: 0
 Other: 0
 Combined: 5
 Current hardware settings:
 RX: 0
 TX: 0
 Other: 0
 Combined: 2";;RedHatEnterpriseLinux7/RHEL7-64782
1552;;;;;;;;;13;"4） check offloads if there is
     <host csum='off' gso='off' tso4='off' tso6='off' ecn='off' ufo='off' mrg_rxbuf='off'/>         <guest csum='off' tso4='off' tso6='off' ecn='off' ufo='off'/>
 
 on host:
 # ethtool -k testtap | head -18
​​";"Features for testtap:
 rx-checksumming: off [fixed]
 tx-checksumming: off
 tx-checksum-ipv4: off [fixed]
 tx-checksum-ip-generic: off [requested on]
 tx-checksum-ipv6: off [fixed]
 tx-checksum-fcoe-crc: off [fixed]
 tx-checksum-sctp: off [fixed]
 scatter-gather: on
 tx-scatter-gather: on
 tx-scatter-gather-fraglist: on
 tcp-segmentation-offload: off
 tx-tcp-segmentation: off [requested on]
 tx-tcp-ecn-segmentation: off [requested on]
 tx-tcp6-segmentation: off [requested on]
 tx-tcp-mangleid-segmentation: off
 udp-fragmentation-offload: off [requested on]
 generic-segmentation-offload: on";;RedHatEnterpriseLinux7/RHEL7-64782
1552;;;;;;;;;14;"on guest:
 # ethtool -k eth0 | head -18";"Features for eth0:
 rx-checksumming: off [fixed]
 tx-checksumming: off
 tx-checksum-ipv4: off [fixed]
 tx-checksum-ip-generic: off [fixed]
 tx-checksum-ipv6: off [fixed]
 tx-checksum-fcoe-crc: off [fixed]
 tx-checksum-sctp: off [fixed]
 scatter-gather: off
 tx-scatter-gather: off [fixed]
 tx-scatter-gather-fraglist: off [fixed]
 tcp-segmentation-offload: off
 tx-tcp-segmentation: off [fixed]
 tx-tcp-ecn-segmentation: off [fixed]
 tx-tcp6-segmentation: off [fixed]
 tx-tcp-mangleid-segmentation: off [fixed]
 udp-fragmentation-offload: off [fixed]
 generic-segmentation-offload: off [requested on]";;RedHatEnterpriseLinux7/RHEL7-64782
1552;;;;;;;;;15;"5) check link state if there is
     <link state='up'/>
 
 on host 
 # virsh domif-getlink rhel testtap";"testtap up
 
​​";;RedHatEnterpriseLinux7/RHEL7-64782
1552;;;;;;;;;16;"6) check coalesce setting is there is
     <coalesce>
         <rx>
           <frames max='7'/>
         </rx>
       </coalesce>
 check on host:
 # ethtool -c testtap | grep rx-frames:";rx-frames: 7;;RedHatEnterpriseLinux7/RHEL7-64782
1552;;;;;;;;;17;"7) check bandwidth if there is 
 <bandwidth>
         <inbound average='100' peak='200' burst='100'/>
         <outbound average='200' peak='300' burst='200'/>
       </bandwidth>";"for nat and bridge
 # ";;RedHatEnterpriseLinux7/RHEL7-64782
1552;;;;;;;;;18;10. migrate back from dst to src; migration succeed;;RedHatEnterpriseLinux7/RHEL7-64782
1553;RHEL7-64798;[migration][user] migrate a guest with user type interface;check a guest with user type interface should support migrate;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;" 1. prepare a guest with udp type interface, make sure the script running on both source and target host.
 add <interface type='user'/> in xml
 # virsh start rhel7.4
 # virsh dumpxml rhel7.4 | grep /interface -B4
     <interface type='user'>
       <mac address='52:54:00:b8:ed:51'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>


";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-64798
1553;;;;;;;;;2;"2. login into the guest, and check the guest can get a ip address 10.0.2.15, which is a qemu provided user mode interface. This type of interfacce do not support icmp, so you can not use ping to check the network connection.

 on guest, # ifconfig";guest can get ip address as 10.0.2.15;;RedHatEnterpriseLinux7/RHEL7-64798
1553;;;;;;;;;3;"3. on guest, the ping cmd will not work as user type interface do not suport ICMP.
 use below command to verify connection and dns:
 # ssh 10.66.x.x (one of the server you know the ip address, confirm connection works)
 # nslookup www.baidu.com  
 (confirm the dns works)

 Or ssh to one beaker machine:
 # ssh root@hp-dl385pg8-07.lab.eng.pek2.redhat.com
 (one of the beaker machine with hostname, confirm the dns and connection both works)

 Or firefox
 # firefox www.baidu.com";"ssh succeed
 nslookup has


";;RedHatEnterpriseLinux7/RHEL7-64798
1553;;;;;;;;;4;"4. migrate it with
 # virsh migrate s1 --live qemu+ssh://server/system --verbose  --auto-converge
 root@work's password:
 Migration: [100 %]

 on the target host, check the network connection, make sure it works well.
";migrate succeed;;RedHatEnterpriseLinux7/RHEL7-64798
1553;;;;;;;;;5;"3. migrate back
";​​;;RedHatEnterpriseLinux7/RHEL7-64798
1554;RHEL7-65083;"fs-qe case:/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";"/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-65083
1555;RHEL7-65084;fs-qe case:/nfs-utils/function/special-scene-custom/bz1370241-NFS-mounts-do-not-work-on-diskless-clients-when-ipv6-is-disabled tag:nfs-utils,tier1,regression;/nfs-utils/function/special-scene-custom/bz1370241-NFS-mounts-do-not-work-on-diskless-clients-when-ipv6-is-disabled tag:nfs-utils,tier1,regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-65084
1556;RHEL7-65302;"fs-qe case:/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";"/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-65302
1557;RHEL7-65303;fs-qe case:/nfs-utils/krb5-test/base param:KEYRING=1 tag:nfs-utils,Tier1,Regression;/nfs-utils/krb5-test/base param:KEYRING=1 tag:nfs-utils,Tier1,Regression;Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-65303
1558;RHEL7-65309;"fs-qe case:/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";"/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-65309
1559;RHEL7-65850;[driver][tune option] test the boundry of rx_queue_size and tx_queue_size - bug 1366989, 1482514;related qemu bug 1358962;Yalan Zhang (yalzhang);Medium;Positive;Automated;;1;"the rx_queue_size can only be a power of 2 between 256 and 1024
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-65850
1559;;;;;;;;;2;"1.
 # virsh dumpxml s1 | grep /interface -B6
     <interface type='network'>
       <mac address='52:54:00:9f:5a:eb'/>
       <source network='default'/>
       <model type='virtio'/>
       <driver name='vhost' queues='5' rx_queue_size='128'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 # virsh start s1
 
​​";"error: Failed to start domain s1
 error: internal error: process exited while connecting to monitor: 
 2016-09-14T01:32:04.248922Z qemu-kvm: -device virtio-net-pci,mq=on,vectors=12,rx_queue_size=128,netdev=hostnet0,
 id=net0,mac=52:54:00:9f:5a:eb,bus=pci.0,addr=0x3: 
 Invalid rx_queue_size (= 128), 
 must be a power of 2 between 256 and 1024.
 
​​";;RedHatEnterpriseLinux7/RHEL7-65850
1559;;;;;;;;;3;"2.  
 # virsh edit s1  ====> edit the rx_queue_size to 555
​​";"error: unsupported configuration: 
 rx_queue_size has to be a power of two
 Failed. Try again? [y,n,i,f,?]:";;RedHatEnterpriseLinux7/RHEL7-65850
1559;;;;;;;;;4;"3.
 # virsh edit s1  ====> edit the rx_queue_size to 2048
 # virsh start s1
​​";"error: Failed to start domain s1
 error: internal error: process exited while connecting to monitor: 
 2016-09-14T01:36:16.645622Z qemu-kvm: 
 -device virtio-net-pci,mq=on,vectors=12,rx_queue_size=2048,
 netdev=hostnet0,id=net0,mac=52:54:00:9f:5a:eb,bus=pci.0,addr=0x3: 
 Invalid rx_queue_size (= 2048), must be a power of 2 between 256 and 1024.";;RedHatEnterpriseLinux7/RHEL7-65850
1559;;;;;;;;;5;"5. 
 try 256, 512 and 1024, the guest can start successfully.
​​";guest can start successfully;;RedHatEnterpriseLinux7/RHEL7-65850
1559;;;;;;;;;6;6. for 1024, start the guest then check qemu command line;"for 1024
 # ps -aux | grep  qemu
 ...
 -netdev tap,fds=27:29:30:31:32,id=hostnet0,vhost=on,
 vhostfds=33:34:35:36:37 -device virtio-net-pci,mq=on,vectors=12,rx_queue_size=1024,
 netdev=hostnet0,id=net0,mac=52:54:00:9f:5a:eb,bus=pci.0,addr=0x3 
 ...
 on the guest,check 
 # ethtool -g eth0
 Ring parameters for eth0:
 Pre-set maximums:
 RX:        *1024*
 RX Mini:    0
 RX Jumbo:    0
 TX:        256
 Current hardware settings:
 RX:        *1024*
 RX Mini:    0
 RX Jumbo:    0
 TX:        256";;RedHatEnterpriseLinux7/RHEL7-65850
1559;;;;;;;;;7;the tx_queue_size can only be a power of 2 between 256 and 1024;​​;;RedHatEnterpriseLinux7/RHEL7-65850
1559;;;;;;;;;8;1. virsh edit to set to 128 or 2048 (a power of 2 but not in 256~1024);"If set a to be a power of 2, the xml can save, but guest can not start with the error message
 # virsh start rhel7.4
 error: Failed to start domain rhel7.4
 error: internal error: qemu unexpectedly closed the monitor: 2017-08-23T03:43:00.402662Z qemu-kvm: -chardev pty,id=charserial0: char device redirected to /dev/pts/3 (label charserial0)
 2017-08-23T03:43:00.765597Z qemu-kvm: -device virtio-net-pci,mq=on,vectors=12,rx_queue_size=1024,tx_queue_size=128,netdev=hostnet0,id=net0,mac=52:54:00:93:51:db,bus=pci.0,addr=0x3: Invalid tx_queue_size (= 128), must be a power of 2 between 256 and 1024";;RedHatEnterpriseLinux7/RHEL7-65850
1559;;;;;;;;;9;2. virsh edit to set to 257 or sdf (not a power of 2 or not a positive number);"If set to a number not a power of 2, the xml can not be validated
 2) with 257
 # virsh edit rhel7.4
 error: unsupported configuration: tx_queue_size has to be a power of two
 Failed. Try again? [y,n,i,f,?]: 
 
 with 'sdf'
 # virsh edit rhel7.4
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content
 
 Failed. Try again? [y,n,i,f,?]: 
 error: 'tx_queue_size' attribute must be positive number: sdf
 Failed. Try again? [y,n,f,?]: ";;RedHatEnterpriseLinux7/RHEL7-65850
1559;;;;;;;;;10;3. virsh edit to set to 256, 512, 1024;guest can start successfully;;RedHatEnterpriseLinux7/RHEL7-65850
1559;;;;;;;;;11;"4. attach-device to check if it will check the number when attach
 # cat inter.xml
   <interface type='network'>
 <source network='default'/>
       <model type='virtio'/>
       <driver name='vhost' txmode='iothread' ioeventfd='on' event_idx='off' queues='5' tx_queue_size='sdf'>
       </driver>
     </interface>";"# virsh attach-device rhel7.4 inter.xml
 error: Failed to attach device from inter.xml
 error: 'tx_queue_size' attribute must be positive number: sdf";;RedHatEnterpriseLinux7/RHEL7-65850
1559;;;;;;;;;12;"5. # cat inter.xml
   <interface type='network'>
 <source network='default'/>
       <model type='virtio'/>
       <driver name='vhost' txmode='iothread' ioeventfd='on' event_idx='off' queues='5' rx_queue_size='sdf'>
       </driver>
     </interface>
 # virsh attach-device rhel7.4 inter.xml";"# virsh attach-device rhel7.4 inter.xml
 error: Failed to attach device from inter.xml
 error: 'rx_queue_size' attribute must be positive number: sdf";;RedHatEnterpriseLinux7/RHEL7-65850
1560;RHEL7-68136;"fs-qe case:/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";"/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-68136
1561;RHEL7-68249;Prepare: PCI passthrough in nested vm with vIOMMU  - bug 1235581  1427005 1457610;"
 
 | xml | comments
General usage to enable iommu for emulated devices like e1000e | <feature> <ioapic driver='qemu'/>  </features> ... <devices> <iommu model='intel'> <driver intremap='on'/> </iommu> </devices> | The intremap attribute with possible values on and off can be used to turn on interrupt remapping, a part of the VT-d functionality. Currently this requires split I/O APIC (<ioapic driver='qemu'/>)
For virtio devices, need to set <driver iommu=on ats='on'> | <feature> <ioapic driver='qemu'/>  </features> ... <devices> <iommu model='intel'> <driver intremap='on' iotlb='on'/> </iommu> <memballoon model='virtio'> ... <driver iommu='on' ats='on'/> </memballoon> </devices> | for memballon device, The iommu attribute enables the use of emulated IOMMU by the device. The attribute ats controls the Address Translation Service support for PCIe devices. This is needed to make use of IOTLB support 
when guest with pci passthrough device | <feature> <ioapic driver='qemu'/>  </features> ... <devices> <iommu model='intel'> <driver intremap='on' caching_mode='on'/> </iommu> </devices> | The caching_mode attribute with possible values on and off can be used to turn on the VT-d caching mode (useful for assigned devices)
Reference:
 https://libvirt.org/formatdomain.html#elementsIommu 
 https://wiki.qemu.org/Features/VT-d  
 For intel-iommu: Bug 1235581 - RFE: Enable the intel-iommu device in QEMU
 For cache mode: Bug 1427005 - [RFE] libvirt support of VT-d protected device assignment
 For intremap and <ioapic driver='qemu'/>: Bug 1457610 - libvirt should give a nicer error message when intremap='split' in iommu device";Jingjing Shao (jishao);High;Positive;Not Automated;;1;"on host with intel cpu which supports VMX

 1.prepare a guest with q35 machine type and cpu with VMX feature
 # virsh dumpxml q35-js
 <domain type='kvm' id='12'>
   <name>q35-js</name>
   <uuid>251e7c62-3df4-4354-9a5b-0c7972035393</uuid>
 .....
 <feature>
 <ioapic driver='qemu'/>
 ...
 </features>
 ...
  <os>
     <type arch='x86_64' machine='pc-q35-rhel7.5.0'>hvm</type>
     <loader readonly='yes' secure='yes' type='pflash'>/usr/share/OVMF/OVMF_CODE.secboot.fd</loader>
     <nvram>/var/lib/libvirt/qemu/nvram/q_VARS.fd</nvram>
   </os>
 .....
   <cpu mode='host-passthrough'>
     <feature policy='require' name='vmx'/>
   </cpu>
 ...
 <devices>
  ...
 <iommu model='intel'>
 <driver intremap='on' caching_mode='on'/>
 </iommu>
 .....
 </devices>
​​";"
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-68249
1561;;;;;;;;;2;"# virsh start q35-js
​​";"Domain q35-js started
 
 (guest can start successfully)";;RedHatEnterpriseLinux7/RHEL7-68249
1561;;;;;;;;;3;"3. Check the qemu cmdline
 # ps aux | grep qemu | grep kernel_irqchip 
​​";".....
 kernel_irqchip=split 
 ......
 
 (this is corresponding to  split I/O APIC <ioapic driver='qemu'/>, required for intremap='on')
​​";;RedHatEnterpriseLinux7/RHEL7-68249
1561;;;;;;;;;4;#  ps aux | grep qemu | grep intel-iommu ;"....
 -device intel-iommu,intremap=on,caching-mode=on

 (The intremap attribute with possible values on and off can be used to turn on interrupt remapping, a part of the VT-d functionality. Currently this requires split I/O APIC (<ioapic driver='qemu'/>)
 The caching_mode attribute with possible values on and off can be used to turn on the VT-d caching mode (useful for assigned devices).)";;RedHatEnterpriseLinux7/RHEL7-68249
1561;;;;;;;;;5;"4. enable iommu on guest kernel line
 
 log in the guest, and enable iommu_intel=on in kernel cmdline
  in file '/etc/default/grub' append 'iommu_intel=on'
 # vi /etc/default/grub
 # grub2-mkconfig -o /boot/efi/EFI/redhat/grub.cfg
 # reboot

 after reboot, check the kernel line updated
 # cat /proc/cmdline
 BOOT_IMAGE=/vmlinuz-3.10.0-915.el7.x86_64 root=/dev/mapper/rhel-root ro console=tty0 console=ttyS0,115200 reboot=pci biosdevname=0 crashkernel=auto rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb quiet intel_iommu=on
";​​;;RedHatEnterpriseLinux7/RHEL7-68249
1561;;;;;;;;;6;"5. check the dmesg on guest
 # dmesg | grep IOMMU  
​​";"[ 0.000000] Intel-IOMMU: enabled
 [ 0.110758] dmar: IOMMU 0: reg_base_addr fed90000 ver 1:0 cap 12008c22260206 ecap f02 [ 0.671621] IOMMU 0 0xfed90000: using Queued invalidation 
 [ 0.671623] IOMMU: Setting RMRR: 
 [ 0.671624] IOMMU: Prepare 0-16MiB unity mapping for LPC 
 [ 0.671658] IOMMU: Setting identity map for device 0000:00:1f.0 [0x0 - 0xffffff]";;RedHatEnterpriseLinux7/RHEL7-68249
1561;;;;;;;;;7;"# dmesg  | grep -i DMAR
 
​​";"[    0.000000] ACPI: DMAR 000000007d83f000 00048 (v01 BOCHS  BXPCDMAR 00000001 BXPC 00000001)
 [    0.000000] DMAR: IOMMU enabled
 [    0.163608] DMAR: Host address width 39
 [    0.163612] DMAR: DRHD base: 0x000000fed90000 flags: 0x1
 [    0.163657] DMAR: dmar0: reg_base_addr fed90000 ver 1:0 cap 12008c22260286 ecap f00f5a
 [    0.163666] DMAR-IR: IOAPIC id 0 under DRHD base  0xfed90000 IOMMU 0
 [    0.163668] DMAR-IR: Queued invalidation will be enabled to support x2apic and Intr-remapping.
 [    0.165863] DMAR-IR: Enabled IRQ remapping in x2apic mode
 [    2.272720] DMAR: No RMRR found
 [    2.272723] DMAR: No ATSR found
 [    2.272809] DMAR: dmar0: Using Queued invalidation
 [    2.272921] DMAR: Setting RMRR:
 [    2.272923] DMAR: Prepare 0-16MiB unity mapping for LPC
 [    2.273054] DMAR: Setting identity map for device 0000:00:1f.0 [0x0 - 0xffffff]
 [    2.388375] DMAR: Intel(R) Virtualization Technology for Directed I/O
​​";;RedHatEnterpriseLinux7/RHEL7-68249
1561;;;;;;;;;8;"5.Check the iommu group
 # ll /sys/kernel/iommu_groups/ 
​​";"Output:
 total 0 
 drwxr-xr-x. 3 root root 0 Aug 19 20:05 0 
 drwxr-xr-x. 3 root root 0 Aug 19 20:05 1 
 drwxr-xr-x. 3 root root 0 Aug 19 20:05 2 
 drwxr-xr-x. 3 root root 0 Aug 19 20:05 3 
 drwxr-xr-x. 3 root root 0 Aug 19 20:05 4 
 drwxr-xr-x. 3 root root 0 Aug 19 20:05 5 
 drwxr-xr-x. 3 root root 0 Aug 19 20:05 6 
 drwxr-xr-x. 3 root root 0 Aug 19 20:05 7
 
 (there are some iommu_groups list up, not empty)";;RedHatEnterpriseLinux7/RHEL7-68249
1561;;;;;;;;;9;"
 Note:
 host--(sata disk)----guest -qemu is ok, libvirt can not, the detailed reason  https://bugzilla.redhat.com/show_bug.cgi?id=%201368300


 Bug 1368300 - Sata disk can not be attached to ahci controller device in q35 guest by libvirt automaticly
​​";​​;;RedHatEnterpriseLinux7/RHEL7-68249
1562;RHEL7-68963;Open m3u playlist with short parameter;;Bohdan Milar (bmilar);Critical;Positive;Automated;530960;1;"Copy ""audio1"" to test directory";"the ""audio1"" item number ""1"" is in the ""Title"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-68963
1562;;;;;;;;;2;"Create playlists in test directory for ""audio1""";​​;;RedHatEnterpriseLinux7/RHEL7-68963
1562;;;;;;;;;3;"Start brasero with ""-l"" parameter and ""m3u"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-68963
1562;;;;;;;;;4;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-68963
1563;RHEL7-68964;New audio project via command;;Bohdan Milar (bmilar);Critical;Positive;Automated;530968;1;"Start brasero with ""-a"" parameter";"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-68964
1564;RHEL7-68965;Split audio track via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;530993;1;Prepare Brasero in audio mode with file;"there is ""1"" item named ""audio1""";Test Case;RedHatEnterpriseLinux7/RHEL7-68965
1564;;;;;;;;;2;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-68965
1564;;;;;;;;;3;"Click the ""Split"" button";​​;;RedHatEnterpriseLinux7/RHEL7-68965
1564;;;;;;;;;4;"a dialog named ""Split Track"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-68965
1564;;;;;;;;;5;"Click the ""Cancel"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-68965
1565;RHEL7-68966;New data directory via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;531006;1;"Start brasero with ""-d"" parameter";"there are only ""dir1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-68966
1565;;;;;;;;;2;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-68966
1565;;;;;;;;;3;"Click the ""New Folder"" button";​​;;RedHatEnterpriseLinux7/RHEL7-68966
1565;;;;;;;;;4;"Press key ""Return""";​​;;RedHatEnterpriseLinux7/RHEL7-68966
1566;RHEL7-68967;Add data file via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;531028;1;"Create sample ""data1"" text file in test directory";"there are only ""data1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-68967
1566;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-68967
1566;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-68967
1566;;;;;;;;;4;"Click the ""data1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-68967
1566;;;;;;;;;5;"Press key ""Return""";​​;;RedHatEnterpriseLinux7/RHEL7-68967
1567;RHEL7-68968;Turn side panel in data project on via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531059;1;"Start brasero with ""-d"" parameter";side panel is checked;Test Case;RedHatEnterpriseLinux7/RHEL7-68968
1567;;;;;;;;;2;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-68968
1567;;;;;;;;;3;Turn side panel on via menu;​​;;RedHatEnterpriseLinux7/RHEL7-68968
1568;RHEL7-68969;New data project via command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531077;1;"Start brasero with ""-d"" parameter";"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-68969
1569;RHEL7-68970;Help dialog via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;531102;1;Make sure that brasero is running;"Help section ""Brasero Help"" is displayed";Test Case;RedHatEnterpriseLinux7/RHEL7-68970
1569;;;;;;;;;2;"Press key ""F1""";​​;;RedHatEnterpriseLinux7/RHEL7-68970
1570;RHEL7-68971;Empty Brasero start via command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531114;1;"Start brasero with ""-e"" parameter";"name of main window should end with ""Brasero""";Test Case;RedHatEnterpriseLinux7/RHEL7-68971
1571;RHEL7-68972;Open Plugins dialog via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531152;1;"Start brasero with ""-e"" parameter";"a dialog named ""Brasero Plugins"" is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-68972
1571;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-68972
1571;;;;;;;;;3;"Click the ""Close"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-68972
1572;RHEL7-68973;New video project via command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531176;1;"Start brasero with ""-o"" parameter";"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-68973
1573;RHEL7-68974;Add audio file via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;530908;1;"Copy ""audio1"" to test directory";"there are only ""audio1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-68974
1573;;;;;;;;;2;"Start brasero with ""-a"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-68974
1573;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-68974
1573;;;;;;;;;4;"Click the ""audio1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-68974
1573;;;;;;;;;5;"Press key ""Return""";​​;;RedHatEnterpriseLinux7/RHEL7-68974
1574;RHEL7-68975;Open audio metadata dialog;;Bohdan Milar (bmilar);Critical;Positive;Automated;530930;1;Prepare Brasero in audio metadata mode with dialog;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-68975
1574;;;;;;;;;2;"Click the ""Cancel"" button in the ""Song Information"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-68975
1575;RHEL7-68976;Turn side panel in audio project on via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530939;1;"Start brasero with ""-a"" parameter";side panel is checked;Test Case;RedHatEnterpriseLinux7/RHEL7-68976
1575;;;;;;;;;2;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-68976
1575;;;;;;;;;3;Turn side panel on via menu;​​;;RedHatEnterpriseLinux7/RHEL7-68976
1576;RHEL7-68977;Open m3u playlist with long parameter;;Bohdan Milar (bmilar);Critical;Positive;Automated;530961;1;"Copy ""audio1"" to test directory";"the ""audio1"" item number ""1"" is in the ""Title"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-68977
1576;;;;;;;;;2;"Create playlists in test directory for ""audio1""";​​;;RedHatEnterpriseLinux7/RHEL7-68977
1576;;;;;;;;;3;"Start brasero with ""--playlist="" parameter and ""m3u"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-68977
1576;;;;;;;;;4;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-68977
1577;RHEL7-68978;New audio project via long command;;Bohdan Milar (bmilar);Critical;Positive;Automated;530969;1;"Start brasero with ""--audio"" parameter";"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-68978
1578;RHEL7-68979;Split audio track via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530994;1;Prepare Brasero in audio mode with file;"there is ""1"" item named ""audio1""";Test Case;RedHatEnterpriseLinux7/RHEL7-68979
1578;;;;;;;;;2;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-68979
1578;;;;;;;;;3;​​;​​;;RedHatEnterpriseLinux7/RHEL7-68979
1578;;;;;;;;;4;"a dialog named ""Split Track"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-68979
1578;;;;;;;;;5;"Click the ""Cancel"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-68979
1579;RHEL7-68980;New data directory via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531007;1;"Start brasero with ""-d"" parameter";"there are only ""dir1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-68980
1579;;;;;;;;;2;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-68980
1579;;;;;;;;;3;"Select ""New Folder"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-68980
1579;;;;;;;;;4;"Press key ""Return""";​​;;RedHatEnterpriseLinux7/RHEL7-68980
1580;RHEL7-68981;Add data file via doubleclick;;Bohdan Milar (bmilar);Critical;Positive;Automated;531029;1;"Create sample ""data1"" text file in test directory";"there are only ""data1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-68981
1580;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-68981
1580;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-68981
1580;;;;;;;;;4;"Doubleclick the ""data1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-68981
1581;RHEL7-68982;Turn side panel in data project on via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;531060;1;"Start brasero with ""-d"" parameter";side panel is checked;Test Case;RedHatEnterpriseLinux7/RHEL7-68982
1581;;;;;;;;;2;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-68982
1581;;;;;;;;;3;Turn side panel on via key;​​;;RedHatEnterpriseLinux7/RHEL7-68982
1582;RHEL7-68983;New data project via long command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531078;1;"Start brasero with ""--data"" parameter";"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-68983
1583;RHEL7-68984;Help dialog via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531103;1;Make sure that brasero is running;"Help section ""Brasero Help"" is displayed";Test Case;RedHatEnterpriseLinux7/RHEL7-68984
1583;;;;;;;;;2;"Select ""Contents"" from the ""Help"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-68984
1584;RHEL7-68985;Empty Brasero start via long command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531115;1;"Start brasero with ""--empty"" parameter";"name of main window should end with ""Brasero""";Test Case;RedHatEnterpriseLinux7/RHEL7-68985
1585;RHEL7-68986;"About dialog for the ""File Checksum"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531153;1;"Start brasero with ""-e"" parameter";"the ""File Checksum"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-68986
1585;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-68986
1585;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-68986
1585;;;;;;;;;4;"Click the ""File Checksum"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-68986
1585;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-68986
1585;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-68986
1585;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-68986
1586;RHEL7-68987;New video project via long command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531177;1;"Start brasero with ""--video"" parameter";"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-68987
1587;RHEL7-68988;Add audio file via doubleclick;;Bohdan Milar (bmilar);Critical;Positive;Automated;530909;1;"Copy ""audio1"" to test directory";"there are only ""audio1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-68988
1587;;;;;;;;;2;"Start brasero with ""-a"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-68988
1587;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-68988
1587;;;;;;;;;4;"Doubleclick the ""audio1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-68988
1588;RHEL7-68989;Audio metadata dialog cancel;;Bohdan Milar (bmilar);Critical;Positive;Automated;530931;1;Prepare Brasero in audio metadata mode with dialog;"the only ""audio3"" item on the right has the length of ""00:20 min""";Test Case;RedHatEnterpriseLinux7/RHEL7-68989
1588;;;;;;;;;2;"Set ""10"" Seconds in metadata as the song ""start""";​​;;RedHatEnterpriseLinux7/RHEL7-68989
1588;;;;;;;;;3;"the Track length in metadata is ""00:10 min""";​​;;RedHatEnterpriseLinux7/RHEL7-68989
1588;;;;;;;;;4;"Click the ""Cancel"" button in the ""Song Information"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-68989
1589;RHEL7-68990;Turn side panel in audio project on via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;530940;1;"Start brasero with ""-a"" parameter";side panel is checked;Test Case;RedHatEnterpriseLinux7/RHEL7-68990
1589;;;;;;;;;2;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-68990
1589;;;;;;;;;3;Turn side panel on via key;​​;;RedHatEnterpriseLinux7/RHEL7-68990
1590;RHEL7-68991;Open m3u playlist via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530962;1;"Copy ""audio1"" to test directory";"the ""audio1"" item number ""1"" is in the ""Title"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-68991
1590;;;;;;;;;2;"Create playlists in test directory for ""audio1""";​​;;RedHatEnterpriseLinux7/RHEL7-68991
1590;;;;;;;;;3;Make sure that brasero is running;​​;;RedHatEnterpriseLinux7/RHEL7-68991
1590;;;;;;;;;4;​​;​​;;RedHatEnterpriseLinux7/RHEL7-68991
1590;;;;;;;;;5;"Find the ""m3u"" file in file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-68991
1590;;;;;;;;;6;"Click the ""Open"" button in the ""Open Project"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-68991
1590;;;;;;;;;7;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-68991
1591;RHEL7-68992;New audio project via command with file;;Bohdan Milar (bmilar);Critical;Positive;Automated;530970;1;"Copy ""audio1"" to test directory";"there are only ""audio1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-68992
1591;;;;;;;;;2;"Start brasero with ""-a"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-68992
1591;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-68992
1592;RHEL7-68993;Split audio track via rightclick;;Bohdan Milar (bmilar);Critical;Positive;Automated;530995;1;Prepare Brasero in audio mode with file;"there is ""1"" item named ""audio1""";Test Case;RedHatEnterpriseLinux7/RHEL7-68993
1592;;;;;;;;;2;"Rightclick the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-68993
1592;;;;;;;;;3;​​;​​;;RedHatEnterpriseLinux7/RHEL7-68993
1592;;;;;;;;;4;"a dialog named ""Split Track"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-68993
1592;;;;;;;;;5;"Click the ""Cancel"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-68993
1593;RHEL7-68994;Add data directory via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;531008;1;"Create ""dir3"" subdirectory in test directory with ""data1"" file";"there are only ""dir3"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-68994
1593;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-68994
1593;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-68994
1593;;;;;;;;;4;"Click the ""dir3"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-68994
1593;;;;;;;;;5;"Press key ""Return""";​​;;RedHatEnterpriseLinux7/RHEL7-68994
1594;RHEL7-68995;Add data file via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;531030;1;"Create sample ""data1"" text file in test directory";"there are only ""data1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-68995
1594;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-68995
1594;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-68995
1594;;;;;;;;;4;"Click the ""data1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-68995
1594;;;;;;;;;5;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-68995
1595;RHEL7-68996;Turn side panel in data project off via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531061;1;"Start brasero with ""-d"" parameter";side panel is unchecked;Test Case;RedHatEnterpriseLinux7/RHEL7-68996
1595;;;;;;;;;2;Turn side panel on;​​;;RedHatEnterpriseLinux7/RHEL7-68996
1595;;;;;;;;;3;Turn side panel off via menu;​​;;RedHatEnterpriseLinux7/RHEL7-68996
1596;RHEL7-68997;New data project via command with file only;;Bohdan Milar (bmilar);Critical;Positive;Automated;531079;1;"Create sample ""data1"" text file in test directory";"there are only ""data1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-68997
1596;;;;;;;;;2;"Start brasero with no parameter and ""data1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-68997
1596;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-68997
1597;RHEL7-68998;About dialog via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531104;1;"Start brasero with ""-e"" parameter";"a dialog named ""About Brasero"" containing ""Copyright"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-68998
1597;;;;;;;;;2;"Select ""About"" from the ""Help"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-68998
1597;;;;;;;;;3;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-68998
1598;RHEL7-68999;Start Brasero on current display;;Bohdan Milar (bmilar);Critical;Positive;Automated;531116;1;"Start brasero with ""--display="" parameter and ""current"" display";"1 instance of ""brasero"" application is running";Test Case;RedHatEnterpriseLinux7/RHEL7-68999
1599;RHEL7-69000;"About dialog for the ""File Downloader"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531154;1;"Start brasero with ""-e"" parameter";"the ""File Downloader"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69000
1599;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69000
1599;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69000
1599;;;;;;;;;4;"Click the ""File Downloader"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69000
1599;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69000
1599;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69000
1599;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69000
1600;RHEL7-69001;New video project via command with file;;Bohdan Milar (bmilar);Critical;Positive;Automated;531178;1;"Copy ""video1"" to test directory";"there are only ""video1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69001
1600;;;;;;;;;2;"Start brasero with ""-o"" parameter and ""video1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69001
1600;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69001
1601;RHEL7-69002;Add audio file via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;530910;1;"Copy ""audio1"" to test directory";"there are only ""audio1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69002
1601;;;;;;;;;2;"Start brasero with ""-a"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69002
1601;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69002
1601;;;;;;;;;4;"Click the ""audio1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69002
1601;;;;;;;;;5;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69002
1602;RHEL7-69003;Track length in audio metadata using song start;;Bohdan Milar (bmilar);Critical;Positive;Automated;530932;1;Prepare Brasero in audio metadata mode with dialog;"the only ""audio3"" item on the right has the length of ""00:10 min""";Test Case;RedHatEnterpriseLinux7/RHEL7-69003
1602;;;;;;;;;2;"Set ""10"" Seconds in metadata as the song ""start""";​​;;RedHatEnterpriseLinux7/RHEL7-69003
1602;;;;;;;;;3;"the Track length in metadata is ""00:10 min""";​​;;RedHatEnterpriseLinux7/RHEL7-69003
1602;;;;;;;;;4;"Click the ""Apply"" button in the ""Song Information"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69003
1603;RHEL7-69004;Turn side panel in audio project off via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530941;1;"Start brasero with ""-a"" parameter";side panel is unchecked;Test Case;RedHatEnterpriseLinux7/RHEL7-69004
1603;;;;;;;;;2;Turn side panel on;​​;;RedHatEnterpriseLinux7/RHEL7-69004
1603;;;;;;;;;3;Turn side panel off via menu;​​;;RedHatEnterpriseLinux7/RHEL7-69004
1604;RHEL7-69005;Open m3u playlist via key shortcup;;Bohdan Milar (bmilar);Critical;Positive;Automated;530963;1;"Copy ""audio1"" to test directory";"the ""audio1"" item number ""1"" is in the ""Title"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69005
1604;;;;;;;;;2;"Create playlists in test directory for ""audio1""";​​;;RedHatEnterpriseLinux7/RHEL7-69005
1604;;;;;;;;;3;Make sure that brasero is running;​​;;RedHatEnterpriseLinux7/RHEL7-69005
1604;;;;;;;;;4;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69005
1604;;;;;;;;;5;"Find the ""m3u"" file in file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69005
1604;;;;;;;;;6;"Click the ""Open"" button in the ""Open Project"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69005
1604;;;;;;;;;7;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69005
1605;RHEL7-69006;New audio project via long command with file;;Bohdan Milar (bmilar);Critical;Positive;Automated;530971;1;"Copy ""audio1"" to test directory";"there are only ""audio1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69006
1605;;;;;;;;;2;"Start brasero with ""--audio"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69006
1605;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69006
1606;RHEL7-69007;Split audio track manually;;Bohdan Milar (bmilar);Critical;Positive;Automated;530996;1;Prepare Brasero in audio split mode with dialog;"there are only ""audio2"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69007
1606;;;;;;;;;2;"Select the ""Split track manually"" method";​​;;RedHatEnterpriseLinux7/RHEL7-69007
1606;;;;;;;;;3;Drag position slider half way;​​;;RedHatEnterpriseLinux7/RHEL7-69007
1606;;;;;;;;;4;"Click the ""Slice"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69007
1606;;;;;;;;;5;the track is splitted to 2 pieces;​​;;RedHatEnterpriseLinux7/RHEL7-69007
1606;;;;;;;;;6;"Click the ""OK"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69007
1607;RHEL7-69008;Add data directory via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;531009;1;"Create ""dir3"" subdirectory in test directory with ""data1"" file";"there are only ""dir3"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69008
1607;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69008
1607;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69008
1607;;;;;;;;;4;"Click the ""dir3"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69008
1607;;;;;;;;;5;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69008
1608;RHEL7-69009;Add data file via button and file selector;;Bohdan Milar (bmilar);Critical;Positive;Automated;531031;1;"Create sample ""data1"" text file in test directory";"there are only ""data1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69009
1608;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69009
1608;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69009
1608;;;;;;;;;4;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69009
1608;;;;;;;;;5;Go to test directory in file chooser;​​;;RedHatEnterpriseLinux7/RHEL7-69009
1608;;;;;;;;;6;"Find the ""data1"" file in file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69009
1608;;;;;;;;;7;"Click the ""Add"" button in the ""Select Files"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69009
1609;RHEL7-69010;Turn side panel in data project off via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;531062;1;"Start brasero with ""-d"" parameter";side panel is unchecked;Test Case;RedHatEnterpriseLinux7/RHEL7-69010
1609;;;;;;;;;2;Turn side panel on;​​;;RedHatEnterpriseLinux7/RHEL7-69010
1609;;;;;;;;;3;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69010
1610;RHEL7-69011;New data project via command with file;;Bohdan Milar (bmilar);Critical;Positive;Automated;531080;1;"Create sample ""data1"" text file in test directory";"there are only ""data1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69011
1610;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""data1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69011
1610;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69011
1611;RHEL7-69012;About dialog buttons accessibility;;Bohdan Milar (bmilar);Critical;Positive;Automated;531105;1;"Start brasero with ""-e"" parameter";"there are no buttons without a11y names in the ""About Brasero"" dialog";Test Case;RedHatEnterpriseLinux7/RHEL7-69012
1611;;;;;;;;;2;"Select ""About"" from the ""Help"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69012
1611;;;;;;;;;3;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69012
1612;RHEL7-69013;Start Brasero on other display;;Bohdan Milar (bmilar);Critical;Positive;Automated;531117;1;"Start brasero with ""--display="" parameter and ""next"" display";"no instance of ""brasero"" application is running";Test Case;RedHatEnterpriseLinux7/RHEL7-69013
1613;RHEL7-69014;"About dialog for the ""Image Checksum"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531155;1;"Start brasero with ""-e"" parameter";"the ""Image Checksum"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69014
1613;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69014
1613;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69014
1613;;;;;;;;;4;"Click the ""Image Checksum"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69014
1613;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69014
1613;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69014
1613;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69014
1614;RHEL7-69015;New video project via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;531179;1;Make sure that brasero is running;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69015
1614;;;;;;;;;2;"Click the ""Video project"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69015
1615;RHEL7-69016;Add audio file via button and file selector;;Bohdan Milar (bmilar);Critical;Positive;Automated;530911;1;"Copy ""audio1"" to test directory";"there are only ""audio1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69016
1615;;;;;;;;;2;"Start brasero with ""-a"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69016
1615;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69016
1615;;;;;;;;;4;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69016
1615;;;;;;;;;5;Go to test directory in file chooser;​​;;RedHatEnterpriseLinux7/RHEL7-69016
1615;;;;;;;;;6;"Find the ""audio1"" file in file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69016
1615;;;;;;;;;7;"Click the ""Add"" button in the ""Select Files"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69016
1616;RHEL7-69017;Track length in audio metadata using song end;;Bohdan Milar (bmilar);Critical;Positive;Automated;530933;1;Prepare Brasero in audio metadata mode with dialog;"the only ""audio3"" item on the right has the length of ""00:10 min""";Test Case;RedHatEnterpriseLinux7/RHEL7-69017
1616;;;;;;;;;2;"Set ""10"" Seconds in metadata as the song ""end""";​​;;RedHatEnterpriseLinux7/RHEL7-69017
1616;;;;;;;;;3;"the Track length in metadata is ""00:10 min""";​​;;RedHatEnterpriseLinux7/RHEL7-69017
1616;;;;;;;;;4;"Click the ""Apply"" button in the ""Song Information"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69017
1617;RHEL7-69018;Turn side panel in audio project off via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;530942;1;"Start brasero with ""-a"" parameter";side panel is unchecked;Test Case;RedHatEnterpriseLinux7/RHEL7-69018
1617;;;;;;;;;2;Turn side panel on;​​;;RedHatEnterpriseLinux7/RHEL7-69018
1617;;;;;;;;;3;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69018
1618;RHEL7-69019;Open pls playlist with short parameter;;Bohdan Milar (bmilar);Critical;Positive;Automated;530964;1;"Copy ""audio1"" to test directory";"the ""audio1"" item number ""1"" is in the ""Title"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69019
1618;;;;;;;;;2;"Create playlists in test directory for ""audio1""";​​;;RedHatEnterpriseLinux7/RHEL7-69019
1618;;;;;;;;;3;"Start brasero with ""-l"" parameter and ""pls"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69019
1618;;;;;;;;;4;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69019
1619;RHEL7-69020;New audio project via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;530972;1;Make sure that brasero is running;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69020
1619;;;;;;;;;2;"Click the ""Audio project"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69020
1620;RHEL7-69021;Split audio track by Length;;Bohdan Milar (bmilar);Critical;Positive;Automated;530997;1;Prepare Brasero in audio split mode with dialog;"there are only ""audio2"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69021
1620;;;;;;;;;2;"Select the ""Split track in parts with a fixed length"" method";​​;;RedHatEnterpriseLinux7/RHEL7-69021
1620;;;;;;;;;3;"Set split track every ""6"" seconds";​​;;RedHatEnterpriseLinux7/RHEL7-69021
1620;;;;;;;;;4;"Click the ""Slice"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69021
1620;;;;;;;;;5;the track is splitted to 4 pieces;​​;;RedHatEnterpriseLinux7/RHEL7-69021
1620;;;;;;;;;6;"Click the ""OK"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69021
1621;RHEL7-69022;Add data directory via button and file selector;;Bohdan Milar (bmilar);Critical;Positive;Automated;531010;1;"Create ""dir3"" subdirectory in test directory with ""data1"" file";"there are only ""dir3"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69022
1621;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69022
1621;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69022
1621;;;;;;;;;4;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69022
1621;;;;;;;;;5;Go to test directory in file chooser;​​;;RedHatEnterpriseLinux7/RHEL7-69022
1621;;;;;;;;;6;"Find the ""dir3"" file in file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69022
1621;;;;;;;;;7;"Click the ""Add"" button in the ""Select Files"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69022
1622;RHEL7-69023;Add data file via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531032;1;"Create sample ""data1"" text file in test directory";"there are only ""data1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69023
1622;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69023
1622;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69023
1622;;;;;;;;;4;"Click the ""data1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69023
1622;;;;;;;;;5;"Select ""Add Files"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69023
1623;RHEL7-69024;Remember side panel on after brasero relaunch in data project;;Bohdan Milar (bmilar);Critical;Positive;Automated;531063;1;"Start brasero with ""-d"" parameter";side panel is checked;Test Case;RedHatEnterpriseLinux7/RHEL7-69024
1623;;;;;;;;;2;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69024
1623;;;;;;;;;3;Turn side panel on via key;​​;;RedHatEnterpriseLinux7/RHEL7-69024
1623;;;;;;;;;4;side panel is on;​​;;RedHatEnterpriseLinux7/RHEL7-69024
1623;;;;;;;;;5;side panel is checked;​​;;RedHatEnterpriseLinux7/RHEL7-69024
1623;;;;;;;;;6;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69024
1623;;;;;;;;;7;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69024
1623;;;;;;;;;8;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69024
1624;RHEL7-69025;New data project via long command with file;;Bohdan Milar (bmilar);Critical;Positive;Automated;531081;1;"Create sample ""data1"" text file in test directory";"there are only ""data1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69025
1624;;;;;;;;;2;"Start brasero with ""--data"" parameter and ""data1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69025
1624;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69025
1625;RHEL7-69026;Commmand line help by --help option;;Bohdan Milar (bmilar);Critical;Positive;Automated;531106;1;"Start brasero with ""-e"" parameter";"the brasero output given by ""--help"" does not contain ""Brasero media burning library"" text";Test Case;RedHatEnterpriseLinux7/RHEL7-69026
1626;RHEL7-69027;Start Brasero twice via command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531118;1;"Start brasero with ""-e"" parameter";"1 instance of ""brasero"" application is running";Test Case;RedHatEnterpriseLinux7/RHEL7-69027
1626;;;;;;;;;2;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69027
1626;;;;;;;;;3;"Start brasero with ""-e"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69027
1627;RHEL7-69028;"About dialog for the ""Normalization"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531156;1;"Start brasero with ""-e"" parameter";"the ""Normalization"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69028
1627;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69028
1627;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69028
1627;;;;;;;;;4;"Click the ""Normalization"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69028
1627;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69028
1627;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69028
1627;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69028
1628;RHEL7-69029;New video project via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531180;1;Make sure that brasero is running;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69029
1628;;;;;;;;;2;"Choose ""New Video Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69029
1629;RHEL7-69030;Add audio file via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530912;1;"Copy ""audio1"" to test directory";"there are only ""audio1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69030
1629;;;;;;;;;2;"Start brasero with ""-a"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69030
1629;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69030
1629;;;;;;;;;4;"Click the ""audio1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69030
1629;;;;;;;;;5;"Select ""Add Files"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69030
1630;RHEL7-69031;Track length with pause in audio metadata;;Bohdan Milar (bmilar);Critical;Positive;Automated;530934;1;Prepare Brasero in audio metadata mode with file;"there is a ""Pause"" of ""00:05 min"" length";Test Case;RedHatEnterpriseLinux7/RHEL7-69031
1630;;;;;;;;;2;"Click the ""audio3"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69031
1630;;;;;;;;;3;"Click the ""Pause"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69031
1630;;;;;;;;;4;"there is a ""Pause"" of ""00:02 min"" length";​​;;RedHatEnterpriseLinux7/RHEL7-69031
1630;;;;;;;;;5;"Rightclick the ""audio3"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69031
1630;;;;;;;;;6;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69031
1630;;;;;;;;;7;"a dialog named ""Song Information"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69031
1630;;;;;;;;;8;the pause fields in metadata are displayed;​​;;RedHatEnterpriseLinux7/RHEL7-69031
1630;;;;;;;;;9;"Set ""5"" Seconds in metadata as ""pause""";​​;;RedHatEnterpriseLinux7/RHEL7-69031
1630;;;;;;;;;10;"the Track length in metadata is ""00:25 min""";​​;;RedHatEnterpriseLinux7/RHEL7-69031
1630;;;;;;;;;11;"Click the ""Apply"" button in the ""Song Information"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69031
1631;RHEL7-69032;Turn side panel in audio project off via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;530943;1;"Start brasero with ""-a"" parameter";side panel is unchecked;Test Case;RedHatEnterpriseLinux7/RHEL7-69032
1631;;;;;;;;;2;Turn side panel on;​​;;RedHatEnterpriseLinux7/RHEL7-69032
1631;;;;;;;;;3;Turn side panel off via button;​​;;RedHatEnterpriseLinux7/RHEL7-69032
1632;RHEL7-69033;Remember side panel on after brasero relaunch in audio project;;Bohdan Milar (bmilar);Critical;Positive;Automated;530944;1;"Start brasero with ""-a"" parameter";side panel is checked;Test Case;RedHatEnterpriseLinux7/RHEL7-69033
1632;;;;;;;;;2;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69033
1632;;;;;;;;;3;Turn side panel on via key;​​;;RedHatEnterpriseLinux7/RHEL7-69033
1632;;;;;;;;;4;side panel is on;​​;;RedHatEnterpriseLinux7/RHEL7-69033
1632;;;;;;;;;5;side panel is checked;​​;;RedHatEnterpriseLinux7/RHEL7-69033
1632;;;;;;;;;6;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69033
1632;;;;;;;;;7;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69033
1632;;;;;;;;;8;"Start brasero with ""-a"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69033
1633;RHEL7-69034;Open pls playlist with long parameter;;Bohdan Milar (bmilar);Critical;Positive;Automated;530965;1;"Copy ""audio1"" to test directory";"the ""audio1"" item number ""1"" is in the ""Title"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69034
1633;;;;;;;;;2;"Create playlists in test directory for ""audio1""";​​;;RedHatEnterpriseLinux7/RHEL7-69034
1633;;;;;;;;;3;"Start brasero with ""--playlist="" parameter and ""pls"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69034
1633;;;;;;;;;4;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69034
1634;RHEL7-69035;New audio project via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530973;1;Make sure that brasero is running;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69035
1634;;;;;;;;;2;"Choose ""New Audio Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69035
1635;RHEL7-69036;Split audio track to parts;;Bohdan Milar (bmilar);Critical;Positive;Automated;530998;1;Prepare Brasero in audio split mode with dialog;"there are only ""audio2"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69036
1635;;;;;;;;;2;"Select the ""Split track in a fixed number of parts"" method";​​;;RedHatEnterpriseLinux7/RHEL7-69036
1635;;;;;;;;;3;"Set split track in ""2"" parts";​​;;RedHatEnterpriseLinux7/RHEL7-69036
1635;;;;;;;;;4;"Click the ""Slice"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69036
1635;;;;;;;;;5;the track is splitted to 2 pieces;​​;;RedHatEnterpriseLinux7/RHEL7-69036
1635;;;;;;;;;6;"Click the ""OK"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69036
1636;RHEL7-69037;Add data directory via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531011;1;"Create ""dir3"" subdirectory in test directory with ""data1"" file";"there are only ""dir3"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69037
1636;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69037
1636;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69037
1636;;;;;;;;;4;"Click the ""dir3"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69037
1636;;;;;;;;;5;"Select ""Add Files"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69037
1637;RHEL7-69038;Add data file via menu and file selector;;Bohdan Milar (bmilar);Critical;Positive;Automated;531033;1;"Create sample ""data1"" text file in test directory";"there are only ""data1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69038
1637;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69038
1637;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69038
1637;;;;;;;;;4;"Select ""Add Files"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69038
1637;;;;;;;;;5;Go to test directory in file chooser;​​;;RedHatEnterpriseLinux7/RHEL7-69038
1637;;;;;;;;;6;"Find the ""data1"" file in file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69038
1637;;;;;;;;;7;"Click the ""Add"" button in the ""Select Files"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69038
1638;RHEL7-69039;Remember side panel off after brasero relaunch in data project;;Bohdan Milar (bmilar);Critical;Positive;Automated;531064;1;"Start brasero with ""-d"" parameter";side panel is unchecked;Test Case;RedHatEnterpriseLinux7/RHEL7-69039
1638;;;;;;;;;2;Turn side panel on;​​;;RedHatEnterpriseLinux7/RHEL7-69039
1638;;;;;;;;;3;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69039
1638;;;;;;;;;4;side panel is off;​​;;RedHatEnterpriseLinux7/RHEL7-69039
1638;;;;;;;;;5;side panel is unchecked;​​;;RedHatEnterpriseLinux7/RHEL7-69039
1638;;;;;;;;;6;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69039
1638;;;;;;;;;7;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69039
1638;;;;;;;;;8;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69039
1639;RHEL7-69040;New data project via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;531082;1;Make sure that brasero is running;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69040
1639;;;;;;;;;2;"Click the ""Data project"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69040
1640;RHEL7-69041;Commmand line help by -h option;;Bohdan Milar (bmilar);Critical;Positive;Automated;531107;1;"Start brasero with ""-e"" parameter";"the brasero output given by ""-h"" does not contain ""Brasero media burning library"" text";Test Case;RedHatEnterpriseLinux7/RHEL7-69041
1641;RHEL7-69042;Start Brasero twice via command --no-existing-session;;Bohdan Milar (bmilar);Critical;Positive;Automated;531119;1;"Start brasero with ""-e"" parameter";"2 instances of ""brasero"" application are running";Test Case;RedHatEnterpriseLinux7/RHEL7-69042
1641;;;;;;;;;2;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69042
1641;;;;;;;;;3;"Start brasero with ""--no-existing-session"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69042
1642;RHEL7-69043;"About dialog for the ""audio2cue"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531157;1;"Start brasero with ""-e"" parameter";"the ""audio2cue"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69043
1642;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69043
1642;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69043
1642;;;;;;;;;4;"Click the ""audio2cue"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69043
1642;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69043
1642;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69043
1642;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69043
1643;RHEL7-69044;New video project from videl project without files;;Bohdan Milar (bmilar);Critical;Positive;Automated;531181;1;"Start brasero with ""-o"" parameter";"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69044
1643;;;;;;;;;2;"name of main window should end with ""New Video Disc Project""";​​;;RedHatEnterpriseLinux7/RHEL7-69044
1643;;;;;;;;;3;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";​​;;RedHatEnterpriseLinux7/RHEL7-69044
1643;;;;;;;;;4;"Choose ""New Video Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69044
1644;RHEL7-69045;Add audio file via menu and file selector;;Bohdan Milar (bmilar);Critical;Positive;Automated;530913;1;"Copy ""audio1"" to test directory";"there are only ""audio1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69045
1644;;;;;;;;;2;"Start brasero with ""-a"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69045
1644;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69045
1644;;;;;;;;;4;"Select ""Add Files"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69045
1644;;;;;;;;;5;Go to test directory in file chooser;​​;;RedHatEnterpriseLinux7/RHEL7-69045
1644;;;;;;;;;6;"Find the ""audio1"" file in file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69045
1644;;;;;;;;;7;"Click the ""Add"" button in the ""Select Files"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69045
1645;RHEL7-69046;Set custom track title in audio metadata dialog;;Bohdan Milar (bmilar);Critical;Positive;Automated;530935;1;Prepare Brasero in audio metadata mode with dialog;"the ""Title"" metadata field contains ""Testing track""";Test Case;RedHatEnterpriseLinux7/RHEL7-69046
1645;;;;;;;;;2;"Put ""Testing track"" to ""Title"" field in metadata dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69046
1645;;;;;;;;;3;"Click the ""Apply"" button in the ""Song Information"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69046
1645;;;;;;;;;4;"the track number ""1"" on the right has ""Testing track"" as Title";​​;;RedHatEnterpriseLinux7/RHEL7-69046
1645;;;;;;;;;5;"Apply Rightclick on the track number ""1"" on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69046
1645;;;;;;;;;6;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69046
1645;;;;;;;;;7;"Click the ""Cancel"" button in the ""Song Information"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69046
1646;RHEL7-69047;Remember side panel off after brasero relaunch in audio project;;Bohdan Milar (bmilar);Critical;Positive;Automated;530945;1;"Start brasero with ""-a"" parameter";side panel is unchecked;Test Case;RedHatEnterpriseLinux7/RHEL7-69047
1646;;;;;;;;;2;Turn side panel on;​​;;RedHatEnterpriseLinux7/RHEL7-69047
1646;;;;;;;;;3;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69047
1646;;;;;;;;;4;side panel is off;​​;;RedHatEnterpriseLinux7/RHEL7-69047
1646;;;;;;;;;5;side panel is unchecked;​​;;RedHatEnterpriseLinux7/RHEL7-69047
1646;;;;;;;;;6;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69047
1646;;;;;;;;;7;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69047
1646;;;;;;;;;8;"Start brasero with ""-a"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69047
1647;RHEL7-69048;Open pls playlist via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530966;1;"Copy ""audio1"" to test directory";"the ""audio1"" item number ""1"" is in the ""Title"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69048
1647;;;;;;;;;2;"Create playlists in test directory for ""audio1""";​​;;RedHatEnterpriseLinux7/RHEL7-69048
1647;;;;;;;;;3;Make sure that brasero is running;​​;;RedHatEnterpriseLinux7/RHEL7-69048
1647;;;;;;;;;4;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69048
1647;;;;;;;;;5;"Find the ""pls"" file in file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69048
1647;;;;;;;;;6;"Click the ""Open"" button in the ""Open Project"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69048
1647;;;;;;;;;7;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69048
1648;RHEL7-69049;New audio project from audio project without files;;Bohdan Milar (bmilar);Critical;Positive;Automated;530974;1;"Start brasero with ""-a"" parameter";"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69049
1648;;;;;;;;;2;"name of main window should end with ""New Audio Disc Project""";​​;;RedHatEnterpriseLinux7/RHEL7-69049
1648;;;;;;;;;3;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";​​;;RedHatEnterpriseLinux7/RHEL7-69049
1648;;;;;;;;;4;"Choose ""New Audio Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69049
1649;RHEL7-69050;Split audio track for each silence;;Bohdan Milar (bmilar);Critical;Positive;Automated;530999;1;"Copy ""audio2"" to test directory";"there are only ""audio4"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69050
1649;;;;;;;;;2;"Insert a 10 seconds pause to 0:10.24 position in ""audio2"" and save it as ""audio4""";​​;;RedHatEnterpriseLinux7/RHEL7-69050
1649;;;;;;;;;3;"Start brasero with ""-a"" parameter and ""audio4"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69050
1649;;;;;;;;;4;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69050
1649;;;;;;;;;5;"name of main window should end with ""New Audio Disc Project""";​​;;RedHatEnterpriseLinux7/RHEL7-69050
1649;;;;;;;;;6;"there is ""1"" item named ""audio4""";​​;;RedHatEnterpriseLinux7/RHEL7-69050
1649;;;;;;;;;7;"the ""audio4"" item number ""1"" is in the ""Title"" column";​​;;RedHatEnterpriseLinux7/RHEL7-69050
1649;;;;;;;;;8;"there are only ""audio4"" items on the right side";​​;;RedHatEnterpriseLinux7/RHEL7-69050
1649;;;;;;;;;9;"Click the ""audio4"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69050
1649;;;;;;;;;10;"Click the ""Split"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69050
1649;;;;;;;;;11;"a dialog named ""Split Track"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69050
1649;;;;;;;;;12;"Select the ""Split track for each silence"" method";​​;;RedHatEnterpriseLinux7/RHEL7-69050
1649;;;;;;;;;13;"Click the ""Slice"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69050
1649;;;;;;;;;14;the track is splitted to 2 pieces;​​;;RedHatEnterpriseLinux7/RHEL7-69050
1649;;;;;;;;;15;"Click the ""OK"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69050
1650;RHEL7-69051;Add data directory via menu and file selector;;Bohdan Milar (bmilar);Critical;Positive;Automated;531012;1;"Create ""dir3"" subdirectory in test directory with ""data1"" file";"there are only ""dir3"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69051
1650;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69051
1650;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69051
1650;;;;;;;;;4;"Select ""Add Files"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69051
1650;;;;;;;;;5;Go to test directory in file chooser;​​;;RedHatEnterpriseLinux7/RHEL7-69051
1650;;;;;;;;;6;"Find the ""dir3"" file in file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69051
1650;;;;;;;;;7;"Click the ""Add"" button in the ""Select Files"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69051
1651;RHEL7-69052;Add data file via rightclick;;Bohdan Milar (bmilar);Critical;Positive;Automated;531034;1;"Create sample ""data1"" text file in test directory";"the ""data2"" item number ""2"" is in the ""Files"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69052
1651;;;;;;;;;2;"Create sample ""data2"" text file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69052
1651;;;;;;;;;3;"Start brasero with ""-d"" parameter and ""data1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69052
1651;;;;;;;;;4;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69052
1651;;;;;;;;;5;"there are ""2"" items named ""data1""";​​;;RedHatEnterpriseLinux7/RHEL7-69052
1651;;;;;;;;;6;"there is ""1"" item named ""data2""";​​;;RedHatEnterpriseLinux7/RHEL7-69052
1651;;;;;;;;;7;"Rightclick the ""data2"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69052
1651;;;;;;;;;8;"Select ""Copy Location"" from the context menu";​​;;RedHatEnterpriseLinux7/RHEL7-69052
1651;;;;;;;;;9;"Rightclick the ""data1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69052
1651;;;;;;;;;10;"Select ""Paste files"" from the context menu";​​;;RedHatEnterpriseLinux7/RHEL7-69052
1652;RHEL7-69053;Turn preview in data project on via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531065;1;"Copy ""audio1"" to test directory";preview is checked;Test Case;RedHatEnterpriseLinux7/RHEL7-69053
1652;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69053
1652;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69053
1652;;;;;;;;;4;Turn preview off;​​;;RedHatEnterpriseLinux7/RHEL7-69053
1652;;;;;;;;;5;Turn preview on via menu;​​;;RedHatEnterpriseLinux7/RHEL7-69053
1652;;;;;;;;;6;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69053
1653;RHEL7-69054;New data project via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531083;1;Make sure that brasero is running;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69054
1653;;;;;;;;;2;"Choose ""New Data Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69054
1654;RHEL7-69055;Commmand line help by -? option;;Bohdan Milar (bmilar);Critical;Positive;Automated;531108;1;"Start brasero with ""-e"" parameter";"the brasero output given by ""-?"" does not contain ""Brasero media burning library"" text";Test Case;RedHatEnterpriseLinux7/RHEL7-69055
1655;RHEL7-69056;Brasero parent window via command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531120;1;Launch terminal emulator;"name of main window should end with ""New Data Disc Project""";Test Case;RedHatEnterpriseLinux7/RHEL7-69056
1655;;;;;;;;;2;"Start brasero from terminal with ""-e"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69056
1655;;;;;;;;;3;Switch to terminal window;​​;;RedHatEnterpriseLinux7/RHEL7-69056
1655;;;;;;;;;4;"Click the ""Data project"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69056
1655;;;;;;;;;5;"name of main window should end with ""Brasero""";​​;;RedHatEnterpriseLinux7/RHEL7-69056
1655;;;;;;;;;6;Switch to terminal window;​​;;RedHatEnterpriseLinux7/RHEL7-69056
1655;;;;;;;;;7;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69056
1655;;;;;;;;;8;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69056
1655;;;;;;;;;9;Switch to terminal window;​​;;RedHatEnterpriseLinux7/RHEL7-69056
1655;;;;;;;;;10;"Start brasero from terminal with ""-x $WINDOWID"" parameters";​​;;RedHatEnterpriseLinux7/RHEL7-69056
1655;;;;;;;;;11;Switch to terminal window;​​;;RedHatEnterpriseLinux7/RHEL7-69056
1655;;;;;;;;;12;"Click the ""Data project"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69056
1655;;;;;;;;;13;"Kill ""gnome-terminal-server"" application";​​;;RedHatEnterpriseLinux7/RHEL7-69056
1656;RHEL7-69057;"About dialog for the ""cdda2wav"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531158;1;"Start brasero with ""-e"" parameter";"the ""cdda2wav"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69057
1656;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69057
1656;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69057
1656;;;;;;;;;4;"Click the ""cdda2wav"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69057
1656;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69057
1656;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69057
1656;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69057
1657;RHEL7-69058;New video project from data project without files;;Bohdan Milar (bmilar);Critical;Positive;Automated;531182;1;"Start brasero with ""-d"" parameter";"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69058
1657;;;;;;;;;2;"name of main window should end with ""New Data Disc Project""";​​;;RedHatEnterpriseLinux7/RHEL7-69058
1657;;;;;;;;;3;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";​​;;RedHatEnterpriseLinux7/RHEL7-69058
1657;;;;;;;;;4;"Choose ""New Video Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69058
1658;RHEL7-69059;Add audio file via rightclick;;Bohdan Milar (bmilar);Critical;Positive;Automated;530914;1;"Copy ""audio1"" to test directory";"there are only ""audio1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69059
1658;;;;;;;;;2;"Start brasero with ""-a"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69059
1658;;;;;;;;;3;Make side panel visible;​​;;RedHatEnterpriseLinux7/RHEL7-69059
1658;;;;;;;;;4;"Switch to ""Downloads"" directory in side panel";​​;;RedHatEnterpriseLinux7/RHEL7-69059
1658;;;;;;;;;5;"there is ""1"" item named ""audio1""";​​;;RedHatEnterpriseLinux7/RHEL7-69059
1658;;;;;;;;;6;"Switch to ""Home"" directory in side panel";​​;;RedHatEnterpriseLinux7/RHEL7-69059
1658;;;;;;;;;7;"Doubleclick the ""test"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69059
1658;;;;;;;;;8;"there are ""2"" items named ""audio1""";​​;;RedHatEnterpriseLinux7/RHEL7-69059
1658;;;;;;;;;9;"Rightclick the ""audio1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69059
1658;;;;;;;;;10;"Select ""Copy Location"" from the context menu";​​;;RedHatEnterpriseLinux7/RHEL7-69059
1658;;;;;;;;;11;"Rightclick the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69059
1658;;;;;;;;;12;"Select ""Paste files"" from the context menu";​​;;RedHatEnterpriseLinux7/RHEL7-69059
1659;RHEL7-69060;Set custom artist in audio metadata dialog;;Bohdan Milar (bmilar);Critical;Positive;Automated;530936;1;Prepare Brasero in audio metadata mode with dialog;"the ""Artist"" metadata field contains ""Tester Artist""";Test Case;RedHatEnterpriseLinux7/RHEL7-69060
1659;;;;;;;;;2;"Put ""Tester Artist"" to ""Artist"" field in metadata dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69060
1659;;;;;;;;;3;"Click the ""Apply"" button in the ""Song Information"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69060
1659;;;;;;;;;4;"the track number ""1"" on the right has ""Tester Artist"" as Artist";​​;;RedHatEnterpriseLinux7/RHEL7-69060
1659;;;;;;;;;5;"Apply Rightclick on the track number ""1"" on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69060
1659;;;;;;;;;6;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69060
1659;;;;;;;;;7;"Click the ""Cancel"" button in the ""Song Information"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69060
1660;RHEL7-69061;Turn preview in audio project on via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530946;1;"Copy ""audio1"" to test directory";preview is checked;Test Case;RedHatEnterpriseLinux7/RHEL7-69061
1660;;;;;;;;;2;"Start brasero with ""-a"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69061
1660;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69061
1660;;;;;;;;;4;Turn preview off;​​;;RedHatEnterpriseLinux7/RHEL7-69061
1660;;;;;;;;;5;Turn preview on via menu;​​;;RedHatEnterpriseLinux7/RHEL7-69061
1660;;;;;;;;;6;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69061
1661;RHEL7-69062;Open pls playlist via key shortcup;;Bohdan Milar (bmilar);Critical;Positive;Automated;530967;1;"Copy ""audio1"" to test directory";"the ""audio1"" item number ""1"" is in the ""Title"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69062
1661;;;;;;;;;2;"Create playlists in test directory for ""audio1""";​​;;RedHatEnterpriseLinux7/RHEL7-69062
1661;;;;;;;;;3;Make sure that brasero is running;​​;;RedHatEnterpriseLinux7/RHEL7-69062
1661;;;;;;;;;4;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69062
1661;;;;;;;;;5;"Find the ""pls"" file in file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69062
1661;;;;;;;;;6;"Click the ""Open"" button in the ""Open Project"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69062
1661;;;;;;;;;7;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69062
1662;RHEL7-69063;New audio project from audio project with file - cancel;;Bohdan Milar (bmilar);Critical;Positive;Automated;530975;1;Prepare Brasero in audio mode with file;"there are only ""audio1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69063
1662;;;;;;;;;2;"Choose ""New Audio Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69063
1662;;;;;;;;;3;"an alert named ""Warning"" containing ""Do you really want to create a new project"" in label is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69063
1662;;;;;;;;;4;"Click the ""Cancel"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69063
1663;RHEL7-69064;Split audio track and cancel the dialog;;Bohdan Milar (bmilar);Critical;Positive;Automated;531000;1;Prepare Brasero in audio split mode with dialog;"there is ""1"" item named ""audio2""";Test Case;RedHatEnterpriseLinux7/RHEL7-69064
1663;;;;;;;;;2;"Select the ""Split track in a fixed number of parts"" method";​​;;RedHatEnterpriseLinux7/RHEL7-69064
1663;;;;;;;;;3;"Set split track in ""4"" parts";​​;;RedHatEnterpriseLinux7/RHEL7-69064
1663;;;;;;;;;4;"Click the ""Slice"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69064
1663;;;;;;;;;5;"Click the ""Split"" button in the ""Question"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69064
1663;;;;;;;;;6;the track is splitted to 4 pieces;​​;;RedHatEnterpriseLinux7/RHEL7-69064
1663;;;;;;;;;7;"Click the ""Cancel"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69064
1664;RHEL7-69065;Add data directory via rightclick;;Bohdan Milar (bmilar);Critical;Positive;Automated;531013;1;"Create sample ""data1"" text file in test directory";"the ""dir3"" item number ""2"" is in the ""Files"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69065
1664;;;;;;;;;2;"Create ""dir3"" subdirectory in test directory with ""data2"" file";​​;;RedHatEnterpriseLinux7/RHEL7-69065
1664;;;;;;;;;3;"Start brasero with ""-d"" parameter and ""data1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69065
1664;;;;;;;;;4;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69065
1664;;;;;;;;;5;"there are ""2"" items named ""data1""";​​;;RedHatEnterpriseLinux7/RHEL7-69065
1664;;;;;;;;;6;"there are no items named ""data2""";​​;;RedHatEnterpriseLinux7/RHEL7-69065
1664;;;;;;;;;7;"there is ""1"" item named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69065
1664;;;;;;;;;8;"Rightclick the ""dir3"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69065
1664;;;;;;;;;9;"Select ""Copy Location"" from the context menu";​​;;RedHatEnterpriseLinux7/RHEL7-69065
1664;;;;;;;;;10;"Rightclick the ""data1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69065
1664;;;;;;;;;11;"Select ""Paste files"" from the context menu";​​;;RedHatEnterpriseLinux7/RHEL7-69065
1665;RHEL7-69066;Add data file via drag and drop;;Bohdan Milar (bmilar);Critical;Positive;Automated;531035;1;"Create sample ""data1"" text file in test directory";"there are only ""data1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69066
1665;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69066
1665;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69066
1665;;;;;;;;;4;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69066
1665;;;;;;;;;5;Arrange brasero window to the left;​​;;RedHatEnterpriseLinux7/RHEL7-69066
1665;;;;;;;;;6;Launch nautilus in test directory;​​;;RedHatEnterpriseLinux7/RHEL7-69066
1665;;;;;;;;;7;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69066
1665;;;;;;;;;8;Arrange nautilus window to the right;​​;;RedHatEnterpriseLinux7/RHEL7-69066
1665;;;;;;;;;9;"Drag ""data1"" item from nautilus to brasero";​​;;RedHatEnterpriseLinux7/RHEL7-69066
1665;;;;;;;;;10;Close nautilus window;​​;;RedHatEnterpriseLinux7/RHEL7-69066
1666;RHEL7-69067;Turn preview in data project on via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;531066;1;"Copy ""audio1"" to test directory";preview is checked;Test Case;RedHatEnterpriseLinux7/RHEL7-69067
1666;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69067
1666;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69067
1666;;;;;;;;;4;Turn preview off;​​;;RedHatEnterpriseLinux7/RHEL7-69067
1666;;;;;;;;;5;Turn preview on via key;​​;;RedHatEnterpriseLinux7/RHEL7-69067
1666;;;;;;;;;6;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69067
1667;RHEL7-69068;New data project from data project without files;;Bohdan Milar (bmilar);Critical;Positive;Automated;531084;1;"Start brasero with ""-d"" parameter";"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69068
1667;;;;;;;;;2;"name of main window should end with ""New Data Disc Project""";​​;;RedHatEnterpriseLinux7/RHEL7-69068
1667;;;;;;;;;3;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";​​;;RedHatEnterpriseLinux7/RHEL7-69068
1667;;;;;;;;;4;"Choose ""New Data Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69068
1668;RHEL7-69069;Commmand line help by --help-all option;;Bohdan Milar (bmilar);Critical;Positive;Automated;531109;1;"Start brasero with ""-e"" parameter";"the brasero output given by ""--help-all"" contains ""Brasero media burning library"" text";Test Case;RedHatEnterpriseLinux7/RHEL7-69069
1669;RHEL7-69070;Open Copy CD/DVD dialog via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;531121;1;"Start brasero with ""-e"" parameter";"a dialog named ""Copy CD/DVD"" containing ""Select disc to copy"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69070
1669;;;;;;;;;2;"name of main window should end with ""Brasero""";​​;;RedHatEnterpriseLinux7/RHEL7-69070
1669;;;;;;;;;3;"Click the ""Disc copy"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69070
1669;;;;;;;;;4;"Click the ""Cancel"" button in the ""Copy CD/DVD"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69070
1670;RHEL7-69071;"About dialog for the ""CD/DVD Creator Folder"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531159;1;"Start brasero with ""-e"" parameter";"the ""CD/DVD Creator Folder"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69071
1670;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69071
1670;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69071
1670;;;;;;;;;4;"Click the ""CD/DVD Creator Folder"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69071
1670;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69071
1670;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69071
1670;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69071
1671;RHEL7-69072;New video project from data project - cancel;;Bohdan Milar (bmilar);Critical;Positive;Automated;531183;1;Prepare Brasero in data mode with file;"there are only ""data1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69072
1671;;;;;;;;;2;"Choose ""New Video Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69072
1671;;;;;;;;;3;"an alert named ""Warning"" containing ""Do you want to discard the file selection"" in label is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69072
1671;;;;;;;;;4;"Click the ""Cancel"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69072
1671;;;;;;;;;5;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69072
1672;RHEL7-69073;Add audio file via drag and drop;;Bohdan Milar (bmilar);Critical;Positive;Automated;530915;1;"Copy ""audio1"" to test directory";"there are only ""audio1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69073
1672;;;;;;;;;2;"Start brasero with ""-a"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69073
1672;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69073
1672;;;;;;;;;4;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69073
1672;;;;;;;;;5;Arrange brasero window to the left;​​;;RedHatEnterpriseLinux7/RHEL7-69073
1672;;;;;;;;;6;Launch nautilus in test directory;​​;;RedHatEnterpriseLinux7/RHEL7-69073
1672;;;;;;;;;7;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69073
1672;;;;;;;;;8;Arrange nautilus window to the right;​​;;RedHatEnterpriseLinux7/RHEL7-69073
1672;;;;;;;;;9;"Drag ""audio1"" item from nautilus to brasero";​​;;RedHatEnterpriseLinux7/RHEL7-69073
1672;;;;;;;;;10;Close nautilus window;​​;;RedHatEnterpriseLinux7/RHEL7-69073
1673;RHEL7-69074;Set custom composer in audio metadata dialog;;Bohdan Milar (bmilar);Critical;Positive;Automated;530937;1;Prepare Brasero in audio metadata mode with dialog;"the ""Composer"" metadata field contains ""Tester Composer""";Test Case;RedHatEnterpriseLinux7/RHEL7-69074
1673;;;;;;;;;2;"Put ""Tester Composer"" to ""Composer"" field in metadata dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69074
1673;;;;;;;;;3;"Click the ""Apply"" button in the ""Song Information"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69074
1673;;;;;;;;;4;"Apply Rightclick on the track number ""1"" on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69074
1673;;;;;;;;;5;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69074
1673;;;;;;;;;6;"Click the ""Cancel"" button in the ""Song Information"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69074
1674;RHEL7-69075;Turn preview in audio project on via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;530947;1;"Copy ""audio1"" to test directory";preview is checked;Test Case;RedHatEnterpriseLinux7/RHEL7-69075
1674;;;;;;;;;2;"Start brasero with ""-a"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69075
1674;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69075
1674;;;;;;;;;4;Turn preview off;​​;;RedHatEnterpriseLinux7/RHEL7-69075
1674;;;;;;;;;5;Turn preview on via key;​​;;RedHatEnterpriseLinux7/RHEL7-69075
1674;;;;;;;;;6;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69075
1675;RHEL7-69076;New audio project from audio project with file - Discard Project;;Bohdan Milar (bmilar);Critical;Positive;Automated;530976;1;Prepare Brasero in audio mode with file;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69076
1675;;;;;;;;;2;"Choose ""New Audio Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69076
1675;;;;;;;;;3;"an alert named ""Warning"" containing ""Do you really want to create a new project and discard the current one?"" in label is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69076
1675;;;;;;;;;4;"Click the ""Discard Project"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69076
1676;RHEL7-69077;Split audio track and remove one part;;Bohdan Milar (bmilar);Critical;Positive;Automated;531001;1;Prepare Brasero in audio split mode with dialog;"there are only ""audio2"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69077
1676;;;;;;;;;2;"Select the ""Split track in a fixed number of parts"" method";​​;;RedHatEnterpriseLinux7/RHEL7-69077
1676;;;;;;;;;3;"Set split track in ""4"" parts";​​;;RedHatEnterpriseLinux7/RHEL7-69077
1676;;;;;;;;;4;"Click the ""Slice"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69077
1676;;;;;;;;;5;"Click the ""Split"" button in the ""Question"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69077
1676;;;;;;;;;6;the track is splitted to 4 pieces;​​;;RedHatEnterpriseLinux7/RHEL7-69077
1676;;;;;;;;;7;"Select the ""00 min"" table item";​​;;RedHatEnterpriseLinux7/RHEL7-69077
1676;;;;;;;;;8;"Click the ""Remove"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69077
1676;;;;;;;;;9;the track is splitted to 3 pieces;​​;;RedHatEnterpriseLinux7/RHEL7-69077
1676;;;;;;;;;10;"Click the ""OK"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69077
1677;RHEL7-69078;Add data directory via drag and drop;;Bohdan Milar (bmilar);Critical;Positive;Automated;531014;1;"Create ""dir3"" subdirectory in test directory with ""data1"" file";"there are only ""dir3"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69078
1677;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69078
1677;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69078
1677;;;;;;;;;4;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69078
1677;;;;;;;;;5;Arrange brasero window to the left;​​;;RedHatEnterpriseLinux7/RHEL7-69078
1677;;;;;;;;;6;Launch nautilus in test directory;​​;;RedHatEnterpriseLinux7/RHEL7-69078
1677;;;;;;;;;7;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69078
1677;;;;;;;;;8;Arrange nautilus window to the right;​​;;RedHatEnterpriseLinux7/RHEL7-69078
1677;;;;;;;;;9;"Drag ""dir3"" item from nautilus to brasero";​​;;RedHatEnterpriseLinux7/RHEL7-69078
1677;;;;;;;;;10;Close nautilus window;​​;;RedHatEnterpriseLinux7/RHEL7-69078
1678;RHEL7-69079;Add data file with UTF file name;;Bohdan Milar (bmilar);Critical;Positive;Automated;531036;1;"Create sample ""data_utf"" text file in test directory";"there are only ""data_utf"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69079
1678;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69079
1678;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69079
1678;;;;;;;;;4;"Click the ""data_utf"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69079
1678;;;;;;;;;5;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69079
1679;RHEL7-69080;Turn preview in data project off via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531067;1;"Copy ""audio1"" to test directory";preview is unchecked;Test Case;RedHatEnterpriseLinux7/RHEL7-69080
1679;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69080
1679;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69080
1679;;;;;;;;;4;Turn preview on;​​;;RedHatEnterpriseLinux7/RHEL7-69080
1679;;;;;;;;;5;Turn preview off via menu;​​;;RedHatEnterpriseLinux7/RHEL7-69080
1679;;;;;;;;;6;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69080
1680;RHEL7-69081;New data project from data project with file - Cancel;;Bohdan Milar (bmilar);Critical;Positive;Automated;531085;1;Prepare Brasero in data mode with file;"there are only ""data1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69081
1680;;;;;;;;;2;"Choose ""New Data Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69081
1680;;;;;;;;;3;"an alert named ""Warning"" containing ""Do you really want to create a new project"" in label is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69081
1680;;;;;;;;;4;"Click the ""Cancel"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69081
1681;RHEL7-69082;Commmand line help by --help-gtk option;;Bohdan Milar (bmilar);Critical;Positive;Automated;531110;1;"Start brasero with ""-e"" parameter";"the brasero output given by ""--help-gtk"" does not contain ""Brasero media burning library"" text";Test Case;RedHatEnterpriseLinux7/RHEL7-69082
1682;RHEL7-69083;Open Copy CD/DVD dialog via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531122;1;"Start brasero with ""-e"" parameter";"a dialog named ""Copy CD/DVD"" containing ""Select disc to copy"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69083
1682;;;;;;;;;2;"name of main window should end with ""Brasero""";​​;;RedHatEnterpriseLinux7/RHEL7-69083
1682;;;;;;;;;3;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69083
1682;;;;;;;;;4;"Click the ""Cancel"" button in the ""Copy CD/DVD"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69083
1683;RHEL7-69084;"About dialog for the ""cdrdao"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531160;1;"Start brasero with ""-e"" parameter";"the ""cdrdao"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69084
1683;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69084
1683;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69084
1683;;;;;;;;;4;"Click the ""cdrdao"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69084
1683;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69084
1683;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69084
1683;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69084
1684;RHEL7-69085;New video project from data project with file - Discard Project;;Bohdan Milar (bmilar);Critical;Positive;Automated;531184;1;Prepare Brasero in data mode with file;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69085
1684;;;;;;;;;2;"Choose ""New Video Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69085
1684;;;;;;;;;3;"an alert named ""Warning"" containing ""Do you want to discard the file selection"" in label is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69085
1684;;;;;;;;;4;"Click the ""Discard File Selection"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69085
1685;RHEL7-69086;Remove audio file via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;530916;1;Prepare Brasero in audio mode with file;"there are no items named ""audio1""";Test Case;RedHatEnterpriseLinux7/RHEL7-69086
1685;;;;;;;;;2;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69086
1685;;;;;;;;;3;"Click the ""Remove"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69086
1686;RHEL7-69087;Set custom ISRC in audio metadata dialog;;Bohdan Milar (bmilar);Critical;Positive;Automated;530938;1;Prepare Brasero in audio metadata mode with dialog;"the ""ISRC"" metadata field contains ""CCXXX0011111""";Test Case;RedHatEnterpriseLinux7/RHEL7-69087
1686;;;;;;;;;2;"Put ""CCXXX0011111"" to ""ISRC"" field in metadata dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69087
1686;;;;;;;;;3;"Click the ""Apply"" button in the ""Song Information"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69087
1686;;;;;;;;;4;"Apply Rightclick on the track number ""1"" on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69087
1686;;;;;;;;;5;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69087
1686;;;;;;;;;6;"Click the ""Cancel"" button in the ""Song Information"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69087
1687;RHEL7-69088;Turn preview in audio project off via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530948;1;"Copy ""audio1"" to test directory";preview is unchecked;Test Case;RedHatEnterpriseLinux7/RHEL7-69088
1687;;;;;;;;;2;"Start brasero with ""-a"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69088
1687;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69088
1687;;;;;;;;;4;Turn preview on;​​;;RedHatEnterpriseLinux7/RHEL7-69088
1687;;;;;;;;;5;Turn preview off via menu;​​;;RedHatEnterpriseLinux7/RHEL7-69088
1687;;;;;;;;;6;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69088
1688;RHEL7-69089;New audio project changed from data;;Bohdan Milar (bmilar);Critical;Positive;Automated;530977;1;"Start brasero with ""-d"" parameter";"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69089
1688;;;;;;;;;2;"name of main window should end with ""New Data Disc Project""";​​;;RedHatEnterpriseLinux7/RHEL7-69089
1688;;;;;;;;;3;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";​​;;RedHatEnterpriseLinux7/RHEL7-69089
1688;;;;;;;;;4;"Choose ""New Audio Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69089
1689;RHEL7-69090;Split audio track and remove all parts;;Bohdan Milar (bmilar);Critical;Positive;Automated;531002;1;Prepare Brasero in audio split mode with dialog;"there is ""1"" item named ""audio2""";Test Case;RedHatEnterpriseLinux7/RHEL7-69090
1689;;;;;;;;;2;"Select the ""Split track in a fixed number of parts"" method";​​;;RedHatEnterpriseLinux7/RHEL7-69090
1689;;;;;;;;;3;"Set split track in ""4"" parts";​​;;RedHatEnterpriseLinux7/RHEL7-69090
1689;;;;;;;;;4;"Click the ""Slice"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69090
1689;;;;;;;;;5;"Click the ""Split"" button in the ""Question"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69090
1689;;;;;;;;;6;the track is splitted to 4 pieces;​​;;RedHatEnterpriseLinux7/RHEL7-69090
1689;;;;;;;;;7;"Click the ""Remove All"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69090
1689;;;;;;;;;8;"Click the ""Remove All"" button in the ""Question"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69090
1689;;;;;;;;;9;the track is splitted to 0 pieces;​​;;RedHatEnterpriseLinux7/RHEL7-69090
1689;;;;;;;;;10;"Click the ""Cancel"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69090
1690;RHEL7-69091;Add data directory from command line;;Bohdan Milar (bmilar);Critical;Positive;Automated;531015;1;Prepare Brasero in data mode with subdirectory;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-69091
1691;RHEL7-69092;Add data files with long filenames - MS Windows compatibility;;Bohdan Milar (bmilar);Critical;Positive;Automated;531037;1;"Create sample ""long1"" text file in test directory";"the ""long3cut"" item number ""1"" is in the ""Files"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;2;"Create sample ""long2"" text file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;3;"Create sample ""long3"" text file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;4;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;5;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;6;"name of main window should end with ""New Data Disc Project""";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;7;"there is ""1"" item named ""long1""";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;8;"there is ""1"" item named ""long2""";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;9;"there is ""1"" item named ""long3""";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;10;"Click the ""long1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;11;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;12;"the ""alert"" named ""Warning"" is not displayed";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;13;"there are ""2"" items named ""long1""";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;14;"the ""long1"" item number ""2"" is in the ""Files"" column";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;15;"there are only ""long1"" items on the right side";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;16;"Click the ""long2"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;17;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;18;"an alert named ""Warning"" containing ""Should files be renamed to be fully Windows-compatible?"" in label is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;19;"Click the ""Rename for Full Windows Compatibility"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;20;"there is ""1"" item named ""long2""";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;21;"there is ""1"" item named ""long2cut""";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;22;"the ""long2cut"" item number ""1"" is in the ""Files"" column";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;23;"Click the ""long3"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1691;;;;;;;;;24;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69092
1692;RHEL7-69093;Turn preview in data project off via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;531068;1;"Copy ""audio1"" to test directory";preview is unchecked;Test Case;RedHatEnterpriseLinux7/RHEL7-69093
1692;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69093
1692;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69093
1692;;;;;;;;;4;Turn preview on;​​;;RedHatEnterpriseLinux7/RHEL7-69093
1692;;;;;;;;;5;Turn preview off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69093
1692;;;;;;;;;6;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69093
1693;RHEL7-69094;New data project from data project with file - Discard Project;;Bohdan Milar (bmilar);Critical;Positive;Automated;531086;1;Prepare Brasero in data mode with file;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69094
1693;;;;;;;;;2;"Choose ""New Data Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69094
1693;;;;;;;;;3;"an alert named ""Warning"" containing ""Do you really want to create a new project and discard the current one?"" in label is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69094
1693;;;;;;;;;4;"Click the ""Discard Project"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69094
1694;RHEL7-69095;Commmand line help by --help-brasero-media option;;Bohdan Milar (bmilar);Critical;Positive;Automated;531111;1;"Start brasero with ""-e"" parameter";"the brasero output given by ""--help-brasero-media"" does not contain ""Brasero media burning library"" text";Test Case;RedHatEnterpriseLinux7/RHEL7-69095
1695;RHEL7-69096;Open Copy CD/DVD dialog via command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531123;1;"Start brasero with ""-c"" parameter";"a dialog named ""Copy CD/DVD"" containing ""Select disc to copy"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69096
1695;;;;;;;;;2;"Click the ""Cancel"" button in the ""Copy CD/DVD"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69096
1696;RHEL7-69097;"About dialog for the ""cdrecord"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531161;1;"Start brasero with ""-e"" parameter";"the ""cdrecord"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69097
1696;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69097
1696;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69097
1696;;;;;;;;;4;"Click the ""cdrecord"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69097
1696;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69097
1696;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69097
1696;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69097
1697;RHEL7-69098;New video project changed from audio;;Bohdan Milar (bmilar);Critical;Positive;Automated;531185;1;"Start brasero with ""-a"" parameter";"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69098
1697;;;;;;;;;2;"name of main window should end with ""New Audio Disc Project""";​​;;RedHatEnterpriseLinux7/RHEL7-69098
1697;;;;;;;;;3;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";​​;;RedHatEnterpriseLinux7/RHEL7-69098
1697;;;;;;;;;4;"Choose ""New Video Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69098
1698;RHEL7-69099;Remove audio file via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;530917;1;Prepare Brasero in audio mode with file;"there are no items named ""audio1""";Test Case;RedHatEnterpriseLinux7/RHEL7-69099
1698;;;;;;;;;2;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69099
1698;;;;;;;;;3;"Press key ""Delete""";​​;;RedHatEnterpriseLinux7/RHEL7-69099
1699;RHEL7-69100;Turn preview in audio project off via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;530949;1;"Copy ""audio1"" to test directory";preview is unchecked;Test Case;RedHatEnterpriseLinux7/RHEL7-69100
1699;;;;;;;;;2;"Start brasero with ""-a"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69100
1699;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69100
1699;;;;;;;;;4;Turn preview on;​​;;RedHatEnterpriseLinux7/RHEL7-69100
1699;;;;;;;;;5;Turn preview off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69100
1699;;;;;;;;;6;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69100
1700;RHEL7-69101;New audio project changed from data with file - discard;;Bohdan Milar (bmilar);Critical;Positive;Automated;530978;1;"Copy ""audio1"" to test directory";"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69101
1700;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69101
1700;;;;;;;;;3;"Choose ""New Audio Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69101
1700;;;;;;;;;4;"an alert named ""Warning"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69101
1700;;;;;;;;;5;"Click the ""Discard File Selection"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69101
1701;RHEL7-69102;Split audio track and cancel remove of all parts;;Bohdan Milar (bmilar);Critical;Positive;Automated;531003;1;Prepare Brasero in audio split mode with dialog;"there are only ""audio2"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69102
1701;;;;;;;;;2;"Select the ""Split track in a fixed number of parts"" method";​​;;RedHatEnterpriseLinux7/RHEL7-69102
1701;;;;;;;;;3;"Set split track in ""4"" parts";​​;;RedHatEnterpriseLinux7/RHEL7-69102
1701;;;;;;;;;4;"Click the ""Slice"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69102
1701;;;;;;;;;5;"Click the ""Split"" button in the ""Question"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69102
1701;;;;;;;;;6;the track is splitted to 4 pieces;​​;;RedHatEnterpriseLinux7/RHEL7-69102
1701;;;;;;;;;7;"Click the ""Remove All"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69102
1701;;;;;;;;;8;"Click the ""Cancel"" button in the ""Question"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69102
1701;;;;;;;;;9;the track is splitted to 4 pieces;​​;;RedHatEnterpriseLinux7/RHEL7-69102
1701;;;;;;;;;10;"Click the ""OK"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69102
1702;RHEL7-69103;Add data directory with UTF characters in name;;Bohdan Milar (bmilar);Critical;Positive;Automated;531016;1;"Create ""dir_utf"" subdirectory in test directory with ""data1"" file";"there are only ""dir_utf"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69103
1702;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""dir_utf"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69103
1702;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69103
1703;RHEL7-69104;Add data files with long filenames - no MS Windows compatibility;;Bohdan Milar (bmilar);Critical;Positive;Automated;531038;1;"Create sample ""long1"" text file in test directory";"the ""long3"" item number ""2"" is in the ""Files"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;2;"Create sample ""long2"" text file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;3;"Create sample ""long3"" text file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;4;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;5;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;6;"name of main window should end with ""New Data Disc Project""";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;7;"there is ""1"" item named ""long1""";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;8;"there is ""1"" item named ""long2""";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;9;"there is ""1"" item named ""long3""";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;10;"Click the ""long1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;11;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;12;"the ""alert"" named ""Warning"" is not displayed";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;13;"there are ""2"" items named ""long1""";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;14;"the ""long1"" item number ""2"" is in the ""Files"" column";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;15;"there are only ""long1"" items on the right side";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;16;"Click the ""long2"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;17;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;18;"an alert named ""Warning"" containing ""Should files be renamed to be fully Windows-compatible?"" in label is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;19;"Click the ""Disable Full Windows Compatibility"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;20;"there are ""2"" items named ""long2""";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;21;"the ""long2"" item number ""2"" is in the ""Files"" column";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;22;"Click the ""long3"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1703;;;;;;;;;23;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69104
1704;RHEL7-69105;Remember preview on after brasero relaunch in data project;;Bohdan Milar (bmilar);Critical;Positive;Automated;531069;1;"Copy ""audio1"" to test directory";preview is checked;Test Case;RedHatEnterpriseLinux7/RHEL7-69105
1704;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69105
1704;;;;;;;;;3;Turn preview off;​​;;RedHatEnterpriseLinux7/RHEL7-69105
1704;;;;;;;;;4;Turn preview on via key;​​;;RedHatEnterpriseLinux7/RHEL7-69105
1704;;;;;;;;;5;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69105
1704;;;;;;;;;6;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69105
1704;;;;;;;;;7;preview is on;​​;;RedHatEnterpriseLinux7/RHEL7-69105
1704;;;;;;;;;8;preview is checked;​​;;RedHatEnterpriseLinux7/RHEL7-69105
1704;;;;;;;;;9;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69105
1704;;;;;;;;;10;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69105
1704;;;;;;;;;11;"Start brasero with ""-d"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69105
1704;;;;;;;;;12;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69105
1704;;;;;;;;;13;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69105
1705;RHEL7-69106;New data project changed from audio;;Bohdan Milar (bmilar);Critical;Positive;Automated;531087;1;"Start brasero with ""-a"" parameter";"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69106
1705;;;;;;;;;2;"name of main window should end with ""New Audio Disc Project""";​​;;RedHatEnterpriseLinux7/RHEL7-69106
1705;;;;;;;;;3;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";​​;;RedHatEnterpriseLinux7/RHEL7-69106
1705;;;;;;;;;4;"Choose ""New Data Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69106
1706;RHEL7-69107;Commmand line help by --help-brasero-burn option;;Bohdan Milar (bmilar);Critical;Positive;Automated;531112;1;"Start brasero with ""-e"" parameter";"the brasero output given by ""--help-brasero-burn"" contains ""Brasero media burning library"" text";Test Case;RedHatEnterpriseLinux7/RHEL7-69107
1707;RHEL7-69108;Open Copy CD/DVD dialog via long command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531124;1;"Start brasero with ""--copy"" parameter";"a dialog named ""Copy CD/DVD"" containing ""Select disc to copy"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69108
1707;;;;;;;;;2;"Click the ""Cancel"" button in the ""Copy CD/DVD"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69108
1708;RHEL7-69109;"About dialog for the ""dvdauthor"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531162;1;"Start brasero with ""-e"" parameter";"the ""dvdauthor"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69109
1708;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69109
1708;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69109
1708;;;;;;;;;4;"Click the ""dvdauthor"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69109
1708;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69109
1708;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69109
1708;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69109
1709;RHEL7-69110;New video project changed from audio with file - cancel;;Bohdan Milar (bmilar);Critical;Positive;Automated;531186;1;Prepare Brasero in audio mode with file;"there are only ""audio1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69110
1709;;;;;;;;;2;"Choose ""New Video Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69110
1709;;;;;;;;;3;"an alert named ""Warning"" containing ""Do you really want to create a new project"" in label is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69110
1709;;;;;;;;;4;"Click the ""Cancel"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69110
1709;;;;;;;;;5;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69110
1710;RHEL7-69111;Remove audio file via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530918;1;Prepare Brasero in audio mode with file;"there are no items named ""audio1""";Test Case;RedHatEnterpriseLinux7/RHEL7-69111
1710;;;;;;;;;2;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69111
1710;;;;;;;;;3;"Select ""Remove Files"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69111
1711;RHEL7-69112;Remember preview on after brasero relaunch in audio project;;Bohdan Milar (bmilar);Critical;Positive;Automated;530950;1;"Copy ""audio1"" to test directory";preview is checked;Test Case;RedHatEnterpriseLinux7/RHEL7-69112
1711;;;;;;;;;2;"Start brasero with ""-a"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69112
1711;;;;;;;;;3;Turn preview off;​​;;RedHatEnterpriseLinux7/RHEL7-69112
1711;;;;;;;;;4;Turn preview on via key;​​;;RedHatEnterpriseLinux7/RHEL7-69112
1711;;;;;;;;;5;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69112
1711;;;;;;;;;6;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69112
1711;;;;;;;;;7;preview is on;​​;;RedHatEnterpriseLinux7/RHEL7-69112
1711;;;;;;;;;8;preview is checked;​​;;RedHatEnterpriseLinux7/RHEL7-69112
1711;;;;;;;;;9;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69112
1711;;;;;;;;;10;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69112
1711;;;;;;;;;11;"Start brasero with ""-a"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69112
1711;;;;;;;;;12;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69112
1711;;;;;;;;;13;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69112
1712;RHEL7-69113;New audio project changed from data with file - keep;;Bohdan Milar (bmilar);Critical;Positive;Automated;530979;1;"Copy ""audio1"" to test directory";"there are only ""audio1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69113
1712;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69113
1712;;;;;;;;;3;"Choose ""New Audio Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69113
1712;;;;;;;;;4;"an alert named ""Warning"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69113
1712;;;;;;;;;5;"Click the ""Keep File Selection"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69113
1712;;;;;;;;;6;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69113
1713;RHEL7-69114;Split audio track and merge parts 2 and 3;;Bohdan Milar (bmilar);Critical;Positive;Automated;531004;1;Prepare Brasero in audio split mode with dialog;"there are only ""audio2"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69114
1713;;;;;;;;;2;"Select the ""Split track in a fixed number of parts"" method";​​;;RedHatEnterpriseLinux7/RHEL7-69114
1713;;;;;;;;;3;"Set split track in ""4"" parts";​​;;RedHatEnterpriseLinux7/RHEL7-69114
1713;;;;;;;;;4;"Click the ""Slice"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69114
1713;;;;;;;;;5;"Click the ""Split"" button in the ""Question"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69114
1713;;;;;;;;;6;the track is splitted to 4 pieces;​​;;RedHatEnterpriseLinux7/RHEL7-69114
1713;;;;;;;;;7;"Select the ""00:10 min"" table item";​​;;RedHatEnterpriseLinux7/RHEL7-69114
1713;;;;;;;;;8;"Select the ""00:15 min"" table item with ""Control_L""";​​;;RedHatEnterpriseLinux7/RHEL7-69114
1713;;;;;;;;;9;"Click the ""Merge"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69114
1713;;;;;;;;;10;the track is splitted to 3 pieces;​​;;RedHatEnterpriseLinux7/RHEL7-69114
1713;;;;;;;;;11;"Click the ""OK"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69114
1714;RHEL7-69115;Data project rename via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;531017;1;"Start brasero with ""-d"" parameter";"there is ""1"" item named ""dir3""";Test Case;RedHatEnterpriseLinux7/RHEL7-69115
1714;;;;;;;;;2;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69115
1714;;;;;;;;;3;"Click the ""New Folder"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69115
1714;;;;;;;;;4;"Invoke ""< >"" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69115
1714;;;;;;;;;5;"Click the ""New Folder"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69115
1714;;;;;;;;;6;"Invoke ""< >"" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69115
1714;;;;;;;;;7;"Click the ""dir2"" name on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69115
1714;;;;;;;;;8;"Press key ""KP_Space""";​​;;RedHatEnterpriseLinux7/RHEL7-69115
1714;;;;;;;;;9;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69115
1714;;;;;;;;;10;"Type the ""dir3"" filename";​​;;RedHatEnterpriseLinux7/RHEL7-69115
1714;;;;;;;;;11;"Press key ""Return""";​​;;RedHatEnterpriseLinux7/RHEL7-69115
1715;RHEL7-69116;Add data file with long filename from command line;;Bohdan Milar (bmilar);Critical;Positive;Automated;531039;1;"Create sample ""long3"" text file in test directory";"the ""long3cut"" item number ""1"" is in the ""Files"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69116
1715;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""long3"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69116
1715;;;;;;;;;3;"Click the ""Rename for Full Windows Compatibility"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69116
1716;RHEL7-69117;Remember preview off after brasero relaunch in data project;;Bohdan Milar (bmilar);Critical;Positive;Automated;531070;1;"Copy ""audio1"" to test directory";preview is unchecked;Test Case;RedHatEnterpriseLinux7/RHEL7-69117
1716;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69117
1716;;;;;;;;;3;Turn preview on;​​;;RedHatEnterpriseLinux7/RHEL7-69117
1716;;;;;;;;;4;Turn preview off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69117
1716;;;;;;;;;5;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69117
1716;;;;;;;;;6;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69117
1716;;;;;;;;;7;preview is off;​​;;RedHatEnterpriseLinux7/RHEL7-69117
1716;;;;;;;;;8;preview is unchecked;​​;;RedHatEnterpriseLinux7/RHEL7-69117
1716;;;;;;;;;9;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69117
1716;;;;;;;;;10;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69117
1716;;;;;;;;;11;"Start brasero with ""-d"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69117
1716;;;;;;;;;12;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69117
1716;;;;;;;;;13;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69117
1717;RHEL7-69118;New data project changed from audio with file - discard;;Bohdan Milar (bmilar);Critical;Positive;Automated;531088;1;Prepare Brasero in audio mode with file;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69118
1717;;;;;;;;;2;"Choose ""New Data Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69118
1717;;;;;;;;;3;"an alert named ""Warning"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69118
1717;;;;;;;;;4;"Click the ""Discard File Selection"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69118
1718;RHEL7-69119;Commmand line help by --help-gst option;;Bohdan Milar (bmilar);Critical;Positive;Automated;531113;1;"Start brasero with ""-e"" parameter";"the brasero output given by ""--help-gst"" does not contain ""Brasero media burning library"" text";Test Case;RedHatEnterpriseLinux7/RHEL7-69119
1719;RHEL7-69120;Open Burn Image dialog via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;531125;1;"Start brasero with ""-e"" parameter";"a dialog named ""Image Burning Setup"" containing ""Select a disc image to write"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69120
1719;;;;;;;;;2;"name of main window should end with ""Brasero""";​​;;RedHatEnterpriseLinux7/RHEL7-69120
1719;;;;;;;;;3;"Click the ""Burn image"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69120
1719;;;;;;;;;4;"Click the ""Cancel"" button in the ""Image Burning Setup"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69120
1720;RHEL7-69121;"About dialog for the ""dvdcss"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531163;1;"Start brasero with ""-e"" parameter";"the ""dvdcss"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69121
1720;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69121
1720;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69121
1720;;;;;;;;;4;"Click the ""dvdcss"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69121
1720;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69121
1720;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69121
1720;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69121
1721;RHEL7-69122;New video project changed from audio with file - discard;;Bohdan Milar (bmilar);Critical;Positive;Automated;531187;1;Prepare Brasero in audio mode with file;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69122
1721;;;;;;;;;2;"Choose ""New Video Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69122
1721;;;;;;;;;3;"an alert named ""Warning"" containing ""Do you really want to create a new project"" in label is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69122
1721;;;;;;;;;4;"Click the ""Discard Project"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69122
1722;RHEL7-69123;Remove audio file via rightclick;;Bohdan Milar (bmilar);Critical;Positive;Automated;530919;1;Prepare Brasero in audio mode with file;"there are no items named ""audio1""";Test Case;RedHatEnterpriseLinux7/RHEL7-69123
1722;;;;;;;;;2;"Rightclick the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69123
1722;;;;;;;;;3;"Select ""Remove"" from the context menu";​​;;RedHatEnterpriseLinux7/RHEL7-69123
1723;RHEL7-69124;Remember preview off after brasero relaunch in audio project;;Bohdan Milar (bmilar);Critical;Positive;Automated;530951;1;"Copy ""audio1"" to test directory";preview is unchecked;Test Case;RedHatEnterpriseLinux7/RHEL7-69124
1723;;;;;;;;;2;"Start brasero with ""-a"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69124
1723;;;;;;;;;3;Turn preview on;​​;;RedHatEnterpriseLinux7/RHEL7-69124
1723;;;;;;;;;4;Turn preview off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69124
1723;;;;;;;;;5;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69124
1723;;;;;;;;;6;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69124
1723;;;;;;;;;7;preview is off;​​;;RedHatEnterpriseLinux7/RHEL7-69124
1723;;;;;;;;;8;preview is unchecked;​​;;RedHatEnterpriseLinux7/RHEL7-69124
1723;;;;;;;;;9;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69124
1723;;;;;;;;;10;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69124
1723;;;;;;;;;11;"Start brasero with ""-a"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69124
1723;;;;;;;;;12;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69124
1723;;;;;;;;;13;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69124
1724;RHEL7-69125;New audio project changed from data with wrong file;;Bohdan Milar (bmilar);Critical;Positive;Automated;530980;1;Prepare Brasero in data mode with file;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69125
1724;;;;;;;;;2;"Choose ""New Audio Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69125
1724;;;;;;;;;3;"an alert named ""Warning"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69125
1724;;;;;;;;;4;"Click the ""Keep File Selection"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69125
1724;;;;;;;;;5;"Click the ""Close"" button in the ""Error"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69125
1725;RHEL7-69126;Split audio track and merge parts 3 and 4;;Bohdan Milar (bmilar);Critical;Positive;Automated;531005;1;Prepare Brasero in audio split mode with dialog;"there are only ""audio2"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69126
1725;;;;;;;;;2;"Select the ""Split track in a fixed number of parts"" method";​​;;RedHatEnterpriseLinux7/RHEL7-69126
1725;;;;;;;;;3;"Set split track in ""4"" parts";​​;;RedHatEnterpriseLinux7/RHEL7-69126
1725;;;;;;;;;4;"Click the ""Slice"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69126
1725;;;;;;;;;5;"Click the ""Split"" button in the ""Question"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69126
1725;;;;;;;;;6;the track is splitted to 4 pieces;​​;;RedHatEnterpriseLinux7/RHEL7-69126
1725;;;;;;;;;7;"Select the ""00:15 min"" table item";​​;;RedHatEnterpriseLinux7/RHEL7-69126
1725;;;;;;;;;8;"Select the ""00:20 min"" table item with ""Control_L""";​​;;RedHatEnterpriseLinux7/RHEL7-69126
1725;;;;;;;;;9;"Click the ""Merge"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69126
1725;;;;;;;;;10;the track is splitted to 3 pieces;​​;;RedHatEnterpriseLinux7/RHEL7-69126
1725;;;;;;;;;11;"Click the ""OK"" button in the ""Split Track"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69126
1726;RHEL7-69127;Data project rename via click;;Bohdan Milar (bmilar);Critical;Positive;Automated;531018;1;"Start brasero with ""-d"" parameter";"there is ""1"" item named ""dir3""";Test Case;RedHatEnterpriseLinux7/RHEL7-69127
1726;;;;;;;;;2;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69127
1726;;;;;;;;;3;"Click the ""New Folder"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69127
1726;;;;;;;;;4;"Invoke ""< >"" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69127
1726;;;;;;;;;5;"Click the ""New Folder"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69127
1726;;;;;;;;;6;"Invoke ""< >"" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69127
1726;;;;;;;;;7;"Doubleclick the ""dir2"" name on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69127
1726;;;;;;;;;8;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69127
1726;;;;;;;;;9;"Type the ""dir3"" filename";​​;;RedHatEnterpriseLinux7/RHEL7-69127
1726;;;;;;;;;10;"Press key ""Return""";​​;;RedHatEnterpriseLinux7/RHEL7-69127
1727;RHEL7-69128;Add data file with filename conflict - Keep;;Bohdan Milar (bmilar);Critical;Positive;Automated;531040;1;Prepare Brasero in data mode for name conflict;"the file number ""1"" on the right has ""20.5 kB"" as Size";Test Case;RedHatEnterpriseLinux7/RHEL7-69128
1727;;;;;;;;;2;"Click the ""Keep"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69128
1727;;;;;;;;;3;"there are ""2"" items named ""audio1""";​​;;RedHatEnterpriseLinux7/RHEL7-69128
1727;;;;;;;;;4;"the ""audio1"" item number ""2"" is in the ""Files"" column";​​;;RedHatEnterpriseLinux7/RHEL7-69128
1727;;;;;;;;;5;"there are only ""audio1"" items on the right side";​​;;RedHatEnterpriseLinux7/RHEL7-69128
1727;;;;;;;;;6;"the file number ""1"" on the right has ""20.5 kB"" as Size";​​;;RedHatEnterpriseLinux7/RHEL7-69128
1727;;;;;;;;;7;"Doubleclick the ""audio1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69128
1727;;;;;;;;;8;"Click the ""Keep"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69128
1728;RHEL7-69129;Turn panel and preview on in data project via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531071;1;"Copy ""audio1"" to test directory";side panel is checked;Test Case;RedHatEnterpriseLinux7/RHEL7-69129
1728;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69129
1728;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69129
1728;;;;;;;;;4;Turn preview off;​​;;RedHatEnterpriseLinux7/RHEL7-69129
1728;;;;;;;;;5;Turn preview on via menu;​​;;RedHatEnterpriseLinux7/RHEL7-69129
1728;;;;;;;;;6;"Click the ""audio1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69129
1729;RHEL7-69130;New data project changed from audio with file - keep;;Bohdan Milar (bmilar);Critical;Positive;Automated;531089;1;Prepare Brasero in audio mode with file;"there are only ""audio1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69130
1729;;;;;;;;;2;"Choose ""New Data Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69130
1729;;;;;;;;;3;"an alert named ""Warning"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69130
1729;;;;;;;;;4;"Click the ""Keep File Selection"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69130
1729;;;;;;;;;5;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69130
1730;RHEL7-69131;Open Burn Image dialog via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531126;1;"Start brasero with ""-e"" parameter";"a dialog named ""Image Burning Setup"" containing ""Select a disc image to write"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69131
1730;;;;;;;;;2;"name of main window should end with ""Brasero""";​​;;RedHatEnterpriseLinux7/RHEL7-69131
1730;;;;;;;;;3;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69131
1730;;;;;;;;;4;"Click the ""Cancel"" button in the ""Image Burning Setup"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69131
1731;RHEL7-69132;"About dialog for the ""dvd-rw-format"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531164;1;"Start brasero with ""-e"" parameter";"the ""dvd-rw-format"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69132
1731;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69132
1731;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69132
1731;;;;;;;;;4;"Click the ""dvd-rw-format"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69132
1731;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69132
1731;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69132
1731;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69132
1732;RHEL7-69133;Empty audio project via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;530920;1;Prepare Brasero in audio mode with file;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69133
1732;;;;;;;;;2;"Click the ""Empty Project"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69133
1732;;;;;;;;;3;"Click the ""Empty Project"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69133
1733;RHEL7-69134;Turn panel and preview on in audio project via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530952;1;"Copy ""audio1"" to test directory";side panel is checked;Test Case;RedHatEnterpriseLinux7/RHEL7-69134
1733;;;;;;;;;2;"Start brasero with ""-a"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69134
1733;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69134
1733;;;;;;;;;4;Turn preview off;​​;;RedHatEnterpriseLinux7/RHEL7-69134
1733;;;;;;;;;5;Turn preview on via menu;​​;;RedHatEnterpriseLinux7/RHEL7-69134
1733;;;;;;;;;6;"Click the ""audio1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69134
1734;RHEL7-69135;Save audio project via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530981;1;"Copy ""audio1"" to test directory";"name of main window should end with ""audio_project1"" and ""(Audio Disc)""";Test Case;RedHatEnterpriseLinux7/RHEL7-69135
1734;;;;;;;;;2;"Start brasero with ""-a"" parameters and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69135
1734;;;;;;;;;3;"name of main window should end with ""New Audio Disc Project""";​​;;RedHatEnterpriseLinux7/RHEL7-69135
1734;;;;;;;;;4;"Select ""Save"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69135
1734;;;;;;;;;5;Go to test directory in file chooser;​​;;RedHatEnterpriseLinux7/RHEL7-69135
1734;;;;;;;;;6;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69135
1734;;;;;;;;;7;"Type the ""audio_project1"" filename";​​;;RedHatEnterpriseLinux7/RHEL7-69135
1734;;;;;;;;;8;"Click the ""Save"" button in the ""Save Current Project"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69135
1735;RHEL7-69136;Data project rename via right click;;Bohdan Milar (bmilar);Critical;Positive;Automated;531019;1;"Start brasero with ""-d"" parameter";"there is ""1"" item named ""dir3""";Test Case;RedHatEnterpriseLinux7/RHEL7-69136
1735;;;;;;;;;2;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69136
1735;;;;;;;;;3;"Click the ""New Folder"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69136
1735;;;;;;;;;4;"Invoke ""< >"" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69136
1735;;;;;;;;;5;"Click the ""New Folder"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69136
1735;;;;;;;;;6;"Invoke ""< >"" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69136
1735;;;;;;;;;7;"Rightclick the ""dir2"" name on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69136
1735;;;;;;;;;8;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69136
1735;;;;;;;;;9;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69136
1735;;;;;;;;;10;"Type the ""dir3"" filename";​​;;RedHatEnterpriseLinux7/RHEL7-69136
1735;;;;;;;;;11;"Press key ""Return""";​​;;RedHatEnterpriseLinux7/RHEL7-69136
1736;RHEL7-69137;Add data file with filename conflict - Always Keep;;Bohdan Milar (bmilar);Critical;Positive;Automated;531041;1;Prepare Brasero in data mode for name conflict;"the file number ""1"" on the right has ""20.5 kB"" as Size";Test Case;RedHatEnterpriseLinux7/RHEL7-69137
1736;;;;;;;;;2;"Click the ""Always Keep"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69137
1736;;;;;;;;;3;"there are ""2"" items named ""audio1""";​​;;RedHatEnterpriseLinux7/RHEL7-69137
1736;;;;;;;;;4;"the ""audio1"" item number ""2"" is in the ""Files"" column";​​;;RedHatEnterpriseLinux7/RHEL7-69137
1736;;;;;;;;;5;"there are only ""audio1"" items on the right side";​​;;RedHatEnterpriseLinux7/RHEL7-69137
1736;;;;;;;;;6;"the file number ""1"" on the right has ""20.5 kB"" as Size";​​;;RedHatEnterpriseLinux7/RHEL7-69137
1736;;;;;;;;;7;"Doubleclick the ""audio1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69137
1737;RHEL7-69138;Turn panel and preview on in data project via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;531072;1;"Copy ""audio1"" to test directory";side panel is checked;Test Case;RedHatEnterpriseLinux7/RHEL7-69138
1737;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69138
1737;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69138
1737;;;;;;;;;4;Turn preview off;​​;;RedHatEnterpriseLinux7/RHEL7-69138
1737;;;;;;;;;5;Turn preview on via key;​​;;RedHatEnterpriseLinux7/RHEL7-69138
1737;;;;;;;;;6;"Click the ""audio1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69138
1738;RHEL7-69139;Save data project via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531090;1;"Create sample ""data1"" text file in test directory";"name of main window should end with ""data_project1"" and ""(Data Disc)""";Test Case;RedHatEnterpriseLinux7/RHEL7-69139
1738;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""data1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69139
1738;;;;;;;;;3;"name of main window should end with ""New Data Disc Project""";​​;;RedHatEnterpriseLinux7/RHEL7-69139
1738;;;;;;;;;4;"Select ""Save"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69139
1738;;;;;;;;;5;Go to test directory in file chooser;​​;;RedHatEnterpriseLinux7/RHEL7-69139
1738;;;;;;;;;6;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69139
1738;;;;;;;;;7;"Type the ""data_project1"" filename";​​;;RedHatEnterpriseLinux7/RHEL7-69139
1738;;;;;;;;;8;"Click the ""Save"" button in the ""Save Current Project"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69139
1739;RHEL7-69140;Open Burn Image dialog via command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531127;1;"Start brasero with ""-i"" parameter";"a dialog named ""Image Burning Setup"" containing ""Select a disc image to write"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69140
1739;;;;;;;;;2;"Click the ""Cancel"" button in the ""Image Burning Setup"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69140
1740;RHEL7-69141;"About dialog for the ""genisoimage"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531165;1;"Start brasero with ""-e"" parameter";"the ""genisoimage"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69141
1740;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69141
1740;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69141
1740;;;;;;;;;4;"Click the ""genisoimage"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69141
1740;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69141
1740;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69141
1740;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69141
1741;RHEL7-69142;Empty audio project via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530921;1;Prepare Brasero in audio mode with file;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69142
1741;;;;;;;;;2;"Select ""Empty Project"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69142
1741;;;;;;;;;3;"Click the ""Empty Project"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69142
1742;RHEL7-69143;Turn panel and preview on in audio project via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;530953;1;"Copy ""audio1"" to test directory";side panel is checked;Test Case;RedHatEnterpriseLinux7/RHEL7-69143
1742;;;;;;;;;2;"Start brasero with ""-a"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69143
1742;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69143
1742;;;;;;;;;4;Turn preview off;​​;;RedHatEnterpriseLinux7/RHEL7-69143
1742;;;;;;;;;5;Turn preview on via key;​​;;RedHatEnterpriseLinux7/RHEL7-69143
1742;;;;;;;;;6;"Click the ""audio1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69143
1743;RHEL7-69144;Save audio project via key shortcut;;Bohdan Milar (bmilar);Critical;Positive;Automated;530982;1;Save audio project via key;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-69144
1744;RHEL7-69145;Expand data directory item via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;531020;1;Prepare Brasero in data mode with subdirectory;"there is ""1"" item named ""data1""";Test Case;RedHatEnterpriseLinux7/RHEL7-69145
1744;;;;;;;;;2;"Click the ""dir3"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69145
1744;;;;;;;;;3;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69145
1745;RHEL7-69146;Add data file with filename conflict - Replace;;Bohdan Milar (bmilar);Critical;Positive;Automated;531042;1;Prepare Brasero in data mode for name conflict;"the file number ""1"" on the right has ""20.5 kB"" as Size";Test Case;RedHatEnterpriseLinux7/RHEL7-69146
1745;;;;;;;;;2;"Click the ""Replace"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69146
1745;;;;;;;;;3;"there are ""2"" items named ""audio1""";​​;;RedHatEnterpriseLinux7/RHEL7-69146
1745;;;;;;;;;4;"the ""audio1"" item number ""2"" is in the ""Files"" column";​​;;RedHatEnterpriseLinux7/RHEL7-69146
1745;;;;;;;;;5;"there are only ""audio1"" items on the right side";​​;;RedHatEnterpriseLinux7/RHEL7-69146
1745;;;;;;;;;6;"the file number ""1"" on the right has ""2.0 kB"" as Size";​​;;RedHatEnterpriseLinux7/RHEL7-69146
1745;;;;;;;;;7;"Click the ""audio1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69146
1745;;;;;;;;;8;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69146
1745;;;;;;;;;9;"Doubleclick the ""audio1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69146
1745;;;;;;;;;10;"Click the ""Replace"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69146
1746;RHEL7-69147;Turn panel and preview off in data project via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531073;1;"Copy ""audio1"" to test directory";side panel is unchecked;Test Case;RedHatEnterpriseLinux7/RHEL7-69147
1746;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69147
1746;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69147
1746;;;;;;;;;4;Turn preview on;​​;;RedHatEnterpriseLinux7/RHEL7-69147
1746;;;;;;;;;5;Turn preview off via menu;​​;;RedHatEnterpriseLinux7/RHEL7-69147
1746;;;;;;;;;6;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69147
1747;RHEL7-69148;Save data project via key shortcut;;Bohdan Milar (bmilar);Critical;Positive;Automated;531091;1;Save data project via key;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-69148
1748;RHEL7-69149;Open Burn Image dialog via long command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531128;1;"Start brasero with ""--image"" parameter";"a dialog named ""Image Burning Setup"" containing ""Select a disc image to write"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69149
1748;;;;;;;;;2;"Click the ""Cancel"" button in the ""Image Burning Setup"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69149
1749;RHEL7-69150;"About dialog for the ""growisofs"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531166;1;"Start brasero with ""-e"" parameter";"the ""growisofs"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69150
1749;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69150
1749;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69150
1749;;;;;;;;;4;"Click the ""growisofs"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69150
1749;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69150
1749;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69150
1749;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69150
1750;RHEL7-69151;Insert audio pause via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;530922;1;Prepare Brasero in audio mode with file;"there is a ""Pause"" of ""00:02 min"" length";Test Case;RedHatEnterpriseLinux7/RHEL7-69151
1750;;;;;;;;;2;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69151
1750;;;;;;;;;3;"Click the ""Pause"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69151
1751;RHEL7-69152;Turn panel and preview off in audio project via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530954;1;"Copy ""audio1"" to test directory";side panel is unchecked;Test Case;RedHatEnterpriseLinux7/RHEL7-69152
1751;;;;;;;;;2;"Start brasero with ""-a"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69152
1751;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69152
1751;;;;;;;;;4;Turn preview on;​​;;RedHatEnterpriseLinux7/RHEL7-69152
1751;;;;;;;;;5;Turn preview off via menu;​​;;RedHatEnterpriseLinux7/RHEL7-69152
1751;;;;;;;;;6;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69152
1752;RHEL7-69153;Save audio project using Save As...;;Bohdan Milar (bmilar);Critical;Positive;Automated;530983;1;Save audio project via key;"name of main window should end with ""audio_project2"" and ""(Audio Disc)""";Test Case;RedHatEnterpriseLinux7/RHEL7-69153
1752;;;;;;;;;2;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69153
1752;;;;;;;;;3;Go to test directory in file chooser;​​;;RedHatEnterpriseLinux7/RHEL7-69153
1752;;;;;;;;;4;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69153
1752;;;;;;;;;5;"Type the ""audio_project2"" filename";​​;;RedHatEnterpriseLinux7/RHEL7-69153
1752;;;;;;;;;6;"Click the ""Save"" button in the ""Save Current Project"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69153
1753;RHEL7-69154;Collapse data directory item via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;531021;1;Prepare Brasero in data mode with subdirectory;"there are only ""dir3"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69154
1753;;;;;;;;;2;"Click the ""dir3"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69154
1753;;;;;;;;;3;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69154
1753;;;;;;;;;4;"there is ""1"" item named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69154
1753;;;;;;;;;5;"there is ""1"" item named ""data1""";​​;;RedHatEnterpriseLinux7/RHEL7-69154
1753;;;;;;;;;6;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69154
1753;;;;;;;;;7;"Click the ""dir3"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69154
1753;;;;;;;;;8;"Press key ""-""";​​;;RedHatEnterpriseLinux7/RHEL7-69154
1754;RHEL7-69155;Add data file with filename conflict - Always Replace;;Bohdan Milar (bmilar);Critical;Positive;Automated;531043;1;Prepare Brasero in data mode for name conflict;"the file number ""1"" on the right has ""20.5 kB"" as Size";Test Case;RedHatEnterpriseLinux7/RHEL7-69155
1754;;;;;;;;;2;"Click the ""Always Replace"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69155
1754;;;;;;;;;3;"there are ""2"" items named ""audio1""";​​;;RedHatEnterpriseLinux7/RHEL7-69155
1754;;;;;;;;;4;"the ""audio1"" item number ""2"" is in the ""Files"" column";​​;;RedHatEnterpriseLinux7/RHEL7-69155
1754;;;;;;;;;5;"there are only ""audio1"" items on the right side";​​;;RedHatEnterpriseLinux7/RHEL7-69155
1754;;;;;;;;;6;"the file number ""1"" on the right has ""2.0 kB"" as Size";​​;;RedHatEnterpriseLinux7/RHEL7-69155
1754;;;;;;;;;7;"Click the ""audio1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69155
1754;;;;;;;;;8;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69155
1754;;;;;;;;;9;"Doubleclick the ""audio1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69155
1755;RHEL7-69156;Turn panel and preview off in data project via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;531074;1;"Copy ""audio1"" to test directory";side panel is unchecked;Test Case;RedHatEnterpriseLinux7/RHEL7-69156
1755;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69156
1755;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69156
1755;;;;;;;;;4;Turn preview on;​​;;RedHatEnterpriseLinux7/RHEL7-69156
1755;;;;;;;;;5;Turn preview off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69156
1755;;;;;;;;;6;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69156
1756;RHEL7-69157;Save data project using Save As...;;Bohdan Milar (bmilar);Critical;Positive;Automated;531092;1;Save data project via key;"name of main window should end with ""data_project2"" and ""(Data Disc)""";Test Case;RedHatEnterpriseLinux7/RHEL7-69157
1756;;;;;;;;;2;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69157
1756;;;;;;;;;3;Go to test directory in file chooser;​​;;RedHatEnterpriseLinux7/RHEL7-69157
1756;;;;;;;;;4;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69157
1756;;;;;;;;;5;"Type the ""data_project2"" filename";​​;;RedHatEnterpriseLinux7/RHEL7-69157
1756;;;;;;;;;6;"Click the ""Save"" button in the ""Save Current Project"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69157
1757;RHEL7-69158;Open Burn Image dialog via command with audio image;;Bohdan Milar (bmilar);Critical;Positive;Automated;531129;1;Burn audio project to image file via button;"the ""Image Burning Setup"" dialog has a push button with name containing ""audio_image"" filename";Test Case;RedHatEnterpriseLinux7/RHEL7-69158
1757;;;;;;;;;2;"Click the ""Close"" button in the ""Creating Image"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69158
1757;;;;;;;;;3;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69158
1757;;;;;;;;;4;"Start brasero with ""-i"" parameter and ""audio_image"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69158
1757;;;;;;;;;5;"Click the ""Cancel"" button in the ""Image Burning Setup"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69158
1758;RHEL7-69159;"About dialog for the ""libburn"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531167;1;"Start brasero with ""-e"" parameter";"the ""libburn"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69159
1758;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69159
1758;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69159
1758;;;;;;;;;4;"Click the ""libburn"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69159
1758;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69159
1758;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69159
1758;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69159
1759;RHEL7-69160;Insert audio pause via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530923;1;Prepare Brasero in audio mode with file;"there is a ""Pause"" of ""00:02 min"" length";Test Case;RedHatEnterpriseLinux7/RHEL7-69160
1759;;;;;;;;;2;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69160
1759;;;;;;;;;3;"Select ""Insert a Pause"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69160
1760;RHEL7-69161;Turn panel and preview off in audio project via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;530955;1;"Copy ""audio1"" to test directory";side panel is unchecked;Test Case;RedHatEnterpriseLinux7/RHEL7-69161
1760;;;;;;;;;2;"Start brasero with ""-a"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69161
1760;;;;;;;;;3;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69161
1760;;;;;;;;;4;Turn preview on;​​;;RedHatEnterpriseLinux7/RHEL7-69161
1760;;;;;;;;;5;Turn preview off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69161
1760;;;;;;;;;6;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69161
1761;RHEL7-69162;Open saved audio project via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530984;1;Save audio project via key;"the ""audio1"" item number ""1"" is in the ""Title"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69162
1761;;;;;;;;;2;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69162
1761;;;;;;;;;3;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69162
1761;;;;;;;;;4;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69162
1761;;;;;;;;;5;Make sure that brasero is running;​​;;RedHatEnterpriseLinux7/RHEL7-69162
1761;;;;;;;;;6;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69162
1761;;;;;;;;;7;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69162
1761;;;;;;;;;8;"Find the ""audio_project1"" file in file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69162
1761;;;;;;;;;9;"Click the ""Open"" button in the ""Open Project"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69162
1761;;;;;;;;;10;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69162
1762;RHEL7-69163;Move data file from directory;;Bohdan Milar (bmilar);Critical;Positive;Automated;531022;1;Prepare Brasero in data mode with subdirectory;"there are no items named ""Empty""";Test Case;RedHatEnterpriseLinux7/RHEL7-69163
1762;;;;;;;;;2;"Move the ""data1"" item from the ""dir3"" directory";​​;;RedHatEnterpriseLinux7/RHEL7-69163
1762;;;;;;;;;3;"there is ""1"" item named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69163
1762;;;;;;;;;4;"there is ""1"" item named ""data1""";​​;;RedHatEnterpriseLinux7/RHEL7-69163
1762;;;;;;;;;5;"there is ""1"" item named ""Empty""";​​;;RedHatEnterpriseLinux7/RHEL7-69163
1762;;;;;;;;;6;"Click the ""dir3"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69163
1762;;;;;;;;;7;"Press key ""-""";​​;;RedHatEnterpriseLinux7/RHEL7-69163
1763;RHEL7-69164;Add audio image to data project and burn as image;;Bohdan Milar (bmilar);Critical;Positive;Automated;531044;1;Burn audio project to image file via button;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69164
1763;;;;;;;;;2;"Click the ""Close"" button in the ""Creating Image"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69164
1763;;;;;;;;;3;"Choose ""New Data Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69164
1763;;;;;;;;;4;"Click the ""Discard File Selection"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69164
1763;;;;;;;;;5;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69164
1763;;;;;;;;;6;"Click the ""audio_image"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69164
1763;;;;;;;;;7;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69164
1763;;;;;;;;;8;"Click the ""Burn as Image"" button in the ""Question"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69164
1763;;;;;;;;;9;"Click the ""Cancel"" button in the ""Image Burning Setup"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69164
1764;RHEL7-69165;Switch horizontal layout in data project;;Bohdan Milar (bmilar);Critical;Positive;Automated;531075;1;"Start brasero with ""-d"" parameter";"""Vertical Layout"" menu item is unchecked";Test Case;RedHatEnterpriseLinux7/RHEL7-69165
1764;;;;;;;;;2;Turn side panel on;​​;;RedHatEnterpriseLinux7/RHEL7-69165
1764;;;;;;;;;3;Turn preview off;​​;;RedHatEnterpriseLinux7/RHEL7-69165
1764;;;;;;;;;4;Switch to vertical layout;​​;;RedHatEnterpriseLinux7/RHEL7-69165
1764;;;;;;;;;5;Switch to horizontal layout;​​;;RedHatEnterpriseLinux7/RHEL7-69165
1765;RHEL7-69166;Open saved data project via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531093;1;Save data project via key;"the ""data1"" item number ""1"" is in the ""Files"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69166
1765;;;;;;;;;2;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69166
1765;;;;;;;;;3;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69166
1765;;;;;;;;;4;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69166
1765;;;;;;;;;5;Make sure that brasero is running;​​;;RedHatEnterpriseLinux7/RHEL7-69166
1765;;;;;;;;;6;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69166
1765;;;;;;;;;7;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69166
1765;;;;;;;;;8;"Find the ""data_project1"" file in file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69166
1765;;;;;;;;;9;"Click the ""Open"" button in the ""Open Project"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69166
1765;;;;;;;;;10;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69166
1766;RHEL7-69167;Open Burn Image dialog via command with data image;;Bohdan Milar (bmilar);Critical;Positive;Automated;531130;1;Burn data project to image file via button;"the ""Image Burning Setup"" dialog has a push button with name containing ""data_image"" filename";Test Case;RedHatEnterpriseLinux7/RHEL7-69167
1766;;;;;;;;;2;"Click the ""Close"" button in the ""Creating Image"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69167
1766;;;;;;;;;3;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69167
1766;;;;;;;;;4;"Start brasero with ""-i"" parameter and ""data_image"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69167
1766;;;;;;;;;5;"Click the ""Cancel"" button in the ""Image Burning Setup"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69167
1767;RHEL7-69168;"About dialog for the ""libisofs"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531168;1;"Start brasero with ""-e"" parameter";"the ""libisofs"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69168
1767;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69168
1767;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69168
1767;;;;;;;;;4;"Click the ""libisofs"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69168
1767;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69168
1767;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69168
1767;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69168
1768;RHEL7-69169;Insert audio pause via rightclick;;Bohdan Milar (bmilar);Critical;Positive;Automated;530924;1;Prepare Brasero in audio mode with file;"there is a ""Pause"" of ""00:02 min"" length";Test Case;RedHatEnterpriseLinux7/RHEL7-69169
1768;;;;;;;;;2;"Rightclick the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69169
1768;;;;;;;;;3;"Select ""Insert a Pause"" from the context menu";​​;;RedHatEnterpriseLinux7/RHEL7-69169
1769;RHEL7-69170;Switch horizontal layout in audio project;;Bohdan Milar (bmilar);Critical;Positive;Automated;530956;1;"Start brasero with ""-a"" parameter";"""Vertical Layout"" menu item is unchecked";Test Case;RedHatEnterpriseLinux7/RHEL7-69170
1769;;;;;;;;;2;Turn side panel on;​​;;RedHatEnterpriseLinux7/RHEL7-69170
1769;;;;;;;;;3;Turn preview off;​​;;RedHatEnterpriseLinux7/RHEL7-69170
1769;;;;;;;;;4;Switch to vertical layout;​​;;RedHatEnterpriseLinux7/RHEL7-69170
1769;;;;;;;;;5;Switch to horizontal layout;​​;;RedHatEnterpriseLinux7/RHEL7-69170
1770;RHEL7-69171;Open saved audio project via key shortcut;;Bohdan Milar (bmilar);Critical;Positive;Automated;530985;1;Save audio project via key;"the ""audio1"" item number ""1"" is in the ""Title"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69171
1770;;;;;;;;;2;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69171
1770;;;;;;;;;3;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69171
1770;;;;;;;;;4;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69171
1770;;;;;;;;;5;Make sure that brasero is running;​​;;RedHatEnterpriseLinux7/RHEL7-69171
1770;;;;;;;;;6;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69171
1770;;;;;;;;;7;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69171
1770;;;;;;;;;8;"Find the ""audio_project1"" file in file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69171
1770;;;;;;;;;9;"Click the ""Open"" button in the ""Open Project"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69171
1770;;;;;;;;;10;"the ""file chooser"" disappears";​​;;RedHatEnterpriseLinux7/RHEL7-69171
1770;;;;;;;;;11;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69171
1771;RHEL7-69172;Move data file to directory;;Bohdan Milar (bmilar);Critical;Positive;Automated;531023;1;Prepare Brasero in data mode with subdirectory;"there are no items named ""data2""";Test Case;RedHatEnterpriseLinux7/RHEL7-69172
1771;;;;;;;;;2;"Create sample ""data2"" text file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69172
1771;;;;;;;;;3;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69172
1771;;;;;;;;;4;Go to test directory in file chooser;​​;;RedHatEnterpriseLinux7/RHEL7-69172
1771;;;;;;;;;5;"Find the ""data2"" file in file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69172
1771;;;;;;;;;6;"Click the ""Add"" button in the ""Select Files"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69172
1771;;;;;;;;;7;"there is ""1"" item named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69172
1771;;;;;;;;;8;"there are no items named ""data1""";​​;;RedHatEnterpriseLinux7/RHEL7-69172
1771;;;;;;;;;9;"there is ""1"" item named ""data2""";​​;;RedHatEnterpriseLinux7/RHEL7-69172
1771;;;;;;;;;10;"Move the ""data2"" item to the ""dir3"" directory";​​;;RedHatEnterpriseLinux7/RHEL7-69172
1771;;;;;;;;;11;"there is ""1"" item named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69172
1771;;;;;;;;;12;"there is ""1"" item named ""data1""";​​;;RedHatEnterpriseLinux7/RHEL7-69172
1771;;;;;;;;;13;"there is ""1"" item named ""data2""";​​;;RedHatEnterpriseLinux7/RHEL7-69172
1771;;;;;;;;;14;"Click the ""dir3"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69172
1771;;;;;;;;;15;"Press key ""-""";​​;;RedHatEnterpriseLinux7/RHEL7-69172
1772;RHEL7-69173;Switch vertical layout in data project;;Bohdan Milar (bmilar);Critical;Positive;Automated;531076;1;"Start brasero with ""-d"" parameter";"""Horizontal Layout"" menu item is unchecked";Test Case;RedHatEnterpriseLinux7/RHEL7-69173
1772;;;;;;;;;2;Turn side panel on;​​;;RedHatEnterpriseLinux7/RHEL7-69173
1772;;;;;;;;;3;Turn preview off;​​;;RedHatEnterpriseLinux7/RHEL7-69173
1772;;;;;;;;;4;Switch to horizontal layout;​​;;RedHatEnterpriseLinux7/RHEL7-69173
1772;;;;;;;;;5;Switch to vertical layout;​​;;RedHatEnterpriseLinux7/RHEL7-69173
1773;RHEL7-69174;Open saved data project via key shortcut;;Bohdan Milar (bmilar);Critical;Positive;Automated;531094;1;Save data project via key;"the ""data1"" item number ""1"" is in the ""Files"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69174
1773;;;;;;;;;2;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69174
1773;;;;;;;;;3;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69174
1773;;;;;;;;;4;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69174
1773;;;;;;;;;5;Make sure that brasero is running;​​;;RedHatEnterpriseLinux7/RHEL7-69174
1773;;;;;;;;;6;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69174
1773;;;;;;;;;7;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69174
1773;;;;;;;;;8;"Find the ""data_project1"" file in file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69174
1773;;;;;;;;;9;"Click the ""Open"" button in the ""Open Project"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69174
1773;;;;;;;;;10;"the ""file chooser"" disappears";​​;;RedHatEnterpriseLinux7/RHEL7-69174
1773;;;;;;;;;11;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69174
1774;RHEL7-69175;Burn and remove project via command -r;;Bohdan Milar (bmilar);Critical;Positive;Automated;531131;1;Save data project via key;"there is no file named ""data_project1"" in test directory";Test Case;RedHatEnterpriseLinux7/RHEL7-69175
1774;;;;;;;;;2;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69175
1774;;;;;;;;;3;"Start brasero with ""-r"" parameter and ""data_project1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69175
1774;;;;;;;;;4;Select burn to image in combo box;​​;;RedHatEnterpriseLinux7/RHEL7-69175
1774;;;;;;;;;5;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69175
1774;;;;;;;;;6;Go to test directory in file chooser;​​;;RedHatEnterpriseLinux7/RHEL7-69175
1774;;;;;;;;;7;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69175
1774;;;;;;;;;8;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69175
1774;;;;;;;;;9;"Type the ""data_image"" filename";​​;;RedHatEnterpriseLinux7/RHEL7-69175
1774;;;;;;;;;10;"Click the ""Create Image"" button in the ""Location for Image File"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69175
1774;;;;;;;;;11;"the ""file chooser"" disappears";​​;;RedHatEnterpriseLinux7/RHEL7-69175
1774;;;;;;;;;12;Wait 5 seconds;​​;;RedHatEnterpriseLinux7/RHEL7-69175
1774;;;;;;;;;13;"the ""Creating Image"" dialog announces ""Image successfully created""";​​;;RedHatEnterpriseLinux7/RHEL7-69175
1774;;;;;;;;;14;"Click the ""Close"" button in the ""Creating Image"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69175
1774;;;;;;;;;15;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69175
1775;RHEL7-69176;"About dialog for the ""mkisofs"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531169;1;"Start brasero with ""-e"" parameter";"the ""mkisofs"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69176
1775;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69176
1775;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69176
1775;;;;;;;;;4;"Click the ""mkisofs"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69176
1775;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69176
1775;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69176
1775;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69176
1776;RHEL7-69177;Add audio image to data project and burn as data;;Bohdan Milar (bmilar);Critical;Positive;Automated;531045;1;Burn audio project to image file via button;"there are only ""audio_image"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69177
1776;;;;;;;;;2;"Click the ""Close"" button in the ""Creating Image"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69177
1776;;;;;;;;;3;"Choose ""New Data Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69177
1776;;;;;;;;;4;"Click the ""Discard File Selection"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69177
1776;;;;;;;;;5;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69177
1776;;;;;;;;;6;"Click the ""audio_image"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69177
1776;;;;;;;;;7;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69177
1776;;;;;;;;;8;"Click the ""Burn as Data"" button in the ""Question"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69177
1777;RHEL7-69178;Estimated size status bar with empty audio project;;Bohdan Milar (bmilar);Critical;Positive;Automated;530925;1;Prepare Brasero in audio mode with file;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69178
1777;;;;;;;;;2;"Click the ""audio1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69178
1777;;;;;;;;;3;"Press key ""Delete""";​​;;RedHatEnterpriseLinux7/RHEL7-69178
1778;RHEL7-69179;Switch vertical layout in audio project;;Bohdan Milar (bmilar);Critical;Positive;Automated;530957;1;"Start brasero with ""-a"" parameter";"""Horizontal Layout"" menu item is unchecked";Test Case;RedHatEnterpriseLinux7/RHEL7-69179
1778;;;;;;;;;2;Turn side panel on;​​;;RedHatEnterpriseLinux7/RHEL7-69179
1778;;;;;;;;;3;Turn preview off;​​;;RedHatEnterpriseLinux7/RHEL7-69179
1778;;;;;;;;;4;Switch to horizontal layout;​​;;RedHatEnterpriseLinux7/RHEL7-69179
1778;;;;;;;;;5;Switch to vertical layout;​​;;RedHatEnterpriseLinux7/RHEL7-69179
1779;RHEL7-69180;Open saved audio project via short command;;Bohdan Milar (bmilar);Critical;Positive;Automated;530986;1;Save audio project via key;"the ""audio1"" item number ""1"" is in the ""Title"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69180
1779;;;;;;;;;2;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69180
1779;;;;;;;;;3;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69180
1779;;;;;;;;;4;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69180
1779;;;;;;;;;5;"Start brasero with ""-p"" parameters and ""audio_project1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69180
1779;;;;;;;;;6;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69180
1780;RHEL7-69181;In data project create a directory structure of 5 levels;;Bohdan Milar (bmilar);Critical;Positive;Automated;531024;1;"Create 5 levels of ""dir3"" subdirectories in test directory with ""data1"" file";"there is ""1"" item named ""data1""";Test Case;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""dir3"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;3;"the ""alert"" named ""Warning"" is not displayed";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;4;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;5;"there is ""1"" item named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;6;"Click the ""dir3"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;7;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;8;"there are ""2"" items named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;9;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;10;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;11;"there are ""3"" items named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;12;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;13;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;14;"there are ""4"" items named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;15;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;16;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;17;"there are ""5"" items named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;18;"there are no items named ""data1""";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;19;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1780;;;;;;;;;20;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69181
1781;RHEL7-69182;Open saved data project via short command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531095;1;Save data project via key;"the ""data1"" item number ""1"" is in the ""Files"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69182
1781;;;;;;;;;2;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69182
1781;;;;;;;;;3;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69182
1781;;;;;;;;;4;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69182
1781;;;;;;;;;5;"Start brasero with ""-p"" parameters and ""data_project1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69182
1781;;;;;;;;;6;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69182
1782;RHEL7-69183;Burn and remove project via command --burn-and-remove-project;;Bohdan Milar (bmilar);Critical;Positive;Automated;531132;1;Save data project via key;"there is no file named ""data_project1"" in test directory";Test Case;RedHatEnterpriseLinux7/RHEL7-69183
1782;;;;;;;;;2;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69183
1782;;;;;;;;;3;"Start brasero with ""--burn-and-remove-project="" parameter and ""data_project1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69183
1782;;;;;;;;;4;Select burn to image in combo box;​​;;RedHatEnterpriseLinux7/RHEL7-69183
1782;;;;;;;;;5;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69183
1782;;;;;;;;;6;Go to test directory in file chooser;​​;;RedHatEnterpriseLinux7/RHEL7-69183
1782;;;;;;;;;7;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69183
1782;;;;;;;;;8;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69183
1782;;;;;;;;;9;"Type the ""data_image"" filename";​​;;RedHatEnterpriseLinux7/RHEL7-69183
1782;;;;;;;;;10;"Click the ""Create Image"" button in the ""Location for Image File"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69183
1782;;;;;;;;;11;"the ""file chooser"" disappears";​​;;RedHatEnterpriseLinux7/RHEL7-69183
1782;;;;;;;;;12;Wait 5 seconds;​​;;RedHatEnterpriseLinux7/RHEL7-69183
1782;;;;;;;;;13;"the ""Creating Image"" dialog announces ""Image successfully created""";​​;;RedHatEnterpriseLinux7/RHEL7-69183
1782;;;;;;;;;14;"Click the ""Close"" button in the ""Creating Image"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69183
1782;;;;;;;;;15;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69183
1783;RHEL7-69184;Add data image to data project and burn as image;;Bohdan Milar (bmilar);Critical;Positive;Automated;531046;1;Burn data project to image file via button;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69184
1783;;;;;;;;;2;"Click the ""Close"" button in the ""Creating Image"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69184
1783;;;;;;;;;3;"Choose ""New Data Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69184
1783;;;;;;;;;4;"Click the ""Discard Project"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69184
1783;;;;;;;;;5;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69184
1783;;;;;;;;;6;"Click the ""data_image"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69184
1783;;;;;;;;;7;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69184
1783;;;;;;;;;8;"Click the ""Burn as Image"" button in the ""Question"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69184
1783;;;;;;;;;9;"Click the ""Cancel"" button in the ""Image Burning Setup"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69184
1784;RHEL7-69185;"About dialog for the ""readcd"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531170;1;"Start brasero with ""-e"" parameter";"the ""readcd"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69185
1784;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69185
1784;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69185
1784;;;;;;;;;4;"Click the ""readcd"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69185
1784;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69185
1784;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69185
1784;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69185
1785;RHEL7-69186;Estimated size status bar with non-empty audio project;;Bohdan Milar (bmilar);Critical;Positive;Automated;530926;1;"Copy ""audio1"" to test directory";"there are only ""audio1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69186
1785;;;;;;;;;2;"Start brasero with ""-a"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69186
1786;RHEL7-69187;Switch side panel in audio project to files mode;;Bohdan Milar (bmilar);Critical;Positive;Automated;530958;1;"Start brasero with ""-a"" parameter";playlists panel on the left is not displayed;Test Case;RedHatEnterpriseLinux7/RHEL7-69187
1786;;;;;;;;;2;Make side panel visible;​​;;RedHatEnterpriseLinux7/RHEL7-69187
1786;;;;;;;;;3;"Switch side panel to ""playlists"" mode using combo box";​​;;RedHatEnterpriseLinux7/RHEL7-69187
1786;;;;;;;;;4;"Switch side panel to ""files"" mode using combo box";​​;;RedHatEnterpriseLinux7/RHEL7-69187
1787;RHEL7-69188;Open saved audio project via long command;;Bohdan Milar (bmilar);Critical;Positive;Automated;530987;1;Save audio project via key;"the ""audio1"" item number ""1"" is in the ""Title"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69188
1787;;;;;;;;;2;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69188
1787;;;;;;;;;3;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69188
1787;;;;;;;;;4;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69188
1787;;;;;;;;;5;"Start brasero with ""--project="" parameter and ""audio_project1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69188
1787;;;;;;;;;6;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69188
1788;RHEL7-69189;In data project create a directory structure of 6 levels - Never;;Bohdan Milar (bmilar);Critical;Positive;Automated;531025;1;"Create 6 levels of ""dir3"" subdirectories in test directory with ""data1"" file";"there are no items named ""data1""";Test Case;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""dir3"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;3;"an alert named ""Warning"" containing ""Do you really want to add"" in label is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;4;"Click the ""Never Add Such File"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;5;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;6;"there is ""1"" item named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;7;"Click the ""dir3"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;8;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;9;"there are ""2"" items named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;10;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;11;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;12;"there are ""3"" items named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;13;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;14;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;15;"there are ""4"" items named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;16;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;17;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;18;"there are ""5"" items named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;19;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1788;;;;;;;;;20;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69189
1789;RHEL7-69190;Add data image to data project and burn as data;;Bohdan Milar (bmilar);Critical;Positive;Automated;531047;1;Burn data project to image file via button;"there are only ""data_image"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69190
1789;;;;;;;;;2;"Click the ""Close"" button in the ""Creating Image"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69190
1789;;;;;;;;;3;"Choose ""New Data Project"" from the ""New Project"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69190
1789;;;;;;;;;4;"Click the ""Discard Project"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69190
1789;;;;;;;;;5;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69190
1789;;;;;;;;;6;"Click the ""data_image"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69190
1789;;;;;;;;;7;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69190
1789;;;;;;;;;8;"Click the ""Burn as Data"" button in the ""Question"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69190
1790;RHEL7-69191;Open saved data project via long command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531096;1;Save data project via key;"the ""data1"" item number ""1"" is in the ""Files"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69191
1790;;;;;;;;;2;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69191
1790;;;;;;;;;3;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69191
1790;;;;;;;;;4;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69191
1790;;;;;;;;;5;"Start brasero with ""--project="" parameter and ""data_project1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69191
1790;;;;;;;;;6;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69191
1791;RHEL7-69192;Burn the contents of the burn:// URI by -n;;Bohdan Milar (bmilar);Critical;Positive;Automated;531133;1;"Create sample ""data1"" text file in test directory";"a dialog named ""Disc Burning Setup"" containing ""Select a disc to write to"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69192
1791;;;;;;;;;2;Launch nautilus in test directory;​​;;RedHatEnterpriseLinux7/RHEL7-69192
1791;;;;;;;;;3;"Click ""data1"" item in nautilus window";​​;;RedHatEnterpriseLinux7/RHEL7-69192
1791;;;;;;;;;4;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69192
1791;;;;;;;;;5;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69192
1791;;;;;;;;;6;"Type ""burn://""";​​;;RedHatEnterpriseLinux7/RHEL7-69192
1791;;;;;;;;;7;"Press key ""Return""";​​;;RedHatEnterpriseLinux7/RHEL7-69192
1791;;;;;;;;;8;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69192
1791;;;;;;;;;9;"Press key ""Delete""";​​;;RedHatEnterpriseLinux7/RHEL7-69192
1791;;;;;;;;;10;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69192
1791;;;;;;;;;11;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69192
1791;;;;;;;;;12;"Start brasero with ""-n --immediately"" parameters";​​;;RedHatEnterpriseLinux7/RHEL7-69192
1791;;;;;;;;;13;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69192
1791;;;;;;;;;14;Close nautilus window;​​;;RedHatEnterpriseLinux7/RHEL7-69192
1792;RHEL7-69193;"About dialog for the ""readom"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531171;1;"Start brasero with ""-e"" parameter";"the ""readom"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69193
1792;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69193
1792;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69193
1792;;;;;;;;;4;"Click the ""readom"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69193
1792;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69193
1792;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69193
1792;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69193
1793;RHEL7-69194;Files status bar in audio project with no file selected;;Bohdan Milar (bmilar);Critical;Positive;Automated;530927;1;"Copy ""audio1"" to test directory";"files status bar contains ""No file selected"" text";Test Case;RedHatEnterpriseLinux7/RHEL7-69194
1793;;;;;;;;;2;"Start brasero with ""-a"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69194
1793;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69194
1793;;;;;;;;;4;"Click the ""audio1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69194
1793;;;;;;;;;5;"Invoke ""< >"" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69194
1794;RHEL7-69195;Switch side panel in audio project to playlists mode;;Bohdan Milar (bmilar);Critical;Positive;Automated;530959;1;"Start brasero with ""-a"" parameter";playlists panel on the left is displayed;Test Case;RedHatEnterpriseLinux7/RHEL7-69195
1794;;;;;;;;;2;Make side panel visible;​​;;RedHatEnterpriseLinux7/RHEL7-69195
1794;;;;;;;;;3;"Switch side panel to ""files"" mode using combo box";​​;;RedHatEnterpriseLinux7/RHEL7-69195
1794;;;;;;;;;4;"Switch side panel to ""playlists"" mode using combo box";​​;;RedHatEnterpriseLinux7/RHEL7-69195
1795;RHEL7-69196;Open saved audio project via Recent Projects menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530988;1;Save audio project via key;"the ""audio1"" item number ""1"" is in the ""Title"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69196
1795;;;;;;;;;2;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69196
1795;;;;;;;;;3;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69196
1795;;;;;;;;;4;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69196
1795;;;;;;;;;5;Make sure that brasero is running;​​;;RedHatEnterpriseLinux7/RHEL7-69196
1795;;;;;;;;;6;"the ""audio_project1"" is listed on the top of ""Recent Projects"" submenu of the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69196
1795;;;;;;;;;7;"the ""audio_project1"" is listed in the ""Recent projects"" area";​​;;RedHatEnterpriseLinux7/RHEL7-69196
1795;;;;;;;;;8;"Choose ""audio_project1"" item from the ""Recent Projects"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69196
1795;;;;;;;;;9;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69196
1796;RHEL7-69197;In data project create a directory structure of 6 levels - Always;;Bohdan Milar (bmilar);Critical;Positive;Automated;531026;1;"Create 6 levels of ""dir3"" subdirectories in test directory with ""data1"" file";"there are no items named ""Empty""";Test Case;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""dir3"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;3;"an alert named ""Warning"" containing ""Do you really want to add"" in label is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;4;"Click the ""Always Add Such File"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;5;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;6;"there is ""1"" item named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;7;"Click the ""dir3"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;8;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;9;"there are ""2"" items named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;10;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;11;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;12;"there are ""3"" items named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;13;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;14;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;15;"there are ""4"" items named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;16;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;17;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;18;"there are ""5"" items named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;19;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;20;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;21;"there are ""6"" items named ""dir3""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;22;"there are no items named ""data1""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;23;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1796;;;;;;;;;24;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69197
1797;RHEL7-69198;Remove data file via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;531048;1;Prepare Brasero in data mode with file;"there are no items named ""data1""";Test Case;RedHatEnterpriseLinux7/RHEL7-69198
1797;;;;;;;;;2;"Click the ""data1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69198
1797;;;;;;;;;3;"Click the ""Remove"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69198
1798;RHEL7-69199;Open data audio project via Recent Projects menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531097;1;Save data project via key;"the ""data1"" item number ""1"" is in the ""Files"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69199
1798;;;;;;;;;2;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69199
1798;;;;;;;;;3;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69199
1798;;;;;;;;;4;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69199
1798;;;;;;;;;5;Make sure that brasero is running;​​;;RedHatEnterpriseLinux7/RHEL7-69199
1798;;;;;;;;;6;"the ""data_project1"" is listed on the top of ""Recent Projects"" submenu of the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69199
1798;;;;;;;;;7;"the ""data_project1"" is listed in the ""Recent projects"" area";​​;;RedHatEnterpriseLinux7/RHEL7-69199
1798;;;;;;;;;8;"Choose ""data_project1"" item from the ""Recent Projects"" submenu in the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69199
1798;;;;;;;;;9;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69199
1799;RHEL7-69200;Burn the contents of the burn:// URI by --ncb;;Bohdan Milar (bmilar);Critical;Positive;Automated;531134;1;"Create sample ""data1"" text file in test directory";"a dialog named ""Disc Burning Setup"" containing ""Select a disc to write to"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69200
1799;;;;;;;;;2;Launch nautilus in test directory;​​;;RedHatEnterpriseLinux7/RHEL7-69200
1799;;;;;;;;;3;"Click ""data1"" item in nautilus window";​​;;RedHatEnterpriseLinux7/RHEL7-69200
1799;;;;;;;;;4;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69200
1799;;;;;;;;;5;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69200
1799;;;;;;;;;6;"Type ""burn://""";​​;;RedHatEnterpriseLinux7/RHEL7-69200
1799;;;;;;;;;7;"Press key ""Return""";​​;;RedHatEnterpriseLinux7/RHEL7-69200
1799;;;;;;;;;8;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69200
1799;;;;;;;;;9;"Press key ""Delete""";​​;;RedHatEnterpriseLinux7/RHEL7-69200
1799;;;;;;;;;10;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69200
1799;;;;;;;;;11;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69200
1799;;;;;;;;;12;"Start brasero with ""--ncb --immediately"" parameters";​​;;RedHatEnterpriseLinux7/RHEL7-69200
1799;;;;;;;;;13;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69200
1799;;;;;;;;;14;Close nautilus window;​​;;RedHatEnterpriseLinux7/RHEL7-69200
1800;RHEL7-69201;"About dialog for the ""transcode"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531172;1;"Start brasero with ""-e"" parameter";"the ""transcode"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69201
1800;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69201
1800;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69201
1800;;;;;;;;;4;"Click the ""transcode"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69201
1800;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69201
1800;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69201
1800;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69201
1801;RHEL7-69202;Files status bar in audio project with 1 file selected;;Bohdan Milar (bmilar);Critical;Positive;Automated;530928;1;"Copy ""audio2"" to test directory";"files status bar contains ""1 file selected (00:20 min)"" text";Test Case;RedHatEnterpriseLinux7/RHEL7-69202
1801;;;;;;;;;2;"Start brasero with ""-a"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69202
1801;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69202
1801;;;;;;;;;4;"Click the ""audio2"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69202
1802;RHEL7-69203;Open saved audio project via Recent Projects area;;Bohdan Milar (bmilar);Critical;Positive;Automated;530989;1;Save audio project via key;"the ""audio1"" item number ""1"" is in the ""Title"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69203
1802;;;;;;;;;2;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69203
1802;;;;;;;;;3;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69203
1802;;;;;;;;;4;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69203
1802;;;;;;;;;5;Make sure that brasero is running;​​;;RedHatEnterpriseLinux7/RHEL7-69203
1802;;;;;;;;;6;"the ""audio_project1"" is listed on the top of ""Recent Projects"" submenu of the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69203
1802;;;;;;;;;7;"the ""audio_project1"" is listed in the ""Recent projects"" area";​​;;RedHatEnterpriseLinux7/RHEL7-69203
1802;;;;;;;;;8;"Click ""audio_project1"" in the ""Recent projects"" area";​​;;RedHatEnterpriseLinux7/RHEL7-69203
1802;;;;;;;;;9;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69203
1803;RHEL7-69204;Add data directory with long path;;Bohdan Milar (bmilar);Critical;Positive;Automated;531027;1;"Create 5 levels of ""dir_long"" subdirectories in test directory with ""long1"" file";"there are no items named ""Empty""";Test Case;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;4;"name of main window should end with ""New Data Disc Project""";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;5;"there is ""1"" item named ""dir_long""";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;6;"Click the ""dir_long"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;7;"Click the ""Add"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;8;"the ""alert"" named ""Warning"" is not displayed";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;9;"there are ""2"" items named ""dir_long""";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;10;"the ""dir_long"" item number ""2"" is in the ""Files"" column";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;11;"Click the ""dir_long"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;12;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;13;"there are ""3"" items named ""dir_long""";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;14;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;15;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;16;"there are ""4"" items named ""dir_long""";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;17;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;18;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;19;"there are ""5"" items named ""dir_long""";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;20;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;21;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;22;"there are ""6"" items named ""dir_long""";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;23;"there are no items named ""long1""";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;24;"Press key ""Down""";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1803;;;;;;;;;25;"Press key ""+""";​​;;RedHatEnterpriseLinux7/RHEL7-69204
1804;RHEL7-69205;Open saved data project via Recent Projects area;;Bohdan Milar (bmilar);Critical;Positive;Automated;531098;1;Save data project via key;"the ""data1"" item number ""1"" is in the ""Files"" column";Test Case;RedHatEnterpriseLinux7/RHEL7-69205
1804;;;;;;;;;2;"Select ""Quit"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69205
1804;;;;;;;;;3;Wait 1 second;​​;;RedHatEnterpriseLinux7/RHEL7-69205
1804;;;;;;;;;4;"no instance of ""brasero"" application is running";​​;;RedHatEnterpriseLinux7/RHEL7-69205
1804;;;;;;;;;5;Make sure that brasero is running;​​;;RedHatEnterpriseLinux7/RHEL7-69205
1804;;;;;;;;;6;"the ""data_project1"" is listed on the top of ""Recent Projects"" submenu of the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69205
1804;;;;;;;;;7;"the ""data_project1"" is listed in the ""Recent projects"" area";​​;;RedHatEnterpriseLinux7/RHEL7-69205
1804;;;;;;;;;8;"Click ""data_project1"" in the ""Recent projects"" area";​​;;RedHatEnterpriseLinux7/RHEL7-69205
1804;;;;;;;;;9;Turn side panel off via key;​​;;RedHatEnterpriseLinux7/RHEL7-69205
1805;RHEL7-69206;Cover editor via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531135;1;"Start brasero with ""-e"" parameter";"a dialog named ""Cover Editor"" is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69206
1805;;;;;;;;;2;"Select ""Cover Editor"" from the ""Tools"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69206
1805;;;;;;;;;3;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69206
1806;RHEL7-69207;"About dialog for the ""transcode2vob"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531173;1;"Start brasero with ""-e"" parameter";"the ""transcode2vob"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69207
1806;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69207
1806;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69207
1806;;;;;;;;;4;"Click the ""transcode2vob"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69207
1806;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69207
1806;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69207
1806;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69207
1807;RHEL7-69208;Remove data file via key;;Bohdan Milar (bmilar);Critical;Positive;Automated;531049;1;Prepare Brasero in data mode with file;"there are no items named ""data1""";Test Case;RedHatEnterpriseLinux7/RHEL7-69208
1807;;;;;;;;;2;"Click the ""data1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69208
1807;;;;;;;;;3;"Press key ""Delete""";​​;;RedHatEnterpriseLinux7/RHEL7-69208
1808;RHEL7-69209;Files status bar in audio project with side panel off;;Bohdan Milar (bmilar);Critical;Positive;Automated;530929;1;"Start brasero with ""-a"" parameter";files status bar is empty;Test Case;RedHatEnterpriseLinux7/RHEL7-69209
1808;;;;;;;;;2;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69209
1809;RHEL7-69210;Burn audio project to image file via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530990;1;"Copy ""audio1"" to test directory";"name of main window should end with ""New Audio Disc Project""";Test Case;RedHatEnterpriseLinux7/RHEL7-69210
1809;;;;;;;;;2;"Start brasero with ""-a"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69210
1809;;;;;;;;;3;"name of main window should end with ""New Audio Disc Project""";​​;;RedHatEnterpriseLinux7/RHEL7-69210
1809;;;;;;;;;4;Select burn to image in combo box;​​;;RedHatEnterpriseLinux7/RHEL7-69210
1809;;;;;;;;;5;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69210
1809;;;;;;;;;6;Go to test directory in file chooser;​​;;RedHatEnterpriseLinux7/RHEL7-69210
1809;;;;;;;;;7;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69210
1809;;;;;;;;;8;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69210
1809;;;;;;;;;9;"Type the ""audio_image"" filename";​​;;RedHatEnterpriseLinux7/RHEL7-69210
1809;;;;;;;;;10;"Click the ""Create Image"" button in the ""Location for Image File"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69210
1809;;;;;;;;;11;"the ""file chooser"" disappears";​​;;RedHatEnterpriseLinux7/RHEL7-69210
1809;;;;;;;;;12;Wait 5 seconds;​​;;RedHatEnterpriseLinux7/RHEL7-69210
1809;;;;;;;;;13;"the ""Creating Image"" dialog announces ""Image successfully created""";​​;;RedHatEnterpriseLinux7/RHEL7-69210
1809;;;;;;;;;14;"Click the ""Close"" button in the ""Creating Image"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69210
1810;RHEL7-69211;Remove data file via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531050;1;Prepare Brasero in data mode with file;"there are no items named ""data1""";Test Case;RedHatEnterpriseLinux7/RHEL7-69211
1810;;;;;;;;;2;"Click the ""data1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69211
1810;;;;;;;;;3;"Select ""Remove Files"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69211
1811;RHEL7-69212;Burn data project to image file via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531099;1;"Create sample ""data1"" text file in test directory";"there is a non-empty file named ""data_image"" in test directory";Test Case;RedHatEnterpriseLinux7/RHEL7-69212
1811;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""data1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69212
1811;;;;;;;;;3;"name of main window should end with ""New Data Disc Project""";​​;;RedHatEnterpriseLinux7/RHEL7-69212
1811;;;;;;;;;4;Select burn to image in combo box;​​;;RedHatEnterpriseLinux7/RHEL7-69212
1811;;;;;;;;;5;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69212
1811;;;;;;;;;6;Go to test directory in file chooser;​​;;RedHatEnterpriseLinux7/RHEL7-69212
1811;;;;;;;;;7;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69212
1811;;;;;;;;;8;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69212
1811;;;;;;;;;9;"Type the ""data_image"" filename";​​;;RedHatEnterpriseLinux7/RHEL7-69212
1811;;;;;;;;;10;"Click the ""Create Image"" button in the ""Location for Image File"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69212
1811;;;;;;;;;11;"the ""file chooser"" disappears";​​;;RedHatEnterpriseLinux7/RHEL7-69212
1811;;;;;;;;;12;Wait 5 seconds;​​;;RedHatEnterpriseLinux7/RHEL7-69212
1811;;;;;;;;;13;"the ""Creating Image"" dialog announces ""Image successfully created""";​​;;RedHatEnterpriseLinux7/RHEL7-69212
1811;;;;;;;;;14;"Click the ""Close"" button in the ""Creating Image"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69212
1812;RHEL7-69213;Cover editor after burning;;Bohdan Milar (bmilar);Critical;Positive;Automated;531136;1;Burn audio project to image file via button;"a dialog named ""Cover Editor"" is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69213
1812;;;;;;;;;2;"Click the ""Create Cover"" button in the ""Creating Image"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69213
1812;;;;;;;;;3;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69213
1813;RHEL7-69214;"About dialog for the ""vcdimager"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531174;1;"Start brasero with ""-e"" parameter";"the ""vcdimager"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69214
1813;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69214
1813;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69214
1813;;;;;;;;;4;"Click the ""vcdimager"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69214
1813;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69214
1813;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69214
1813;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69214
1814;RHEL7-69215;Burn audio project to image file via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;530991;1;Burn audio project to image file via button;"name of main window should end with ""New Audio Disc Project""";Test Case;RedHatEnterpriseLinux7/RHEL7-69215
1814;;;;;;;;;2;"Click the ""Close"" button in the ""Creating Image"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69215
1815;RHEL7-69216;Burn data project to image file via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;531100;1;Burn data project to image file via button;"there is a non-empty file named ""data_image"" in test directory";Test Case;RedHatEnterpriseLinux7/RHEL7-69216
1815;;;;;;;;;2;"Click the ""Close"" button in the ""Creating Image"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69216
1816;RHEL7-69217;Cover editor buttons accessibility;;Bohdan Milar (bmilar);Critical;Positive;Automated;531137;1;"Start brasero with ""-e"" parameter";"there are no buttons without a11y names in the ""Cover Editor"" dialog";Test Case;RedHatEnterpriseLinux7/RHEL7-69217
1816;;;;;;;;;2;"Select ""Cover Editor"" from the ""Tools"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69217
1816;;;;;;;;;3;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69217
1817;RHEL7-69218;"About dialog for the ""wodim"" plugin";;Bohdan Milar (bmilar);Critical;Positive;Automated;531175;1;"Start brasero with ""-e"" parameter";"the ""wodim"" about dialog has a radio button named ""Credits""";Test Case;RedHatEnterpriseLinux7/RHEL7-69218
1817;;;;;;;;;2;"Select ""Plugins"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69218
1817;;;;;;;;;3;"a dialog named ""Brasero Plugins"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69218
1817;;;;;;;;;4;"Click the ""wodim"" plugin";​​;;RedHatEnterpriseLinux7/RHEL7-69218
1817;;;;;;;;;5;"Click the ""About"" button in the ""Brasero Plugins"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69218
1817;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69218
1817;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69218
1818;RHEL7-69219;Remove data file via rightclick;;Bohdan Milar (bmilar);Critical;Positive;Automated;531051;1;Prepare Brasero in data mode with file;"there are no items named ""data1""";Test Case;RedHatEnterpriseLinux7/RHEL7-69219
1818;;;;;;;;;2;"Rightclick the ""data1"" item on the right";​​;;RedHatEnterpriseLinux7/RHEL7-69219
1818;;;;;;;;;3;"Select ""Remove"" from the context menu";​​;;RedHatEnterpriseLinux7/RHEL7-69219
1819;RHEL7-69220;Set audio project title;;Bohdan Milar (bmilar);Critical;Positive;Automated;530992;1;Prepare Brasero in audio metadata mode with dialog;"the ""audio_project1"" file contains a line with ""audio3"" filename";Test Case;RedHatEnterpriseLinux7/RHEL7-69220
1819;;;;;;;;;2;"Put ""Dummy Message"" to ""Title"" field in metadata dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69220
1819;;;;;;;;;3;"Click the ""Apply"" button in the ""Song Information"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69220
1819;;;;;;;;;4;"Change projet title to ""Speech Dispatcher""";​​;;RedHatEnterpriseLinux7/RHEL7-69220
1819;;;;;;;;;5;"Select ""Save"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69220
1819;;;;;;;;;6;Go to test directory in file chooser;​​;;RedHatEnterpriseLinux7/RHEL7-69220
1819;;;;;;;;;7;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69220
1819;;;;;;;;;8;"Type the ""audio_project1"" filename";​​;;RedHatEnterpriseLinux7/RHEL7-69220
1819;;;;;;;;;9;"Click the ""Save"" button in the ""Save Current Project"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69220
1820;RHEL7-69221;Empty data project via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;531052;1;Prepare Brasero in data mode with file;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69221
1820;;;;;;;;;2;"Click the ""Empty Project"" button";​​;;RedHatEnterpriseLinux7/RHEL7-69221
1820;;;;;;;;;3;"Click the ""Empty Project"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69221
1821;RHEL7-69222;Set data project title;;Bohdan Milar (bmilar);Critical;Positive;Automated;531101;1;Prepare Brasero in data mode with file;"the ""data_project1"" file contains a line with ""data1"" filename";Test Case;RedHatEnterpriseLinux7/RHEL7-69222
1821;;;;;;;;;2;"Change projet title to ""Text Test Project""";​​;;RedHatEnterpriseLinux7/RHEL7-69222
1821;;;;;;;;;3;"Select ""Save"" from the ""Project"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69222
1821;;;;;;;;;4;Go to test directory in file chooser;​​;;RedHatEnterpriseLinux7/RHEL7-69222
1821;;;;;;;;;5;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69222
1821;;;;;;;;;6;"Type the ""data_project1"" filename";​​;;RedHatEnterpriseLinux7/RHEL7-69222
1821;;;;;;;;;7;"Click the ""Save"" button in the ""Save Current Project"" file chooser";​​;;RedHatEnterpriseLinux7/RHEL7-69222
1822;RHEL7-69223;Open Background Properties in Cover editor;;Bohdan Milar (bmilar);Critical;Positive;Automated;531138;1;"Start brasero with ""-e"" parameter";"a dialog named ""Background Properties"" is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69223
1822;;;;;;;;;2;"Select ""Cover Editor"" from the ""Tools"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69223
1822;;;;;;;;;3;"a dialog named ""Cover Editor"" is opened";​​;;RedHatEnterpriseLinux7/RHEL7-69223
1822;;;;;;;;;4;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69223
1822;;;;;;;;;5;Open background properties;​​;;RedHatEnterpriseLinux7/RHEL7-69223
1822;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69223
1822;;;;;;;;;7;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69223
1823;RHEL7-69224;Empty data project via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531053;1;Prepare Brasero in data mode with file;"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69224
1823;;;;;;;;;2;"Select ""Empty Project"" from the ""Edit"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69224
1823;;;;;;;;;3;"Click the ""Empty Project"" button in the ""Warning"" alert";​​;;RedHatEnterpriseLinux7/RHEL7-69224
1824;RHEL7-69225;Open Cover editor and auto-fill text entries;;Bohdan Milar (bmilar);Critical;Positive;Automated;531139;1;Prepare Brasero in audio metadata mode with dialog;"the ""Cover Editor"" dialog has a text with text containing ""Dummy Message"" string";Test Case;RedHatEnterpriseLinux7/RHEL7-69225
1824;;;;;;;;;2;"Put ""Dummy Message"" to ""Title"" field in metadata dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69225
1824;;;;;;;;;3;"Click the ""Apply"" button in the ""Song Information"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-69225
1824;;;;;;;;;4;"Change projet title to ""Speech Dispatcher""";​​;;RedHatEnterpriseLinux7/RHEL7-69225
1824;;;;;;;;;5;"Select ""Cover Editor"" from the ""Tools"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69225
1824;;;;;;;;;6;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69225
1825;RHEL7-69226;Estimated size status bar with empty data project;;Bohdan Milar (bmilar);Critical;Positive;Automated;531054;1;"Start brasero with ""-d"" parameter";"there should be a text area containing 'To add files to this project click the ""Add"" button or drag files to this area'";Test Case;RedHatEnterpriseLinux7/RHEL7-69226
1826;RHEL7-69227;Eject Disc dialog via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531140;1;"Start brasero with ""-e"" parameter";"a dialog named ""Eject Disc"" containing ""Select a disc"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69227
1826;;;;;;;;;2;"Select ""Eject"" from the ""Tools"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69227
1826;;;;;;;;;3;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69227
1827;RHEL7-69228;Estimated size status bar with non-empty data project;;Bohdan Milar (bmilar);Critical;Positive;Automated;531055;1;"Copy ""audio1"" to test directory";"there are only ""audio1"" items on the right side";Test Case;RedHatEnterpriseLinux7/RHEL7-69228
1827;;;;;;;;;2;"Start brasero with ""-d"" parameter and ""audio1"" file in test directory";​​;;RedHatEnterpriseLinux7/RHEL7-69228
1828;RHEL7-69229;Eject dialog buttons accessibility;;Bohdan Milar (bmilar);Critical;Positive;Automated;531141;1;"Start brasero with ""-e"" parameter";"there are no buttons without a11y names in the ""Eject Disc"" dialog";Test Case;RedHatEnterpriseLinux7/RHEL7-69229
1828;;;;;;;;;2;"Select ""Eject"" from the ""Tools"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-69229
1828;;;;;;;;;3;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69229
1829;RHEL7-69230;Files status bar in data project with no file selected;;Bohdan Milar (bmilar);Critical;Positive;Automated;531056;1;"Create sample ""data1"" text file in test directory";"files status bar contains ""No file selected"" text";Test Case;RedHatEnterpriseLinux7/RHEL7-69230
1829;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69230
1829;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69230
1829;;;;;;;;;4;"Click the ""data1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69230
1829;;;;;;;;;5;"Invoke ""< >"" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-69230
1830;RHEL7-69231;Disc Blanking dialog via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531142;1;"Start brasero with ""-e"" parameter";"a dialog named ""Disc Blanking"" containing ""Select a disc"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69231
1830;;;;;;;;;2;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69231
1830;;;;;;;;;3;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69231
1831;RHEL7-69232;Disc Blanking dialog via command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531143;1;"Start brasero with ""-b"" parameter";"a dialog named ""Disc Blanking"" containing ""Select a disc"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69232
1831;;;;;;;;;2;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69232
1832;RHEL7-69233;Files status bar in data project with 1 file selected;;Bohdan Milar (bmilar);Critical;Positive;Automated;531057;1;"Create sample ""data1"" text file in test directory";"files status bar contains ""1 file selected (26 bytes)"" text";Test Case;RedHatEnterpriseLinux7/RHEL7-69233
1832;;;;;;;;;2;"Start brasero with ""-d"" parameter";​​;;RedHatEnterpriseLinux7/RHEL7-69233
1832;;;;;;;;;3;Go to test directory on the left;​​;;RedHatEnterpriseLinux7/RHEL7-69233
1832;;;;;;;;;4;"Click the ""data1"" item on the left";​​;;RedHatEnterpriseLinux7/RHEL7-69233
1833;RHEL7-69234;Files status bar in data project with side panel off;;Bohdan Milar (bmilar);Critical;Positive;Automated;531058;1;"Start brasero with ""-d"" parameter";files status bar is empty;Test Case;RedHatEnterpriseLinux7/RHEL7-69234
1833;;;;;;;;;2;Turn side panel off;​​;;RedHatEnterpriseLinux7/RHEL7-69234
1834;RHEL7-69235;Disc Blanking dialog via long command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531144;1;"Start brasero with ""--blank"" parameter";"a dialog named ""Disc Blanking"" containing ""Select a disc"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69235
1834;;;;;;;;;2;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69235
1835;RHEL7-69236;Blank dialog buttons accessibility;;Bohdan Milar (bmilar);Critical;Positive;Automated;531145;1;"Start brasero with ""-e"" parameter";"there are no buttons without a11y names in the ""Disc Blanking"" dialog";Test Case;RedHatEnterpriseLinux7/RHEL7-69236
1835;;;;;;;;;2;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69236
1835;;;;;;;;;3;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69236
1836;RHEL7-69237;Disc Checking dialog via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;531146;1;"Start brasero with ""-e"" parameter";"a dialog named ""Disc Checking"" containing ""Select a disc"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69237
1836;;;;;;;;;2;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69237
1836;;;;;;;;;3;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69237
1837;RHEL7-69238;Disc Checking dialog via command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531147;1;"Start brasero with ""-k"" parameter";"a dialog named ""Disc Checking"" containing ""Select a disc"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69238
1837;;;;;;;;;2;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69238
1838;RHEL7-69239;Disc Checking dialog via long command;;Bohdan Milar (bmilar);Critical;Positive;Automated;531148;1;"Start brasero with ""--check"" parameter";"a dialog named ""Disc Checking"" containing ""Select a disc"" in label is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-69239
1838;;;;;;;;;2;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69239
1839;RHEL7-69240;Disc Checking dialog buttons accessibility;;Bohdan Milar (bmilar);Critical;Positive;Automated;531149;1;"Start brasero with ""-e"" parameter";"there are no buttons without a11y names in the ""Disc Checking"" dialog";Test Case;RedHatEnterpriseLinux7/RHEL7-69240
1839;;;;;;;;;2;​​;​​;;RedHatEnterpriseLinux7/RHEL7-69240
1839;;;;;;;;;3;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-69240
1840;RHEL7-69241;Brasero debug by -g option;;Bohdan Milar (bmilar);Critical;Positive;Automated;531150;1;Wait 1 second;"the brasero output given by ""-g"" contains ""opening plugin directory"" text";Test Case;RedHatEnterpriseLinux7/RHEL7-69241
1841;RHEL7-69242;Brasero debug by --brasero-burn-debug option;;Bohdan Milar (bmilar);Critical;Positive;Automated;531151;1;Wait 1 second;"the brasero output given by ""--brasero-burn-debug"" contains ""opening plugin directory"" text";Test Case;RedHatEnterpriseLinux7/RHEL7-69242
1842;RHEL7-71623;[start] Start guest after installing libvirt package freshly and starting libvirtd;"When libvirtd.service is started, virtlogd.socket is also activated. Then virtlogd.service can be activated when virtlogd.socket is connected by some object(e.g. when start a guest)
 Bug 1372576 - virtlogd.socket is not active after installation";Fangge Jin (fjin);Critical;Positive;Manual Only;;1;"Install libvirt packages freshly:
 1) First, remove the libvirt* packages installed previously:
 # yum erase libvirt*
 
 2) Then configure latest libvirt repo, and install libvirt packages
 # yum install libvirt
 
 Or download  latest libvirt packages manually, and install by
 # rpm -ivh ./libvirt*.rpm";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-71623
1842;;;;;;;;;2;"Start libvirtd:
 # systemctl start libvirtd
​​";​​;;RedHatEnterpriseLinux7/RHEL7-71623
1842;;;;;;;;;3;"Check virtlogd.socket status
 # systemctl status virtlogd.socket
​​";"virtlogd.socket is active
​​";;RedHatEnterpriseLinux7/RHEL7-71623
1842;;;;;;;;;4;"Check virtlogd.service status
 # systemctl status virtlogd
​​";"virtlogd.service is inactive
​​";;RedHatEnterpriseLinux7/RHEL7-71623
1842;;;;;;;;;5;"Start a guest:
 # virsh start mig1
";"Guest start successfully
";;RedHatEnterpriseLinux7/RHEL7-71623
1842;;;;;;;;;6;"Check the opened file descriptor of qemu log file:
 # lsof /var/log/libvirt/qemu/mig1.log

";"qemu log file is opened by virtlogd.

 Output:
 COMMAND    PID USER   FD   TYPE DEVICE SIZE/OFF     NODE NAME
 virtlogd 32494 root   14w   REG  253,0     2168 68151822 /var/log/libvirt/qemu/mig1.log";;RedHatEnterpriseLinux7/RHEL7-71623
1842;;;;;;;;;7;"Check the content of qemu log file:
 # cat /var/log/libvirt/qemu/mig1.log";qemu log is written into log file.;;RedHatEnterpriseLinux7/RHEL7-71623
1842;;;;;;;;;8;"Check virtlogd.service status:
 # systemctl status virtlogd
";"virtlogd.service is active
";;RedHatEnterpriseLinux7/RHEL7-71623
1843;RHEL7-71625;[start] Start guest after installing libvirt package freshly and rebooting host;After installing libvirt, libvirtd is enabled by default, so after reboot host, libvirtd will be starated and virtlogd.socket also will be acticated along with libvirtd. Then virtlogd.service can be activated when virtlogd.socket is connected by some object(e.g. when start a guest);Fangge Jin (fjin);Critical;Positive;Manual Only;;1;"Install libvirt packages freshly:
 1) First, remove the libvirt* packages installed previously:
 # yum erase libvirt*

 2) Then configure latest libvirt repo, and install libvirt packages
 # yum install libvirt

 Or download  latest libvirt packages manually, and install by
 # rpm -ivh ./libvirt*.rpm";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-71625
1843;;;;;;;;;2;"Reboot host
​​";​​;;RedHatEnterpriseLinux7/RHEL7-71625
1843;;;;;;;;;3;"Check libvirtd status
 # systemctl status libvirtd
​​";"libvirtd is active
​​";;RedHatEnterpriseLinux7/RHEL7-71625
1843;;;;;;;;;4;"Check virtlogd.socket status
 # systemctl status virtlogd.socket
​​";"virtlogd.socket is active
​​";;RedHatEnterpriseLinux7/RHEL7-71625
1843;;;;;;;;;5;"Check virtlogd.service status
 # systemctl status virtlogd
​​";"virtlogd.service is inactive
​​";;RedHatEnterpriseLinux7/RHEL7-71625
1843;;;;;;;;;6;"Start a guest:
 # virsh start mig1
​​";"Guest start successfully
​​";;RedHatEnterpriseLinux7/RHEL7-71625
1843;;;;;;;;;7;"Check the opened file descriptor of qemu log file:
 # lsof /var/log/libvirt/qemu/mig1.log

";"qemu log file is opened by virtlogd.

 Output:
 COMMAND    PID USER   FD   TYPE DEVICE SIZE/OFF     NODE NAME
 virtlogd 32494 root   14w   REG  253,0     2168 68151822 /var/log/libvirt/qemu/mig1.log";;RedHatEnterpriseLinux7/RHEL7-71625
1843;;;;;;;;;8;"Check the content of qemu log file:
 # cat /var/log/libvirt/qemu/mig1.log";qemu log is written into log file.;;RedHatEnterpriseLinux7/RHEL7-71625
1843;;;;;;;;;9;"Check virtlogd.service status:
 # systemctl status virtlogd
​​";"virtlogd.service is active
​​";;RedHatEnterpriseLinux7/RHEL7-71625
1844;RHEL7-71626;Check virtlogd status after libvirtd is restarted;virtlogd.service should not be restarted along with libvirtd;Fangge Jin (fjin);Critical;Positive;Not Automated;;1;"Make sure libvirtd.service and virtlogd.service are active:
 # systemcl status libvirtd
 # systemctl status virtlogd
​​";libvirtd and virtlogd are active;Test Case;RedHatEnterpriseLinux7/RHEL7-71626
1844;;;;;;;;;2;"Start  a guest
 # virsh start mig1
​​";​​;;RedHatEnterpriseLinux7/RHEL7-71626
1844;;;;;;;;;3;"Check the qemu log file:
 # lsof /var/log/libvirt/qemu/mig1.log
 
​​";"qemu log file is opened by virtlogd. Output:

 COMMAND    PID USER   FD   TYPE DEVICE SIZE/OFF     NODE NAME
 virtlogd 18018 root   14w   REG  253,0     6016 68151822 /var/log/libvirt/qemu/mig1.log";;RedHatEnterpriseLinux7/RHEL7-71626
1844;;;;;;;;;4;"Restart libvirtd
 # systemctl restart libvirtd
​​";​​;;RedHatEnterpriseLinux7/RHEL7-71626
1844;;;;;;;;;5;"Check virtlogd.service status:
 # systemctl status virtlogd
 
​​";"virtlogd is running and the pidof doesn't change.
 
 Output:
 ● virtlogd.service - Virtual machine log manager
    Loaded: loaded (/usr/lib/systemd/system/virtlogd.service; indirect; vendor preset: disabled)
    Active: active (running) since Thu 2016-09-22 13:28:10 CST; 1h 4min ago
      Docs: man:virtlogd(8)
            http://libvirt.org
  Main PID: 18018 (virtlogd)
    CGroup: /system.slice/virtlogd.service
            └─18018 /usr/sbin/virtlogd
​​";;RedHatEnterpriseLinux7/RHEL7-71626
1844;;;;;;;;;6;"Check the opened file descriptor of qemu log file:
 # lsof /var/log/libvirt/qemu/mig1.log
​​";"qemu log file is still opened by virtlogd.

 Output:
 COMMAND    PID USER   FD   TYPE DEVICE SIZE/OFF     NODE NAME
 virtlogd 18018 root   14w   REG  253,0     6016 68151822 /var/log/libvirt/qemu/mig1.log";;RedHatEnterpriseLinux7/RHEL7-71626
1845;RHEL7-71627;Check virtlogd status after libvirtd is stopped;virtlogd.service should not be stopped along with libvirtd;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Make sure libvirtd.service and virtlogd.service are active:
 
 # systemctl status libvirtd
 
 # systemctl status virtlogd
​​";Both libvirtd and virtlogd are active.;Test Case;RedHatEnterpriseLinux7/RHEL7-71627
1845;;;;;;;;;2;"start  a guest
 # virsh start mig1
​​";​​;;RedHatEnterpriseLinux7/RHEL7-71627
1845;;;;;;;;;3;"Check the opened file descriptor of qemu log file:
 # lsof /var/log/libvirt/qemu/mig1.log
 
​​";"qemu log file is opened by virtlogd. Outputs:

 COMMAND    PID USER   FD   TYPE DEVICE SIZE/OFF     NODE NAME
 virtlogd 18018 root   14w   REG  253,0     6016 68151822 /var/log/libvirt/qemu/mig1.log";;RedHatEnterpriseLinux7/RHEL7-71627
1845;;;;;;;;;4;"Stop libvirtd
 # systemctl stop libvirtd
 # systemctl status libvirtd
​​";"libvirtd is stopped successfully.
 
​​";;RedHatEnterpriseLinux7/RHEL7-71627
1845;;;;;;;;;5;"Check virtlogd.service status:
 # systemctl status virtlogd
 
​​";"virtlogd.service is still running.
 
 Output:
 ● virtlogd.service - Virtual machine log manager
    Loaded: loaded (/usr/lib/systemd/system/virtlogd.service; indirect; vendor preset: disabled)
    Active: active (running) since Thu 2016-09-22 13:28:10 CST; 1h 9min ago
      Docs: man:virtlogd(8)
            http://libvirt.org
  Main PID: 18018 (virtlogd)
​​";;RedHatEnterpriseLinux7/RHEL7-71627
1845;;;;;;;;;6;"Check the opened file descriptor of qemu log file:
 # lsof /var/log/libvirt/qemu/mig1.log
​​";"qemu log file is still opened by virtlogd.

 Output:
 COMMAND    PID USER   FD   TYPE DEVICE SIZE/OFF     NODE NAME
 virtlogd 18018 root   14w   REG  253,0     6016 68151822 /var/log/libvirt/qemu/mig1.log";;RedHatEnterpriseLinux7/RHEL7-71627
1846;RHEL7-71832;virsh: provide easy pci-passthrough netdev attach command --bug 997561;;Jingjing Shao (jishao);Critical;Positive;Not Automated;;1;" [root@sriov Desktop]# virsh start t_R7.2
Domain t_R7.2 started

[root@sriov Desktop]# virsh dumpxml t_R7.2 | grep /interface -B8
    </controller>
    <interface type='network'>
      <mac address='52:54:00:e0:69:0a'/>
      <source network='default' bridge='virbr0'/>
      <target dev='vnet0'/>
      <model type='virtio'/>
      <alias name='net0'/>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
    </interface>
[root@sriov Desktop]# virsh attach-interface t_R7.2 --type  hostdev --source 0000:03:10:1   --managed
Interface attached successfully

[root@sriov Desktop]# virsh attach-interface t_R7.2 --type  hostdev --source 0000:03:10:2  
error: Failed to attach interface
error: Path '/dev/vfio/24' is not accessible: No such file or directory

[root@sriov Desktop]# virsh dumpxml t_R7.2 | grep /interface -B8    </controller>
    <interface type='network'>
      <mac address='52:54:00:e0:69:0a'/>
      <source network='default' bridge='virbr0'/>
      <target dev='vnet0'/>
      <model type='virtio'/>
      <alias name='net0'/>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
    </interface>
    <interface type='hostdev' managed='yes'>
      <mac address='52:54:00:33:aa:b6'/>
      <driver name='vfio'/>
      <source>
        <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x1'/>
      </source>
      <alias name='hostdev0'/>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
    </interface>
[root@sriov Desktop]#";" As the result left
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-71832
1846;;;;;;;;;2;"[root@sriov Desktop]# virsh detach-interface t_R7.2 --type hostdev --mac 52:54:00:33:aa:b6
Interface detached successfully

[root@sriov Desktop]# virsh dumpxml t_R7.2 | grep /interface -B7
    <interface type='network'>
      <mac address='52:54:00:e0:69:0a'/>
      <source network='default' bridge='virbr0'/>
      <target dev='vnet0'/>
      <model type='virtio'/>
      <alias name='net0'/>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
    </interface>
[root@sriov Desktop]#";​​;;RedHatEnterpriseLinux7/RHEL7-71832
1847;RHEL7-72215;SSH Connect dialog via icon;;Bohdan Milar (bmilar);Critical;Positive;Automated;532609;1;"Click ""Connect"" in Application tool bar";"""Connect"" dialog contains ""label"" ""SSH Options""";Test Case;RedHatEnterpriseLinux7/RHEL7-72215
1847;;;;;;;;;2;"Select protocol ""SSH"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72215
1847;;;;;;;;;3;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-72215
1848;RHEL7-72216;VNC Connect dialog via icon;;Bohdan Milar (bmilar);Critical;Positive;Automated;532617;1;"Click ""Connect"" in Application tool bar";"""Connect"" dialog contains ""label"" ""VNC Options""";Test Case;RedHatEnterpriseLinux7/RHEL7-72216
1848;;;;;;;;;2;"Select protocol ""VNC"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72216
1848;;;;;;;;;3;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-72216
1849;RHEL7-72217;Enable Keyboard shortcuts in menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;532598;1;Start vinagre without parameter;Keyboard shortcuts are enabled;Test Case;RedHatEnterpriseLinux7/RHEL7-72217
1849;;;;;;;;;2;Enable Keyboard shortcuts;​​;;RedHatEnterpriseLinux7/RHEL7-72217
1850;RHEL7-72218;SSH Connect dialog via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;532610;1;"Select ""Connect"" from the ""Remote"" menu";"""Connect"" dialog contains ""label"" ""SSH Options""";Test Case;RedHatEnterpriseLinux7/RHEL7-72218
1850;;;;;;;;;2;"Select protocol ""SSH"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72218
1850;;;;;;;;;3;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-72218
1851;RHEL7-72219;VNC Connect dialog via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;532618;1;"Select ""Connect"" from the ""Remote"" menu";"""Connect"" dialog contains ""label"" ""VNC Options""";Test Case;RedHatEnterpriseLinux7/RHEL7-72219
1851;;;;;;;;;2;"Select protocol ""VNC"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72219
1851;;;;;;;;;3;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-72219
1852;RHEL7-72220;Disable Keyboard shortcuts in menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;532599;1;Start vinagre without parameter;Keyboard shortcuts are disabled;Test Case;RedHatEnterpriseLinux7/RHEL7-72220
1852;;;;;;;;;2;Disable Keyboard shortcuts;​​;;RedHatEnterpriseLinux7/RHEL7-72220
1853;RHEL7-72221;Vinagre ssh connect host by name;;Bohdan Milar (bmilar);Critical;Positive;Automated;532611;1;"Click ""Connect"" in Application tool bar";Terminal shows up;Test Case;RedHatEnterpriseLinux7/RHEL7-72221
1853;;;;;;;;;2;"Select protocol ""SSH"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72221
1853;;;;;;;;;3;"Type ""localhost"" into ""Host:"" dropdown in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72221
1853;;;;;;;;;4;"Click on ""Connect"" button in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72221
1854;RHEL7-72222;VNC connect host by name;;Bohdan Milar (bmilar);Critical;Positive;Automated;532619;1;Set Vncserver password as 123456;"Connection to vncserver is established on port ""5901""";Test Case;RedHatEnterpriseLinux7/RHEL7-72222
1854;;;;;;;;;2;Start Vncserver on port :1;​​;;RedHatEnterpriseLinux7/RHEL7-72222
1854;;;;;;;;;3;"Click ""Connect"" in Application tool bar";​​;;RedHatEnterpriseLinux7/RHEL7-72222
1854;;;;;;;;;4;"Select protocol ""VNC"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72222
1854;;;;;;;;;5;"Type ""localhost:1"" into ""Host:"" dropdown in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72222
1854;;;;;;;;;6;"Click on ""Connect"" button in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72222
1854;;;;;;;;;7;Stop Vncserver running on port :1;​​;;RedHatEnterpriseLinux7/RHEL7-72222
1855;RHEL7-72223;Open Connect dialog via icon;;Bohdan Milar (bmilar);Critical;Positive;Automated;532600;1;Start vinagre without parameter;"a dialog named ""Connect"" is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-72223
1855;;;;;;;;;2;"Click ""Connect"" in Application tool bar";​​;;RedHatEnterpriseLinux7/RHEL7-72223
1855;;;;;;;;;3;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-72223
1856;RHEL7-72224;Vinagre ssh connect host by IPv4;;Bohdan Milar (bmilar);Critical;Positive;Automated;532612;1;"Click ""Connect"" in Application tool bar";Terminal shows up;Test Case;RedHatEnterpriseLinux7/RHEL7-72224
1856;;;;;;;;;2;"Select protocol ""SSH"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72224
1856;;;;;;;;;3;"Type ""127.0.0.1"" into ""Host:"" dropdown in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72224
1856;;;;;;;;;4;"Click on ""Connect"" button in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72224
1857;RHEL7-72225;VNC connect host by IPv4;;Bohdan Milar (bmilar);Critical;Positive;Automated;532620;1;Set Vncserver password as 123456;"Connection to vncserver is established on port ""5901""";Test Case;RedHatEnterpriseLinux7/RHEL7-72225
1857;;;;;;;;;2;Start Vncserver on port :1;​​;;RedHatEnterpriseLinux7/RHEL7-72225
1857;;;;;;;;;3;"Click ""Connect"" in Application tool bar";​​;;RedHatEnterpriseLinux7/RHEL7-72225
1857;;;;;;;;;4;"Select protocol ""VNC"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72225
1857;;;;;;;;;5;"Type ""127.0.0.1:1"" into ""Host:"" dropdown in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72225
1857;;;;;;;;;6;"Click on ""Connect"" button in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72225
1857;;;;;;;;;7;Stop Vncserver running on port :1;​​;;RedHatEnterpriseLinux7/RHEL7-72225
1858;RHEL7-72226;Open Connect dialog via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;532601;1;Start vinagre without parameter;"a dialog named ""Connect"" is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-72226
1858;;;;;;;;;2;"Select ""Connect"" from the ""Remote"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-72226
1858;;;;;;;;;3;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-72226
1859;RHEL7-72227;Vinagre ssh connect host by IPv6;;Bohdan Milar (bmilar);Critical;Positive;Automated;532613;1;"Click ""Connect"" in Application tool bar";Terminal shows up;Test Case;RedHatEnterpriseLinux7/RHEL7-72227
1859;;;;;;;;;2;"Select protocol ""SSH"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72227
1859;;;;;;;;;3;"Type ""[::1]"" into ""Host:"" dropdown in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72227
1859;;;;;;;;;4;"Click on ""Connect"" button in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72227
1860;RHEL7-72228;VNC connect host by IPv6;;Bohdan Milar (bmilar);Critical;Positive;Automated;532621;1;Set Vncserver password as 123456;"Connection to vncserver is established on port ""5901""";Test Case;RedHatEnterpriseLinux7/RHEL7-72228
1860;;;;;;;;;2;Start Vncserver on port :1;​​;;RedHatEnterpriseLinux7/RHEL7-72228
1860;;;;;;;;;3;"Click ""Connect"" in Application tool bar";​​;;RedHatEnterpriseLinux7/RHEL7-72228
1860;;;;;;;;;4;"Select protocol ""VNC"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72228
1860;;;;;;;;;5;"Type ""[::1]:1"" into ""Host:"" dropdown in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72228
1860;;;;;;;;;6;"Click on ""Connect"" button in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72228
1860;;;;;;;;;7;Stop Vncserver running on port :1;​​;;RedHatEnterpriseLinux7/RHEL7-72228
1861;RHEL7-72229;Open Connect dialog via key shortcut;;Bohdan Milar (bmilar);Critical;Positive;Automated;532602;1;Start vinagre without parameter;"a dialog named ""Connect"" is opened";Test Case;RedHatEnterpriseLinux7/RHEL7-72229
1861;;;;;;;;;2;Enable Keyboard shortcuts;​​;;RedHatEnterpriseLinux7/RHEL7-72229
1861;;;;;;;;;3;"Invoke """" shortcut";​​;;RedHatEnterpriseLinux7/RHEL7-72229
1861;;;;;;;;;4;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-72229
1862;RHEL7-72230;Vinagre ssh connect to implicit host;;Bohdan Milar (bmilar);Critical;Positive;Automated;532614;1;"Click ""Connect"" in Application tool bar";Terminal shows up;Test Case;RedHatEnterpriseLinux7/RHEL7-72230
1862;;;;;;;;;2;"Select protocol ""SSH"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72230
1862;;;;;;;;;3;"Type "":22"" into ""Host:"" dropdown in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72230
1862;;;;;;;;;4;"Click on ""Connect"" button in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72230
1863;RHEL7-72231;VNC connect with wrong password;;Bohdan Milar (bmilar);Critical;Positive;Automated;532622;1;Set Vncserver password as 123456;Connection to vncserver is not established on port 5901;Test Case;RedHatEnterpriseLinux7/RHEL7-72231
1863;;;;;;;;;2;Start Vncserver on port :1;​​;;RedHatEnterpriseLinux7/RHEL7-72231
1863;;;;;;;;;3;"Click ""Connect"" in Application tool bar";​​;;RedHatEnterpriseLinux7/RHEL7-72231
1863;;;;;;;;;4;"Select protocol ""VNC"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72231
1863;;;;;;;;;5;"Type ""127.0.0.1:1"" into ""Host:"" dropdown in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72231
1863;;;;;;;;;6;"Click on ""Connect"" button in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72231
1863;;;;;;;;;7;"Wait for ""2"" seconds";​​;;RedHatEnterpriseLinux7/RHEL7-72231
1863;;;;;;;;;8;"Wait for ""2"" seconds";​​;;RedHatEnterpriseLinux7/RHEL7-72231
1863;;;;;;;;;9;Stop Vncserver running on port :1;​​;;RedHatEnterpriseLinux7/RHEL7-72231
1864;RHEL7-72232;SPICE Connect dialog via icon;;Bohdan Milar (bmilar);Critical;Positive;Automated;532603;1;Start vinagre without parameter;"""Connect"" dialog contains ""label"" ""SPICE Options""";Test Case;RedHatEnterpriseLinux7/RHEL7-72232
1864;;;;;;;;;2;"Click ""Connect"" in Application tool bar";​​;;RedHatEnterpriseLinux7/RHEL7-72232
1864;;;;;;;;;3;"Select protocol ""SPICE"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72232
1864;;;;;;;;;4;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-72232
1865;RHEL7-72233;Vinagre ssh connect host by explicit port;;Bohdan Milar (bmilar);Critical;Positive;Automated;532615;1;Change SSH port to 40;Terminal shows up;Test Case;RedHatEnterpriseLinux7/RHEL7-72233
1865;;;;;;;;;2;"Click ""Connect"" in Application tool bar";​​;;RedHatEnterpriseLinux7/RHEL7-72233
1865;;;;;;;;;3;"Select protocol ""SSH"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72233
1865;;;;;;;;;4;"Type ""localhost:40"" into ""Host:"" dropdown in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72233
1865;;;;;;;;;5;"Click on ""Connect"" button in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72233
1866;RHEL7-72234;VNC save credential;;Bohdan Milar (bmilar);Critical;Positive;Automated;532623;1;Backup Gnome Keyring;Credentials are saved;Test Case;RedHatEnterpriseLinux7/RHEL7-72234
1866;;;;;;;;;2;Set Vncserver password as 123456;​​;;RedHatEnterpriseLinux7/RHEL7-72234
1866;;;;;;;;;3;Start Vncserver on port :1;​​;;RedHatEnterpriseLinux7/RHEL7-72234
1866;;;;;;;;;4;Credentials are not saved;​​;;RedHatEnterpriseLinux7/RHEL7-72234
1866;;;;;;;;;5;"Click ""Connect"" in Application tool bar";​​;;RedHatEnterpriseLinux7/RHEL7-72234
1866;;;;;;;;;6;"Select protocol ""VNC"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72234
1866;;;;;;;;;7;"Type ""127.0.0.1:1"" into ""Host:"" dropdown in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72234
1866;;;;;;;;;8;"Click on ""Connect"" button in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72234
1866;;;;;;;;;9;"Wait for ""5"" seconds";​​;;RedHatEnterpriseLinux7/RHEL7-72234
1866;;;;;;;;;10;"Type ""redhat""";​​;;RedHatEnterpriseLinux7/RHEL7-72234
1866;;;;;;;;;11;"Press key ""enter""";​​;;RedHatEnterpriseLinux7/RHEL7-72234
1866;;;;;;;;;12;"Type ""redhat""";​​;;RedHatEnterpriseLinux7/RHEL7-72234
1866;;;;;;;;;13;"Press key ""enter""";​​;;RedHatEnterpriseLinux7/RHEL7-72234
1866;;;;;;;;;14;"Click ""Connect"" in Application tool bar";​​;;RedHatEnterpriseLinux7/RHEL7-72234
1866;;;;;;;;;15;"Select protocol ""VNC"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72234
1866;;;;;;;;;16;"Type ""127.0.0.1:1"" into ""Host:"" dropdown in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72234
1866;;;;;;;;;17;"Click on ""Connect"" button in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72234
1866;;;;;;;;;18;Stop Vncserver running on port :1;​​;;RedHatEnterpriseLinux7/RHEL7-72234
1867;RHEL7-72235;SPICE Connect dialog via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;532604;1;Start vinagre without parameter;"""Connect"" dialog contains ""label"" ""SPICE Options""";Test Case;RedHatEnterpriseLinux7/RHEL7-72235
1867;;;;;;;;;2;"Select ""Connect"" from the ""Remote"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-72235
1867;;;;;;;;;3;"Select protocol ""SPICE"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72235
1867;;;;;;;;;4;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-72235
1868;RHEL7-72236;Vinagre ssh connect as User;;Bohdan Milar (bmilar);Critical;Positive;Automated;532616;1;"Click ""Connect"" in Application tool bar";"check login name ""other_test_user""";Test Case;RedHatEnterpriseLinux7/RHEL7-72236
1868;;;;;;;;;2;"Select protocol ""SSH"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72236
1868;;;;;;;;;3;"Type ""localhost"" into ""Host:"" dropdown in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72236
1868;;;;;;;;;4;"Type ""other_test_user"" into ""Username:"" field in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72236
1868;;;;;;;;;5;"Click on ""Connect"" button in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72236
1869;RHEL7-72237;VNC connect to implicit host;;Bohdan Milar (bmilar);Critical;Positive;Automated;532624;1;Start Vncserver on port :1;"Connection to vncserver is established on port ""5901""";Test Case;RedHatEnterpriseLinux7/RHEL7-72237
1869;;;;;;;;;2;"Click ""Connect"" in Application tool bar";​​;;RedHatEnterpriseLinux7/RHEL7-72237
1869;;;;;;;;;3;"Select protocol ""VNC"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72237
1869;;;;;;;;;4;"Type "":1"" into ""Host:"" dropdown in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72237
1869;;;;;;;;;5;"Click on ""Connect"" button in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72237
1869;;;;;;;;;6;Stop Vncserver running on port :1;​​;;RedHatEnterpriseLinux7/RHEL7-72237
1870;RHEL7-72238;RDP Connect dialog via icon;;Bohdan Milar (bmilar);Critical;Positive;Automated;532605;1;Start vinagre without parameter;"""Connect"" dialog contains ""label"" ""RDP Options""";Test Case;RedHatEnterpriseLinux7/RHEL7-72238
1870;;;;;;;;;2;"Click ""Connect"" in Application tool bar";​​;;RedHatEnterpriseLinux7/RHEL7-72238
1870;;;;;;;;;3;"Select protocol ""RDP"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72238
1870;;;;;;;;;4;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-72238
1871;RHEL7-72239;VNC connect to implicit port;;Bohdan Milar (bmilar);Critical;Positive;Automated;532625;1;Start Vncserver on port :0;"Connection to vncserver is established on port ""5900""";Test Case;RedHatEnterpriseLinux7/RHEL7-72239
1871;;;;;;;;;2;"Click ""Connect"" in Application tool bar";​​;;RedHatEnterpriseLinux7/RHEL7-72239
1871;;;;;;;;;3;"Select protocol ""VNC"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72239
1871;;;;;;;;;4;"Type ""127.0.0.1:0"" into ""Host:"" dropdown in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72239
1871;;;;;;;;;5;"Click on ""Connect"" button in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72239
1871;;;;;;;;;6;"Wait for ""2"" seconds";​​;;RedHatEnterpriseLinux7/RHEL7-72239
1871;;;;;;;;;7;Stop Vncserver running on port :0;​​;;RedHatEnterpriseLinux7/RHEL7-72239
1872;RHEL7-72240;RDP Connect dialog via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;532606;1;Start vinagre without parameter;"""Connect"" dialog contains ""label"" ""RDP Options""";Test Case;RedHatEnterpriseLinux7/RHEL7-72240
1872;;;;;;;;;2;"Select ""Connect"" from the ""Remote"" menu";​​;;RedHatEnterpriseLinux7/RHEL7-72240
1872;;;;;;;;;3;"Select protocol ""RDP"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72240
1872;;;;;;;;;4;"Press key ""Esc""";​​;;RedHatEnterpriseLinux7/RHEL7-72240
1873;RHEL7-72241;VNC connect to maximum display port;;Bohdan Milar (bmilar);Critical;Positive;Automated;532626;1;Start Vncserver on port :1023;"Connection to vncserver is established on port ""6923""";Test Case;RedHatEnterpriseLinux7/RHEL7-72241
1873;;;;;;;;;2;"Click ""Connect"" in Application tool bar";​​;;RedHatEnterpriseLinux7/RHEL7-72241
1873;;;;;;;;;3;"Select protocol ""VNC"" from combo box in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72241
1873;;;;;;;;;4;"Type ""127.0.0.1:1023"" into ""Host:"" dropdown in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72241
1873;;;;;;;;;5;"Click on ""Connect"" button in ""Connect"" dialog";​​;;RedHatEnterpriseLinux7/RHEL7-72241
1873;;;;;;;;;6;"Wait for ""2"" seconds";​​;;RedHatEnterpriseLinux7/RHEL7-72241
1873;;;;;;;;;7;Stop Vncserver running on port :1023;​​;;RedHatEnterpriseLinux7/RHEL7-72241
1874;RHEL7-72242;Commmand line help by --help option;;Bohdan Milar (bmilar);Critical;Positive;Automated;532607;1;"the vinagre output given by ""--help"" contains ""Usage"" text";"the vinagre output given by ""--help"" contains ""Application Options"" text";Test Case;RedHatEnterpriseLinux7/RHEL7-72242
1875;RHEL7-72243;Commmand line help by -? option;;Bohdan Milar (bmilar);Critical;Positive;Automated;532608;1;"the vinagre output given by ""-?"" contains ""Usage"" text";"the vinagre output given by ""-?"" contains ""Application Options"" text";Test Case;RedHatEnterpriseLinux7/RHEL7-72243
1876;RHEL7-72637;Remember RDP session size in Connect dialog - bug 1291281;;Bohdan Milar (bmilar);High;Positive;Manual Only;530092;1;Remote -> Connect;Width and height field in the Connect dialog is pre-filled with the same values as entered in step 4.;Test Case;RedHatEnterpriseLinux7/RHEL7-72637
1876;;;;;;;;;2;Switch the protocol to RDP.;​​;;RedHatEnterpriseLinux7/RHEL7-72637
1876;;;;;;;;;3;"In the ""Host"" field, enter the IPv4 address of the remote machine.";​​;;RedHatEnterpriseLinux7/RHEL7-72637
1876;;;;;;;;;4;Change a session size in the Width and Height entries.;​​;;RedHatEnterpriseLinux7/RHEL7-72637
1876;;;;;;;;;5;"Click the ""Connect"" button.";​​;;RedHatEnterpriseLinux7/RHEL7-72637
1876;;;;;;;;;6;Authenticate if prompted.;​​;;RedHatEnterpriseLinux7/RHEL7-72637
1876;;;;;;;;;7;Remote -> Disconnect;​​;;RedHatEnterpriseLinux7/RHEL7-72637
1876;;;;;;;;;8;Remote -> Connect;​​;;RedHatEnterpriseLinux7/RHEL7-72637
1877;RHEL7-72638; Selection rectangle when cursor leaves window - bug 1291287;;Bohdan Milar (bmilar);High;Positive;Manual Only;530095;1;Remote -> Connect;The selection rectangle goes towards the cursor.;Test Case;RedHatEnterpriseLinux7/RHEL7-72638
1877;;;;;;;;;2;Switch the protocol to RDP.;​​;;RedHatEnterpriseLinux7/RHEL7-72638
1877;;;;;;;;;3;"In the ""Host"" field, enter the IPv4 address of the remote machine.";​​;;RedHatEnterpriseLinux7/RHEL7-72638
1877;;;;;;;;;4;"Click the ""Connect"" button.";​​;;RedHatEnterpriseLinux7/RHEL7-72638
1877;;;;;;;;;5;Authenticate if prompted.;​​;;RedHatEnterpriseLinux7/RHEL7-72638
1877;;;;;;;;;6;Start dragging with mouse anywhere on the desktop.;​​;;RedHatEnterpriseLinux7/RHEL7-72638
1877;;;;;;;;;7;Move the mouse cursor out off the Vinagre window to the left or up.;​​;;RedHatEnterpriseLinux7/RHEL7-72638
1878;RHEL7-72639;SPICE password length - bug 1291297;;Bohdan Milar (bmilar);High;Positive;Manual Only;530120;1;Remote -> Connect;The authentication dialog should allow to enter a password longer than 8 characters.;Test Case;RedHatEnterpriseLinux7/RHEL7-72639
1878;;;;;;;;;2;Switch the protocol to SPICE.;A display of the remote host should open within Vinagre window.;;RedHatEnterpriseLinux7/RHEL7-72639
1878;;;;;;;;;3;"In the ""Host"" field, enter the IPv4 address of the remote machine.";​​;;RedHatEnterpriseLinux7/RHEL7-72639
1878;;;;;;;;;4;"Click the ""Connect"" button.";​​;;RedHatEnterpriseLinux7/RHEL7-72639
1878;;;;;;;;;5;Type password in the authentication dialog.;​​;;RedHatEnterpriseLinux7/RHEL7-72639
1878;;;;;;;;;6;"Click the ""Authenticate"" button.";​​;;RedHatEnterpriseLinux7/RHEL7-72639
1879;RHEL7-72640;vinagre ssh connection via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530172;1;Remote -> Connect;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-72640
1879;;;;;;;;;2;"For ""Protocol"", make sure that SSH is selected.";​​;;RedHatEnterpriseLinux7/RHEL7-72640
1880;RHEL7-72641;vinagre rdp connection via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530174;1;Remote -> Connect;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-72641
1880;;;;;;;;;2;"For ""Protocol"", make sure that RDP is selected.";​​;;RedHatEnterpriseLinux7/RHEL7-72641
1881;RHEL7-72642;vinagre spice connection via menu;;Bohdan Milar (bmilar);Critical;Positive;Automated;530176;1;Remote -> Connect;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-72642
1881;;;;;;;;;2;"For ""Protocol"", make sure that SPICE is selected.";​​;;RedHatEnterpriseLinux7/RHEL7-72642
1882;RHEL7-72643;Minimize button in fullscreen and scale RDP session - bug 1291275;;Bohdan Milar (bmilar);High;Positive;Manual Only;530905;1;Remote -> Connect;"In the RDP Connection dialog, there is a ""Scaling"" check box under the ""RDP Options"" title (step 2).";Test Case;RedHatEnterpriseLinux7/RHEL7-72643
1882;;;;;;;;;2;Switch the protocol to RDP.;"There are ""Minimize window"" button (""_"") and ""Scaling"" toggle button in the fullscreen toolbar (step 7).";;RedHatEnterpriseLinux7/RHEL7-72643
1882;;;;;;;;;3;"In the ""Host"" field, enter URL of the remote machine.";​​;;RedHatEnterpriseLinux7/RHEL7-72643
1882;;;;;;;;;4;"Click the ""Connect"" button.";​​;;RedHatEnterpriseLinux7/RHEL7-72643
1882;;;;;;;;;5;Authenticate if prompted.;​​;;RedHatEnterpriseLinux7/RHEL7-72643
1882;;;;;;;;;6;"Press the ""Fullscreen"" button on the toolbar.";​​;;RedHatEnterpriseLinux7/RHEL7-72643
1882;;;;;;;;;7;Move the mouse cursor to the center of the top screen edge (to force the fullscreen toolbar to appear).;​​;;RedHatEnterpriseLinux7/RHEL7-72643
1883;RHEL7-72649;vinagre spice connection via button;;Bohdan Milar (bmilar);Critical;Positive;Automated;434038;1;"Click the ""Connect"" button in tool bar.";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-72649
1883;;;;;;;;;2;"For ""Protocol"", make sure that SPICE is selected.";​​;;RedHatEnterpriseLinux7/RHEL7-72649
1884;RHEL7-72897;Removable Drive Menu;;Bohdan Milar (bmilar);Critical;Positive;Manual Only;531714;1;Connect an external drive (e. g. USB flash) or insert a media (e. g. DVD ROM).;"The ""eject"" icon appears on the right side of the Gnome (top) panel after a removable drive/medium is connected/inserted.";Test Case;RedHatEnterpriseLinux7/RHEL7-72897
1884;;;;;;;;;2;"Click the ""eject"" icon which should appear on the right side of the Gnome (top) panel.";"When clicking the ""eject"" icon in the Gnome panel a menu with the list of removable drive should appear.";;RedHatEnterpriseLinux7/RHEL7-72897
1884;;;;;;;;;3;"Choose the ""Open File"" item from the manu.";Nautilus window should open displaying the content of the user's home directory.;;RedHatEnterpriseLinux7/RHEL7-72897
1884;;;;;;;;;4;"Click the ""eject"" icon in the Gnome panel and choose the name of the removable drive.";Disk Usage Analyzer should open a window wich a chart showing the structure of the removable drive's root directory.;;RedHatEnterpriseLinux7/RHEL7-72897
1884;;;;;;;;;5;"Click the ""eject"" icon in the Gnome panel and then the ""eject"" icon right of the removable drive's name.";"The removable drive should be unmounted and the ""eject"" icon should disappear from the Gnome panel.";;RedHatEnterpriseLinux7/RHEL7-72897
1885;RHEL7-72898;Native Window Placement;;Bohdan Milar (bmilar);Critical;Positive;Manual Only;531715;1;Invoke the Overview screen (e. g. by pressing the Super key).;"When the Overview screen is invoked for the first time (Actions, step 1 - ""Native Window Placement"" is off), miniatures of the windows are arranged in row(s) and their titles are placed under them not covering any part of a miniature.";Test Case;RedHatEnterpriseLinux7/RHEL7-72898
1885;;;;;;;;;2;Quit the Overview screen (e. g. by pressing the Esc key).;"When the Overview screen is invoked for the second time (Actions, step 4 - ""Native Window Placement"" is on), miniatures of the windows are not arranged in rows and their titles are placed above them covering the top part of the relevant window miniature.";;RedHatEnterpriseLinux7/RHEL7-72898
1885;;;;;;;;;3;"In the ""GNOME Shell Extensions"" window, enable the ""Native Window Placement"" extension.";​​;;RedHatEnterpriseLinux7/RHEL7-72898
1885;;;;;;;;;4;Invoke the Overview screen (e. g. by pressing the Super key).;​​;;RedHatEnterpriseLinux7/RHEL7-72898
1885;;;;;;;;;5;Quit the Overview screen (e. g. by pressing the Esc key).;​​;;RedHatEnterpriseLinux7/RHEL7-72898
1886;RHEL7-72899;Screenshot Window Sizer;;Bohdan Milar (bmilar);Critical;Positive;Manual Only;531716;1;Press Ctrl+Alt+s.;The gedit window should change its size and a box appeat showing the new resolution.;Test Case;RedHatEnterpriseLinux7/RHEL7-72899
1886;;;;;;;;;2;Press Ctrl+Alt+s again (at least 5 times).;Pressing Ctrl+Alt+s again and again causes the size of the window cyckle through 5 predefined sizes.;;RedHatEnterpriseLinux7/RHEL7-72899
1887;RHEL7-72900;User Themes extension;;Bohdan Milar (bmilar);Critical;Positive;Manual Only;531717;1;In the Tweak Tool, switch to the Appearance Tweak.;"When the Tweak Tool is opened for the first time (Actions, step 1 - ""User Themes"" is off), you should see one (inactive) button in the ""Shell theme"" row and a warning sign (!) beside it.";Test Case;RedHatEnterpriseLinux7/RHEL7-72900
1887;;;;;;;;;2;Quit gnome-tweak-tool.;"When the Tweak Tool is opened for the second time (Actions, step 5 - ""User Themes"" is on), you should see two active buttons in the ""Shell theme"" row and no warning sign beside them.";;RedHatEnterpriseLinux7/RHEL7-72900
1887;;;;;;;;;3;"In the ""GNOME Shell Extensions"" window, enable the ""User Themes"" extension.";​​;;RedHatEnterpriseLinux7/RHEL7-72900
1887;;;;;;;;;4;Start gnome-tweak-tool.;​​;;RedHatEnterpriseLinux7/RHEL7-72900
1887;;;;;;;;;5;In the Tweak Tool, switch to the Appearance Tweak.;​​;;RedHatEnterpriseLinux7/RHEL7-72900
1888;RHEL7-72901;windowNavigator extension;;Bohdan Milar (bmilar);Critical;Positive;Manual Only;531718;1;Invoke the Overview screen (e. g. by pressing the Super key).;"Holding Alt key and pressing Alt+1 or Ctrl+1 (Actions, steps 2 - 4) has no effect in Overview when the ""windowNavigator"" extension is turned off.";Test Case;RedHatEnterpriseLinux7/RHEL7-72901
1888;;;;;;;;;2;Hold Alt key for several seconds.;"After ""windowNavigator"" extension is turned on, the keys have these effects:";;RedHatEnterpriseLinux7/RHEL7-72901
1888;;;;;;;;;3;Press Alt+1.;Holding Alt key displays small numbers in the top right-hand corner of each window miniature on current Workspace.;;RedHatEnterpriseLinux7/RHEL7-72901
1888;;;;;;;;;4;Press Ctrl+1.;"Pressing Alt+1 moves focus to the window marked ""1"" (in the top right-hand corner) and Overview mode is finished.";;RedHatEnterpriseLinux7/RHEL7-72901
1888;;;;;;;;;5;Quit the Overview screen (e. g. by pressing the Esc key).;​​;;RedHatEnterpriseLinux7/RHEL7-72901
1888;;;;;;;;;6;"In the ""GNOME Shell Extensions"" window, enable the ""windowNavigator"" extension.";​​;;RedHatEnterpriseLinux7/RHEL7-72901
1888;;;;;;;;;7;Invoke the Overview screen (e. g. by pressing the Super key).;​​;;RedHatEnterpriseLinux7/RHEL7-72901
1888;;;;;;;;;8;Hold Alt key for several seconds.;​​;;RedHatEnterpriseLinux7/RHEL7-72901
1888;;;;;;;;;9;Press Alt+1.;​​;;RedHatEnterpriseLinux7/RHEL7-72901
1888;;;;;;;;;10;Invoke the Overview screen (e. g. by pressing the Super key).;​​;;RedHatEnterpriseLinux7/RHEL7-72901
1888;;;;;;;;;11;Press Ctrl+1.;​​;;RedHatEnterpriseLinux7/RHEL7-72901
1888;;;;;;;;;12;Quit the Overview screen (e. g. by pressing the Esc key).;​​;;RedHatEnterpriseLinux7/RHEL7-72901
1889;RHEL7-73036;Launch New Instance;;Bohdan Milar (bmilar);Critical;Positive;Manual Only;531865;1;Invoke the Dock (e. g. by pressing the Super key).;Two gnome-calculator windows (instances) should be displayed.;Test Case;RedHatEnterpriseLinux7/RHEL7-73036
1889;;;;;;;;;2;Find the icon of the running gnome-calculator in Dock and click it.;​​;;RedHatEnterpriseLinux7/RHEL7-73036
1890;RHEL7-73037;Window List on all monitors;;Bohdan Milar (bmilar);High;Positive;Manual Only;531868;1;Click the gear button beside the Window List extension to show configuration options (in gnome-shell-extension-prefs).;"In the settings dialog for the Window List extension (gnome-shell-extension-prefs), there is a checkbox called ""Show on all monitors"".";Test Case;RedHatEnterpriseLinux7/RHEL7-73037
1890;;;;;;;;;2;"Click the ""Show on all monitors"" check box.";When the checkbox is checked, window list (bar/panel) with no window buttons (items) appears on secondary monitor.;;RedHatEnterpriseLinux7/RHEL7-73037
1890;;;;;;;;;3;Move the gedit and/or gnome-calculator window from one monitor to the other.;When a window is dragged from one display to the other, the relevant button disappears from the window list panel on source display and appears in the window list panel on destination display.;;RedHatEnterpriseLinux7/RHEL7-73037
1890;;;;;;;;;4;Hold Ctrl+Alt and press Tab.;"In the ""Switch system controls"" list (ctrl+alt+tab), there should be 2 items called ""Window List"".";;RedHatEnterpriseLinux7/RHEL7-73037
1891;RHEL7-73332;gpk-application: About;;Bohdan Milar (bmilar);Medium;Positive;Manual Only;532182;1;Top Bar -> Packages -> About;"The gpk-application ""About"" dialog should open with the ""About"" button pressed, presenting icon, name (Packages), version number, short identification, link to PackageKit Website and copyright.";Test Case;RedHatEnterpriseLinux7/RHEL7-73332
1891;;;;;;;;;2;"Click the ""Credits"" button.";Information about authors should overlap the bottom part of the About dialog.;;RedHatEnterpriseLinux7/RHEL7-73332
1891;;;;;;;;;3;"Click the ""License"" button.";Text of the SW licence (GPL 2) in a scrollable, non-editable text field should overlap the bottom part of the About dialog.;;RedHatEnterpriseLinux7/RHEL7-73332
1891;;;;;;;;;4;"Click the ""Close"" button.";"The gpk-application ""About"" dialog should close.";;RedHatEnterpriseLinux7/RHEL7-73332
1892;RHEL7-73333;gpk-prefs: quit;;Bohdan Milar (bmilar);Critical;Positive;Manual Only;532183;1;Top Bar -> Package Updater -> Quit;In all cases (steps 1, 3, 5) the program should exit, and the terminal window should show a shell prompt.;Test Case;RedHatEnterpriseLinux7/RHEL7-73333
1892;;;;;;;;;2;"In a terminal window, as a non-root user, run ""gpk-prefs"".";​​;;RedHatEnterpriseLinux7/RHEL7-73333
1892;;;;;;;;;3;"Press ""Esc"".";​​;;RedHatEnterpriseLinux7/RHEL7-73333
1892;;;;;;;;;4;"In a terminal window, as a non-root user, run ""gpk-prefs"".";​​;;RedHatEnterpriseLinux7/RHEL7-73333
1892;;;;;;;;;5;"Click the ""Close"" button.";​​;;RedHatEnterpriseLinux7/RHEL7-73333
1893;RHEL7-73334;gpk-log: Sorting;;Bohdan Milar (bmilar);Medium;Positive;Manual Only;532184;1;"Click the ""Date"" column header.";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-73334
1893;;;;;;;;;2;"Click the ""Date"" column header again.";​​;;RedHatEnterpriseLinux7/RHEL7-73334
1893;;;;;;;;;3;"Click the ""Action"" column header.";​​;;RedHatEnterpriseLinux7/RHEL7-73334
1893;;;;;;;;;4;"Click the ""Action"" column header again.";​​;;RedHatEnterpriseLinux7/RHEL7-73334
1893;;;;;;;;;5;"Click the ""User name"" column header.";​​;;RedHatEnterpriseLinux7/RHEL7-73334
1893;;;;;;;;;6;"Click the ""User name"" column header again.";​​;;RedHatEnterpriseLinux7/RHEL7-73334
1893;;;;;;;;;7;"Click the ""Application"" column header.";​​;;RedHatEnterpriseLinux7/RHEL7-73334
1893;;;;;;;;;8;"Click the ""Application"" column header again.";​​;;RedHatEnterpriseLinux7/RHEL7-73334
1894;RHEL7-73488;WALA-TC: [WALA conf] Resource disk mount options;WALA-TC: [WALA conf] Resource disk mount options;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;" Prepare a VM, and login.
 1. Modify the option ResourceDisk.MountOptions in /etc/waagent.conf.
 set:
 ResourceDisk.MountOptions=sync,noatime
 ResourceDisk.Format=y";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-73488
1894;;;;;;;;;2;"2. Reboot system
​​";"# reboot
​​";;RedHatEnterpriseLinux7/RHEL7-73488
1894;;;;;;;;;3;"3. Check the resource disk is mounted as the correct options
 # mount | grep /dev/sdb";"For RHEL-6:
 # mount | grep /dev/sdb
 /dev/sdb1 on /mnt/resource type ext4 (rw,sync,noatime)
 For RHEL-7:
 # mount | grep /dev/sdb
 /dev/sdb1 on /mnt/resource type ext4
 (rw,sync,noatime,seclabel,data=ordered)";;RedHatEnterpriseLinux7/RHEL7-73488
1894;;;;;;;;;4;"4. Change the ResourceDisk.MountOptions in /etc/waagent.conf as:
 ResourceDisk.MountOptions=None
 ResourceDisk.Format=y
 Run step 2-3. Check the resource disk mount options.";"For RHEL-6:
 # mount | grep /dev/sdb
 /dev/sdb1 on /mnt/resource type ext4 (rw)
 For RHEL-7:
 # mount | grep /dev/sdb
 /dev/sdb1 on /mnt/resource type ext4
 (rw,relatime,seclabel,data=ordered)";;RedHatEnterpriseLinux7/RHEL7-73488
1894;;;;;;;;;5;config;​​;;RedHatEnterpriseLinux7/RHEL7-73488
1895;RHEL7-73490;WALA-TC: [WALA conf] Resource disk - GPT partition;WALA-TC: [WALA conf] Resource disk - GPT partition;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Prepare a VM of G5 size.
 1. Check if /dev/sdb is parted
 Check if the partition is GPT
​​";"# parted /dev/sdb print
 Model: Msft Virtual Disk (scsi)
 Disk /dev/sdb: 6597GB
 Sector size (logical/physical): 512B/512B
 Partition Table: gpt
 Disk Flags:
 
 Number  Start   End     Size    File system  Name     Flags
  1      1049kB  6597GB  6597GB  ext4         primary
 
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-73490
1895;;;;;;;;;2;"2. Set waagent.conf and check swap file
 # vi /etc/waagent.conf.
 ResourceDisk.Format=y
 ResourceDisk.Filesystem=ext4
 ResourceDisk.EnableSwap=y
 ResourceDisk.SwapSizeMB=5242880
 # reboot
 # mount
 # free -mg
​​";"# mount
 /dev/sdb1 on /mnt/resource type ext4 (rw,relatime,seclabel,data=ordered)
 # free -mg
               total        used        free      shared  buff/cache   available
 Mem:            440           6         433           0           0         433
 Swap:          5119           0        5119
​​";;RedHatEnterpriseLinux7/RHEL7-73490
1895;;;;;;;;;3;"3. Check waagent.log
​​";"# cat /var/log/waagent.log
 2016/09/23 17:16:25.779619 INFO GPT detected
 2016/09/23 17:16:25.779935 INFO Get GPT partitions
 2016/09/23 17:16:25.781245 INFO Found more than 2 GPT partitions.
 2016/09/23 17:16:25.781976 INFO Remove old GPT partitions
 2016/09/23 17:16:25.782292 INFO Remove partition: 1
 2016/09/23 17:16:25.799082 INFO Remove partition: 2
 2016/09/23 17:16:25.812287 INFO Create a new GPT partition using entire disk space
 
 No error logs
​​";;RedHatEnterpriseLinux7/RHEL7-73490
1895;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-73490
1896;RHEL7-73515;"fs-qe case:/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";"/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-73515
1897;RHEL7-73516;LIBVIRT_ADMIN_DEFAULT_URI [negative] - Set an invalid URI;"This is an invalid value test.
";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" # export LIBVIRT_ADMIN_DEFAULT_URI=abc:d
 
 # virt-admin uri
 error: Failed to connect to the admin server
 error: no valid connection
 error: unsupported configuration: Unsupported URI scheme 'abc'";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-73516
1898;RHEL7-74523;IDM-SSSD-TC: ldap_provider: secrets_service: Enable and verify sssd secrets service;Enable and verify sssd secrets service;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;Setup sssd.conf file with a LOCAL provider.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-74523
1898;;;;;;;;;2;"Execute: # systemctl start sssd.service
";​​;;RedHatEnterpriseLinux7/RHEL7-74523
1898;;;;;;;;;3;Execute: #systemctl start sssd-secrets.socket;​​;;RedHatEnterpriseLinux7/RHEL7-74523
1898;;;;;;;;;4;Execute: # systemctl enable sssd-secrets.socket;​​;;RedHatEnterpriseLinux7/RHEL7-74523
1898;;;;;;;;;5;Execute: # systemctl enable sssd-secrets.service;​​;;RedHatEnterpriseLinux7/RHEL7-74523
1898;;;;;;;;;6;"Verify the status of sssd service
";SSSD service should be running.;;RedHatEnterpriseLinux7/RHEL7-74523
1898;;;;;;;;;7;Verify the status of sssd-secrets.socket;Sssd-secrets.socket service should be running.;;RedHatEnterpriseLinux7/RHEL7-74523
1898;;;;;;;;;8;Verify the existence of /var/run/secrets.socket file;"File /var/run/secrets.socket should exist.
​​";;RedHatEnterpriseLinux7/RHEL7-74523
1899;RHEL7-74524;IDM-SSSD-TC: ldap_provider: secrets_service: Test sssd behaviour by adding secrets to services directive;Test sssd behaviour by adding secrets to services directive;Amith Kumar Peethambaran (apeetham);Medium;Negative;Automated;;1;"Edit sssd.conf file and add secrets string to services option.
     for example, services = nss, pam, secrets";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-74524
1899;;;;;;;;;2;Restart sssd service;SSSD service fails to start.;;RedHatEnterpriseLinux7/RHEL7-74524
1899;;;;;;;;;3;Verify error log in sssd.log file;"Logged message in sssd.log : ""Invalid service secrets"".";;RedHatEnterpriseLinux7/RHEL7-74524
1900;RHEL7-74647;IDM-SSSD-TC: ldap_provider: secrets_service: Test sssd behaviour by adding a secrets section;Test sssd behaviour by adding a secrets section;Amith Kumar Peethambaran (apeetham);Medium;Negative;Automated;;1;"Edit sssd.conf file and add a secrets section as given below:
        [secrets]
        debug_level = 0xFFF0
        provider = local";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-74647
1900;;;;;;;;;2;Restart sssd service;"SSSD service should start.
";;RedHatEnterpriseLinux7/RHEL7-74647
1900;;;;;;;;;3;Verify error log in sssd.log file;"Shouldn't see error in sssd.log : ""Section [secrets] is not allowed. Check for typos.""";;RedHatEnterpriseLinux7/RHEL7-74647
1901;RHEL7-74648;IDM-SSSD-TC: ldap_provider: secrets_service: Verify stored secret for a local user;Verify stored secret for a local user;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1; Add a local user, say sss_useradd testuser1;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-74648
1901;;;;;;;;;2;Login as testuser1;​​;;RedHatEnterpriseLinux7/RHEL7-74648
1901;;;;;;;;;3;"Create a secret for the user, by sending a PUT request using Content-Type: application/json.

 # curl -H ""Content-Type: application/json"" --unix-socket /var/run/secrets.socket -XPUT http://localhost/secrets/bar  -d'{""type"":""simple"",""value"":""barsecret""}'";​​;;RedHatEnterpriseLinux7/RHEL7-74648
1901;;;;;;;;;4;"Read the secret value by sending a GET request.
 
 # curl -H ""Content-Type: application/json"" --unix-socket /var/run/secrets.socket -XGEThttp://localhost/secrets/bar
​​";​​;;RedHatEnterpriseLinux7/RHEL7-74648
1901;;;;;;;;;5;"Verify the user record in secrets.ldb file.
 
 # ldbsearch -H /var/lib/sss/secrets/secrets.ldb";"Successfully added a key:value pair for user ""testuser1"". The user record in secrets.ldb is updated with proper username, uid and encrypted secret.";;RedHatEnterpriseLinux7/RHEL7-74648
1902;RHEL7-74649;IDM-SSSD-TC: ldap_provider: secrets_service: Test SSSD behavior by adding a duplicate secret name;Test SSSD behavior by adding a duplicate secret name;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;Login as a local user.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-74649
1902;;;;;;;;;2;Create a secret for the user wherein the value matches an existing secret name.;Test fails with a 409 http error.;;RedHatEnterpriseLinux7/RHEL7-74649
1903;RHEL7-74650;IDM-SSSD-TC: ldap_provider: secrets_service: Verify a user's access rights to stored secrets;Verify a user's access rights to stored secrets;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;Add two local users : testuser1 & testuser2.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-74650
1903;;;;;;;;;2;Login as testuser1 and create a secret.;​​;;RedHatEnterpriseLinux7/RHEL7-74650
1903;;;;;;;;;3;Login as testuser2 and try to read the secret value of testuser1.;"User request fails with ""404 Not Found"" error.
 # $ curl -H ""Content-Type: application/json"" --unix-socket /var/run/secrets.socket -XGEThttp://localhost/secrets/bar
 <html>
 <head>
 <title>404 Not Found</title></head>
 <body>
 <h1>Not Found</h1>
 <p>The requested resource was not found.</p>
​​";;RedHatEnterpriseLinux7/RHEL7-74650
1904;RHEL7-77854;"fs-qe case:/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";"/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-77854
1905;RHEL7-77865;bz1109348_scsi_mq_fio;bz1109348_scsi_mq_fio ;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-77865
1906;RHEL7-77866;bz1248739_scsi-mq_memory_leak;bz1248739_scsi-mq_memory_leak;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-77866
1907;RHEL7-77867;bz1265985_scsi_mq_raid1;bz1265985_scsi_mq_raid1;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-77867
1908;RHEL7-77868;null_blk;null_blk;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-77868
1909;RHEL7-77870;bz1273339_block_IO_flag;bz1273339_block_IO_flag;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-77870
1910;RHEL7-77880;en_scsi_mq;en_scsi_mq;Guangwu Zhang (guazhang);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-77880
1911;RHEL7-77884;"fs-qe case:/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";"/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-77884
1912;RHEL7-77908;"fs-qe case:/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";"/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-77908
1913;RHEL7-79022;WALA-TC: [WALA conf] ssh host key pair type;ssh host key pair type;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Prepare a VM, and login. Provisioning.RegenerateSshHostKeyPair=y.
 1. Modify the option Provisioning.SshHostKeyPairType in /etc/waagent.conf.
 set Provisioning.SshHostKeyPairType=rsa
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-79022
1913;;;;;;;;;2;"2. Deprovision this VM
 # waagent -deprovision -force
 Check warning message
 Check ssh key files
 # ls /etc/ssh
 Restart sshd service to generate ssh keys, then check the md5 of the rsa key";"All the ssh key files are removed.
 After restarting sshd service:
 # md5sum /etc/ssh/ssh_host_rsa_key";;RedHatEnterpriseLinux7/RHEL7-79022
1913;;;;;;;;;3;"3. Capture this VM as a generalized image.
 Create a VM based on this image.";​​;;RedHatEnterpriseLinux7/RHEL7-79022
1913;;;;;;;;;4;"4.Login the VM, calculate the md5 of the new rsa ssh key file, then compare with the old one
​​";"New rsa ssh key pair is created(only rsa type)
 # md5sum /etc/sshnew/ssh_host_rsa_key*
 The new rsa key md5 value is different from the old md5.";;RedHatEnterpriseLinux7/RHEL7-79022
1913;;;;;;;;;5;"5. set Provisioning.SshHostKeyPairType as dsa, then repeat step 2-4.
​​";"New dsa ssh key pair is created(only dsa type)
 # ls /etc/sshnew/ssh_host_dsa_key*
 /etc/sshnew/ssh_host_dsa_key  /etc/sshnew/ssh_host_dsa_key.pub";;RedHatEnterpriseLinux7/RHEL7-79022
1913;;;;;;;;;6;6. set Provisioning.SshHostKeyPairType as auto (new in WALA-2.2.15), then repeat step 2-4.;"All types of ssh key pairs are recreated(rsa, dsa, ecdsa, ed25519)
 # md5sum /etc/ssh/ssh_host_{rsa,dsa,ecdsa,ed25519}_key";;RedHatEnterpriseLinux7/RHEL7-79022
1913;;;;;;;;;7;"7. Check /var/log/waagent.log and /var/log/messages
​​";"There's no error message in waagent.log and /var/log/messages
​​";;RedHatEnterpriseLinux7/RHEL7-79022
1913;;;;;;;;;8;config;​​;;RedHatEnterpriseLinux7/RHEL7-79022
1914;RHEL7-79049;"[serial] Add ""log"" sub-element to serial  except 'file' type (pty)";"[Console and serial devices][serial] Add ""log"" sub-element to serial except 'file' type";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;" 1, Add ""log"" sub-element to serail xml as below to the xml of guest rhel7
 <serial type='pty'>
 <source path='/dev/pts/3'/>
 <target port='0'/>
 <log file=""/var/log/libvirt/qemu/guestname-serial0.log"" append=""off""/>
 </serial>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-79049
1914;;;;;;;;;2;"2. start the guest rhel7
​​";​​;;RedHatEnterpriseLinux7/RHEL7-79049
1914;;;;;;;;;3;"3, exchange some data with the guest through that serial device
 for example:
 virsh console rhel7
​​";​​;;RedHatEnterpriseLinux7/RHEL7-79049
1914;;;;;;;;;4;4,check the /var/log/libvirt/qemu/guestname-serial0.log, you can find the exchange data info;​​;;RedHatEnterpriseLinux7/RHEL7-79049
1915;RHEL7-79078;"fs-qe case:/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";"/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-79078
1916;RHEL7-79086;"fs-qe case:/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";"/nfs-utils/function/nfs-referrals/bz254106-kernel-panic-on-umount-with-refer param:""enable_rpcdebug=nfs,rpc"" tag:nfs-utils,tier1,regression";Yongcheng Yang (yoyang);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-79086
1917;RHEL7-79910;WALA-TC: [General] Verify AutoUpdate is disabled;WALA-TC: [General] Verify AutoUpdate is disabled;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"1. Prepare a VM. Install the WALA rpm package.
 Check the AutoUpdate.Enabled value
​​";"# grep -r ""AutoUpdate.Enabled"" /etc/waagent.conf
 AutoUpdate.Enabled=n
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-79910
1918;RHEL7-79998;[remote-access][tls] Set tls protocol/cipher priority--bug 1333404 ---new for rhel7.3;"1.Test the tls_priority config in the libvirt.conf;
2.Test the tls_priority override in the URI;
";Yan Fu (yafu);High;Positive;Not Automated;;1;" Scenerio1
 Test the tls_priority config in the libvirt.conf:
 0.Prepare the tls env between hostA and hostB;
 hostA: client
 hostB:  libvirtd server
 1.Set tls_priority to disable SSL3.0 on **hostB** 
 # cat /etc/libvirt/libvirtd.conf
   tls_priority=""NORMAL:!VERS-SSL3.0""
 # systemctl restart libvirtd ";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-79998
1918;;;;;;;;;2;"2.Edit libvirt.conf on **hostA** to only support SSL3.0 in libvirt.conf: 
 #cat /etc/libvirt/libvirt.conf
 tls_priority=""NORMAL:-VERS-ALL:+VERS-SSL3.0""
 
 3.Connect to server hypervisor:
   #virsh -c qemu+tls://hostB/system
​​";"3. #virsh -c qemu+tls://hostB/system
  error: failed to connect to the hypervisor
   error: authentication failed: TLS handshake failed A record packet with illegal version was received.";;RedHatEnterpriseLinux7/RHEL7-79998
1918;;;;;;;;;3;"4.Edit libvirt.conf  on **hostA** to other tls version except ssl3.0:
   #cat libvirt.conf
  tls_priority=""NORMAL:-VERS-ALL:+VERS-TLS1.0""
 
 5.Connect to server hypervisor from client:
 #virsh -c qemu+tls://hostB/system?tls_priority=NORMAL:-VERS-SSL3.0
​​";"5. #virsh -c qemu+tls://hostB/system?tls_priority=NORMAL:-VERS-SSL3.0
   Welcome to virsh, the virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virsh # quit
​​";;RedHatEnterpriseLinux7/RHEL7-79998
1918;;;;;;;;;4;"6.Set tls_priority to the wrong values:
    tls_priority=""NORMAL:-VERS-SSL4.0""
 
 7. Connect to server hypervisor:
    # virsh -c qemu+tls://hostB/system";"6. # virsh -c qemu+tls://hostB/system
 error: failed to connect to the hypervisor
 error: Failed to set TLS session priority to NORMAL:-VERS-TLS4.0: The request is invalid.";;RedHatEnterpriseLinux7/RHEL7-79998
1918;;;;;;;;;5;"Scenerio2 
 Test TLS protocol/cipher priority override in URI:
 7.Override TLS priority in URI to only use ssl3.0:
   #virsh -c qemu+tls://hostB/system?tls_priority=NORMAL:-VERS-ALL:+VERS-SSL3.0
 
​​";"7.connection failed
   error: authentication failed: TLS handshake failed A record packet with illegal version was received.
   error: failed to connect to the hypervisor";;RedHatEnterpriseLinux7/RHEL7-79998
1918;;;;;;;;;6;"8.Override TLS priority in URI to use other tls protocol other than ssl3.0:
 #  virsh -c qemu+tls://hostB/system?tls_priority=NORMAL:-VERS-ALL:+VERS-TLS1.0
 
​​";"8.connection succeeded
  Welcome to virsh, the virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virsh # quit
​​";;RedHatEnterpriseLinux7/RHEL7-79998
1918;;;;;;;;;7;"7.Override TLS priority in URI with wrong value:
  #virsh -c qemu+tls://hostB/system?tls_priority=NORMAL:-VERS-TLS1.3";"9. #virsh -c qemu+tls://hostB/system?tls_priority=NORMAL:-VERS-TLS1.3
 error: failed to connect to the hypervisor
 error: Failed to set TLS session priority to NORMAL:-VERS-TLS1.3: The request is invalid.";;RedHatEnterpriseLinux7/RHEL7-79998
1919;RHEL7-80158;[Hyper-V][Network]IPv4 TCP checksum offload check;[Hyper-V][Network]IPv4 TCP checksum offload check;Yaju Cao (yacao);High;Positive;Not Automated;;1;"1. In guest1 on host1, make sure there is PV network adapter (Normal packet). Make sure checksum offload is on.
 # ethtool -k eth0|grep checksum";"rx-checksumming: on
 tx-checksumming: on";Test Case;RedHatEnterpriseLinux7/RHEL7-80158
1919;;;;;;;;;2;"2. In guest2 on host2, Make sure checksum offload is on. Yum install nmap-ncat(RHEL7)/ nc(RHEL6) and start nc listening
 # ethtool -k eth0|grep checksum
 # yum install nmap-ncat /nc
 # nc -l 2233 > data2";"rx-checksumming: on
 tx-checksumming: on

 nc could start listening on guest2";;RedHatEnterpriseLinux7/RHEL7-80158
1919;;;;;;;;;3;"3. In guest1, yum install nmap-ncat, dd a 500MB size file named 'data1', and try to send the file to guest2 using 'nc'
    # nc ${IPv4 adress of guest2} 2233 < data1
";​​;;RedHatEnterpriseLinux7/RHEL7-80158
1919;;;;;;;;;4;4. After step 3 complete, compare md5sum of data1 and data2;The md5sum of data1 and data2 should be same;;RedHatEnterpriseLinux7/RHEL7-80158
1919;;;;;;;;;5;"5. In guest1 on host1, set the nic to generate packet with error, e.g.
  # tc qdisc add dev eth0 root netem corrupt 1%";​​;;RedHatEnterpriseLinux7/RHEL7-80158
1919;;;;;;;;;6;6. Repeat Step 2 to Step 4 again;The md5sum of data1 and data2 should be same;;RedHatEnterpriseLinux7/RHEL7-80158
1920;RHEL7-80159;[Hyper-V][Network]IPv4 UDP checksum offload check;[Hyper-V][Network]IPv4 UDP checksum offload check;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;"1. In guest1 on host1, make sure there is PV network adapter (Normal packet). Make sure checksum offload is on.
 # ethtool -k eth0|grep checksum";"guest1 checksum is on:
 rx-checksumming: on
 tx-checksumming: on";Test Case;RedHatEnterpriseLinux7/RHEL7-80159
1920;;;;;;;;;2;"2. In guest2 on a different host2, make sure checksum offload is on. Yum install nmap-ncat(RHEL7)/ nc(RHEL6) and start nc listening, and start tcpdump in another terminal.
 # ethtool -k eth0|grep checksum
 # yum install nmap-ncat /nc
 # nc -ul 2233
 # tcpdump -vvv -p -n -i eth0  host ${IPv4 address of guest1} and udp";"guest2 checksum is on:
 rx-checksumming: on
 tx-checksumming: on

 nc and tcpdump is running in guest 2";;RedHatEnterpriseLinux7/RHEL7-80159
1920;;;;;;;;;3;"3. In guest1, yum install nmap-ncat, then run
    # nc -u ${IPv4 adress of guest2} 2233 
";​​;;RedHatEnterpriseLinux7/RHEL7-80159
1920;;;;;;;;;4;4. In guest1, type content in the nc console run by Step3. Check guest2 nc console output and tcpdump output ;"The nc output of guest2 is the same as typed in guest1. 
 Most of tcpdump captured packets should be 'udp sum ok' (not all packet shown as 'bad udp cksum' )";;RedHatEnterpriseLinux7/RHEL7-80159
1921;RHEL7-80160;[Hyper-V][Network]IPv6 TCP checksum offload check;[Hyper-V][Network]IPv6 TCP checksum offload check;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;"1. In guest1 on host1, make sure there is PV network adapter (Normal packet). Make sure checksum offload is on. 
 # ethtool -k eth0|grep checksum";"rx-checksumming: on
 tx-checksumming: on";Test Case;RedHatEnterpriseLinux7/RHEL7-80160
1921;;;;;;;;;2;"2. In guest2 on host2, Make sure checksum offload is on. Yum install nmap-ncat(RHEL7)/ nc(RHEL6) and start nc listening
 # ethtool -k eth0|grep checksum
 # yum install nmap-ncat /nc
 # nc -l 2233 > data2
​​";"rx-checksumming: on
 tx-checksumming: on
 
 nc could start listening on guest2";;RedHatEnterpriseLinux7/RHEL7-80160
1921;;;;;;;;;3;"3. In guest1, yum install nmap-ncat, dd a 500MB size file named 'data1', and try to send the file to guest2 using 'nc'
    # nc ${IPv6 adress of guest2} 2233 < data1";​​;;RedHatEnterpriseLinux7/RHEL7-80160
1921;;;;;;;;;4;4. After step 3 complete, compare md5sum of data1 and data2;The md5sum of data1 and data2 should be same;;RedHatEnterpriseLinux7/RHEL7-80160
1921;;;;;;;;;5;"5. In guest1 on host1, set the nic to generate packet with error, e.g.
  # tc qdisc add dev eth0 root netem corrupt 1%";​​;;RedHatEnterpriseLinux7/RHEL7-80160
1921;;;;;;;;;6;6. Repeat Step 2 to Step 4 again;The md5sum of data1 and data2 should be same;;RedHatEnterpriseLinux7/RHEL7-80160
1922;RHEL7-80161;[Hyper-V][Network]IPv6 UDP checksum offload check;[Hyper-V][Network]IPv6 UDP checksum offload check;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;"1. In guest1 on host1, make sure there is PV network adapter (Normal packet). Make sure checksum offload is on.
 # ethtool -k eth0|grep checksum";"guest1 checksum is on:
 rx-checksumming: on
 tx-checksumming: on";Test Case;RedHatEnterpriseLinux7/RHEL7-80161
1922;;;;;;;;;2;"2. In guest2 on a different host2, make sure checksum offload is on. Yum install nmap-ncat(RHEL7)/ nc(RHEL6) and start nc listening, and start tcpdump in another terminal.
 # ethtool -k eth0|grep checksum
 # yum install nmap-ncat /nc
 # nc -ul 2233
 # tcpdump -vvv -p -n -i eth0  host ${IPv6 address of guest1} and udp";"guest2 checksum is on:
 rx-checksumming: on
 tx-checksumming: on

 nc and tcpdump is running in guest 2";;RedHatEnterpriseLinux7/RHEL7-80161
1922;;;;;;;;;3;"3. In guest1, yum install nmap-ncat, then run
    # nc -u ${IPv6 adress of guest2} 2233 
";​​;;RedHatEnterpriseLinux7/RHEL7-80161
1922;;;;;;;;;4;4. In guest1, type content in the nc console run by Step3. Check guest2 nc console output and tcpdump output ;"The nc output of guest2 is the same as typed in guest1. 
 Most of tcpdump captured packets should be 'udp sum ok' (not all packet shown as 'bad udp cksum' )";;RedHatEnterpriseLinux7/RHEL7-80161
1923;RHEL7-80204;[hid]Check keyboard input in Emergency Mode of the Guest;[hid]Check Keyboard input in Emergency Mode of the Guest;Yaju Cao (yacao);High;Positive;Manual Only;468837;1;1. Install a target RHEL as the Guest in a VM;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-80204
1923;;;;;;;;;2;"2. Enter the Emergency Mode of the Guest
 
 PS:
 For RHEL6: 
 a. Boot the Guest into GRUB UI, select the target kernel, input ""a"" to append the line
 b. Go to the end of the line, input ""emergency"", press ""Enter"" to exit edit-mode
 
 For RHEL7 / RHEL8:
 a. Boot the Guest into GRUB UI, select the target kernel, input ""e"" into edit-mode
 b. Add ""systemd.unit=emergency.target"" to the end of the `linux` line on 64-Bit IBM Power Series, the `linux16` line on x86-64 BIOS systems, the `linuxefi` line on UEFI systems.
 c. Press Ctrl+x to boot the Guest";1. The Guest enters the Emergency Mode well without any error, and keyboard works well;;RedHatEnterpriseLinux7/RHEL7-80204
1923;;;;;;;;;3;3. After the Guest booting, check keyboard basic functions;1. The Guest boots well without any error, and keyboard works well;;RedHatEnterpriseLinux7/RHEL7-80204
1924;RHEL7-80229;"[hid]Verify the keyboard independence of ""Num Lock"" and ""Caps Lock""(BZ1179132)";"[hid]Verify the keyboard independence of ""Num Lock"" and ""Caps Lock""(BZ1179132)";Yaju Cao (yacao);High;Positive;Manual Only;;1;1. Install a target RHEL as the Guest in a VM;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-80229
1924;;;;;;;;;2;"2. Enable keyboard ""Num Lock""
";"
​​";;RedHatEnterpriseLinux7/RHEL7-80229
1924;;;;;;;;;3;"3. Boot the Guest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-80229
1924;;;;;;;;;4;"4. Press the number keys
​​";​​;;RedHatEnterpriseLinux7/RHEL7-80229
1924;;;;;;;;;5;"5. Switch to another Guest console
​​";​​;;RedHatEnterpriseLinux7/RHEL7-80229
1924;;;;;;;;;6;"6. Disable keyboard ""Num Lock""";​​;;RedHatEnterpriseLinux7/RHEL7-80229
1924;;;;;;;;;7;7. Switch back to original Guest and enter the number;1. The keyboard light is kept on and number keys work;;RedHatEnterpriseLinux7/RHEL7-80229
1925;RHEL7-80295;sdfsdf;;Yan Fu (yafu);High;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-80295
1926;RHEL7-80297;Change host uuid;"Change host uuid
";Yan Fu (yafu);Medium;Positive;Not Automated;;1;" 1.Set host_uuid to a right value:
 $vim  $XDG_CONFIG_HOME/libvirtd.conf
 host_uuid = ""881f2d22-7821-4dd7-b0d8-7d7af5470375""
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-80297
1926;;;;;;;;;2;"2.Start libvirtd:
 $libvirtd --verbose
​​";"2.libvirtd start correctly.
​​";;RedHatEnterpriseLinux7/RHEL7-80297
1926;;;;;;;;;3;"3.Check the host_uuid value:
 $virsh capabilities
​​";"<capabilities>
   <host>
     <uuid>881f2d22-7821-4dd7-b0d8-7d7af5470375</uuid>
     <cpu>
 ....
​​";;RedHatEnterpriseLinux7/RHEL7-80297
1926;;;;;;;;;4;"3.Set host_uuid to a invalid value:
 $vim $XDG_CONFIG_HOME/libvirtd.conf
 host_uuid=""881f2d22-7821-4dd7-b0d8-7d7 ""
​​";"3.$ libvirtd --verbose
 2016-11-25 08:04:19.317+0000: 5774: info : libvirt version: 2.0.0, package: 10.el7_3.2 (Red Hat, Inc. <http://bugzilla.redhat.com/bugzilla>, 2016-11-10-04:43:57, x86-034.build.eng.bos.redhat.com)
 2016-11-25 08:04:19.317+0000: 5774: info : hostname: yafu-laptop
 2016-11-25 08:04:19.317+0000: 5774: error : daemonSetupHostUUID:1108 : invalid host UUID: 881f2d22-7821-4dd7-b0d8-7d7
 2016-11-25 08:04:19.324+0000: 5774: error : main:1331 : Can't setup host uuid
 
​​";;RedHatEnterpriseLinux7/RHEL7-80297
1927;RHEL7-80298;set tls_priority to disable ssl3.0;;Yan Fu (yafu);Medium;Positive;Not Automated;;1;"  Scenerio1 Test the tls_priority config in the libvirt.conf:
 0.Prepare the tls env between hostA and hostB;
 1.Set tls_priority to disable SSL3.0 in libvirtd.conf and restart libvirtd service:
   tls_priority=""NORMAL:!VERS-SSL3.0""";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-80298
1927;;;;;;;;;2;"2.$ virsh -c qemu+tls://yafu@yafu-laptop:16524/session?tls_priority=NORMAL:-VERS-ALL:+VERS-SSL3.0
 error: failed to connect to the hypervisor
 error: authentication failed: TLS handshake failed A packet with illegal or unsupported version was received.
​​";​​;;RedHatEnterpriseLinux7/RHEL7-80298
1927;;;;;;;;;3;"3.Override TLS priority in URI to use other tls protocol other than ssl3.0:
 $ virsh -c qemu+tls://yafu@yafu-laptop:16524/session?tls_priority=NORMAL:-VERS-ALL:+VERS-TLS1.0
 Welcome to virsh, the virtualization interactive terminal.

 Type:  'help' for help with commands
        'quit' to quit

 virsh #";​​;;RedHatEnterpriseLinux7/RHEL7-80298
1927;;;;;;;;;4;"4.Override TLS priority in URI with wrong value:
 $ virsh -c qemu+tls://yafu@yafu-laptop:16524/session?tls_priority=NORMAL:-VERS-ALL:+VERS-SSL4.0
 error: failed to connect to the hypervisor
 error: Failed to set TLS session priority to NORMAL:-VERS-ALL:+VERS-SSL4.0: The request is invalid.";​​;;RedHatEnterpriseLinux7/RHEL7-80298
1928;RHEL7-80299;max_clients;;Yan Fu (yafu);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-80299
1929;RHEL7-80300;max_workders;;Yan Fu (yafu);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-80300
1930;RHEL7-80301;max_request;;Yan Fu (yafu);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-80301
1931;RHEL7-80302;fsdf;;Yan Fu (yafu);High;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-80302
1932;RHEL7-80305;[--daemon]Run as a daemon & write PID file;"Run as a daemon & write PID file
";Yan Fu (yafu);High;Positive;Not Automated;;1;" 1.Start the libvirtd as daemon:
 $libvirtd -d
​​";" 1.libvirtd start correctly:
 $ps aux | grep -i libvirtd
 yafu     16431  0.0  0.1 1925996 16004 ?       Sl   11:29   0:00 libvirtd -d
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-80305
1932;;;;;;;;;2;"2.Check the socket file:
 $ll $XDG_RUNTIME_DIR/libvirt/libvirt-sock
​​";"2.$ ll /run/user/1000/libvirt/libvirt-sock 
 srwxrwx---. 1 yafu yafu 0 Nov 17 11:29 /run/user/1000/libvirt/libvirt-sock
 
​​";;RedHatEnterpriseLinux7/RHEL7-80305
1932;;;;;;;;;3;"3.Check the pid file:
 $ll $XDG_RUNTIME_DIR/libvirt/libvirtd.pid
​​";"3.$ ll /run/user/1000/libvirt/libvirtd.pid
 -rw-r--r--. 1 yafu yafu 5 Nov 17 11:29 /run/user/1000/libvirt/libvirtd.pid";;RedHatEnterpriseLinux7/RHEL7-80305
1933;RHEL7-80306;[--help]Display program help;"Display program help
";Yan Fu (yafu);High;Positive;Not Automated;;1;" 1.$libvirtd --hep
 or
    $libvirtd -h
​​";" 1.Display the help message:
 Usage:
   libvirtd [options]
 
 Options:
   -h | --help            Display program help:
   -v | --verbose         Verbose messages.
   -d | --daemon          Run as a daemon & write PID file.
   -l | --listen          Listen for TCP/IP connections.
   -t | --timeout <secs>  Exit after timeout period.
   -f | --config <file>   Configuration file.
   -V | --version         Display version information.
   -p | --pid-file <file> Change name of PID file.
 
 libvirt management daemon:
 
   Default paths:
 
     Configuration file (unless overridden by -f):
       $XDG_CONFIG_HOME/libvirt/libvirtd.conf
 
     Sockets:
       $XDG_RUNTIME_DIR/libvirt/libvirt-sock
 
     TLS:
       CA certificate:     $HOME/.pki/libvirt/cacert.pem
       Server certificate: $HOME/.pki/libvirt/servercert.pem
       Server private key: $HOME/.pki/libvirt/serverkey.pem
 
     PID file:
       $XDG_RUNTIME_DIR/libvirt/libvirtd.pid
 
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-80306
1934;RHEL7-80307;[--listen]Listen for TCP/IP connections;"Listen for TCP/IP connections
";Yan Fu (yafu);High;Positive;Not Automated;;1;" 1.Modify the tls_port and tcp_port to a different value:
 $vim $XDG_CONFIG_HOME/libvirtd.conf
 tcp_port = ""16519""
 listen_tcp=1
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-80307
1934;;;;;;;;;2;"2. Start libvirtd with -l option:
 $libvirtd -l
 2016-11-17 05:34:26.520+0000: 18500: info : libvirt version: 2.0.0, package: 10.el7 (Red Hat, Inc. <http://bugzilla.redhat.com/bugzilla>, 2016-09-21-10:15:26, x86-038.build.eng.bos.redhat.com)
 2016-11-17 05:34:26.520+0000: 18500: info : hostname: yafu-laptop
 2016-11-17 05:34:26.520+0000: 18500: debug : virLogParseOutputs:1191 : outputs=3:syslog:libvirtd 1:file:/home/yafu/.cache/libvirt/libvirtd.log
 2016-11-17 05:34:26.524+0000: 18500: debug : virLogParseOutput:1097 : output=3:syslog:libvirtd
 2016-11-17 05:34:26.554+0000: 18517: debug : virFileClose:102 : Closed fd 3
 2016-11-17 05:34:26.554+0000: 18517: debug : virFileClose:102 : Closed fd 5
 2016-11-17 05:34:26.554+0000: 18517: debug : virFileClose:102 : Closed fd 6
 2016-11-17 05:34:26.554+0000: 18517: debug : virFileClose:102 : Closed fd 7
 2016-11-17 05:34:26.554+0000: 18517: debug : virFileClose:102 : Closed fd 8
 2016-11-17 05:34:26.554+0000: 18517: debug : virFileClose:102 : Closed fd 9
 2016-11-17 05:34:26.554+0000: 18517: debug : virFileClose:102 : Closed fd 10
 2016-11-17 05:34:26.554+0000: 18517: debug : virFileClose:102 : Closed fd 11
 2016-11-17 05:34:26.554+0000: 18517: debug : virFileClose:102 : Closed fd 12
 2016-11-17 05:34:26.554+0000: 18517: debug : virFileClose:102 : Closed fd 13
 ....
​​";"2.libvirtd start correctly:
 $ps aux | grep -i libvirtd
 yafu     18500  0.0  0.1 1925996 18296 pts/2   Sl+  13:34   0:00 libvirtd -l
​​";;RedHatEnterpriseLinux7/RHEL7-80307
1934;;;;;;;;;3;"3.Check the listen port of libvirtd:
 $ netstat -nltp | grep libvirtd
​​";"3.$ netstat -nltp | grep libvirtd
 (Not all processes could be identified, non-owned process info
  will not be shown, you would have to be root to see it all.)
 tcp        0      0 0.0.0.0:16519           0.0.0.0:*               LISTEN      5108/libvirtd       
 tcp6       0      0 :::16519                :::*                    LISTEN      5108/libvirtd  
​​";;RedHatEnterpriseLinux7/RHEL7-80307
1935;RHEL7-80308;[--timeout]Exit after timeout period-bug 1325066;Bug 1325066 - The description of --timeout should be updated in libvirtd manpage;Yan Fu (yafu);High;Positive;Not Automated;;1;" 1.Start libvirtd with --timeout option:
 $libvirtd --timeout 15
​​";" 1.libvirtd process start correctly;
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-80308
1935;;;;;;;;;2;"2.Check the libvirtd process after 15s:
 $sleep 15 && ps aux | grep libvirtd
​​";"2.After 15s，libvirtd process exit：
 $ps aux | grep -i libvirtd
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-80308
1935;;;;;;;;;3;"3.--timeout does not work when connection exists or running guests:
 (1)Connect to libvirtd:
 $virsh
 Welcome to virsh, the virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virsh #
 
 $Check the libvirtd process after 30s
 
 (2)Start a guest
 $virsh start vm1
 $Check the libvirtd process after 30s
​​";"3.libvirtd process exists after 30s if there is connection or running guest.
 
 
 PS:
 The man page about --timeout is wrong before the bug below fix:
 Bug 1325066 - The description of --timeout should be updated in libvirtd manpage
​​";;RedHatEnterpriseLinux7/RHEL7-80308
1936;RHEL7-80309;[--config]Configuration file;"Config file
";Yan Fu (yafu);High;Positive;Not Automated;;1;" 1.Mv config file:
 $mv ~/.config/libvirt/libvirtd.conf ~/.config/libvirt/libvirtd.conf.bak
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-80309
1936;;;;;;;;;2;"2.Change the log setting:
 $vim ~/.config/libvirt/libvirtd.conf.bak
 log_level=1
 log_outputs=""3:syslog:libvirtd 1:file:/tmp/libvirtd.log""
 
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-80309
1936;;;;;;;;;3;"3.Start libvirtd:
 $libvirtd -f ~/.config/libvirt/libvirtd.conf.bak
​​";"3.libvirtd process start correctly.
 
​​";;RedHatEnterpriseLinux7/RHEL7-80309
1936;;;;;;;;;4;"4.Check the log file:
 $cat /tmp/libvirtd.log
​​";"4.Can see the libvirtd log in /tmp/libvirtd.log.
​​";;RedHatEnterpriseLinux7/RHEL7-80309
1937;RHEL7-80310;[--version]Display version information;"[--version]Display version information
";Yan Fu (yafu);High;Positive;Not Automated;;1;" 1.$ libvirtd -V
​​";" 1.Print the libvirtd version:
 libvirtd (libvirt) 2.0.0
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-80310
1937;;;;;;;;;2;"2.$ libvirtd --version
​​";"2.Print the libvirtd version
 libvirtd (libvirt) 2.0.0
​​";;RedHatEnterpriseLinux7/RHEL7-80310
1938;RHEL7-80311;[--pid-file]Change name of PID file;"Change name of PID file
";Yan Fu (yafu);High;Positive;Not Automated;;1;" 1.$ libvirtd -p ~/libvirtd.pid2
​​";" 1.libvirtd pid file exists as ~/libvirtd.pid2
 $ ll ~/libvirtd.pid2 
 -rw-r--r--. 1 yafu yafu 5 Nov 17 16:46 /home/yafu/libvirtd.pid2
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-80311
1939;RHEL7-80312;;"






";Yan Fu (yafu);High;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-80312
1940;RHEL7-80314;Connect seesion mode by ssh;"Connect session mode by ssh
";Yan Fu (yafu);High;Positive;Not Automated;;1;" 1.Check the socket file's path:
 $ echo $XDG_RUNTIME_DIR
 $ll $XDG_RUNTIME_DIR/libvirt/libvirt-sock
​​";" 1.ll $XDG_RUNTIME_DIR/libvirt/libvirt-sock
 srwx------. 1 yafu yafu 0 Nov 17 16:46 /run/user/1000/libvirt/libvirt-sock";Test Case;RedHatEnterpriseLinux7/RHEL7-80314
1940;;;;;;;;;2;"2.Connect the user's session mode with ssh:
 #virsh -c qemu+ssh://IP/session?socket=/run/user/1000/libvirt/libvirt-sock
​​";"2.# virsh -c qemu+ssh://localhost/session?socket=/run/user/1000/libvirt/libvirt-sock
 The authenticity of host 'localhost (::1%1)' can't be established.
 ECDSA key fingerprint is 3a:2b:89:1a:b2:c0:10:a4:2b:03:82:a7:93:d8:67:9d.
 Are you sure you want to continue connecting (yes/no)? yes
 Welcome to virsh, the virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virsh # 
 
​​";;RedHatEnterpriseLinux7/RHEL7-80314
1941;RHEL7-80315;connect session mode by tcp;"Connect session mode by tcp
";Yan Fu (yafu);High;Positive;Not Automated;;1;" 1.Modify the tls_port and tcp_port to a different value:
 $vim $XDG_CONFIG_HOME/libvirtd.conf
 tcp_port = ""16519""
 listen_tcp = 1
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-80315
1941;;;;;;;;;2;"2.Start libvirtd with -l option:
 $libvirtd -l
 2016-11-17 05:34:26.520+0000: 18500: info : libvirt version: 2.0.0, package: 10.el7 (Red Hat, Inc. <http://bugzilla.redhat.com/bugzilla>, 2016-09-21-10:15:26, x86-038.build.eng.bos.redhat.com)
 2016-11-17 05:34:26.520+0000: 18500: info : hostname: yafu-laptop
 2016-11-17 05:34:26.520+0000: 18500: debug : virLogParseOutputs:1191 : outputs=3:syslog:libvirtd 1:file:/home/yafu/.cache/libvirt/libvirtd.log
 2016-11-17 05:34:26.524+0000: 18500: debug : virLogParseOutput:1097 : output=3:syslog:libvirtd";"
​​";;RedHatEnterpriseLinux7/RHEL7-80315
1941;;;;;;;;;3;"3.Connect libvirtd with tcp:
 $virsh -c qemu+tcp://yafu@localhost:16519/session
​​";"3.$ virsh -c qemu+tcp://yafu@localhost:16519/session
 Welcome to virsh, the virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virsh # 
 
​​";;RedHatEnterpriseLinux7/RHEL7-80315
1942;RHEL7-80316;connect session mode by tls;"

Auto-launched libvirtd";Yan Fu (yafu);Critical;Positive;Not Automated;;1;" **On server (server.nay.redhat.com)**
 1. Set up a Certificate Authority (CA)
 1.1 $ certtool --generate-privkey > cakey.pem
 1.2 self-sign cakey.pem by creating a file with the signature details called
 ca.info containing:
 cn = yafu-laptop
 ca
 cert_signing_key
 1.3 $ certtool --generate-self-signed --load-privkey cakey.pem --template
 ca.info --outfile cacert.pem
 2. Create server certificates
 2.1 $certtool --generate-privkey > serverkey.pem
 2.2 sign that key with the CA's private key by first creating a template file
 called server.info
 organization = Red Hat
 cn = yafu-laptop
 tls_www_server
 encryption_key
 signing_key
 2.3 create pki dir:
 $mkdir -p $HOME/.pki/libvirt
 2.4 $ certtool --generate-certificate --load-privkey serverkey.pem --load-ca-
 certificate cacert.pem \
 \--load-ca-privkey cakey.pem --template server.info --outfile servercert.pem
 3. Copy CA key and server key to correct directory
 3.1 $ cp cakey.pem cacert.pem $HOME/.pki/libvirt
 3.2 $ mkdir -p $HOME/.pki/libvirt
 3.3 $ cp serverkey.pem $HOME/.pki/libvirt
 3.4 $ cp servercert.pem $HOME/.pki/libvirt
 4. Copy CA key to client(client.nay.redhat.com) into correct directory
 4.1 Create .pki dir in the client host:
 $mkdir -p /home/user1/.pki/libvirt
 4.2 copy cakey.pem cacert.pem from server to client host:
 $ scp cakey.pem cacert.pem user1@client.nay.redhat.com:/home/user1/.pki/libvirt
 5. Edit $HOME/.config/libvirtd.conf
 listen_tls = 1
 listen_tcp =1
 tcp_port = 16519
 tls_port = 16524
 7. $libvirtd -l
 8. # service iptables stop
 **On client (client.nay.redhat.com)**
 9. Create client certificates
 9.1 $ certtool --generate-privkey > clientkey.pem
 9.2 Act as CA and sign the certificate. Create client.info containing:
 country = GB
 state = London
 locality = London
 organization = Red Hat
 cn = client.nay.redhat.com
 tls_www_client
 encryption_key
 signing_key
 9.3 $ certtool --generate-certificate \--load-privkey clientkey.pem --load-
 ca-certificate $HOME/.pki/libvirt/cacert.pem \
 \--load-ca-privkey $HOME/.pki/libvirt/cakey.pem --template client.info --outfile
 clientcert.pem
 10. Copy client key to correct directory
 10.1 $ cp clientkey.pem $HOME/.pki/libvirt
 10.2 $ cp clientcert.pem $HOME/.pki/libvirt
 11. Conect to server hypervisor
 $virsh -c qemu+tls://server.nay.redhat.com:16524/session";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-80316
1943;RHEL7-80318;multiple libvirtd running in the system;;Yan Fu (yafu);Medium;Positive;Not Automated;;1;" 1.start libvirtd process with different non-root user:
 [test0@yafu-laptop ~]$libvirtd
  [test1@yafu-laptop ~]$libvirtd
 [test2@yafu-laptop ~]$libvirtd
​​";" 1.$ps aux | grep -i libvirtd
 # ps aux | grep -i libvirtd
 test2    16785  0.0  0.1 1158980 17452 ?       Sl   18:29   0:00 /usr/sbin/libvirtd 
 test1    16915  0.0  0.1 1027908 17552 ?       Sl   18:29   0:00 /usr/sbin/libvirtd 
 test0    17208  2.3  0.1 1093308 17084 ?       Sl   18:35   0:00 /usr/sbin/libvirtd 
 
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-80318
1943;;;;;;;;;2;"2.Kill the libvirtd process with another user:
 [test0@yafu-laptop ~]$kill -9 16915
 
​​";"2.libvirtd(16915): Operation not permitted
 
​​";;RedHatEnterpriseLinux7/RHEL7-80318
1944;RHEL7-80319;default setting of the auto-lanched libvirtd process;"when there is a connection to session mode, it will auto-lanch libvirtd process with non-root user.
";Yan Fu (yafu);Medium;Positive;Not Automated;;1;" 1.$virsh list
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-80319
1944;;;;;;;;;2;"2.Check the auo-launched libvirtd process:
   $ps aux | grep -i libvirtd
   
​​";"2.There is a auto-lanched libvirtd process with --timeout option:
 yafu      4951  0.1  0.1 1730140 21200 ?       Sl   13:14   0:00 /usr/sbin/libvirtd --timeout=30 
​​";;RedHatEnterpriseLinux7/RHEL7-80319
1945;RHEL7-80342;set $XDG_CONFIG_HOME env;"Set $XDG_CONFIG_HOME env
";Yan Fu (yafu);Medium;Positive;Not Automated;;1;" 1.Set XDG_CONFIG_HOME_ENV to other value:
 $export XDG_CONFIG_HOME_ENV $HOME
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-80342
1945;;;;;;;;;2;"2.Cp the libvirtd.conf to $HOME and modify the log_level:
 $vim $HOME/libvirtd.conf
 log_level=3
​​";​​;;RedHatEnterpriseLinux7/RHEL7-80342
1945;;;;;;;;;3;"3.Start libvirtd with ""--verbose"":
 $libvirtd --verbose
​​";"3.libvirtd process started and show the verbose log message:
 ...
 2018-01-11 06:43:02.724+0000: 20102: info : virObjectUnref:350 : OBJECT_UNREF: obj=0x55899d927420
 2018-01-11 06:43:02.724+0000: 20102: info : virObjectUnref:352 : OBJECT_DISPOSE: obj=0x55899d927420
 2018-01-11 06:43:02.724+0000: 20102: info : virObjectUnref:350 : OBJECT_UNREF: obj=0x55899d9263f0
 2018-01-11 06:43:02.724+0000: 20102: info : virObjectUnref:352 : OBJECT_DISPOSE: obj=0x55899d9263f0
 2018-01-11 06:43:02.724+0000: 20102: info : virObjectUnref:350 : OBJECT_UNREF: obj=0x55899d927450
 2018-01-11 06:43:02.724+0000: 20102: info : virObjectUnref:352 : OBJECT_DISPOSE: obj=0x55899d927450
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-80342
1946;RHEL7-80343;set $XDG_RUNTIME_DIR env;"set $XDG_RUNTIME_DIR env
";Yan Fu (yafu);Medium;Positive;Not Automated;;1;" 1.Check the default value of XDG_RUNTIME_VALUE：
 $echo $XDG_RUNTIME_DIR
​​";" $ echo $XDG_RUNTIME_DIR
 /run/user/1000
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-80343
1946;;;;;;;;;2;"2.Start libvirtd:
 $libvirtd --verbose
​​";​​;;RedHatEnterpriseLinux7/RHEL7-80343
1946;;;;;;;;;3;"3.Check the pid file and sock-file:
 [yafu@yafu-laptop ~]$ ll /run/user/1000/libvirt/libvirtd.pid 
 [yafu@yafu-laptop ~]$ ll /run/user/1000/libvirt/libvirt-sock 
 
 
 
​​";"2.[yafu@yafu-laptop ~]$ ll /run/user/1000/libvirt/libvirtd.pid 
 -rw-r--r--. 1 yafu yafu 4 Nov 25 16:20 /run/user/1000/libvirt/libvirtd.pid
 [yafu@yafu-laptop ~]$ ll /run/user/1000/libvirt/libvirt-sock 
 srwxrwx---. 1 yafu yafu 0 Nov 25 16:20 /run/user/1000/libvirt/libvirt-sock
​​";;RedHatEnterpriseLinux7/RHEL7-80343
1946;;;;;;;;;4;"4.Set XDG_RUNTIME_DIR to other value
 $export XDG_RUNTIME_VALUE=$HOME/.cache";​​;;RedHatEnterpriseLinux7/RHEL7-80343
1946;;;;;;;;;5;"5.Start libvirtd:
 $libvirtd --verbose
​​";​​;;RedHatEnterpriseLinux7/RHEL7-80343
1946;;;;;;;;;6;"6.Check the pid file and sock-file
 $ ll $XDG_RUNTIME_DIR/libvirt/libvirtd.pid
 $ ll $XDG_RUNTIME_DIR/libvirt/libvirt-sock
 
​​";"$ ll $XDG_RUNTIME_DIR/libvirt/libvirtd.pid
 -rw-r--r--. 1 yafu yafu 4 Nov 25 16:20 /run/user/1000/libvirt/libvirtd.pid
 $ ll $XDG_RUNTIME_DIR/libvirt/libvirt-sock
 srwxrwx---. 1 yafu yafu 0 Nov 25 16:20 /run/user/1000/libvirt/libvirt-sock";;RedHatEnterpriseLinux7/RHEL7-80343
1947;RHEL7-80367;define/start a guest;;Yan Fu (yafu);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-80367
1948;RHEL7-80375;[--verbose]Verbose message;"Verbose messages
";Yan Fu (yafu);High;Positive;Not Automated;;1;" 1.$libvirtd --verbose
 or 
    $libvirtd -v
​​";" 1.Output verbose message(info and debug log):
 $ libvirtd -v
 2016-11-18 09:19:26.790+0000: 7224: info : libvirt version: 2.0.0, package: 10.el7 (Red Hat, Inc. <http://bugzilla.redhat.com/bugzilla>, 2016-09-21-10:15:26, x86-038.build.eng.bos.redhat.com)
 2016-11-18 09:19:26.790+0000: 7224: info : hostname: yafu-laptop
 2016-11-18 09:19:26.790+0000: 7224: debug : virLogParseOutputs:1191 : outputs=3:syslog:libvirtd 1:file:/tmp/libvirtd.log
 2016-11-18 09:19:26.793+0000: 7224: debug : virLogParseOutput:1097 : output=3:syslog:libvirtd
 2016-11-18 09:19:26.838+0000: 7241: debug : virFileClose:102 : Closed fd 3
 2016-11-18 09:19:26.838+0000: 7241: debug : virFileClose:102 : Closed fd 5
 2016-11-18 09:19:26.838+0000: 7241: debug : virFileClose:102 : Closed fd 6
 2016-11-18 09:19:26.838+0000: 7241: debug : virFileClose:102 : Closed fd 7
 2016-11-18 09:19:26.838+0000: 7241: debug : virFileClose:102 : Closed fd 8
 2016-11-18 09:19:26.838+0000: 7241: debug : virFileClose:102 : Closed fd 9
 2016-11-18 09:19:26.838+0000: 7241: debug : virFileClose:102 : Closed fd 10
 2016-11-18 09:19:26.838+0000: 7241: debug : virFileClose:102 : Closed fd 11
 2016-11-18 09:19:26.838+0000: 7241: debug : virFileClose:102 : Closed fd 12
 2016-11-18 09:19:26.838+0000: 7241: debug : virFileClose:102 : Closed fd 14
 2016-11-18 09:19:26.838+0000: 7241: debug : virFileClose:102 : Closed fd 16
 2016-11-18 09:19:26.842+0000: 7242: debug : virFileClose:102 : Closed fd 3
 2016-11-18 09:19:26.842+0000: 7242: debug : virFileClose:102 : Closed fd 5
 2016-11-18 09:19:26.842+0000: 7242: debug : virFileClose:102 : Closed fd 6
 2016-11-18 09:19:26.842+0000: 7242: debug : virFileClose:102 : Closed fd 7
 2016-11-18 09:19:26.842+0000: 7242: debug : virFileClose:102 : Closed fd 8
 2016-11-18 09:19:26.842+0000: 7242: debug : virFileClose:102 : Closed fd 9
 2016-11-18 09:19:26.842+0000: 7242: debug : virFileClose:102 : Closed fd 10
 2016-11-18 09:19:26.842+0000: 7242: debug : virFileClose:102 : Closed fd 11
 2016-11-18 09:19:26.842+0000: 7242: debug : virFileClose:102 : Closed fd 12
 2016-11-18 09:19:26.842+0000: 7242: debug : virFileClose:102 : Closed fd 13
 2016-11-18 09:19:26.842+0000: 7242: debug : virFileClose:102 : Closed fd 15
 2016-11-18 09:19:26.842+0000: 7242: debug : virFileClose:102 : Closed fd 17
 2016-11-18 09:19:26.842+0000: 7242: debug : virFileClose:102 : Closed fd 18
 ...
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-80375
1949;RHEL7-81503;[WHQL][viostor][HLK]DF - PNP Surprise Remove Device Test (Reliability);DF - PNP Surprise Remove Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81503
1950;RHEL7-81504;[WHQL][viostor][HLK]DF - PNP Rebalance Fail Restart Device Test (Reliability);DF - PNP Rebalance Fail Restart Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81504
1951;RHEL7-81505;[WHQL][viostor][HLK]DF - PCI Root Port Surprise Remove Test (PCI devices only) (Reliability);DF - PCI Root Port Surprise Remove Test (PCI devices only) (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81505
1952;RHEL7-81506;[WHQL][viostor][HLK]HyperVisor Code Integrity Readiness Test;HyperVisor Code Integrity Readiness Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81506
1953;RHEL7-81507;[WHQL][viostor][HLK]DF - PNP Remove Device Test (Reliability);DF - PNP Remove Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81507
1954;RHEL7-81508;[WHQL][viostor][HLK]Operate In Server Core Test;Operate In Server Core Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81508
1955;RHEL7-81509;[WHQL][viostor][HLK]DF - PNP Cancel Remove Device Test (Reliability);DF - PNP Cancel Remove Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81509
1956;RHEL7-81510;[WHQL][viostor][HLK]Storage Imports Test (LOGO);Storage Imports Test (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81510
1957;RHEL7-81511;[WHQL][viostor][HLK]Disk Verification (LOGO);Disk Verification (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81511
1958;RHEL7-81512;[WHQL][viostor][HLK]DF - Sleep and PNP (disable and enable) with IO Before and After (Reliability);DF - Sleep and PNP (disable and enable) with IO Before and After (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81512
1959;RHEL7-81513;[WHQL][viostor][HLK]DF - PNP Stop (Rebalance) Device Test (Reliability);DF - PNP Stop (Rebalance) Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81513
1960;RHEL7-81514;[WHQL][viostor][HLK]DF - Embedded Signature Verification Test (Tuning and Validation);DF - Embedded Signature Verification Test (Tuning and Validation);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81514
1961;RHEL7-81515;[WHQL][viostor][HLK]DF - InfVerif INF Verification;DF - InfVerif INF Verification;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81515
1962;RHEL7-81516;[WHQL][viostor][HLK]DF - PNP Cancel Stop Device Test (Reliability);DF - PNP Cancel Stop Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81516
1963;RHEL7-81517;[WHQL][viostor][HLK]DF - Sleep with IO During (Reliability);DF - Sleep with IO During (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81517
1964;RHEL7-81518;[WHQL][viostor][HLK]Flush Test;Flush Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81518
1965;RHEL7-81519;[WHQL][viostor][HLK]Storage Query Property (LOGO);Storage Query Property (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81519
1966;RHEL7-81520;[WHQL][viostor][HLK]DF - PNP DIF Remove Device Test (Reliability);DF - PNP DIF Remove Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81520
1967;RHEL7-81521;[WHQL][viostor][HLK]DF - PNP Rebalance Request New Resources Device Test (Reliability);DF - PNP Rebalance Request New Resources Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81521
1968;RHEL7-81522;[WHQL][viostor][HLK]DF - Reinstall with IO Before and After (Reliability);DF - Reinstall with IO Before and After (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81522
1969;RHEL7-81523;[WHQL][viostor][HLK]Static Tools Logo Test;Static Tools Logo Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81523
1970;RHEL7-81524;[WHQL][viostor][HLK]Disk Stress (LOGO);Disk Stress (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81524
1971;RHEL7-81525;[WHQL][viostor][HLK]DF - PNP Disable And Enable Device Test (Reliability);"DF - PNP Disable And Enable Device Test (Reliability)
";Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81525
1972;RHEL7-81526;[WHQL][viostor][HCK]DP WLK - Hot-Replace - Device Test - Verify driver support for D3 power state;DP WLK - Hot-Replace - Device Test - Verify driver support for D3 power state;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81526
1973;RHEL7-81527;[WHQL][viostor][HCK]DF - Fuzz zero length buffer FSCTL test (Certification);DF - Fuzz zero length buffer FSCTL test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81527
1974;RHEL7-81528;[WHQL][viostor][HCK]Storage Query Property (LOGO);Storage Query Property (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81528
1975;RHEL7-81529;[WHQL][viostor][HCK]DF - Fuzz random IOCTL test (Certification);DF - Fuzz random IOCTL test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81529
1976;RHEL7-81530;[WHQL][viostor][HCK]DP WLK - Hot-Add - Device Test - Verify driver support for Hot-Add CPU;DP WLK - Hot-Add - Device Test - Verify driver support for Hot-Add CPU;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81530
1977;RHEL7-81531;[WHQL][viostor][HCK]Bus Reset Test;Bus Reset Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81531
1978;RHEL7-81532;[WHQL][viostor][HCK]DF - PNP DIF Remove Device Test (Certification);DF - PNP DIF Remove Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81532
1979;RHEL7-81533;[WHQL][viostor][HCK]PCI Hardware Compliance Test For a Single Device (PCIHCT);PCI Hardware Compliance Test For a Single Device (PCIHCT);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81533
1980;RHEL7-81534;[WHQL][viostor][HCK]Flush Test;Flush Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81534
1981;RHEL7-81535;[WHQL][viostor][HCK]DF - Fuzz sub-opens with streams test (Certification);DF - Fuzz sub-opens with streams test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81535
1982;RHEL7-81536;[WHQL][viostor][HCK]DF - Concurrent Hardware And Operating System (CHAOS) Test (Certification);DF - Concurrent Hardware And Operating System (CHAOS) Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81536
1983;RHEL7-81537;[WHQL][viostor][HCK]Wdf - Verify Driver Load Order Group is not WdfLoadGroup;Wdf - Verify Driver Load Order Group is not WdfLoadGroup;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81537
1984;RHEL7-81538;[WHQL][viostor][HCK]DF - PNP Disable And Enable Device Test (Certification);DF - PNP Disable And Enable Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81538
1985;RHEL7-81539;[WHQL][viostor][HCK]DF - Fuzz open and close test (Certification);DF - Fuzz open and close test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81539
1986;RHEL7-81540;[WHQL][viostor][HCK]Storage Imports Test (LOGO);Storage Imports Test (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81540
1987;RHEL7-81541;[WHQL][viostor][HCK]Driver Memory Test;Driver Memory Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81541
1988;RHEL7-81542;[WHQL][viostor][HCK]Multiple processor group device test;Multiple processor group device test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81542
1989;RHEL7-81543;[WHQL][viostor][HCK]Disk Stress (LOGO);Disk Stress (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81543
1990;RHEL7-81544;[WHQL][viostor][HCK]DF - Fuzz sub-opens test (Certification);DF - Fuzz sub-opens test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81544
1991;RHEL7-81545;[WHQL][viostor][HCK]DF - PNP Stop (Rebalance) Device Test (Certification);DF - PNP Stop (Rebalance) Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81545
1992;RHEL7-81546;[WHQL][viostor][HCK]DF - PNP Rebalance Fail Restart Device Test (Certification);DF - PNP Rebalance Fail Restart Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81546
1993;RHEL7-81547;[WHQL][viostor][HCK]DF - PNP Remove Device Test (Certification);DF - PNP Remove Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81547
1994;RHEL7-81548;[WHQL][viostor][HCK]DF - Fuzz Misc API test (Certification);DF - Fuzz Misc API test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81548
1995;RHEL7-81549;[WHQL][viostor][HCK]DF - Fuzz zero length buffer IOCTL test (Certification);DF - Fuzz zero length buffer IOCTL test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81549
1996;RHEL7-81550;[WHQL][viostor][HCK]DF - Fuzz Query and Set File Information Test (Certification);DF - Fuzz Query and Set File Information Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81550
1997;RHEL7-81551;[WHQL][viostor][HCK]Lun Reset Test With Outstanding IO - All Disks;Lun Reset Test With Outstanding IO - All Disks;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81551
1998;RHEL7-81552;[WHQL][viostor][HCK]Operate In Server Core Test;Operate In Server Core Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81552
1999;RHEL7-81553;[WHQL][viostor][HCK]DF - Sleep and PNP (disable and enable) with IO Before and After (Certification);DF - Sleep and PNP (disable and enable) with IO Before and After (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81553
2000;RHEL7-81554;[WHQL][viostor][HCK]DF - PCI Root Port Surprise Remove Test (PCI devices only) (Certification);DF - PCI Root Port Surprise Remove Test (PCI devices only) (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81554
2001;RHEL7-81555;[WHQL][viostor][HCK]DevFund Broker Test;DevFund Broker Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81555
2002;RHEL7-81556;[WHQL][viostor][HCK]Disk Verification (LOGO);Disk Verification (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81556
2003;RHEL7-81557;[WHQL][viostor][HCK]DF - Reinstall with IO Before and After (Certification);DF - Reinstall with IO Before and After (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81557
2004;RHEL7-81558;[WHQL][viostor][HCK]Lun Reset Test Without Outstanding IO - All Disks;Lun Reset Test Without Outstanding IO - All Disks;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81558
2005;RHEL7-81559;[WHQL][viostor][HCK]DF - Embedded Signature Verification Test (Certification);DF - Embedded Signature Verification Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81559
2006;RHEL7-81560;[WHQL][viostor][HCK]Lun Reset Test Without Outstanding IO - Single Disk;Lun Reset Test Without Outstanding IO - Single Disk;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81560
2007;RHEL7-81561;[WHQL][viostor][HCK]DevFund INF Test;DevFund INF Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81561
2008;RHEL7-81562;[WHQL][viostor][HCK]DF - Sleep with IO During (Certification);DF - Sleep with IO During (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81562
2009;RHEL7-81563;[WHQL][viostor][HCK]DF - Fuzz random FSCTL test (Certification);DF - Fuzz random FSCTL test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81563
2010;RHEL7-81564;[WHQL][viostor][HCK]Static Tools Logo Test;Static Tools Logo Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81564
2011;RHEL7-81565;[WHQL][viostor][HCK]DF - Fuzz misc API with zero length query test (Certification);DF - Fuzz misc API with zero length query test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81565
2012;RHEL7-81566;[WHQL][viostor][HCK]DF - PNP Cancel Remove Device Test (Certification);DF - PNP Cancel Remove Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81566
2013;RHEL7-81567;[WHQL][viostor][HCK]DF - PNP Cancel Stop Device Test (Certification);DF - PNP Cancel Stop Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81567
2014;RHEL7-81568;[WHQL][viostor][HCK]Lun Reset Test With Outstanding IO - Single Disk;Lun Reset Test With Outstanding IO - Single Disk;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81568
2015;RHEL7-81569;[WHQL][viostor][HCK]DF - PNP Surprise Remove Device Test (Certification);DF - PNP Surprise Remove Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81569
2016;RHEL7-81570;[WHQL][viostor][HCK]DF - Fuzz Query and Set Security Test (Certification);DF - Fuzz Query and Set Security Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81570
2017;RHEL7-81571;[WHQL][viostor][HCK]TDI filters and LSPs are not allowed;TDI filters and LSPs are not allowed;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81571
2018;RHEL7-81572;[WHQL][viostor][HCK]Device Driver INF Verification Test (Certification);Device Driver INF Verification Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81572
2019;RHEL7-81573;[WHQL][viostor][HCK]DF - PNP Rebalance Request New Resources Device Test (Certification);DF - PNP Rebalance Request New Resources Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81573
2020;RHEL7-81574;[WHQL][viostor][WLK]WDK Prepare client for submission;WDK Prepare client for submission;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81574
2021;RHEL7-81575;[WHQL][viostor][WLK]IFS Test For Storage Logo;IFS Test For Storage Logo;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81575
2022;RHEL7-81576;[WHQL][viostor][WLK]PCI Hardware Compliance Test For a Single Device (PCIHCT);PCI Hardware Compliance Test For a Single Device (PCIHCT);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81576
2023;RHEL7-81577;[WHQL][viostor][WLK]Run INFTest against a single INF;Run INFTest against a single INF;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81577
2024;RHEL7-81578;[WHQL][viostor][WLK]Plug and Play Driver Test;Plug and Play Driver Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81578
2025;RHEL7-81579;[WHQL][viostor][WLK]Device Path Exerciser;Device Path Exerciser;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81579
2026;RHEL7-81580;[WHQL][viostor][WLK]Embedded Signature Verification;Embedded Signature Verification;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81580
2027;RHEL7-81581;[WHQL][viostor][WLK]Syscache Test (LOGO);Syscache Test (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81581
2028;RHEL7-81582;[WHQL][viostor][WLK]Crashdump Support Test (LOGO);Crashdump Support Test (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81582
2029;RHEL7-81583;[WHQL][viostor][WLK]Disk Stress (LOGO);Disk Stress (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81583
2030;RHEL7-81584;[WHQL][viostor][WLK]Disk Verification (LOGO);Disk Verification (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81584
2031;RHEL7-81585;[WHQL][viostor][WLK]Boot Test (LOGO);Boot Test (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81585
2032;RHEL7-81586;[WHQL][viostor][WLK]Storage Query Property (LOGO);Storage Query Property (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81586
2033;RHEL7-81587;[WHQL][viostor][WLK]Common Scenario Stress With DiskIO;Common Scenario Stress With DiskIO;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81587
2034;RHEL7-81588;[WHQL][viostor][WLK]2.2 TB Boot Test (LOGO);2.2 TB Boot Test (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81588
2035;RHEL7-81589;[WHQL][viostor][WLK]Read Capacity 16 Unit Test - SCSI Compliance Test (LOGO);Read Capacity 16 Unit Test - SCSI Compliance Test (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81589
2036;RHEL7-81590;[WHQL][viostor][WLK]DP WDK - Hot-Replace - Device Test - Verify driver support for D3 power state;DP WDK - Hot-Replace - Device Test - Verify driver support for D3 power state;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81590
2037;RHEL7-81591;[WHQL][viostor][WLK]DP WDK - Hot-Add - Device Test - Verify driver support for Hot-Add CPU;DP WDK - Hot-Add - Device Test - Verify driver support for Hot-Add CPU;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81591
2038;RHEL7-81592;[WHQL][viostor][WLK][PREVIEW] Verify Driver Load Order Group is not WdfLoadGroup;[PREVIEW] Verify Driver Load Order Group is not WdfLoadGroup;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81592
2039;RHEL7-81593;[WHQL][viostor][WLK]Sleep Stress With IO;Sleep Stress With IO;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81593
2040;RHEL7-81594;[WHQL][viostor][WLK]Disable Enable With IO;Disable Enable With IO;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81594
2041;RHEL7-81595;[WHQL][viostor][WLK]Common Scenario Stress With IO;Common Scenario Stress With IO;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81595
2042;RHEL7-81596;[WHQL][viostor][WLK]Reinstall With IO;Reinstall With IO;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81596
2043;RHEL7-81600;[WHQL][vioscsi][HLK]DF - PNP Surprise Remove Device Test (Reliability);DF - PNP Surprise Remove Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81600
2044;RHEL7-81601;[WHQL][vioscsi][HLK]DF - PNP Rebalance Fail Restart Device Test (Reliability);DF - PNP Rebalance Fail Restart Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81601
2045;RHEL7-81602;[WHQL][vioscsi][HLK]DF - PCI Root Port Surprise Remove Test (PCI devices only) (Reliability);DF - PCI Root Port Surprise Remove Test (PCI devices only) (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81602
2046;RHEL7-81603;[WHQL][vioscsi][HLK]HyperVisor Code Integrity Readiness Test;HyperVisor Code Integrity Readiness Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81603
2047;RHEL7-81604;[WHQL][vioscsi][HLK]DF - PNP Remove Device Test (Reliability);DF - PNP Remove Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81604
2048;RHEL7-81605;[WHQL][vioscsi][HLK]Operate In Server Core Test;Operate In Server Core Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81605
2049;RHEL7-81606;[WHQL][vioscsi][HLK]DF - PNP Cancel Remove Device Test (Reliability);DF - PNP Cancel Remove Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81606
2050;RHEL7-81607;[WHQL][vioscsi][HLK]Storage Imports Test (LOGO);Storage Imports Test (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81607
2051;RHEL7-81608;[WHQL][vioscsi][HLK]Disk Verification (LOGO);Disk Verification (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81608
2052;RHEL7-81609;[WHQL][vioscsi][HLK]DF - Sleep and PNP (disable and enable) with IO Before and After (Reliability);DF - Sleep and PNP (disable and enable) with IO Before and After (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81609
2053;RHEL7-81610;[WHQL][vioscsi][HLK]DF - PNP Stop (Rebalance) Device Test (Reliability);DF - PNP Stop (Rebalance) Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81610
2054;RHEL7-81611;[WHQL][vioscsi][HLK]DF - Embedded Signature Verification Test (Tuning and Validation);DF - Embedded Signature Verification Test (Tuning and Validation);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81611
2055;RHEL7-81612;[WHQL][vioscsi][HLK]DF - InfVerif INF Verification;DF - InfVerif INF Verification;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81612
2056;RHEL7-81613;[WHQL][vioscsi][HLK]DF - PNP Cancel Stop Device Test (Reliability);DF - PNP Cancel Stop Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81613
2057;RHEL7-81614;[WHQL][vioscsi][HLK]DF - Sleep with IO During (Reliability);DF - Sleep with IO During (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81614
2058;RHEL7-81615;[WHQL][vioscsi][HLK]Flush Test;Flush Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81615
2059;RHEL7-81616;[WHQL][vioscsi][HLK]Storage Query Property (LOGO);Storage Query Property (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81616
2060;RHEL7-81617;[WHQL][vioscsi][HLK]DF - PNP DIF Remove Device Test (Reliability);DF - PNP DIF Remove Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81617
2061;RHEL7-81618;[WHQL][vioscsi][HLK]DF - PNP Rebalance Request New Resources Device Test (Reliability);DF - PNP Rebalance Request New Resources Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81618
2062;RHEL7-81619;[WHQL][vioscsi][HLK]DF - Reinstall with IO Before and After (Reliability);DF - Reinstall with IO Before and After (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81619
2063;RHEL7-81620;[WHQL][vioscsi][HLK]Static Tools Logo Test;Static Tools Logo Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81620
2064;RHEL7-81621;[WHQL][vioscsi][HLK]Disk Stress (LOGO);Disk Stress (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81621
2065;RHEL7-81622;[WHQL][vioscsi][HLK]DF - PNP Disable And Enable Device Test (Reliability);DF - PNP Disable And Enable Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81622
2066;RHEL7-81623;[WHQL][vioscsi][HCK]DP WLK - Hot-Replace - Device Test - Verify driver support for D3 power state;DP WLK - Hot-Replace - Device Test - Verify driver support for D3 power state;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81623
2067;RHEL7-81624;[WHQL][vioscsi][HCK]DF - Fuzz zero length buffer FSCTL test (Certification);DF - Fuzz zero length buffer FSCTL test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81624
2068;RHEL7-81625;[WHQL][vioscsi][HCK]Storage Query Property (LOGO);Storage Query Property (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81625
2069;RHEL7-81626;[WHQL][vioscsi][HCK]DF - Fuzz random IOCTL test (Certification);DF - Fuzz random IOCTL test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81626
2070;RHEL7-81627;[WHQL][vioscsi][HCK]DP WLK - Hot-Add - Device Test - Verify driver support for Hot-Add CPU;DP WLK - Hot-Add - Device Test - Verify driver support for Hot-Add CPU;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81627
2071;RHEL7-81628;[WHQL][vioscsi][HCK]Bus Reset Test;Bus Reset Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81628
2072;RHEL7-81629;[WHQL][vioscsi][HCK]DF - PNP DIF Remove Device Test (Certification);DF - PNP DIF Remove Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81629
2073;RHEL7-81630;[WHQL][vioscsi][HCK]PCI Hardware Compliance Test For a Single Device (PCIHCT);PCI Hardware Compliance Test For a Single Device (PCIHCT);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81630
2074;RHEL7-81631;[WHQL][vioscsi]][HCK]Flush Test;Flush Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81631
2075;RHEL7-81632;[WHQL][vioscsi][HCK]DF - Fuzz sub-opens with streams test (Certification);DF - Fuzz sub-opens with streams test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81632
2076;RHEL7-81633;[WHQL][vioscsi][HCK]DF - Concurrent Hardware And Operating System (CHAOS) Test (Certification);DF - Concurrent Hardware And Operating System (CHAOS) Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81633
2077;RHEL7-81634;[WHQL][vioscsi][HCK]Wdf - Verify Driver Load Order Group is not WdfLoadGroup;Wdf - Verify Driver Load Order Group is not WdfLoadGroup;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81634
2078;RHEL7-81635;[WHQL][vioscsi][HCK]DF - PNP Disable And Enable Device Test (Certification);DF - PNP Disable And Enable Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81635
2079;RHEL7-81636;[WHQL][vioscsi][HCK]DF - Fuzz open and close test (Certification);DF - Fuzz open and close test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81636
2080;RHEL7-81637;[WHQL][vioscsi][HCK]Storage Imports Test (LOGO);Storage Imports Test (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81637
2081;RHEL7-81638;[WHQL][viostor][HCK]Driver Memory Test;Driver Memory Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81638
2082;RHEL7-81639;[WHQL][vioscsi][HCK]Multiple processor group device test;Multiple processor group device test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81639
2083;RHEL7-81640;[WHQL][vioscsi][HCK]Disk Stress (LOGO);Disk Stress (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81640
2084;RHEL7-81641;[WHQL][vioscsi][HCK]DF - Fuzz sub-opens test (Certification);DF - Fuzz sub-opens test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81641
2085;RHEL7-81642;[WHQL][vioscsi][HCK]DF - PNP Stop (Rebalance) Device Test (Certification);DF - PNP Stop (Rebalance) Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81642
2086;RHEL7-81643;[WHQL][vioscsi][HCK]DF - PNP Rebalance Fail Restart Device Test (Certification);DF - PNP Rebalance Fail Restart Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81643
2087;RHEL7-81644;[WHQL][vioscsi][HCK]DF - PNP Remove Device Test (Certification);DF - PNP Remove Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81644
2088;RHEL7-81645;[WHQL][vioscsi][HCK]DF - Fuzz Misc API test (Certification);DF - Fuzz Misc API test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81645
2089;RHEL7-81646;[WHQL][vioscsi][HCK]DF - Fuzz zero length buffer IOCTL test (Certification);DF - Fuzz zero length buffer IOCTL test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81646
2090;RHEL7-81647;[WHQL][vioscsi][HCK]DF - Fuzz Query and Set File Information Test (Certification);DF - Fuzz Query and Set File Information Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81647
2091;RHEL7-81648;[WHQL][vioscsi][HCK]Lun Reset Test With Outstanding IO - All Disks;Lun Reset Test With Outstanding IO - All Disks;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81648
2092;RHEL7-81649;[WHQL][vioscsi][HCK]Operate In Server Core Test;Operate In Server Core Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81649
2093;RHEL7-81650;[WHQL][vioscsi][HCK]DF - Sleep and PNP (disable and enable) with IO Before and After (Certification);DF - Sleep and PNP (disable and enable) with IO Before and After (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81650
2094;RHEL7-81651;[WHQL][vioscsi][HCK]DF - PCI Root Port Surprise Remove Test (PCI devices only) (Certification);DF - PCI Root Port Surprise Remove Test (PCI devices only) (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81651
2095;RHEL7-81652;[WHQL][vioscsi][HCK]DevFund Broker Test;DevFund Broker Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81652
2096;RHEL7-81653;[WHQL][vioscsi][HCK]Disk Verification (LOGO);Disk Verification (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81653
2097;RHEL7-81654;[WHQL][vioscsi][HCK]DF - Reinstall with IO Before and After (Certification);DF - Reinstall with IO Before and After (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81654
2098;RHEL7-81655;[WHQL][vioscsi][HCK]Lun Reset Test Without Outstanding IO - All Disks;Lun Reset Test Without Outstanding IO - All Disks;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81655
2099;RHEL7-81656;[WHQL][vioscsi][HCK]DF - Embedded Signature Verification Test (Certification);DF - Embedded Signature Verification Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81656
2100;RHEL7-81657;[WHQL][vioscsi][HCK]Lun Reset Test Without Outstanding IO - Single Disk;Lun Reset Test Without Outstanding IO - Single Disk;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81657
2101;RHEL7-81658;[WHQL][vioscsi][HCK]DevFund INF Test;DevFund INF Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81658
2102;RHEL7-81659;[WHQL][vioscsi][HCK]DF - Sleep with IO During (Certification);DF - Sleep with IO During (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81659
2103;RHEL7-81660;[WHQL][vioscsi][HCK]DF - Fuzz random FSCTL test (Certification);DF - Fuzz random FSCTL test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81660
2104;RHEL7-81661;[WHQL][vioscsi][HCK]Static Tools Logo Test;Static Tools Logo Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81661
2105;RHEL7-81662;[WHQL][vioscsi][HCK]DF - Fuzz misc API with zero length query test (Certification);DF - Fuzz misc API with zero length query test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81662
2106;RHEL7-81663;[WHQL][vioscsi][HCK]DF - PNP Cancel Remove Device Test (Certification);DF - PNP Cancel Remove Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81663
2107;RHEL7-81664;[WHQL][vioscsi][HCK]DF - PNP Cancel Stop Device Test (Certification);DF - PNP Cancel Stop Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81664
2108;RHEL7-81665;[WHQL][vioscsi][HCK]Lun Reset Test With Outstanding IO - Single Disk;Lun Reset Test With Outstanding IO - Single Disk;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81665
2109;RHEL7-81666;[WHQL][vioscsi][HCK]DF - PNP Surprise Remove Device Test (Certification);DF - PNP Surprise Remove Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81666
2110;RHEL7-81667;[WHQL][vioscsi][HCK]DF - Fuzz Query and Set Security Test (Certification);DF - Fuzz Query and Set Security Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81667
2111;RHEL7-81668;[WHQL][vioscsi][HCK]TDI filters and LSPs are not allowed;TDI filters and LSPs are not allowed;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81668
2112;RHEL7-81669;[WHQL][vioscsi][HCK]Device Driver INF Verification Test (Certification);Device Driver INF Verification Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81669
2113;RHEL7-81670;[WHQL][vioscsi][HCK]DF - PNP Rebalance Request New Resources Device Test (Certification);DF - PNP Rebalance Request New Resources Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81670
2114;RHEL7-81671;[WHQL][vioscsi][WLK]WDK Prepare client for submission;WDK Prepare client for submission;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81671
2115;RHEL7-81672;[WHQL][vioscsi][WLK]IFS Test For Storage Logo;IFS Test For Storage Logo;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81672
2116;RHEL7-81673;[WHQL][vioscsi][WLK]PCI Hardware Compliance Test For a Single Device (PCIHCT);PCI Hardware Compliance Test For a Single Device (PCIHCT);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81673
2117;RHEL7-81674;[WHQL][vioscsi][WLK]Run INFTest against a single INF;Run INFTest against a single INF;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81674
2118;RHEL7-81675;[WHQL][vioscsi][WLK]Plug and Play Driver Test;Plug and Play Driver Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81675
2119;RHEL7-81676;[WHQL][vioscsi][WLK]Device Path Exerciser;Device Path Exerciser;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81676
2120;RHEL7-81677;[WHQL][vioscsi][WLK]Embedded Signature Verification;Embedded Signature Verification;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81677
2121;RHEL7-81678;[WHQL][vioscsi][WLK]Syscache Test (LOGO);Syscache Test (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81678
2122;RHEL7-81679;[WHQL][vioscsi][WLK]Crashdump Support Test (LOGO);Crashdump Support Test (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81679
2123;RHEL7-81680;[WHQL][viostor][WLK]Disk Stress (LOGO);Disk Stress (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81680
2124;RHEL7-81681;[WHQL][vioscsi][WLK]Disk Verification (LOGO);Disk Verification (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81681
2125;RHEL7-81682;[WHQL][vioscsi][WLK]Boot Test (LOGO);Boot Test (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81682
2126;RHEL7-81683;[WHQL][vioscsi][WLK]Storage Query Property (LOGO);Storage Query Property (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81683
2127;RHEL7-81684;[WHQL][vioscsi][WLK]Common Scenario Stress With DiskIO;Common Scenario Stress With DiskIO;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81684
2128;RHEL7-81685;[WHQL][vioscsi][WLK]2.2 TB Boot Test (LOGO);2.2 TB Boot Test (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81685
2129;RHEL7-81686;[WHQL][vioscsi][WLK]Read Capacity 16 Unit Test - SCSI Compliance Test (LOGO);Read Capacity 16 Unit Test - SCSI Compliance Test (LOGO);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81686
2130;RHEL7-81687;[WHQL][vioscsi][WLK]DP WDK - Hot-Replace - Device Test - Verify driver support for D3 power state;DP WDK - Hot-Replace - Device Test - Verify driver support for D3 power state;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81687
2131;RHEL7-81688;[WHQL][vioscsi][WLK]DP WDK - Hot-Add - Device Test - Verify driver support for Hot-Add CPU;DP WDK - Hot-Add - Device Test - Verify driver support for Hot-Add CPU;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81688
2132;RHEL7-81689;[WHQL][vioscsi][WLK][PREVIEW] Verify Driver Load Order Group is not WdfLoadGroup;[PREVIEW] Verify Driver Load Order Group is not WdfLoadGroup;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81689
2133;RHEL7-81690;[WHQL][vioscsi][WLK]Sleep Stress With IO;Sleep Stress With IO;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81690
2134;RHEL7-81691;[WHQL][vioscsi][WLK]Disable Enable With IO;Disable Enable With IO;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81691
2135;RHEL7-81692;[WHQL][vioscsi][WLK]Common Scenario Stress With IO;Common Scenario Stress With IO;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81692
2136;RHEL7-81693;[WHQL][vioscsi][WLK][WHQL][vioscsi][WLK]Reinstall With IO;Reinstall With IO;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-81693
2137;RHEL7-82244;[WHQL][netkvm][HLK]NDISTest 6.5 - [1 Machine] - OffloadParity;NDISTest 6.5 - [1 Machine] - OffloadParity;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82244
2138;RHEL7-82245;[WHQL][netkvm][HLK]DF - PNP DIF Remove Device Test (Reliability);DF - PNP DIF Remove Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82245
2139;RHEL7-82246;[WHQL][netkvm][HLK]Operate In Server Core Test;Operate In Server Core Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82246
2140;RHEL7-82247;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - ConfigCheck;NDISTest 6.5 - [2 Machine] - ConfigCheck;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82247
2141;RHEL7-82248;[WHQL][netkvm][HLK]NDISTest 6.0 - [1 Machine] - 1c_WMICoverage;NDISTest 6.0 - [1 Machine] - 1c_WMICoverage;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82248
2142;RHEL7-82249;[WHQL][netkvm][HLK]DF - PNP Remove Device Test (Reliability);DF - PNP Remove Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82249
2143;RHEL7-82250;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - MultiCast Address;NDISTest 6.5 - [2 Machine] - MultiCast Address;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82250
2144;RHEL7-82251;[WHQL][netkvm][HLK]NDISTest 6.5 - [1 Machine] - PM_Requirements;NDISTest 6.5 - [1 Machine] - PM_Requirements;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82251
2145;RHEL7-82252;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - Stats;NDISTest 6.5 - [2 Machine] - Stats;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82252
2146;RHEL7-82253;[WHQL][netkvm][HLK]DF - PNP Rebalance Request New Resources Device Test (Reliability);DF - PNP Rebalance Request New Resources Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82253
2147;RHEL7-82254;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - ShortPackets;NDISTest 6.5 - [2 Machine] - ShortPackets;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82254
2148;RHEL7-82255;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - InvalidPackets;NDISTest 6.5 - [2 Machine] - InvalidPackets;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82255
2149;RHEL7-82256;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - InterruptModeration;NDISTest 6.5 - [2 Machine] - InterruptModeration;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82256
2150;RHEL7-82257;[WHQL][netkvm][HLK]DF - PNP Disable And Enable Device Test (Reliability);DF - PNP Disable And Enable Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82257
2151;RHEL7-82258;[WHQL][netkvm][HLK]DF - PCI Root Port Surprise Remove Test (PCI devices only) (Reliability);DF - PCI Root Port Surprise Remove Test (PCI devices only) (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82258
2152;RHEL7-82259;[WHQL][netkvm][HLK]NDISTest 6.0 - [1 Machine] - 1c_Mini6Send;NDISTest 6.0 - [1 Machine] - 1c_Mini6Send;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82259
2153;RHEL7-82260;[WHQL][netkvm][HLK]NDISTest 6.0 - [1 Machine] - 1c_KernelCalls;NDISTest 6.0 - [1 Machine] - 1c_KernelCalls;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82260
2154;RHEL7-82261;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - CheckConnectivity with AutoFail;NDISTest 6.5 - [2 Machine] - CheckConnectivity with AutoFail;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82261
2155;RHEL7-82262;[WHQL][netkvm][HLK]NDISTest 6.0 - [1 Machine] - 1c_Mini6PerfSend;NDISTest 6.0 - [1 Machine] - 1c_Mini6PerfSend;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82262
2156;RHEL7-82263;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - LinkCheck;NDISTest 6.5 - [2 Machine] - LinkCheck;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82263
2157;RHEL7-82264;[WHQL][netkvm][HLK]NDISTest 6.5 - [1 Machine] - GenericMiniportRequirements;NDISTest 6.5 - [1 Machine] - GenericMiniportRequirements;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82264
2158;RHEL7-82265;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - SingleEtherType;NDISTest 6.5 - [2 Machine] - SingleEtherType;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82265
2159;RHEL7-82266;[WHQL][netkvm][HLK]DF - PNP Stop (Rebalance) Device Test (Reliability);DF - PNP Stop (Rebalance) Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82266
2160;RHEL7-82267;[WHQL][netkvm][HLK]DF - PNP Rebalance Fail Restart Device Test (Reliability);DF - PNP Rebalance Fail Restart Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82267
2161;RHEL7-82268;[WHQL][netkvm][HLK]DF - InfVerif INF Verification;DF - InfVerif INF Verification;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82268
2162;RHEL7-82269;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - VlanSendRecv;NDISTest 6.5 - [2 Machine] - VlanSendRecv;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82269
2163;RHEL7-82270;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - OffloadMisc;NDISTest 6.5 - [2 Machine] - OffloadMisc;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82270
2164;RHEL7-82271;[WHQL][netkvm][HLK]DF - PNP Surprise Remove Device Test (Reliability);DF - PNP Surprise Remove Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82271
2165;RHEL7-82272;[WHQL][netkvm][HLK]NDISTest 6.0 - [2 Machine] - 2c_Mini6SendRecv;NDISTest 6.0 - [2 Machine] - 2c_Mini6SendRecv;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82272
2166;RHEL7-82273;[WHQL][netkvm][HLK]PrivateCloudSimulator - Device.Network.LAN.10GbOrGreater;PrivateCloudSimulator - Device.Network.LAN.10GbOrGreater;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82273
2167;RHEL7-82274;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - TxFlowControl;NDISTest 6.5 - [2 Machine] - TxFlowControl;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82274
2168;RHEL7-82275;[WHQL][netkvm][HLK]HyperVisor Code Integrity Readiness Test;HyperVisor Code Integrity Readiness Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82275
2169;RHEL7-82276;[WHQL][netkvm][HLK]NDISTest 6.0 - [2 Machine] - 2c_Mini6SendRecvReply;NDISTest 6.0 - [2 Machine] - 2c_Mini6SendRecvReply;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82276
2170;RHEL7-82277;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - Reset;NDISTest 6.5 - [2 Machine] - Reset;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82277
2171;RHEL7-82278;[WHQL][netkvm][HLK]NDISTest 6.0 - [1 Machine] - 1c_OidsDeviceIoControl;NDISTest 6.0 - [1 Machine] - 1c_OidsDeviceIoControl;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82278
2172;RHEL7-82279;[WHQL][netkvm][HLK]NDISTest 6.0 - [1 Machine] - 1c_NdisRequestCov;NDISTest 6.0 - [1 Machine] - 1c_NdisRequestCov;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82279
2173;RHEL7-82280;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - AddressChange;NDISTest 6.5 - [2 Machine] - AddressChange;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82280
2174;RHEL7-82281;[WHQL][netkvm][HLK]NDISTest 6.0 - [2 Machine] - 2c_Mini6RSSSendRecv (Multi-Group Win8+);NDISTest 6.0 - [2 Machine] - 2c_Mini6RSSSendRecv (Multi-Group Win8+);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82281
2175;RHEL7-82282;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - PacketFilters;NDISTest 6.5 - [2 Machine] - PacketFilters;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82282
2176;RHEL7-82283;[WHQL][netkvm][HLK]DF - Reinstall with IO Before and After (Reliability);DF - Reinstall with IO Before and After (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82283
2177;RHEL7-82284;[WHQL][netkvm][HLK]NDISTest 6.0 - [2 Machine] - 2c_Mini6Stress;NDISTest 6.0 - [2 Machine] - 2c_Mini6Stress;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82284
2178;RHEL7-82285;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - OffloadChecksum;NDISTest 6.5 - [2 Machine] - OffloadChecksum;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82285
2179;RHEL7-82286;[WHQL][netkvm][HLK]DF - Embedded Signature Verification Test (Tuning and Validation);DF - Embedded Signature Verification Test (Tuning and Validation);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82286
2180;RHEL7-82287;[WHQL][netkvm][HLK]NDISTest 6.0 - [2 Machine] - 2c_OidsNdisRequest;NDISTest 6.0 - [2 Machine] - 2c_OidsNdisRequest;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82287
2181;RHEL7-82288;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - CheckConnectivity;NDISTest 6.5 - [2 Machine] - CheckConnectivity;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82288
2182;RHEL7-82289;[WHQL][netkvm][HLK]NDISTest 6.5 - [1 Machine] - StandardizedKeywords;NDISTest 6.5 - [1 Machine] - StandardizedKeywords;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82289
2183;RHEL7-82290;[WHQL][netkvm][HLK]DF - Sleep with IO During (Reliability);DF - Sleep with IO During (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82290
2184;RHEL7-82291;[WHQL][netkvm][HLK]Static Tools Logo Test;Static Tools Logo Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82291
2185;RHEL7-82292;[WHQL][netkvm][HLK]DF - PNP Cancel Remove Device Test (Reliability);DF - PNP Cancel Remove Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82292
2186;RHEL7-82293;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - E2EPerf;NDISTest 6.5 - [2 Machine] - E2EPerf;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82293
2187;RHEL7-82294;[WHQL][netkvm][HLK]NDISTest 6.0 - [2 Machine] - 2c_Mini6Performance;NDISTest 6.0 - [2 Machine] - 2c_Mini6Performance;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82294
2188;RHEL7-82295;[WHQL][netkvm][HLK]NDISTest 6.0 - [1 Machine] - 1c_IOCTLCoverage;NDISTest 6.0 - [1 Machine] - 1c_IOCTLCoverage;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82295
2189;RHEL7-82296;[WHQL][netkvm][HLK]NDISTest 6.0 - [2 Machine] - 2c_Priority;NDISTest 6.0 - [2 Machine] - 2c_Priority;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82296
2190;RHEL7-82297;[WHQL][netkvm][HLK]NDISTest 6.0 - [1 Machine] - 1c_FaultHandling;NDISTest 6.0 - [1 Machine] - 1c_FaultHandling;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82297
2191;RHEL7-82298;[WHQL][netkvm][HLK]NDISTest 6.0 - [1 Machine] - 1c_64BitOIDs;NDISTest 6.0 - [1 Machine] - 1c_64BitOIDs;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82298
2192;RHEL7-82299;[WHQL][netkvm][HLK]DF - Sleep and PNP (disable and enable) with IO Before and After (Reliability);DF - Sleep and PNP (disable and enable) with IO Before and After (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82299
2193;RHEL7-82300;[WHQL][netkvm][HLK]NDISTest 6.0 - [1 Machine] - 1c_Registry;NDISTest 6.0 - [1 Machine] - 1c_Registry;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82300
2194;RHEL7-82301;[WHQL][netkvm][HLK]NDISTest 6.0 - [2 Machine] - 2c_Mini6CheckConnections;NDISTest 6.0 - [2 Machine] - 2c_Mini6CheckConnections;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82301
2195;RHEL7-82302;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - OffloadLSO;NDISTest 6.5 - [2 Machine] - OffloadLSO;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82302
2196;RHEL7-82303;[WHQL][netkvm][HLK]NDISTest 6.5 - [2 Machine] - GlitchFreeDevice;NDISTest 6.5 - [2 Machine] - GlitchFreeDevice;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82303
2197;RHEL7-82304;[WHQL][netkvm][HLK]NDISTest 6.0 - [1 Machine] - 1c_OidsWMI;NDISTest 6.0 - [1 Machine] - 1c_OidsWMI;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82304
2198;RHEL7-82305;[WHQL][netkvm][HLK]DF - PNP Cancel Stop Device Test (Reliability);DF - PNP Cancel Stop Device Test (Reliability);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82305
2199;RHEL7-82306;[WHQL][netkvm][HCK]DF - Fuzz zero length buffer IOCTL test (Certification);DF - Fuzz zero length buffer IOCTL test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82306
2200;RHEL7-82307;[WHQL][netkvm][HCK]NDISTest 6.5 - [1 Machine] - OffloadParity;NDISTest 6.5 - [1 Machine] - OffloadParity;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82307
2201;RHEL7-82308;[WHQL][netkvm][HCK]NDISTest 6.5 - [1 Machine] - GenericMiniportRequirements;NDISTest 6.5 - [1 Machine] - GenericMiniportRequirements;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82308
2202;RHEL7-82309;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - SelectiveSuspend;NDISTest 6.5 - [2 Machine] - SelectiveSuspend;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82309
2203;RHEL7-82310;[WHQL][netkvm][HCK]DF - PCI Root Port Surprise Remove Test (PCI devices only) (Certification);DF - PCI Root Port Surprise Remove Test (PCI devices only) (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82310
2204;RHEL7-82311;[WHQL][netkvm][HCK]NDISTest 6.0 - [1 Machine] - 1c_OidsDeviceIoControl;NDISTest 6.0 - [1 Machine] - 1c_OidsDeviceIoControl;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82311
2205;RHEL7-82312;[WHQL][netkvm][HCK]DF - Fuzz sub-opens with streams test (Certification);DF - Fuzz sub-opens with streams test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82312
2206;RHEL7-82313;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - InvalidPackets;NDISTest 6.5 - [2 Machine] - InvalidPackets;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82313
2207;RHEL7-82314;[WHQL][netkvm][HCK]NDISTest 6.0 - [1 Machine] - 1c_IOCTLCoverage;NDISTest 6.0 - [1 Machine] - 1c_IOCTLCoverage;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82314
2208;RHEL7-82315;[WHQL][netkvm][HCK]NDISTest 6.0 - [2 Machine] - 2c_Mini6CheckConnections;NDISTest 6.0 - [2 Machine] - 2c_Mini6CheckConnections;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82315
2209;RHEL7-82316;[WHQL][netkvm][HCK]PCI Hardware Compliance Test For a Single Device (PCIHCT);PCI Hardware Compliance Test For a Single Device (PCIHCT);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82316
2210;RHEL7-82317;NDISTest 6.0 - [1 Machine] - 1c_NdisRequestCov;NDISTest 6.0 - [1 Machine] - 1c_NdisRequestCov;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82317
2211;RHEL7-82318;[WHQL][netkvm][HCK]DF - Fuzz Query and Set File Information Test (Certification);DF - Fuzz Query and Set File Information Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82318
2212;RHEL7-82319;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - PM_WakeOnLinkChange;NDISTest 6.5 - [2 Machine] - PM_WakeOnLinkChange;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82319
2213;RHEL7-82320;[WHQL][netkvm][HCK]NDISTest 6.0 - [1 Machine] - 1c_FaultHandling;NDISTest 6.0 - [1 Machine] - 1c_FaultHandling;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82320
2214;RHEL7-82321;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - GlitchFreeDevice;NDISTest 6.5 - [2 Machine] - GlitchFreeDevice;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82321
2215;RHEL7-82322;[WHQL][netkvm][HCK]DevFund Broker Test;DevFund Broker Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82322
2216;RHEL7-82323;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - Reset;NDISTest 6.5 - [2 Machine] - Reset;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82323
2217;RHEL7-82324;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - ConfigCheck;NDISTest 6.5 - [2 Machine] - ConfigCheck;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82324
2218;RHEL7-82325;[WHQL][netkvm][HCK]NDISTest 6.5 - [1 Machine] - PM_Requirements;NDISTest 6.5 - [1 Machine] - PM_Requirements;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82325
2219;RHEL7-82326;[WHQL][netkvm][HCK]DF - PNP Rebalance Fail Restart Device Test (Certification);DF - PNP Rebalance Fail Restart Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82326
2220;RHEL7-82327;[WHQL][netkvm][HCK]DevFund INF Test;DevFund INF Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82327
2221;RHEL7-82328;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - OffloadChecksum;NDISTest 6.5 - [2 Machine] - OffloadChecksum;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82328
2222;RHEL7-82329;[WHQL][netkvm][HCK]DF - PNP Cancel Remove Device Test (Certification);DF - PNP Cancel Remove Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82329
2223;RHEL7-82330;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - MultiCast Address;NDISTest 6.5 - [2 Machine] - MultiCast Address;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82330
2224;RHEL7-82331;[WHQL][netkvm][HCK]DF - PNP Cancel Stop Device Test (Certification);DF - PNP Cancel Stop Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82331
2225;RHEL7-82332;[WHQL][netkvm][HCK]NDISTest 6.5 - [1 Machine] - OffloadMisc;NDISTest 6.5 - [1 Machine] - OffloadMisc;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82332
2226;RHEL7-82333;[WHQL][netkvm][HCK]NDISTest 6.0 - [2 Machine] - 2c_Mini6RSSSendRecv (Multi-Group Win8+);NDISTest 6.0 - [2 Machine] - 2c_Mini6RSSSendRecv (Multi-Group Win8+);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82333
2227;RHEL7-82334;[WHQL][netkvm][HCK]Driver Memory Test;Driver Memory Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82334
2228;RHEL7-82335;[WHQL][netkvm][HCK]NDISTest 6.0 - [1 Machine] - 1c_64BitOIDs;NDISTest 6.0 - [1 Machine] - 1c_64BitOIDs;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82335
2229;RHEL7-82336;[WHQL][netkvm][HCK]DF - PNP Rebalance Request New Resources Device Test (Certification);DF - PNP Rebalance Request New Resources Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82336
2230;RHEL7-82337;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - OffloadLSO;NDISTest 6.5 - [2 Machine] - OffloadLSO;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82337
2231;RHEL7-82338;[WHQL][netkvm][HCK]DF - Concurrent Hardware And Operating System (CHAOS) Test (Certification);DF - Concurrent Hardware And Operating System (CHAOS) Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82338
2232;RHEL7-82339;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - ShortPackets;NDISTest 6.5 - [2 Machine] - ShortPackets;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82339
2233;RHEL7-82340;[WHQL][netkvm][HCK]DF - Fuzz random IOCTL test (Certification);DF - Fuzz random IOCTL test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82340
2234;RHEL7-82341;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - PM_PowerStateTransition;NDISTest 6.5 - [2 Machine] - PM_PowerStateTransition;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82341
2235;RHEL7-82342;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - PM_WolPattern;NDISTest 6.5 - [2 Machine] - PM_WolPattern;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82342
2236;RHEL7-82343;[WHQL][netkvm][HCK]Operate In Server Core Test;Operate In Server Core Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82343
2237;RHEL7-82344;[WHQL][netkvm][HCK]DF - Reinstall with IO Before and After (Certification);DF - Reinstall with IO Before and After (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82344
2238;RHEL7-82345;[WHQL][netkvm][HCK]DF - PNP Stop (Rebalance) Device Test (Certification);DF - PNP Stop (Rebalance) Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82345
2239;RHEL7-82346;[WHQL][netkvm][HCK]NDISTest 6.0 - [2 Machine] - 2c_Mini6Stress;NDISTest 6.0 - [2 Machine] - 2c_Mini6Stress;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82346
2240;RHEL7-82347;[WHQL][netkvm][HCK]Static Tools Logo Test;Static Tools Logo Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82347
2241;RHEL7-82348;[WHQL][netkvm][HCK]DF - Fuzz Query and Set Security Test (Certification);DF - Fuzz Query and Set Security Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82348
2242;RHEL7-82349;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - Stats;NDISTest 6.5 - [2 Machine] - Stats;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82349
2243;RHEL7-82350;[WHQL][netkvm][HCK]DF - Sleep and PNP (disable and enable) with IO Before and After (Certification);DF - Sleep and PNP (disable and enable) with IO Before and After (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82350
2244;RHEL7-82351;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - HeaderPayloadSplit;NDISTest 6.5 - [2 Machine] - HeaderPayloadSplit;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82351
2245;RHEL7-82352;[WHQL][netkvm][HCK]TDI filters and LSPs are not allowed;TDI filters and LSPs are not allowed;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82352
2246;RHEL7-82353;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - InterruptModeration;NDISTest 6.5 - [2 Machine] - InterruptModeration;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82353
2247;RHEL7-82354;[WHQL][netkvm][HCK]NDISTest 6.0 - [2 Machine] - 2c_OidsNdisRequest;NDISTest 6.0 - [2 Machine] - 2c_OidsNdisRequest;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82354
2248;RHEL7-82355;[WHQL][netkvm][HCK]NDISTest 6.0 - [1 Machine] - 1c_KernelCalls;NDISTest 6.0 - [1 Machine] - 1c_KernelCalls;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82355
2249;RHEL7-82356;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - VlanSendRecv;NDISTest 6.5 - [2 Machine] - VlanSendRecv;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82356
2250;RHEL7-82357;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - E2EPerf;NDISTest 6.5 - [2 Machine] - E2EPerf;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82357
2251;RHEL7-82358;[WHQL][netkvm][HCK]NDISTest 6.0 - [2 Machine] - 2c_Mini6RSSSendRecv;NDISTest 6.0 - [2 Machine] - 2c_Mini6RSSSendRecv;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82358
2252;RHEL7-82359;[WHQL][netkvm][HCK]NDISTest 6.0 - [2 Machine] - 2c_Mini6Performance;NDISTest 6.0 - [2 Machine] - 2c_Mini6Performance;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82359
2253;RHEL7-82360;[WHQL][netkvm][HCK]Device Driver INF Verification Test (Certification);Device Driver INF Verification Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82360
2254;RHEL7-82361;[WHQL][netkvm][HCK]Wdf - Verify Driver Load Order Group is not WdfLoadGroup;Wdf - Verify Driver Load Order Group is not WdfLoadGroup;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82361
2255;RHEL7-82362;[WHQL][netkvm][HCK]NDISTest 6.5 - [1 Machine] - StandardizedKeywords;NDISTest 6.5 - [1 Machine] - StandardizedKeywords;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82362
2256;RHEL7-82363;[WHQL][netkvm][HCK]NDISTest 6.0 - [1 Machine] - 1c_Mini6Send;NDISTest 6.0 - [1 Machine] - 1c_Mini6Send;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82363
2257;RHEL7-82364;[WHQL][netkvm][HCK]DP WLK - Hot-Add - Device Test - Verify driver support for Hot-Add CPU;DP WLK - Hot-Add - Device Test - Verify driver support for Hot-Add CPU;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82364
2258;RHEL7-82365;[WHQL][netkvm][HCK]DF - PNP Disable And Enable Device Test (Certification);DF - PNP Disable And Enable Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82365
2259;RHEL7-82366;[WHQL][netkvm][HCK]DF - Fuzz sub-opens test (Certification);DF - Fuzz sub-opens test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82366
2260;RHEL7-82367;[WHQL][netkvm][HCK]DF - Fuzz zero length buffer FSCTL test (Certification);DF - Fuzz zero length buffer FSCTL test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82367
2261;RHEL7-82368;[WHQL][netkvm][HCK]DF - Fuzz misc API with zero length query test (Certification);DF - Fuzz misc API with zero length query test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82368
2262;RHEL7-82369;[WHQL][netkvm][HCK]NDISTest 6.0 - [1 Machine] - 1c_Mini6RSSOids;NDISTest 6.0 - [1 Machine] - 1c_Mini6RSSOids;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82369
2263;RHEL7-82370;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - LinkCheck;NDISTest 6.5 - [2 Machine] - LinkCheck;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82370
2264;RHEL7-82371;[WHQL][netkvm][HCK]DF - Fuzz random FSCTL test (Certification);DF - Fuzz random FSCTL test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82371
2265;RHEL7-82372;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - KeepAlive;NDISTest 6.5 - [2 Machine] - KeepAlive;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82372
2266;RHEL7-82373;[WHQL][netkvm][HCK]DF - Embedded Signature Verification Test (Certification);DF - Embedded Signature Verification Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82373
2267;RHEL7-82374;[WHQL][netkvm][HCK]NDISTest 6.0 - [1 Machine] - 1c_SetLookahead;NDISTest 6.0 - [1 Machine] - 1c_SetLookahead;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82374
2268;RHEL7-82375;[WHQL][netkvm][HCK]DF - Sleep with IO During (Certification);DF - Sleep with IO During (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82375
2269;RHEL7-82376;[WHQL][netkvm][HCK]NDISTest 6.0 - [2 Machine] - 2c_Mini6SendRecv;NDISTest 6.0 - [2 Machine] - 2c_Mini6SendRecv;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82376
2270;RHEL7-82377;[WHQL][netkvm][HCK]DP WLK - Hot-Replace - Device Test - Verify driver support for D3 power state;DP WLK - Hot-Replace - Device Test - Verify driver support for D3 power state;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82377
2271;RHEL7-82378;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - PM_WolMagicPacket;NDISTest 6.5 - [2 Machine] - PM_WolMagicPacket;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82378
2272;RHEL7-82379;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - AddressChange;NDISTest 6.5 - [2 Machine] - AddressChange;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82379
2273;RHEL7-82380;[WHQL][netkvm][HCK]DF - PNP Surprise Remove Device Test (Certification);DF - PNP Surprise Remove Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82380
2274;RHEL7-82381;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - SingleEtherType;NDISTest 6.5 - [2 Machine] - SingleEtherType;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82381
2275;RHEL7-82382;[WHQL][netkvm][HCK]DF - PNP Remove Device Test (Certification);DF - PNP Remove Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82382
2276;RHEL7-82383;[WHQL][netkvm][HCK]Multiple processor group device test;Multiple processor group device test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82383
2277;RHEL7-82384;[WHQL][netkvm][HCK]NDISTest 6.0 - [1 Machine] - 1c_OidsWMI;NDISTest 6.0 - [1 Machine] - 1c_OidsWMI;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82384
2278;RHEL7-82385;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - CheckConnectivity;NDISTest 6.5 - [2 Machine] - CheckConnectivity;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82385
2279;RHEL7-82386;[WHQL][netkvm][HCK]NDISTest 6.0 - [1 Machine] - 1c_Mini6PerfSend;NDISTest 6.0 - [1 Machine] - 1c_Mini6PerfSend;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82386
2280;RHEL7-82387;[WHQL][netkvm][HCK]NDISTest 6.5 - [1 Machine] - OffloadRsc;NDISTest 6.5 - [1 Machine] - OffloadRsc;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82387
2281;RHEL7-82388;[WHQL][netkvm][HCK]NDISTest 6.0 - [2 Machine] - 2c_Priority;NDISTest 6.0 - [2 Machine] - 2c_Priority;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82388
2282;RHEL7-82389;[WHQL][netkvm][HCK]DF - Fuzz open and close test (Certification);DF - Fuzz open and close test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82389
2283;RHEL7-82390;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - TxFlowControl;NDISTest 6.5 - [2 Machine] - TxFlowControl;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82390
2284;RHEL7-82391;[WHQL][netkvm][HCK]DF - PNP DIF Remove Device Test (Certification);DF - PNP DIF Remove Device Test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82391
2285;RHEL7-82392;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - MPE_Ethernet.xml;NDISTest 6.5 - [2 Machine] - MPE_Ethernet.xml;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82392
2286;RHEL7-82393;[WHQL][netkvm][HCK]NDISTest 6.5 - [2 Machine] - PacketFilters;NDISTest 6.5 - [2 Machine] - PacketFilters;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82393
2287;RHEL7-82394;[WHQL][netkvm][HCK]NDISTest 6.0 - [2 Machine] - 2c_Mini6SendRecvReply;NDISTest 6.0 - [2 Machine] - 2c_Mini6SendRecvReply;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82394
2288;RHEL7-82395;[WHQL][netkvm][HCK]Run RSC Tests;Run RSC Tests;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82395
2289;RHEL7-82396;[WHQL][netkvm][HCK]DF - Fuzz Misc API test (Certification);DF - Fuzz Misc API test (Certification);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82396
2290;RHEL7-82397;[WHQL][netkvm][HCK]NDISTest 6.0 - [1 Machine] - 1c_Registry;NDISTest 6.0 - [1 Machine] - 1c_Registry;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82397
2291;RHEL7-82398;[WHQL][netkvm][HCK]NDISTest 6.0 - [1 Machine] - 1c_WMICoverage;NDISTest 6.0 - [1 Machine] - 1c_WMICoverage;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82398
2292;RHEL7-82399;[WHQL][netkvm][WLK]WDK Prepare client for submission;WDK Prepare client for submission;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82399
2293;RHEL7-82400;[WHQL][netkvm][WLK]PCI Hardware Compliance Test For a Single Device (PCIHCT);PCI Hardware Compliance Test For a Single Device (PCIHCT);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82400
2294;RHEL7-82401;[WHQL][netkvm][WLK]Run INFTest against a single INF;Run INFTest against a single INF;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82401
2295;RHEL7-82402;[WHQL][netkvm][WLK]DP WLK - Hot-Add - Device Test - Verify driver support for Hot-Add CPU;DP WLK - Hot-Add - Device Test - Verify driver support for Hot-Add CPU;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82402
2296;RHEL7-82403;[WHQL][netkvm][WLK]DP WLK - Hot-Replace - Device Test - Verify driver support for D3 power state;DP WLK - Hot-Replace - Device Test - Verify driver support for D3 power state;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82403
2297;RHEL7-82404;[WHQL][netkvm][WLK]Plug and Play Driver Test;Plug and Play Driver Test;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82404
2298;RHEL7-82405;[WHQL][netkvm][WLK]Device Path Exerciser;Device Path Exerciser;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82405
2299;RHEL7-82406;[WHQL][netkvm][WLK]Embedded Signature Verification;Embedded Signature Verification;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82406
2300;RHEL7-82407;[WHQL][netkvm][WLK][PREVIEW]Verify Driver Load Order Group is not WdfLoadGroup;[PREVIEW]Verify Driver Load Order Group is not WdfLoadGroup;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82407
2301;RHEL7-82408;[WHQL][netkvm][WLK]Sleep Stress With IO;Sleep Stress With IO;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82408
2302;RHEL7-82409;[WHQL][netkvm][WLK]Disable Enable With IO;Disable Enable With IO;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82409
2303;RHEL7-82410;[WHQL][netkvm][WLK]Common Scenario Stress With IO;Common Scenario Stress With IO;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82410
2304;RHEL7-82411;[WHQL][netkvm][WLK]Reinstall With IO;Reinstall With IO;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82411
2305;RHEL7-82412;[WHQL][netkvm][WLK]Ethernet – NDISTest6.5;Ethernet – NDISTest6.5;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82412
2306;RHEL7-82413;[WHQL][netkvm][WLK]Ethernet – NDISTest6.0;Ethernet – NDISTest6.0;Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82413
2307;RHEL7-82414;[WHQL][netkvm][WLK]Ethernet – NDISTest6.5 (Manual);Ethernet – NDISTest6.5 (Manual);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82414
2308;RHEL7-82415;[WHQL][netkvm][WLK]Ethernet – NDISTest6.5 (MPE);Ethernet – NDISTest6.5 (MPE);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82415
2309;RHEL7-82416;[WHQL][netkvm][WLK]Ethernet – NDISTest6.5 (Wol and PM);Ethernet – NDISTest6.5 (Wol and PM);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82416
2310;RHEL7-82417;[WHQL][netkvm][WLK]Ethernet – NDISTest6.0 (priority);Ethernet – NDISTest6.0 (priority);Yu Wang (wyu);Critical;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-82417
2311;RHEL7-82743;AZURE-TC:[VMBUS]Check vmbus version and logs;AZURE-TC:[VMBUS]Check vmbus version and logs   ;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;" 1. Boot guest and check dmesg
 #dmesg|grep ""Vmbus version""
 
 
​​";"For Hyper-V 2012 R2 host, the vmbus version is 3.0:
 [    2.333471] hv_vmbus: Hyper-V Host Build:9600-6.3-18-0.18064; Vmbus version:3.0
 
 For Hyper-V 2016 host, the vmbus version is 4.0:
 hv_vmbus: Hyper-V Host Build:10514-10.0-0-0.0; Vmbus version:4.0 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-82743
2311;;;;;;;;;2;"2. Check vmbus related log
 #dmesg|grep -i vmbus";There is no error or fail messages;;RedHatEnterpriseLinux7/RHEL7-82743
2311;;;;;;;;;3;config ;​​;;RedHatEnterpriseLinux7/RHEL7-82743
2312;RHEL7-82744;AZURE-TC:[VMBUS]Verify interrupt distribution among all CPUs;AZURE-TC:[VMBUS]Verify interrupt distribution among all CPUs    ;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;1. Set guest with multiple CPUs and boot it up;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-82744
2312;;;;;;;;;2;"2. Check hyper-v related interrupts in /proc/interrupts, it could be processed across all CPUs. The hyper-v interrupts are marked with ""hyper-v"" or ""Hypervisor""
​​";"For a guest with 2 CPUs, 
 #cat /proc/interrupts |grep -i hyper
 HYP:     479646    2804411   Hypervisor callback interrupts";;RedHatEnterpriseLinux7/RHEL7-82744
2312;;;;;;;;;3;config ;​​;;RedHatEnterpriseLinux7/RHEL7-82744
2313;RHEL7-82745;AZURE-TC:[VMBUS]Unload hv_vmbus module in pre-udev emergency shell;"Bug 1201889
";Yaju Cao (yacao);Medium;Positive;Not Automated;;1;"For Gen1:
 1. Boot the kernel with rdbreak=pre-udev option

 For Gen2 
 1. Boot the kernel with rdbreak=pre-udev option
 You need to also add console=ttyS0 kernel option, remove 'rhgb quiet' in kernel command line of the VM, and use serial console to connect.

 Refer to https://mojo.redhat.com/docs/DOC-171022 to get access to guest serial console

";guest would boot into emergency shell;Test Case;RedHatEnterpriseLinux7/RHEL7-82745
2313;;;;;;;;;2;"
 2. In emergency shell load some hyper-v modules,
 e.g.
 modprobe hv_storvsc
 modprobe hv_vmbus

 Note: For Gen2, you should connect to serial console because no keyboard can be used for Generation 2 guest in pre-udev stage.
  
";Try for all loadable hyper-v modules;;RedHatEnterpriseLinux7/RHEL7-82745
2313;;;;;;;;;3;"3. Unload all hyper-v modules
 e.g. in the above case:
 rmmod hv_storvsc
 rmmod hv_vmbus

";No crash;;RedHatEnterpriseLinux7/RHEL7-82745
2313;;;;;;;;;4;4. Load some hyper-v modules again, e.g. modprobe hv_storvsc;No crash;;RedHatEnterpriseLinux7/RHEL7-82745
2314;RHEL7-82746;[Hyper-V][VMBUS]Stop kdump and trigger crash then verify there is event log on the host;;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;1. Install guest, stop kdump service;kdump is stopped;Test Case;RedHatEnterpriseLinux7/RHEL7-82746
2314;;;;;;;;;2;"2. Trigger system crash in the guest
 $echo c > /proc/sysrq-trigger ";system crash and kdump will not be triggered;;RedHatEnterpriseLinux7/RHEL7-82746
2314;;;;;;;;;3;"3. Login the host, and check Hyper-V worker event
 PS C:\> Get-WinEvent -FilterHashTable @
 {LogName =""Microsoft-Windows-Hyper-V*""; Id=18590} | Format-Table -Wrap
 
 e.g. Message lists as below from Powershell.
 ================================================
  xxx has encountered a fatal error.  The guest
 operating system reported that it failed with the following error
 codes: ErrorCode0: 0xFFFFFFFF813B7E96, ErrorCode1: 0xF,
 ErrorCode2: 0xFFFFFFFF81A06620, ErrorCode3: 0x0, ErrorCode4: 0x0.
 If the problem persists, contact Product Support for the guest
 operating system.  (Virtual machine ID
 35705B25-29E1-4973-9650-AA4235B34E25)
 =======================
 Console log from terminal after execute step2
 For 64-bit OS:
 [85.xxxxxx ] RIP： 0010:<fffffff813b7e96>
 RSP:0018
 RAX:00000000000000f
 RDX:00000000000000
 RBP:........
 R10:
 R13:........

 For 32-bit OS:
 EIP: 0060:[<c06c344f>] EFLAGS: 00010086 CPU: 1
 EAX: xxxxxxxx EBX: xxxxxxxx ECX: xxxxxxxx EDX: xxxxxxxx

 If cannot show full log, please use serial console log to check, and refer to https://mojo.redhat.com/docs/DOC-171022 
​​";"There should be an 18590 event for the guest crash.
 The ErrorCode in the event should be consistent with the vmcore info in the guest:
 For 64-bit OS:
 ErrorCode0=RIP
 ErrorCode1=RAX, 
 ErrorCode2=RBX, 
 ErrorCode3=RCX,
 ErrorCode4=RDX.

 For 32-bit OS:
 ErrorCode0=EIP
 ErrorCode1=EAX, 
 ErrorCode2=EBX, 
 ErrorCode3=ECX,
 ErrorCode4=EDX.

 Note: after trigger system crash 2 or 3 times in guest, the 18590 event will not be shown in host. After some hours(I am not sure how long this may take), trigger guest crash again and the 18590 event could show again. This is because Hyper-V do throttling to prevent flooding of the event log.
";;RedHatEnterpriseLinux7/RHEL7-82746
2315;RHEL7-82747;[VMBUS]Trigger kdump and verify there is related event log on the host;;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;"1. Install guest and start kdump service
 #systemctl start kdump
 #systemctl status kdump
";kdump is active;Test Case;RedHatEnterpriseLinux7/RHEL7-82747
2315;;;;;;;;;2;"2. Trigger system crash in the guest
 $echo c > /proc/sysrq-trigger ";system crash and kdump works, guest will reboot;;RedHatEnterpriseLinux7/RHEL7-82747
2315;;;;;;;;;3;"3. Login the host, and check Hyper-V worker event
 PS C:\> Get-WinEvent -FilterHashTable @
 {LogName =""Microsoft-Windows-Hyper-V*""; Id=18590} | Format-Table -Wrap


";"There should be an 18590 event for the guest crash.

 Note: after trigger system crash 2 or 3 times in guest, the 18590 event will not be shown in host. After some hours(I am not sure how long this may take), trigger guest crash again and the 18590 event could show again. This is because Hyper-V do throttling to prevent flooding of the event log.";;RedHatEnterpriseLinux7/RHEL7-82747
2315;;;;;;;;;4;"4, After guest reboot automatically, go to /var/crash to cat vmcore-demesg.txt.
 For 64-bit OS, check the registers value of RIP, RAX, RBX, RCX, RDX.
 For 32-bit OS, check the registers value of EIP, EAX, EBX, ECX, EDX.";" The ErrorCode in the event should be consistent with the vmcore info in the guest:
 For 64-bit OS:
 ErrorCode0=RIP
 ErrorCode1=RAX, 
 ErrorCode2=RBX, 
 ErrorCode3=RCX,
 ErrorCode4=RDX.
 
 For 32-bit OS:
 ErrorCode0=EIP
 ErrorCode1=EAX, 
 ErrorCode2=EBX, 
 ErrorCode3=ECX,
 ErrorCode4=EDX.
​​";;RedHatEnterpriseLinux7/RHEL7-82747
2316;RHEL7-82750;AZURE-TC:[General operation]CPU Offline is not supported;AZURE-TC:[General operation]CPU Offline is not supported;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;"Refer to bug: https://bugzilla.redhat.com/show_bug.cgi?id=1167380 
 Boot a guest with multiple vCPUs";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-82750
2316;;;;;;;;;2;"Try to offline some vCPU
 # echo 0 > /sys/devices/system/cpu/cpu1/online ";"vCPUs could not be offlined: ""-bash: echo: write error: Operation not permitted"". The guest could still work well.";;RedHatEnterpriseLinux7/RHEL7-82750
2316;;;;;;;;;3;config ;​​;;RedHatEnterpriseLinux7/RHEL7-82750
2317;RHEL7-82767;[Hyper-V][Network]Disable and enable TX checksum offload by TCP;Disable and enable TX checksum offload by TCP;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;"1. In guest1 (sender) on host1, make sure there is PV network adapter. Disable tx offload by ethtool
 # ethtool -K eth0 tx off
";"#ethtool -k eth0|grep tx
 tx-checksumming: off";Test Case;RedHatEnterpriseLinux7/RHEL7-82767
2317;;;;;;;;;2;"2. In guest2 (receiver) on host2, Make sure checksum offload is on. Yum install nmap-ncat(RHEL7)/ nc(RHEL6) and start nc listening
 # ethtool -k eth0|grep checksum
 # yum install nmap-ncat , nc
 # nc -l 2233 > data2
 # tcpdump -vvv -p -n -i eth0  host ${IPv4 address of guest1} and tcp
";"rx-checksumming: on
 tx-checksumming: on";;RedHatEnterpriseLinux7/RHEL7-82767
2317;;;;;;;;;3;"3. In guest1, yum install nmap-ncat, dd a 500MB size file named 'data1', and try to send the file to guest2 using 'nc'
 # nc ${IPv4 /IPv6 adress of guest2} 2233 < data1";The md5sum of data1 and data2 should be same;;RedHatEnterpriseLinux7/RHEL7-82767
2317;;;;;;;;;4;"4. In guest1, enable tx checksum again
 # ethtool -K eth0 tx on";"#ethtool -k eth0|grep tx
 tx-checksumming: on";;RedHatEnterpriseLinux7/RHEL7-82767
2317;;;;;;;;;5;5. Repeat step 3 and check file is sent to guest2 without error;The md5sum of data1 and data2 should be same;;RedHatEnterpriseLinux7/RHEL7-82767
2318;RHEL7-82768;[Hyper-V][Network]Disable and enable RX checksum offload by UDP;Disable and enable RX checksum offload, check UDP transport could work in both settings;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;1. In guest1 (sender) on host1, make sure there is PV network adapter. And Make sure checksum offload is on.;"rx-checksumming: on
 tx-checksumming: on";Test Case;RedHatEnterpriseLinux7/RHEL7-82768
2318;;;;;;;;;2;"2. In guest2 (receiver) on host2, make sure there is PV network adapter. Disable rx offload by ethtool
 # ethtool -K eth0 rx off";"#ethtool -k eth0|grep rx
 rx-checksumming: off";;RedHatEnterpriseLinux7/RHEL7-82768
2318;;;;;;;;;3;"3. In guest2 (receiver) on host2,  install nmap-ncat(RHEL7)/ nc(RHEL6) and start nc listening and start tcpdump in another terminal.
 # yum install nmap-ncat,nc
 # nc -ul 2233
 # tcpdump -vvv -p -n -i eth0  host ${IPv4 address of guest1} and udp";​​;;RedHatEnterpriseLinux7/RHEL7-82768
2318;;;;;;;;;4;"4. In guest1, yum install nmap-ncat, and try to send UDP data to guest2
 # nc -u ${IPv4 /IPv6 adress of guest2} 2233 
 Then type content in the same console";​​;;RedHatEnterpriseLinux7/RHEL7-82768
2318;;;;;;;;;5;"5. Check guest2 nc console output and tcpdump output 
";"The nc output of guest2 is the same as typed in guest1. 
 Most of tcpdump captured packets should be 'udp sum ok' (not all packet shown as 'bad udp cksum' )";;RedHatEnterpriseLinux7/RHEL7-82768
2318;;;;;;;;;6;"6. In guest2, enable rx checksum again
 #ethtool -K eth0 rx on";"#ethtool -k eth0|grep tx
 rx-checksumming: on";;RedHatEnterpriseLinux7/RHEL7-82768
2318;;;;;;;;;7;7. Repeat step 5 again and check;Most of tcpdump captured packets should be 'udp sum ok' (not all packet shown as 'bad udp cksum' );;RedHatEnterpriseLinux7/RHEL7-82768
2319;RHEL7-82776;AZURE-TC:[General operation][Performance]Do v7 test on guest;;Yaju Cao (yacao);Medium;Positive;Not Automated;467758;1;"Reference link for download package:
 Internal url:
 <http://qafiler.bos.redhat.com/testkits/V7/>
 Custumer portal:
 <ftp://partners.redhat.com/a166eabc5cf5df158922f9b06e5e7b21/hwcert/>
 1.download the v7 dependencies package from the above link(32bit as example):
 #dt
 wget <ftp://partners.redhat.com/a166eabc5cf5df158922f9b06e5e7b21/hwcert/RHEL5/
 dt/15.14/2.EL5/i386/dt-15.14-2.EL5.i386.rpm>
 #stress
 wget <ftp://partners.redhat.com/a166eabc5cf5df158922f9b06e5e7b21/hwcert/RHEL5/
 stress/0.18.8/1.3.EL5/i386/stress-0.18.8-1.3.EL5.i386.rpm>
 #lmbench
 wget <ftp://partners.redhat.com/a166eabc5cf5df158922f9b06e5e7b21/hwcert/RHEL5/
 lmbench/3.0a7/6.EL5/i386/lmbench-3.0a7-6.EL5.i386.rpm>
 #v7
 wget <ftp://partners.redhat.com/a166eabc5cf5df158922f9b06e5e7b21/hwcert/RHEL5/
 v7/1.5/32.el5/noarch/v7-1.5-32.el5.noarch.rpm>
 #v7 server
 wget <ftp://partners.redhat.com/a166eabc5cf5df158922f9b06e5e7b21/hwcert/RHEL5
 /v7/1.5/32.el5/noarch/v7-server-1.5-32.el5.noarch.rpm>";"1.after v7 testing,there will be no error message on the file
 /var/v7/results.xml";Test Case;RedHatEnterpriseLinux7/RHEL7-82776
2319;;;;;;;;;2;"2.update the repo
 vim /etc/yum.repos.d/rhel5.9.repo";​​;;RedHatEnterpriseLinux7/RHEL7-82776
2319;;;;;;;;;3;"3.yum -y installl gcc kernel-devel rpm-build
 #for v7 dependencies";​​;;RedHatEnterpriseLinux7/RHEL7-82776
2319;;;;;;;;;4;4.rpm -ivh dt,stress,lmbench;​​;;RedHatEnterpriseLinux7/RHEL7-82776
2319;;;;;;;;;5;"5.rpm -ivh v7,to the server,it need to be install v7-server other than v7,and
 set the server selinux as enforce
 #note:all the operation need to be done on both guest and host.for v7 server
 you may need to install more dependencies package,you can resolve by yum or
 download the package.";​​;;RedHatEnterpriseLinux7/RHEL7-82776
2319;;;;;;;;;6;"6.install the package for test :install the kernel-debuginfo package(client)
 # wget <http://download.englab.nay.redhat.com/pub/rhel/rel-
 eng/RHEL5.9-Server-20121010.1/tree-i386/Server/kernel-
 debug-2.6.18-343.el5.i686.rpm>
 wget
 <http://download.devel.redhat.com/brewroot/packages/kernel/2.6.18/343.el5/i686
 /kernel-debuginfo-common-2.6.18-343.el5.i686.rpm>";​​;;RedHatEnterpriseLinux7/RHEL7-82776
2319;;;;;;;;;7;"7.generate the plan on the guest(client)
 #v7 plan";​​;;RedHatEnterpriseLinux7/RHEL7-82776
2319;;;;;;;;;8;"8.v7 server start
 note:close down the iptables by service ip(6)tables stop";​​;;RedHatEnterpriseLinux7/RHEL7-82776
2319;;;;;;;;;9;"9.start to run v7
 #v7 certify --server=10.66.83.189";​​;;RedHatEnterpriseLinux7/RHEL7-82776
2319;;;;;;;;;10;"10.after a while,there will be a report on /var/v7/results.xml
 notes:some test you may need to disable as it unnecessary:cd-rom,etc,just for
 your requirements.";;;RedHatEnterpriseLinux7/RHEL7-82776
2320;RHEL7-82777;AZURE-TC:[General operation][Performance]Run autotest to test LTP;;Yaju Cao (yacao);Medium;Positive;Not Automated;467633;1;"1. Logon the guest
 2. Setup the beaker environment:
 1)  beaker client harness:
 # wget -O /etc/yum.repos.d/beaker-client.repo \
 <http://download.lab.bos.redhat.com/beakerrepos/beaker-client-RedHatEnterpriseLinux.repo>[Hyper-V][
 ](http://download.lab.bos.redhat.com/beakerrepos/beaker-client-RedHatEnterpriseLinux.repo)2) beaker-tasks:
 [Hyper-V][beaker-tasks]
 name=beaker-tasks
 baseurl=http://beaker.engineering.redhat.com/rpms
 gpgcheck=0
 3) rhel6
 [Hyper-V][rhel6.4]
 name=rhel6.4
 baseurl=http://download.englab.nay.redhat.com/pub/rhel/rel-eng/latest-RHEL-6/6.4/Server/i386/os/Server/
 enabled=1
 gpgcheck=0
 3.  # yum install kernel-kernel-distribution-ltp-generic
 (this should install all dependencies. but just in case, you'd better do extra step: `yum install rhts-devel rhts-test-env`)
 4. the test should be installed to /mnt/tests/kernek/distribution/ltp/generic
 (there might be a DNS resolving issue, you might fail to download LTP package, try
 # wget <http://download.englab.nay.redhat.com/pub/rhel/qa/rhts/lookaside/ltp-full-20120822.bz2>[Hyper-V][
 ](http://download.englab.nay.redhat.com/pub/rhel/qa/rhts/lookaside/ltp-full-20120822.bz2)to /mnt/tests/kernel/distribution/ltp/generic)
 5. install all LTP dependencies:
 # yum install @development procmail rsyslog sysklogd ntpdate util-linux util-linux-ng redhat-lsb bc kernel-headers kernel-devel libaio-devel libcap-devel numactl-devel libattr-devel
 note:if you cannot install the dependencies,you may add the wildcards to make it install ,for example *util-linux-ng*
 6. now execute: make run and LTP will start to compile and run:
 # cd /mnt/tests/kernel/distribution/ltp/generic
 # make run
 7. check the result under the directory ""/mnt/testarea/""";"1. At step 3, 4, 5, all the package install and download successfully
 2. At step 6, LTP start running
 7. Wait a certain time, the test result should PASS without any Traceback.";Test Case;RedHatEnterpriseLinux7/RHEL7-82777
2321;RHEL7-82778;AZURE-TC:[Network]Check network multiqueue number equals to the number of CPUs (P2);"AZURE-TC:[Network]Check network multiqueue number equals to the number of CPUs (P2)    
";Yaju Cao (yacao);Medium;Positive;Not Automated;467872;1;1. Prepare a VM(Standard_A2), set multiple CPUs, and add a pv network adapter.; ;Test Case;RedHatEnterpriseLinux7/RHEL7-82778
2321;;;;;;;;;2;"2. Login the guest, check the network queue number by
 #dmesg|grep -i ""real num""     (for rhel6)
 or
 #ls /sys/class/net/eth0/queues/(for rhel7)
 * If multiple NUMA node, the multiqueue should be per NUMA node(cpu/numa nodes)
";"At step 2, the queue number should be consistent with the CPU number. (rx and tx are 1 pair)
 [root@hv001 ~]# cat /proc/cpuinfo |grep processor
 processor       : 0
 processor       : 1
 If RHEL-6:
 [root@hv001 ~]# dmesg|grep -i ""real num""
 hv_netvsc vmbus_0_16: real num tx,rx queues:2, 2
 If RHEL-7:
 # ls /sys/class/net/eth0/queues/
 rx-0  rx-1  tx-0  tx-1
​​";;RedHatEnterpriseLinux7/RHEL7-82778
2321;;;;;;;;;3;config ;​​;;RedHatEnterpriseLinux7/RHEL7-82778
2322;RHEL7-82779;AZURE-TC:[Network]Check network packets could be scaled across CPUs in terms of hyperv interrupts;Get netperf by wget http://fileshare.englab.nay.redhat.com/pub/section1/s13rd/tools/netperf-2.4.5-1.el5.x86_64.rpm.;Yaju Cao (yacao);Medium;Positive;Not Automated;467873;1;1. Install netperf on two guests.;"At step4 and 6, the CPU interrupts could scale across different CPUs. For
 example, below is a 4 CPU guest, except CPU0, the CPU1/CPU2/CPU3 could both
 handle the network requested interrupts and keep balance.
 # cat /proc/interrupts |grep -i hyperv
 7:      43066    3032850     888487    7456236   IO-APIC-(null)    hyperv
 or Hypervisor callback interrupts.";Test Case;RedHatEnterpriseLinux7/RHEL7-82779
2322;;;;;;;;;2;"2. Set your test guest as server, make sure there is more than more CPU in
 this guest, for example, set 4 CPU
 #netserver 

 if cannot setart netserver, please use pkill netserver

";​​;;RedHatEnterpriseLinux7/RHEL7-82779
2322;;;;;;;;;3;"3. Login the other guest as client, send TCP_STREAM packets to the netserver
 #netperf -H ${IP address of your netserver} -l 500";​​;;RedHatEnterpriseLinux7/RHEL7-82779
2322;;;;;;;;;4;"4. Login the netserver, and check the CPU interrupts while netperf is running
 #cat /proc/interrupts |grep -i hyperv";​​;;RedHatEnterpriseLinux7/RHEL7-82779
2322;;;;;;;;;5;"5. Start another netperf thread in the client guest at the same time
 #netperf -H ${IP address of your netserver} -l 500";​​;;RedHatEnterpriseLinux7/RHEL7-82779
2322;;;;;;;;;6;"6. Login the netserver, and check the CPU interrupts again.
 #cat /proc/interrupts |grep -i hyperv";​​;;RedHatEnterpriseLinux7/RHEL7-82779
2323;RHEL7-82780;AZURE-TC:[Network]Ethtool: Check TSO is on by ethtool;"AZURE-TC:[Network]Ethtool: Check TSO is on by ethtool    
";Yaju Cao (yacao);Medium;Positive;Not Automated;467874;1;"1. Login the guest, check the pv network adapter features
 # ethtool -k eth0";"The tcp-segmentation-offload should be turned on by default,
 #ethtool -k eth0
 Features for eth0:
 rx-checksumming: on
 tx-checksumming: on
 scatter-gather: on
 tcp-segmentation-offload: on
 udp-fragmentation-offload: off
 generic-segmentation-offload: on
 generic-receive-offload: off
 large-receive-offload: off
 rx-vlan-offload: off
 tx-vlan-offload: on
 ntuple-filters: off
 receive-hashing: off";Test Case;RedHatEnterpriseLinux7/RHEL7-82780
2323;;;;;;;;;2;config ;​​;;RedHatEnterpriseLinux7/RHEL7-82780
2324;RHEL7-82781;AZURE-TC:[Network]Send TCP stream and check dmesg;;Yaju Cao (yacao);Medium;Positive;Not Automated;467878;1;"1. Install netperf on GUEST1  and GUEST2
 down load netperf from : http://fileshare.englab.nay.redhat.com/pub/section1/s13rd/tools/netperf-2.4.5-1.el5.x86_64.rpm  

 rpm -ivh netxxxx.rpm
 pkill netserver

";"At step 4, there should be no ""Buffer too small"" alike messages, and no other errors.
 Refer to [Hyper-V][Bug 1112076](https://bugzilla.redhat.com/show_bug.cgi?id=1112076) - [Hyper-V][Hyper-V][Hyper-V][RHEL6.6]Buffer too small when send TCP stream through pv network
 #  netperf -t TCP_STREAM -H 10.66.106.136 -l 60s
 TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.66.106.136 (10.66.106.136) port 0 AF_INET : histogram : interval
 Recv   Send    Send                          
 Socket Socket  Message  Elapsed              
 Size   Size    Size     Time     Throughput  
 bytes  bytes   bytes    secs.    10^6bits/sec  

  87380  16384  16384    60.00    11057.21   

";Test Case;RedHatEnterpriseLinux7/RHEL7-82781
2324;;;;;;;;;2;"2. start netserver on GUEST1
 #netserver";​​;;RedHatEnterpriseLinux7/RHEL7-82781
2324;;;;;;;;;3;"3. Run TCP stream test on GUEST2. Run netperf client in the GUEST2 to test TCP and note the output.
 #netperf -t TCP_STREAM -H GUEST1 -l 60s";​​;;RedHatEnterpriseLinux7/RHEL7-82781
2324;;;;;;;;;4;"4. Check GUEST1 and GUEST2 dmesg

 Note: Also can use iperf to test as below. 
 wget http://fileshare.englab.nay.redhat.com/pub/section1/s13rd/tools/iperf-2.0.5.tar.gz 
 ==============================================
 Steps to Reproduce:

 1.Install iperf, and configure iperf server on a guest
 #iperf -s
 2.Install iperf, and send TCP stream on another guest
 #iperf -c ${iperf server IP} -f m -t 100 3
 3.Watch iperf server console, or dmesg";​​;;RedHatEnterpriseLinux7/RHEL7-82781
2325;RHEL7-82786;AZURE-TC:[Network]Ethtool:Check scatter-gather is on by ethtool;AZURE-TC:[Network]Ethtool:Check scatter-gather is on by ethtool   ;Yaju Cao (yacao);Medium;Positive;Not Automated;467876;1;"1. Login the guest, check the pv network adapter features
 # ethtool -k eth0
 or
 # ethtool -k eth0 |grep scatter
";"Check scatter-gather  is turned on by default, like below:
 # ethtool -k eth0 |grep scatter
 scatter-gather: on
     tx-scatter-gather: on [fixed]
     tx-scatter-gather-fraglist: off [fixed]";Test Case;RedHatEnterpriseLinux7/RHEL7-82786
2325;;;;;;;;;2;config ;​​;;RedHatEnterpriseLinux7/RHEL7-82786
2326;RHEL7-82787;AZURE-TC:[Network]SCP a large file (> 5G) after MTU is set to 9000[MTU?????4074];AZURE-TC:[Network]SCP a large file (> 5G) after MTU is set to 9000[MTU?????4074];Yaju Cao (yacao);Medium;Positive;Not Automated;467877;1;"1. Prepare 2 VM(use the same vnet)
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-82787
2326;;;;;;;;;2;2. Set both guests network, change MTU to 9000. #  ifconfig eth0 mtu 9000 up;​​;;RedHatEnterpriseLinux7/RHEL7-82787
2326;;;;;;;;;3;"3. Scp a large file from one guest to the other. For example, you could dd a
 5GB file, then scp it.
 # dd if=/dev/zero of=/root/5gb bs=1000M count=5
 # scp 5gb guest2:/path";​​;;RedHatEnterpriseLinux7/RHEL7-82787
2326;;;;;;;;;4;4. Check if the large file could be transmitted to the targeted guest.;check file could be transmitted successfully.;;RedHatEnterpriseLinux7/RHEL7-82787
2326;;;;;;;;;5;config ;​​;;RedHatEnterpriseLinux7/RHEL7-82787
2327;RHEL7-82788;AZURE-TC:[Network]Ethtool: Check rx and tx-checksumming is on by ethtool;"AZURE-TC:[Network]Ethtool: Check rx and tx-checksumming is on by ethtool    
";Yaju Cao (yacao);Medium;Positive;Not Automated;467875;1;"1. Login the guest, check the pv network adapter features
 # ethtool -k eth0
 or
 # ethtool -k ethX |grep checksumming
";"# ethtool -k eth0 |grep checksumming
 rx-checksumming: on
 tx-checksumming: on
";Test Case;RedHatEnterpriseLinux7/RHEL7-82788
2327;;;;;;;;;2;config ;​​;;RedHatEnterpriseLinux7/RHEL7-82788
2328;RHEL7-82825;AZURE-TC:[Guest kdump]Triger kdump on different CPU in SMP guest;AZURE-TC:[Guest kdump]Triger kdump on different CPU in SMP guest;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;"1. Prepare A2 VM on Azure. Enable boot diagnostic and Basic metrics.
 Enable kdump:
 RHEL-6:
 # cat /etc/grub.conf
 kernel ... crashkernel=192M
 RHEL-7:
 # cat /etc/default/grub
 GRUB_CMDLINE_LINUX=""... crashkernel=192M""
 # grub2-mkconfig -o /boot/grub2/grub.cfg
 Then reboot the VM";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-82825
2328;;;;;;;;;2;"2. Start kdump service in the VM
 # kdumpctl restart
 # kdumpctl status
 Check the kernel parameter:
 # cat /proc/cmdline
";"Kdump service is started
 # kdumpctl status
 Kdump is operational
 The VM is boot with crashkernel parameter:
 # cat /proc/cmdline
 ...crashkernel=192M ";;RedHatEnterpriseLinux7/RHEL7-82825
2328;;;;;;;;;3;"3. Trigger kdump on CPU 0.
 # echo 1 > /proc/sys/kernel/sysrq
 # echo c > /proc/sysrq-trigger
";"kdump could be triggered successfully.
 VM can reboot automatically.
 After guest reboot, vmcore is generated
 # ls /var/crash/*/
 vmcore
";;RedHatEnterpriseLinux7/RHEL7-82825
2328;;;;;;;;;4;"3. Trigger kdump on CPU 1
 # echo 1 > /proc/sys/kernel/sysrq
 # echo ""echo c > /proc/sysrq-trigger"" > crash.sh && chmod +x crash.sh
 # taskset -c 1 ./crash.sh";"kdump could be triggered successfully.
 VM can reboot automatically.
 After guest reboot, vmcore is generated
 # ls /var/crash/*/
 vmcore";;RedHatEnterpriseLinux7/RHEL7-82825
2328;;;;;;;;;5;config ;​​;;RedHatEnterpriseLinux7/RHEL7-82825
2329;RHEL7-82834;[Network connections] check connections count for networks destroyed with active connections - bug 1002824;the connection number should be correct;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;Senario 1: hostdev;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;2;"1. # virsh net-dumpxml vf
 <network>
   <name>vf</name>
   <uuid>1cab0058-8b2e-4381-8191-597469c95288</uuid>
   <forward mode='hostdev' managed='yes'>
     <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x4'/>
     <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x5'/>
     <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x6'/>
   </forward>
 </network> 
 # virsh net-start vf
 Network vf started
";​​;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;3;"2. start a guest using this network
 # virsh dumpxml rhel | grep /interface -B5
      <interface type='network'>
       <mac address='52:54:00:5b:3c:08'/>
       <source network='vf'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
     <interface type='network'>
       <mac address='52:54:00:6c:fd:98'/>
       <source network='vf'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>

 # virsh start  rhel
 Domain rhel started
";​​;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;4;"3. check the connections, it is correct
 # virsh net-dumpxml vf
";"<network connections='2'>
   <name>vf</name>
   <uuid>1cab0058-8b2e-4381-8191-597469c95288</uuid>
   <forward mode='hostdev' managed='yes'>
     <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x4'/>
     <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x5'/>
     <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x6'/>
   </forward>
 </network>";;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;5;"4. destroy the network with active connections, then start it.
 # virsh net-destroy vf
 Network vf destroyed

 # virsh net-start vf
 Network vf started";​​;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;6;"5.  destroy the guest, and start it again
 # virsh destroy rhel7.2
 Domain rhel7.2 destroyed

 # virsh start rhel7.2";domain rhel7.2 started;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;7;"6. check the connections
 # virsh net-dumpxml vf";<network connections='2'>;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;8;Senario 2: using existing host bridge;​​;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;9;"1. create a bridge and add an physical interface to it
 # brctl show
 bridge name bridge id STP enabled interfaces
 br0 8000.1c6f6506bc81 no enp0s25
";​​;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;10;"2. define and start a network like this:
 # virsh net-dumpxml host-bridge
 <network>
   <name>host-bridge</name>
   <uuid>edbca012-18ee-46de-a3e4-5ffc6f3fe081</uuid>
   <forward mode='bridge'/>
   <bridge name='br0'/>
 </network>";​​;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;11;"3. prepare a guest using this network and start the guest
 # virsh dumpxml rhel7.3 | grep /interface -B5
     <interface type='network'>
       <mac address='52:54:00:d5:e3:63'/>
       <source network='host-bridge'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 # virsh start rhel7.3
 Domain rhel7.3 started";​​;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;12;"4.   You will got ""connections=1"" for the network
 # virsh net-dumpxml host-bridge
";"<network connections='1'>
   <name>host-bridge</name>
   <uuid>edbca012-18ee-46de-a3e4-5ffc6f3fe081</uuid>
   <forward mode='bridge'/>
   <bridge name='br0'/>
 </network>";;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;13;"5. destroy the network with connections, the start it again
 # virsh net-destroy host-bridge
 Network host-bridge destroyed

 # virsh net-start host-bridge
 Network host-bridge started
";​​;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;14;"6. destroy the guest, then start it again
 # virsh destroy rhel7.3
 Domain rhel7.3 destroyed

 # virsh start rhel7.3
";Domain rhel7.3 started;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;15;"7. # virsh net-dumpxml host-bridge
";"<network connections='1'>
   <name>host-bridge</name>
   <uuid>edbca012-18ee-46de-a3e4-5ffc6f3fe081</uuid>
   <forward mode='bridge'/>
   <bridge name='br0'/>
 </network>";;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;16;"Scenario 3: macvtap network
 1. start such network
 # virsh net-dumpxml direct_macvtap
 <network>
   <name>direct_macvtap</name>
   <uuid>4c4c1922-feb9-40c9-a5a9-74d2d61d84d9</uuid>
   <forward dev='enp1s0' mode='bridge'>
     <interface dev='enp1s0'/>
   </forward>
 </network>";​​;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;17;"2. start a guest with interface like below
    <interface type='network'>
       <mac address='52:54:00:8e:39:54'/>
       <source network='direct_macvtap'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
     <interface type='network'>
       <mac address='52:54:00:5a:7f:73'/>
       <source network='direct_macvtap'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>

 # virsh start rhel";​​;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;18;"3. check the connections
 # virsh net-dumpxml direct_macvtap
";"<network connections='2'>
";;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;19;"4. destroy the network, then destroy the guest
 # virsh net-destroy direct_macvtap; virsh destroy rhel
 Network direct_macvtap destroyed

 Domain rhel destroyed";​​;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;20;"5. start the network, then start the guest
 # virsh net-start direct_macvtap; virsh start rhel
 Network direct_macvtap started

 Domain rhel started
";​​;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;21;"6. check connections
 # virsh net-dumpxml direct_macvtap

";should be <network connections='2'>, currently the bug is not fixed yet on libvirt-3.7.0-2.el7.x86_64;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;22;"Scenario 4: nat network
 # virsh net-dumpxml default
 <network>
   <name>default</name>
   <uuid>2ac891c3-f73c-4feb-8aaa-392c63a6fcc0</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:7c:53:91'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
     </dhcp>
   </ip>
 </network>";​​;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;23;"2. start a guest with 2 interfaces connected to the network
 # virsh dumpxml rhel | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:8e:39:54'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
     <interface type='network'>
       <mac address='52:54:00:5a:7f:73'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet1'/>
       <model type='rtl8139'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;24;# virsh net-dumpxml default;<network connections='2'>;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;25;"# virsh net-destroy default ; virsh destroy rhel";​​;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;26;"# virsh net-start default; virsh start rhel";​​;;RedHatEnterpriseLinux7/RHEL7-82834
2329;;;;;;;;;27;# virsh net-dumpxml default;<network connections='2'>;;RedHatEnterpriseLinux7/RHEL7-82834
2330;RHEL7-82840;Keep the libvirtd running when connection exists-- bug1315606 1297690;"Keep the libvirtd running when connection existes
";Yan Fu (yafu);Medium;Positive;Not Automated;;1;"1.Reinstall libvirt: 
 #yum -y reinstall libvirt*
 
 2.Login host with a non-root user and touch a file for testing:
 $cat bz1240283.py#!/usr/bin/python
# See:
# https://bugzilla.redhat.com/show_bug.cgi?id=1240283#c8

import libvirt
import sys
import os
import time

if os.geteuid() == 0:
    print ""Run this program as NON-root""
    sys.exit (1)

conn = libvirt.openReadOnly(None)
if conn == None:
    print ""Unexpected error opening libvirt connection""
    sys.exit (1)
caps = conn.getCapabilities()
if caps == None:
    print ""Unexpected error getting capabilities the first time""
    sys.exit (1)

time.sleep (60)

caps = conn.getCapabilities()
print ""NOT reproduced RHBZ#1240283
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-82840
2330;;;;;;;;;2;"3. Authorize execute permission to it
 $chmod u+x bz1240283.py
​​";​​;;RedHatEnterpriseLinux7/RHEL7-82840
2330;;;;;;;;;3;"4.Execute the file
 $./bz1240283.py
​​";"NOT reproduced RHBZ#1240283
 
 There should no errorslike:
 libvirt: XML-RPC error : Cannot write data: Broken pipe Traceback (most recent call last): File ""./bz1240283.py"", line 25, in <module> caps = conn.getCapabilities() File ""/usr/lib64/python2.7/site-packages/libvirt.py"", line 3735, in getCapabilities if ret is None: raise libvirtError ('virConnectGetCapabilities() failed', conn=self) libvirt.libvirtError: Cannot write data: Broken pipe
​​";;RedHatEnterpriseLinux7/RHEL7-82840
2330;;;;;;;;;4;"Test with libguestfs:
 <pre>1.Reinstall libvirt:
#yum -y reinstall libvirt*

2.Clean caches: #echo 3 > /proc/sys/vm/drop_caches

3.Run libguestfs-test-tool with non-root:
$libguestfs-test-tool";3.no error output.;;RedHatEnterpriseLinux7/RHEL7-82840
2331;RHEL7-82841;set max_clients in libvirtd.conf;"Set max_clients.
";Yan Fu (yafu);Medium;Positive;Not Automated;;1;" 1.Set max_clients/max_anonymous_clients in the config file(cp /etc/libvirt/libvirtd.conf to $HOME/.config/libvirtd.conf, then modify it):
 max_clients = 2
 max_anonymous_clients = 2 
 max_workers=2
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-82841
2331;;;;;;;;;2;"2.Start libvirtd process:
 $ libvirtd
 2017-01-03 05:06:08.412+0000: 8088: info : libvirt version: 2.0.0, package: 10.el7_3.2 (Red Hat, Inc. <http://bugzilla.redhat.com/bugzilla>, 2016-11-10-04:43:57, x86-034.build.eng.bos.redhat.com)
 2017-01-03 05:06:08.412+0000: 8088: info : hostname: yafu-laptop
 2017-01-03 05:06:08.412+0000: 8088: debug : virLogParseOutputs:1191 : outputs=1:syslog:libvirtd 1:file:/tmp/libvirtd.log
 2017-01-03 05:06:08.416+0000: 8088: debug : virLogParseOutput:1097 : output=1:syslog:libvirtd
 2017-01-03 05:06:08.447+0000: 8102: debug : virFileClose:102 : Closed fd 3
 2017-01-03 05:06:08.447+0000: 8102: debug : virFileClose:102 : Closed fd 6
 2017-01-03 05:06:08.447+0000: 8102: debug : virFileClose:102 : Closed fd 7
 2017-01-03 05:06:08.447+0000: 8102: debug : virFileClose:102 : Closed fd 8
 2017-01-03 05:06:08.447+0000: 8102: debug : virFileClose:102 : Closed fd 9
 2017-01-03 05:06:08.447+0000: 8102: debug : virFileClose:102 : Closed fd 10
 2017-01-03 05:06:08.447+0000: 8102: debug : virFileClose:102 : Closed fd 11
 2017-01-03 05:06:08.447+0000: 8102: debug : virFileClose:102 : Closed fd 12
 ...
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-82841
2331;;;;;;;;;3;"3.Open three terminal, all connect to the libvirtd:
 $ virsh 
 Welcome to virsh, the virtualization interactive terminal.
 
 Type:  'help' for help with commands
        'quit' to quit
 
 virsh # list
 
​​";"3.Two virsh client connects to libvirtd correcty, the third one can not connect correctly since exceeds the max_clients.
​​";;RedHatEnterpriseLinux7/RHEL7-82841
2331;;;;;;;;;4;"4.Check the libvirtd log:
 $ cat /tmp/libvirtd.log | grep -i max
​​";"4.From the log can see the max_clients reaches 2:
 $ cat /tmp/libvirtd.log | grep -i max
 2017-01-03 05:06:15.774+0000: 8088: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=1 nclients_max=2 nclients_unauth=0 nclients_unauth_max=2
 2017-01-03 05:06:22.129+0000: 8088: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=2 nclients_max=2 nclients_unauth=0 nclients_unauth_max=2
​​";;RedHatEnterpriseLinux7/RHEL7-82841
2332;RHEL7-82842;Set max_anonymous_clients in libvirtd.conf;"Set max_anonymous_clients
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1. concurrent starting 20 guests
 $for i in {1..20}; do virsh start 'testvm'$i & done 
 All the lxc containers are started, no error in libvirtd.log. And from the libvirtd.log, the 'max_anonymous_clients' works 
 
​​";"All the lxc containers are started, no error in libvirtd.log. And from the libvirtd.log, the 'max_anonymous_clients' works
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-82842
2332;;;;;;;;;2;"2.Check the log:
 $grep virNetServerCheckLimits /tmp/libvirtd.log
​​";"#grep virNetServerCheckLimits /var/log/libvirt/libvirtd.log
 2016-08-31 06:33:37.783+0000: 15188: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=1 nclients_max=10 nclients_unauth=1 nclients_unauth_max=2
 2016-08-31 06:33:37.783+0000: 15188: info : virNetServerCheckLimits:272 : Re-enabling services
 2016-08-31 06:33:37.795+0000: 15188: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=2 nclients_max=10 nclients_unauth=2 nclients_unauth_max=2
 2016-08-31 06:33:37.795+0000: 15188: info : virNetServerCheckLimits:266 : Temporarily suspending services
 2016-08-31 06:33:37.799+0000: 15189: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=2 nclients_max=10 nclients_unauth=1 nclients_unauth_max=2
 ........
 2016-08-31 06:33:37.848+0000: 15188: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=10 nclients_max=10 nclients_unauth=2 nclients_unauth_max=2
 2016-08-31 06:33:37.848+0000: 15188: info : virNetServerCheckLimits:266 : Temporarily suspending services
 2016-08-31 06:33:37.850+0000: 15192: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=10 nclients_max=10 nclients_unauth=1 nclients_unauth_max=2
 ...";;RedHatEnterpriseLinux7/RHEL7-82842
2333;RHEL7-82843;[libvirtd][config]Set max_anonymous_clients to a valid value;Set max_anonymous{comment:32}{comment:50};Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1. concurrent starting 20 guests
 #for i in {1..20}; do virsh start 'testvm'$i & done 
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-82843
2333;;;;;;;;;2;"2.Check the log:
 #grep virNetServerCheckLimits /var/log/libvirt/libvirtd.log
​​";"2.The max value of nclients_unauth=2
 #grep virNetServerCheckLimits /var/log/libvirt/libvirtd.log
 2016-08-31 06:33:37.783+0000: 15188: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=1 nclients_max=10 nclients_unauth=1 nclients_unauth_max=2
 2016-08-31 06:33:37.783+0000: 15188: info : virNetServerCheckLimits:272 : Re-enabling services
 2016-08-31 06:33:37.795+0000: 15188: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=2 nclients_max=10 nclients_unauth=2 nclients_unauth_max=2
 2016-08-31 06:33:37.795+0000: 15188: info : virNetServerCheckLimits:266 : Temporarily suspending services
 2016-08-31 06:33:37.799+0000: 15189: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=2 nclients_max=10 nclients_unauth=1 nclients_unauth_max=2
 ........
 2016-08-31 06:33:37.848+0000: 15188: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=10 nclients_max=10 nclients_unauth=2 nclients_unauth_max=2
 2016-08-31 06:33:37.848+0000: 15188: info : virNetServerCheckLimits:266 : Temporarily suspending services
 2016-08-31 06:33:37.850+0000: 15192: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=10 nclients_max=10 nclients_unauth=1 nclients_unauth_max=2
 ...";;RedHatEnterpriseLinux7/RHEL7-82843
2334;RHEL7-82844;[sVirt][selinux][device] Hotplug disks with different seclabel;"Test matrix:
 
image_label | relabel | type | Negative/Positive | labe for refer to
svirt_content | yes | dynamic | P | system_u:object_r:virt_content_t:s0
svirt_content | yes | static | P | system_u:object_r:virt_content_t:s0
svirt_content | no | static | N | system_u:object_r:virt_content_t:s0
svirt_image_s0 | no | static | P | system_u:object_r:svirt_image_t:s0
svirt_image_s0 | yes | static | P | system_u:object_r:svirt_image_t:s0
svirt_image_s0 | yes | dynamic | P | system_u:object_r:svirt_image_t:s0
svirt_image_MCS1 | no | static | P | system_u:object_r:svirt_image_t:s0:c696,c821
svirt_image_MCS1 | yes | static | P | system_u:object_r:svirt_image_t:s0:c696,c821
svirt_image_MCS2 | yes | dynamic | P | system_u:object_r:svirt_image_t:s0:c696,c821";Yan Fu (yafu);Critical;Positive;Automated;;1;"1.Prepare the guest xml matching the seclabel setting in the test matrix:
 <seclabel model=""selinux"" relabel=""no"" type=""static"">
 <label>system_u:system_r:svirt_t:s0:c87,c520</label>
 </seclabel>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-82844
2334;;;;;;;;;2;"2.Relabel the guest disk image if the relabel is ""no"":
 #setfattr --name security.selinux --value ""system_u:object_r:svirt_image_t:s0"" /var/lib/libvirt/images/generic.qcow2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-82844
2334;;;;;;;;;3;"3.Start the guest:
 #virsh start rhel7.3
​​";​​;;RedHatEnterpriseLinux7/RHEL7-82844
2334;;;;;;;;;4;"4.Prepare the disk to hotplug:
 #qemu-img create -f qcwo2 /var/lib/libvirt/images/hotplug.qcow2 10M
​​";​​;;RedHatEnterpriseLinux7/RHEL7-82844
2334;;;;;;;;;5;"5.Relabel the image file mapping the ""image_label"" in the test matrix if the relabel is ""no"" in the xml setting (please change the selinx context according to the ""image_label in the matrix):
 #setfattr --name security.selinux --value ""system_u:object_r:svirt_image_t:s0"" /var/lib/libvirt/images/hotplug.img
​​";​​;;RedHatEnterpriseLinux7/RHEL7-82844
2334;;;;;;;;;6;"6.Attach the disk to the guest:
 #virsh attack-disk rhel7.3 /var/lib/libvirt/images/hotplug.qcow2 vdb
​​";"6.
 For positive test,disk attached to guest correctly.
 For negative test, disk attached to guest failed with error:
 # virsh attach-disk rhel7.3 /usr/share/avocado/data/test.img vdb
 error: Failed to attach disk
 error: internal error: unable to execute QEMU command '__com.redhat_drive_add': Device 'drive-virtio-disk1' could not be initialized
 
​​";;RedHatEnterpriseLinux7/RHEL7-82844
2334;;;;;;;;;7;"7.Check the attached disk in the guest for the positive test:
 #virsh domblklist rhel7.3-min
​​";"7.
 Target     Source
 ------------------------------------------------
 sda        /nfs-images/yafu/rhel7.2.qcow2
 sdb        /var/lib/libvirt/images/test.img";;RedHatEnterpriseLinux7/RHEL7-82844
2334;;;;;;;;;8;"8.Repeat steps1-7 to test all the matrix in the description
​​";​​;;RedHatEnterpriseLinux7/RHEL7-82844
2335;RHEL7-82845;[attach-interface] Attach interface with wrong option;negtive test;Yalan Zhang (yalzhang);Medium;Negative;Automated;;1;" attach-interface  and detach-interface
 the right command is: # virsh attach-interface rhel7.3 network default
 the one used in this case:
 # virsh attach-interface $domain $type default
"; ;Test Case;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;2;"prepare a running domain
 # virsh list 
  Id    Name                           State
 ----------------------------------------------------
  23    rhel                           running
";​​;;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;3;"$domain
 1. """" (none, do not specify any hostname or uuid)";​​;;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;4;"# virsh attach-interface """" network default";error: Failed to get option 'domain': Option argument is empty;;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;5;"2. ""hex_domid"" (wrong domain id)";​​;;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;6;"# virsh attach-interface 0x17 network default
";"error: failed to get domain '0x17'
 error: Domain not found: no domain with matching name '0x17'";;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;7;"3. ""9999-9999-9999-9999-9999"" (wrong uuid)";​​;;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;8;"# virsh attach-interface 9999-9999-9999-9999-9999 network default
";"error: failed to get domain '9999-9999-9999-9999-9999'
 error: Domain not found: no domain with matching name '9999-9999-9999-9999-9999'";;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;9;"4. ""domname"" (wrong domname)";​​;;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;10;"# virsh attach-interface test network default
";"error: failed to get domain 'test'
 error: Domain not found: no domain with matching name 'test'";;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;11;"$ type
 1. ""xyz""
";​​;;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;12;"# virsh attach-interface rhel xyz default
";error: No support for xyz in command 'attach-interface';;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;13;"2. """"";​​;;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;14;"# virsh attach-interface rhel """" default
";error: Failed to get option 'type': Option argument is empty;;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;15;scenario 2: attach with script;​​;;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;16;"""--script=xyz""";​​;;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;17;"# virsh attach-interface rhel network default --script=xyz
";"error: Failed to attach interface
 error: unsupported configuration: scripts are not supported on interfaces of type network";;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;18;scenario 3: vm is shutoff;​​;;RedHatEnterpriseLinux7/RHEL7-82845
2335;;;;;;;;;19;"# virsh destroy rhel
 Domain rhel destroyed

 # virsh attach-interface rhel network default ";"error: Failed to attach interface
 error: Requested operation is not valid: domain is not running";;RedHatEnterpriseLinux7/RHEL7-82845
2336;RHEL7-82848;[attach-interface] Attach and detach interface with domid, domname and domuuid;attach/ detach interface by domid, uuid, domname;Yalan Zhang (yalzhang);Medium;Positive;Automated;;1;"scenario 1: 
 # virsh attach-interface $domain network default
 domid
 uuid
 domname
 then detach";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;2;"# virsh list
  Id    Name                           State
 ----------------------------------------------------
  23    rhel                           running

 # virsh domuuid rhel
 688a2be2-9a98-43d9-ba91-ac98644afe20

 from above commands got the domid is 23, domuuid and domname, they will be used in below steps";​​;;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;3;"1. guest is running, attach interface by id
 # virsh attach-interface 23 network default --mac 52:54:00:13:27:55
";Interface attached successfully;;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;4;# virsh dumpxml 23 | grep -A6 -B1 52:54:00:13:27:55;"   <interface type='network'>
       <mac address='52:54:00:13:27:55'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;5;"login the guest to check the interface exists
 # ifconfig -a

";"ens3: flags=4098<BROADCAST,MULTICAST>  mtu 1500
         ether 52:54:00:13:27:55  txqueuelen 1000  (Ethernet)
         RX packets 0  bytes 0 (0.0 B)
         RX errors 0  dropped 0  overruns 0  frame 0
";;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;6;"2. attach by domname
 #  virsh attach-interface rhel network default --mac 52:54:00:13:27:66
";Interface attached successfully;;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;7;"# virsh dumpxml rhel | grep -A6 -B1 52:54:00:13:27:66
  
";"  <interface type='network'>
       <mac address='52:54:00:13:27:66'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet1'/>
       <model type='rtl8139'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
";;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;8;"login the guest to check the interface exists
 # ifconfig  -a ";"ens9: flags=4098<BROADCAST,MULTICAST>  mtu 1500
         ether 52:54:00:13:27:66  txqueuelen 1000  (Ethernet)
         RX packets 0  bytes 0 (0.0 B)
         RX errors 0  dropped 0  overruns 0  frame 0

 ....
 (the interface exists, identify the interface by mac address)";;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;9;"3. attach by uuid
 #  virsh attach-interface 688a2be2-9a98-43d9-ba91-ac98644afe20 network default --mac 52:54:00:13:27:77
";Interface attached successfully;;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;10;"# virsh dumpxml rhel | grep -A6 -B1 52:54:00:13:27:77

";"    <interface type='network'>
       <mac address='52:54:00:13:27:77'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet2'/>
       <model type='rtl8139'/>
       <alias name='net2'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0a' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;11;login guest to check the interface exists;"ens10: flags=4098<BROADCAST,MULTICAST>  mtu 1500
         ether 52:54:00:13:27:77  txqueuelen 1000  (Ethernet)
         RX packets 0  bytes 0 (0.0 B)
         RX errors 0  dropped 0  overruns 0  frame 0
";;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;12;"# virsh detach-interface rhel network  52:54:00:13:27:77
 Interface detached successfully

 # virsh detach-interface 23 network  52:54:00:13:27:66
 Interface detached successfully

 # virsh detach-interface 688a2be2-9a98-43d9-ba91-ac98644afe20  network  52:54:00:13:27:55
 Interface detached successfully
";the command return successfully detached;;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;13;"# virsh dumpxml rhel  | grep /interface
 #";no interface exists;;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;14;"# ifconfig -a

";"lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
         inet 127.0.0.1  netmask 255.0.0.0
         inet6 ::1  prefixlen 128  scopeid 0x10<host>
         loop  txqueuelen 1  (Local Loopback)
         RX packets 0  bytes 0 (0.0 B)
 (all interface detached, only lo in guest)";;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;15;scenario 2: bridge type interface;​​;;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;16;"# virsh attach-interface $domain bridge $(existing bridge)
 1. domid
 2. uuid
 3. domname
 then detach";​​;;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;17;"prepare a bridge by 
 # virsh iface-bridge eno1 br0 --no-stp";​​;;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;18;"change all the attach-interface command in scenario 1: 
 ""virsh attach-interface domid/domuuid/domname network default --mac 52:54:00:13:27:55""
 to 
 ""virsh attach-interface domid/domuuid/domname bridge br0 --mac 52:54:00:13:27:55""";all commands should succeed and check on guest the interface is attached;;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;19;scenario 2: domain is paused;​​;;RedHatEnterpriseLinux7/RHEL7-82848
2336;;;;;;;;;20;same with scenario 1;"attach interface to a paused vm, equal to running vm, the device will appear immediately in the vm
 detach interface from a paused vm, the device will be dropped after the vm resumed.";;RedHatEnterpriseLinux7/RHEL7-82848
2337;RHEL7-82850;[sVirt][selinux]define guest with different image_label;"Test matrix:
 
image_label | relabel | type | Negative/Positive
svirt_content | yes | dynamic | P
svirt_content | yes | static | P
svirt_content | no | static | N
svirt_image_s0 | no | static | P
svirt_image_s0 | yes | static | P
svirt_image_s0 | yes | dynamic | P
svirt_image_MCS1 | no | static | P
svirt_image_MCS1 | yes | static | P
svirt_image_MCS2 | yes | dynamic | P
";Yan Fu (yafu);High;Positive;Automated;;1;"  1.Prepare a domain xml and relabel the image matching the matrix table
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-82850
2337;;;;;;;;;2;  2.Define the guest with the xml;"2.The result should be matchingthe matrix table
​​";;RedHatEnterpriseLinux7/RHEL7-82850
2338;RHEL7-82853;[sVirt][none]svirt test with virt_clone;"Test matrix:
 
image_label | relabel | type | Negative/Positive | labe for refer to
svirt_content | yes | dynamic | P | system_u:object_r:virt_content_t:s0
svirt_content | yes | static | P | system_u:object_r:virt_content_t:s0
svirt_content | no | static | P | system_u:object_r:virt_content_t:s0
svirt_image_s0 | no | static | P | system_u:object_r:svirt_image_t:s0
svirt_image_s0 | yes | static | P | system_u:object_r:svirt_image_t:s0
svirt_image_s0 | yes | dynamic | P | system_u:object_r:svirt_image_t:s0
svirt_image_MCS1 | no | static | P | system_u:object_r:svirt_image_t:s0:c696,c821
svirt_image_MCS1 | yes | static | P | system_u:object_r:svirt_image_t:s0:c696,c821
svirt_image_MCS2 | yes | dynamic | P | system_u:object_r:svirt_image_t:s0:c696,c821
";Yan Fu (yafu);Medium;Positive;Automated;;1;" 1.Prepare a guest matching the label in the test matrix
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-82853
2338;;;;;;;;;2;"2.Execute the virt-clone
 #virt-clone --original vm1 --name vm1-clone --auto-clone
​​";"2.Should clone the guest correctly and the guest cloned works correctly.
​​";;RedHatEnterpriseLinux7/RHEL7-82853
2339;RHEL7-82878;WALA-TC: [Network] Check DNS;WALA-TC: [Network] Check DNS;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"1. Create a new VM on Azure with NetworkManager enabled.
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-82878
2339;;;;;;;;;2;"2. Check FQDN:
 # hostname -f
​​";"FQDN is correct: hostname.domain-name
 # hostname -f
 wala73220e.wala73220e.i6.internal.cloudapp.net";;RedHatEnterpriseLinux7/RHEL7-82878
2339;;;;;;;;;3;"3. Search domain name in the DNS server
 3.1 Get domain name from /etc/resolv.conf:
 # cat /etc/resolv.conf|grep search
 3.2 [RHEL-7 only]Check if dhclient sent hostname to DHCP server:
 # cat /var/lib/NetworkManager/dhclient-eth0.conf |grep send
 3.3 Check DNS:
 # nslookup [hostname.domain-name]
​​";"3.1
 # cat /etc/resolv.conf |grep search
 search wala73220e.i6.internal.cloudapp.net
 3.2 [RHEL-7 only]There's ""send host-name"" line. The hostname value is correct.
 # cat /var/lib/NetworkManager/dhclient-eth0.conf |grep send
 send host-name ""wala73220e""; # added by NetworkManager
 3.3 Can get IP address, and the value is correct.
 # nslookup wala73220e.wala73220e.i6.internal.cloudapp.net
 Server:        168.63.129.16
 Address:    168.63.129.16#53
 
 Name:    wala73220e.wala73220e.i6.internal.cloudapp.net
 Address: 10.0.0.5
​​";;RedHatEnterpriseLinux7/RHEL7-82878
2339;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-82878
2340;RHEL7-82880;WALA-TC: [Network] Check if change hostname can change DNS;WALA-TC: [Network] Check if change hostname can change DNS;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"1. Create a new VM on Azure
 ""MonitorHostName"" in waagent.conf is enabled.
 RHEL-7:
 NetworkManager enabled.
​​";"# cat /etc/waagent.conf|grep MonitorHostName
 Provisioning.MonitorHostName=y";Test Case;RedHatEnterpriseLinux7/RHEL7-82880
2340;;;;;;;;;2;"2. Change oldhostname to newhostname
 RHEL-7:
 # hostnamectl set-hostname newhostname
 RHEL-6:
 # hostname newhostname
​​";"Can change hostname:
 # hostname
 newhostname
​​";;RedHatEnterpriseLinux7/RHEL7-82880
2340;;;;;;;;;3;"3. Wait for 5 seconds.
 3.1 Check if new hostname is added into DNS:
 # nslookup [newhostname.domain-name]
 3.2 Check if old hostname is removed from DNS:
 # nslookup [oldhostname.domain-name]
​​";"3.1
 # nslookup newhostname.wala73220e.i6.internal.cloudapp.net
 Server:        168.63.129.16
 Address:    168.63.129.16#53
 
 Name:    newhostname.wala73220e.i6.internal.cloudapp.net
 Address: 10.0.0.5
 3.2
 # nslookup oldhostname.wala73220e.i6.internal.cloudapp.net
 Server:        168.63.129.16
 Address:    168.63.129.16#53
 
 ** server can't find oldhostname.wala73220e.i6.internal.cloudapp.net: NXDOMAIN";;RedHatEnterpriseLinux7/RHEL7-82880
2340;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-82880
2341;RHEL7-82881;WALA-TC: [Network] Change hostname several times and check DNS;WALA-TC: [Network] Change hostname several times and check DNS;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"1. Change different hostnames 5 times rapidly in 5 seconds. Wait for 5 seconds.
 # hostnamectl set-hostname newhostname1
 # hostnamectl set-hostname newhostname2
 # hostnamectl set-hostname newhostname3
 # hostnamectl set-hostname newhostname4
 # hostnamectl set-hostname newhostname5";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-82881
2341;;;;;;;;;2;"2. Check DNS
 2.1 Check if the last hostname is added into DNS:
 # nslookup [newhostname5.domain-name]
 2.2 Check if other hostnames are not in the DNS:
 # nslookup [newhostname1.domain-name]
 # nslookup [newhostname2.domain-name]
 # nslookup [newhostname3.domain-name]
 # nslookup [newhostname4.domain-name]";"The newhostname5 is added into DNS. All the other hostnames are not in DNS.
 
 # nslookup newhostname5.wala73220e.i6.internal.cloudapp.net
 Server:        168.63.129.16
 Address:    168.63.129.16#53
 
 Name:    newhostname5.wala73220e.i6.internal.cloudapp.net
 Address: 10.0.0.5
 
 # nslookup newhostname1.wala73220e.i6.internal.cloudapp.net
 Server:        168.63.129.16
 Address:    168.63.129.16#53
 
 ** server can't find newhostname1.wala73220e.i6.internal.cloudapp.net: NXDOMAIN
 ......";;RedHatEnterpriseLinux7/RHEL7-82881
2341;;;;;;;;;3;"* Can use this script to run this test case:
 #!/bin/bash
 HOST=""newhostname""
 for i in `seq 5`
 do
     cmd=""hostnamectl set-hostname $HOST$i""
     echo $cmd
     $cmd
 #    hostnamectl set-hostname $HOST$i
 done
 sleep 10
 for i in `seq 5`
 do
     nslookup $HOST$i
 done
​​";"hostnamectl set-hostname newhostname1
 hostnamectl set-hostname newhostname2
 hostnamectl set-hostname newhostname3
 hostnamectl set-hostname newhostname4
 hostnamectl set-hostname newhostname5
 Server:        168.63.129.16
 Address:    168.63.129.16#53
 
 ** server can't find newhostname1: NXDOMAIN
 
 Server:        168.63.129.16
 Address:    168.63.129.16#53
 
 ** server can't find newhostname2: NXDOMAIN
 
 Server:        168.63.129.16
 Address:    168.63.129.16#53
 
 ** server can't find newhostname3: NXDOMAIN
 
 Server:        168.63.129.16
 Address:    168.63.129.16#53
 
 ** server can't find newhostname4: NXDOMAIN
 
 Server:        168.63.129.16
 Address:    168.63.129.16#53
 
 Name:    newhostname5.wala72ondasm2204a.b1.internal.cloudapp.net
 Address: 172.29.0.4
​​";;RedHatEnterpriseLinux7/RHEL7-82881
2341;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-82881
2342;RHEL7-82882;WALA-TC: [Network] Check if use nmcli to change hostname can change DNS;WALA-TC: [Network] Check if use nmcli to change hostname can change DNS;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"1. Prepare a VM on Azure with NetworkManager enabled.
 ""MonitorHostName"" in waagent.conf is enabled.";"# cat /etc/waagent.conf|grep MonitorHostName
 Provisioning.MonitorHostName=y
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-82882
2342;;;;;;;;;2;"2. Change oldhostname to newhostname through nmcli:
 # nmcli gen hostname newhostname
​​";​​;;RedHatEnterpriseLinux7/RHEL7-82882
2342;;;;;;;;;3;"3. 3. Wait for 5 seconds.
 3.1 Check if new hostname is added into DNS:
 # nslookup [newhostname.domain-name]
 3.2 Check if old hostname is removed from DNS:
 # nslookup [oldhostname.domain-name]
 3.3 Check /etc/hostname
 # cat /etc/hostname
​​";"3.1
 # nslookup newhostname.wala73220e.i6.internal.cloudapp.net
 Server:        168.63.129.16
 Address:    168.63.129.16#53
 
 Name:    newhostname.wala73220e.i6.internal.cloudapp.net
 Address: 10.0.0.5
 3.2
 # nslookup oldhostname.wala73220e.i6.internal.cloudapp.net
 Server:        168.63.129.16
 Address:    168.63.129.16#53
 
 ** server can't find oldhostname.wala73220e.i6.internal.cloudapp.net: NXDOMAIN
 3.3
 # cat /etc/hostname
 newhostname";;RedHatEnterpriseLinux7/RHEL7-82882
2342;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-82882
2343;RHEL7-82883;WALA-TC: [Network] kill exthandler and change hostname, check DNS;WALA-TC: [Network] kill exthandler and change hostname, check DNS;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"1. Prepare a VM on Azure with NetworkManager enabled.
 ""MonitorHostName"" in waagent.conf is enabled.
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-82883
2343;;;;;;;;;2;"2. kill ""python -u /usr/sbin/waagent -run-exthandlers"" process, then change hostname at once before the process started.
 # kill -9 [run-exthandler pid]
 # hostnamectl set-hostname newhostname
​​";​​;;RedHatEnterpriseLinux7/RHEL7-82883
2343;;;;;;;;;3;"3. Wait for the ""python -u /usr/sbin/waagent -run-exthandlers"" process started. Then check if the new hostname can be added into DNS:
 # nslookup newhostname.domain-name
​​";"# nslookup newhostname.wala73220e.i6.internal.cloudapp.net
 Server:        168.63.129.16
 Address:    168.63.129.16#53
 
 Name:    newhostname.wala73220e.i6.internal.cloudapp.net
 Address: 10.0.0.5";;RedHatEnterpriseLinux7/RHEL7-82883
2343;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-82883
2344;RHEL7-83216;WALA-TC: [Network] Set DNS server from portal;WALA-TC: [Network] Set DNS server from portal;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"1. Create a Virtual Network(vnet1). Add a subnet(subnet1): 172.16.0.0/24
​​";The value of the private ip address depends on the actual situation.;Test Case;RedHatEnterpriseLinux7/RHEL7-83216
2344;;;;;;;;;2;"2. Create a VM(Private IP: 172.16.0.254) in this vnet1. Install unbound and configure it as a DNS server. Add a DNS:
 walatestdns.test.com 172.16.0.100
​​";​​;;RedHatEnterpriseLinux7/RHEL7-83216
2344;;;;;;;;;3;"3. On portal, click on the vnet1, then click ""DNS servers"", input this DNS server's private IP. Save.
​​";​​;;RedHatEnterpriseLinux7/RHEL7-83216
2344;;;;;;;;;4;"4. Create a VM in this vnet1. Check DNS configurations.
 4.1 # cat /etc/resolv.conf
 4.2 # nslookup walatestdns.test.com
​​";"4.1 # cat /etc/resolv.conf
 nameserver 172.16.0.254
 4.2 # nslookup walatestdns.test.com 
 Server:        172.16.0.254
 Address:    172.16.0.254#53
 
 Name:    walatestdns.test.com
 Address: 172.16.0.100";;RedHatEnterpriseLinux7/RHEL7-83216
2344;;;;;;;;;5;config;​​;;RedHatEnterpriseLinux7/RHEL7-83216
2345;RHEL7-83220;WALA-TC: [Network] Check dhclient status;WALA-TC: [Network] Check dhclient status;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"1. Create a VM. Check dhclient status
​​";"dhclient is running
 # ps auxf|grep dhclient
 root      1877  0.0  0.0   9124   704 ?        Ss   Jan13   0:00 /sbin/dhclient -H wala69dns1 -1 -q -lf /var/lib/dhclient/dhclient-eth0.leases -pf /var/run/dhclient-eth0.pid eth0
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-83220
2345;;;;;;;;;2;"2. Restart waagent, check dhclient status
​​";dhclient is running. PID is not changed. ;;RedHatEnterpriseLinux7/RHEL7-83220
2345;;;;;;;;;3;"3. Restart NetworkManager, check dhclient status(RHEL-7 only)
​​";"dhclient is running. PID is changed.
​​";;RedHatEnterpriseLinux7/RHEL7-83220
2345;;;;;;;;;4;"4. Restart network, check dhclient status
​​";dhclient is running. PID is changed.;;RedHatEnterpriseLinux7/RHEL7-83220
2345;;;;;;;;;5;config;​​;;RedHatEnterpriseLinux7/RHEL7-83220
2346;RHEL7-83221;WALA-TC: [WALA conf] Auto-recover root device timeout;WALA-TC: [WALA conf] Auto-recover root device timeout;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Prepare a VM, and login.
 Ensure the default root device timeout is 300:
 # cat /etc/waagent.conf|grep RootDeviceScsiTimeout
​​";"# cat /etc/waagent.conf|grep RootDeviceScsiTimeout
 OS.RootDeviceScsiTimeout=300";Test Case;RedHatEnterpriseLinux7/RHEL7-83221
2346;;;;;;;;;2;"2. Modify root device timeout manually:
 echo 100 > /sys/block/sda/device/timeout
 echo 100 > /sys/block/sdb/device/timeout";​​;;RedHatEnterpriseLinux7/RHEL7-83221
2346;;;;;;;;;3;"3. Wait for 5 seconds. Check the root device timeout.
 # cat /sys/block/sda/device/timeout
 # cat /sys/block/sdb/device/timeout";"The timeout is auto-recovered.
 # cat /sys/block/sda/device/timeout
 300
 # cat /sys/block/sdb/device/timeout
 300";;RedHatEnterpriseLinux7/RHEL7-83221
2346;;;;;;;;;4;"4. Set default root device timeout to None
 in /etc/waagent.conf
 Restart waagent service
​​";"# cat /etc/waagent.conf|grep RootDeviceScsiTimeout
 OS.RootDeviceScsiTimeout=None
 # service waagent restart";;RedHatEnterpriseLinux7/RHEL7-83221
2346;;;;;;;;;5;"5. repeat step 2 and 3. Check the root device timeout
​​";"The timeout is not auto-recovered.
 # cat /sys/block/sda/device/timeout
 100
 # cat /sys/block/sdb/device/timeout
 100";;RedHatEnterpriseLinux7/RHEL7-83221
2346;;;;;;;;;6;config;​​;;RedHatEnterpriseLinux7/RHEL7-83221
2347;RHEL7-83222;WALA-TC: [WALA conf] Attach new disk and check root device timeout;WALA-TC: [WALA conf] Attach new disk and check root device timeout;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Prepare a VM, and login.
 1. Ensure the default root device timeout is 300:
 # cat /etc/waagent.conf|grep RootDeviceScsiTimeout";"# cat /etc/waagent.conf|grep RootDeviceScsiTimeout
 OS.RootDeviceScsiTimeout=300";Test Case;RedHatEnterpriseLinux7/RHEL7-83222
2347;;;;;;;;;2;"2. Attach a new data disk to this VM.
​​";​​;;RedHatEnterpriseLinux7/RHEL7-83222
2347;;;;;;;;;3;"3. Check the new device timeout
 # cat /sys/block/sdc/device/timeout
​​";"# cat /sys/block/sdc/device/timeout
 300";;RedHatEnterpriseLinux7/RHEL7-83222
2347;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-83222
2348;RHEL7-83664;WALA-TC: [General] host plugin - AutoUpdate;WALA-TC: [General] host plugin - AutoUpdate;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"1. Prepare a VM on azure with WALA installed.
 Attach an NSG to this VM with ACLs:
 outbound: deny 443 port";"Note: Add NSG rule or Remove NSG rule,there will be some delay to take affect,msybe 1 minute.
 you can also use iptables rules to deny 443 port(This take affect immediately)
 #  iptables -A OUTPUT -p tcp --dport 443 -j DROP";Test Case;RedHatEnterpriseLinux7/RHEL7-83664
2348;;;;;;;;;2;"2. Enable verbose log and autoupdate:
 vi /etc/waagent.conf
 Logs.Verbose=y
 AutoUpdate.Enabled=y
 Then restart waagent service.  ";"
​​";;RedHatEnterpriseLinux7/RHEL7-83664
2348;;;;;;;;;3;3. Wait for about 5 minutes. Check if can download WALA update package into /var/lib/waagent/. ;"ls -l  /var/lib/waagent
 -rw-r--r-- 1 root root 358187 Dec 20 14:19 WALinuxAgent-2.2.1.zip
 -rw-r--r-- 1 root root 397548 Dec 20 14:20 WALinuxAgent-2.2.2.zip";;RedHatEnterpriseLinux7/RHEL7-83664
2348;;;;;;;;;4;"4. Check waagent.log
 4.1. Download manifest.xml failed. After retrying 3 times, download manifest from host plugin.
 4.2. Download WALA package failed. After retrying 3 times, download WALA package from host plugin.
 4.3. No error logs.";"4.1
 2016/12/20 14:18:30.916012 VERBOSE HTTPConnection [GET] [/7d89d439b79f4452950452399add2c90/Microsoft.OSTCLinuxAgent_Prod_useast_manifest.xml] [None] [None]
 2016/12/20 14:18:30.990367 VERBOSE HTTP response status: [200]
 2016/12/20 14:18:40.943649 VERBOSE HTTPConnection [GET] [/7d89d439b79f4452950452399add2c90/Microsoft.OSTCLinuxAgent_Prod_useast_manifest.xml] [None] [None]
 2016/12/20 14:18:51.062557 VERBOSE HTTPConnection [GET] [/7d89d439b79f4452950452399add2c90/Microsoft.OSTCLinuxAgent_Prod_useast_manifest.xml] [None] [None]
 2016/12/20 14:19:01.091017 VERBOSE Fetch failed from [https://rdfepirv2bl2prdstr01.blob.core.windows.net/7d89d439b79f4452950452399add2c90/Microsoft.OSTCLinuxAgent_Prod_useast_manifest.xml]
 2016/12/20 14:19:01.109956 VERBOSE Manifest could not be downloaded, falling back to host plugin
 2016/12/20 14:19:01.120532 VERBOSE getting API versions at [http://168.63.129.16:32526/versions]
 2016/12/20 14:19:01.130683 VERBOSE HTTP method: [GET]
 2016/12/20 14:19:01.136536 VERBOSE HTTP host: [168.63.129.16]
 2016/12/20 14:19:01.143180 VERBOSE HTTP uri: [/versions]
 2016/12/20 14:19:01.151047 VERBOSE HTTP port: [32526]
 2016/12/20 14:19:01.157411 VERBOSE HTTP data: [None]
 2016/12/20 14:19:01.163918 VERBOSE HTTP secure: [False]
 2016/12/20 14:19:01.169922 VERBOSE HTTP headers: [{'x-ms-containerid': u'c7900d73-2304-4b32-9abd-5544d6ed0c79'}]
 2016/12/20 14:19:01.182598 VERBOSE HTTP proxy: [None:None]
 2016/12/20 14:19:01.189009 VERBOSE HTTPConnection [GET] [/versions] [None] [{'x-ms-containerid': u'c7900d73-2304-4b32-9abd-5544d6ed0c79'}]
 2016/12/20 14:19:01.205550 VERBOSE HTTP response status: [200]
 2016/12/20 14:19:01.439711 VERBOSE Manifest downloaded successfully from host plugin
 
 4.2
 2016/12/20 14:19:31.767051 INFO Download unsuccessful, falling back to host plugin
 2016/12/20 14:19:31.775989 VERBOSE HTTP method: [GET]
 2016/12/20 14:19:31.781687 VERBOSE HTTP host: [168.63.129.16]
 2016/12/20 14:19:31.788434 VERBOSE HTTP uri: [/extensionArtifact]
 2016/12/20 14:19:31.795454 VERBOSE HTTP port: [32526]
 2016/12/20 14:19:31.801185 VERBOSE HTTP data: [None]
 2016/12/20 14:19:31.807207 VERBOSE HTTP secure: [False]
 2016/12/20 14:19:31.813217 VERBOSE HTTP headers: [{'x-ms-containerid': u'c7900d73-2304-4b32-9abd-5544d6ed0c79', 'x-ms-artifact-manifest-location': u'https://rdfepirv2bl2prdstr01.blob.core.windows.net/7d89d439b79f4452950452399add2c90/Microsoft.OSTCLinuxAgent_Prod_useast_manifest.xml', 'x-ms-version': '2015-09-01', 'x-ms-host-config-name': u'0752e6bece414536a8e96a2f2a7b4515.12.0752e6bece414536a8e96a2f2a7b4515.263.wala69222proxy.1.xml', 'x-ms-artifact-location': u'https://rdfepirv2bl2prdstr01.blob.core.windows.net/7d89d439b79f4452950452399add2c90/Microsoft.OSTCLinuxAgent__Prod__2.2.1'}]
 2016/12/20 14:19:31.870802 VERBOSE HTTP proxy: [None:None]
 2016/12/20 14:19:31.877147 VERBOSE HTTPConnection [GET] [/extensionArtifact] [None] [{'x-ms-containerid': u'c7900d73-2304-4b32-9abd-5544d6ed0c79', 'x-ms-artifact-manifest-location': u'https://rdfepirv2bl2prdstr01.blob.core.windows.net/7d89d439b79f4452950452399add2c90/Microsoft.OSTCLinuxAgent_Prod_useast_manifest.xml', 'x-ms-version': '2015-09-01', 'x-ms-host-config-name': u'0752e6bece414536a8e96a2f2a7b4515.12.0752e6bece414536a8e96a2f2a7b4515.263.wala69222proxy.1.xml', 'x-ms-artifact-location': u'https://rdfepirv2bl2prdstr01.blob.core.windows.net/7d89d439b79f4452950452399add2c90/Microsoft.OSTCLinuxAgent__Prod__2.2.1'}]
 2016/12/20 14:19:31.964010 VERBOSE HTTP response status: [200]
 2016/12/20 14:19:31.973380 INFO Agent WALinuxAgent-2.2.1 downloaded from http://168.63.129.16:32526/extensionArtifact
 
 4.3 No error logs.
​​";;RedHatEnterpriseLinux7/RHEL7-83664
2348;;;;;;;;;5;5. Check if AutoUpdate works well;"ps aux|grep -E 'waagent|WAL'
 root     25324  0.0  0.6 204028 11136 ?        S    14:18   0:00 python /usr/sbin/waagent -daemon
 root     25328  1.1  0.8 367476 14740 ?        Sl   14:18   2:50 python -u bin/WALinuxAgent-2.2.1-py2.7.egg -run-exthandlers";;RedHatEnterpriseLinux7/RHEL7-83664
2348;;;;;;;;;6;config;​​;;RedHatEnterpriseLinux7/RHEL7-83664
2349;RHEL7-83665;WALA-TC: [General] host plugin - Extension;WALA-TC: [General] host plugin - Extension;Yuxin Sun (yuxisun);Medium;Positive;Automated;;1;"1. Prepare a VM on azure with WALA installed.
 Attach an NSG to this VM with ACLs:
 outbound:deny 443 port";"Note: Add NSG rule or Remove NSG rule,there will be some delay to take affect,msybe 1 minute.
 you can also use iptables rules to deny 443 port(This take affect immediately)
 #  iptables -A OUTPUT -p tcp --dport 443 -j DROP
";Test Case;RedHatEnterpriseLinux7/RHEL7-83665
2349;;;;;;;;;2;"2. Enable verbose log:
 vi /etc/waagent.conf
 Logs.Verbose=y
 Then restart waagent service.";"
​​";;RedHatEnterpriseLinux7/RHEL7-83665
2349;;;;;;;;;3;"3. Execute ""reset remote access"" from portal.
 Check if can download VMAccess extension package into /var/lib/waagent/. ";"
​​";;RedHatEnterpriseLinux7/RHEL7-83665
2349;;;;;;;;;4;"4. Check waagent.log
 4.1. Download manifest failed. After retry 3 times, download manifest.xml from host plugin
 4.2. Download VMaccess package failed. After retry 3 times, download VMAccess package from host plugin
 4.3. No error logs";"4.1
 2016/12/20 18:14:33.923096 VERBOSE HTTPConnection [GET] [/b01058962be54ceca550a390fa5ff064/Microsoft.OSTCExtensions_VMAccessForLinux_useast_manifest.xml] [None] [None]
 2016/12/20 18:14:43.953671 VERBOSE HTTPConnection [GET] [/b01058962be54ceca550a390fa5ff064/Microsoft.OSTCExtensions_VMAccessForLinux_useast_manifest.xml] [None] [None]
 2016/12/20 18:14:53.988131 VERBOSE HTTPConnection [GET] [/b01058962be54ceca550a390fa5ff064/Microsoft.OSTCExtensions_VMAccessForLinux_useast_manifest.xml] [None] [None]
 2016/12/20 18:15:04.018384 VERBOSE Fetch failed from [https://rdfepirv2bl2prdstr01.blob.core.windows.net/b01058962be54ceca550a390fa5ff064/Microsoft.OSTCExtensions_VMAccessForLinux_useast_manifest.xml]
 2016/12/20 18:15:04.040059 VERBOSE Manifest could not be downloaded, falling back to host plugin
 2016/12/20 18:15:04.050217 VERBOSE Fetch [http://168.63.129.16:32526/extensionArtifact] with headers [{'x-ms-containerid': u'c7900d73-2304-4b32-9abd-5544d6ed0c79', 'x-ms-version': '2015-09-01', 'x-ms-host-config-name': u'0752e6bece414536a8e96a2f2a7b4515.13.0752e6bece414536a8e96a2f2a7b4515.264.wala69222proxy.1.xml', 'x-ms-artifact-location': u'https://rdfepirv2bl2prdstr01.blob.core.windows.net/b01058962be54ceca550a390fa5ff064/Microsoft.OSTCExtensions_VMAccessForLinux_useast_manifest.xml'}]
 2016/12/20 18:15:04.098907 VERBOSE HTTP method: [GET]
 2016/12/20 18:15:04.105002 VERBOSE HTTP host: [168.63.129.16]
 2016/12/20 18:15:04.111439 VERBOSE HTTP uri: [/extensionArtifact]
 2016/12/20 18:15:04.118562 VERBOSE HTTP port: [32526]
 2016/12/20 18:15:04.124002 VERBOSE HTTP data: [None]
 2016/12/20 18:15:04.129874 VERBOSE HTTP secure: [False]
 2016/12/20 18:15:04.136910 VERBOSE HTTP headers: [{'x-ms-containerid': u'c7900d73-2304-4b32-9abd-5544d6ed0c79', 'x-ms-version': '2015-09-01', 'x-ms-host-config-name': u'0752e6bece414536a8e96a2f2a7b4515.13.0752e6bece414536a8e96a2f2a7b4515.264.wala69222proxy.1.xml', 'x-ms-artifact-location': u'https://rdfepirv2bl2prdstr01.blob.core.windows.net/b01058962be54ceca550a390fa5ff064/Microsoft.OSTCExtensions_VMAccessForLinux_useast_manifest.xml'}]
 2016/12/20 18:15:04.179522 VERBOSE HTTP proxy: [None:None]
 2016/12/20 18:15:04.185672 VERBOSE HTTPConnection [GET] [/extensionArtifact] [None] [{'x-ms-containerid': u'c7900d73-2304-4b32-9abd-5544d6ed0c79', 'x-ms-version': '2015-09-01', 'x-ms-host-config-name': u'0752e6bece414536a8e96a2f2a7b4515.13.0752e6bece414536a8e96a2f2a7b4515.264.wala69222proxy.1.xml', 'x-ms-artifact-location': u'https://rdfepirv2bl2prdstr01.blob.core.windows.net/b01058962be54ceca550a390fa5ff064/Microsoft.OSTCExtensions_VMAccessForLinux_useast_manifest.xml'}]
 2016/12/20 18:15:04.266467 VERBOSE HTTP response status: [200]
 2016/12/20 18:15:04.273792 VERBOSE Manifest downloaded successfully from host plugin
 
 4.2
 2016/12/20 18:15:04.443763 VERBOSE HTTPConnection [GET] [/b01058962be54ceca550a390fa5ff064/Microsoft.OSTCExtensions__VMAccessForLinux__1.4.6.0] [None] [None]
 2016/12/20 18:15:14.473051 VERBOSE HTTPConnection [GET] [/b01058962be54ceca550a390fa5ff064/Microsoft.OSTCExtensions__VMAccessForLinux__1.4.6.0] [None] [None]
 2016/12/20 18:15:24.502143 VERBOSE HTTPConnection [GET] [/b01058962be54ceca550a390fa5ff064/Microsoft.OSTCExtensions__VMAccessForLinux__1.4.6.0] [None] [None]
 2016/12/20 18:15:34.530980 WARNING Failed to download from: https://rdfepirv2bl2prdstr01.blob.core.windows.net/b01058962be54ceca550a390fa5ff064/Microsoft.OSTCExtensions__VMAccessForLinux__1.4.6.0
 2016/12/20 18:15:34.552759 WARNING Download did not succeed, falling back to host plugin
 2016/12/20 18:15:34.563816 VERBOSE HTTP method: [GET]
 2016/12/20 18:15:34.571818 VERBOSE HTTP host: [168.63.129.16]
 2016/12/20 18:15:34.579938 VERBOSE HTTP uri: [/extensionArtifact]
 2016/12/20 18:15:34.587990 VERBOSE HTTP port: [32526]
 2016/12/20 18:15:34.594326 VERBOSE HTTP data: [None]
 2016/12/20 18:15:34.600345 VERBOSE HTTP secure: [False]
 2016/12/20 18:15:34.606532 VERBOSE HTTP headers: [{'x-ms-containerid': u'c7900d73-2304-4b32-9abd-5544d6ed0c79', 'x-ms-artifact-manifest-location': u'https://rdfepirv2bl2prdstr01.blob.core.windows.net/b01058962be54ceca550a390fa5ff064/Microsoft.OSTCExtensions_VMAccessForLinux_useast_manifest.xml', 'x-ms-version': '2015-09-01', 'x-ms-host-config-name': u'0752e6bece414536a8e96a2f2a7b4515.13.0752e6bece414536a8e96a2f2a7b4515.264.wala69222proxy.1.xml', 'x-ms-artifact-location': u'https://rdfepirv2bl2prdstr01.blob.core.windows.net/b01058962be54ceca550a390fa5ff064/Microsoft.OSTCExtensions__VMAccessForLinux__1.4.6.0'}]
 2016/12/20 18:15:34.671006 VERBOSE HTTP proxy: [None:None]
 2016/12/20 18:15:34.678041 VERBOSE HTTPConnection [GET] [/extensionArtifact] [None] [{'x-ms-containerid': u'c7900d73-2304-4b32-9abd-5544d6ed0c79', 'x-ms-artifact-manifest-location': u'https://rdfepirv2bl2prdstr01.blob.core.windows.net/b01058962be54ceca550a390fa5ff064/Microsoft.OSTCExtensions_VMAccessForLinux_useast_manifest.xml', 'x-ms-version': '2015-09-01', 'x-ms-host-config-name': u'0752e6bece414536a8e96a2f2a7b4515.13.0752e6bece414536a8e96a2f2a7b4515.264.wala69222proxy.1.xml', 'x-ms-artifact-location': u'https://rdfepirv2bl2prdstr01.blob.core.windows.net/b01058962be54ceca550a390fa5ff064/Microsoft.OSTCExtensions__VMAccessForLinux__1.4.6.0'}]
 2016/12/20 18:15:34.866982 VERBOSE HTTP response status: [200]
 
 4.3 No error logs";;RedHatEnterpriseLinux7/RHEL7-83665
2349;;;;;;;;;5;5. Check if the Extension works well;"ls -l /etc/ssh/sshd_config*
 -rw------- 1 root root 3880 Dec 20 18:15 /etc/ssh/sshd_config
 -rw-r--r-- 1 root root 3952 Dec 20 18:15 /etc/ssh/sshd_config_2016-12-20T10:15:36Z
​​";;RedHatEnterpriseLinux7/RHEL7-83665
2349;;;;;;;;;6;config;​​;;RedHatEnterpriseLinux7/RHEL7-83665
2350;RHEL7-83999;AZURE-TC:[Network]Verify the guest network support arbitrary MTU size (MTU > 1500)[MTU 4074?];;Yaju Cao (yacao);Medium;Positive;Not Automated;467656;1;Prepate 2 VM with the same vnet;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-83999
2350;;;;;;;;;2;"1. Login the guest A. Modify the MTU value of the guest A, set MTU as larger than 1500, the maximum value is 65520
 For example, change it to 9000
 #cat /etc/sysconfig/network-scripts/${ifcfg-ethN}
 DEVICE=ethN
 BOOTPROTO=dhcp
 DHCPCLASS=
 #HWADDR=00:15:5D:48:0C:04
 ONBOOT=yes
 MTU=9000";​​;;RedHatEnterpriseLinux7/RHEL7-83999
2350;;;;;;;;;3;2. Check the MTU value about guest A via ifconfig.;guest A MTU is changed to the set value;;RedHatEnterpriseLinux7/RHEL7-83999
2350;;;;;;;;;4;"3. Login the guest B. Modify the MTU value as the same of guest A
 #cat /etc/sysconfig/network-scripts/${ifcfg-ethN}
 DEVICE=ethN
 BOOTPROTO=dhcp
 DHCPCLASS=
 #HWADDR=00:15:5D:48:0C:08
 ONBOOT=yes
 MTU=9000";​​;;RedHatEnterpriseLinux7/RHEL7-83999
2350;;;;;;;;;5;5.Check the MTU value about guest B via ifconfig.;guest B MTU is changed to the set value;;RedHatEnterpriseLinux7/RHEL7-83999
2350;;;;;;;;;6;"6.Flood ping the guest B from guest A. Note: the -s value is equal to MTU-28
 # ping -s 8972 ${the ip address of guest B} -M do";"At step 6, successfully ping the other guest.
​​";;RedHatEnterpriseLinux7/RHEL7-83999
2350;;;;;;;;;7;"7. In guest A , capture the packets, check if it is fragmented.
 #tcpdump -n -v -i ethN icmp
";"At step 7, check the packet is not fragmented, it should be like below:
 17:28:49.643736 IP (tos 0x0, ttl 64, id 0, offset 0, flags [Hyper-V][DF], proto ICMP (1), length 9000)
 guest A > guest B: ICMP echo request, id 10875, seq 5862, length 8980
 17:28:49.643767 IP (tos 0x0, ttl 64, id 24242, offset 0, flags [Hyper-V][none], proto ICMP (1), length 9000)
 guest B > guest A: ICMP echo reply, id 10875, seq 5862, length 8980";;RedHatEnterpriseLinux7/RHEL7-83999
2351;RHEL7-84002;AZURE-TC:[Network]Check the network link initial status after the guest boot[arm only????];;Yaju Cao (yacao);Medium;Positive;Not Automated;467816;1;1. Set the Network Adapter as Not connected, and boot the guest.;"At step 2, the operstate should be down (if it shows unknown, it is also
 accepted, see https://bugzilla.redhat.com/show_bug.cgi?id=1027173#c5  and
 https://bugzilla.redhat.com/show_bug.cgi?id=1027155#c6), and Link detected: no
 At step 4, the operstate should be up, and Link detected: yes.";Test Case;RedHatEnterpriseLinux7/RHEL7-84002
2351;;;;;;;;;2;"2. Login the guest, check the network link status by #cat
 /sys/class/net/ethN/operstate or #ethtool ethN|grep Link";​​;;RedHatEnterpriseLinux7/RHEL7-84002
2351;;;;;;;;;3;"3. Shutdown the guest, set the Network Adapter as connected(choose a network
 from the drop menu), and boot the guest.";​​;;RedHatEnterpriseLinux7/RHEL7-84002
2351;;;;;;;;;4;4. Login the guest, check the network link status by #cat /sys/class/net/ethN/operstate or #ethtool ethN|grep Link;​​;;RedHatEnterpriseLinux7/RHEL7-84002
2352;RHEL7-84028;AZURE-TC:[Network]Hot add a network adapter and verify network can work (2016 host) (Gen2 Only);[arm only?];Yaju Cao (yacao);Medium;Positive;Not Automated;468734;1;"This case only work with Gen2 guest on Hyper-V 2016 host(Technical Preview)
 1. Boot a RHEL guest";"3. At step 3, the nic added in step 2 could be displayed, and could get ping
 reply";Test Case;RedHatEnterpriseLinux7/RHEL7-84028
2352;;;;;;;;;2;2. Add a Network Adapter by Hyper-V Manager-Settings-Add Hardware;​​;;RedHatEnterpriseLinux7/RHEL7-84028
2352;;;;;;;;;3;"3. Check nic in the guest, check if the new nic could get ping reply
 #ip addr";​​;;RedHatEnterpriseLinux7/RHEL7-84028
2353;RHEL7-84029;AZURE-TC:[Network]Verify VM and network is OK in debug kernel VM with PAGEALLOC enabled;[Azure whether or not use deubg kernel?];Yaju Cao (yacao);Medium;Positive;Not Automated;468683;1;"1. Log in a debug kernel VM with PAGEALLOC enabled
 #grep PAGEALLOC /boot/config-3.10.0-217.el7debugv2.x86_64.debug";"1. At step 1, The PAGEALLOC=y
 #grep PAGEALLOC /boot/config-3.10.0-217.el7debugv2.x86_64.debug
 CONFIG_ARCH_SUPPORTS_DEBUG_PAGEALLOC=y
 CONFIG_DEBUG_PAGEALLOC=y";Test Case;RedHatEnterpriseLinux7/RHEL7-84029
2353;;;;;;;;;2;2. Check there is no crash, and the network status;2. At step 2, there is no crash.;;RedHatEnterpriseLinux7/RHEL7-84029
2354;RHEL7-84036;AZURE-TC:[Virtual block device]Expand SCSI disk when guest is running[Azure whether or not can expand/shrink disk?];;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;" 1. Login the guest and get the size of the SCSI vhdx disk.
 # fdisk -l";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-84036
2354;;;;;;;;;2;"2. Expand the SCSI disk to a larger size.
 Open the ""Settings..."" page of the guest in Hyper-V manager.
 Click the disk used in the left side.
 ""Edit"" the disk. Choose ""Expand"" in Choose Action.
 Input a new size larger than the old one.
 Click ""finish"".";No error;;RedHatEnterpriseLinux7/RHEL7-84036
2354;;;;;;;;;3;"3. Check the disk size from Hyper-V manager.
 Click ""Inspect"". Get the values of ""Current File Size"" and ""Maximum Disk
 Size"".";"At step 3, the Maximum Disk Size = the size you input in
 step 2.";;RedHatEnterpriseLinux7/RHEL7-84036
2354;;;;;;;;;4;"4. Check the disk size.
 # fdisk -l";"At step 4, the disk size got from the RHEL guest is the same with that in step
 3.";;RedHatEnterpriseLinux7/RHEL7-84036
2354;;;;;;;;;5;"5. Check the disk that should be readable and writeable. Do some operations, such as, dd, cp, mkfs, trouch and so on.
 Also Check there is no Call Trace or other error information in dmesg.#dmesg";At step 5, Check there is no Call Trace or other error information in dmesg.;;RedHatEnterpriseLinux7/RHEL7-84036
2355;RHEL7-84037;AZURE-TC:[Virtual block device]Shrink SCSI disk when guest is running;;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;" 1. Login the guest and get the partitioned size of SCSI disk. The disk should have un-partitioned space to continue below test.
 # fdisk -l";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-84037
2355;;;;;;;;;2;"2. Shrink the SCSI disk.
 Choose the VM in Hyper-V manager. Click ""Edit Disk"" in the right.
 Find out where is the Virtual Block Device.  Choose ""Shrink"" in Choose Action.
 Click ""Next"". Then ""finish"".";​​;;RedHatEnterpriseLinux7/RHEL7-84037
2355;;;;;;;;;3;"3. Check the disk size from Hyper-V manager.
 Click ""Inspect"". Get the values of ""Current File Size"" and ""Maximum Disk
 Size"".";Maximum is changed same as step 2;;RedHatEnterpriseLinux7/RHEL7-84037
2355;;;;;;;;;4;"4. Check the disk size from the guest.
 # fdisk -l";"At step 4, the disk size got from the RHEL guest is the same with that in step
 3.";;RedHatEnterpriseLinux7/RHEL7-84037
2355;;;;;;;;;5;"5. Verify the disk existing partition could still be readable and writable. 
 Do some operations,  such as, dd, cp, mkfs, touch and so on.";No error occur;;RedHatEnterpriseLinux7/RHEL7-84037
2356;RHEL7-84039;AZURE-TC:[Virtual block device]Add a nfs storage into guest;AZURE-TC:[Virtual block device]Add a nfs storage into guest;Yaju Cao (yacao);Medium;Positive;Not Automated;467723;1;1.login the guest os;"1.you can read and write on the nfs system.
 2. check the 5gfile size by go to /mnt
 ls -lh /mnt | grep 5gfile

";Test Case;RedHatEnterpriseLinux7/RHEL7-84039
2356;;;;;;;;;2;"2.showmount ip_dest(nfs server) -e
";​​;;RedHatEnterpriseLinux7/RHEL7-84039
2356;;;;;;;;;3;3.execute the mount command :mouth -t nfs ip:/nfs_dir /mnt/tmp;​​;;RedHatEnterpriseLinux7/RHEL7-84039
2356;;;;;;;;;4;"4.you execute the command:
 #dd if=/dev/zero of=/mnt/tmp/5gfile bs=4096 count=1320720
 note:the count will be beginner than 1320720";​​;;RedHatEnterpriseLinux7/RHEL7-84039
2356;;;;;;;;;5;config ;​​;;RedHatEnterpriseLinux7/RHEL7-84039
2357;RHEL7-84040;AZURE-TC:[Virtual block device]Shrink SCSI disk with GPT label when guest is running;;Yaju Cao (yacao);Medium;Positive;Not Automated;467603;1;"1. Login the guest and get the partitioned size of the  Dynamically expanding
 SCSI vhdx disk (Firstly create one dynamic disk as 1G, then expand to 2TB). 
 # parted /dev/sdc
 parted) mklabel gpt
 (parted) mkpart primary 1GB 2000GB
 (parted) print";"At step 4, the disk size got from the RHEL guest is the same with that in step
 3.";Test Case;RedHatEnterpriseLinux7/RHEL7-84040
2357;;;;;;;;;2;"2. Shrink the  Dynamically expanding SCSI .vhdx disk to <2TB
 Choose the VM in Hyper-V manager. Click ""Edit Disk"" in the right.
 Find out where is the Virtual Block Device.  Choose ""Shrink"" in Choose Action.
 Click ""Next"". Then ""finish"".";​​;;RedHatEnterpriseLinux7/RHEL7-84040
2357;;;;;;;;;3;"3. Check the disk size from Hyper-V manager. Make sure the size is <2TB
 after resizing.
 Click ""Inspect"". Get the values of ""Current File Size"" and ""Maximum Disk
 Size"".";​​;;RedHatEnterpriseLinux7/RHEL7-84040
2357;;;;;;;;;4;"4. Check the disk size from the guest.
 # parted /dev/sdc
 # print";​​;;RedHatEnterpriseLinux7/RHEL7-84040
2357;;;;;;;;;5;"5. Check the disk that should be readable and writeable. Do some oprations,
 such as, dd, cp, mkfs, trouch and so on.";​​;;RedHatEnterpriseLinux7/RHEL7-84040
2358;RHEL7-84087;OTC-TC: Modifying ECS specifications;;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Click the ""More"" -> ""Modify Specifications"", choose another ECS specification.
​​";"The new ECS specification is shown on portal
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-84087
2358;;;;;;;;;2;"Start the ECS and check the CPU and memory.
​​";"The ECS is modified to the new specification. The CPU and memory are correct.
​​";;RedHatEnterpriseLinux7/RHEL7-84087
2359;RHEL7-84472;[svirt][selinux][device]svirt test with 'file' type disk device;svirt test with 'file' type disk device;Yan Fu (yafu);Critical;Positive;Not Automated;;1;" 1.Define a guest with file disk device having seclabel setting:
 #virsh edit vm
 ...
  <disk type='file' device='disk'>
       <driver name='qemu' type='raw'/>
       <source file='/var/lib/libvirt/images/test1.img'>
         <seclabel model='selinux' relabel='yes'>
           <label>system_u:object_r:svirt_image_t:s0</label>
         </seclabel>
       </source>
       <target dev='hda' bus='ide'/>
       <address type='drive' controller='0' bus='0' target='0' unit='0'/>
     </disk>
 ....";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-84472
2359;;;;;;;;;2;"2.Check the selinux context of disk image before start guest:
 #ll -Z /var/lib/libvirt/images/test1.img
 -rw-r--r--. root root system_u:object_r:virt_image_t:s0 /var/lib/libvirt/images/test1.img
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-84472
2359;;;;;;;;;3;"3.Start the guest and check the selinux context of disk image:
 #virsh start vm";"2.Guest start correctly and the label of disk image is the same as setting:
 #ll -Z /var/lib/libvirt/images/test1.img
 -rw-r--r--. qemu qemu system_u:object_r:svirt_image_t:s0 /var/lib/libvirt/images/test1.img
​​";;RedHatEnterpriseLinux7/RHEL7-84472
2359;;;;;;;;;4;"4.Destroy the guest and check the selinux context of disk image:
 #virsh destroy vm";"3.The label of disk images restored after guest destroyed:
 # ll -Z /var/lib/libvirt/images/test1.img 
 -rw-r--r--. root root system_u:object_r:virt_image_t:s0 /var/lib/libvirt/images/test1.img";;RedHatEnterpriseLinux7/RHEL7-84472
2359;;;;;;;;;5;"5.Negative test:
 set the label with multiple label context:
 #virsh edit vm
 ...
  <disk type='file' device='disk'>
       <driver name='qemu' type='raw'/>
       <source file='/var/lib/libvirt/images/test1.img'>
         <seclabel model='selinux' relabel='yes'>
           <label>system_u:object_r:svirt_image_t:s0:c696,c821</label>
         </seclabel>
       </source>
       <target dev='hda' bus='ide'/>
       <address type='drive' controller='0' bus='0' target='0' unit='0'/>
     </disk>
 ....
 
 #virsh start vm";"# virsh start vm
 error: Failed to start domain vm
 error: internal error: process exited while connecting to monitor: 2017-02-10T10:15:22.355322Z qemu-kvm: -drive file=/var/lib/libvirt/images/test1.img,format=raw,if=none,id=drive-ide0-0-0: Could not open '/var/lib/libvirt/images/test1.img': Permission denied";;RedHatEnterpriseLinux7/RHEL7-84472
2360;RHEL7-84473;[svirt][selinux][device]svirt test with 'block' type disk device when disable qemu namespace;"svirt test with 'block' type disk device when disable qemu name space.
";Yan Fu (yafu);Medium;Positive;Automated;;1;" 1.Disable qemu namespace in the qemu.conf and restart libvirtd(skip this step before rhel7.4, since qemu namespace only enabled after rhel7.4):
 #vim /etc/libvirtd/qemu.conf
 namespaces = [   ]
 #systemctl restart libvirtd
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-84473
2360;;;;;;;;;2;"2.Define a guest with block disk having seclabel setting:
 #virsh edit vm
 ...
 <disk type='block' device='disk'>
 <driver name='qemu' type='raw'/>
 <source dev='/dev/disk/by-path/ip-10.66.71.67:3260-iscsi-iqn.2016-03.com.virttest1:logical-pool.target-lun-0'>
    <seclabel model='selinux' relabel='yes'>
           <label>system_u:object_r:svirt_image_t:s0</label>
      </seclabel>
 </source>
 <target dev='vdb' bus='virtio'/>
 <alias name='virtio-disk1'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
 </disk>
 ...";​​;;RedHatEnterpriseLinux7/RHEL7-84473
2360;;;;;;;;;3;"3. Check original selinux label of th e block device:
 # ll -Z /dev/sdb
​​";"3.Output:
 brw-rw----. root root system_u:object_r:fixed_disk_device_t:s0 /dev/sdb";;RedHatEnterpriseLinux7/RHEL7-84473
2360;;;;;;;;;4;"4.Start the guest and check the selinux context of the disk device:
 #virsh start vm
​​";"4.The guest start correctly and the label set correctly:
 # ll /dev/disk/by-path/ip-10.66.71.67\:3260-iscsi-iqn.2016-03.com.virttest1\:logical-pool.target-lun-0 
 lrwxrwxrwx. 1 qemu qemu 9 Feb 12 21:23 /dev/disk/by-path/ip-10.66.71.67:3260-iscsi-iqn.2016-03.com.virttest1:logical-pool.target-lun-0 -> ../../sdb
 
 # ll -Z /dev/sdb
 brw-rw----. qemu qemu system_u:object_r:svirt_image_t:s0 /dev/sdb 
 
​​";;RedHatEnterpriseLinux7/RHEL7-84473
2360;;;;;;;;;5;"4.Destroy the guest and check the selinux context of the disk device:
 #virsh destroy vm
​​";"4.The label of block device restored after guest destroyed:
 # ll -Z /dev/sdb
 brw-rw----. root root system_u:object_r:fixed_disk_device_t:s0 /dev/sdb
 
​​";;RedHatEnterpriseLinux7/RHEL7-84473
2360;;;;;;;;;6;"5.Negative test:
 set the label of block device as MCS:
 #virsh edit vm
 ...
 <disk type='block' device='disk'>
 <driver name='qemu' type='raw'/>
 <source dev='/dev/disk/by-path/ip-10.66.71.67:3260-iscsi-iqn.2016-03.com.virttest1:logical-pool.target-lun-0'>
    <seclabel model='selinux' relabel='yes'>
           <label>system_u:object_r:svirt_image_t:s0:c537,c604</label>
      </seclabel>
 </source>
 <target dev='vdb' bus='virtio'/>
 <alias name='virtio-disk1'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
 </disk>
 ...
​​";"5.Guest start failed since the MCS is not the same as the process of the guest:
 # virsh start win2012r2
 error: Failed to start domain win2012r2
 error: internal error: process exited while connecting to monitor: 2017-02-13T03:00:16.643543Z qemu-kvm: -drive file=/dev/disk/by-path/ip-10.66.71.67:3260-iscsi-iqn.2016-03.com.virttest1:logical-pool.target-lun-0,format=raw,if=none,id=drive-virtio-disk1: Could not open '/dev/disk/by-path/ip-10.66.71.67:3260-iscsi-iqn.2016-03.com.virttest1:logical-pool.target-lun-0': Permission denied
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-84473
2361;RHEL7-84474;[svirt][selinux][device]svirt test with 'network' type disk device;"svirt test with 'network' type disk device
";Yan Fu (yafu);Medium;Negative;Not Automated;;1;" 1.Edit the xml to define seclabel of network type disk:
 #virsh edit vm
 ...
 <disk type='network' device='lun'>
       <driver name='qemu' type='raw'/>
       <source protocol='iscsi' name='iqn.2016-03.com.virttest1:logical-pool.target/0'>
         <host name='10.66.71.67' port='3260'/>
         <seclabel model='selinux' relabel='yes'>
           <label>system_u:object_r:svirt_image_t:s0</label>
         </seclabel>
       </source>
       <target dev='sda' bus='scsi'/>
       <address type='drive' controller='0' bus='0' target='0' unit='0'/>
     </disk>
 ...
 
 save the config
 
​​";" 1.When save the config , it can not validate error for the xml since network type disk does not support seclabel yet:
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content
 
 Failed. Try again? [y,n,i,f,?]: 
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-84474
2362;RHEL7-84545;[virtio-win][vioser] Basic virtio serial data transfer in windows guest;[virtio-win][vioser] Basic virtio serial data transfer in windows guest;Yu Wang (wyu);Critical;Positive;Not Automated;;1;"1. Start guest w/ 1 virtio-serial-pci & 1 virtio-serial-port
 CLI:...-device virtio-serial-pci,id=virtio-serial0,max_ports=511 -chardev socket,id=channel1,path=/tmp/helloworld1,server,nowait -device virtserialport,chardev=channel1,name=com.redhat.rhevm.vdsm1,bus=virtio-serial0.0,id=port1";Guest could boot up successfully without any error.;Test Case;RedHatEnterpriseLinux7/RHEL7-84545
2362;;;;;;;;;2;"2. Check whether vioser.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled vioser.sys verifier:
     #verifier.exe /standard /driver vioser.sys  (run as administrator)
     then reboot the guest and recheck 
     #verifier /querysettings";"All the Standards flags are checked ,the verified driver fields shows ""vioser.sys""";;RedHatEnterpriseLinux7/RHEL7-84545
2362;;;;;;;;;3;"3. Transfering data from host to guest via port1 in a loop
 on the guest:
 #for /l %i in (1,1,100) do VirtIOChannel_guest_reieve.py com.redhat.rhevm.vdsm1
 
 on the host:
 #sh host-to-guest.sh
 #cat host-to-guest.sh
 for ((j=1;j<=100;j++));
 do
 python serial-host-send.py /tmp/helloworld1;
 sleep 1;
 done;";Guest receive data successfully;;RedHatEnterpriseLinux7/RHEL7-84545
2362;;;;;;;;;4;"4. Transerring data from guest to host via port1 in a loop
 on the host:
 # sh guest-to-host.sh
 #cat guest-to-host.sh
 for ((i=1;i<=100;i++));
 do
 python serial-host-receive.py /tmp/helloworld1;
 done
 
 on the guest:
 for /l %i in (1,1,100) do VirtIOChannel_guest_send.py com.redhat.rhevm.vdsm1 ";Host could receive data successfully;;RedHatEnterpriseLinux7/RHEL7-84545
2363;RHEL7-84654;[Network lifecycle] create a network with invalid uuid/mac, bad xml, duplicate bridge name;negtive test for create a network, invalid uuid, invalid mac, non-existing xml file, reuse the bridge;Yalan Zhang (yalzhang);Medium;Negative;Automated;;1;"1. no existing file
 # virsh net-create no.xml
​​";error: Failed to open file 'no.xml': No such file or directory;Test Case;RedHatEnterpriseLinux7/RHEL7-84654
2363;;;;;;;;;2;"2. bad xml file
 # cat bad.xml
 just for test
 # virsh net-create bad.xml
​​";"error: Failed to create network from bad.xml
 error: (network_definition):1: Start tag expected, '<' not found
 just for test
 ^";;RedHatEnterpriseLinux7/RHEL7-84654
2363;;;;;;;;;3;"3. # cat bad2.xml
 <network>
     </network>
 # virsh net-create bad2.xml
​​";"error: Failed to create network from bad2.xml
 error: missing name information";;RedHatEnterpriseLinux7/RHEL7-84654
2363;;;;;;;;;4;"4.  bad uuid
 # cat test.xml
 <network>
   <name>test1</name>
   <uuid>111111</uuid>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:8a:41:70'/>
   <ip address='192.168.20.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.20.2' end='192.168.20.254'/>
     </dhcp>
   </ip>
 </network>
 
 # virsh net-create test.xml
​​";"error: Failed to create network from test.xml
 error: internal error: malformed uuid element";;RedHatEnterpriseLinux7/RHEL7-84654
2363;;;;;;;;;5;"5. confirm the network default exists and use virbr0
 # cat test3.xml
 <network>
   <name>test3</name>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:f9:bd:15'/>
 </network>
 # virsh net-create test3.xml
​​";"error: Failed to create network from test3.xml
 error: internal error: bridge name 'virbr0' already in use.";;RedHatEnterpriseLinux7/RHEL7-84654
2363;;;;;;;;;6;"6.  # cat test4.xml
 <network>
   <name>test4</name>
   <bridge name='virbr10' stp='on' delay='0'/>
   <mac address='52:54:00:f9:bd:yy'/>
 </network>
 # virsh net-create test4.xml
​​";"error: Failed to create network from test4.xml
 error: XML error: Invalid bridge mac address '52:54:00:f9:bd:yy' in network 'test4'";;RedHatEnterpriseLinux7/RHEL7-84654
2363;;;;;;;;;7;"7. # cat test4.xml
 <network>
   <name>test4</name>
   <bridge name='virbr10' stp='on' delay='0'/>
   <mac address='51:54:00:f9:bd:51'/>
 </network>
 # virsh net-create test4.xml
​​";"error: Failed to create network from test4.xml
 error: XML error: Invalid multicast bridge mac address '51:54:00:f9:bd:51' in network 'test4'
 
 
 (Note: '51:54:00:f9:bd:51 is not a valid mac address)";;RedHatEnterpriseLinux7/RHEL7-84654
2364;RHEL7-84657;[Network lifecycle] define and undefine network with unsupported options or elements;additional_arg, additional_option, none_option, not_exist_option;Yalan Zhang (yalzhang);Medium;Negative;Automated;;1;"1. # cat bad1.xml
 <network>
     <name>test</name>
     </network>
 
 # virsh net-define bad1.xml
 Network test defined from bad1.xml
 
 # virsh net-list --all
​​";" Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  test                 inactive   no            yes";Test Case;RedHatEnterpriseLinux7/RHEL7-84657
2364;;;;;;;;;2;2. # virsh net-define bad1.xml ;"error: Failed to define network from bad1.xml
 error: operation failed: network 'test' already exists with uuid d5ec3bac-6fc2-4e54-9745-78962453d67a";;RedHatEnterpriseLinux7/RHEL7-84657
2364;;;;;;;;;3;"3. # virsh net-undefine test --test
​​";error: command 'net-undefine' doesn't support option --test;;RedHatEnterpriseLinux7/RHEL7-84657
2364;;;;;;;;;4;4. # virsh net-undefine test sdf;error: unexpected data 'sdf';;RedHatEnterpriseLinux7/RHEL7-84657
2364;;;;;;;;;5;"5. # cat test2.xml
 <network>
   <name>test2</name>
   <forward mode='nat'/>
   <mac address='52:54:00:92:4a:18'/>
   <ip address='192.168.30.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.30.2' end='192.168.30.254'/>
     </dhcp>
   </ip>
 </network>
 
 # virsh net-define test2.xml --test
​​";error: command 'net-define' doesn't support option --test;;RedHatEnterpriseLinux7/RHEL7-84657
2365;RHEL7-84661;[virsh cmd] net-event to catch the network events;ensure net-event can catch the network events, the options act as expected;Yalan Zhang (yalzhang);High;Positive;Automated;;1;"1. # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              inactive   no            yes
  test                 inactive   no            yes
 
 # virsh net-event --list
 lifecycle
 
 # virsh net-event 
 error: either --list or --event <type> is required
 
 # virsh net-event --event lifecycle   ( ==>start the network test in another terminal)
 event 'lifecycle' for network test: Started
 events received: 1
​​";" net-event {[network] event [--loop] [--timeout seconds] [--timestamp] | --list}
  Wait for a class of network events to occur, and print appropriate details of events as they happen.  
 The events can optionally be filtered by network.  Using --list as the only argument will provide a list of possible event values known by this client, although the connection might not allow registering for all these events.
 
 By default, this command is one-shot, and returns success once an event occurs; you can send SIGINT (usually via ""Ctrl-C"") to quit immediately. 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-84661
2365;;;;;;;;;2;"2. # virsh net-event default --event lifecycle --loop --timestamp (====start and destroy the default network)
 2017-02-21 00:13:22.430+0000: event 'lifecycle' for network default: Started
 2017-02-21 00:13:36.824+0000: event 'lifecycle' for network default: Stopped
 ^Cevent loop interrupted
 events received: 2";"With --loop, the command prints all events until a timeout or interrupt key.
 When --timestamp is used, a human-readable timestamp will be printed before the event.";;RedHatEnterpriseLinux7/RHEL7-84661
2365;;;;;;;;;3;"3. # virsh net-event --event lifecycle --timeout 20
 event loop timed out
 events received: 0"; If --timeout is specified, the command gives up waiting for events after seconds have elapsed.  ;;RedHatEnterpriseLinux7/RHEL7-84661
2365;;;;;;;;;4;"4. # virsh net-event unknow --event lifecycle
 error: failed to get network 'unknow'
 
 ^Cevent loop interrupted
 events received: 0
 error: Network not found: no network with matching name 'unknow'
​​";​​;;RedHatEnterpriseLinux7/RHEL7-84661
2365;;;;;;;;;5;"5. # virsh net-event --event unknown 
 error: unknown event type unknown";​​;;RedHatEnterpriseLinux7/RHEL7-84661
2365;;;;;;;;;6;"6. # virsh net-event default --event unknown 
 error: unknown event type unknown";​​;;RedHatEnterpriseLinux7/RHEL7-84661
2366;RHEL7-84662;[virsh cmd] net-info to list the network info;ensure net-info can pick up the correct information about the network;Yalan Zhang (yalzhang);High;Positive;Automated;;1;"1. # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     no            yes
 
 # virsh net-info default
​​";"Name:           default
 UUID:           e45d4921-8cc1-492f-ad35-9673cc510c84
 Active:         yes
 Persistent:     yes
 Autostart:      no
 Bridge:         virbr0";Test Case;RedHatEnterpriseLinux7/RHEL7-84662
2366;;;;;;;;;2;"2. # virsh net-destroy default
 Network default destroyed
 
 # virsh net-info default
​​";"Name:           default
 UUID:           e45d4921-8cc1-492f-ad35-9673cc510c84
 Active:         no
 Persistent:     yes
 Autostart:      no
 Bridge:         virbr0";;RedHatEnterpriseLinux7/RHEL7-84662
2366;;;;;;;;;3;"3. # virsh net-autostart default
 Network default marked as autostarted
 
 # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              inactive   yes           yes
 
 # virsh net-info default
​​";"Name:           default
 UUID:           e45d4921-8cc1-492f-ad35-9673cc510c84
 Active:         no
 Persistent:     yes
 Autostart:      yes
 Bridge:         virbr0";;RedHatEnterpriseLinux7/RHEL7-84662
2366;;;;;;;;;4;"4. # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              inactive   yes           yes
 
 # virsh net-start default
 Network default started
 
 # virsh net-undefine default
 Network default has been undefined
 
 # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     no            no
 
 # virsh net-info default
​​";"Name:           default
 UUID:           e45d4921-8cc1-492f-ad35-9673cc510c84
 Active:         yes
 Persistent:     no
 Autostart:      no
 Bridge:         virbr0";;RedHatEnterpriseLinux7/RHEL7-84662
2366;;;;;;;;;5;"5. # cat test1.xml
 <network>
     <name>test1</name>
     <forward dev='enp0s25' mode='bridge'/>
     </network>
 # virsh net-create test1.xml
 Network test1 created from test1.xml
 
 # virsh net-list
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     no            no
  test1                active     no            no
 
 # virsh net-info test1
​​";"Name:           test1
 UUID:           1c02d380-d251-451b-b9c2-96389a6bb524
 Active:         yes
 Persistent:     no
 Autostart:      no
 
 (no bridge element the active, persistent and autostart are correct)";;RedHatEnterpriseLinux7/RHEL7-84662
2367;RHEL7-84663;[virsh cmd] get network information by net-uuid, net-name;net-uuid can get correct uuid by name, net-name can get correct name by uuid, no matter the network status;Yalan Zhang (yalzhang);High;Positive;Automated;;1;"# virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              inactive   no            yes
  test                 active     no            no
  test2                active     no            yes
 
 # virsh net-uuid default
 e45d4921-8cc1-492f-ad35-9673cc510c84
 
 # virsh net-name  e45d4921-8cc1-492f-ad35-9673cc510c84
 default
​​";"net-uuid can get correct uuid by name
 net-name can get correct name by uuid";Test Case;RedHatEnterpriseLinux7/RHEL7-84663
2367;;;;;;;;;2;"# virsh net-name  e45d4921-8cc1-492f-ad35-9673cc510c8
 error: failed to get network 'e45d4921-8cc1-492f-ad35-9673cc510c8'
 
 # virsh net-uuid defau
 error: failed to get network 'defau'
 error: Network not found: no network with matching name 'defau'";error message is clear;;RedHatEnterpriseLinux7/RHEL7-84663
2367;;;;;;;;;3;"# virsh net-uuid test
 d5ec3bac-6fc2-4e54-9745-78962453d67a
 
 # virsh net-uuid test2
 f156c504-9767-40ec-b45a-425e9816cf82
 
 # virsh net-name  d5ec3bac-6fc2-4e54-9745-78962453d67a
 test
 
 # virsh net-name  f156c504-9767-40ec-b45a-425e9816cf82
 test2";"net-uuid can get correct uuid by name
 net-name can get correct name by uuid";;RedHatEnterpriseLinux7/RHEL7-84663
2368;RHEL7-84664;[net-dhcp-leases] check net-dhcp-leases for nat network;net-dhcp-leases can pick up the interface information of the guest connected to the network, works for the network types using dnsmasq.;Yalan Zhang (yalzhang);High;Positive;Automated;;1;"# virsh dumpxml rhel7.3 | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:3f:b3:20'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
     <interface type='network'>
       <mac address='52:54:00:00:50:89'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet1'/>
       <model type='rtl8139'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
     </interface>
​​"; This command is only valid for the nat, route ,isolated, and open network as they use dnsmasq as the dhcp server;Test Case;RedHatEnterpriseLinux7/RHEL7-84664
2368;;;;;;;;;2;"2. confirm the libvirt-nss package is installed.
 # rpm -q libvirt-nss
 libvirt-nss-3.1.0-1.el7.x86_64";​​;;RedHatEnterpriseLinux7/RHEL7-84664
2368;;;;;;;;;3;"3. configure the /etc/nsswitch.conf, to add libvirt in the hosts line
 hosts: files libvirt dns
​​";​​;;RedHatEnterpriseLinux7/RHEL7-84664
2368;;;;;;;;;4;"4. configure the guest's hostname by 
 guest# hostnamectl set-hostname myguest
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-84664
2368;;;;;;;;;5;"5. restart network service on guest then check on host:
 # virsh net-dhcp-leases default
​​";" Expiry Time          MAC address        Protocol  IP address                Hostname        Client ID or DUID
 -------------------------------------------------------------------------------------------------------------------
  2017-02-21 10:09:35  52:54:00:00:50:89  ipv4      192.168.122.65/24         myguest          -
  2017-02-21 10:09:38  52:54:00:3f:b3:20  ipv4      192.168.122.56/24         myguest          -";;RedHatEnterpriseLinux7/RHEL7-84664
2369;RHEL7-84885;[Nested] Check L2 guest nat net function (L1: nat) --bug 1283251;"1，Host use virtual network assignment to L1 guest , use the driver :  virtio, rtl8139, e1000
2，Guest1 use virtual network assignment to L2 guest, use the driver :  virtio, rtl8139, e1000";Jingjing Shao (jishao);High;Positive;Not Automated;;1;1. virtual network from  host --> L1 guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-84885
2369;;;;;;;;;2;"On the host , prepare the default network
 
 # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     yes           yes
 
 
 # Add the xml info to L1 guest 
   <interface type='network'>
       <mac address='52:54:00:f2:40:a6'/>
       <source network='default'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
  
 #   # virsh start vm1
 Domain  vm1  started
 
 # ps -aux | grep netdev 
​​";"Output:
 .....
  -netdev tap,fd=31,id=hostnet1,vhost=on,vhostfd=32 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=52:54:00:3f:50:9e,bus=pci.2,addr=0x3 -chardev pty,id=charserial0
 .....";;RedHatEnterpriseLinux7/RHEL7-84885
2369;;;;;;;;;3;2. virtual network from L1 guest --> L2 guest;​​;;RedHatEnterpriseLinux7/RHEL7-84885
2369;;;;;;;;;4;"On the  L1 guest , prepare the default network
 
 # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     yes           yes
 
 
 # Add the xml info to L2 guest 
   <interface type='network'>
       <mac address='52:54:00:f2:40:a6'/>
       <source network='default'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
  
 #   # virsh start vm2
 Domain  vm2  started
 
 # ps -aux | grep netdev
 
 # ping 10.66.4.153  ---> another host
​​";"Output:
 # lspci | grep Eth
 02:03.0 Ethernet controller: Red Hat, Inc Virtio network device
 
 
 # ps -aux | grep netdev
 .......
  -netdev tap,fd=23,id=hostnet0,vhost=on,vhostfd=24 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:54:00:f2:40:a6,bus=pci.0,addr=0x3 
 .......
 
 
 # ping 10.66.4.153
 PING 10.66.4.153 (10.66.4.153) 56(84) bytes of data.
 64 bytes from 10.66.4.153: icmp_seq=1 ttl=63 time=0.578 ms
 64 bytes from 10.66.4.153: icmp_seq=2 ttl=63 time=0.432 ms
 
 
 The L2 guest  can ping another host successfully";;RedHatEnterpriseLinux7/RHEL7-84885
2369;;;;;;;;;5;"Check the L2 guest 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-84885
2369;;;;;;;;;6;"3, Login in the L2 guest
 # lspci | grep Eth
 
 # ping 10.66.4.153  ---> another host
​​";"# lspci | grep Eth
 00:03.0 Ethernet controller: Red Hat, Inc Virtio network device
 
 # ping 10.66.4.153
 PING 10.66.4.153 (10.66.4.153) 56(84) bytes of data.
 64 bytes from 10.66.4.153: icmp_seq=1 ttl=62 time=1.03 ms
 64 bytes from 10.66.4.153: icmp_seq=2 ttl=62 time=0.650 ms
 64 bytes from 10.66.4.153: icmp_seq=3 ttl=62 time=0.792 ms
 
 The L2 guest  can ping another host successfully
​​";;RedHatEnterpriseLinux7/RHEL7-84885
2369;;;;;;;;;7;"4. Change the model 'virtio' to 'rtl8139'  repeat the 1,2 steps
​​";" -netdev tap,fd=29,id=hostnet0 -device rtl8139,netdev=hostnet0,id=net0,mac=52:54:00:3f:50:9e,bus=pci.2,addr=0x3 
​​";;RedHatEnterpriseLinux7/RHEL7-84885
2369;;;;;;;;;8;"5. Change the model 'virtio' to 'e1000'   repeat the 1,2 steps
​​";  -netdev tap,fd=29,id=hostnet0 -device e1000,netdev=hostnet0,id=net0,mac=52:54:00:3f:50:9e,bus=pci.2,addr=0x3;;RedHatEnterpriseLinux7/RHEL7-84885
2370;RHEL7-84886;"[Nested][vIOMMU] Check L2 guest hostdev net function (L1: nat; L2: hostdev)";"L1 guest: virtual network(nat)
L2 guest: PCI passthrough, driver: vfio";Jingjing Shao (jishao);High;Positive;Not Automated;;1;1. virtual network from  host --> L1 guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-84886
2370;;;;;;;;;2;"On the host , prepare the default network

 # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     yes           yes


 # Add the xml info to L1 guest
   <interface type='network'>
       <mac address='52:54:00:f2:40:a6'/>
       <source network='default'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
  

 #   # virsh start vm1
 Domain  vm1  started

 # ps -aux | grep netdev";" Output:
 # ps -aux | grep netdev
 .....
  -netdev tap,fd=31,id=hostnet1,vhost=on,vhostfd=32 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=52:54:00:3f:50:9e,bus=pci.2,addr=0x3 -chardev pty,id=charserial0
 .....";;RedHatEnterpriseLinux7/RHEL7-84886
2370;;;;;;;;;3;2. PCI assignment with passthrough mode (L1 guest->L2 guest);​​;;RedHatEnterpriseLinux7/RHEL7-84886
2370;;;;;;;;;4;"On the L1 guest
 
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  2     jishao                         running
 
 
 # cat device.xml 
      <hostdev type='pci' managed='yes'>
      <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x02' slot='0x03' function='0x0'/>
       </source>
     </hostdev>
 
 # virsh attach-device jishao device.xml
 
​​";"Output:
 # virsh attach-device jishao device.xml
 Device attached successfully
​​";;RedHatEnterpriseLinux7/RHEL7-84886
2370;;;;;;;;;5;"Check the L2 guest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-84886
2370;;;;;;;;;6;"login the l2 guest jishao and check the device
 # lspci

 # virsh nodedev-dumpxml pci_0000_00_02_0

 # ping 10.66.4.153  ---> another host";"Output:
 # lspci
 00:02.0 Ethernet controller: Red Hat, Inc Virtio network device (rev 01)
 
 # virsh nodedev-dumpxml pci_0000_00_02_0
 <device>
   <name>pci_0000_00_02_0</name>
   <path>/sys/devices/pci0000:00/0000:00:02.0</path>
   <parent>computer</parent>
   <driver>
     <name>virtio-pci</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>0</bus>
     <slot>2</slot>
     <function>0</function>
     <product id='0x1000'>Virtio network device</product>
     <vendor id='0x1af4'>Red Hat, Inc</vendor>
   </capability>
 </device>";;RedHatEnterpriseLinux7/RHEL7-84886
2370;;;;;;;;;7;4. Change the model 'virtio' to 'rtl8139' in step 1;​​;;RedHatEnterpriseLinux7/RHEL7-84886
2370;;;;;;;;;8;5. Change the model 'virtio' to 'e1000'   in step 1;(e1000 will be deprecated in rhel8);;RedHatEnterpriseLinux7/RHEL7-84886
2370;;;;;;;;;9;6. Change the model 'virtio' to 'e1000e'   in step 1;​​;;RedHatEnterpriseLinux7/RHEL7-84886
2371;RHEL7-84887;"[Nested][vIOMMU] Check L2 guest hostdev net function (L1: hostdev interface /device; L2: hostdev)";"L1 guest :  PCI assignment with passthrough mode, use the driver : vfio (PF in hostdev device; VF in hostdev interface)
L2 guest:  PCI assignment with passthrough mode, use the driver : vfio";Jingjing Shao (jishao);High;Positive;Not Automated;;1;1, PCI assignment with passthrough mode (Host->L1 guest);​​;Test Case;RedHatEnterpriseLinux7/RHEL7-84887
2371;;;;;;;;;2;"Prepare the device xml as below
     <hostdev type='pci' managed='yes'>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x00' slot='0x19' function='0x0'/>
       </source>
     </hostdev>

 Prepare the guest
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  12   vm1                        running

 # virsh dumpxml  vm1  | grep hostdev

 # virsh attach-device  vm1  device.xml

";"Output:
 # virsh dumpxml  vm1  | grep hostdev
 #
 #
 
 
 # virsh attach-device  vm1  device.xml
 Device attached successfully";;RedHatEnterpriseLinux7/RHEL7-84887
2371;;;;;;;;;3;2, PCI assignment with passthrough mode (L1 guest->L2 guest);​​;;RedHatEnterpriseLinux7/RHEL7-84887
2371;;;;;;;;;4;"# lspci | grep Eth

 Prepare the device xml as below
     <hostdev type='pci' managed='yes'>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x02' slot='0x03' function='0x0'/>
       </source>
     </hostdev>

 Prepare the guest
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  1     vm2                       running

 # virsh dumpxml  vm2   | grep hostdev

 # virsh attach-device  vm2   device.xml

 # virsh dumpxml  vm2   | grep hostdev

";"Output:
 # virsh dumpxml  vm2   | grep hostdev
 #
 #
 
 # virsh attach-device  vm2   device.xml
 Device attached successfully
 
 # virsh dumpxml  vm2   | grep hostdev
 <interface type='hostdev' managed='yes'> 
 <mac address='02:24:6b:89:bc:e9'/>
 <driver name='vfio'/> 
 <source>
 <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x3'/> 
 </source> 
 <alias name='hostdev0'/>
 <address type='pci' domain='0x0000' bus='0x05' slot='0x00' function='0x0'/> 
 </interface>";;RedHatEnterpriseLinux7/RHEL7-84887
2371;;;;;;;;;5;"3,  Check the L2 guest 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-84887
2371;;;;;;;;;6;"Login in the L2 guest
 # lspci | grep Eth

 # ping 10.66.4.153  ---> another host
​​";"Output:
 #   lspci
       +- pci_0000_b4_01_0 
                  | +- pci_0000_b6_00_0";;RedHatEnterpriseLinux7/RHEL7-84887
2371;;;;;;;;;7;"4. Change the xml to interface.xml as below with SRIOV system, then do the steps 1 ~ 3
 <interface type='hostdev' managed='yes'>     
 <mac address='02:24:6b:89:bc:e9'/>
 <source>
 <address type='pci' domain='0x0000' bus='0x02' slot='0x03' function='0x0'/>
 </source>
 </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-84887
2372;RHEL7-84975;[Nested] Check L2 guest virtual network function (L1: hostdev);"Host->L1 guest :   PCI assignment with passthrough mode, use the driver : vfio 
L1 guest->L2 guest:  virtual interface assignment VFIO,  use the driver: virtio, rtl8139, e1000";Jingjing Shao (jishao);High;Positive;Not Automated;;1; 1, PCI assignment with passthrough mode (Host->L1 guest);​​;Test Case;RedHatEnterpriseLinux7/RHEL7-84975
2372;;;;;;;;;2;"Prepare the device xml as below
     <hostdev type='pci' managed='yes'>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x00' slot='0x19' function='0x0'/>
       </source>
     </hostdev>

 Prepare the guest
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  12    q35-js                         running

 # virsh dumpxml q35-js | grep hostdev
 #
 #

 # virsh attach-device q35-js device.xml

 # virsh dumpxml q35-js | grep hostdev";"Output:
 # virsh dumpxml q35-js | grep hostdev 
 .... 
 <interface type='hostdev' managed='yes'> 
 <mac address='02:24:6b:89:bc:e9'/>
 <driver name='vfio'/>
 <source>
 <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x3'/> 
 </source> 
 <alias name='hostdev0'/> 
 <address type='pci' domain='0x0000' bus='0x05' slot='0x00' function='0x0'/> 
 </interface> 
 ....";;RedHatEnterpriseLinux7/RHEL7-84975
2372;;;;;;;;;3;2. virtual network from L1 guest --> L2 guest;​​;;RedHatEnterpriseLinux7/RHEL7-84975
2372;;;;;;;;;4;"On the  L1 guest , prepare the default network

 # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     yes           yes


 # Add the xml info to L2 guest
   <interface type='network'>
       <mac address='52:54:00:f2:40:a6'/>
       <source network='default'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
  
 #   # virsh start vm2
 Domain  vm2  started

 # virsh dumpxml  vm2  | grep hostdev

";"Output:
 # virsh dumpxml  vm2  | grep hostdev
 <interface type='direct'> 
 <mac address='52:54:00:ef:ab:ac'/>
 <source dev='enp182s0' mode='bridge'/> 
 <target dev='macvtap0'/>
 <model type='virtio'/> 
 <alias name='net0'/> 
 <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/> 
 </interface>";;RedHatEnterpriseLinux7/RHEL7-84975
2372;;;;;;;;;5;3, Check the L2 guest;​​;;RedHatEnterpriseLinux7/RHEL7-84975
2372;;;;;;;;;6;"Login in the L2 guest
 # lspci | grep Eth

 # ping 10.66.4.153  ---> another host
​​";"Output:
 # lspci | grep Eth
 00:03.0 Ethernet controller: Red Hat, Inc Virtio network device

 # ping 10.66.4.153
 PING 10.66.4.153 (10.66.4.153) 56(84) bytes of data.
 64 bytes from 10.66.4.153: icmp_seq=1 ttl=62 time=1.03 ms
 64 bytes from 10.66.4.153: icmp_seq=2 ttl=62 time=0.650 ms
 64 bytes from 10.66.4.153: icmp_seq=3 ttl=62 time=0.792 ms

 The L2 guest  can ping another host successfully";;RedHatEnterpriseLinux7/RHEL7-84975
2373;RHEL7-85088;[Scala bility][One domain] Do lifecycle test for guest with maximum vcpus - bug 1289153, bug1433957;"Do lifecycle test for guest with maximum(384) vcpus
";Jingjing Shao (jishao);High;Positive;Not Automated;;1;" 1. Start a VM with 384 VCPUs with xml below.
  <vcpu placement='static'>384</vcpu>
   <resource>
     <partition>/machine</partition>
   </resource>
   <os>
     <type arch='x86_64' machine='pc-q35-rhel7.5.0'>hvm</type>
   </os>
   <features>
     <acpi/>
     <apic/>
     <ioapic driver='qemu'/>
   </features>
   <cpu mode='host-model'>
    <model fallback='allow'/>
    <topology sockets='2' cores='96' threads='2'/>
   </cpu>
 ......
     <iommu model='intel'>
       <driver intremap='on' eim='on'/>
     </iommu>
   </devices>
​​";VM start successfully.;Test Case;RedHatEnterpriseLinux7/RHEL7-85088
2373;;;;;;;;;2;"2. Check the qemu command line for the machine type and cpu topology, login to the guest check there are 384 cpus.
​​";"Output:
 # ps -ef|grep qemu| grep iommu
 qemu     239543      1 99 05:37 ?        00:11:37 /usr/libexec/qemu-kvm -name guest=r7-4t,debug-threads=on -S -object secret,id=masterKey0,format=raw,file=/var/lib/libvirt/qemu/domain-4-r7-4t/master-key.aes -machine pc-q35-rhel7.4.0,accel=kvm,usb=off,dump-guest-core=off,kernel_irqchip=split -cpu IvyBridge,ss=on,pcid=on,hypervisor=on,arat=on,tsc_adjust=on,xsaveopt=on,pdpe1gb=on -m 1024 -realtime mlock=off -smp 384,sockets=2,cores=96,threads=2 -uuid 31dcba01-e7a6-4972-be45-e87713698cf2 ......-device intel-iommu,intremap=on,eim=on......
 
 #cat /proc/cpuinfo | grep processor| wc -l
 384";;RedHatEnterpriseLinux7/RHEL7-85088
2373;;;;;;;;;3;"3. Reboot the VM 10 times, check in guest, no vcpus lost after reboot. 
 # for i in {1..10}; do virsh reboot r7-4t; sleep 8; done 
 Login to VM, check there are 384 vcpus.
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-85088
2373;;;;;;;;;4;"4. Destroy and Start VM 10 times.
 # for i in {1..10}; do virsh destroy r7-4t; sleep 5; virsh start r7-4t; sleep 8; done 
​​";No error happen, check in guest, there are 384 cpus.;;RedHatEnterpriseLinux7/RHEL7-85088
2373;;;;;;;;;5;"5. Restart libvirtd service for 10 times. 
 # for i in {1..10}; do service libvirtd restart; sleep 3; done";No error happen, check in guest, there are 384 cpus.;;RedHatEnterpriseLinux7/RHEL7-85088
2374;RHEL7-85122;[attach-device][ovs] attach/detach interface for bridge type using openvswitch by attach-device; The bridge type interface using openvswitch support hot plug with attach-device, do not support update-interface.;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"1. attach the interface by attach-device
 # cat interface.xml
  <interface type='bridge'>
 <source bridge='ovsbr'/>
 <virtualport type='openvswitch'/>
 </interface>
 
 # virsh attach-device rhel7 interface.xml 
 Device attached successfully
 
 # virsh dumpxml rhel7 | grep /interface -B10
     <interface type='bridge'>
       <mac address='52:54:00:e3:96:82'/>
       <source bridge='ovsbr'/>
       <virtualport type='openvswitch'>
         <parameters interfaceid='889bbb1f-e626-465d-a2cc-c131cfb6bb49'/>
       </virtualport>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 login the guest and check the network function works well"; The interface can be attached by attach-device;Test Case;RedHatEnterpriseLinux7/RHEL7-85122
2374;;;;;;;;;2;"# virsh detach-interface rhel7 bridge 52:54:00:e3:96:82
 Interface detached successfully
 
 check the interface is gone.";it can be detached by detach-interface;;RedHatEnterpriseLinux7/RHEL7-85122
2374;;;;;;;;;3;"2. attach then detach-device
 # virsh attach-device rhel7 interface.xml  
 Device attached successfully
 
 # virsh dumpxml rhel7 | grep /interface -B10 > interface2.xml
    <interface type='bridge'>
       <mac address='52:54:00:91:06:02'/>
       <source bridge='ovsbr'/>
       <virtualport type='openvswitch'>
         <parameters interfaceid='0a1c1057-996b-48c6-9478-1f5123128dcc'/>
       </virtualport>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh detach-device rhel7 interface2.xml
 Device detached successfully";it can be detached by detach-device;;RedHatEnterpriseLinux7/RHEL7-85122
2374;;;;;;;;;4;"currently the attach-interface do not support the bridge using openvswitch.
 
 # virsh attach-interface rhel7 bridge ovsbr
 error: Failed to attach interface
 error: Unable to add bridge ovsbr port vnet0: Operation not supported";attach-interface do not support openvswitch currently;;RedHatEnterpriseLinux7/RHEL7-85122
2375;RHEL7-85123;[attach-device][other types] hotplug mcast, udp, tcp type of interface by attach-device - negative;"The scope should include all the interface/network type. As some of them are covered in privious cases, this case will cover user, mcast, ethernet, tcp tunnel, udp unicase tunnel. If any issue, refer to http://libvirt.org/git/?p=libvirt.git;a=commitdiff;h=c266b6044003ac - "" due to a bug in our code we might have been allowing hotplug for some types that didn't actually work.""";Yalan Zhang (yalzhang);High;Negative;Not Automated;;1;mcast type;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-85123
2375;;;;;;;;;2;"# virsh start rhel7
 Domain rhel7 started
 
 # cat mcast.xml 
 <interface type='mcast'>
     <mac address='52:54:00:6d:90:01'/>
     <source address='230.0.0.1' port='5558'/>
   </interface>
 
 # virsh attach-device rhel7 mcast.xml 
​​";"error: Failed to attach device from mcast.xml
 error: Operation not supported: hotplug of interface type of mcast is not implemented yet";;RedHatEnterpriseLinux7/RHEL7-85123
2375;;;;;;;;;3;tcp tunnel;​​;;RedHatEnterpriseLinux7/RHEL7-85123
2375;;;;;;;;;4;"# cat server.xml
    <interface type='server'>  
    <mac address='52:54:00:22:c9:42'/>
    <source address='192.168.0.1' port='5558'/>
 </interface>
 
 # cat client.xml;
   <interface type='client'>  
    <mac address='52:54:00:8b:c9:51'/>
    <source address='192.168.0.1' port='5558'/>
 </interface>
 
 # virsh attach-device rhel7 server.xml
 
 # virsh attach-device rhel7 client.xml
 
​​";"# virsh attach-device rhel7 server.xml
 error: Failed to attach device from server.xml
 error: Operation not supported: hotplug of interface type of server is not implemented yet
 
 # virsh attach-device rhel7 client.xml
 error: Failed to attach device from client.xml
 error: Operation not supported: hotplug of interface type of client is not implemented yet";;RedHatEnterpriseLinux7/RHEL7-85123
2375;;;;;;;;;5;udp tunnel;​​;;RedHatEnterpriseLinux7/RHEL7-85123
2375;;;;;;;;;6;"# cat udp.xml 
  <interface type='udp'>
       <mac address='52:54:00:22:c9:42'/>
     <source address='127.0.0.1' port='11115'>
       <local address='127.0.0.1' port='11116'/>
     </source>
   </interface>
 # virsh attach-device rhel7 udp.xml 
​​";"error: Failed to attach device from udp.xml
 error: Operation not supported: hotplug of interface type of udp is not implemented yet";;RedHatEnterpriseLinux7/RHEL7-85123
2375;;;;;;;;;7;bridge with unprivileged user;​​;;RedHatEnterpriseLinux7/RHEL7-85123
2376;RHEL7-85309;ALUA;ALUA;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-85309
2377;RHEL7-85310;bz1088445_scsi_lun_scan;bz1088445_scsi_lun_scan;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-85310
2378;RHEL7-85311;ses_enclosure;ses_enclosure;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-85311
2379;RHEL7-85312;ses_led;ses_led;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-85312
2380;RHEL7-85313;UA_log_test;UA_log_test;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-85313
2381;RHEL7-85314;bz1076147_parallel_mode;bz1076147_parallel_mode;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-85314
2382;RHEL7-85315;cry_command;cry_command;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-85315
2383;RHEL7-85316;cry_key;cry_key;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-85316
2384;RHEL7-85318;dif_dix_sanity_check;dif_dix_sanity_check;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-85318
2385;RHEL7-85319;dif_dix_sg_reset_BZ_886370;dif_dix_sg_reset_BZ_886370;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-85319
2386;RHEL7-85320;dif_dix_stable_cache_BZ_729080;dif_dix_stable_cache_BZ_729080;Guangwu Zhang (guazhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-85320
2387;RHEL7-85758;Check virt-viewer can reconnect libvirtd via ssh after libvirtd restart #BZ1164052;"Check virt-viewer can reconnect libvirtd via ssh after libvirtd restart

";Yan Fu (yafu);High;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-85758
2388;RHEL7-85840;"[ethernet] start guest with ethernet type interface with <script path=""""/> - Bug 1412834";existing guests that were created on earlier versions of Nova will create an empty path, early Libvirt allowed this without complaint, but new version of libvirt do not support this. To keep compatibility, modidy libvirt to accept this, while the xml validate will not allowed this, we can ignore it.;Yalan Zhang (yalzhang);Low;Positive;Not Automated;;1;"1. prepare an guest and edit the guest's xml as below with <script path=""""/>
 
    <interface type='ethernet'>
       <script path=''/>
       <model type='virtio'/>
   <target dev='tapb938d2ef-bf'/>
     </interface>
 
 # virsh edit rhel7.3
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content
 
 Failed. Try again? [y,n,i,f,?]:  =========> press 'i'
 Domain rhel7.3 XML configuration edited.
​​";"after press ""i"" the xml can save";Test Case;RedHatEnterpriseLinux7/RHEL7-85840
2388;;;;;;;;;2;"2. 
 # virsh start rhel7.3
 Domain rhel7.3 started
​​";The guest can start successfully;;RedHatEnterpriseLinux7/RHEL7-85840
2388;;;;;;;;;3;3. # virsh dumpxml rhel7.3 | grep /interface -B8;"   <interface type='ethernet'>
       <mac address='02:b9:38:d2:ef:bf'/>
       <script path=''/>
       <target dev='tapb938d2ef-bf'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-85840
2389;RHEL7-86131;[virtlogd] [max_clients] Set max_clients to valid value;Verify virtlogd can start and set max_clients correctly when max_clients is valid value.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set debug log for virtlogd in /etc/libvirt/virtlogd.conf:
 
 log_level = 1
 log_outputs=""1:file:/var/log/libvirt/virtlogd.log""";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-86131
2389;;;;;;;;;2;"Set max_clients to a value in range (0, 4294967295) in /etc/libvirt/virtlogd.conf:
 
 max_clients = 5
";​​;;RedHatEnterpriseLinux7/RHEL7-86131
2389;;;;;;;;;3;"(Re)start virtlogd service:
 # systemctl restart virtlogd
​​";​​;;RedHatEnterpriseLinux7/RHEL7-86131
2389;;;;;;;;;4;"Start a guest:
 # virsh start rhel7";​​;;RedHatEnterpriseLinux7/RHEL7-86131
2389;;;;;;;;;5;"Check the virtlogd.log:
 # grep nclients_max /var/log/libvirt/virtlogd.log
​​";"In the log, we can see nclients_max=5.
 
 Output:
 2017-03-09 02:42:11.788+0000: 8829: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=1 nclients_max=5 nclients_unauth=0 nclients_unauth_max=5
 2017-03-09 02:42:11.791+0000: 8829: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=0 nclients_max=5 nclients_unauth=0 nclients_unauth_max=5";;RedHatEnterpriseLinux7/RHEL7-86131
2390;RHEL7-86144;[virtlogd] [max_clients] [Invalid boundary] Set max_clients to invalid boundary values;"Verify that virtlogd can't start successfully when max_clients is set to invalid boundary values.
Note: The valid range of max_clients is 0~4294967295(unsigned int) . 
Test matrix: -1, 429496726
 
 Bug 1354253 - virtlogd should fail to start when set max_clients larger than the maximum value of int type";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Set debug log for virtlogd in /etc/libvirt/virtlogd.conf:
 
 log_level = 1
 log_outputs=""1:file:/var/log/libvirt/virtlogd.log""";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-86144
2390;;;;;;;;;2;"Set max_clients to invalid boundary valur in /etc/libvirt/virtlogd.conf according to the test matrix in description.
 1) For max_clients = 4294967296:
 2) For max_clients = -1:";​​;;RedHatEnterpriseLinux7/RHEL7-86144
2390;;;;;;;;;3;"Start virtlogd:
 # virtlogd
​​";"virtlogd failed to start and output clear error message.

 Output:
 1) For max_clients=4294967296:
 2017-03-09 00:45:17.530+0000: 28396: info : libvirt version: 3.1.0, package: 2.el7 (Red Hat, Inc. <http://bugzilla.redhat.com/bugzilla>, 2017-03-08-08:04:09, x86-037.build.eng.bos.redhat.com)
 2017-03-09 00:45:17.530+0000: 28396: info : hostname: bogon
 2017-03-09 00:45:17.530+0000: 28396: error : main:969 : Can't load config file: internal error: /etc/libvirt/virtlogd.conf: value for 'max_clients' parameter must be in range 0:4294967295: /etc/libvirt/virtlogd.conf

 2) For max_clients=-1:
 017-04-16 09:39:22.884+0000: 23828: info : libvirt version: 3.2.0, package: 2.virtcov.el7 (Red Hat, Inc. <http://bugzilla.redhat.com/bugzilla>, 2017-04-10-10:58:42, x86-038.build.eng.bos.redhat.com)
 2017-04-16 09:39:22.884+0000: 23828: info : hostname: intel-5205-32-1.englab.nay.redhat.com
 2017-04-16 09:39:22.884+0000: 23828: error : main:972 : Can't load config file: internal error: /etc/libvirt/virtlogd.conf: expected an unsigned integer for 'max_clients' parameter: /etc/libvirt/virtlogd.conf
​​";;RedHatEnterpriseLinux7/RHEL7-86144
2391;RHEL7-86147;AZURE-TC:[Reliability]Storage: Add/Remove two dynamic scsi disks for multiple times from host;AZURE-TC:[Reliability]Storage: Add/Remove two dynamic scsi disks for multiple times from host;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"1. Use CLI to add new disk to the VM 
 vm disk attach-new <resource-group> <vm-name> <size-in-gb> [vhd-name]
 
​​";"1. Check the new disk has been created to taget location.
 2. Check the disks have attached to VM, 
 3. Check hte disks can be removed.
 4. Check the dmesg without Call Track, and no any panic after exectued step2,3 for multiple times.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-86147
2391;;;;;;;;;2;"2.Use CLI to remove disk
 vm disk detach <resource-group> <vm-name> <lun>
​​";"
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-86147
2391;;;;;;;;;3;"3.Repeat performing step 1 and step 2 10 times.
 # for i in {1..10};do azure vm disk attach walaautoarmwestus walaautor75a1n https://walaautoarmwestus.blob.core.windows.net/vhds/walaautor75a1n-disk3.vhd;sleep 3;az vm disk detach -g walaautoarmwestus --vm-name walaautor75a1n -n walaautor75a1n-disk3;sleep 3;echo $i;done
​​";​​;;RedHatEnterpriseLinux7/RHEL7-86147
2391;;;;;;;;;4;"4.Check log inside the VM
 tailf /var/log/message";"There's no error logs
​​";;RedHatEnterpriseLinux7/RHEL7-86147
2391;;;;;;;;;5;config ;​​;;RedHatEnterpriseLinux7/RHEL7-86147
2392;RHEL7-86148;AZURE-TC:[Virtual block device]Expand the dynamic SCSI vhdx disk when the guest is running with I/O stress (WS2012R2);(image: /polarion/icons/default/enums/type_blue_testcase.png);Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"1. Login the guest and get the size of the dynamic SCSI vhdx disk with 1G.
 # fdisk -l
 # mount new disk to /mnt/";"At step 3, failed to expand the dynamic SCSI vhdx disk to a smaller size.
 At step 4, expand the dynamic SCSI vhdx disk to a larger size successfully.
 At step 5, the Current File Size = Maximum Disk Size = the size you input in
 step 3.
 At step 6, the disk size got from the RHEL guest is the same with that in step
 4.
 At step 7, Check there is no Call Trace or other error information in
 dmesg.#dmesg";Test Case;RedHatEnterpriseLinux7/RHEL7-86148
2392;;;;;;;;;2;"2. Run the iozone in the disk. And last at least 1 hour.
 #iozone -a -g 2G -n 10M -s 2020M -f /mnt/io_file -Rab /home/aiozon.xls";​​;;RedHatEnterpriseLinux7/RHEL7-86148
2392;;;;;;;;;3;"3. Expand the dynamic SCSI .vhdx disk to a smaller size.
 Choose the VM in Hyper-V manager. Click ""Edit Disk"" in the right.
 Find out where is the Virtual Block Device.  Choose ""Expand"" in Choose Action.
 Configure Disk. Input a new size smaller than the old one.";​​;;RedHatEnterpriseLinux7/RHEL7-86148
2392;;;;;;;;;4;"4. Expand the dynamic SCSI vhdx disk to a larger size.
 Choose the VM in Hyper-V manager. Click ""Edit Disk"" in the right.
 Find out where is the Virtual Block Device.  Choose ""Expand"" in Choose Action.
 Configure Disk.
 Input a new size larger than the old one.
 Click ""finish"".";​​;;RedHatEnterpriseLinux7/RHEL7-86148
2392;;;;;;;;;5;"5. Check the disk size from Hyper-V manager.
 Click ""Inspect"". Get the values of ""Current File Size"" and ""Maximum Disk
 Size"".";​​;;RedHatEnterpriseLinux7/RHEL7-86148
2392;;;;;;;;;6;"6. Check the disk size from the guest.
 # fdisk -l";​​;;RedHatEnterpriseLinux7/RHEL7-86148
2392;;;;;;;;;7;"7. Check the disk that should be readable and writeable. Do some oprations,
 such as, dd, cp, mkfs, trouch and so on. Check there is no Call Trace or other
 error information in dmesg.#dmesg";​​;;RedHatEnterpriseLinux7/RHEL7-86148
2393;RHEL7-86176;[vcpupin] check the vcpu affinity when remove the cpuset controller from the libvirt configuration - Bug 1396040;allowing to use all host CPUs if the cpuset controller is not configured by libvirt. There's a long-standing known issue with the cpuset controller as used in the machine slice that prevents use of  host CPUs that have been set offline and then online again. It should actually be possible to bypass this by removing the cpuset controller from the libvirt configuration.;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. edit the /etc/libvirt/qemu.conf to disable cpuset controller, then restart libvirtd
          # cat /etc/libvirt/qemu.conf
          ...
          cgroup_controllers = [ ""cpu"", ""devices"", ""memory"", ""blkio"", ""cpuacct"" ]
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-86176
2393;;;;;;;;;2;"2. set cpu3 offline, then start a guest
          # echo 0 >  /sys/devices/system/cpu/cpu3/online
 
          # virsh start rhel7
          Domain rhel7 started
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-86176
2393;;;;;;;;;3;"# virsh vcpuinfo rhel7
​​";"      VCPU:           0
        CPU:            0
        State:          running
        CPU time:       4.8s
        CPU Affinity:   yyy-

 (pin to all live physical cpu)";;RedHatEnterpriseLinux7/RHEL7-86176
2393;;;;;;;;;4;"3. enable cpu3, then restart the guest, check the guest can use the offline-online cpu.
          # echo 1 >  /sys/devices/system/cpu/cpu3/online
          # virsh destroy rhel7
          # virsh start rhel7
​​";​​;;RedHatEnterpriseLinux7/RHEL7-86176
2393;;;;;;;;;5;"# virsh vcpuinfo rhel7
​​";"VCPU:           0
        CPU:            1
        State:          running
        CPU time:       16.0s
        CPU Affinity:   yyyy

 (pin to all live physical cpu, no need restart the guest)";;RedHatEnterpriseLinux7/RHEL7-86176
2393;;;;;;;;;6;"4. when the guest is running, do offline and online
          # echo 0 >  /sys/devices/system/cpu/cpu2/online
          # virsh vcpuinfo rhel7
 
​​";"VCPU:           0
        CPU:            1
        State:          running
        CPU time:       22.9s
        CPU Affinity:   yy-y";;RedHatEnterpriseLinux7/RHEL7-86176
2393;;;;;;;;;7;"# echo 1 >  /sys/devices/system/cpu/cpu2/online
        # virsh vcpuinfo rhel7";"VCPU:           0
        CPU:            0
        State:          running
        CPU time:       23.0s
        CPU Affinity:   yyyy";;RedHatEnterpriseLinux7/RHEL7-86176
2393;;;;;;;;;8;"5. when the guest is runnig, do save and restore
          # echo 0 >  /sys/devices/system/cpu/cpu1/online
​​";​​;;RedHatEnterpriseLinux7/RHEL7-86176
2393;;;;;;;;;9;# virsh vcpuinfo rhel7;"VCPU:           0
        CPU:            2
        State:          running
        CPU time:       0.1s
        CPU Affinity:   y-yy";;RedHatEnterpriseLinux7/RHEL7-86176
2393;;;;;;;;;10;"# virsh save rhel7 /tmp/rhel7.save
        Domain rhel7 saved to /tmp/rhel7.save
 
        # echo 1 >  /sys/devices/system/cpu/cpu1/online
 
        # virsh restore /tmp/rhel7.save
        Domain restored from /tmp/rhel7.save";​​;;RedHatEnterpriseLinux7/RHEL7-86176
2393;;;;;;;;;11;"# virsh vcpuinfo rhel7
​​";"VCPU:           0
        CPU:            3
        State:          running
        CPU Affinity:   yyyy";;RedHatEnterpriseLinux7/RHEL7-86176
2393;;;;;;;;;12;"6. set vcpu affinity, then check
 
          guest is running
          # virsh vcpuinfo rhel7
          VCPU:           0
          CPU:            3
          State:          running
          CPU time:       17.4s
          CPU Affinity:   yyyy
 
          # echo 0 > /sys/devices/system/cpu/cpu3/online
          # virsh vcpuinfo rhel7
          VCPU:           0
          CPU:            1
          State:          running
          CPU time:       22.0s
          CPU Affinity:   yyy-
 
 # virsh vcpupin rhel7 0 0-2
        # echo 1 > /sys/devices/system/cpu/cpu3/online
 
        # virsh vcpuinfo rhel7
        VCPU:           0
        CPU:            1
        State:          running
        CPU time:       22.0s
        CPU Affinity:   yyy-
 
        # service libvirtd restart
        Redirecting to /bin/systemctl restart  libvirtd.service
 
        # virsh vcpuinfo rhel7
        VCPU:           0
        CPU:            0
        State:          running
        CPU time:       22.0s
        CPU Affinity:   yyy-";​​;;RedHatEnterpriseLinux7/RHEL7-86176
2393;;;;;;;;;13;# echo 0 >/sys/devices/system/cpu/cpu2/online;​​;;RedHatEnterpriseLinux7/RHEL7-86176
2393;;;;;;;;;14;"# virsh vcpuinfo rhel7
 
 
​​";"VCPU:           0
 CPU:            1
 State:          running
 CPU time:       13.1s
 CPU Affinity:   yy--";;RedHatEnterpriseLinux7/RHEL7-86176
2393;;;;;;;;;15;# echo 1 >/sys/devices/system/cpu/cpu2/online;​​;;RedHatEnterpriseLinux7/RHEL7-86176
2393;;;;;;;;;16;"# virsh vcpuinfo rhel7
 
 
​​";"VCPU:           0
 CPU:            1
 State:          running
 CPU time:       13.2s
 CPU Affinity:   yyy-";;RedHatEnterpriseLinux7/RHEL7-86176
2394;RHEL7-86414;[spice]Start multiple guest  with spice autoport enabled at the same time;"When multiple guests start at the same time, port allocation should not conflict.
 Bug 1397440 - port allocator allocates the same port for multiple guests (race condition)";Fangge Jin (fjin);High;Positive;Not Automated;;1;"1. Edit or define 20 guests with such setting:
 1) with spice graphic
 2) set spice autoport=yes";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-86414
2394;;;;;;;;;2;"2.Start 20 guests concurently:
 # for i in {1..20}; do virsh create guest$i.xml & date; done";​​;;RedHatEnterpriseLinux7/RHEL7-86414
2394;;;;;;;;;3;"3.Check active guests:
 # virsh list
  ";"all the 20 guests are running. Output:
 
 Id    Name                           State
 ----------------------------------------------------
  8     guest1                         running
  9     guest3                         running
  10    guest4                         running
  11    guest2                         running
  12    guest5                         running
  13    guest9                         running
  14    guest10                        running
  15    guest12                        running
  16    guest13                        running
  17    guest16                        running
  18    guest6                         running
  19    guest19                        running
  20    guest20                        running
  21    guest18                        running
  22    guest7                         running
  23    guest8                         running
  24    guest11                        running
  25    guest15                        running
  26    guest17                        running
  27    guest14                        running
​​";;RedHatEnterpriseLinux7/RHEL7-86414
2394;;;;;;;;;4;"4.Check the display URI:
 # for i in {1..20}; do virsh domdisplay guest$i ; done
​​";"each guest has a unique port. Output:
 
 spice://127.0.0.1:5903
 spice://127.0.0.1:5901
 spice://127.0.0.1:5902
 spice://127.0.0.1:5904
 spice://127.0.0.1:5910
 spice://127.0.0.1:5913
 spice://127.0.0.1:5915
 spice://127.0.0.1:5905
 spice://127.0.0.1:5906
 spice://127.0.0.1:5916
 spice://127.0.0.1:5907
 spice://127.0.0.1:5908
 spice://127.0.0.1:5919
 spice://127.0.0.1:5917
 spice://127.0.0.1:5909
 spice://127.0.0.1:5918
 spice://127.0.0.1:5914
 spice://127.0.0.1:5912
 spice://127.0.0.1:5911
 spice://127.0.0.1:5920
​​";;RedHatEnterpriseLinux7/RHEL7-86414
2395;RHEL7-86458;[virtual desktop]Screen capture using screendump;Use alternate screen capture method screendump to capture guest screen;Zhiyi Guo (zhguo);High;Positive;Manual Only;;1;"1. Boot guest with vga device like qxl-vga/std vga/virtio-vga and set the name of the device, example:
         -smp 4 \
         -device qxl-vga,id=primaryvga \
         -device virtio-serial -chardev spicevmc,id=vdagent,debug=0,name=vdagent \
         -serial unix:/tmp/console,server,nowait \
         -device virtserialport,chardev=vdagent,name=com.redhat.spice.0 \
         -drive file=rhel74.qcow2,if=none,id=drive-scsi-disk0,format=qcow2,cache=none,werror=stop,rerror=stop -device virtio-scsi-pci,id=scsi0 -device scsi-hd,drive=drive-scsi-disk0,bus=scsi0.0,scsi-id=0,lun=0,id=scsi-disk0,bootindex=1 \
         -monitor stdio \
        -spice port=5900,disable-ticketing \
        -device virtio-serial-pci,id=virtio-serial1 \
        -chardev spicevmc,id=charchannel0,name=vdagent \
        -device virtserialport,bus=virtio-serial1.0,nr=3,chardev=charchannel0,id=channel0,name=com.redhat.spice.0 \
         -netdev tap,id=idinWyYp,vhost=on -device virtio-net-pci,mac=42:ce:a9:d2:4d:d7,id=idlbq7eA,netdev=idinWyYp \
        -qmp tcp:10.73.73.79:4444,server,nowait \
"; Guest boot successfully ;Test Case;RedHatEnterpriseLinux7/RHEL7-86458
2395;;;;;;;;;2;"2. Screendump by qmp cmd: 
 {""execute"": ""qmp_capabilities""}
 {""execute"":""screendump"",""arguments"":{""filename"":""/tmp/primaryvga""}";Screendump file generate at /home and named as primaryvga.ppm. Check the file, it should show the screen of the guest and resolution same as guest resoultion;;RedHatEnterpriseLinux7/RHEL7-86458
2395;;;;;;;;;3;3. Change guest resolution, play a video from youtube inside guest and screendump by qmp cmd again;Screendump file generate. Check the file, it should show the screen of the guest and resolution same as guest resoultion;;RedHatEnterpriseLinux7/RHEL7-86458
2395;;;;;;;;;4;"4. Screendump of a none vga device,eg a scsi disk
 {""execute"":""screendump"",""arguments"":{""filename"":""/tmp/invalid"",""device"":""scsi-disk0"",""head"":0}}";"Screendump won't generate and error prompt from qmp:{""error"": {""class"": ""DeviceNotFound"", ""desc"": ""Device 'scsi-disk0' not found""}}";;RedHatEnterpriseLinux7/RHEL7-86458
2396;RHEL7-86466;[Virutal network] resolve the domain name by libvirt-guest module;As of v3.0.0 release, libvirt offers two NSS modules implementing two different methods of hostname translation. The first and older method is implemented by libvirt plugin and basically looks up the hostname to IP address translation in DHCP server records. Therefore this is dependent on hostname provided by guests. Thing is, not all the guests out there provide one in DHCP transactions, or not every sysadmin out there believes all the guests. Hence libvirt implements second method in libvirt_guest module which does libvirt guest name to IP address translation (regardless of hostname set in the guest).;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"Both 2 methods
 1. edit the /etc/nsswitch.conf to includes this content
 hosts:      files libvirt libvirt_guest dns myhostname";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-86466
2396;;;;;;;;;2;2. for rhel7.4, need to restart libvirtd, for libvirt newer than 3.3.0, no need.;Only restart is needed and with 3.3.0 release (which is not landing in 7.4 but 7.5) even the restart of the network will no longer be needed.;;RedHatEnterpriseLinux7/RHEL7-86466
2396;;;;;;;;;3;"3. start the guest rhel7.4 with interface connected to default
 (you can add the xml direct into the guest xml, or attach an interface by # virsh attach-interface rhel7.4 network default)
 
 (if the guest is already running and got an ip address, you need to restart network service or use dhclient to get the ip address again as when it request ip, libvirt can record the name)";​​;;RedHatEnterpriseLinux7/RHEL7-86466
2396;;;;;;;;;4;"4. # virsh net-dhcp-leases default
 
​​";" Expiry Time          MAC address        Protocol  IP address                Hostname        Client ID or DUID
 -------------------------------------------------------------------------------------------------------------------
  2017-03-12 14:16:28  52:54:00:7a:3c:be  ipv4      192.168.122.156/24        -               -
 
 (when the guest has no hostname configured, there are no hostname in the dhcp records. so will use libvirt_guest module configured in the nsswitch.conf )";;RedHatEnterpriseLinux7/RHEL7-86466
2396;;;;;;;;;5;"5. # ping rhel7.4
​​";"PING rhel7.4 (192.168.122.156) 56(84) bytes of data.
 64 bytes from 192.168.122.156 (192.168.122.156): icmp_seq=1 ttl=64 time=0.344 ms
 
 (ping succeed)";;RedHatEnterpriseLinux7/RHEL7-86466
2396;;;;;;;;;6;"6. configure the guest's name 
 no guest:
 [root@localhost ~]# hostnamectl set-hostname nssguest
 [root@localhost ~]# hostname
 nssguest
 # cat /etc/hostname
 nssguest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-86466
2396;;;;;;;;;7;"7. detach the interface which have leases record already, and attach a new interface with different mac 
 
 # virsh detach-interface rhel7.4 network --mac  52:54:00:7a:3c:be
 Interface detached successfully
 
 # virsh attach-interface rhel7.4 network default
 Interface attached successfully
 
 # virsh net-dhcp-leases default 
​​";" Expiry Time          MAC address        Protocol  IP address                Hostname        Client ID or DUID
 -------------------------------------------------------------------------------------------------------------------
  2017-03-12 14:27:43  52:54:00:6f:9c:23  ipv4      192.168.122.127/24        nssguest        -
  2017-03-12 14:23:30  52:54:00:7a:3c:be  ipv4      192.168.122.156/24        -               -
 
 (If the guest consult an ip address after its hostname configured in the guest, the guest's hostname can be recorded in the lease record. And the libvirt plugin name resolve method can be used, that is , both the libvirt, libvirt_guest plugin can be used. Both the guest's hostname configured in the guest and the name in the xml are ok to be resolved.)";;RedHatEnterpriseLinux7/RHEL7-86466
2396;;;;;;;;;8;"# ping rhel7.4  -c 2
​​";"PING rhel7.4 (192.168.122.127) 56(84) bytes of data.
 64 bytes from 192.168.122.127 (192.168.122.127): icmp_seq=1 ttl=64 time=0.289 ms
 
 (ping succeed)";;RedHatEnterpriseLinux7/RHEL7-86466
2396;;;;;;;;;9;"# ping nssguest
​​";"PING nssguest (192.168.122.127) 56(84) bytes of data.
 64 bytes from 192.168.122.127 (192.168.122.127): icmp_seq=1 ttl=64 time=0.357 ms
 
 (ping succeed)";;RedHatEnterpriseLinux7/RHEL7-86466
2396;;;;;;;;;10;Disable one of them;​​;;RedHatEnterpriseLinux7/RHEL7-86466
2396;;;;;;;;;11;"1. # vim /etc/nsswitch.conf
 hosts:      files  libvirt_guest dns myhostname";​​;;RedHatEnterpriseLinux7/RHEL7-86466
2396;;;;;;;;;12;"# ping rhel7.4  -c 2
 
​​";"PING rhel7.4 (192.168.122.127) 56(84) bytes of data.
 64 bytes from 192.168.122.127 (192.168.122.127): icmp_seq=1 ttl=64 time=0.298 ms
 ...
 (ping succeed)
 
 the nssguest will not work (libvirt module is not enabled)";;RedHatEnterpriseLinux7/RHEL7-86466
2396;;;;;;;;;13;"# ping nssguest -c 2
​​";ping: nssguest: Name or service not known;;RedHatEnterpriseLinux7/RHEL7-86466
2396;;;;;;;;;14;"2. # vim /etc/nsswitch.conf
 hosts:      files libvirt dns myhostname";​​;;RedHatEnterpriseLinux7/RHEL7-86466
2396;;;;;;;;;15;"# ping nssguest -c 2 
 
​​";"PING nssguest (192.168.122.127) 56(84) bytes of data.
 64 bytes from 192.168.122.127 (192.168.122.127): icmp_seq=1 ttl=64 time=0.323 ms
 
 (ping succeed)
 
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-86466
2396;;;;;;;;;16;"# ping rhel7.4  -c 2
​​";"ping: rhel7.4: Name or service not known
 
 (the rhel7.4 will not work (libvirt_guest module is not enbled))";;RedHatEnterpriseLinux7/RHEL7-86466
2397;RHEL7-86467;[cpu model]Flag management through flag=on/off;qemu support manage guest flags through flag=on/off ;Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;1;" 1. Filter some flags and add some flags to guest then boot the guest. e.g boot guest with option:
 -cpu SandyBridge,avx=off,avx2=on,check,enforce"; Guest can boot and no warning prompt. Check flags from guest, flag filtered should not be presented and flag added should be presented.;Test Case;RedHatEnterpriseLinux7/RHEL7-86467
2397;;;;;;;;;2;"2. Add same flag through both legacy +/-flag and flag=on/off then boot the guest. e.g boot guest with option:
  -cpu SandyBridge,+avx2,avx2=on,check,enforce
 or
 -cpu SandyBridge,-avx,avx=off,check,enforce
 or
 -cpu SandyBridge,-avx,avx=on,check,enforce
 or
 -cpu SandyBridge,+avx2,avx2=off,check,enforce
 (Note: Only above combinations are valid for test)";"Guest can boot and qemu should prompt such kind of warning, e.g: (qemu) qemu-kvm: warning: Ambiguous CPU model string. Don't mix both ""+avx2"" and ""avx2=on""
 qemu-kvm: warning: Compatibility of ambiguous CPU model strings won't be kept on future QEMU versions

";;RedHatEnterpriseLinux7/RHEL7-86467
2398;RHEL7-86468;[cpu model]L3 cache present to guest;Guest get 16MB L3 cache from rhel7.4;Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;1;Boot guest  with default machine type(pc-i440fx-rhel7.4.0) and check L3 cache inside guest; Guest can see 16MB L3 cache from lscpu(linux)/cpu-Z(windows);Test Case;RedHatEnterpriseLinux7/RHEL7-86468
2398;;;;;;;;;2;Boot guest with old machine type(pc-i440fx-rhel7.3.0 and older) and check if L3 cache exist.;Cannot find L3 cache info inside guest;;RedHatEnterpriseLinux7/RHEL7-86468
2399;RHEL7-86469;[cpu model]Max vcpus qemu supported increase to 384(Q35 only);Witch kerne_irqchip support, max vcpus qemu supported increase to 384 on Q35 machine type;Zhiyi Guo (zhguo);High;Positive;Not Automated;;1;1. Boot guest with key parameters: -smp 384 -machine q35,kernel-irqchip=split -device intel-iommu,intremap=on,eim=on; Guest boot successfully. Check vgpu number from guest, guest get 288 vcpu;Test Case;RedHatEnterpriseLinux7/RHEL7-86469
2399;;;;;;;;;2;2. Boot guest with -smp 384 -machine q35;qemu should prompt error and quit;;RedHatEnterpriseLinux7/RHEL7-86469
2400;RHEL7-86470;[cpu model]invariant tsc allow migration when set tsc value explicitly;invariant tsc allow migration when set tsc value explicitly;Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;1;boot guest with -cpu cpu_model,+invtsc,tsc-freq=1600000000... from src host.;Guest can boot successfully, check tsc from guest(use lscpu in linux and cpu-z in windows), tsc value should equal to the value specified in tsc-freq;Test Case;RedHatEnterpriseLinux7/RHEL7-86470
2400;;;;;;;;;2;Launch qemu from des host with -cpu cpu_model,+invtsc,tsc-freq=1600000000... migrate from src host to des host.;Guest migration complete without error, check tsc from guest during/after migration, tsc value should be same as the value specified in tsc-freq;;RedHatEnterpriseLinux7/RHEL7-86470
2400;;;;;;;;;3;Specify -cpu cpu_model,+invtsc but don't set tsc-freq in src and des qemu and do migration again.;qemu should prompt 'State blocked by non-migratable device 'cpu'';;RedHatEnterpriseLinux7/RHEL7-86470
2401;RHEL7-86471;[cpu model]Support avx512 series flags part III;support pass avx512_4vnniw, avx512_4fmaps, avx512_vpopcntdq to guest;Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;1; 1.boot guest with -cpu Skylake-Client,+avx512_4vnniw, +avx512_4fmaps, +avx512_vpopcntdq,enforce; Guest should boot successfully. Check cpu flags inside guest, these flags are presented.;Test Case;RedHatEnterpriseLinux7/RHEL7-86471
2402;RHEL7-86472;[cpu model]Support memory protection key;support memory protection key flags: pku and ospke;Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;1; 1.boot guest with -cpu model,+pku,+ospke,check,enforce; Guest can boot successfully. Check cpu flags from guest, pku and ospke should be presented;Test Case;RedHatEnterpriseLinux7/RHEL7-86472
2403;RHEL7-86473;[cpu model]Support intel lmce;Support intel lmce function for guest;Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;1;Boot guest with -cpu model,lmce=on ... ;Guest can boot successfully. lmce is enabled inside guest.;Test Case;RedHatEnterpriseLinux7/RHEL7-86473
2403;;;;;;;;;2;Boot guest with -cpu model;Guest can boot successfully. lmce is disabled inside guest.;;RedHatEnterpriseLinux7/RHEL7-86473
2403;;;;;;;;;3;Boot guest with -cpu model,lmce=on,enforce. . on AMD host;qemu should fail to start;;RedHatEnterpriseLinux7/RHEL7-86473
2403;;;;;;;;;4;Lauch guest with -cpu model,lmce=on on both src and des,do migration;Guest should migrate successfully and lmce is enabled before/during/after migration;;RedHatEnterpriseLinux7/RHEL7-86473
2404;RHEL7-86515;[virtlogd] [max_clients] [Valid boundary] Set max_clients to valid boundary values;"Verify that virtlogd can start and set max_clients correctly when max_clients is valid boundary values.
Note: The valid range of max_clients is 0~4294967295(unsigned int) . 
Test matrix: 0, 4294967295";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Set debug log for virtlogd in /etc/libvirt/virtlogd.conf:
 
 log_level = 1
 log_outputs=""1:file:/var/log/libvirt/virtlogd.log""";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-86515
2404;;;;;;;;;2;"Set max_clients to valid boundary value in /etc/libvirt/virtlogd.conf according to the test matrix in description field.
​​";​​;;RedHatEnterpriseLinux7/RHEL7-86515
2404;;;;;;;;;3;"Restart virtlogd:
 # systemctl restart virtlogd
​​";​​;;RedHatEnterpriseLinux7/RHEL7-86515
2404;;;;;;;;;4;"Start a guest:
 # virsh start guest
​​";guest starts successfully;;RedHatEnterpriseLinux7/RHEL7-86515
2404;;;;;;;;;5;"Check the virtlogd.log:
 # grep max /var/log/libvirt/virtlogd.log";"nclients_max in the log is same the configured value.
 
 Output. For example: 
 2017-04-06 04:07:46.577+0000: 5300: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=1 nclients_max=0 nclients_unauth=0 nclients_unauth_max=0
 2017-04-06 04:07:46.580+0000: 5300: debug : virNetServerCheckLimits:253 : Checking client-related limits to re-enable or temporarily suspend services: nclients=0 nclients_max=0 nclients_unauth=0 nclients_unauth_max=0
​​";;RedHatEnterpriseLinux7/RHEL7-86515
2405;RHEL7-86575;[cpu model]Support avx512 series flags part II;Support avx512 series: avx512bw,avx512dq,avx512vl on skylake server, purly lake server host;Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;1; Boot guest with -cpu Skylake-Client,+avx512bw,+avx512dq,+avx512vl,check,enforce and check these flags inside guest; Guest have these flags presented;Test Case;RedHatEnterpriseLinux7/RHEL7-86575
2406;RHEL7-86576;[cpu model]Support avx512 series flags part I;Support avx512 series flags avx512f, avx512cd, avx512pf, avx512er on xeon phi knights landing and later processor;Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;1; 1. Boot guest with -cpu qemu64,+avx512f, +avx512cd, +avx512pf, +avx512er and check flags from guest; Guest have these flags presented by cat /proc/cpuinfo;Test Case;RedHatEnterpriseLinux7/RHEL7-86576
2407;RHEL7-86641;[cpu model]vmx tsc scaling migration;when tsc scaling support, tsc value won't change during migration;Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;1;"1. ping-pong migration between hosts support vmx tsc scaling, use test program check ""time passed"" in before, during and after migration. Tool usage like:
 # ./test 10 3599996
[rdtsc ] Passed 10.000094 s, error 0.000009
[rdtscp] Passed 10.000094 s, error 0.0000093599996 is the tsc value of host that guest 1st boot. These two hosts should have much different tsc value. The arguments of test tool are same during migration test";Guest migration successfully and values of time passed are very similar;Test Case;RedHatEnterpriseLinux7/RHEL7-86641
2407;;;;;;;;;2;"2.ping-pong migration between host support vmx tsc scaling and host not support vmx tsc scaling, use test program check ""time passed"" in before, during and after migration. These two hosts should have much different tsc value. The arguments of test tool are same during migration test";Guest migration successfully but values of time passed have big difference;;RedHatEnterpriseLinux7/RHEL7-86641
2408;RHEL7-86663;[vgpu]mdev filesystem and vgpu creation;Verify vgpu can be created and managed by mdev framework{comment:27}{comment:7}{comment:8};Zhiyi Guo (zhguo);Critical;Positive;Automated;;1;"Create vgpu device with arbitrary string, e.g: echo c1121c7b > 
/sys/devices/pci0000\:00/0000\:00\:02.0/mdev_supported_types/i915-GVTg_V5_8/create";cannot create vgpu with arbitrary string;Test Case;RedHatEnterpriseLinux7/RHEL7-86663
2408;;;;;;;;;2;"Create a valid vgpu device, verify device is registered under mdev framework, then destroy it, repeat the step 10 times. Do this step for each vgpu type
 Ref cmd(use gvt-g):
 create mdev device: echo c1121c7b-7d80-4e25-89d3-bd8afefe99eb > /sys/devices/pci0000\:00/0000\:00\:02.0/mdev_supported_types/i915-GVTg_V5_4/create
 find device under mdev framework:
 # tree /sys/bus/mdev/
 /sys/bus/mdev/
 ├── devices
 │   └── c1121c7b-7d80-4e25-89d3-bd8afefe99eb ->
 ../../../devices/pci0000:00/0000:00:02.0/c1121c7b-7d80-4e25-89d3-bd8afefe99eb
 ├── drivers
 │   └── vfio_mdev
 │       ├── bind
 │       ├── c1121c7b-7d80-4e25-89d3-bd8afefe99eb ->
 ../../../../devices/pci0000:00/0000:00:02.0/c1121c7b-7d80-4e25-89d3-bd8afefe99eb
 │       ├── module -> ../../../../module/vfio_mdev
 │       ├── uevent
 │       └── unbind
 ├── drivers_autoprobe
 ├── drivers_probe
 └── uevent
 destroy the vgpu device:
 # echo 1 > /sys/bus/mdev/devices/c1121c7b-7d80-4e25-89d3-bd8afefe99eb/remove
";"vgpu can be created and removed well
 (if vgpu create without error, dmesg will prompt like:
 [ 2248.957359] iommu: Adding device c1121c7b-7d80-4e25-89d3-bd8afefe99ec to group 0
 [ 2248.958385] vfio_mdev c1121c7b-7d80-4e25-89d3-bd8afefe99ec: MDEV: group_id = 0
 if vgpu remove without error, dmesg will prompt like:
 [ 2265.237096] iommu: Removing device c1121c7b-7d80-4e25-89d3-bd8afefe99ec from group 0
 [ 2265.238002] vfio_mdev c1121c7b-7d80-4e25-89d3-bd8afefe99ec: MDEV: detaching iommu
 )";;RedHatEnterpriseLinux7/RHEL7-86663
2408;;;;;;;;;3;Create max allowed vgpus  in one type or mix types and then create a new vgpu;"new vgpu cannot be created with error message prompt like ""no space left""
";;RedHatEnterpriseLinux7/RHEL7-86663
2408;;;;;;;;;4;Create two vgpus with duplicate uuid on a physical gpu device;"second vgpu cannot be created with error message prompt like ""vgpu exist already""
";;RedHatEnterpriseLinux7/RHEL7-86663
2408;;;;;;;;;5;Create one vgpu with a uuid on a physical gpu device, then create another vgpu with duplicate uuid on a different physical gpu device(this is nvidia only as intel system won't have another physical gpu device);"second vgpu cannot be created with error message prompt like ""vgpu exist already"", no error happen in host dmesg";;RedHatEnterpriseLinux7/RHEL7-86663
2408;;;;;;;;;6;Launch qemu with vgpu and destroy this vgpu device from host;"vgpu cannot be removed with error message prompt like ""vgpu is in using""
";;RedHatEnterpriseLinux7/RHEL7-86663
2408;;;;;;;;;7;Launch two qemu pids with an exist vgpu ;"1st qemu can be launched but second qemu should fail to start with error message prompt like ""failed to open /dev/vfio/0: Device or resource busy""";;RedHatEnterpriseLinux7/RHEL7-86663
2408;;;;;;;;;8;Prepare one valid vgpu device, launch qemu-kvm with this vgpu device and kill the qemu-kvm process. Relaunch the qemu-kvm with this vgpu device;No crash/hang happen against host. qemu relaunch should not meet any troubles.;;RedHatEnterpriseLinux7/RHEL7-86663
2408;;;;;;;;;9;"Prepare two valid vgpus(create from clean host or two exist vgpus) and boot a guest with them, e.g:
 /usr/libexec/qemu-kvm .... \
 -device vfio-pci,id=vgpu1,sysfsdev=/sys/bus/mdev/devices/c1121c7b-7d80-4e25-89d3-bd8afefe99ec \
 -device vfio-pci,id=vgpu1,sysfsdev=/sys/bus/mdev/devices/ff1d0ee4-43f6-45dd-80a7-c99de72e878d \
 ....";qemu-kvm cannot start.;;RedHatEnterpriseLinux7/RHEL7-86663
2409;RHEL7-86664;[vgpu]Validate vgpu inside guest;Boot guest with vgpu and validate vgpu inside guest;Zhiyi Guo (zhguo);Critical;Positive;Manual Only;;1;Create one type of vgpu and boot guest with this vgpu;vgpu can be created and vgpu driver can be attached successfully duing guest boot;Test Case;RedHatEnterpriseLinux7/RHEL7-86664
2409;;;;;;;;;2;Run graphic work loads like play youtube video and run graphic test app(glmark2 for rhel and heaven benchmark for windows) together inside guest;After step 2-6, guest/host doesn't face any crash;;RedHatEnterpriseLinux7/RHEL7-86664
2409;;;;;;;;;3;Reboot guest;​​;;RedHatEnterpriseLinux7/RHEL7-86664
2409;;;;;;;;;4;Rerun step 1-2 again;​​;;RedHatEnterpriseLinux7/RHEL7-86664
2409;;;;;;;;;5;Shutdown guest;​​;;RedHatEnterpriseLinux7/RHEL7-86664
2409;;;;;;;;;6;Boot guest with this vgpu again;​​;;RedHatEnterpriseLinux7/RHEL7-86664
2409;;;;;;;;;7;Remove this vgpu from mdev framework;vgpu can be destroyed.;;RedHatEnterpriseLinux7/RHEL7-86664
2410;RHEL7-86665;[vgpu]vgpu scalability test;Choose one vgpu type and create max allowed vgpu number, do overcommit test to host gpu{comment:6};Zhiyi Guo (zhguo);Critical;Positive;Manual Only;;1;"Create max allowed vgpus in a type.
 Ref instructions(use gvt-g):
 On a clean gv-g capable host, two vgpus in type i915-GVTg_V5_4 allow to create
 Create two vgpus:
 echo c1121c7b-7d80-4e25-89d3-bd8afefe99ec > /sys/bus/pci/devices/0000\:00\:02.0/mdev_supported_types/i915-GVTg_V5_4/create
 echo ff1d0ee4-43f6-45dd-80a7-c99de72e878d > /sys/bus/pci/devices/0000\:00\:02.0/mdev_supported_types/i915-GVTg_V5_4/create";Each vgpu can be created successfully and there are two vgpus registered under vgpu framework.;Test Case;RedHatEnterpriseLinux7/RHEL7-86665
2410;;;;;;;;;2;Boot rhel/windows guests with one vgpu each,play video from youtube and run graphic test app(glmark2 for rhel and heaven benchmark for windows) inside guest;After step 2-7, host/guest works well, no hang or crash happen;;RedHatEnterpriseLinux7/RHEL7-86665
2410;;;;;;;;;3;Reboot all of the guests;​​;;RedHatEnterpriseLinux7/RHEL7-86665
2410;;;;;;;;;4;do step 2 again;​​;;RedHatEnterpriseLinux7/RHEL7-86665
2410;;;;;;;;;5;shutdown all of the guests;​​;;RedHatEnterpriseLinux7/RHEL7-86665
2410;;;;;;;;;6;Boot rhel and windows guests together and do step 2 again;​​;;RedHatEnterpriseLinux7/RHEL7-86665
2410;;;;;;;;;7;shutdown all of the guests;​​;;RedHatEnterpriseLinux7/RHEL7-86665
2411;RHEL7-86667;[vgpu]Boot guest with/without vgpu and hot remove/hot plug vgpu;Boot guest with/without vgpu and hot remove/hot plug vgpu{comment:5};Zhiyi Guo (zhguo);Critical;Positive;Manual Only;;1;Boot guest with one vgpu, hot remove vgpu, and shutdown guest;" Both qemu-kvm and host should not crash.
 Note:
 Guest driver may not support hotplug/hot remove, so guest may face hang or crash and this is ok";Test Case;RedHatEnterpriseLinux7/RHEL7-86667
2411;;;;;;;;;2;Boot guest without vgpu and hotplug one vgpu and shutdown guest;"Both qemu-kvm and host should not crash.
 Note:
 Guest driver may not support hotplug/hot remove, so guest may face hang or crash and this is ok";;RedHatEnterpriseLinux7/RHEL7-86667
2412;RHEL7-86668;[vgpu]Combine vgpu with numa configuration;Boot vgpu with numa configuration.{comment:3}{comment:4};Zhiyi Guo (zhguo);Critical;Positive;Not Automated;;1;" Boot guest with numa configuration, for rhel guest, boot guest with multiuser level, configure Xorg to match this configuration and startx manually; for windows guest, boot guest with gpu driver.
 Ref qemu cli:
 /usr/libexec/qemu-kvm -name vgpu -m 8G -machine pc,accel=kvm\
         -S \
         -cpu Haswell-noTSX,enforce \
         -smp 4 \
         -object memory-backend-ram,size=8G,policy=bind,host-nodes=0,id=ram-node0 -numa node,nodeid=0,cpus=0-3,memdev=ram-node0 \
         -device pxb,id=bridge2,numa_node=0,bus_nr=8 \
         -monitor stdio \
         -uuid 115e11b2-a869-41b5-91cd-6a32a907be7e \
         -qmp tcp:localhost:4444,server,nowait \
         -serial unix:/tmp/console,server,nowait \
         -drive file=t.qcow2,if=none,id=drive-scsi-disk0,format=qcow2,cache=none,werror=stop,rerror=stop -device ide-hd,drive=drive-scsi-disk0,id=scsi-disk0 \
         -device vfio-pci,bus=bridge2,sysfsdev=/sys/bus/mdev/devices/222ec1c0-6cf7-4328-9389-b096e89923e5 \
         -device VGA,bus=pci.0 \
         -netdev tap,id=idinWyYp,vhost=on -device e1000e,mac=42:ce:a9:d2:4d:d7,id=idlbq7eA,netdev=idinWyYp,bus=pci.0 \
​​"; Guest can be launched successfully. For rhel guest, startx and vnc login to guest, desktop can be observed and vgpu can be queried by lspci and glxinfo. For windows, vnc login to guest,desktop can be observed and vgpu can be queried from windows device manager.;Test Case;RedHatEnterpriseLinux7/RHEL7-86668
2413;RHEL7-86681;[virsh cmd] net-list by different options;virsh command net-list works with different options, If --name is specified, network names are printed instead of the table formatted one per line. If --uuid is specified network's UUID's are printed instead of names. Flag --table specifies that the legacy table-formatted output should be used. This is the default. All of these are mutually exclusive. ;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"1. # virsh net-list --table --name
 
 # virsh net-list --table --uuid
 
 # virsh net-list --name --uuid
 
 # virsh net-list --table --name --uuid
 
​​";"both failed with:
 error: Only one argument from --table, --name and --uuid may be specified.";Test Case;RedHatEnterpriseLinux7/RHEL7-86681
2413;;;;;;;;;2;"2. prepare some networks, includes:
 inactive+no-autostart + persistent;
 active + no_autostart + persistent;
 active + autostart + persistent;
 inactive+ autostart + persistent;
 active + no-autostart + transient;
 
 
 # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  definebr1            inactive   no            yes
  direct-macvtap       active     no            yes
  hostdev              active     yes           yes
  private              inactive   yes           yes
  vf-pool              active     no            no
​​";​​;;RedHatEnterpriseLinux7/RHEL7-86681
2413;;;;;;;;;3;"3. # virsh net-list --no-autostart --inactive
 
 
​​";" Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  definebr1            inactive   no            yes";;RedHatEnterpriseLinux7/RHEL7-86681
2413;;;;;;;;;4;"4. # virsh net-list --no-autostart
​​";"Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  direct-macvtap       active     no            yes
  vf-pool              active     no            no
 
 (by default it will list all the active interfaces)";;RedHatEnterpriseLinux7/RHEL7-86681
2413;;;;;;;;;5;5. # virsh net-list --autostart;" Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  hostdev              active     yes           yes";;RedHatEnterpriseLinux7/RHEL7-86681
2413;;;;;;;;;6;6. # virsh net-list --autostart --inactive;" Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  private              inactive   yes           yes";;RedHatEnterpriseLinux7/RHEL7-86681
2413;;;;;;;;;7;7. # virsh net-list --persistent;" Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  direct-macvtap       active     no            yes
  hostdev              active     yes           yes";;RedHatEnterpriseLinux7/RHEL7-86681
2413;;;;;;;;;8;8. # virsh net-list --persistent --inactive;" Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  definebr1            inactive   no            yes
  private              inactive   yes           yes";;RedHatEnterpriseLinux7/RHEL7-86681
2413;;;;;;;;;9;9. # virsh net-list --persistent --transient;" Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  direct-macvtap       active     no            yes
  hostdev              active     yes           yes
  vf-pool              active     no            no";;RedHatEnterpriseLinux7/RHEL7-86681
2413;;;;;;;;;10;"10. # virsh net-list --autostart --transient
 # virsh net-list --inactive --transient";no output;;RedHatEnterpriseLinux7/RHEL7-86681
2413;;;;;;;;;11;11. # virsh net-list;"Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  direct-macvtap       active     no            yes
  hostdev              active     yes           yes
  vf-pool              active     no            no";;RedHatEnterpriseLinux7/RHEL7-86681
2413;;;;;;;;;12;"12. # virsh net-list --uuid
​​";"1208929f-5875-4d6c-92c0-7c5c81d1b100
 e6ddbb96-5be5-494d-92f0-f7473e185876
 ef85fec8-1391-4406-8243-5129e6090e9a";;RedHatEnterpriseLinux7/RHEL7-86681
2413;;;;;;;;;13;13. # virsh net-list --name --all;"definebr1
 direct-macvtap
 hostdev
 private
 vf-pool";;RedHatEnterpriseLinux7/RHEL7-86681
2413;;;;;;;;;14;14. # virsh net-list --name;"direct-macvtap
 hostdev
 vf-pool";;RedHatEnterpriseLinux7/RHEL7-86681
2413;;;;;;;;;15;15. # virsh net-list --name --all;"definebr1
 direct-macvtap
 hostdev
 private
 vf-pool";;RedHatEnterpriseLinux7/RHEL7-86681
2414;RHEL7-86682;[net-update] unrecognized command or options;unrecognized command name and unrecognized section name;Yalan Zhang (yalzhang);Critical;Negative;Automated;;1;"1. # virsh net-update default test ip-dhcp-range ""<range start='192.168.122.2' end='192.168.122.250'/>""
 
​​";error: unrecognized command name 'test';Test Case;RedHatEnterpriseLinux7/RHEL7-86682
2414;;;;;;;;;2;"2. # virsh net-update default add iptest ""<range start='192.168.122.2' end='192.168.122.250'/>""
";error: unrecognized section name 'iptest';;RedHatEnterpriseLinux7/RHEL7-86682
2415;RHEL7-86689;[net-update] options: --config, --live and --current for net-update;Test the options for net-update command;Yalan Zhang (yalzhang);Medium;Positive;Automated;;1;"prepare a clean and inactive network
 # virsh net-destroy default
 Network default destroyed
 
 # virsh net-dumpxml default
 <network>
   <name>default</name>
   <uuid>a5e23252-e9df-42da-b06e-896261df54b4</uuid>
   <forward mode='nat'/>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:2f:0f:c0'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
     </dhcp>
   </ip>
 </network>
";[[--live] [--config] | [--current]];Test Case;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;2;--live;​​;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;3;"1. --live can only used when the network is active
 #  virsh net-update default add dns-txt ""<txt name='example2' value='value2'/>"" --live
 
​​";"error: Failed to update network default
 error: Requested operation is not valid: network is not running

 (--live can only used when the vm is running
 if omit, it equals to --current)";;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;4;"2. if omitted, it equals to --current (if network  is inactive, equals to --config)
 #  virsh net-update default add dns-txt ""<txt name='example2' value='value2'/>""";Updated network default persistent config;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;5;"3. if omitted, it equals to --current (if the network is running, equals to --live)
 # virsh net-start default
 Network default started
 
 # virsh net-update default delete dns-txt ""<txt name='example2' value='value2'/>"" ";"Updated network default live state
​​";;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;6;"4. # virsh net-destroy default
 Network default destroyed
 
 # virsh net-dumpxml default
​​";check the dns-txt still exists.;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;7;--config;​​;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;8;"1. # virsh net-start default
 Network default started
​​";--config will work on next start;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;9;"2. # virsh net-update default add dns-txt ""<txt name='example2' value='value2'/>""  --config";Updated network default persistent config;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;10;3. # virsh net-dumpxml default;---> no dns-txt section;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;11;"4. # virsh net-destroy default
 # virsh net-start default
 # virsh net-dumpxml default ";---> there is dns-txt section;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;12;"1. # virsh net-start default
 Network default started
 
 # virsh net-update default add dns-txt ""<txt name='example2' value='value2'/>""  --live
 Updated network default live state
 
 # virsh net-dumpxml default
 ---> the network is updated with dns-txt section
 
 # virsh net-update default delete dns-txt ""<txt name='example2' value='value2'/>""  --live
 Updated network default live state
 
 # virsh net-dumpxml default
 ----> the dns-txt section is gone";--live will work on live network immediately;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;13;--live --config;--live and --config can be used together for a live network;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;14;"1. default network is active and clean
 # virsh net-update default add dns-txt ""<txt name='example2' value='value2'/>""  --live --config
​​";"Updated network default persistent config and live state
​​";;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;15;2. # virsh net-dumpxml default;----> the dns-txt section is added;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;16;"3. # virsh net-destroy default
 # virsh net-dumpxml default";----> the dns-txt section is added;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;17;"4. # virsh net-update default delete dns-txt ""<txt name='example2' value='value2'/>""    --current";Updated network default live state;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;18;5. # virsh net-dumpxml default;----> the dns-txt section is gone;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;19;--current with others;--current can not be used with others;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;20;"1. # virsh net-update default delete dns-txt ""<txt name='example2' value='value2'/>""  --live --config --current";error: Options --current and --live are mutually exclusive;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;21;"2. # virsh net-update default delete dns-txt ""<txt name='example2' value='value2'/>""   --config --current";error: Options --current and --config are mutually exclusive;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;22;"3. # virsh net-update default delete dns-txt ""<txt name='example2' value='value2'/>""   --live --current";error: Options --current and --live are mutually exclusive;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;23;--current;​​;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;24;"1. default network is clean an active
 # virsh net-update default delete dns-txt ""<txt name='example2' value='value2'/>"" --current
​​";"error: Failed to update network default
 error: Requested operation is not valid: couldn't locate a matching DNS TXT record in network default";;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;25;"2. # virsh net-update default add dns-txt ""<txt name='example2' value='value2'/>"" --current";Updated network default live state;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;26;3. # virsh net-dumpxml default;-----> check the dns-txt is added;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;27;"4. # virsh net-destroy default
 # virsh net-dumpxml default";"----> check the dns-txt is gone
​​";;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;28;"5. default network is clean and inactive
 # virsh net-update default add dns-txt ""<txt name='example2' value='value2'/>"" --current";Updated network default persistent config;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;29;"6. # virsh net-dumpxml default
​​";----> check the network is udpated;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;30;--config for transient network;​​;;RedHatEnterpriseLinux7/RHEL7-86689
2415;;;;;;;;;31;"1.  default network is active and clean
 # virsh net-undefine default
 Network default has been undefined
 
 # virsh net-list 
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     no            no
 
 # virsh net-update default add dns-txt ""<txt name='example2' value='value2'/>"" --config
 error: Failed to update network default
 error: Requested operation is not valid: cannot change persistent config of a transient network
 
 # virsh net-update default add dns-txt ""<txt name='example2' value='value2'/>""  --live --config
 error: Failed to update network default
 error: Requested operation is not valid: cannot change persistent config of a transient network";use --config for transient network;;RedHatEnterpriseLinux7/RHEL7-86689
2416;RHEL7-86699;[vgpu]Test vgpu with unsupported drivers;Host/qemu-kvm isn't impacted if driver don't support vgpu{comment:2};Zhiyi Guo (zhguo);Critical;Positive;Manual Only;;1;"Boot a clean guest with a vgpu and try to install unsupported driver.
 For gvt-g and rhel, just boot a rhel7.3 GA guest.
 For other combinations(gvt-g + windows, nvidia + latest rhel, nvidia + windows), install the driver";"host should not crash.
 For intel vgpu, vgpu enter fail safe mode, from host dmesg[20225.495424] Detected your guest driver doesn't support GVT-g.
[20225.496002] Now vgpu 1 will enter failsafe mode.

Guest maybe hang or kernel call trace and it is ok

";Test Case;RedHatEnterpriseLinux7/RHEL7-86699
2416;;;;;;;;;2;Quit qemu or shutdown guest(if guest hang, quit qemu is ok);qemu can quit normally;;RedHatEnterpriseLinux7/RHEL7-86699
2416;;;;;;;;;3;"Boot the guest and the vgpu again and install the correct driver
 For gvt-g and rhel, just boot the latest rhel 7 guest";host should not crash. Guest driver can attach to this vgpu;;RedHatEnterpriseLinux7/RHEL7-86699
2416;;;;;;;;;4;Shutdown guest;guest shutdown without problem;;RedHatEnterpriseLinux7/RHEL7-86699
2416;;;;;;;;;5;Destroy this vgpu;vgpu can be destroyed successfully;;RedHatEnterpriseLinux7/RHEL7-86699
2417;RHEL7-86741;[vIOMMU] Enable the VIOMMU on NUMA system;"PCI device assignment with NUMA node{comment:45}
 https://www.berrange.com/posts/2017/02/16/setting-up-a-nested-kvm-guest-for-developing-testing-pci-device-assignment-with-numa/5 ";Jingjing Shao (jishao);High;Positive;Manual Only;;1;" 1. Prepare a q35-js guest  On the numa system
 
 <domain type='kvm' id='5'>
   <name>q35-js</name>
   <uuid>34cc0dae-8998-480c-b2db-171ce1e7461a</uuid>
   <memory unit='KiB'>512000</memory>
   <currentMemory unit='KiB'>512000</currentMemory>
   <vcpu placement='static'>4</vcpu>
   <resource>
     <partition>/machine</partition>
   </resource>
   <os>
     <type arch='x86_64' machine='pc-q35-rhel7.4.0'>hvm</type>
     <boot dev='hd'/>
   </os>
 .....
  <cpu mode='custom' match='exact'>
     <model fallback='forbid'>Westmere</model>
     <feature policy='require' name='vmx'/>
     <numa>
       <cell id='0' cpus='0-3' memory='512000' unit='KiB'/>
     </numa>
   </cpu>
 .....
  <controller type='pci' index='0' model='pcie-root'>
       <alias name='pcie.0'/>
     </controller>
     <controller type='pci' index='1' model='dmi-to-pci-bridge'>
       <model name='i82801b11-bridge'/>
       <alias name='pci.1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x0'/>
     </controller>
     <controller type='pci' index='2' model='pci-bridge'>
       <model name='pci-bridge'/>
       <target chassisNr='2'/>
       <alias name='pci.2'/>
       <address type='pci' domain='0x0000' bus='0x01' slot='0x00' function='0x0'/>
     </controller>
     <controller type='pci' index='3' model='pcie-expander-bus'>
       <model name='pxb-pcie'/>
       <target busNr='180'>
         <node>0</node>
       </target>
       <alias name='pci.3'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>
     </controller>
     <controller type='pci' index='4' model='pcie-root-port'>
       <model name='ioh3420'/>
       <target chassis='4' port='0x0'/>
       <alias name='pci.4'/>
       <address type='pci' domain='0x0000' bus='0x03' slot='0x00' function='0x0'/>
     </controller>
  .....
    <interface type='network'>
       <mac address='52:54:00:ee:67:31'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x04' slot='0x00' function='0x0'/>
       </interface>
 .....
       <iommu model='intel'/>
 ....
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-86741
2417;;;;;;;;;2;"2. check qemu cmdline:
 
 # ps aux|grep qemu
​​";"Output:
 ......
 -device i82801b11-bridge,id=pci.1,bus=pcie.0,addr=0x1 -device pci-bridge,chassis_nr=2,id=pci.2,bus=pci.1,addr=0x0 -device pxb-pcie,bus_nr=180,id=pci.3,numa_node=0,bus=pcie.0,addr=0x2 -device ioh3420,port=0x0,chassis=4,id=pci.4,bus=pci.3,addr=0x0 
 .....
 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:54:00:ee:67:31,bus=pci.4,addr=0x0 -chardev pty,id=charserial0 
 ....";;RedHatEnterpriseLinux7/RHEL7-86741
2417;;;;;;;;;3;"3. login guest and check interface numa node info:
 # lspci 
 
 Check the numa node
 # cat /sys/devices/pci0000:b4/0000:b4:00.0/0000:b5:00.0/numa_node
 
 
 
​​";"Output: 
 # lspci
 ......
 b4:00.0 PCI bridge: Intel Corporation 7500/5520/5500/X58 I/O Hub PCI Express Root Port 0 (rev 02)
 b5:00.0 Ethernet controller: Red Hat, Inc Virtio network device (rev 01)
 .....
 
 # cat /sys/devices/pci0000:b4/0000:b4:00.0/0000:b5:00.0/numa_node
 0
​​";;RedHatEnterpriseLinux7/RHEL7-86741
2417;;;;;;;;;4;"4. do the case 
 RHEL7-84885 - [Nested] Check L2 guest nat net function (L1: nat) --bug 1283251 
 
 RHEL7-84886 - [Nested][vIOMMU] Check L2 guest hostdev net function (L1: nat; L2: hostdev) 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-86741
2417;;;;;;;;;5;"5, Change the vm xml in step1, use the vf info instead of the virtual network
 
 <domain type='kvm' id='5'>
   <name>q35-js</name>
   <uuid>34cc0dae-8998-480c-b2db-171ce1e7461a</uuid>
   <memory unit='KiB'>512000</memory>
   <currentMemory unit='KiB'>512000</currentMemory>
   <vcpu placement='static'>4</vcpu>
 .....
 <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:20:51:94'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x1'/>
       </source>
       <alias name='hostdev0'/>
       <address type='pci' domain='0x0000' bus='0x04' slot='0x00' function='0x0'/>
     </interface>
 .....
 
 Redo the steps 1~4";​​;;RedHatEnterpriseLinux7/RHEL7-86741
2418;RHEL7-86760;"[Nested][vIOMMU]: Check L2 guest hostdev net function (L1: nat; L2: direct)";"S1: L1: hostdev; L2: hostdev;    S2: L1: nat; L2: direct";Jingjing Shao (jishao);High;Positive;Not Automated;;1; 1, PCI assignment with passthrough mode (Host->L1 guest);​​;Test Case;RedHatEnterpriseLinux7/RHEL7-86760
2418;;;;;;;;;2;"Prepare the device xml as below
 <interface type='hostdev' managed='yes'>
 <source>
 <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x3'/>
 </source>
 </interface>

 Prepare the guest
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  12   vm1                        running

 # virsh dumpxml  vm1  | grep hostdev
 #
 #

 # virsh attach-device  vm1  device.xml
 Device attached successfully

 # virsh dumpxml  vm1  | grep hostdev

";"Output:
 # virsh dumpxml  vm1  | grep hostdev
 ....
 <interface type='hostdev' managed='yes'> 
 <mac address='02:24:6b:89:bc:e9'/>
 <driver name='vfio'/>
 <source>
 <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x3'/> 
 </source> 
 <alias name='hostdev0'/> 
 <address type='pci' domain='0x0000' bus='0x05' slot='0x00' function='0x0'/> 
 </interface>
 ......";;RedHatEnterpriseLinux7/RHEL7-86760
2418;;;;;;;;;3;2, PCI assignment with passthrough mode (L1 guest->L2 guest);​​;;RedHatEnterpriseLinux7/RHEL7-86760
2418;;;;;;;;;4;"# lspci | grep Eth

 Prepare the device xml as below
     <hostdev type='pci' managed='yes'>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x02' slot='0x03' function='0x0'/>
       </source>
     </hostdev>

 Prepare the guest
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  1     vm2                       running

 # virsh dumpxml  vm2   | grep hostdev
 #
 #

 # virsh attach-device  vm2   device.xml
 Device attached successfully
 
 # virsh dumpxml  vm2   | grep hostdev
 
​​";"Output:
 # virsh dumpxml  vm2   | grep hostdev
 
     <hostdev type='pci' managed='yes'>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x02' slot='0x03' function='0x0'/>
       </source>
     </hostdev>";;RedHatEnterpriseLinux7/RHEL7-86760
2418;;;;;;;;;5;3. On the  L1 guest , prepare the default network;​​;;RedHatEnterpriseLinux7/RHEL7-86760
2418;;;;;;;;;6;"# virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     yes           yes


 # Add the xml info to L2 guest
 <interface type='direct'> 
 <mac address='52:54:00:b1:9c:b0'/> 
 <source dev='eth0' mode='bridge'/> 
 <model type='rtl8139'/> 
 <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/> 
 </interface>
  
 #   # virsh start vm2
 Domain  vm2  started

 # ps -aux | grep interface

 # ping 10.66.4.153  ---> another host";"Output:
 # virsh dumpxml  vm2   | grep  interface
 <interface type='direct'> 
 <mac address='52:54:00:ef:ab:ac'/>
 <source dev='enp182s0' mode='bridge'/> 
 <target dev='macvtap0'/>
 <model type='virtio'/> 
 <alias name='net0'/> 
 <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/> 
 </interface>
 
 
 # ping 10.66.4.153
 PING 10.66.4.153 (10.66.4.153) 56(84) bytes of data.
 64 bytes from 10.66.4.153: icmp_seq=1 ttl=62 time=1.03 ms
 64 bytes from 10.66.4.153: icmp_seq=2 ttl=62 time=0.650 ms
 64 bytes from 10.66.4.153: icmp_seq=3 ttl=62 time=0.792 ms
​​";;RedHatEnterpriseLinux7/RHEL7-86760
2419;RHEL7-86762;[Hyper-V][UIO]Assign a NIC device to uio_hv_generic driver;"This test covers basic operations of uio and uio_hv_generic:
1. loading/unloading uio & uio_generic
2. assign a device (network adapter in this case) to uio_hv_generic driver
 
 https://bugzilla.redhat.com/show_bug.cgi?id=1396534 

Feature supported in RHEL7.4";Yaju Cao (yacao);High;Positive;Automated;;1;1. Add another network adapter for the vm ( 2 network adapters in total );"Check there are two NICs
 # ip address";Test Case;RedHatEnterpriseLinux7/RHEL7-86762
2419;;;;;;;;;2;"Load uio, check it is loaded
 # modprobe uio
 # lsmod |grep uio
";"# lsmod |grep uio
 uio                    19259  0";;RedHatEnterpriseLinux7/RHEL7-86762
2419;;;;;;;;;3;"Unload uio, check it is unloaded
 # modprobe -r uio
 # lsmod |grep uio";uio successfully unloaded;;RedHatEnterpriseLinux7/RHEL7-86762
2419;;;;;;;;;4;"Load uio_hv_generic, check uio & uio_hv_generic are loaded
 # modprobe uio_hv_generic
 # lsmod |grep uio";"Both uio and uio_generic are loaded
 # lsmod |grep uio
 uio_hv_generic      12663  0 
 uio                          19259  1 uio_hv_generic
 hv_vmbus               49810  8";;RedHatEnterpriseLinux7/RHEL7-86762
2419;;;;;;;;;5;"Add new id (ClassID) to uio_hv_generic
 # ip addr
 ( **Use new network adapter for the ehtx in following commands** )
 # ClassID=cat /sys/class/net/ethx/device/class_id |awk '{ print( substr($1, 2, length($1)-2)) }'
 # echo $ClassID > /sys/bus/vmbus/drivers/uio_hv_generic/new_id";No error;;RedHatEnterpriseLinux7/RHEL7-86762
2419;;;;;;;;;6;"Deassign the device from hv_netvsc driver
 # DeviceID=cat /sys/class/net/ethx/device/device_id |awk '{ print( substr($1, 2, length($1)-2)) }'
 # echo -n $DeviceID > /sys/bus/vmbus/drivers/hv_netvsc/unbind
 (Make sure to use 'echo -n')";"No error
";;RedHatEnterpriseLinux7/RHEL7-86762
2419;;;;;;;;;7;"Assign the device to uio_hv_generic
 # echo -n $DeviceID > /sys/bus/vmbus/drivers/uio_hv_generic/bind";No error;;RedHatEnterpriseLinux7/RHEL7-86762
2419;;;;;;;;;8;"Check /dev/uio0 exists
 # ls -l /dev/ |grep uio";/dev/uio0 exists;;RedHatEnterpriseLinux7/RHEL7-86762
2420;RHEL7-86763;[Hyper-V][UIO]load/unload uio_hv_generic module;Load or unload uio_hv_generic module;Yaju Cao (yacao);Medium;Positive;Manual Only;;1;"Load module
 $ modprobe uio_hv_generic";"$ lsmod|grep uio
 uio_hv_generic         12663  0 
 uio                    19259  1 uio_hv_generic
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-86763
2420;;;;;;;;;2;"Make sure a NIC/Storage device is assigned to uio_hv_generic driver as in test case RHEL7-86762 , UIO device could be shown
 $ ll /dev/uio*";"$ ll /dev/uio*
 crw-------. 1 root root 248, 0 Mar 15 15:09 /dev/uio0";;RedHatEnterpriseLinux7/RHEL7-86763
2420;;;;;;;;;3;"Unload the module
 $ rmmod uio_hv_generic";"$ lsmod|grep uio
 uio                    19259  0 ";;RedHatEnterpriseLinux7/RHEL7-86763
2420;;;;;;;;;4;"Load module again
 $ modprobe uio_hv_generic";​​;;RedHatEnterpriseLinux7/RHEL7-86763
2420;;;;;;;;;5;"After register Class ID to uio_hv_generic again (this may not be needed in the future), uio device could be shown again.
 $ echo ""f8615163-df3e-46c5-913f-f2d2f965ed0e"" > /sys/bus/vmbus/drivers/uio_hv_generic/new_id
 $ ll /dev/uio*";"$ ll /dev/uio*
 crw-------. 1 root root 248, 0 Mar 15 15:44 /dev/uio0
 
​​";;RedHatEnterpriseLinux7/RHEL7-86763
2421;RHEL7-86765;[Hyper-V][UIO]Live migrate a VM with UIO device assigned;Verify UIO device is still available after migrate VM to a different host;Yaju Cao (yacao);Medium;Positive;Manual Only;;1;"Make sure a NIC/Storage device is assigned to uio_hv_generic driver as in test case RHEL7-86762 , UIO device could be shown
 $ ll /dev/uio* ";"$ ll /dev/uio*
 crw-------. 1 root root 248, 0 Mar 15 15:09 /dev/uio0";Test Case;RedHatEnterpriseLinux7/RHEL7-86765
2421;;;;;;;;;2;Live migrate the VM to another host;​​;;RedHatEnterpriseLinux7/RHEL7-86765
2421;;;;;;;;;3;"After migration complete, check the UIO device, it should be still shown in the system
 $ ll /dev/uio* ";"$ ll /dev/uio*
 crw-------. 1 root root 248, 0 Mar 15 15:09 /dev/uio0";;RedHatEnterpriseLinux7/RHEL7-86765
2422;RHEL7-86879;[SRIOV] Check  the mac address of  VFS;"Check the mac address is right or not during the SR-IOV testing
{comment:20}";Jingjing Shao (jishao);Critical;Positive;Not Automated;;1;" 1. Create the VF , check the mac address of vfs
 # modprobe -r igb
 # modprobe igb max_vfs=2
 # ip l 
 The mac address is the ""admin MAC""  
 
 
 
 
​​";"# ip l
 ens1f0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
     link/ether 00:1b:21:39:8b:18 brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 02:f9:40:5b:4a:d8, spoof checking on, link-state auto
     vf 1 MAC ae:1c:45:3a:c0:b4, spoof checking on, link-state auto
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-86879
2422;;;;;;;;;2;"2, Prepare a vm 
 # virsh list  --all
  Id    Name                           State
 ----------------------------------------------------
  -     vm1                             shut off
 
 Add this device info to the guest vm1 
 <interface type='hostdev' managed='yes'>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x0'/>
       </source>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 Start the guest and  check the mac address of the certain vf
 # virsh start vm1 
 # ip l
 #virsh dumpxml vm1 | grep interface -A7
 
 
​​";"#  virsh start vm1
 Domain vm1 started
 
 # ip l
 31: ens1f0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
     link/ether 00:1b:21:39:8b:18 brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 52:54:00:6d:90:02, spoof checking on, link-state auto
 
 #virsh dumpxml vm1 | grep interface -A7
     <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:75:e4:44'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x0'/>
       </source>
       <alias name='hostdev0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-86879
2422;;;;;;;;;3;"3, destroy the vm1 , check mac address of vfs
 # virsh destroy vm1
 Domain vm1 destroyed
 
 # ip l
 the mac address will be back to the ""admin mac "" address
 
 
 # virsh dumpxml vm1 | grep interface -A7
​​";"# virsh destroy vm1
 Domain vm1 destroyed
 
 # ip  l
 31: ens1f0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
     link/ether 00:1b:21:39:8b:18 brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 02:f9:40:5b:4a:d8, spoof checking on, link-state auto
 
 # virsh dumpxml vm1 | grep interface -A7
     <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:75:e4:44'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x0'/>
       </source>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-86879
2422;;;;;;;;;4;"4, # virsh start vm1 
    #  ip l 
​​";"#  virsh start vm1
 Domain vm1 started
 
 # ip l
 31: ens1f0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
     link/ether 00:1b:21:39:8b:18 brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 52:54:00:6d:90:02, spoof checking on, link-state auto";;RedHatEnterpriseLinux7/RHEL7-86879
2422;;;;;;;;;5;"5. if the ""admin mac""' is 00:00:00:00:00:00
 such as :
 ens2f0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc mq state DOWN mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5c brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
 
 If we assign this vf0 to  guest and reassign it the host, but some driver fail to reset back to 00:00:00:00:00:0. so change back to reset to  02:00:00:00:00:0  instead.
 redo the steps 1~4
​​";​​;;RedHatEnterpriseLinux7/RHEL7-86879
2423;RHEL7-86928;[blkdeviotune][--group-name]Set and get the group name lively when guest is running;"Test matrix:
 
 | without option | --current | --live
guest is running | get/set the runtime config | equal to ""without option"" | equal to ""without option""";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set any of the other disk iotune parameters before set group name:

 # virsh blkdeviotune vm1 vda  --read-iops-sec 400000000000

 Note: Because ""set group name alone doesn't make sense""";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-86928
2423;;;;;;;;;2;"Set iotune group name for a disk with command_option:
 # virsh blkdeviotune vm1 vda --group-name group1 command_option
";​​;;RedHatEnterpriseLinux7/RHEL7-86928
2423;;;;;;;;;3;"Get iotune group name for the disk with command_option:
 # virsh blkdeviotune vm1 vda command_option";"group name is  ""group1"" in the output:
 
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec  : 400000000000
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 400000000000
 write_iops_sec_max: 0
 size_iops_sec  : 0
 group_name     : group1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0";;RedHatEnterpriseLinux7/RHEL7-86928
2423;;;;;;;;;4;"Check that live setting and persistent setting don't affect each other:
 # virsh blkdeviotune vm1 vda --config
​​";Group name is empty in the output;;RedHatEnterpriseLinux7/RHEL7-86928
2423;;;;;;;;;5;"Check group name in guest dumpxml with command_option:
 # virsh dumpxml vm1 command_option
";"group name is ""group1"" in the dumpxml:

 ...
       <target dev='vda' bus='virtio'/>
       <iotune>
        <read_iops_sec>400000000000</read_iops_sec>
         <group_name>group1</group_name>
       </iotune>
 ...
";;RedHatEnterpriseLinux7/RHEL7-86928
2423;;;;;;;;;6;"Check that live setting and persistent setting don't affect each other:
 # virsh dumpxml vm1 --config
​​";Group name is empty in the output;;RedHatEnterpriseLinux7/RHEL7-86928
2424;RHEL7-86929;[blkdeviotune][--xxx-bytes-sec-max-length] Set and get duration in seconds to allow total/read/write max bytes;"Option matrix:
 
options | the meaning
--total-bytes-sec-max-length <number> | duration in seconds to allow total max bytes
--read-bytes-sec-max-length <number> | duration in seconds to allow read max bytes
--write-bytes-sec-max-length <number> | duration in seconds to allow write max bytesFor each option, test the following matrix:
 
 | without option | --current | --live | --config
guest is shutoff | get/set the persistent config | equal to ""without option"" | N/A | equal to ""without option""
guest is running | get/set the runtime config | equal to ""without option"" | equal to ""without option"" | get/set the persistent config";Fangge Jin (fjin);High;Positive;Not Automated;;1;" Test parameter:
 1) guest_status:
     shutoff, running
 2) command_option_1:
    --total-bytes-sec-max-length, --read-bytes-sec-max-length, --write-bytes-sec-max-length
 3) command_option_2:
     without option, --current, --live, --config

 Test all the combinations except this one:
 guest_status=shutoff, command_option_2=--live
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-86929
2424;;;;;;;;;2;"Prepare a guest_status guest with disk:
 # virsh dumpxml vm1
 ...
     <disk type='file' device='disk'>
       <driver name='qemu' type='qcow2' cache='none'/>
       <source file='/var/lib/libvirt/images/image-builder.qcow2'/>
       <target dev='vda' bus='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
     </disk>
 ...";​​;;RedHatEnterpriseLinux7/RHEL7-86929
2424;;;;;;;;;3;"Set iotune command_option_1 with command_option_2 for disk:
 # virsh blkdeviotune vm1 vda command_option_1 <a positive integer> command_option_2
 
 Note:
 The value of the integer should be in range [1, 1000000000000000], for example 100
​​";"set successfully
​​";;RedHatEnterpriseLinux7/RHEL7-86929
2424;;;;;;;;;4;"Get iotune for the disk with command_option_2:
 # virsh blkdeviotune vm1 vda command_option_2
​​";"command_option_1 is set correctly, the other two parameters are reset to 0(Is this expected result?), like:

 ...
 group_name     :
 total_bytes_sec_max_length: 100
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 ...
";;RedHatEnterpriseLinux7/RHEL7-86929
2424;;;;;;;;;5;"Check the command_option_1 value in domain xml:
 # virsh dumpxml vm1 command_option_2
​​";"command_option_1 in domain xml is correct, like:
 
 ...
       <target dev='vda' bus='virtio'/>
       <iotune>
         <total_bytes_sec_max_length>100</total_bytes_sec_max_length>
       </iotune>
 ...
​​";;RedHatEnterpriseLinux7/RHEL7-86929
2424;;;;;;;;;6;"If guest is running, need to do one of the following steps:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-86929
2424;;;;;;;;;7;"1) If guest is running and set iotune with --live, need to check that persistent configuration is not affected:
 # virsh blkdeviotune vm1 vda --config
​​";"command_option_1 is 0  in persistent configuration
​​";;RedHatEnterpriseLinux7/RHEL7-86929
2424;;;;;;;;;8;"# virsh dumpxml vm1 vda --config
​​";"command_option_1 is not present in persistent domain xml
​​";;RedHatEnterpriseLinux7/RHEL7-86929
2424;;;;;;;;;9;"2) If guest is running and set iotune group name with --config, need to check that runtime configuration is not affected:
 # virsh blkdeviotune vm1 vda --live";command_option_1 is 0 in runtime configuration;;RedHatEnterpriseLinux7/RHEL7-86929
2424;;;;;;;;;10;# virsh dumpxml vm1 vda --live;command_option_1 is not present in runtime domain xml;;RedHatEnterpriseLinux7/RHEL7-86929
2425;RHEL7-86930;[blkdevoitune][--xxx-iops-sec-max-length] Set and get duration in seconds to allow total/read/write I/O operations max;"Option matrix:
 
options | the meaning
--total-iops-sec-max-length <number> | duration in seconds to allow total I/O operations max
--read-iops-sec-max-length <number> | duration in seconds to allow read I/O operations max
--write-iops-sec-max-length <number> | duration in seconds to allow write I/O operations maxFor each option, test the following matrix:
 
 | without option | --current | --live | --config
guest is shutoff | get/set the persistent config | equal to ""without option"" | N/A | equal to ""without option""
guest is running | get/set the runtime config | equal to ""without option"" | equal to ""without option"" | get/set the persistent config";Fangge Jin (fjin);High;Positive;Not Automated;;1;" Test parameter:
 1) guest_status:
     shutoff, running
 2) command_option_1:
    --total-iops-sec-max-length, --read-iops-sec-max-length, --write-iops-sec-max-length
 3) command_option_2:
     without option, --current, --live, --config

 Test all the combinations except this one:
 guest_status=shutoff, command_option_2=--live
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-86930
2425;;;;;;;;;2;"Prepare a guest_status guest with disk:
 # virsh dumpxml vm1
 ...
     <disk type='file' device='disk'>
       <driver name='qemu' type='qcow2' cache='none'/>
       <source file='/var/lib/libvirt/images/image-builder.qcow2'/>
       <target dev='vda' bus='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
     </disk>
 ...";​​;;RedHatEnterpriseLinux7/RHEL7-86930
2425;;;;;;;;;3;"Set iotune command_option_1 with command_option_2 for disk:
 # virsh blkdeviotune vm1 vda command_option_1 <a positive integer> command_option_2
 
 Note:
 The value of the integer should be in range [1, 1000000000000000], for example 200
​​";"set successfully
​​";;RedHatEnterpriseLinux7/RHEL7-86930
2425;;;;;;;;;4;"Get iotune for the disk with command_option_2:
 # virsh blkdeviotune vm1 vda command_option_2
​​";"command_option_1 is set correctly, the other two parameters are reset to 0(Is this expected result?), like:

 ...
 total_iops_sec_max_length: 200
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
 ...
";;RedHatEnterpriseLinux7/RHEL7-86930
2425;;;;;;;;;5;"Check the command_option_1 value in domain xml:
 # virsh dumpxml vm1 command_option_2
​​";"command_option_1 in domain xml is correct, like:
 
 ...
       <target dev='vda' bus='virtio'/>
       <iotune>
         <total_bytes_sec_max_length>200</total_bytes_sec_max_length>
       </iotune>
 ...
​​";;RedHatEnterpriseLinux7/RHEL7-86930
2425;;;;;;;;;6;"If guest is running, need to do one of the following steps:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-86930
2425;;;;;;;;;7;"1) If guest is running and set iotune with --live, need to check that persistent configuration is not affected:
 # virsh blkdeviotune vm1 vda --config
​​";"command_option_1 is 0  in persistent configuration
​​";;RedHatEnterpriseLinux7/RHEL7-86930
2425;;;;;;;;;8;"# virsh dumpxml vm1 vda --config
​​";"command_option_1 is not present in persistent domain xml
​​";;RedHatEnterpriseLinux7/RHEL7-86930
2425;;;;;;;;;9;"2) If guest is running and set iotune group name with --config, need to check that runtime configuration is not affected:
 # virsh blkdeviotune vm1 vda --live";command_option_1 is 0 in runtime configuration;;RedHatEnterpriseLinux7/RHEL7-86930
2425;;;;;;;;;10;# virsh dumpxml vm1 vda --live;command_option_1 is not present in runtime domain xml;;RedHatEnterpriseLinux7/RHEL7-86930
2426;RHEL7-86931;[Host network interface management] nodedev-event;"virsh nodedev-event --help
  NAME
    nodedev-event - Node Device Events

  SYNOPSIS
    nodedev-event [--device <string>] [--event <string>] [--loop] [--timeout <number>] [--list] [--timestamp]

  DESCRIPTION
    List event types, or wait for node device events to occur

  OPTIONS
    --device <string>  filter by node device name
    --event <string>  which event type to wait for
    --loop           loop until timeout or interrupt, rather than one-shot
    --timeout <number>  timeout seconds
    --list           list valid event types
    --timestamp      show timestamp for each printed event
";Jingjing Shao (jishao);Critical;Positive;Not Automated;;1;" 1, Check the event types
 # virsh nodedev-event --list
​​";" # virsh nodedev-event --list
 lifecycle
 update";Test Case;RedHatEnterpriseLinux7/RHEL7-86931
2426;;;;;;;;;2;"2, # virsh nodedev-list --tree
  +- pci_0000_00_01_0
   |   |
   |   +- pci_0000_03_00_0
   |   |   |
   |   |   +- net_ens1f0_00_1b_21_39_8b_18
   |   |     
   |   +- pci_0000_03_00_1
   |   |   |
   |   |   +- net_ens1f1_00_1b_21_39_8b_19
   |   |     
   |   +- pci_0000_03_10_0
   |   +- pci_0000_03_10_1
   |   |   |
   |   |   +- net_enp3s16f1_12_2f_b4_d9_0a_ab
   |   |     
   |   +- pci_0000_03_10_2
   |   |   |
   |   |   +- net_enp3s16f2_ae_1c_45_3a_c0_b4
   |   |     
   |   +- pci_0000_03_10_3
   |       |
   |       +- net_enp3s16f3_72_b4_15_24_78_7e
   |         
 
 In one terminal
 # virsh nodedev-event  --event lifecycle
 
 In another terminal
 # virsh nodedev-detach pci_0000_03_10_1
 Device pci_0000_03_10_1 detached
 
​​";"By default, this command is one-shot, and returns success once an event occurs; you can send SIGINT (usually via ""Ctrl-C"") to quit immediately. 
 
 virsh nodedev-event  --event lifecycle 
 event 'lifecycle' for node device net_enp3s16f1_12_2f_b4_d9_0a_ab: Deleted
 events received: 1
 
​​";;RedHatEnterpriseLinux7/RHEL7-86931
2426;;;;;;;;;3;"4, In one terminal
 # virsh nodedev-event  --event lifecycle  --loop
 
 In another terminal
 # virsh nodedev-detach pci_0000_03_10_1
 Device pci_0000_03_10_1 detached
 
 # virsh nodedev-reattach pci_0000_03_10_1     
 Device pci_0000_03_10_1 re-attached
 
 # virsh nodedev-detach pci_0000_03_10_1
 Device pci_0000_03_10_1 detached
 
 # virsh nodedev-reattach pci_0000_03_10_1     
 Device pci_0000_03_10_1 re-attached
​​";"With --loop, the command prints all events until a timeout or interrupt key.
 
 virsh nodedev-event  --event lifecycle  --loop
 event 'lifecycle' for node device net_enp3s16f1_12_2f_b4_d9_0a_ab: Deleted
 event 'lifecycle' for node device net_enp3s16f1_12_2f_b4_d9_0a_ab: Created
 event 'lifecycle' for node device net_enp3s16f1_12_2f_b4_d9_0a_ab: Deleted
 event 'lifecycle' for node device net_enp3s16f1_12_2f_b4_d9_0a_ab: Created
 ^Cevent loop interrupted
 events received: 4
 
​​";;RedHatEnterpriseLinux7/RHEL7-86931
2426;;;;;;;;;4;"5, In one terminal
 # virsh nodedev-event  --event lifecycle  --loop  --timestamp
 
 In another terminal
 # virsh nodedev-detach pci_0000_03_10_1
 Device pci_0000_03_10_1 detached
 
 # virsh nodedev-reattach pci_0000_03_10_1     
 Device pci_0000_03_10_1 re-attached
 
 # virsh nodedev-detach pci_0000_03_10_1
 Device pci_0000_03_10_1 detached
 
 # virsh nodedev-reattach pci_0000_03_10_1     
 Device pci_0000_03_10_1 re-attached
​​";"When --timestamp is used, a human-readable timestamp will be printed before the event.
 
 virsh nodedev-event  --event lifecycle  --loop  --timestamp   
 2017-03-16 12:35:44.817+0000: event 'lifecycle' for node device net_enp3s16f1_12_2f_b4_d9_0a_ab: Deleted
 2017-03-16 12:35:50.868+0000: event 'lifecycle' for node device net_enp3s16f1_12_2f_b4_d9_0a_ab: Created
 2017-03-16 12:35:54.929+0000: event 'lifecycle' for node device net_enp3s16f1_12_2f_b4_d9_0a_ab: Deleted
 2017-03-16 12:35:57.104+0000: event 'lifecycle' for node device net_enp3s16f1_12_2f_b4_d9_0a_ab: Created";;RedHatEnterpriseLinux7/RHEL7-86931
2426;;;;;;;;;5;"6, virsh nodedev-event  --event lifecycle --timeout 20
 event loop timed out
 events received: 0
​​";" If --timeout is specified, the command gives up waiting for events after seconds have elapsed. 
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-86931
2426;;;;;;;;;6;"7, In one terminal
 virsh nodedev-event  --event lifecycle  --device pci_0000_03_10_1
 
 In another terminal
 virsh nodedev-detach pci_0000_03_10_1  
 Device pci_0000_03_10_1 detached
 
 virsh nodedev-reattach pci_0000_03_10_1                  
 Device pci_0000_03_10_1 re-attached
 
 virsh nodedev-detach pci_0000_03_10_2
 Device pci_0000_03_10_2 detached
 
 virsh nodedev-reattach pci_0000_03_10_2                  
 Device pci_0000_03_10_2 re-attached
 
​​";"# virsh nodedev-event  --event lifecycle  --device pci_0000_03_10_1
 
​​";;RedHatEnterpriseLinux7/RHEL7-86931
2426;;;;;;;;;7;"8, In one terminal
 virsh nodedev-event  --event update  --loop
 
 In another terminal
 virsh nodedev-detach pci_0000_03_10_1  
 Device pci_0000_03_10_1 detached
 
 virsh nodedev-reattach pci_0000_03_10_1                  
 Device pci_0000_03_10_1 re-attached  
​​";"virsh nodedev-event  --event update  --loop
 
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-86931
2426;;;;;;;;;8;"9. some negative scenarios
 virsh nodedev-event  --event lifecycle   pci_00          
 error: Could not find matching device 'pci_00'
 error: Node device not found: no node device with matching name 'pci_00'

 virsh nodedev-event  --event unknown            
 error: unknown event type unknown
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-86931
2427;RHEL7-86969;[virtio-win][viostor] Check guest BSOD after trigger by NMI;[virtio-win][viostor] Check guest BSOD after trigger by NMI;Yu Wang (wyu);High;Positive;Not Automated;;1;"1. start VM with virtio-blk-pci(both system disk and data disk):
 CLI:
 -object iothread,id=thread0 -drive file=win.raw,if=none,id=drive-virtio-disk1,format=raw,serial=mike_cao1,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk1,id=virtio-disk1
 -drive file=test.raw,if=none,id=drive-virtio-disk0,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk0,id=virtio-disk0
​​";VM started succsssuflly;Test Case;RedHatEnterpriseLinux7/RHEL7-86969
2427;;;;;;;;;2;"2.check whether viostor.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled viostor.sys verifier:
    #verifier.exe /standard /driver viostor.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings ";"2.Driver can be installed successfully ,2.  All the Standards flags are checked ,the verified driver fields shows ""viostor.sys""";;RedHatEnterpriseLinux7/RHEL7-86969
2427;;;;;;;;;3;"3.Configure regisiter for trigger BSOD by using NMI
  
   1.Click on Start and then Run.
   2.In the text box in the Run window, type regedit and click OK.
     This will open the Registry Editor program.
   3.Locate the HKEY_LOCAL_MACHINE folder under My Computer and
      click on the (+) sign next the folder name to expand the folder.
   4.Continue to expand folders until you reach the
      HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\CrashControl
     registry key.
   5.Select the CrashControl key under Control.
   6.From the menu, select Edit, then New and finally 32bit DWORD Value.
   7.On the right-hand side of the screen, a new value will appear.
      Name this new value NMICrashDump.
      The value must be named this exactly to function properly.
   8.Double-click on the NMICrashDump DWORD value you just created
      and set the Value data to 1.
   9.Click OK and then close Registry Editor.";3.Setting up successfully;;RedHatEnterpriseLinux7/RHEL7-86969
2427;;;;;;;;;4;"4. Restart your guest
     #shutdown -t 0 -r";4. Guest restart without error;;RedHatEnterpriseLinux7/RHEL7-86969
2427;;;;;;;;;5;"5.Open QMP monotor 
   # telnet $HostIP $Port
 {""execute"":""qmp_capabilities""}";"5.QMP monitor opened successfully:
 {""return"":{}}";;RedHatEnterpriseLinux7/RHEL7-86969
2427;;;;;;;;;6;"6.Generate BSoD manually  by NMI
 eg:
 {""execute"":""inject-nmi""}";6.BSOD occurs ,Dump begin generating from 0%;;RedHatEnterpriseLinux7/RHEL7-86969
2428;RHEL7-87007;[Migration][--persistent][--persistent-xml] Change persistent domain xml on target host when do live migration;"When do live migration, specify the persistent xml with --persistent-xml --persistent;
When do offline migration, this option will not take effect.
RFE: Bug 835300 - virsh migrate --live --copy-storage-all --persistent ... --xml dest-domain.xml saves wrong XML at destination ";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Define a guest on source host
 Don't define same guest on target host";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87007
2428;;;;;;;;;2;"Dump the domain xml into a file, and change something in the file. 
 
 For example, change current vcpu from 2 to 3:
 
* # virsh dumpxml vm1 |grep vcpu
  <vcpu placement='static' current='2'>4</vcpu>

 
*   # virsh dumpxml vm1 > /tmp/new.xml
* Change current='2' to current='3' and save the file
";​​;;RedHatEnterpriseLinux7/RHEL7-87007
2428;;;;;;;;;3;"Start guest:
 
* # virsh start vm1
";​​;;RedHatEnterpriseLinux7/RHEL7-87007
2428;;;;;;;;;4;"Do migration with --persistent --persistent-xml:
 
 
* # virsh migrate vm1 qemu+ssh://intel-5205-32-1.englab.nay.redhat.com/system --persistent-xml /tmp/new.xml --verbose --live  --persistent
";​​;;RedHatEnterpriseLinux7/RHEL7-87007
2428;;;;;;;;;5;"On target:
 
* # virsh dumpxml vm1|grep vcpu

 
​​";"current vcpu is 2 in active xml:
 
   <vcpu placement='static' current='2'>4</vcpu>
​​";;RedHatEnterpriseLinux7/RHEL7-87007
2428;;;;;;;;;6;"On target:
 
* # virsh dumpxml vm1 --inactive|grep vcpu
";"current vcpu is 3 in inactive xml:
 
   <vcpu placement='static' current='3'>4</vcpu>";;RedHatEnterpriseLinux7/RHEL7-87007
2429;RHEL7-87009;[node device] nodedev-event  --list;"virsh nodedev-event --help
  NAME
    nodedev-event - Node Device Events
 
  SYNOPSIS
    nodedev-event [--device <string>] [--event <string>] [--loop] [--timeout <number>] [--list] [--timestamp]
 
  DESCRIPTION
    List event types, or wait for node device events to occur
    --list           list valid event types
 
";Jingjing Shao (jishao);High;Positive;Automated;;1;"# virsh nodedev-event --list 
 
​​";" # virsh nodedev-event --list 
 lifecycle
 update
 
 lifecycle : record the node device operation
 such as :
 1, create devices
 create +- net_vnet0_fe_54_00_a3_6b_3c
 or scsi_host2007
 2, detach the device from host  
 nodedev-detach, nodedev-reattach
 
 update:    record the change of physical device
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-87009
2430;RHEL7-87115;[secret-event] [negative] input invalid parameters;Check input invalid parameters;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"root@localhost ~  ## virsh secret-event test
 error: either --list or --event <type> is required
 
 
 root@localhost ~  ## virsh secret-event
 error: either --list or --event <type> is required
 
 
 root@localhost ~  ## virsh secret-event f981dd17-143f-45bc-88e6-ed1fe20ce9da
 error: either --list or --event <type> is required
 
 
 root@localhost ~  ## virsh secret-event --event lifecycle uuiduuid
 error: failed to get secret 'uuiduuid'
 event loop interrupted
 events received: 0
 error: uuidstr in virSecretLookupByUUIDString must be a valid UUID
 
 
 root@localhost ~  ## virsh secret-event --event --list
 error: unknown event type --list
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87115
2431;RHEL7-87197;[event] [negative] Test invalid parameters;Test invalid parameters;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"1)If do not specify an option:
 # virsh event
 error: one of --list, --all, or --event <type> is required
 
 
​​";"should output corresponding error.
 
 
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-87197
2431;;;;;;;;;2;"2)give an invalid domain name
 # virsh event --all unknown
 error: failed to get domain 'unknown'";​​;;RedHatEnterpriseLinux7/RHEL7-87197
2431;;;;;;;;;3;"3)give an invalid event name
 # virsh event --event unknown
 error: unknown event type unknown";​​;;RedHatEnterpriseLinux7/RHEL7-87197
2431;;;;;;;;;4;"4)give an invalid timeout number
 # virsh event --all --timeout a
 error: Numeric value 'a' for <timeout> option is malformed or out of range";​​;;RedHatEnterpriseLinux7/RHEL7-87197
2431;;;;;;;;;5;"5)list event with an extra parameter
 # virsh event --list a";"5) list supported event successfully, since:
 [Bug 1435059] Should report ""unexpected data"" error when list event with an extra parameter[WONTFIX]";;RedHatEnterpriseLinux7/RHEL7-87197
2432;RHEL7-87200;[dns] Test DNS requests from isolated networks - bug 723862;isolate the dns server for isolated network;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"1. define and start a isolated network
 # virsh net-dumpxml isolated2
 <network>
   <name>isolated2</name>
   <uuid>e242b722-d501-41d1-abd6-ea6bc4d19836</uuid>
   <bridge name='virbr3' stp='on' delay='0'/>
   <mac address='52:54:00:d1:97:2a'/>
   <ip address='192.168.112.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.112.1' end='192.168.112.100'/>
     </dhcp>
   </ip>
 </network>
 
 # virsh net-start isolated2
 Network isolated2 started
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87200
2432;;;;;;;;;2;"2. check the configure file
 # cat /var/lib/libvirt/dnsmasq/isolated2.conf
​​";"##WARNING:  THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE
 ##OVERWRITTEN AND LOST.  Changes to this configuration should be made using:
 ##    virsh net-edit isolated2
 ## or other application using the libvirt API.
 ##
 ## dnsmasq conf file created by libvirt
 strict-order
 pid-file=/var/run/libvirt/network/isolated2.pid
 except-interface=lo
 bind-dynamic
 interface=virbr3
 dhcp-option=3
 ** no-resolv **
 ra-param=*,0,0
 dhcp-range=192.168.112.1,192.168.112.100
 dhcp-no-override
 dhcp-authoritative
 dhcp-lease-max=100
 dhcp-hostsfile=/var/lib/libvirt/dnsmasq/isolated2.hostsfile
 addn-hosts=/var/lib/libvirt/dnsmasq/isolated2.addnhosts
 
 (there is ""no-resolv"" for isolated network)";;RedHatEnterpriseLinux7/RHEL7-87200
2432;;;;;;;;;3;"3. start a guest using isolated network
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-87200
2432;;;;;;;;;4;"4. on the host
 # tcpdump -i virbr3
 
 on the guest:
 # ping google.com
 ping: google.com: Name or service not known";"on the host, the package is refused
  # tcpdump -i virbr3
 11:22:06.839058 IP 192.168.112.6.56678 > server7.domain: 17053+ A? google.com. (28)
 11:22:06.839293 IP server7.domain > 192.168.112.6.56678: 17053 Refused 0/0/0 (28)
 11:22:06.839685 IP 192.168.112.6.58122 > server7.domain: 17053+ A? google.com. (28)
 .....";;RedHatEnterpriseLinux7/RHEL7-87200
2433;RHEL7-87233;WALA-TC: [Cloudinit] VM can successfully login after provisioning - with password authentication;Test cloudinit can successfully create user account and correctly set ssh login authentication;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;1.Create a VM with only paasword authentication;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87233
2433;;;;;;;;;2;2.Login the VM by password ;Successfully create user account with sudo privilege & login with the password;;RedHatEnterpriseLinux7/RHEL7-87233
2433;;;;;;;;;3;config;​​;;RedHatEnterpriseLinux7/RHEL7-87233
2434;RHEL7-87234;WALA-TC: [Storage] Attach new, Detach, Attach existing disk in premium storage;"Attach new, Detach, Attach existing disk in premium storage account
";Yuxin Sun (yuxisun);Critical;Positive;Manual Only;;1;"Prepare a VM in Azure premium storage account (VM size: Standard_DS2)
 1. In Azure portal (, click the ""VIRTUAL MACHINES"" on the left panel, select the VM. Click ""Settings"" button on the top panel, then click the ""Disks"".https://portal.azure.com)";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87234
2434;;;;;;;;;2;"2. Click ""Disks"" in the Settings section. Attach new disks.
 2.1 Select ""Attach new"".
 * Disk file name: P10
 * Disk size: 50
 * Host caching: None
 Then save.
 2.2 Select ""Attach new"".
 * Disk file name: P20
 * Disk size: 512
 * Host caching: Read Only
 Then save.
 2.3 Select ""Attach new"".
 * Disk file name: P30
 * Disk size: 1023
 * Host caching: Read/Write
 Then save.
";"Three new disks are attached to the VM.
​​";;RedHatEnterpriseLinux7/RHEL7-87234
2434;;;;;;;;;3;"3. Login the VM and check the new disk properties.
​​";"There should be three new disks: sdc, sdd, sde, and the sizes should be 50G, 512G, 1023G.
 * the bytes numbers in fdisk are correct. The GB numbers echo bytes numbers/10^9.
​​";;RedHatEnterpriseLinux7/RHEL7-87234
2434;;;;;;;;;4;"4. Format the disk and mount.
 # fdisk /dev/sdc
 # mkfs.ext4 /dev/sdc1
 # mkdir /mnt/newdisk1
 # mount /dev/sdc1 /mnt/newdisk1
 
 # fdisk /dev/sdd
 # mkfs.ext3 /dev/sdd1
 # mkdir /mnt/newdisk2
 # mount /dev/sdd1 /mnt/newdisk2
 
 # fdisk /dev/sde
 # mkfs.xfs /dev/sde1
 # mkdir /mnt/newdisk3
 # mount /dev/sde1 /mnt/newdisk3
​​";"Successfully to format the disk and mount them to the mount points.
​​";;RedHatEnterpriseLinux7/RHEL7-87234
2434;;;;;;;;;5;"5. Check if the disk can read and write. For each disk, do the following manipulations.
 # cd /mnt/newdisk1
 # touch test
 # vi test
 # cat test
 # cp test test1
 # rm -rf test1
​​";"All the read and write manipulations work well.
​​";;RedHatEnterpriseLinux7/RHEL7-87234
2434;;;;;;;;;6;"6. Umount the /dev/sde
 Detach the P30 disk;
 Check the disk properties inside the VM
​​";"# fdisk -l /dev/sde
 # fdisk: cannot open /dev/sde: No such file or dictory
​​";;RedHatEnterpriseLinux7/RHEL7-87234
2434;;;;;;;;;7;"7. Attach the P30 back(Attach existing disk)
 7.1 Check If the disk is attached. Disk size is correct. Partition and file system time is correct.
 7.2 Mount the disk. Check if the files inside the VM are existing.
​​";"# fdisk -l /dev/sde
 Disk size is correct(1023G). Partition and file system type is correct.(/dev/sde1 xfs)
 Files inside the VM are existing.
​​";;RedHatEnterpriseLinux7/RHEL7-87234
2434;;;;;;;;;8;config;​​;;RedHatEnterpriseLinux7/RHEL7-87234
2435;RHEL7-87239;WALA-TC: [Storage] Attach new, Detach, Attach existing disk in standard storage;"Attach new, Detach, Attach existing disk in standard storage account
";Yuxin Sun (yuxisun);Critical;Positive;Manual Only;;1;"Prepare a VM in Azure standard storage account (VM size: Standard_A2)
 1. In Azure portal (https://portal.azure.com), click the ""VIRTUAL MACHINES"" on the left panel, select the VM. Click ""Settings"" button on the top panel, then click the ""Disks"".";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-87239
2435;;;;;;;;;2;"2. Click ""Disks"" in the Settings section. Attach new disks.
 2.1 Select ""Attach new"".
 * Disk file name: disk1
 * Disk size: 50
 * Host caching: None
 Then save.
 2.2 Select ""Attach new"".
 * Disk file name: disk2
 * Disk size: 512
 * Host caching: Read Only
 Then save.
 2.3 Select ""Attach new"".
 * Disk file name: disk3
 * Disk size: 1023
 * Host caching: Read/Write
 Then save.
";"Three new disks are attached to the VM.
​​";;RedHatEnterpriseLinux7/RHEL7-87239
2435;;;;;;;;;3;"3. Login the VM and check the new disk properties.
​​";"There should be three new disks: sdc, sdd, sde, and the sizes should be 50G, 512G, 1023G.
 * the bytes numbers in fdisk are correct. The GB numbers echo bytes numbers/10^9.
​​";;RedHatEnterpriseLinux7/RHEL7-87239
2435;;;;;;;;;4;"4. Format the disk and mount.
 # fdisk /dev/sdc
 # mkfs.ext4 /dev/sdc1
 # mkdir /mnt/newdisk1
 # mount /dev/sdc1 /mnt/newdisk1
 
 # fdisk /dev/sdd
 # mkfs.ext3 /dev/sdd1
 # mkdir /mnt/newdisk2
 # mount /dev/sdd1 /mnt/newdisk2
 
 # fdisk /dev/sde
 # mkfs.xfs /dev/sde1
 # mkdir /mnt/newdisk3
 # mount /dev/sde1 /mnt/newdisk3
​​";"Successfully to format the disk and mount them to the mount points.
​​";;RedHatEnterpriseLinux7/RHEL7-87239
2435;;;;;;;;;5;"5. Check if the disk can read and write. For each disk, do the following manipulations.
 # cd /mnt/newdisk1
 # touch test
 # vi test
 # cat test
 # cp test test1
 # rm -rf test1
​​";"All the read and write manipulations work well.
​​";;RedHatEnterpriseLinux7/RHEL7-87239
2435;;;;;;;;;6;"6. Umount the /dev/sde
 Detach the disk1 disk;
 Check the disk properties inside the VM
​​";"# fdisk -l /dev/sde
 # fdisk: cannot open /dev/sde: No such file or dictory
​​";;RedHatEnterpriseLinux7/RHEL7-87239
2435;;;;;;;;;7;"7. Attach the disk1 back(Attach existing disk)
 7.1 Check If the disk is attached. Disk size is correct. Partition and file system time is correct.
 7.2 Mount the disk. Check if the files inside the VM are existing.
​​";"# fdisk -l /dev/sde
 Disk size is correct(50G). Partition and file system type is correct.(/dev/sdc1 ext4)
 Files inside the VM are existing.
​​";;RedHatEnterpriseLinux7/RHEL7-87239
2435;;;;;;;;;8;config;​​;;RedHatEnterpriseLinux7/RHEL7-87239
2436;RHEL7-87254;[Hyper-V][VMBUS]not enough entropy in random pool; Hyper-V VMs suffer from lack of entropy as hypervisor callback interrupts are not routed through the standard linux interrupt mechanism which mines randomness.;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;Run Hyper-V VM and make sure no activity inside it is ongoing, close the VM's console if open.; ;Test Case;RedHatEnterpriseLinux7/RHEL7-87254
2436;;;;;;;;;2;"ssh to the VM and run
 $time head -c 1000 /dev/random > /dev/null 2>&1";VM not hang;;RedHatEnterpriseLinux7/RHEL7-87254
2436;;;;;;;;;3;"ssh to the VM (in a parallel session) and run network traffic
 e.g. 'iperf -t 1000 ....'";"With the network activity ongoing the random pool is supposed to get entropy from interrupts and the process of Step 2 should finish in timely fashion, e.g. it may take several minutes.

";;RedHatEnterpriseLinux7/RHEL7-87254
2437;RHEL7-87294;[vIOMMU] Some negative scenarios about configuration or xml validation and hotplug;"some negative scenarios for Emulated IOMMU
";Jingjing Shao (jishao);Medium;Negative;Not Automated;;1;"1, Add the  IOMMU  xml  to  the guest with pc machine type, then start the guest
  <iommu model='intel'/>
 
​​";" # virsh start rhel7.3
    error: Failed to start domain rhel7.3
    error: unsupported configuration: IOMMU device: 'intel' is only supported with Q35 machine";Test Case;RedHatEnterpriseLinux7/RHEL7-87294
2437;;;;;;;;;2;"2, Do the test on amd host
 
​​";"Output:
 # virsh start q35-js
 error: Failed to start domain q35-js
 error: internal error: process exited while connecting to monitor: 
 (process:5486): GLib-WARNING **: gmem.c:482: custom memory allocation vtable not supported
 qemu-kvm: -machine pc-q35-rhel7.3.0,accel=kvm,usb=off: Unsupported machine type
 Use -machine help to list supported machines!";;RedHatEnterpriseLinux7/RHEL7-87294
2437;;;;;;;;;3;"3, coldplug reject 
 
​​";"Output:
 # virsh attach-device q35-js  iommu.xml  --config
 error: Failed to attach device from iommu.xml
 error: Operation not supported: persistent attach of device 'iommu' is not supported";;RedHatEnterpriseLinux7/RHEL7-87294
2437;;;;;;;;;4;"4, hotplug reject 
 
​​";"Output:
 # virsh start q35-js
 Domain q35-js started
 # virsh attach-device q35-js  iommu.xml  
 error: Failed to attach device from iommu.xml
 error: Operation not supported: live attach of device 'iommu' is not supported";;RedHatEnterpriseLinux7/RHEL7-87294
2437;;;;;;;;;5;"5,  Test with lower version of qemu-kvm-rhev
        # rpm -q qemu-kvm-rhev
        qemu-kvm-rhev-2.6.0-17.el7.x86_64
 
​​";"Output:
 # virsh start q35-js
 error: Failed to start domain q35-js
 error: internal error: qemu unexpectedly closed the monitor: warning: host doesn't support requested feature: CPUID.01H:ECX.vmx [bit 5]
 warning: host doesn't support requested feature: CPUID.01H:ECX.vmx [bit 5]
 2016-09-28T11:29:21.804359Z qemu-kvm: Option '-device intel-iommu' cannot be handled by this machine";;RedHatEnterpriseLinux7/RHEL7-87294
2437;;;;;;;;;6;"6.  Add the  IOMMU  xml as below  to  the guest with 'q35' machine type
   <iommu model='intel'>
   <driver intremap='up'/>
    </iommu>
 
 or 
 
 <iommu model='intel'>
   <driver intremapeeeeee='up'/>
  </iommu>
 
 or 
 <iommu model='intel'>
   <driver intremap='on'  cached='on'/>
 </iommu>
 
 or 
 
 <iommu model='intel'>
   <driver intremap='on'  caching='up'/>
 </iommu>
 
 Then start the guest
​​";"Get the error 
​​";;RedHatEnterpriseLinux7/RHEL7-87294
2437;;;;;;;;;7;"7. Add the  IOMMU  xml as below  to  the guest without   <ioapic driver='qemu'/>
 
 # virsh edit q35-js
 
​​";"Output:
 error: XML error: IOMMU interrupt remapping requires split I/O APIC (ioapic driver='qemu')
 Failed. Try again? [y,n,i,f,?]:";;RedHatEnterpriseLinux7/RHEL7-87294
2437;;;;;;;;;8;"8. for virtio devices which enabled iommu, do not add iotlb
 # virsh dumpxml rhelq
 ...
 <feature>
 <ioapic driver='qemu'/>
  </features>
 ...
 <devices> 
 <iommu model='intel'> 
 <driver intremap='on'/> 
 </iommu> 
 <memballoon model='virtio'> 
 ...
 <driver iommu='on' ats='on'/> 
 </memballoon>
 </devices>";​​;;RedHatEnterpriseLinux7/RHEL7-87294
2438;RHEL7-87295;WALA-TC: [life cycle] Check system status after reboot VM 1000 times;"Reboot 100 times inside the guest VM and check waagent.log
";Yuxin Sun (yuxisun);Low;Positive;Manual Only;;1;"Refer to https://bugzilla.redhat.com/show_bug.cgi?id=1428656 
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-87295
2438;;;;;;;;;2;"1. Prepare a VM (A1 size). Enable swap. size is 2048
​​";"# free -m
 The swap size is 2047
​​";;RedHatEnterpriseLinux7/RHEL7-87295
2438;;;;;;;;;3;"2. Reboot VM 100 times
 *1)Put this script into RHEL-7 /root/ folder. chmod +x /root/set_reboot.sh
 2) Add the following line into /etc/rc.d/rc.local:
 bash /root/set_reboot.sh
 3) chmod +x /etc/rc.d/rc.local
 4) systemctl enable rc-local
 5) reboot the VM manually.
 This script will keep rebooting the VM 1000 times. The current reboot times is written in /var/log/num. If you want to stop rebooting, touch /root/stop
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-87295
2438;;;;;;;;;4;"3. Check waagent.log
​​";"There's no error and abnormal warning messages
​​";;RedHatEnterpriseLinux7/RHEL7-87295
2438;;;;;;;;;5;"cat set_reboot.sh
#!/bin/bash
if [ -f ""/var/log/num"" ];
then global_num=`cat /var/log/num`
else global_num=0
fi
function handler(){ sleep 80 num=`expr ${global_num} + 1`
echo -e ""${num}:\t""`date -R` >> /var/log/reboot.info
echo -e ""${num}:\t""`date -R` >> /var/log/waagent.log
echo ${num} > /var/log/num}
function is_not_run(){ if [ -f ""/root/stop"" ];then exit 253 fi
if [ ${global_num} == ""1000"" ];then exit 252 fi}
function main(){ is_not_run handler reboot}

main
";​​;;RedHatEnterpriseLinux7/RHEL7-87295
2438;;;;;;;;;6;config;​​;;RedHatEnterpriseLinux7/RHEL7-87295
2439;RHEL7-87296;WALA-TC: [WALA conf] Change hostname 1000 times;"Change hostname many times and check waagent.log
";Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"Refer to: https://bugzilla.redhat.com/show_bug.cgi?id=1428731 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87296
2439;;;;;;;;;2;"Prepare a VM, and login.
 1. Modify the option  in /etc/waagent.conf.
 set Provisioning.MonitorHostName=y.
 Restart waagent service to reload the configurations.";​​;;RedHatEnterpriseLinux7/RHEL7-87296
2439;;;;;;;;;3;"2. Change hostname 1000 times with this script:
 #!/bin/bash
for i in `seq 1000`;
do
    echo ""===== walacheck$i =====""
    hostname walacheck$i
    sleep 30
done
​​";​​;;RedHatEnterpriseLinux7/RHEL7-87296
2439;;;;;;;;;4;3. Check if there's error logs in waagent.log;"There's no error logs in waagent.log
​​";;RedHatEnterpriseLinux7/RHEL7-87296
2440;RHEL7-87298;WALA-TC: [Settings] Reset an existing user ssh key;WALA-TC: [Settings] Reset an existing user ssh key;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;Refer to:  https://bugzilla.redhat.com/show_bug.cgi?id=1364890;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87298
2440;;;;;;;;;2;"Prepare a VM in Azure, authenticate with ssh_key
 1. In the new Azure portal ( ) , click the ""VIRTUAL MACHINES"" on the left panel. Select the VM, then click the ""Settings"" button on top of the Virtual machines section.https://portal.azure.com";​​;;RedHatEnterpriseLinux7/RHEL7-87298
2440;;;;;;;;;3;"2. Click ""Reset Password(reset ssh key in ARM mode)"" in the Settings section. Enter an existing username and the new ssh key. Then save.
​​";​​;;RedHatEnterpriseLinux7/RHEL7-87298
2440;;;;;;;;;4;"3. Wait until process finished. Check if can login with the existing username and new ssh key
​​";"Can login the VM with the existing username and new ssh key.
​​";;RedHatEnterpriseLinux7/RHEL7-87298
2440;;;;;;;;;5;"4. Try to login with password
​​";"Cannot login with password
​​";;RedHatEnterpriseLinux7/RHEL7-87298
2440;;;;;;;;;6;config;​​;;RedHatEnterpriseLinux7/RHEL7-87298
2441;RHEL7-87299;WALA-TC: [life cycle] Shutdown and capture a VM to specialized image;Shutdown and capture a VM to specialized image;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"Only for classic.
 1. Prepare a VM in ASM mode.
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-87299
2441;;;;;;;;;2;"2.  Shutdown the VM. In the new Azure portal (https://portal.azure.com ), click the ""Virtual machines"" on the left panel. Then choose a running VM, then click the ""Capture"" button on the Virtual machines section. Type the image name and image label. Don't check on the options ""I've run waagent -deprovision on the virtual machine."". Then ""OK""
";​​;;RedHatEnterpriseLinux7/RHEL7-87299
2441;;;;;;;;;3;"2. Click the ""VM images(classic)"" on the left panel. Check the corresponding image's status";"New VM image is created and listed. OS STATE should be ""Specialized"".
​​";;RedHatEnterpriseLinux7/RHEL7-87299
2441;;;;;;;;;4;"3. Create a new VM base on this specialized image. With new username and password
 Check waagent.log
​​";"New VM is created, but the new username and password are ignored.
 The VM status is running
 Can login with the old username and password.
 The ERROR logs are reasonable.
 # cat /var/log/waagent|grep ERROR
 ERROR Event: name=WALinuxAgent, op=Restart, message=WALinuxAgent-2.2.0 did not terminate cleanly
​​";;RedHatEnterpriseLinux7/RHEL7-87299
2441;;;;;;;;;5;config;​​;;RedHatEnterpriseLinux7/RHEL7-87299
2442;RHEL7-87300;WALA-TC: [life cycle] Capture a VM to generalized image;Capture a VM to generalized image;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"Only for classic.
 1. Prepare a VM in ASM mode. Run ""waagent -force -deprovision+user"" in the VM, and shutdown the VM.
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-87300
2442;;;;;;;;;2;"2.  In the new Azure portal ( ), click the ""Virtual machines"" on the left panel. Then choose a running VM, then click the ""Capture"" button on the Virtual machines section. Type the image name and image label. Check the checkbox ""I've run waagent -deprovision on the virtual machine."" Then ""OK""https://portal.azure.com";​​;;RedHatEnterpriseLinux7/RHEL7-87300
2442;;;;;;;;;3;"3. Click the ""VM images(classic)"" on the left panel. Check the corresponding image's status";"New VM image is created and listed. OS STATE should be ""Generalized"".
​​";;RedHatEnterpriseLinux7/RHEL7-87300
2442;;;;;;;;;4;"4. Create a new VM base on this generalized image. With new username and password
 Check waagent.log
​​";"New VM is created, the new username and password are used.
 There's no error logs.
​​";;RedHatEnterpriseLinux7/RHEL7-87300
2442;;;;;;;;;5;config;​​;;RedHatEnterpriseLinux7/RHEL7-87300
2443;RHEL7-87318;[dns] test the localOnly attribute for dns server;"If the optional localOnly attribute on the domain element is ""yes"", then DNS requests under this domain will only be resolved by the virtual network's own DNS server - they will not be forwarded to the host's upstream DNS server. If localOnly is ""no"", and by default, unresolved requests will be forwarded.(by default it is equal to localonly='no')";Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"1. define and start a network with ""<domain name='example.com' localOnly='yes'/>"" and specify 2 hosts with static ip and name, start 2 guests connected to this network with the mac specified
 
  # virsh net-dumpxml default
 <network connections='2'>
   <name>default</name>
   <uuid>4018b9c3-63f9-4719-b4bc-450bbb2b77f3</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:c8:29:9f'/>
   <domain name='example.com' localOnly='yes'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
       <host mac='00:16:3e:77:e2:ed' name='foo.example.com' ip='192.168.122.10'/>
       <host mac='00:16:3e:3e:a9:1a' name='bar.example.com' ip='192.168.122.11'/>
     </dhcp>
   </ip>
 </network>
​​"; If <domain name='example.com' localOnly='yes'/>, any dns request for *.example.com will not be forward to upstream dns server ;Test Case;RedHatEnterpriseLinux7/RHEL7-87318
2443;;;;;;;;;2;"2. check the config file
 # cat /var/lib/libvirt/dnsmasq/default.conf
​​";"##WARNING:  THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE
 ##OVERWRITTEN AND LOST.  Changes to this configuration should be made using:
 ##    virsh net-edit default
 ## or other application using the libvirt API.
 ##
 ## dnsmasq conf file created by libvirt
 strict-order
 local=/example.com/
 domain=example.com
 expand-hosts
 pid-file=/var/run/libvirt/network/default.pid
 except-interface=lo
 bind-dynamic
 interface=virbr0
 dhcp-range=192.168.122.2,192.168.122.254
 dhcp-no-override
 dhcp-authoritative
 dhcp-lease-max=253
 dhcp-hostsfile=/var/lib/libvirt/dnsmasq/default.hostsfile
 addn-hosts=/var/lib/libvirt/dnsmasq/default.addnhosts";;RedHatEnterpriseLinux7/RHEL7-87318
2443;;;;;;;;;3;"3. login one guest, try to resolve some domain name, at the same time, listen on the host to check if the packet is forwarded.
 on host:
 # tcpdump -i enp0s25 dst port 53
 on guest:
 # dig foo.example.com
 # dig bar
 # dig nn.example.com
​​";"
 # dig foo.example.com
 .....
 ;; ANSWER SECTION:
 foo.example.com. 0 IN A 192.168.122.10
 ....
 # dig bar
 ....
 ;; ANSWER SECTION:
 bar. 0 IN A 192.168.122.11
 ......
 # dig nn.example.com ===> nothing output
 ; <<>> DiG 9.9.4-RedHat-9.9.4-36.el7 <<>> nn.example.com
 ;; global options: +cmd
 ;; Got answer:
 ;; ->>HEADER<<- opcode: QUERY, status: NXDOMAIN, id: 9212
 ;; flags: qr rd ra ad; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 0
 
 ;; QUESTION SECTION:
 ;nn.example.com. IN A
 
 ;; Query time: 1 msec
 ;; SERVER: 192.168.122.1#53(192.168.122.1)
 ;; WHEN: Mon Mar 27 16:32:13 CST 2017
 ;; MSG SIZE  rcvd: 32
 
 on host
 # tcpdump -i enp0s25 dst port 53
 ===> nothing about the example.com catched";;RedHatEnterpriseLinux7/RHEL7-87318
2443;;;;;;;;;4;"4. check other domain name not in example.com, the request will be forwarded
 on host:
 # tcpdump -i enp0s25 dst port 53
 on guest:
 # dig www.baidu.com";"# dig www.baidu.com
 
 ; <<>> DiG 9.9.4-RedHat-9.9.4-36.el7 <<>> www.baidu.com
 ;; global options: +cmd
 ;; Got answer:
 ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 20829
 ;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 1
 
 ;; OPT PSEUDOSECTION:
 ; EDNS: version: 0, flags:; udp: 4096
 ;; QUESTION SECTION:
 ;www.baidu.com. IN A
 
 ;; ANSWER SECTION:
 www.baidu.com. 1118 IN CNAME www.a.shifen.com.
 www.a.shifen.com. 218 IN A 119.75.213.51
 www.a.shifen.com. 218 IN A 119.75.213.50
 
 ;; Query time: 3 msec
 ;; SERVER: 192.168.122.1#53(192.168.122.1)
 ;; WHEN: Mon Mar 27 17:10:23 CST 2017
 ;; MSG SIZE  rcvd: 101
 
 on host
 17:10:24.000222 IP server7.60146 > infoblox-trust01.pek2.redhat.com.domain: 27+ [1au] A? www.baidu.com. (42)";;RedHatEnterpriseLinux7/RHEL7-87318
2443;;;;;;;;;5;localOnly='no'  or just omit this attribute;​​;;RedHatEnterpriseLinux7/RHEL7-87318
2443;;;;;;;;;6;"1. # virsh net-dumpxml default
 <network connections='2'>
   <name>default</name>
   <uuid>4018b9c3-63f9-4719-b4bc-450bbb2b77f3</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:c8:29:9f'/>
   <domain name='example.com' localOnly='no'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
       <host mac='00:16:3e:77:e2:ed' name='foo.example.com' ip='192.168.122.10'/>
       <host mac='00:16:3e:3e:a9:1a' name='bar.example.com' ip='192.168.122.11'/>
     </dhcp>
   </ip>
 </network>";​​;;RedHatEnterpriseLinux7/RHEL7-87318
2443;;;;;;;;;7;"2. # cat /var/lib/libvirt/dnsmasq/default.conf
 
​​";"##WARNING:  THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE
 ##OVERWRITTEN AND LOST.  Changes to this configuration should be made using:
 ##    virsh net-edit default
 ## or other application using the libvirt API.
 ##
 ## dnsmasq conf file created by libvirt
 strict-order
 domain=example.com
 expand-hosts
 pid-file=/var/run/libvirt/network/default.pid
 except-interface=lo
 bind-dynamic
 interface=virbr0
 dhcp-range=192.168.122.2,192.168.122.254
 dhcp-no-override
 dhcp-authoritative
 dhcp-lease-max=253
 dhcp-hostsfile=/var/lib/libvirt/dnsmasq/default.hostsfile
 addn-hosts=/var/lib/libvirt/dnsmasq/default.addnhosts
 
 (no ""local=example.com"" in the config file)";;RedHatEnterpriseLinux7/RHEL7-87318
2443;;;;;;;;;8;"3. login one guest, try to resolve some domain name, at the same time, listen on the host to check if the packet is forwarded.
 on host:
 # tcpdump -i enp0s25 dst port 53
 on guest:
 # dig foo.example.com
 # dig bar
 # dig nn.example.com";"# dig foo.example.com
  ;; ANSWER SECTION:
 foo.example.com. 0 IN A 192.168.122.10
 # dig bar
 ;; ANSWER SECTION:
 bar. 0 IN A 192.168.122.11
 
 
 # dig nn.example.com
 ......
 ;; QUESTION SECTION:
 ;nn.example.com. IN A
 
 ;; AUTHORITY SECTION:
 example.com. 3600 IN SOA sns.dns.icann.org. noc.dns.icann.org. 2016110781 7200 3600 1209600 3600
 
 ;; Query time: 191 msec
 ;; SERVER: 192.168.122.1#53(192.168.122.1)
 ;; WHEN: Mon Mar 27 16:27:05 CST 2017
 ;; MSG SIZE  rcvd: 100
 
 on host, we can see the packet is forwarded by enp0s25
 # tcpdump -i enp0s25 dst port 53
 ...
 16:27:05.389298 IP server7.17196 > infoblox-trust01.pek2.redhat.com.domain: 8715+ [1au] A? nn.example.com. (43)";;RedHatEnterpriseLinux7/RHEL7-87318
2444;RHEL7-87321;[dns] test the localPtr attribute for dns server;The optional localPtr attribute (since 3.0.0) configures the DNS server to not forward any reverse DNS requests for IP addresses from the network configured by the address and netmask/prefix attributes. For some unusual network prefixes (not divisible by 8 for IPv4 or not divisible by 4 for IPv6) libvirt may be unable to compute the PTR domain automatically. ;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"# virsh net-dumpxml default
 <network>
   <name>default</name>
   <uuid>4018b9c3-63f9-4719-b4bc-450bbb2b77f3</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:c8:29:9f'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
     </dhcp>
   </ip>
 </network>
 # cat /var/lib/libvirt/dnsmasq/default.conf
 ##WARNING:  THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE
 ##OVERWRITTEN AND LOST.  Changes to this configuration should be made using:
 ##    virsh net-edit default
 ## or other application using the libvirt API.
 ##
 ## dnsmasq conf file created by libvirt
 strict-order
 pid-file=/var/run/libvirt/network/default.pid
 except-interface=lo
 bind-dynamic
 interface=virbr0
 dhcp-range=192.168.122.2,192.168.122.254
 dhcp-no-override
 dhcp-authoritative
 dhcp-lease-max=253
 dhcp-hostsfile=/var/lib/libvirt/dnsmasq/default.hostsfile
 addn-hosts=/var/lib/libvirt/dnsmasq/default.addnhosts
​​";use default network, by default the localptr='no';Test Case;RedHatEnterpriseLinux7/RHEL7-87321
2444;;;;;;;;;2;"1. start a guest using default network , login it
 on guest:
 # dig PTR 22.122.168.192.in-addr.arpa.
 
 on host
 # tcpdump -i enp0s25 dst port 53
​​";"The dig on guest will get authority info, and the packet is forwarded by the host
 on guest
 # dig PTR 22.122.168.192.in-addr.arpa.
 
 ; <<>> DiG 9.9.4-RedHat-9.9.4-36.el7 <<>> PTR 22.122.168.192.in-addr.arpa.
 ;; global options: +cmd
 ;; Got answer:
 ;; ->>HEADER<<- opcode: QUERY, status: NXDOMAIN, id: 40479
 ;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 1
 
 ;; OPT PSEUDOSECTION:
 ; EDNS: version: 0, flags:; udp: 4096
 ;; QUESTION SECTION:
 ;22.122.168.192.in-addr.arpa. IN PTR
 
 ;; AUTHORITY SECTION:
 168.192.in-addr.arpa. 300 IN SOA ns01.intranet.prod.int.phx2.redhat.com. noc.redhat.com. 2013062800 86400 600 604800 86400
 
 ;; Query time: 235 msec
 ;; SERVER: 192.168.122.1#53(192.168.122.1)
 ;; WHEN: Mon Mar 27 16:44:38 CST 2017
 ;; MSG SIZE  rcvd: 134
 
  on host
 # tcpdump -i enp0s25 dst port 53
 16:44:39.155287 IP server7.40829 > infoblox-trust01.pek2.redhat.com.domain: 55535+ [1au] PTR? 22.122.168.192.in-addr.arpa. (56)
​​";;RedHatEnterpriseLinux7/RHEL7-87321
2444;;;;;;;;;3;"set localPtr='yes',
 Do the configure as first : 
 # echo 2 > /proc/sys/net/ipv6/conf/eno1/accept_ra
 Then 
 # virsh net-dumpxml default
 <network>
   <name>default</name>
   <uuid>4018b9c3-63f9-4719-b4bc-450bbb2b77f3</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:c8:29:9f'/>
   <ip address='192.168.122.1' netmask='255.255.255.0' localPtr='yes'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
     </dhcp>
   </ip>
   <ip family='ipv6' address='2001:db8:ca2:2::1' prefix='64' localPtr='yes'>
   </ip>
 </network>";​​;;RedHatEnterpriseLinux7/RHEL7-87321
2444;;;;;;;;;4;"# cat /var/lib/libvirt/dnsmasq/default.conf
 ##WARNING:  THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE
 ##OVERWRITTEN AND LOST.  Changes to this configuration should be made using:
 ##    virsh net-edit default
 ## or other application using the libvirt API.
 ##
 ## dnsmasq conf file created by libvirt
 strict-order
 local=/122.168.192.in-addr.arpa/
 local=/2.0.0.0.2.a.c.0.8.b.d.0.1.0.0.2.ip6.arpa/
 pid-file=/var/run/libvirt/network/default.pid
 except-interface=lo
 bind-dynamic
 interface=virbr0
 dhcp-range=192.168.122.2,192.168.122.254
 dhcp-no-override
 dhcp-authoritative
 dhcp-lease-max=253
 dhcp-hostsfile=/var/lib/libvirt/dnsmasq/default.hostsfile
 addn-hosts=/var/lib/libvirt/dnsmasq/default.addnhosts
 dhcp-range=2001:db8:ca2:2::1,ra-only";"
 (there is local=/122.168.192.in-addr.arpa/)";;RedHatEnterpriseLinux7/RHEL7-87321
2444;;;;;;;;;5;"1. start a guest using default network , login it
 on guest:
 # dig PTR 22.122.168.192.in-addr.arpa.
 
 on host
 # tcpdump -i enp0s25 dst port 53 ";"dig get nothing
 #  dig PTR 22.122.168.192.in-addr.arpa.
 
 ; <<>> DiG 9.9.4-RedHat-9.9.4-36.el7 <<>> PTR 22.122.168.192.in-addr.arpa.
 ;; global options: +cmd
 ;; Got answer:
 ;; ->>HEADER<<- opcode: QUERY, status: NXDOMAIN, id: 46198
 ;; flags: qr rd ra ad; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 0
 
 ;; QUESTION SECTION:
 ;22.122.168.192.in-addr.arpa. IN PTR
 
 ;; Query time: 1 msec
 ;; SERVER: 192.168.122.1#53(192.168.122.1)
 ;; WHEN: Mon Mar 27 16:50:11 CST 2017
 ;; MSG SIZE  rcvd: 45
 
 host will not forward the PTR packets
 # tcpdump -i enp0s25 dst port 53 
 ==> nothing about 22.122.168.192.in-addr.arpa.";;RedHatEnterpriseLinux7/RHEL7-87321
2444;;;;;;;;;6;"2. on guest
 # dig PTR 12.12.12.34.in-addr.arap.
 on host
 # tcpdump -i enp0s25 dst port 53 ";"check other PTR ip other than 192.168.122.*, it will be forwarded
 # dig PTR 12.12.12.34.in-addr.arap.
 
 ; <<>> DiG 9.9.4-RedHat-9.9.4-36.el7 <<>> PTR 12.12.12.34.in-addr.arap.
 ;; global options: +cmd
 ;; Got answer:
 ;; ->>HEADER<<- opcode: QUERY, status: NXDOMAIN, id: 20967
 ;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 1
 
 ;; OPT PSEUDOSECTION:
 ; EDNS: version: 0, flags:; udp: 4096
 ;; QUESTION SECTION:
 ;12.12.12.34.in-addr.arap. IN PTR
 
 ;; AUTHORITY SECTION:
 . 10619 IN SOA a.root-servers.net. nstld.verisign-grs.com. 2017032700 1800 900 604800 86400
 
 ;; Query time: 3 msec
 ;; SERVER: 192.168.122.1#53(192.168.122.1)
 ;; WHEN: Mon Mar 27 17:00:40 CST 2017
 ;; MSG SIZE  rcvd: 128
 
 on host:
 # tcpdump -i enp0s25 dst port 53 
 17:00:40.784790 IP server7.10739 > infoblox-trust01.pek2.redhat.com.domain: 48696+ [1au] PTR? 12.12.12.34.in-addr.arap. (53)";;RedHatEnterpriseLinux7/RHEL7-87321
2445;RHEL7-87323;[guest agent][setvcpus --guest] Increase the vCPU number more than maximum live number via guest agent;Verify libvirt will report error when increase the number of vCPUs more than max allowable live vpus;Fangge Jin (fjin);High;Negative;Automated;;1;Edit or define a guest, set vcpu number to a valid value(for example: 4);​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87323
2445;;;;;;;;;2;"# virsh start rhel7
​​";​​;;RedHatEnterpriseLinux7/RHEL7-87323
2445;;;;;;;;;3;"# virsh dumpxml rhel7 |grep cpu -A 1
​​";"Output:
 <vcpu placement='static'>4</vcpu>";;RedHatEnterpriseLinux7/RHEL7-87323
2445;;;;;;;;;4;"# virsh start rhel7
​​";​​;;RedHatEnterpriseLinux7/RHEL7-87323
2445;;;;;;;;;5;"# virsh vcpucount rhel7
​​";"Output:
 maximum      config         4
 maximum     live            4
 current         config         4
 current         live             4";;RedHatEnterpriseLinux7/RHEL7-87323
2445;;;;;;;;;6;"Plug more cpus than maximum vcpu number set in domain xml:
 
 # virsh setvcpus rhel7 --guest --count 5
 
​​";"setvcpus failed.
 
 Output:
 error: invalid argument: requested vcpus is greater than max allowable vcpus for the domain: 5 > 4
​​";;RedHatEnterpriseLinux7/RHEL7-87323
2445;;;;;;;;;7;"# virsh vcpucount rhel7 --guest
​​";"The vcpu number is still 4.
 
 Output:
 4
​​";;RedHatEnterpriseLinux7/RHEL7-87323
2445;;;;;;;;;8;"Check cpu in guest:
 # cat /proc/cpuinfo|grep processor|wc -l
​​";"The number is still 4
 
 Output:
 4
​​";;RedHatEnterpriseLinux7/RHEL7-87323
2446;RHEL7-87324;[guest agent][setvcpus --guest] Increase the vCPU number more than the current live number via guest agent;Verify libvirt will report error when increase the number of vCPUs more than current live configuration;Fangge Jin (fjin);High;Negative;Automated;;1;Edit or define a guest, set current vcpu number < max vcpu number(for example, current=1, max=4).;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87324
2446;;;;;;;;;2;"# virsh start rhel7
​​";​​;;RedHatEnterpriseLinux7/RHEL7-87324
2446;;;;;;;;;3;"Check the vcpu numbers after the guest boot up completely
 # virsh vcpucount rhel7 --guest
​​";"current vcpu number is 1.
 
 Output:
 1
​​";;RedHatEnterpriseLinux7/RHEL7-87324
2446;;;;;;;;;4;"plug more cpus than current live value via guest agent
 # virsh setvcpus rhel7 --guest --count 2
​​";"Set failed.
 
 Output:
 error: internal error: guest agent reports less cpu than requested 
​​";;RedHatEnterpriseLinux7/RHEL7-87324
2446;;;;;;;;;5;"Check the guest's cpu by guest agent on host:
 # virsh vcpucount rhel7 --guest
 1
 
​​";"The guest's cpu number is still 1
​​";;RedHatEnterpriseLinux7/RHEL7-87324
2446;;;;;;;;;6;"Check the cpu number in guest:
 # cat /proc/cpuinfo|grep processor|wc -l
​​";"The guest's cpu number is still 1
 
 Output:
 1";;RedHatEnterpriseLinux7/RHEL7-87324
2447;RHEL7-87352;[dns] disable dns or dhcp and disable them together for virtual network;"The dns element can have an optional enable attribute Since 2.2.0. If enable is ""no"", then no DNS server will be setup by libvirt for this network (and any other configuration in <dns> will be ignored). If enable is ""yes"" or unspecified (including the complete absence of any <dns> element) then a DNS server will be setup by libvirt to listen on all IP addresses specified in the network's configuration.";Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;disable dhcp;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;2;"1. define and start a network with ip address but no dhcp-range
 # virsh net-dumpxml def
 <network>
   <name>def</name>
   <uuid>4de564ba-a1fb-47f8-a81b-e9fa252b3c92</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr1' stp='on' delay='0'/>
   <mac address='52:54:00:56:5a:40'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
   </ip>
   <ip address='192.168.124.1' netmask='255.255.255.0'>
   </ip>
 </network>
​​";"avoid dnsmasq's dhcp server (simply don't include a <dhcp> element)
 

";;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;3;"2. check the config file
 # cat /var/lib/libvirt/dnsmasq/def.conf
 #.....
 strict-order
 pid-file=/var/run/libvirt/network/def.pid
 except-interface=lo
 bind-dynamic
 interface=virbr1
 addn-hosts=/var/lib/libvirt/dnsmasq/def.addnhosts";"no content related with dhcp*
 such as 
 dhcp-range=192.168.122.2,192.168.122.254
 dhcp-no-override
 dhcp-authoritative
 dhcp-lease-max=253
 dhcp-hostsfile=/var/lib/libvirt/dnsmasq/default.hostsfile";;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;4;"3. check only 1 dnsmasq process start with nobody
 # ps aux | grep dnsmasq | grep -v grep
​​";nobody    4387  0.0  0.0  15596   876 ?        S    20:46   0:00 /usr/sbin/dnsmasq --conf-file=/var/lib/libvirt/dnsmasq/def.conf --leasefile-ro --dhcp-script=/usr/libexec/libvirt_leaseshelper;;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;5;"4. check dnsmasq not open 67 port
 # netstat -nlp | grep dnsmasq
 tcp        0      0 192.168.122.1:53        0.0.0.0:*               LISTEN      4018/dnsmasq        
 tcp        0      0 192.168.124.1:53        0.0.0.0:*               LISTEN      4018/dnsmasq        
 udp        0      0 192.168.122.1:53        0.0.0.0:*                           4018/dnsmasq        
 udp        0      0 192.168.124.1:53        0.0.0.0:*                           4018/dnsmasq   ";"udp port 67 is not listen, no such item:
 udp        0      0 0.0.0.0:67              0.0.0.0:*                           4127/dnsmasq ";;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;6;"disable both dns and dhcp
​​";​​;;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;7;"1. define and start network as below, with dns enable='no', and no dhcp range, no dnsmasq process will start
 # virsh net-dumpxml def
 <network>
   <name>def</name>
   <uuid>4de564ba-a1fb-47f8-a81b-e9fa252b3c92</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr1' stp='on' delay='0'/>
   <mac address='52:54:00:56:5a:40'/>
   <dns enable='no'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
   </ip>
   <ip address='192.168.124.1' netmask='255.255.255.0'>
   </ip>
 </network>
​​";"to disable dns server, just set <dns enable='no'/> ,if there is dhcp configuration, dnsmasq will be started with ""port=0"" which disables the DNS server; if there is no dhcp configuration, dnsmasq won't be started at all).";;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;8;"2. # cat /var/lib/libvirt/dnsmasq/def.conf
​​";"##.....
 ## dnsmasq conf file created by libvirt
 strict-order
 pid-file=/var/run/libvirt/network/def.pid
 except-interface=lo
 bind-dynamic
 interface=virbr1
 addn-hosts=/var/lib/libvirt/dnsmasq/def.addnhosts";;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;9;"3. check no dnsmasq process start
 # ps aux | grep dnsmasq | grep -v dnsmasq
​​";no output;;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;10;"4. check no listen port for dnsmasq
 # netstat | grep dnsmasq";no output;;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;11;disable dns;​​;;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;12;"1. define and start a network like this with dns enable=no, but with dhcp range defined in the ip section
 # virsh net-dumpxml def
 <network>
   <name>def</name>
   <uuid>4de564ba-a1fb-47f8-a81b-e9fa252b3c92</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr1' stp='on' delay='0'/>
   <mac address='52:54:00:56:5a:40'/>
   <dns enable='no'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.100' end='192.168.122.254'/>
       <host mac='00:16:3e:77:e2:ed' name='foo.example.com' ip='192.168.122.10'/>
       <host mac='00:16:3e:3e:a9:1a' name='bar.example.com' ip='192.168.122.11'/>
     </dhcp>
   </ip>
   <ip address='192.168.124.1' netmask='255.255.255.0'>
   </ip>
   <ip family='ipv6' address='2001:db8:ca2:2::1' prefix='64' localPtr='yes'>
     <dhcp>
       <range start='2001:db8:ca2:2:1::10' end='2001:db8:ca2:2:1::ff'/>
     </dhcp>
   </ip>
 </network>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;13;"2. check the dnsmasq process, 2 process, 1 for nobody, 1 for root
 # ps aux | grep dnsmasq | grep -v grep
 
 
 
 
 
​​";"nobody    4618  0.0  0.0  15596   948 ?        S    20:53   0:00 /usr/sbin/dnsmasq --conf-file=/var/lib/libvirt/dnsmasq/def.conf --leasefile-ro --dhcp-script=/usr/libexec/libvirt_leaseshelper
 root      4619  0.0  0.0  15568   172 ?        S    20:53   0:00 /usr/sbin/dnsmasq --conf-file=/var/lib/libvirt/dnsmasq/def.conf --leasefile-ro --dhcp-script=/usr/libexec/libvirt_leaseshelper";;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;14;"3.check dnsmasq do not open the 53 port
 # netstat -nlp | grep dnsmasq
 udp        0      0 0.0.0.0:67              0.0.0.0:*                           4618/dnsmasq        
 udp6       0      0 :::547                  :::*                                4618/dnsmasq        
 raw6       0      0 :::58                   :::*                    7           4618/dnsmasq      ";​​;;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;15;"4. check config file, there is port=0
 # cat  /var/lib/libvirt/dnsmasq/def.conf
​​";"##WARNING:  THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE
 ##OVERWRITTEN AND LOST.  Changes to this configuration should be made using:
 ##    virsh net-edit def
 ## or other application using the libvirt API.
 ##
 ## dnsmasq conf file created by libvirt
 strict-order
 port=0
 pid-file=/var/run/libvirt/network/def.pid
 except-interface=lo
 bind-dynamic
 interface=virbr1
 dhcp-range=192.168.122.100,192.168.122.254
 dhcp-no-override
 dhcp-authoritative
 dhcp-range=2001:db8:ca2:2:1::10,2001:db8:ca2:2:1::ff,64
 dhcp-lease-max=395
 dhcp-hostsfile=/var/lib/libvirt/dnsmasq/def.hostsfile
 enable-ra";;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;16;check autostart with multiple ip section but no dhcp (if you do automation, this scenario can be ignore, it is just free testing);​​;;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;17;"1. define and start a network as below with multiple ip sections but no dhcp range defined
 # virsh net-dumpxml def
 <network>
   <name>def</name>
   <uuid>4de564ba-a1fb-47f8-a81b-e9fa252b3c92</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr1' stp='on' delay='0'/>
   <mac address='52:54:00:56:5a:40'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
   </ip>
   <ip address='192.168.124.1' netmask='255.255.255.0'>
   </ip>
   <ip family='ipv6' address='2001:db8:ca2:2::1' prefix='64'>
   </ip>
 </network>
​​";3. hould not hang;;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;18;"2.  # virsh net-autostart def
 Network def marked as autostarted
 
 # virsh net-list --all
​​";" Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  def                  active     yes           yes";;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;19;"3.  # systemctl restart libvirtd
 
 # virsh net-list";"Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  def                  active     yes           yes";;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;20;If disable dns, but set dns related info in the network's xml;​​;;RedHatEnterpriseLinux7/RHEL7-87352
2447;;;;;;;;;21;"# cat def.xml
 <network>
   <name>def</name>
   <forward mode='nat'>
   </forward>
 <dns enable='no'>
   <txt name=""example"" value=""example value""/>
 </dns>
   <bridge name='virbr1' stp='on' delay='0'/>
   <ip address='192.168.12.1' netmask='255.255.255.0' localPtr='no'>
     <dhcp>
       <range start='192.168.12.2' end='192.168.12.254'/>
     </dhcp>
   </ip>
 </network>
 # virsh net-define def.xml
​​";"error: Failed to define network from def.xml
 error: XML error: Extra data in disabled network 'def'
 
 
 the network should be defined with the dns configuration omitted or output error";;RedHatEnterpriseLinux7/RHEL7-87352
2448;RHEL7-87354;[negative] Hotplug guest agent char device without target type;"Verify hotplug guest agent with invalid xml will fail and libvirtd doesn't crash after repeating this for many times.
 Bug 1181408 - Libvirtd crash while hotplug the guest agent without target type for many times";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Start guest 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87354
2448;;;;;;;;;2;"Make sure qemu guest agent is running in guest. 
 # systemctl status qemu-guest-agent";​​;;RedHatEnterpriseLinux7/RHEL7-87354
2448;;;;;;;;;3;"Attach the guest agent to the guest:
 #virsh attach-device rhel7f agent.xml
​​";"Will fail to attach the guest agent to the guest.

 Output:
 error: Failed to attach device from agent.xml
 error: XML error: target type must be specified for channel device";;RedHatEnterpriseLinux7/RHEL7-87354
2448;;;;;;;;;4;Attach the guest agent to the guest for ten times;attach failed, and libvirtd doesn't crash;;RedHatEnterpriseLinux7/RHEL7-87354
2449;RHEL7-87361;"[snapshot-create-as --quiesce][negative] Execute ""snapshot-create-as --quiesce"" when guest agent is unavailable";"Verify ""snapshot-create-as --quiesce"" will fail and print proper error message when guest agent is not available";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;Scenario 1: Domain is not running;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87361
2449;;;;;;;;;2;"suspend guest:
 # virsh suspend f16
 Domain f16 suspended";​​;;RedHatEnterpriseLinux7/RHEL7-87361
2449;;;;;;;;;3;"Make snapshot again:
 
 # virsh snapshot-create --disk-only --quiesce f16
​​";"should report the following expect error:
 
 error: Requested operation is not valid: domain is not running";;RedHatEnterpriseLinux7/RHEL7-87361
2449;;;;;;;;;4;Scenario 2: Guest agent service is stopped;​​;;RedHatEnterpriseLinux7/RHEL7-87361
2449;;;;;;;;;5;"Start the guest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-87361
2449;;;;;;;;;6;"After guest boots up, stop the guest agent service in guest:
 # systemctl stop qemu-guest-agent ";​​;;RedHatEnterpriseLinux7/RHEL7-87361
2449;;;;;;;;;7;"Do snapshot with --quiesce:
 # virsh snapshot-create-as q64 g2 --disk-only --quiesce";"should report the following expect error
 
 error: Guest agent is not responding: QEMU guest agent is not connected";;RedHatEnterpriseLinux7/RHEL7-87361
2450;RHEL7-87364;[guest agent][domfsinfo] Get information of domain's mounted filesystems when domain filesystem is freezed;Verify domfsinfo will fail when domain filesystem is freezed;Fangge Jin (fjin);Medium;Positive;Automated;;1;# virsh start rhel7.0;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87364
2450;;;;;;;;;2;"After guest boots up, freeze the file system
 #virsh domfsfreeze rhel7.0
";"Output:
 Froze 2 filesystem(s) 
​​";;RedHatEnterpriseLinux7/RHEL7-87364
2450;;;;;;;;;3;"Check the filesystem of guest:
 #virsh domfsinfo rhel7.0";"Couldn't get the filesystem info since the filesystem freezed.

 Output:
 error: Unable to get filesystem information
 error: internal error: unable to execute QEMU agent command 'guest-get-fsinfo': The command guest-get-fsinfo has been disabled for this instance";;RedHatEnterpriseLinux7/RHEL7-87364
2451;RHEL7-87365;[domfsinfo] Execute domfsinfo when guest agent is unavailable;Verify domfsinfo will fail and print proper error message when guest agent is not available;Fangge Jin (fjin);Medium;Negative;Automated;;1;Start the guest ;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87365
2451;;;;;;;;;2;"After guest boots up, stop the guest agent service in guest:
 # systemctl stop qemu-guest-agent";​​;;RedHatEnterpriseLinux7/RHEL7-87365
2451;;;;;;;;;3;"Check the filesystem
 #virsh domfsinfo rhel7.0";"couldn't get the filesystem info and could get the expect error
 
 error: Unable to get filesystem information
 error: Guest agent is not responding: QEMU guest agent is not connected";;RedHatEnterpriseLinux7/RHEL7-87365
2452;RHEL7-87366;"[domifaddr --source agent] Execute ""domifaddr --source agent"" when guest agent is unavailable";"Verify ""domifaddr --source agent"" will fail and print proper error message when guest agent is not available";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Start the guest
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87366
2452;;;;;;;;;2;"Scenario 1: guest agent service is stopped
​​";​​;;RedHatEnterpriseLinux7/RHEL7-87366
2452;;;;;;;;;3;"After guest boots up, stop the guest agent service in guest:
 # systemctl stop qemu-guest-agent  
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-87366
2452;;;;;;;;;4;"Check the guest's ip via guest agent:
 # virsh domifaddr vm2 --source agent
​​";"fail to get ip info with agent mode.

 Output:
 error: Failed to query for interfaces addresses
 error: Guest agent is not responding: QEMU guest agent is not connected";;RedHatEnterpriseLinux7/RHEL7-87366
2452;;;;;;;;;5;"Scenario 2: guest agent is not configured
​​";​​;;RedHatEnterpriseLinux7/RHEL7-87366
2452;;;;;;;;;6;Hotunplug qemu-guest agent from the guest;​​;;RedHatEnterpriseLinux7/RHEL7-87366
2452;;;;;;;;;7;"Check the guest's ip via guest agent:
 # virsh domifaddr vm2 --source agent
​​";"Output:
 error: Failed to query for interfaces addresses
 error: Guest agent is not responding: QEMU guest agent is not configured";;RedHatEnterpriseLinux7/RHEL7-87366
2453;RHEL7-87368;[set-user-password] Execute set-user-password when guest agent is unavailable;Verify set-user-password will fail and print proper error message when guest agent is not available;Fangge Jin (fjin);Medium;Negative;Automated;;1;"Start the guest
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87368
2453;;;;;;;;;2;"After guest boots up, stop the guest agent service in guest:
 # systemctl stop qemu-guest-agent ";​​;;RedHatEnterpriseLinux7/RHEL7-87368
2453;;;;;;;;;3;"# virsh set-user-password virt-tests-vm1 root --password redhat

";"will get the expect error.

 Output:
 error: Guest agent is not responding: QEMU guest agent is not connected";;RedHatEnterpriseLinux7/RHEL7-87368
2453;;;;;;;;;4;"# virsh set-user-password virt-tests-vm1 root --password redhat --encrypted 
 
​​";"will get the expect error.

 Output:
 error: Guest agent is not responding: QEMU guest agent is not connected";;RedHatEnterpriseLinux7/RHEL7-87368
2454;RHEL7-87369;"[set-user-password] Execute ""set-user-password"" in readonly mode";Verify set user password is not allowed in readonly mode;Fangge Jin (fjin);High;Negative;Not Automated;;1;"# virsh start rhel7
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87369
2454;;;;;;;;;2;"# virsh -r set-user-password rhel7 root --password redhat --encrypted
";"Fails.
 
 Output:
 error: operation forbidden: read only access prevents virDomainSetUserPassword
​​";;RedHatEnterpriseLinux7/RHEL7-87369
2455;RHEL7-87425;[libvirtd log] Check libvirtd debug log when destroy domain with domainName=NULL;"Verify that libvirtd debug log for destroying domain with domainName=NULL can be recorded correctly.
Bug 711206 - [libvirt] [logs] null dereference while preparing libvirt logs";Fangge Jin (fjin);Low;Negative;Not Automated;;1;"Prepare a source file that invokes virDomainDestroy() with NULL as the parameter:

 # cat > demo.c <<EOF
 #include <libvirt/libvirt.h>
 #include <stdlib.h>
 int main(void) {
 virInitialize();
 virDomainDestroy(NULL);
 }
 EOF";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87425
2455;;;;;;;;;2;"Compile the source file: 
 # gcc -o demo -lvirt demo.c
​​";​​;;RedHatEnterpriseLinux7/RHEL7-87425
2455;;;;;;;;;3;"Run the ./demo:
 # LIBVIRT_DEBUG=1 ./demo 2>&1 | grep Destroy
​​";"There is error message printed in the terminal.
 
 Output:
 15:57:42.131: 10388: debug : virDomainDestroy:2056 : dom=(nil), (VM: name=(null), uuid=),
 libvir: Domain error : invalid domain pointer in virDomainDestroy";;RedHatEnterpriseLinux7/RHEL7-87425
2455;;;;;;;;;4;"Check the libvirtd status:
 # systemctl status libvirtd";libvirtd is active;;RedHatEnterpriseLinux7/RHEL7-87425
2456;RHEL7-87427;[audit log] Set audit level=1 and disable auditing on host;Verify that libvirt can start successfully and no audit log will be generated when set audit level=1 and disable auditing on host.;Fangge Jin (fjin);High;Positive;Not Automated;;1;Disable auditing on host.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87427
2456;;;;;;;;;2;"Set libvirt audit level to 1:

 # vim /etc/libvirt/libvirtd.conf
 audit_level = 1";​​;;RedHatEnterpriseLinux7/RHEL7-87427
2456;;;;;;;;;3;"Clear the audit log on host:
 # > /var/log/audit/audit.log
 # > /var/log/audit/audit.log.1
 # > /var/log/audit/audit.log.2
 # > /var/log/audit/audit.log.3
 # > /var/log/audit/audit.log.4
 
 # > /var/log/libvirt/libvirtd.log";​​;;RedHatEnterpriseLinux7/RHEL7-87427
2456;;;;;;;;;4;#systemctl restart libvirtd;​​;;RedHatEnterpriseLinux7/RHEL7-87427
2456;;;;;;;;;5;"#systemctl status libvirtd
​​";"The libvirtd should be in running status
​​";;RedHatEnterpriseLinux7/RHEL7-87427
2456;;;;;;;;;6;"Start a guest
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-87427
2456;;;;;;;;;7;"Check the audit.log:
 
 
 #ausearch -m VIRT_CONTROL -ts recent
 
 #ausearch -m VIRT_MACHINE_ID -ts recent
 
 #ausearch -m VIRT_RESOURCE -ts recent
​​";"No new audit log generated.
 
 Output:
 <no matches>
 
 <no matches>
 
 <no matches>";;RedHatEnterpriseLinux7/RHEL7-87427
2456;;;;;;;;;8;"Check the libvirtd.log:
 # cat /var/log/libvirt/libvirtd.log|grep virAuditOpen 
 
​​";"From RHEL7.6, Log only an info message if audit_level < 2 and audit is not supported, Output:
 2018-06-28 04:47:03.560+0000: 11541: info : virAuditOpen:68 : Audit is not supported by the kernel
 
 Before:
 Apr  6 03:42:52 intel-5205-32-1 libvirtd: 2017-04-06 07:42:52.856+0000: 4384: error : virAuditOpen:62 : Unable to initialize audit layer: Protocol not supported
​​";;RedHatEnterpriseLinux7/RHEL7-87427
2457;RHEL7-87428;WALA-TC: [WALA conf] Check useless parameters;Ensure there's no useless parameters in the waagent.conf;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"Refer to:
 https://bugzilla.redhat.com/show_bug.cgi?id=1366942
 https://bugzilla.redhat.com/show_bug.cgi?id=1368910";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87428
2457;;;;;;;;;2;"1. Check if there's no useless parameters, such as:
 Role.StateConsumer
 Role.ConfigurationConsumer
 Role.TopologyConsumer";"There's no useless parameters
 # grep -E ""Role.StateConsumer|Role.ConfigurationConsumer|Role.TopologyConsumer""
 #";;RedHatEnterpriseLinux7/RHEL7-87428
2457;;;;;;;;;3;config;​​;;RedHatEnterpriseLinux7/RHEL7-87428
2458;RHEL7-87431;WALA-TC: [General] Check /etc/shadow permission;WALA-TC: [General] Check /etc/shadow permission;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;Refer to:https://bugzilla.redhat.com/show_bug.cgi?id=1353878;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87431
2458;;;;;;;;;2;Check the /etc/shadow file permission;"# stat -c %a /etc/shadow
 0";;RedHatEnterpriseLinux7/RHEL7-87431
2458;;;;;;;;;3;config;​​;;RedHatEnterpriseLinux7/RHEL7-87431
2459;RHEL7-87432;WALA-TC: [General] Check /etc/ssh/sshd_config permission;WALA-TC: [General] Check /etc/ssh/sshd_config permission;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;Check the /etc/shadow file permission;"# stat -c %a /etc/ssh/sshd_config
 600";Test Case;RedHatEnterpriseLinux7/RHEL7-87432
2459;;;;;;;;;2;config;​​;;RedHatEnterpriseLinux7/RHEL7-87432
2460;RHEL7-87433;WALA-TC: [General] Check selinux status;WALA-TC: [General] Check selinux status;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;Create a VM on Azure;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87433
2460;;;;;;;;;2;Check if the default selinux status is enforcing;"# getenforce
 Enforcing";;RedHatEnterpriseLinux7/RHEL7-87433
2460;;;;;;;;;3;config;​​;;RedHatEnterpriseLinux7/RHEL7-87433
2461;RHEL7-87435;WALA-TC: [func] Run waagent command under /var/lib/waagent/event;WALA-TC: [func] Run waagent command under /var/lib/waagent/event;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"Refer to: 
https://bugzilla.redhat.com/show_bug.cgi?id=1429317";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87435
2461;;;;;;;;;2;"1. Login to a VM on Azure. Access to the /var/lib/waagent/event folder
​​";# cd /var/lib/waagent/event;;RedHatEnterpriseLinux7/RHEL7-87435
2461;;;;;;;;;3;"2. Run ""waagent -version""
​​";Can print waagent version without error messages.;;RedHatEnterpriseLinux7/RHEL7-87435
2461;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-87435
2462;RHEL7-87436;"WALA-TC: [func] Interrupt ""waagent -deprovision"" by ""ctrl -c""";"WALA-TC: [func] Interrupt ""waagent -deprovision"" by ""ctrl -c""";Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;Refer to:https://bugzilla.redhat.com/show_bug.cgi?id=1429319;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87436
2462;;;;;;;;;2;1. Login to a VM on Azure.;​​;;RedHatEnterpriseLinux7/RHEL7-87436
2462;;;;;;;;;3;"2. Run ""waagent -deprovision"" then interrupt it by ""ctrl -c"". Check if it is terminated normally.";"# waagent -deprovision
 ...
 [Do you want to proceed (y/n)^CDeprovision is interrupted.
 #
 Process is terminated normally. There's no error message.";;RedHatEnterpriseLinux7/RHEL7-87436
2462;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-87436
2463;RHEL7-87438;WALA-TC: [Settings] Check python version requirement;WALA-TC: [Settings] Check python version requirement;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;Refer to:https://bugzilla.redhat.com/show_bug.cgi?id=1323932;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87438
2463;;;;;;;;;2;1. Prepare a VM on Azure with VMAccessLinux extension in it.;​​;;RedHatEnterpriseLinux7/RHEL7-87438
2463;;;;;;;;;3;2. Check if there's python version requirement in /var/lib/waagent/Microsoft.OSTCExtensions.VMAccessForLinux-1.4.0.0/vmaccess.py;There's no python version requirement in vmaccess.py. Or the required python version is lower than or equal to RHEL-6/7 python version.;;RedHatEnterpriseLinux7/RHEL7-87438
2463;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-87438
2464;RHEL7-87451;[upgrade] upgrade libvirt from last released version(that contains virtlogd) to latest libvirt version when virtlogd.service is inactive;virtlogd is inactive, upgrade libvirtd, virtlogd will still be inactive;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Install last released libvirt package:
 # yum install libvirt-xxxxx
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87451
2464;;;;;;;;;2;"Check virtlogd status
 # systemctl status virtlogd";virtlogd is inactive;;RedHatEnterpriseLinux7/RHEL7-87451
2464;;;;;;;;;3;"Upgrade libvirt to latest version(configure repo first):
 # yum update libvirt*
​​";​​;;RedHatEnterpriseLinux7/RHEL7-87451
2464;;;;;;;;;4;"Check virtlogd status after upgrading is completed: # systemctl status virtlogd
​​";virtlogd is inactive;;RedHatEnterpriseLinux7/RHEL7-87451
2465;RHEL7-87452;[upgrade] upgrade libvirt from last release version(that contains virtlogd) to latest libvirt version when virtlogd.service is active;virtlogd is active, upgrade libvirtd, virtlogd will be reloaded during upgrading;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Install last released libvirt package:
 # yum install libvirt-xxxxx";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87452
2465;;;;;;;;;2;"Start a guest with spice graphic.
 # virsh start rhel7.4";​​;;RedHatEnterpriseLinux7/RHEL7-87452
2465;;;;;;;;;3;"Check the opened file descriptor of qemu log file:
 
 # lsof /var/log/libvirt/qemu/vm1.log
​​";"qemu log file is opened by virtlogd:
 
 COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF    NODE NAME
 virtlogd 2837 root   13w   REG  253,0    60823 1062465 /var/log/libvirt/qemu/vm1.log";;RedHatEnterpriseLinux7/RHEL7-87452
2465;;;;;;;;;4;"Check virtlogd status
 # systemctl status virtlogd";virtlogd is in active status;;RedHatEnterpriseLinux7/RHEL7-87452
2465;;;;;;;;;5;"Upgrade libvirt to latest version(configure repo first):
 # yum update libvirt*";​​;;RedHatEnterpriseLinux7/RHEL7-87452
2465;;;;;;;;;6;"Check virtlogd status after upgrading is completed:
 # systemctl status virtlogd";virtlogd is active, and the pid is same as before upgrading;;RedHatEnterpriseLinux7/RHEL7-87452
2465;;;;;;;;;7;"Check the opened file descriptor of qemu log file:
 
 # lsof /var/log/libvirt/qemu/rhel7.4.log
​​";"qemu log file is still opened by virtlogd:
 
 COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF    NODE NAME
 virtlogd 2837 root   13w   REG  253,0    60823 1062465 /var/log/libvirt/qemu/rhel7.4.log";;RedHatEnterpriseLinux7/RHEL7-87452
2465;;;;;;;;;8;"Connect to guest by spice client and check qemu log:
 1) # tailf /var/log/libvirt/qemu/rhel7.4.log
 
 2) # virt-viewer rhel7.4
 
 3) check the output of tailf";There will be new log produced.;;RedHatEnterpriseLinux7/RHEL7-87452
2466;RHEL7-87456;WALA-TC: [WALA conf] decode/execute custom data;"decode custom data and execute custom data
";Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"1. Prepare a script ""customdata.sh"" in local:
 # cat customdata.sh
 #!/bin/bash
 echo `teststring'` >> /root/test.log";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87456
2466;;;;;;;;;2;"2. Set parameters in the /etc/waagent.conf of the Azure VM:
 Provisioning.DecodeCustomData=n
 Provisioning.ExecuteCustomData=n
 Then deprovision this VM and capture an image";​​;;RedHatEnterpriseLinux7/RHEL7-87456
2466;;;;;;;;;3;"3. Run azure cli command to create a VM and invoke this customdata script:
 azure vm create  ""wala690111cd.cloudapp.net""  ""wala690111wala2204-customdata"" --vm-name ""wala690111cd"" --userName ""azureuser"" --password ""xxx"" --vm-size ""Small"" --location ""East US"" --ssh ""22"" --custom-data customdata.sh";​​;;RedHatEnterpriseLinux7/RHEL7-87456
2466;;;;;;;;;4;"4. Login and check:
 1) There's /var/lib/waagent/CustomData, and the content is the same as customdata.sh script
 2) There's no /root/test.log file";"1) # cat /var/lib/waagent/CustomData
 The custom data is not decoded.
 2) # cat /root/test.log
 cat: /root/test.log: No such file or directory
 
​​";;RedHatEnterpriseLinux7/RHEL7-87456
2466;;;;;;;;;5;"5. Set:
 Provisioning.DecodeCustomData=y
 Provisioning.ExecuteCustomData=n
 Repeat step 2-4.
​​";"1) # cat /var/lib/waagent/CustomData
 #!/bin/bash
 echo `teststring'` >> /root/test.log
 2) # cat /root/test.log
 cat: /root/test.log: No such file or directory";;RedHatEnterpriseLinux7/RHEL7-87456
2466;;;;;;;;;6;"6. Set:
 Provisioning.DecodeCustomData=n
 Provisioning.ExecuteCustomData=y
 Repeat step 2-4.";"1) # cat /var/lib/waagent/CustomData
 The custom data is decoded
 2) # cat /root/test.log
 teststring
​​";;RedHatEnterpriseLinux7/RHEL7-87456
2466;;;;;;;;;7;"7. Set:
 Provisioning.DecodeCustomData=y
 Provisioning.ExecuteCustomData=y
 Repeat step 2-4.";"1) # cat /var/lib/waagent/CustomData
 #!/bin/bash
 echo `teststring'` >> /root/test.log
 2) # cat /root/test.log
 teststring";;RedHatEnterpriseLinux7/RHEL7-87456
2466;;;;;;;;;8;"8. Create a VM with ""Provisioning.DecodeCustomData=y"" but not invoke the customdata:
 azure vm create  ""wala690111cd.cloudapp.net""  ""wala690111wala2204-customdata"" --vm-name ""wala690111cd"" --userName ""azureuser"" --password ""xxx"" --vm-size ""Small"" --location ""East US"" --ssh ""22""
 Check /var/lib/waagent/CustomData file";"# ls /var/lib/waagent/CustomData
 ls: cannot access /var/lib/waagent/CustomData: No such file or directory";;RedHatEnterpriseLinux7/RHEL7-87456
2466;;;;;;;;;9;9. Check waagent.log.;There's no error logs.;;RedHatEnterpriseLinux7/RHEL7-87456
2466;;;;;;;;;10;config;​​;;RedHatEnterpriseLinux7/RHEL7-87456
2467;RHEL7-87458;[virtio-win][viostor] Install/Boot guest with GPT partition style;[virtio-win][viostor] Install/Boot guest with GPT partition style;Yu Wang (wyu);Medium;Positive;Not Automated;;1;" 1.install guest with system disk and data disk via ovmf (default)
 CLI:
 -drive file=/usr/share/OVMF/OVMF_CODE.secboot.fd,if=pflash,format=raw,unit=0,readonly=on -drive file=/home/whql_autotest/OVMF_VARS-install.fd,if=pflash,format=raw,unit=1 \
 -object iothread,id=thread0 -device ioh3420,bus=pcie.0,id=root1.0,slot=1 -drive file=win.raw,if=none,id=drive-virtio-disk0,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,iothread=thread0,scsi=off,bus=root1.0,drive=drive-virtio-disk0,id=virtio-disk0 \
 -device ioh3420,bus=pcie.0,id=root2.0,slot=2 -drive file=blk-disk.raw,if=none,id=drive-virtio-disk1,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,iothread=thread0,scsi=off,bus=root2.0,drive=drive-virtio-disk1,id=virtio-disk1 \
";1. Guest can be installed successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-87458
2467;;;;;;;;;2;"2.check whether viostor.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled viostor.sys verifier:
    #verifier.exe /standard /driver viostor.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings";"2 Driver can be installed successfully 
 All the Standards flags are checked ,the verified driver fields shows ""viostor.sys""";;RedHatEnterpriseLinux7/RHEL7-87458
2467;;;;;;;;;3;"3 Check the logical_block_size on guest
    #fsutil fsinfo ntfsinfo c:";3.Bytes Per Sector: 512;;RedHatEnterpriseLinux7/RHEL7-87458
2467;;;;;;;;;4;"4 Check the partition style(system disk and data disk)
    disk manger --> right click disk0/1 --> properties --> Volumes
​​";"4 Check the Partition style is ""GUID Partition Table (GPT)""
​​";;RedHatEnterpriseLinux7/RHEL7-87458
2467;;;;;;;;;5;5. run crystal benchmark on system/data disk(default params );5. no bsod or hangs occurs;;RedHatEnterpriseLinux7/RHEL7-87458
2467;;;;;;;;;6;"6.install guest with system disk via ovmf
 logical_block_size=4096 and physical_block_size=4096 :
 CLI:
 -drive file=/usr/share/OVMF/OVMF_CODE.secboot.fd,if=pflash,format=raw,unit=0,readonly=on -drive file=/home/whql_autotest/OVMF_VARS-install.fd,if=pflash,format=raw,unit=1 \
 -object iothread,id=thread0 -device ioh3420,bus=pcie.0,id=root1.0,slot=1 -drive file=win.raw,if=none,id=drive-virtio-disk0,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,iothread=thread0,scsi=off,bus=root1.0,drive=drive-virtio-disk0,id=virtio-disk0,logical_block_size=4096,physical_block_size=4096";6. Guest can be installed successfully;;RedHatEnterpriseLinux7/RHEL7-87458
2467;;;;;;;;;7;"7 Check the logical_block_size on guest
    #fsutil fsinfo ntfsinfo c:";7.Bytes Per Sector: 4096;;RedHatEnterpriseLinux7/RHEL7-87458
2467;;;;;;;;;8;"8 Check the partition style
    disk manger --> right click disk0 --> properties --> Volumes
​​";"8 Check the Partition style is ""GUID Partition Table (GPT)""";;RedHatEnterpriseLinux7/RHEL7-87458
2467;;;;;;;;;9;9. run crystal benchmark on system/data disk(default params );9. no bsod or hangs occurs;;RedHatEnterpriseLinux7/RHEL7-87458
2468;RHEL7-87467;[Network lifecycle][metadata] start a network with metadata defined in xml;The metadata node can be used by applications to store custom metadata in the form of XML nodes/trees. Applications must use custom namespaces on their XML nodes/trees, with only one top-level element per namespace (if the application needs structure, they should have sub-elements to their namespace element). Since 2.1.0;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. edit  the network with the metadata
 # virsh net-edit default
 Network default XML configuration edited.
 # virsh net-dumpxml default
 <network>
   <name>default</name>
   <uuid>4018b9c3-63f9-4719-b4bc-450bbb2b77f3</uuid>
   <metadata>
     <app1:foo xmlns:app1=""http://foo.org/"">fooish</app1:foo>
     <app2:bar xmlns:app2=""http://bar.com/"" maman=""baz"">barish</app2:bar>
   </metadata>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:c8:29:9f'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.100'/>
     </dhcp>
   </ip>
 </network>
  ";Edit succeed, can be saved;Test Case;RedHatEnterpriseLinux7/RHEL7-87467
2468;;;;;;;;;2;"2.1 # virsh net-dumpxml default > net
 # virt-xml-validate net
 net validates
​​";"2.1 validate succeed
​​";;RedHatEnterpriseLinux7/RHEL7-87467
2468;;;;;;;;;3;"2.2.# service libvirtd restart
 # virsh net-dumpxml default";"2.2 after restart, the metadata still exists.
 
 the network can start and define successfully, and the metadata exists in the dumped xml";;RedHatEnterpriseLinux7/RHEL7-87467
2468;;;;;;;;;4;"3.  # cat macvtap.xml 
 <network>
   <name>direct-macvtap</name>
   <metadata>
     <app1:foo xmlns:app1=""http://foo.org/"">fooish</app1:foo>
     <app2:bar xmlns:app2=""http://bar.com/"" maman=""baz"">barish</app2:bar>
   </metadata>
   <forward mode=""bridge"">
     <interface dev=""eth20""/>
     <interface dev=""eth21""/>
     <interface dev=""eth22""/>
     <interface dev=""eth23""/>
     <interface dev=""eth24""/>
   </forward>
 </network>
 # virt-xml-validate macvtap.xml 
 macvtap.xml validates
 
 # virsh net-define macvtap.xml 
 Network direct-macvtap defined from macvtap.xml
 
 # virsh net-dumpxml direct-macvtap
​​";"<network>
   <name>direct-macvtap</name>
   <uuid>18e93c4f-7a1c-4729-8d61-3cf1ca5ea5f2</uuid>
   <metadata>
     <app1:foo xmlns:app1=""http://foo.org/"">fooish</app1:foo>
     <app2:bar xmlns:app2=""http://bar.com/"" maman=""baz"">barish</app2:bar>
   </metadata>
   <forward dev='eth20' mode='bridge'>
     <interface dev='eth20'/>
     <interface dev='eth21'/>
     <interface dev='eth22'/>
     <interface dev='eth23'/>
     <interface dev='eth24'/>
   </forward>
 </network>
 the network can start and validate successfully
 the network can start and define successfully, and the metadata exists in the dumped xml
​​";;RedHatEnterpriseLinux7/RHEL7-87467
2468;;;;;;;;;5;"4.  # cat bridge.xml 
 <network>
   <name>host-bridge</name>
     <metadata>
     <app1:foo xmlns:app1=""http://foo.org/"">fooish</app1:foo>
     <app2:bar xmlns:app2=""http://bar.com/"" maman=""baz"">barish</app2:bar>
   </metadata>
   <forward mode=""bridge""/>
   <bridge name=""br0""/>
 </network>
 
 # virt-xml-validate bridge.xml 
 bridge.xml validates
 
 # virsh net-define bridge.xml 
 Network host-bridge defined from bridge.xml
 
 # virsh net-start host-bridge
 
 # virsh net-dumpxml host-bridge
​​";"<network>
   <name>host-bridge</name>
     <metadata>
     <app1:foo xmlns:app1=""http://foo.org/"">fooish</app1:foo>
     <app2:bar xmlns:app2=""http://bar.com/"" maman=""baz"">barish</app2:bar>
   </metadata>
   <forward mode=""bridge""/>
   <bridge name=""br0""/>
 </network>
 
 
 the network can start and define successfully, and the metadata exists in the dumped xml
​​";;RedHatEnterpriseLinux7/RHEL7-87467
2468;;;;;;;;;6;"5.  # cat pf.xml 
 <network>
 <name>pf</name>
     <metadata>
     <app1:foo xmlns:app1=""http://foo.org/"">fooish</app1:foo>
     <app2:bar xmlns:app2=""http://bar.com/"" maman=""baz"">barish</app2:bar>
   </metadata>
   <forward mode='passthrough'>
     <pf dev='eth0'/>
   </forward>
 </network>
 
 # virt-xml-validate pf.xml 
 pf.xml validates
 
 # virsh net-define pf.xml 
 Network pf defined from pf.xml
 
 # virsh net-dumpxml pf
​​";"
 <network>
   <name>pf</name>
   <uuid>086d51f8-346e-440b-a30a-fe134a800092</uuid>
   <metadata>
     <app1:foo xmlns:app1=""http://foo.org/"">fooish</app1:foo>
     <app2:bar xmlns:app2=""http://bar.com/"" maman=""baz"">barish</app2:bar>
   </metadata>
   <forward mode='passthrough'>
     <pf dev='eth0'/>
   </forward>
 </network>
 
 
 the network can start and define successfully, and the metadata exists in the dumped xml
​​";;RedHatEnterpriseLinux7/RHEL7-87467
2468;;;;;;;;;7;"6. # cat vf.xml 
 <network>
 <name>vf</name>
     <metadata>
     <app1:foo xmlns:app1=""http://foo.org/"">fooish</app1:foo>
     <app2:bar xmlns:app2=""http://bar.com/"" maman=""baz"">barish</app2:bar>
   </metadata>
  <forward mode='hostdev' managed='yes'>
     <driver name='vfio'/>
     <address type='pci' domain='0' bus='4' slot='0' function='1'/>
     <address type='pci' domain='0' bus='4' slot='0' function='2'/>
     <address type='pci' domain='0' bus='4' slot='0' function='3'/>
   </forward>
 </network>
 
 # virt-xml-validate vf.xml 
 vf.xml validates
 
 # virsh net-define vf.xml
 
 # virsh net-start vf
 
 # virsh net-dumpxml vf
​​";the network can start and define successfully, and the metadata exists in the dumped xml;;RedHatEnterpriseLinux7/RHEL7-87467
2469;RHEL7-87530;[virtlogd][log_*] Reload virtlogd with new log configurations;Verify that when reload virtlogd, it will load the log configurations(log_outputs,log_level,log_filters) from /etc/libvirt/virtlogd.conf;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Make sure virtlogd.service is running
 # systemctl status virtlogd
​​";virtlogd is running;Test Case;RedHatEnterpriseLinux7/RHEL7-87530
2469;;;;;;;;;2;"Change log configurations in virtlogd conf file: /etc/libvirt/virtlogd.conf, for example.

 log_level = 2
 log_filters=""1:+rpc""
 log_outputs=""1:file:/var/log/libvirt/virtlogd_new.log""";​​;;RedHatEnterpriseLinux7/RHEL7-87530
2469;;;;;;;;;3;"Reload virtlogd service:
 # systemctl reload virtlogd";​​;;RedHatEnterpriseLinux7/RHEL7-87530
2469;;;;;;;;;4;"Check the existence of the new log file: 
 # ls /var/log/libvirt/virtlogd_new.log
​​";The new log file exists.;;RedHatEnterpriseLinux7/RHEL7-87530
2469;;;;;;;;;5;"Check the content of the new log file:
 # cat /var/log/libvirt/virtlogd_new.log";"1) The info&warning&error logs are recorded in new log file.
 
 2) debug logs with stack trace are recorded for rpc related functions.
 
 Output:
 ......
 2017-04-06 03:30:19.139+0000: 29865: debug : virNetSocketNew:235 : localAddr=0x7ffcd9c5cc70 remoteAddr=0x7ffcd9c5cd00 fd=3 errfd=-1 pid=0
 /usr/sbin/virtlogd(virLogMessage+0x9f)[0x7fa28073634f]
 /usr/sbin/virtlogd(+0x4b8e7)[0x7fa2806fc8e7]
 /usr/sbin/virtlogd(virNetSocketNewPostExecRestart+0x150)[0x7fa2807000d0]
 /usr/sbin/virtlogd(virNetServerServiceNewPostExecRestart+0x1f7)[0x7fa2806f05e7]
 /usr/sbin/virtlogd(virNetServerNewPostExecRestart+0x270)[0x7fa2806f7850]
 /usr/sbin/virtlogd(virNetDaemonAddServerPostExec+0xc8)[0x7fa2806f4de8]
 /usr/sbin/virtlogd(main+0xd10)[0x7fa2806e9060]
 /lib64/libc.so.6(__libc_start_main+0xf5)[0x7fa27d616b35]
 /usr/sbin/virtlogd(+0x3a4ed)[0x7fa2806eb4ed]
 ......
​​";;RedHatEnterpriseLinux7/RHEL7-87530
2470;RHEL7-87537;[Network lifecycle] start / destroy persistent / transient vm during network active or inactive - bug 1434882;"the scenarios includes: 1. start the vm when network is up / down; 2. destroy the vm when the network is down;  3. create vm when network is up/down; and check the libvirtd service should not restart and check the network function";Yalan Zhang (yalzhang);Critical;Positive;Automated;;1;scenario 1: persistent vm;"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-87537
2470;;;;;;;;;2;"1.  start the vm when network is down
 # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              inactive   no            yes
 
 # virsh dumpxml rhel7.4 | grep /interface -B7
 <interface type='network'>
 <source network='default'/>
 </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-87537
2470;;;;;;;;;3;# virsh start rhel7.4;"error: Failed to start domain rhel7.4
 error: Requested operation is not valid: network 'default' is not active";;RedHatEnterpriseLinux7/RHEL7-87537
2470;;;;;;;;;4;"2.  start the vm when network is up
 # virsh net-start default
 # virsh start rhel7.4";guest start successfully;;RedHatEnterpriseLinux7/RHEL7-87537
2470;;;;;;;;;5;"3. when the vm is running, destroy the network in use and check the libvirt pid before and after the operation
 
 # pidof libvirtd";2259;;RedHatEnterpriseLinux7/RHEL7-87537
2470;;;;;;;;;6;"# virsh list
  Id    Name                           State
 ----------------------------------------------------
  5     rhel7.4                        running
 
 # virsh net-destroy default
 Network default destroyed";​​;;RedHatEnterpriseLinux7/RHEL7-87537
2470;;;;;;;;;7;# pidof libvirtd;"2259  
 (pid is the same as step 3, libvirtd do not crash)";;RedHatEnterpriseLinux7/RHEL7-87537
2470;;;;;;;;;8;"4. destroy the vm with the network is down, libvirtd do not crash
 # virsh destroy rhel7.4
 Domain rhel7.4 destroyed";​​;;RedHatEnterpriseLinux7/RHEL7-87537
2470;;;;;;;;;9;# pidof libvirtd;"2259
 (pid is the same as step 3, libvirtd do not crash)";;RedHatEnterpriseLinux7/RHEL7-87537
2470;;;;;;;;;10;scenario 2: transient vm;​​;;RedHatEnterpriseLinux7/RHEL7-87537
2470;;;;;;;;;11;"1. create vm when network is down
 # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              inactive   no            yes
 
 # cat rhel7.4.xml
 ...
 <interface type='network'>
 <source network='default'/>
 </interface>
 ...
​​";​​;;RedHatEnterpriseLinux7/RHEL7-87537
2470;;;;;;;;;12;# virsh create rhel7.4.xml;"error: Failed to create domain from rhel7.4.xml
 error: Requested operation is not valid: network 'default' is not active";;RedHatEnterpriseLinux7/RHEL7-87537
2470;;;;;;;;;13;"2.  create vm when network is up
 # virsh net-start default
 Network default started
 
 # virsh create rhel7.4.xml
​​";Domain rhel7.4 created from rhel7.4.xml;;RedHatEnterpriseLinux7/RHEL7-87537
2470;;;;;;;;;14;3. # pidof libvirtd;2259;;RedHatEnterpriseLinux7/RHEL7-87537
2470;;;;;;;;;15;"4. # virsh net-destroy default
 Network default destroyed
 
 # pidof libvirtd";2259;;RedHatEnterpriseLinux7/RHEL7-87537
2470;;;;;;;;;16;"5. # virsh destroy rhel7.4
 Domain rhel7.4 destroyed
 
 # pidof libvirtd";2259;;RedHatEnterpriseLinux7/RHEL7-87537
2470;;;;;;;;;17;​​;"(Note: for bridge, macvtap and hostdev network, if the network is down, the network function in the vm still works fun as the network is just an interface pool, destroy the network will not break the connection;
 for nat, route, isolated, and open, destroy the network will destroy the bridge which the vm is connected, which will cause the vm network not work even after the network restart.)";;RedHatEnterpriseLinux7/RHEL7-87537
2471;RHEL7-87546;[net-update] ip-dhcp-range add and delete for ipv4 / ipv6 - bug 907779;"ip-dhcp-range add/ delete, can not modify; 2. a network is able to have 2 ipv4 address, but only 1 dhcp section is allowed(test ip-dhcp-range, ip-dhcp-host);";Yalan Zhang (yalzhang);Critical;Positive;Automated;;1;"**Scenarios 1: multiple dhcp range in 1 dhcp section is allowed
 # virsh net-dumpxml default
 <network>
   <name>default</name>
   <uuid>9e0b7532-b6a9-4fab-9fb2-1aca079e2187</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:3f:ff:11'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.50'/>
     </dhcp>
   </ip>
 </network>
";"add-first ip-dhcp-range, the guest will use the ip in the first range
";Test Case;RedHatEnterpriseLinux7/RHEL7-87546
2471;;;;;;;;;2;"1. # virsh net-update default add-first  ip-dhcp-range ""<range start='192.168.122.100' end='192.168.122.200'/>""";Updated network default live state;;RedHatEnterpriseLinux7/RHEL7-87546
2471;;;;;;;;;3;"2. # virsh net-dumpxml default



";"<network>
   <name>default</name>
   <uuid>9e0b7532-b6a9-4fab-9fb2-1aca079e2187</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:3f:ff:11'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.100' end='192.168.122.200'/>
       <range start='192.168.122.2' end='192.168.122.50'/>
     </dhcp>
   </ip>
 </network>
 
 (use add-first to add one more range, it should be in the first place dnsmasq will restart with the new config file)";;RedHatEnterpriseLinux7/RHEL7-87546
2471;;;;;;;;;4;# cat /var/lib/libvirt/dnsmasq/default.conf;"..
 dhcp-range=192.168.122.100,192.168.122.200
 dhcp-range=192.168.122.2,192.168.122.50
 ..
 
​​";;RedHatEnterpriseLinux7/RHEL7-87546
2471;;;;;;;;;5;"2. Add a new interface to the guest,then check the ip for the new interface,it should be in the new ""dhcp range"" ,such as:
 # dhclient ens9
 # ifconfig ens9
 ens9:
  inet 192.168.122.192  netmask 255.255.255.0  broadcast 192.168.122.255";The guest's ip is in the first range;;RedHatEnterpriseLinux7/RHEL7-87546
2471;;;;;;;;;6;"**Scenarios 2: Can't add multiple dhcp sections to ipv4 in network** ** -- bug 907779**
​​";​​;;RedHatEnterpriseLinux7/RHEL7-87546
2471;;;;;;;;;7;"1. Define and start a network.
 # virsh net-define net.xml
 Network net defined from net.xml
 
 # virsh net-start net
 Network net started
 
 # virsh net-dumpxml net
 <network>
 <name>net</name>
 <uuid>fe8ffe14-8478-060d-ece1-2c97f96e1c59</uuid>
 <forward mode='nat'>
 <nat>
 <port start='1024' end='65535'/>
 </nat>
 </forward>
 <bridge name='virbr1' stp='on' delay='0'/>
 <mac address='52:54:00:e5:b6:95'/>
 <ip address='192.168.121.1' netmask='255.255.255.0'>
 </ip>
 <ip address='192.168.10.1' netmask='255.255.255.0'>
 </ip>
 </network>";"The network is able to has 2 ipv4 address, but only one dhcp section is suppported.
 
​​";;RedHatEnterpriseLinux7/RHEL7-87546
2471;;;;;;;;;8;"2. Add host element for first dhcp section.
 # virsh net-update net add ip-dhcp-host ""<host mac='00:11:22:33:44:57' ip='192.168.122.47'/>"" --live --config --parent-index 0
​​";Updated network net persistent config and live state;;RedHatEnterpriseLinux7/RHEL7-87546
2471;;;;;;;;;9;"3. Add host element for second dhcp section.
 # virsh net-update net add ip-dhcp-host ""<host mac='00:11:22:33:44:58' ip='192.168.122.48'/>"" --live --config --parent-index 1";"error: Failed to update network net
 error: Requested operation is not valid: dhcp is supported only for a single IPv4 address on each network";;RedHatEnterpriseLinux7/RHEL7-87546
2471;;;;;;;;;10;"4. Add range element for first dhcp section.
 # virsh net-update net add ip-dhcp-range ""<range start='192.168.121.130' end='192.168.121.140'/>"" --live --config --parent-index 0
​​";Updated network net persistent config and live state;;RedHatEnterpriseLinux7/RHEL7-87546
2471;;;;;;;;;11;"5. Add range element for second dhcp section.
 # virsh net-update net add ip-dhcp-range ""<range start='192.168.10.130' end='192.168.10.140'/>"" --live --config --parent-index 1";"error: Failed to update network net
 error: Requested operation is not valid: dhcp is supported only for a single IPv4 address on each network";;RedHatEnterpriseLinux7/RHEL7-87546
2471;;;;;;;;;12;"6. # virsh net-dumpxml net
​​";"<network>
 <name>net</name>
 <uuid>fe8ffe14-8478-060d-ece1-2c97f96e1c59</uuid>
 <forward mode='nat'>
 <nat>
 <port start='1024' end='65535'/>
 </nat>
 </forward>
 <bridge name='virbr1' stp='on' delay='0'/>
 <mac address='52:54:00:e5:b6:95'/>
 <ip address='192.168.121.1' netmask='255.255.255.0'>
 <dhcp>
 <range start='192.168.121.130' end='192.168.121.140'/>
 <host mac='00:11:22:33:44:57' ip='192.168.122.47'/>
 </dhcp>
 </ip>
 <ip address='192.168.10.1' netmask='255.255.255.0'>
 </ip>
 </network>";;RedHatEnterpriseLinux7/RHEL7-87546
2471;;;;;;;;;13;Test ipv6 for both steps;​​;;RedHatEnterpriseLinux7/RHEL7-87546
2472;RHEL7-87548;[net-update] Update bridge, domain, ip, dns, dns-forwarder, forward, forward-pf sections by net-update (not support);do not support bridge, domain, ip, dns, dns-forwarder, forward, forward-pf currently;Yalan Zhang (yalzhang);High;Negative;Not Automated;;1;"**Scenarios 1:  bridge section
 1. Prepare a network for modifing.
 # virsh net-list
 Name State Autostart Persistent
 --------------------------------------------------
 default active yes yes
 net-1 active no yes
 # virsh net-dumpxml net-1
 <network>
 <name>net-1</name>
 <uuid>d7f1e011-6347-5c14-1941-46d7ff1b5e57</uuid>
 <forward mode='nat'/>
 <bridge name='net-test' stp='on' delay='0' />
 <mac address='52:54:00:E7:56:E9'/>
 <ip address='192.168.200.1' netmask='255.255.255.0'>
 <dhcp>
 <range start='192.168.200.2' end='192.168.200.254' />
 </dhcp>
 </ip>
 </network>
";"**Scenarios 1:**
 bridge section can not be udpated.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-87548
2472;;;;;;;;;2;"2.# virsh net-update net-1 modify bridge ""<bridge name='net-update' stp='on' delay='0' />""";"error: Failed to update network net-1
 error: this function is not supported by the connection driver: can't update 'bridge' section of network 'net-1'";;RedHatEnterpriseLinux7/RHEL7-87548
2472;;;;;;;;;3;"3.# virsh net-update net-1 delete bridge ""<bridge name='net-test' stp='on' delay='0' />""";"error: Failed to update network net-1
 error: this function is not supported by the connection driver: can't update 'bridge' section of network 'net-1'";;RedHatEnterpriseLinux7/RHEL7-87548
2472;;;;;;;;;4;**Scenario 2:  domain section;​​;;RedHatEnterpriseLinux7/RHEL7-87548
2472;;;;;;;;;5;"# virsh net-update default add domain '<domain name=""example.com""/>'
​​";"error: Failed to update network default
 error: Operation not supported: can't update 'domain' section of network 'default'";;RedHatEnterpriseLinux7/RHEL7-87548
2472;;;;;;;;;6;**Scenarios 3:  ip section;​​;;RedHatEnterpriseLinux7/RHEL7-87548
2472;;;;;;;;;7;"# virsh net-update default add ip ""<ip address='192.168.122.2' netmask='255.255.255.0'/>""
​​";"error: Failed to update network default
 error: Operation not supported: can't update 'ip' section of network 'default'";;RedHatEnterpriseLinux7/RHEL7-87548
2472;;;;;;;;;8;"# virsh net-update default add ip '<ip family=""ipv6"" address=""2001:db8:ca2:2::1"" prefix=""64"" localPtr=""yes""/>'";"error: Failed to update network default
 error: Operation not supported: can't update 'ip' section of network 'default'";;RedHatEnterpriseLinux7/RHEL7-87548
2472;;;;;;;;;9;**Scenarios 4:  dns section;​​;;RedHatEnterpriseLinux7/RHEL7-87548
2472;;;;;;;;;10;"# virsh net-update default add dns ""<dns enable='yes'/>""
​​";error: unrecognized section name 'dns';;RedHatEnterpriseLinux7/RHEL7-87548
2472;;;;;;;;;11;**Scenarios 5:  dns-forwarder section;​​;;RedHatEnterpriseLinux7/RHEL7-87548
2472;;;;;;;;;12;"# virsh net-update default add dns-forwarder '<forwarder addr=""8.8.8.8""/>'
​​";error: unrecognized section name 'dns-forwarder';;RedHatEnterpriseLinux7/RHEL7-87548
2472;;;;;;;;;13;**Scenarios 6: forward ;​​;;RedHatEnterpriseLinux7/RHEL7-87548
2472;;;;;;;;;14;"# virsh net-update default add forward ""<forward mode='nat'/>""
​​";"error: Failed to update network default
 error: Operation not supported: can't update 'forward' section of network 'default'";;RedHatEnterpriseLinux7/RHEL7-87548
2472;;;;;;;;;15;**Scenarios 7: forward-pf;"
​​";;RedHatEnterpriseLinux7/RHEL7-87548
2472;;;;;;;;;16;"# virsh net-dumpxml pf
 <network>
   <name>pf</name>
   <uuid>912cb112-3216-4793-bf0c-3f6fd7f483e5</uuid>
   <forward mode='passthrough'>
     <pf dev='ens1f1'/>
   </forward>
 </network>
 
 # virsh net-update pf modify forward-pf ""<pf dev='enp1s0'/>"" 
";"error: Failed to update network pf
 error: Operation not supported: can't update 'forward pf' section of network 'pf'";;RedHatEnterpriseLinux7/RHEL7-87548
2473;RHEL7-87550;[net-update] modify / add / delete ip-dhcp-host by different match, ipv4;"2)add ip-dhcp-host if no ip-dhcp-range defined will succeed, add ip-dhcp-range; 3) negative scenairos for adding a static host with: duplicate name, ip or mac, only ip / name /mac; 4) ip-dhcp-host with add-first, add, add-last, delete, modify only ip, name, or mac";Yalan Zhang (yalzhang);Critical;Positive;Automated;;1;Scenario 1: modify the static host;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;2;"# virsh net-dumpxml net
 <network>
   <name>net</name>
   <uuid>133be3c8-b5c3-4d8a-843b-61875251b394</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr2' stp='on' delay='0'/>
   <mac address='52:54:00:f4:c7:a5'/>
   <ip address='192.168.120.1' netmask='255.255.255.0'>
     <dhcp>
       <host mac='52:54:00:f9:d4:64' name='foo.example.com' ip='192.168.120.201'/>
     </dhcp>
   </ip>
 </network>";​​;;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;3;"1. match with mac
 # virsh net-update net modify ip-dhcp-host ""<host mac='52:54:00:f9:d4:64' name='bob.example.com' ip='192.168.120.200'/>""
​​";"
 Updated network net live state

 (successfully to modify the network static host match with mac )";;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;4;# virsh net-dumpxml net;check the item is modified;;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;5;"2. match with name
 # virsh net-update net modify ip-dhcp-host ""<host mac='52:54:00:f9:d4:65' name='bob.example.com' ip='192.168.120.201'/>""
 
​​";"
 Updated network net live state

 (successfully to modify the network static host match with name)";;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;6;# virsh net-dumpxml net;check the item is modified;;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;7;"3. match with ip
 # virsh net-update net modify ip-dhcp-host ""<host mac='52:54:00:f9:d4:63' name='foo.example.com' ip='192.168.120.201'/>""
​​";"Updated network net live state

 (successfully to modify the network static host match with ip)+";;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;8;# virsh net-dumpxml net;check the item is modified;;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;9;"4. no match items (ip, mac, name)
 # virsh net-update net modify ip-dhcp-host ""<host mac='52:54:00:f9:d4:62' name='bob.example.com' ip='192.168.120.200'/>""";"error: Failed to update network net
 error: Requested operation is not valid: couldn't 

 (if there is no match items, modify will fail)";;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;10;"5. match with mac and no name specified, will change the name to null
 
 # virsh net-update net modify ip-dhcp-host ""<host mac='52:54:00:f9:d4:63'  ip='192.168.120.200'/>""
​​";Updated network net live state;;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;11;# virsh net-dumpxml net;"...
   <ip address='192.168.120.1' netmask='255.255.255.0'>
     <dhcp>
       <host mac='52:54:00:f9:d4:63' ip='192.168.120.200'/>
     </dhcp>
   </ip>
 </network>";;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;12;"6. modify the mac to null
 #  virsh net-update net modify ip-dhcp-host ""<host name='foo.example.com'  ip='192.168.120.200'/>""
 
​​";Updated network net live state;;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;13;# virsh net-dumpxml net<network>;"....
     <dhcp>
       <host name='foo.example.com' ip='192.168.120.200'/>
     </dhcp>
   </ip>
 </network>";;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;14;"7. modify the name and mac to null, will fail
 #  virsh net-update net modify ip-dhcp-host ""<host ip='192.168.120.200'/>""
​​";"error: Failed to update network net
 error: XML error: Static host definition in IPv4 network 'net' must have mac or name attribute

 (failed to modify the mac to null)";;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;15;"8. modify the ip to null, will faile
 #  virsh net-update net modify ip-dhcp-host ""<host name='foo.example.com'  mac='52:54:00:f9:d4:63'/>""
​​";"error: Failed to update network net
 error: XML error: Missing IP address in static host definition for network 'net'

 (failed to modify the ip to null)";;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;16;Scenario 2: delete it by different match;​​;;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;17;"# virsh net-dumpxml net
 <network>
   <name>net</name>
   <uuid>133be3c8-b5c3-4d8a-843b-61875251b394</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr2' stp='on' delay='0'/>
   <mac address='52:54:00:f4:c7:a5'/>
   <ip address='192.168.120.1' netmask='255.255.255.0'>
   </ip>
 </network>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;18;"1. use add, add-last, add-first  to add the static hosts in the network
 # virsh net-update net add ip-dhcp-host  ""<host mac='52:54:00:f9:d4:64' name='foo.example.com' ip='192.168.120.201' />""
 Updated network net live state
 #  virsh net-update net add-last ip-dhcp-host  ""<host mac='52:54:00:f9:d4:65' name='bob.example.com' ip='192.168.120.202' />""
 Updated network net live state
 #  virsh net-update net add ip-dhcp-host  ""<host mac='52:54:00:f9:d4:66' name='lily.example.com' ip='192.168.120.203' />""
 Updated network net live state
 #  virsh net-update net add-first ip-dhcp-host  ""<host mac='52:54:00:f9:d4:67' name='lucy.example.com' ip='192.168.120.204' />""
 Updated network net live state

 2. check the network, add is equal to add-last, will append the item , while add-first will insert the item.";"1. add the hosts successfully
 2. # virsh net-dumpxml net
 <network>
   <name>net</name>
   <uuid>133be3c8-b5c3-4d8a-843b-61875251b394</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr2' stp='on' delay='0'/>
   <mac address='52:54:00:f4:c7:a5'/>
   <ip address='192.168.120.1' netmask='255.255.255.0'>
     <dhcp>
       <host mac='52:54:00:f9:d4:67' name='lucy.example.com' ip='192.168.120.204'/>
       <host mac='52:54:00:f9:d4:64' name='foo.example.com' ip='192.168.120.201'/>
       <host mac='52:54:00:f9:d4:65' name='bob.example.com' ip='192.168.120.202'/>
       <host mac='52:54:00:f9:d4:66' name='lily.example.com' ip='192.168.120.203'/>
     </dhcp>
   </ip>";;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;19;"3. delete with mac
 # virsh net-update net delete ip-dhcp-host  ""<host mac='52:54:00:f9:d4:64' />""
​​";Updated network net live state;;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;20;# virsh net-dumpxml net;===>check the host is deleted;;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;21;"4. delete the static host with wrong mac, it will fail.
 #  virsh net-update net delete ip-dhcp-host  ""<host mac='52:54:00:f9:d4:61' name='lucy.example.com' ip='192.168.120.204'/>""
";"error: Failed to update network net
 error: Requested operation is not valid: couldn't locate a matching dhcp host entry in network 'net'";;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;22;"#  virsh net-update net delete ip-dhcp-host  ""<host mac='52:54:00:f9:d4:66' name='lucy.example.com' ip='192.168.120.204'/>""";"error: Failed to update network net
 error: Requested operation is not valid: couldn't locate a matching dhcp host entry in network 'net'";;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;23;"5. delete with name
 #  virsh net-update net delete ip-dhcp-host  ""<host name='bob.example.com' />""
";Updated network net live state;;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;24;# virsh net-dumpxml net;check the host is deleted;;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;25;"6. delete the static host with wrong name, it will fail.
 #  virsh net-update net delete ip-dhcp-host  ""<host name='test.example.com' />""";"error: Failed to update network net
 error: Requested operation is not valid: couldn't locate a matching dhcp host entry in network 'net'";;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;26;"7. delete with ip 
 #  virsh net-update net delete ip-dhcp-host  ""<host  ip='192.168.120.203' />""
";Updated network net live state;;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;27;# virsh net-dumpxml net;check the host is deleted;;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;28;"8. delete the static host with wrong ip, it will fail.
 #  virsh net-update net delete ip-dhcp-host  ""<host  ip='192.168.120.211' />""";"error: Failed to update network net
 error: Requested operation is not valid: couldn't locate a matching dhcp host entry in network 'net'";;RedHatEnterpriseLinux7/RHEL7-87550
2473;;;;;;;;;29;"9. #  virsh net-update net delete ip-dhcp-host  ""<host mac='52:54:00:f9:d4:67' name='lucy.example.com' ip='192.168.120.204'/>""
​​";"Updated network net live state
 (If delete a static host definition, all the attributes specified in the command should be matched.)";;RedHatEnterpriseLinux7/RHEL7-87550
2474;RHEL7-87553;[net-update] add ip-dhcp-host or ip-dhcp-range for network without ip-dhcp section, ipv4/6;add ip-dhcp-host or ip-dhcp-range for network without ip-dhcp section;Yalan Zhang (yalzhang);Critical;Positive;Automated;;1;"define and start a network with no dhcp range defined
 # cat net.xml
 <network>
   <name>net</name>
   <forward mode='nat'/>
   <bridge name='virbr2' stp='on' delay='0' />
   <mac address='52:54:00:F4:C7:A5'/>
   <ip address='192.168.120.1' netmask='255.255.255.0'>
   </ip>
 <ip family=""ipv6"" address=""2001:db8:ca2:2::1"" prefix=""64""/>
 </network>
 # virsh net-define net.xml
 # virsh net-start net";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;2;"1. check the hosts file of net is blank
 # cd /var/lib/libvirt/dnsmasq
 # ls | grep net
 net.addnhosts
 net.conf
 net.hostsfile
 # cat net.hostsfile";no output, it is blank;;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;3;"2. # virsh net-update net add ip-dhcp-host  ""<host mac='52:54:00:f9:d4:63' ip='192.168.120.200' />""
";Updated network net live state;;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;4;# virsh net-dumpxml net;"<network>
   <name>net</name>
   <uuid>133be3c8-b5c3-4d8a-843b-61875251b394</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr2' stp='on' delay='0'/>
   <mac address='52:54:00:f4:c7:a5'/>
   <ip address='192.168.120.1' netmask='255.255.255.0'>
     <dhcp>
      ** <host mac='52:54:00:f9:d4:63' ip='192.168.120.200'/> **
     </dhcp>
   </ip>
 <ip family='ipv6' address='2001:db8:ca2:2::1' prefix='64'>
   </ip>
 </network>";;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;5;"3.check the mac and ip is the same as what we have added in step 2. 
 # cat  /var/lib/libvirt/dnsmasq/net.hostsfile
​​";52:54:00:f9:d4:63,192.168.120.200;;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;6;"4. start a guest with mac=52:54:00:f9:d4:63, and check the ip
 # virsh dumpxml rhel7.2 | grep /interface -B5
     <interface type='network'>
       <mac address='52:54:00:f9:d4:63'/>
       <source network='net'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 # virsh start rhel7.2
​​";​​;;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;7;5. log in the guest, check ip;ip is 192.168.120.200;;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;8;"6.# virsh net-update net add ip-dhcp-host  '<host id=""0:1:0:1:18:aa:62:fe:0:16:3e:44:55:66"" ip=""2001:db8:ca2:2:3::2""/>' --parent-index 1
 
 
 
​​";"Updated network net live state
​​";;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;9;7. # virsh net-dumpxml net ===> check the ipv6 dhcp section is added;" <ip family='ipv6' address='2001:db8:ca2:2::1' prefix='64' localPtr='yes'>
     <dhcp>
       <host id='0:1:0:1:18:aa:62:fe:0:16:3e:44:55:66' ip='2001:db8:ca2:2:3::2'/>
     </dhcp>
   </ip>";;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;10;8. # cat  /var/lib/libvirt/dnsmasq/net.hostsfile;"52:54:00:f9:d4:63,192.168.120.200
 id:0:1:0:1:18:aa:62:fe:0:16:3e:44:55:66,[2001:db8:ca2:2:3::2]";;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;11;For dhcp-ip-range;​​;;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;12;"# virsh net-dumpxml net
 <network>
   <name>net</name>
   <uuid>403ce411-0c25-4c16-b39a-fd3e8beb2c33</uuid>
   <forward mode='nat'/>
   <bridge name='virbr2' stp='on' delay='0'/>
   <mac address='52:54:00:f4:c7:a5'/>
   <ip address='192.168.120.1' netmask='255.255.255.0'>
   </ip>
   <ip family='ipv6' address='2001:db8:ca2:2::1' prefix='64'>
   </ip>
 </network>
 
 # virsh net-start net
 Network net started
 
 1. check the pid of dnsmasq
 #  ps aux | grep dnsmasq | grep -v grep
 nobody    2629  0.0  0.0  15604   764 ?        S    14:21   0:00 /usr/sbin/dnsmasq --conf-file=/var/lib/libvirt/dnsmasq/net.conf --leasefile-ro --dhcp-script=/usr/libexec/libvirt_leaseshelper
 root      2630  0.0  0.0  15604   184 ?        S    14:21   0:00 /usr/sbin/dnsmasq --conf-file=/var/lib/libvirt/dnsmasq/net.conf --leasefile-ro --dhcp-script=/usr/libexec/libvirt_leaseshelper";​​;;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;13;"2.  # virsh net-update net add ip-dhcp-range '<range start=""192.168.120.3"" end=""192.168.120.78""/>'
";Updated network net live state;;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;14;"3. dnsmasq will restart once add/delete ip-dhcp-range, check the pid changed
 #  ps aux | grep dnsmasq | grep -v grep ";"nobody    2701  0.0  0.0  15604   780 ?        S    14:22   0:00 /usr/sbin/dnsmasq --conf-file=/var/lib/libvirt/dnsmasq/net.conf --leasefile-ro --dhcp-script=/usr/libexec/libvirt_leaseshelper
 root      2702  0.0  0.0  15604   188 ?        S    14:22   0:00 /usr/sbin/dnsmasq --conf-file=/var/lib/libvirt/dnsmasq/net.conf --leasefile-ro --dhcp-script=/usr/libexec/libvirt_leaseshelper、
 
 (the pid changed compare with step 1)";;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;15;"4. #  virsh net-update net modify ip-dhcp-range '<range start=""192.168.120.3"" end=""192.168.120.201""/>'
";"error: Failed to update network net
 error: Operation not supported: dhcp ranges cannot be modified, only added or deleted";;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;16;"5. # virsh net-update net delete ip-dhcp-range '<range start=""192.168.120.5"" end=""192.168.120.78""/>'
​​";"error: Failed to update network net
 error: Requested operation is not valid: couldn't locate a matching dhcp range entry in network 'net'
 
 (delete non-exist range will report error)";;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;17;"4. #  virsh net-update net delete ip-dhcp-range '<range start=""192.168.120.3""/>'
​​";"error: Failed to update network net
 error: XML error: Missing 'end' attribute in dhcp range for network 'net'";;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;18;"5. #  virsh net-update net add ip-dhcp-range '<range start=""192.168.120.3"" end=""192.168.120.78""/>'
​​";"error: Failed to update network net
 error: Requested operation is not valid: there is an existing dhcp range entry in network 'net' that matches ""<range start='192.168.120.3' end='192.168.120.78'/>""
 
 (add the one already added will report error)";;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;19;"6. # virsh net-update net add ip-dhcp-range '<range start=""192.168.200.3"" end=""192.168.200.78""/>' 
​​";"error: Failed to update network net
 error: internal error: range 192.168.200.3 - 192.168.200.78 is not entirely within network 192.168.120.1/24";;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;20;"7. #  virsh net-update net delete ip-dhcp-range '<range start=""192.168.120.3"" end=""192.168.120.78""/>'
​​";Updated network net live state;;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;21;"8. # virsh net-update net add ip-dhcp-range '<range start=""192.168.120.100"" end=""192.168.120.2""/>'   
​​";"error: Failed to update network net
 error: internal error: range 192.168.120.100 - 192.168.120.2 is reversed ";;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;22;"For ipv6, repeat step 1~7
 # virsh net-dumpxml net
 <network>
   <name>net</name>
   <uuid>403ce411-0c25-4c16-b39a-fd3e8beb2c33</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr2' stp='on' delay='0'/>
   <mac address='52:54:00:f4:c7:a5'/>
   <ip address='192.168.120.1' netmask='255.255.255.0'>
   </ip>
   <ip family='ipv6' address='2001:db8:ca2:2::1' prefix='64'>
   </ip>
 </network>
 
​​";add range will check if the bridge in the same range;;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;23;"1. add invalid one
 #  virsh net-update net add ip-dhcp-range '<range start=""2001:db8:ca2:7::100"" end=""2001:db8:ca2::1ff""/>' --parent-index 1";"error: Failed to update network net
 error: internal error: range 2001:db8:ca2:7::100 - 2001:db8:ca2::1ff is not entirely within network 2001:db8:ca2:2::1/64 ";;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;24;"2. #  virsh net-update net add ip-dhcp-range '<range start=""2001:db8:ca2:2::100"" end=""2001:db8:ca2:2::1ff""/>' --parent-index 1
​​";"
 Updated network net live state
​​";;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;25;# virsh net-dumpxml net;"...
   <ip family='ipv6' address='2001:db8:ca2:2::1' prefix='64'>
     <dhcp>
       <range start='2001:db8:ca2:2::100' end='2001:db8:ca2:2::1ff'/>
     </dhcp>
   </ip>
 </network>";;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;26;"3. #  virsh net-update net add ip-dhcp-range '<range start=""2001:db8:ca2:2::100"" end=""2001:db8:ca2:2::1ff""/>' --parent-index 1
 
​​";"error: Failed to update network net
 error: Requested operation is not valid: there is an existing dhcp range entry in network 'net' that matches ""<range start='2001:db8:ca2:2::100' end='2001:db8:ca2:2::1ff'/>""";;RedHatEnterpriseLinux7/RHEL7-87553
2474;;;;;;;;;27;"4. #  virsh net-update net add ip-dhcp-range '<range start=""2001:db8:ca2:2::100"" end=""2001:db8:ca2:2::f""/>' --parent-index 1
​​";"error: Failed to update network net
 error: internal error: range 2001:db8:ca2:2::100 - 2001:db8:ca2:2::f start larger than end";;RedHatEnterpriseLinux7/RHEL7-87553
2475;RHEL7-87576;[net-update] Add a static host with duplicate mac/name/ip or only mac/name/ip (not support);add a static host must have mac/name + ipv4, duplicate mac, or name, ip can not be added.;Yalan Zhang (yalzhang);Critical;Negative;Automated;;1;"# virsh net-dumpxml net
 <network>
   <name>net</name>
   <uuid>133be3c8-b5c3-4d8a-843b-61875251b394</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr2' stp='on' delay='0'/>
   <mac address='52:54:00:f4:c7:a5'/>
   <ip address='192.168.120.1' netmask='255.255.255.0'>
     <dhcp>
       <host mac='52:54:00:f9:d4:63' ip='192.168.120.200'/>
     </dhcp>
   </ip>
 </network>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-87576
2475;;;;;;;;;2;"1. add a static host with the same mac already defined in the network
 # virsh net-update net add ip-dhcp-host  ""<host mac='52:54:00:f9:d4:63' ip='192.168.120.201' />""
​​";"error: Failed to update network net
 error: Requested operation is not valid: there is an existing dhcp host entry in network 'net' that matches ""<host mac='52:54:00:f9:d4:63' name='(null)' ip='192.168.120.201'/>""
 
 （same mac can not add）";;RedHatEnterpriseLinux7/RHEL7-87576
2475;;;;;;;;;3;"2. add a static host with the same ip already defined in the network 
 # virsh net-update net add ip-dhcp-host  ""<host mac='52:54:00:f9:d4:64' ip='192.168.120.200' />""
 

 
​​";"error: Failed to update network net
 error: Requested operation is not valid: there is an existing dhcp host entry in network 'net' that matches ""<host mac='52:54:00:f9:d4:64' name='(null)' ip='192.168.120.200'/>""

 （same ip can not add）";;RedHatEnterpriseLinux7/RHEL7-87576
2475;;;;;;;;;4;"3. # virsh net-update net add ip-dhcp-host  ""<host mac='52:54:00:f9:d4:69' name='bob' ip='192.168.120.201' />""
 Updated network net live state
 
 ** add one with same name **
 #  virsh net-update net add ip-dhcp-host  ""<host mac='52:54:00:f9:d4:61' name='bob' ip='192.168.120.202' />""";"error: Failed to update network net
 error: Requested operation is not valid: there is an existing dhcp host entry in network 'net' that matches ""<host mac='52:54:00:f9:d4:61' name='bob' ip='192.168.120.202'/>""
 
 （same name can not be add）";;RedHatEnterpriseLinux7/RHEL7-87576
2475;;;;;;;;;5;"4. only mac
 # virsh net-update net add ip-dhcp-host  ""<host mac='52:54:00:f9:d4:64'/>""";"error: Failed to update network net
 error: XML error: Missing IP address in static host definition for network 'net'";;RedHatEnterpriseLinux7/RHEL7-87576
2475;;;;;;;;;6;"5. only ip
 #  virsh net-update net add ip-dhcp-host  ""<host ip='192.168.120.200' />""
 
​​";"error: Failed to update network net
 error: XML error: Static host definition in IPv4 network 'net' must have mac or name attribute

 (add a static host must have mac/name + ipv4)";;RedHatEnterpriseLinux7/RHEL7-87576
2475;;;;;;;;;7;"6. only name
 #  virsh net-update net add ip-dhcp-host  ""<host name='foo.example.com'/>""";"error: Failed to update network net
 error: XML error: Missing IP address in static host definition for network 'net'";;RedHatEnterpriseLinux7/RHEL7-87576
2475;;;;;;;;;8;"7. #  virsh net-update net add ip-dhcp-host  ""<host name='foo.example.com' mac='52:54:00:f9:d4:67' />""
​​";"error: Failed to update network net
 error: XML error: Missing IP address in static host definition for network 'net'

 (it will fail if there is no ip definition)";;RedHatEnterpriseLinux7/RHEL7-87576
2475;;;;;;;;;9;"8.  #  virsh net-update net add ip-dhcp-host  ""<host name='foo.example.com' ip='192.168.120.205' />""
 Updated network net live state
 
 #  virsh net-update net add ip-dhcp-host  ""<host mac='52:54:00:f9:d4:66' ip='192.168.120.202'/>""
 Updated network net live state";(successfully to adda static host with defining mac/name + ip);;RedHatEnterpriseLinux7/RHEL7-87576
2476;RHEL7-87579;[update-device][rom][target][model] update-device to live update the rom, target, model type (not support);"support: bandwidth, link state, boot order, filterref filter, source network; do not support: target, rom bar, model, driver; match by mac, if pci address also specified, match by mac and pci address.
";Yalan Zhang (yalzhang);High;Negative;Automated;;1;model type; model type can not be updated;Test Case;RedHatEnterpriseLinux7/RHEL7-87579
2476;;;;;;;;;2;"# virsh dumpxml rhel7.4 | grep /interface -B7
     <interface type='network'>
       <mac address='00:16:3e:77:e2:ed'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-87579
2476;;;;;;;;;3;"# cat net
    <interface type='network'>
       <mac address='00:16:3e:77:e2:ed'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel7.4 net
​​";"error: Failed to update device from net
 error: Operation not supported: cannot modify network device model from virtio to rtl8139";;RedHatEnterpriseLinux7/RHEL7-87579
2476;;;;;;;;;4;target;target dev can not be updated;;RedHatEnterpriseLinux7/RHEL7-87579
2476;;;;;;;;;5;"# cat net
    <interface type='network'>
       <source network='net7' bridge='virbr0'/>
  <mac address='00:16:3e:77:e2:ed'/>
       <target dev='test'/>
       <alias name='net0'/>
 <model type='virtio'/>
     </interface>
 # virsh update-device rhel7.4 net
​​";"error: Failed to update device from net
 error: Operation not supported: cannot modify network device tap name";;RedHatEnterpriseLinux7/RHEL7-87579
2476;;;;;;;;;6;live update rom ;do not support rom;;RedHatEnterpriseLinux7/RHEL7-87579
2476;;;;;;;;;7;"1. add rom bar element with file path
 # cat net
    <interface type='network'>
       <mac address='00:16:3e:77:e2:ed'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <alias name='net0'/>
 <model type='virtio'/>
  <rom bar='on' file='/etc/fake/boot.bin'/>      
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 # virsh update-device rhel7.4 net
​​";"error: Failed to update device from net
 error: Operation not supported: cannot modify network device rom bar setting";;RedHatEnterpriseLinux7/RHEL7-87579
2476;;;;;;;;;8;"2. prepare an vm with interface has rom bar setting as below:
 # virsh dumpxml rhel | grep /interface -B6
     <interface type='network'>
       <mac address='52:54:00:68:c0:78'/>
       <source network='default'/>
       <model type='virtio'/>
       <rom bar='on'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh start rhel
 Domain rhel started
 
 copy the interface xml to a xml and modify rom bar to off
 # cat nic.xml
 <interface type='network'>   
       <mac address='52:54:00:68:c0:78'/> 
         <source network='default'/>  
         <model type='virtio'/>     
         <rom bar='off'/>
           <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>   
 </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-87579
2476;;;;;;;;;9;# virsh update-device rhel nic.xml;"error: Failed to update device from nic.xml
 error: Operation not supported: cannot modify network device rom bar setting";;RedHatEnterpriseLinux7/RHEL7-87579
2476;;;;;;;;;10;"3. update the file path
​​";​​;;RedHatEnterpriseLinux7/RHEL7-87579
2477;RHEL7-88159;[vgpu]Boot guest with hugepage(2M/1G) as memory backend and validate basic gfx function inside guest.;Boot guest with hugepage(2M/1G) as memory backend and validate basic gfx function inside guest{comment:1};Zhiyi Guo (zhguo);Critical;Positive;Manual Only;;1;" Boot guest with vgpu and 2M hugepage, e.g:
 -m 4G -mem-prealloc -mem-path /dev/myhugepages/
 ...
 -device vfio-pci,id=gvt1,sysfsdev=/sys/bus/mdev/devices/c1121c7b-7d80-4e25-89d3-bd8afefe99ec"; Guest boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-88159
2477;;;;;;;;;2;Check host hugepage usage;"# grep Huge /proc/meminfo 
 HugePages_Total: X ---> hugepage pool size configured 
 HugePages_Free: Y ---> equal to X minuses the one consumed by qemu-
 kvm 
 HugePages_Rsvd: 0 
 HugePages_Surp: 0 
 Hugepagesize: 2048 kB ---> equal to 2MB";;RedHatEnterpriseLinux7/RHEL7-88159
2477;;;;;;;;;3;Do some gfx operation, like play HD video, run gfx application(glmark2 for rhel and heaven for windows);Guest works well;;RedHatEnterpriseLinux7/RHEL7-88159
2477;;;;;;;;;4;Shutdown guest and remove vgpu device;Guest can shutdown normally and vgpu device can be destroyed;;RedHatEnterpriseLinux7/RHEL7-88159
2477;;;;;;;;;5;Rerun step 1-4 with 1G hugepage;Test pass as 2M hugepage;;RedHatEnterpriseLinux7/RHEL7-88159
2478;RHEL7-88160;[vgpu]Combine vgpu with sr-iov;Combine vgpu with sr-iov;Zhiyi Guo (zhguo);Critical;Positive;Manual Only;;1;Create one vf and one vgpu on host;both vgpu and vf create successfully ;Test Case;RedHatEnterpriseLinux7/RHEL7-88160
2478;;;;;;;;;2;Boot guest with vgpu and vf, hot remove/plug vf 10 times, shutdown guest;Both guest and host works well, no crash happen;;RedHatEnterpriseLinux7/RHEL7-88160
2478;;;;;;;;;3;Boot guest with vgpu, hot plug vf device and shutdown guest;Both guest and host works well, no crash happen;;RedHatEnterpriseLinux7/RHEL7-88160
2479;RHEL7-88195;[virtio-win][viostor] Boot guest with MBR partition style and data disk with GPT style;Boot guest with MBR partition style and data disk with GPT style;Yu Wang (wyu);Medium;Positive;Not Automated;;1;"1.start VM with virtio-blk-pci(both system disk and data disk):
 CLI:
 -object iothread,id=thread0 -drive file=win.raw,if=none,id=drive-virtio-disk1,format=raw,serial=mike_cao1,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk1,id=virtio-disk1
 -drive file=test.raw,if=none,id=drive-virtio-disk0,format=raw,serial=mike_cao,cache=none -device virtio-blk-pci,iothread=thread0,bus=pci.0,drive=drive-virtio-disk0,id=virtio-disk0";1. Guest can be boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-88195
2479;;;;;;;;;2;" 2.check whether viostor.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled viostor.sys verifier:
    #verifier.exe /standard /driver viostor.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings ";"Driver can be installed successfully 
 All the Standards flags are checked ,the verified driver fields shows ""viostor.sys"" ";;RedHatEnterpriseLinux7/RHEL7-88195
2479;;;;;;;;;3;"3. change/initialize data disk to GPT style.
 If your data disk is never initialized, follow initialize steps, if have been initialized , pls change to GPT.
 change the data disk in disk manager
    1) start-->run -->diskmgmt.msc
    2) right click the data disk(eg volume(D:)) --> delete volume --> ok
    3) right click this disk(eg disk1) --> convert to GTP Disk
 Initialize the data disks in disk manager    
     1) start-->run -->diskmgmt.msc
     2) Initialize Disk--> select GPT --> OK
     3) Right click disk 1 --> New Simple Volume --> Next --> Finish
​​";"3 change disk without error
​​";;RedHatEnterpriseLinux7/RHEL7-88195
2479;;;;;;;;;4;"4. run crystal benchmark on system/data disk(default params )
​​";4. no bsod or hangs occurs;;RedHatEnterpriseLinux7/RHEL7-88195
2479;;;;;;;;;5;"6 Check the partition style for datadisk
    disk manger --> right click disk1 --> properties --> Volumes";"6 Check the Partition style is ""GUID Partition Table (GPT)""";;RedHatEnterpriseLinux7/RHEL7-88195
2480;RHEL7-88273;[vgpu]Check available instances for each vgpu type;Check available instances for each vgpu type;Zhiyi Guo (zhguo);Critical;Positive;Manual Only;;1;"Check available_instances for each type of vgpu against host
 without exist vgpus.
e.g:
find /sys/class/mdev_bus/0000\:00\:02.0/mdev_supported_types/ \
-name available_instances | xargs -i -t cat {}";available_instances for each vgpu type has positive value. ;Test Case;RedHatEnterpriseLinux7/RHEL7-88273
2480;;;;;;;;;2;Create some vgpu devices and check available_instances for each type of vgpu;available_instances for each vgpu type is decreased but the minimum value for a available_instances is zero;;RedHatEnterpriseLinux7/RHEL7-88273
2480;;;;;;;;;3;Destroy created vgpu devices and check available_instances for each type of vgpu;available_instances for each vgpu type can recovery to the value as step 1;;RedHatEnterpriseLinux7/RHEL7-88273
2481;RHEL7-88290;[vgpu]System reset 10 times to guest with vgpu;Boot guest with vgpu and system reset 10 times;Zhiyi Guo (zhguo);Critical;Positive;Automated;;1;Boot guest with one vgpu;Guest can boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-88290
2481;;;;;;;;;2;"Do system reset from qmp:
 { ""execute"": ""qmp_capabilities"" }
 { ""execute"": ""system_reset"" }";System reset and Guest/qemu-kvm/host works correctly without crash or hang;;RedHatEnterpriseLinux7/RHEL7-88290
2481;;;;;;;;;3;Shutdown guest and destroy vgpu;Guest shutdown normally and vgpu can be removed;;RedHatEnterpriseLinux7/RHEL7-88290
2482;RHEL7-88291;[vgpu]Boot guest with vgpu and shutdown guest, repeat 10 times;vgpu life cycle stress test ;Zhiyi Guo (zhguo);Critical;Positive;Automated;;1;Boot guest with vgpu and shutdown guest, repeat 10 times;Guest boot and shutdown normally;Test Case;RedHatEnterpriseLinux7/RHEL7-88291
2483;RHEL7-88375;Set various on_crash for windows guest with hyperv panic model--bug 1426176;"on_crash event with hyperv panic model for windows guest, which only works for the os after windows2008
";Yan Fu (yafu);Critical;Positive;Manual Only;;1;"1. Edit guest xml with following elements:
   <on_crash>coredump-restart</on_crash>
   ...
   <devices>
 ... 
     <panic model='hyperv'/>
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-88375
2483;;;;;;;;;2;"Start guest:
 # virsh start win2k12";​​;;RedHatEnterpriseLinux7/RHEL7-88375
2483;;;;;;;;;3;"2.Open the second terminal to watch the event of the guest:
 #virsh event win2k12 --all --loop";​​;;RedHatEnterpriseLinux7/RHEL7-88375
2483;;;;;;;;;4;"3.Crash the windows2012 guest:
 #virsh send-key win2k12 KEY_RIGHTCTRL KEY_SCROLLLOCK KEY_SCROLLLOCK";​​;;RedHatEnterpriseLinux7/RHEL7-88375
2483;;;;;;;;;5;4.Check the event of the guest in the second terminal;"4.The crash event captured:

 event 'lifecycle' for domain rhel7.3-min: Crashed Panicked
 event 'reboot' for domain rhel7.3-min
 event 'lifecycle' for domain rhel7.3-min: Resumed Unpaused
 event 'reboot' for domain rhel7.3-min";;RedHatEnterpriseLinux7/RHEL7-88375
2483;;;;;;;;;6;5.Check the dump file:;5.# ll /var/lib/libvirt/qemu/dump total 3277004 -rw-------. 1 root root 3355651800 Apr 6 12:45 16-rhel7.3-min-2017-04-06-12:45:41;;RedHatEnterpriseLinux7/RHEL7-88375
2483;;;;;;;;;7;"6.Check the libvirtd.log:
 #cat /var/log/libvirt/libvirtd.log | grep -i panic";"6.
 2017-04-06 07:31:19.884+0000: 31818: info : qemuMonitorIOProcess:431 : QEMU_MONITOR_IO_PROCESS: mon=0x7f4ba40204b0 buf={""timestamp"": {""seconds"": 1491463879, ""microseconds"": 883996}, ""event"": ""GUEST_PANICKED"", ""data"": {""action"": ""pause""}}

 2017-04-06 07:31:19.884+0000: 31818: debug : qemuMonitorJSONIOProcessLine:193 : Line [{""timestamp"": {""seconds"": 1491463879, ""microseconds"": 883996}, ""event"": ""GUEST_PANICKED"", ""data"": {""action"": ""pause""}}]

 2017-04-06 07:31:19.884+0000: 31818: debug : virJSONValueFromString:1713 : string={""timestamp"": {""seconds"": 1491463879, ""microseconds"": 883996}, ""event"": ""GUEST_PANICKED"", ""data"": {""action"": ""pause""}}

 2017-04-06 07:31:19.884+0000: 31818: info : qemuMonitorJSONIOProcessLine:208 : QEMU_MONITOR_RECV_EVENT: mon=0x7f4ba40204b0 event={""timestamp"": {""seconds"": 1491463879, ""microseconds"": 883996}, ""event"": ""GUEST_PANICKED"", ""data"": {""action"": ""pause""}}

 2017-04-06 07:31:19.885+0000: 31818: debug : qemuMonitorEmitEvent:1297 : mon=0x7f4ba40204b0 event=GUEST_PANICKED 2017-04-06 07:31:19.885+0000: 31818: debug : qemuMonitorJSONIOProcessEvent:179 : handle GUEST_PANICKED handler=0x7f4b906fcfa0 data=0x56438409b3e0

 2017-04-06 07:31:19.885+0000: 31818: debug : qemuMonitorEmitGuestPanic:1365 : mon=0x7f4ba40204b0
 2017-04-06 07:31:19.886+0000: 1078: debug : processGuestPanicEvent:4037 : Preserving lock state '<null>'";;RedHatEnterpriseLinux7/RHEL7-88375
2483;;;;;;;;;8;"7. Check the libvirtd.log:
 #cat /var/log/libvirt/ligvirtd.log | grep -i ""hyper-v""
 .";"Output:
 ...
 017-05-26 05:19:50.716+0000: 1494: info : qemuMonitorJSONIOProcessLine:208 : QEMU_MONITOR_RECV_EVENT: mon=0x7fb440019370 event={""timestamp"": {""seconds"": 1495775990, ""microseconds"": 716598}, ""event"": ""GUEST_PANICKED"", ""data"": {""action"": ""pause"", ""info"": {""arg5"": 0, ""arg4"": 0, ""arg3"": 0, ""arg2"": 0, ""arg1"": 226, ""type"": ""hyper-v""}}}

 2017-05-26 05:19:50.716+0000: 1494: debug : virJSONValueToString:1904 : result={""action"":""pause"",""info"":{""arg5"":0,""arg4"":0,""arg3"":0,""arg2"":0,""arg1"":226,""type"":""hyper-v""}}

 2017-05-26 05:19:50.718+0000: 16474: debug : qemuDomainLogAppendMessage:4672 : Append log message (vm='rhel7.3-min' message='2017-05-26 05:19:50.718+0000: panic hyper-v: arg1='0xe2', arg2='0x0', arg3='0x0', arg4='0x0', arg5='0x0'";;RedHatEnterpriseLinux7/RHEL7-88375
2483;;;;;;;;;9;"8.Check the qemu log:
 #cat /var/log/libvirt/qemu/win2k12.log | grep -i ""hyper-v""
";"Output:
 2017-05-25 09:17:45.642+0000: panic hyper-v: arg1='0xe2', arg2='0x0', arg3='0x0', arg4='0x0', arg5='0x0'";;RedHatEnterpriseLinux7/RHEL7-88375
2483;;;;;;;;;10;"9.Please repeat step 3-5 for other on_crash event: coredump-destroy, coredump-restart, destroy, restart, preserve
";"All the on_crash event works as expected.

 ""virsh event"" output for destroy and coredump-destroy:
 event 'lifecycle' for domain foo: Crashed Panicked
 event 'lifecycle' for domain foo: Stopped Crashed

""virsh event"" output for restart:
event 'lifecycle' for domain foo: Crashed Panicked
 event 'reboot' for domain foo
 event 'lifecycle' for domain foo: Resumed Unpaused
 event 'reboot' for domain foo

 ""virsh event"" output for preserve:
 event 'lifecycle' for domain foo: Crashed Panicked

 Guest status and coredump for coredump-destroy:
 guest coredump file is generated;
 guest is destroyed after it is crashed

 Guest status and coredump for destroy:
 No guest coredump file is generated;
 guest is destroyed after it is crashed.

 Guest status and coredump for restart:
 No guest coredump file is generated;
 guest is restarted after it is crashed.

 Guest status and coredump for preserve:
 No guest coredump file is generated;
 guest stays crashed.

 ";;RedHatEnterpriseLinux7/RHEL7-88375
2484;RHEL7-88491;"[non-root user] Check qemu log when  stdio handler is ""file""";For non-root user, if set stdio_handler=file, previous qemu log will be cleared when guest starts.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Log in as non-root user.
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-88491
2484;;;;;;;;;2;"Set stdio handler to file fo the non-root user:
 
 $ vim ~/.config/libvirt/qemu.conf:
 stdio_handler = ""file""";​​;;RedHatEnterpriseLinux7/RHEL7-88491
2484;;;;;;;;;3;"Start a guest to produce some qemu log:
 $ virsh start rhel7.2
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-88491
2484;;;;;;;;;4;"Check virtlogd process:
 $ ps aux|grep virtlogd
​​";No virtlogd process exist in non-root session;;RedHatEnterpriseLinux7/RHEL7-88491
2484;;;;;;;;;5;"Check the existence of qemu log file:
 $ ls ~/.cache/libvirt/qemu/log";"The qemu log file exists.
 
 Output:
 rhel7.2.log";;RedHatEnterpriseLinux7/RHEL7-88491
2484;;;;;;;;;6;"Check the content of qemu log file:
 $cat ~/.cache/libvirt/qemu/log/rhel7.2.log";The qemu log are written into log file correctly;;RedHatEnterpriseLinux7/RHEL7-88491
2484;;;;;;;;;7;"Destroy & start the guest again.
 $ virsh destroy rhel7.2
 
 $virsh start rhel7.2";​​;;RedHatEnterpriseLinux7/RHEL7-88491
2484;;;;;;;;;8;"Check qemu log file:
 $ cat ~/.cache/libvirt/qemu/rhel7.2.log";The log file only contains log for the second start. The previous log is cleared.;;RedHatEnterpriseLinux7/RHEL7-88491
2485;RHEL7-88635;[svirt][config]Check libvirtd create mounted file in the /dev in the qemu process's namespace-- bug1431112 1449510;"When there is a file mounted in the host's /dev dir, start a guest, the file can be mounted correctly in the /dev of the qemu process's namespace
";Yan Fu (yafu);High;Positive;Not Automated;;1; 1.touch /mnt/demo;"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-88635
2485;;;;;;;;;2;2.touch /dev/demo;"
​​";;RedHatEnterpriseLinux7/RHEL7-88635
2485;;;;;;;;;3;3.mount --bind /mnt/demo /dev/demo;"
​​";;RedHatEnterpriseLinux7/RHEL7-88635
2485;;;;;;;;;4;"4.Start a guest and the guest can start correctly:
 #virsh start rhel7.3";"4.The guest start correctly:
 # virsh list
  Id    Name                           State
 ----------------------------------------------------
  38    rhel7.3-min                    running
 
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-88635
2485;;;;;;;;;5;"5.Compile the ns_exec.c in the attachment:
 #gcc -o ns_exec ns_exec.c";"
​​";;RedHatEnterpriseLinux7/RHEL7-88635
2485;;;;;;;;;6;"6.Create a script to check the files in the /dev dir:
 #vim check.sh
 #!/bin/bash

 ls -lRZ /dev
 
 #chmod a+x check.sh";"
​​";;RedHatEnterpriseLinux7/RHEL7-88635
2485;;;;;;;;;7;"7.Check the /dev/demo is mounted correctly in the /dev of the qemu process's namespace:
 #./ns_exec /proc/`pidof qemu-kvm`/ns/mnt `pwd`/check.sh | grep -i demo";"7.
 Output:
 -rw-r--r--. root root unconfined_u:object_r:etc_runtime_t:s0 demo";;RedHatEnterpriseLinux7/RHEL7-88635
2485;;;;;;;;;8;"8.Repeat 1-7 other mounted point type:
 socket,pipe,block file,link
​​";"8.Libvirtd can create the mounted point correctly in the qemu namespace
​​";;RedHatEnterpriseLinux7/RHEL7-88635
2486;RHEL7-88646;[virtlogd] Check opened pipes between qemu process and virtlogd when guest is running and destroyed;"When guest is running, there are pipes between qemu process and virtlogd process;
When guest is shutdown/destroyed, the pipes between virtlogd and qemu process are closed";Fangge Jin (fjin);Medium;Positive;Automated;;1;"Set virtlogd as the log handler:
 
 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.
 
 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 
 
 (Re)start libvirtd
 # systemctl restart libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-88646
2486;;;;;;;;;2;"Start a guest
 # virsh start rhel7.2
";​​;;RedHatEnterpriseLinux7/RHEL7-88646
2486;;;;;;;;;3;"Check the existence of qemu log file:
 # ls /var/log/lib/libvirt/qemu/


";"The log file exists:

 Output:
 rhel7.2.log
";;RedHatEnterpriseLinux7/RHEL7-88646
2486;;;;;;;;;4;"Check opened pipes by virtlogd and qemu process:
 1) # lsof -p `pidof virtlogd`|grep pipe
 2) # lsof -p `pidof qemu-kvm` | grep pipe

";"There are same pipe NODE between virtlogd and qemu-kvm.

 Output:
 1)
 ......
 virtlogd 9193 root   11r  FIFO                0,8       0t0   682652 pipe
 ......

 2)
 ......
 qemu-kvm 22558 qemu    1w     FIFO                0,8        0t0    682652 pipe
 qemu-kvm 22558 qemu    2w     FIFO                0,8        0t0    682652 pipe
 ......
";;RedHatEnterpriseLinux7/RHEL7-88646
2486;;;;;;;;;5;"Destroy guest
 # virsh destroy rhel7.2
"; ;;RedHatEnterpriseLinux7/RHEL7-88646
2486;;;;;;;;;6;"Check the opened FDs(file descriptors) :
 # lsof|grep pipe|grep 682652
";"No output.
 (this means the opened FDs between qemu-kvm and virtlogd are closed after guest is destroy)";;RedHatEnterpriseLinux7/RHEL7-88646
2487;RHEL7-88705;AZURE-TC:[Network]Assign multiple IP to one NIC;AZURE-TC:[VMBUS]Verify interrupt distribution among all CPUs    ;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"1. Prepare a VM in Azure (ARM mode only)
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-88705
2487;;;;;;;;;2;"2. On Azure portal, Virtual Machine -> Network Interface -> IP Configurations -> Add, add a secondary IP(static, such as 172.16.0.5, disable public IP)
 * Or use cli: # az network nic ip-config create -g walaautoarmwestus -n wala75publicip1 --private-ip-address 172.16.0.5 --nic-name walaNIC01
​​";​​;;RedHatEnterpriseLinux7/RHEL7-88705
2487;;;;;;;;;3;"3. Inside the VM, vi /etc/sysconfig/network-scripts/ifcfg-eth0:0
 DEVICE=eth0:0
 ONBOOT=yes
 IPADDR=172.16.0.5
 NETMASK=255.255.255.0
 Then restart network service
 Check if the secondary IP address is added
​​";"# ifconfig eth0:0
 eth0:0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 172.16.0.5  netmask 255.255.255.0  broadcast 172.16.0.255
         ether 00:0d:3a:31:aa:31  txqueuelen 1000  (Ethernet)
​​";;RedHatEnterpriseLinux7/RHEL7-88705
2487;;;;;;;;;4;"4. Ping another VM in the same VNet from this IP
 # ping -I 172.16.0.5 VM2
​​";"Can connect to VM2
 
​​";;RedHatEnterpriseLinux7/RHEL7-88705
2487;;;;;;;;;5;config ;​​;;RedHatEnterpriseLinux7/RHEL7-88705
2488;RHEL7-88708;AZURE-TC:[Network]Create a VM with 8 NICs;AZURE-TC:[Network]Create a VM with multiple NICs;Yuxin Sun (yuxisun);High;Positive;Manual Only;;1;"1. Prepare 8 NICs in one Virtual Network.
​​";"# for i in {1..8};do az network nic create --vnet-name walaautoarmwestus --subnet walaautoarmwestus -g walaautoarmwestus -n walaNIC0$i;done";Test Case;RedHatEnterpriseLinux7/RHEL7-88708
2488;;;;;;;;;2;"2. Create a VM(Standard_D4) in ARM mode with azure cli:
 # az vm create -g walaautoarmwestus -n wala75nic8 --image ""https://walaautoarmwestus.blob.core.windows.net/vhds/RHEL-7.5-20171130.0-wala-2.2.18-1.vhd"" --nics walaNIC0{1..8} --size Standard_D4 --use-unmanaged-disk --storage-account walaautoarmwestus --storage-container-name vhds --os-type linux --admin-username azureuser --ssh-key-value /root/.ssh/id_rsa.pub";​​;;RedHatEnterpriseLinux7/RHEL7-88708
2488;;;;;;;;;3;"3. Login, add a config file for all the 8 NICs:
 # cd /etc/sysconfig/network-scripts/
 # for i in {1..7};do cp -a ifcfg-eth0 ifcfg-eth$i;sed -i ""s/eth0/eth$i/g"" ifcfg-eth$i;done
 # for i in {1..7};do ifup eth$i;done
 Check if eth1...eth7 are up
 
​​";"All eth1...eth7 are up and can get IP address
 # ifconfig
 eth1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 172.16.0.9  netmask 255.255.255.248  broadcast 172.16.1.7
         inet6 fe80::20d:3aff:fe32:d96d  prefixlen 64  scopeid 0x20<link>
         ether 00:0d:3a:32:d9:6d  txqueuelen 1000  (Ethernet)
         RX packets 6  bytes 1106 (1.0 KiB)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 10  bytes 1332 (1.3 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
 ...
 eth7: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 172.16.0.16  netmask 255.255.255.0  broadcast 172.16.0.255
         inet6 fe80::20d:3aff:fe33:fa92  prefixlen 64  scopeid 0x20<link>
         ether 00:0d:3a:33:fa:92  txqueuelen 1000  (Ethernet)
         RX packets 2  bytes 762 (762.0 B)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 7  bytes 1122 (1.0 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
​​";;RedHatEnterpriseLinux7/RHEL7-88708
2488;;;;;;;;;4;"4. Ping another VM in the same VNet through eth7
 # ping -I eth7 VM2
​​";"Can connect to the other VM
​​";;RedHatEnterpriseLinux7/RHEL7-88708
2488;;;;;;;;;5;config ;​​;;RedHatEnterpriseLinux7/RHEL7-88708
2489;RHEL7-88753;[virtio-win][vioscsi] Install/Boot guest with GPT partition style;[virtio-win][vioscsi] Install/Boot guest with GPT partition style;Yu Wang (wyu);Medium;Positive;Not Automated;;1;" 1.install guest with system disk and data disk via ovmf (default)
 CLI:
 -drive file=/usr/share/OVMF/OVMF_CODE.secboot.fd,if=pflash,format=raw,unit=0,readonly=on -drive file=/home/whql_autotest/OVMF_VARS-install.fd,if=pflash,format=raw,unit=1 \
 -device ioh3420,bus=pcie.0,id=root1.0,slot=1 \
 -device virtio-scsi-pci,id=scsi0,bus=root1.0,num_queues=4 -drive file=OS.raw,if=none,id=drive-scsi-disk0,format=raw,serial=22,cache=none -device scsi-hd,bus=scsi0.0,drive=drive-scsi-disk0,id=scsi-disk0 \
 -device ioh3420,bus=pcie.0,id=root2.0,slot=2 \
 -device virtio-scsi-pci,id=scsi1,bus=root2.0,num_queues=4 -drive file=data.raw,if=none,id=drive-scsi-disk1,format=raw,serial=33,cache=none -device scsi-hd,bus=scsi1.0,drive=drive-scsi-disk1,id=scsi-disk1

 Note:  The num_queues value should be same with the cpu cores value,likely boot VM with -smp=4,cores=4.
";1. Guest can be installed successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-88753
2489;;;;;;;;;2;"2.check whether vioscsi.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled vioscsi.sys verifier:
    #verifier.exe /standard /driver vioscsisys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings";"2 Driver can be installed successfully 
 All the Standards flags are checked ,the verified driver fields shows ""vioscsi.sys""";;RedHatEnterpriseLinux7/RHEL7-88753
2489;;;;;;;;;3;"3 Check the logical_block_size on guest
    #fsutil fsinfo ntfsinfo c:";3.Bytes Per Sector: 512;;RedHatEnterpriseLinux7/RHEL7-88753
2489;;;;;;;;;4;"4 Check the partition style(system disk and data disk)
    disk manger --> right click disk0/1 --> properties --> Volumes
​​";"4 Check the Partition style is ""GUID Partition Table (GPT)""
​​";;RedHatEnterpriseLinux7/RHEL7-88753
2489;;;;;;;;;5;5. run crystal benchmark on system/data disk(default params );5. no bsod or hangs occurs;;RedHatEnterpriseLinux7/RHEL7-88753
2489;;;;;;;;;6;"6.install guest with system disk via ovmf
 logical_block_size=4096 and physical_block_size=4096 :
 CLI:
 drive file=/usr/share/OVMF/OVMF_CODE.secboot.fd,if=pflash,format=raw,unit=0,readonly=on -drive file=/home/whql_autotest/OVMF_VARS-install.fd,if=pflash,format=raw,unit=1 \
 -device ioh3420,bus=pcie.0,id=root1.0,slot=1 \
 -device virtio-scsi-pci,id=scsi0,bus=root1.0,num_queues=4 -drive file=OS.raw,if=none,id=drive-scsi-disk0,format=raw,serial=22,cache=none -device scsi-hd,bus=scsi0.0,drive=drive-scsi-disk0,id=scsi-disk0,logical_block_size=4096,physical_block_size=4096
";6. Guest can be installed successfully;;RedHatEnterpriseLinux7/RHEL7-88753
2489;;;;;;;;;7;"7 Check the logical_block_size on guest
    #fsutil fsinfo ntfsinfo c:";7.Bytes Per Sector: 4096;;RedHatEnterpriseLinux7/RHEL7-88753
2489;;;;;;;;;8;"8 Check the partition style
    disk manger --> right click disk0 --> properties --> Volumes";"8 Check the Partition style is ""GUID Partition Table (GPT)""";;RedHatEnterpriseLinux7/RHEL7-88753
2489;;;;;;;;;9;9. run crystal benchmark on system/data disk(default params );9. no bsod or hangs occurs;;RedHatEnterpriseLinux7/RHEL7-88753
2490;RHEL7-88754;[virtio-win][vioscsi] Boot guest with MBR partition style and data disk with GPT style;[virtio-win][vioscsi] Boot guest with MBR partition style and data disk with GPT style;Yu Wang (wyu);Medium;Positive;Not Automated;;1;"1.start VM with virtio-scsi-pci(both system disk and data disk):
 CLI:
 -device virtio-scsi-pci,id=scsi0,num_queues=4 -drive file=OS.raw,if=none,id=drive-scsi-disk0,format=raw,serial=22,cache=none -device scsi-hd,bus=scsi0.0,drive=drive-scsi-disk0,id=scsi-disk0
 -device virtio-scsi-pci,id=scsi1,num_queues=4 -drive file=data.raw,if=none,id=drive-scsi-disk1,format=raw,serial=33,cache=none -device scsi-hd,bus=scsi1.0,drive=drive-scsi-disk1,id=scsi-disk1 
 
 Note:  The num_queues value should be same with the cpu cores value,likely boot VM with -smp=4,cores=4.
​​";1. Guest can be boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-88754
2490;;;;;;;;;2;" 2.check whether vioscsi.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled vioscsi.sys verifier:
    #verifier.exe /standard /driver vioscsi.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings ";"Driver can be installed successfully 
 All the Standards flags are checked ,the verified driver fields shows ""vioscsi.sys""";;RedHatEnterpriseLinux7/RHEL7-88754
2490;;;;;;;;;3;"3. change/initialize data disk to GPT style.
 If your data disk is never initialized, follow initialize steps, if have been initialized , pls change to GPT.
 change the data disk in disk manager
    1) start-->run -->diskmgmt.msc
    2) right click the data disk(eg volume(D:)) --> delete volume --> ok
    3) right click this disk(eg disk1) --> convert to GTP Disk
 Initialize the data disks in disk manager    
     1) start-->run -->diskmgmt.msc
     2) Initialize Disk--> select GPT --> OK
     3) Right click disk 1 --> New Simple Volume --> Next --> Finish
​​";"3 change disk without error
​​";;RedHatEnterpriseLinux7/RHEL7-88754
2490;;;;;;;;;4;"4. run crystal benchmark on system/data disk(default params )
​​";4. no bsod or hangs occurs;;RedHatEnterpriseLinux7/RHEL7-88754
2490;;;;;;;;;5;"6 Check the partition style for datadisk
    disk manger --> right click disk1 --> properties --> Volumes";"6 Check the Partition style is ""GUID Partition Table (GPT)""";;RedHatEnterpriseLinux7/RHEL7-88754
2491;RHEL7-88774;[Network connections] reconnect tap devices after libvirtd restarted;"These patches permit the situation to be remedied by just restarting libvirtd - when the hypervisor drivers are notifying the network drivers of each connection, the network can retrieve the current ""master"" for the tap device and compare it to the network's bridge device. If they don't match, then it disconnects the tap from any incorrect bridge and connects to the correct bridge.";Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"1. start a guest using default network
 # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     yes           yes
 
 # virsh dumpxml rhel7 | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:c2:66:40'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # brctl show
​​";"bridge name    bridge id        STP enabled    interfaces
 virbr0        8000.52540097bdf4    yes        virbr0-nic
                             vnet0";Test Case;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;2;"2. check the network function works well on guest:
 # ping www.baidu.com -c 2";ping succeed;;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;3;"3. restart libvirtd service 
 # systemctl restart libvirtd.service
 
 check the network function on guest after libvirtd restart by # ping -c 2 www.baidu.com";ping succeed;;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;4;"4. check the tap device still connected to the bridge and the network function still works
 # brctl show
​​";"bridge name    bridge id        STP enabled    interfaces
 virbr0        8000.52540097bdf4    yes        virbr0-nic
                             vnet0";;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;5;"5. live attach, then restart
 
 # virsh attach-interface rhel7 network default 
 Interface attached successfully
 
 # service libvirtd restart
 Redirecting to /bin/systemctl restart libvirtd.service
 
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;6;"6. vnet0 and vnet1 still connected after restart
 # brctl show ";"bridge name    bridge id        STP enabled    interfaces
 virbr0        8000.52540097bdf4    yes        virbr0-nic
                             vnet0
                             vnet1";;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;7;7. # virsh net-dumpxml default;"<network connections='2'>
 ....";;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;8;Test with bridge type network;​​;;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;9;"1. create a bridge and connect an interface to it
 # brctl show
 bridge name    bridge id        STP enabled    interfaces
 br0        8000.00247e054232    no        enp0s25
​​";​​;;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;10;"2. start a guest connecting to the bridge
 # virsh dumpxml rhel7 | grep /interface -B7
     <interface type='bridge'>
       <mac address='52:54:00:c2:66:40'/>
       <source bridge='br0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;11;"3. # systemctl restart libvirtd.service
​​";​​;;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;12;"4. check the vnet0 still connected to br0
 # brctl show";"bridge name    bridge id        STP enabled    interfaces
 br0        8000.00247e054232    no        enp0s25
                             vnet0";;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;13;"5. live attach, then restart
 # virsh attach-interface rhel7 bridge br0 
 Interface attached successfully
 
 
 
 
 
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;14;6. # brctl show;"bridge name    bridge id        STP enabled    interfaces
 br0        8000.00247e054232    no        enp0s25
                             vnet0
                             vnet1";;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;15;"7. restart libvirtd and check the tap device still connected
 # systemctl restart libvirtd
 
 # brctl show
​​";"bridge name    bridge id        STP enabled    interfaces
 br0        8000.00247e054232    no        enp0s25
                             vnet0
                             vnet1";;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;16;Test with openvswitch;​​;;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;17;"prepare the env
 1. install openvswitch
 2. # ovs-vsctl add-br ovsbr0
 # ovs-vsctl add-port ovsbr enp0s25
 Then up the bridge, and apply ip address by dhclient.
 # ifconfig ovsbr up
 # dhclient ovsbr

 #ovs-vsctl show
 72526015-fe77-40ce-95a4-0a9b955926be
 Bridge ovsbr
 Port ovsbr
 Interface ovsbr
 type: internal
 Port ""enp0s25""
 Interface ""enp0s25""
";​​;;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;18;"3. define a network
 # virsh net-dumpxml ovs-net --inactive
 <network>
   <name>ovs-net</name>
   <uuid>78316406-5188-408b-9d74-a048cb8d6216</uuid>
   <forward mode='bridge'/>
   <bridge name='ovsbr0'/>
   <virtualport type='openvswitch'/>
 </network>
 
 4. prepare a vm using this network
 # virsh dumpxml rhel7 | grep /interface -B5
     <interface type='network'>
       <mac address='52:54:00:c2:66:40'/>
       <source network='ovs-net'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;19;"5. start the network and guest, check the tap device connected
 
 # ovs-vsctl show
 
 => check the vnet0 connected
​​";"34660744-240e-436c-82b4-61eb764ccc71
     Bridge ""ovsbr0""
         Port ""ovsbr0""
             Interface ""ovsbr0""
                 type: internal
         Port ""enp0s25""
             Interface ""enp0s25""
         Port ""vnet0""
             Interface ""vnet0""
     ovs_version: ""2.6.1""";;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;20;"6. restart libvirtd then check the network fucntion still works
 # sysemctl restart libvirtd
 
 # ovs-vsctl show
 
​​";"34660744-240e-436c-82b4-61eb764ccc71
     Bridge ""ovsbr0""
         Port ""ovsbr0""
             Interface ""ovsbr0""
                 type: internal
         Port ""vnet0""
             Interface ""vnet0""
         Port ""enp0s25""
             Interface ""enp0s25""
     ovs_version: ""2.6.1""
​​";;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;21;7. # virsh net-dumpxml ovs-net;"<network connections='1'>
   <name>ovs-net</name>
   <uuid>78316406-5188-408b-9d74-a048cb8d6216</uuid>
   <forward mode='bridge'/>
   <bridge name='ovsbr0'/>
   <virtualport type='openvswitch'/>
 </network>";;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;22;"directly use openvswitch without defining network
​​";​​;;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;23;"1. # virsh dumpxml rhel7 | grep /interface 
 ..
    <interface type='bridge'>
       <mac address='52:54:00:b2:19:66'/>
       <source bridge='ovsbr0'/>
       <virtualport type='openvswitch'>
         <parameters interfaceid='09b11c53-8b5c-4eeb-8f00-d84eaa0aaa4f' profileid='menial'/>
       </virtualport>
       <target dev='vnet1'/>
       <model type='rtl8139'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
     </interface>
 ...
 # ovs-vsctl show
​​";"34660744-240e-436c-82b4-61eb764ccc71
     Bridge ""ovsbr0""
         Port ""ovsbr0""
             Interface ""ovsbr0""
                 type: internal
         Port ""enp0s25""
             Interface ""enp0s25""
         Port ""vnet1""
             Interface ""vnet1""
         Port ""vnet0""
             Interface ""vnet0""
     ovs_version: ""2.6.1""";;RedHatEnterpriseLinux7/RHEL7-88774
2491;;;;;;;;;24;"2. # service libvirtd restart
 Redirecting to /bin/systemctl restart libvirtd.service
 
 # ovs-vsctl show";"34660744-240e-436c-82b4-61eb764ccc71
     Bridge ""ovsbr0""
         Port ""ovsbr0""
             Interface ""ovsbr0""
                 type: internal
         Port ""enp0s25""
             Interface ""enp0s25""
         Port ""vnet1""
             Interface ""vnet1""
         Port ""vnet0""
             Interface ""vnet0""
     ovs_version: ""2.6.1";;RedHatEnterpriseLinux7/RHEL7-88774
2492;RHEL7-88782;[virtual desktop][vnc]qemu should listen on both ipv4 and ipv6 when using vnc;"qemu should listen on both ipv4 and ipv6 when using vnc
";Zhiyi Guo (zhguo);Medium;Positive;Manual Only;;1;" Use qemu cli: /usr/libexec/qemu-kvm -vnc :1 and check ip protocol used by qemu-kvm for vnc:
 # netstat -antpu|grep 5901";" Qemu should use both ipv6 and ipv4 for vnc.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-88782
2493;RHEL7-88789;WALA-TC: [General] Verify AutoUpdate is enabled;WALA-TC: [General] Verify AutoUpdate is enabled;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"1. Prepare a VM. Install the WALA rpm package.
 Check the AutoUpdate.Enabled value";"# grep -r ""AutoUpdate.Enabled"" /etc/waagent.conf
 # AutoUpdate.Enabled=y";Test Case;RedHatEnterpriseLinux7/RHEL7-88789
2493;;;;;;;;;2;config;​​;;RedHatEnterpriseLinux7/RHEL7-88789
2494;RHEL7-88802;[vgpu][nvidia]nbody test against nvidia vgpu;"gpgpu test for nvidia vgpu
";Zhiyi Guo (zhguo);Critical;Positive;Manual Only;;1;Boot guest with vgpu and install cuda8.0 toolkit inside guest;Guest can boot with vgpu and cuda can be installed without complain;Test Case;RedHatEnterpriseLinux7/RHEL7-88802
2494;;;;;;;;;2;Run nbody test program for 10 minutes;nbody can be launched successfully, performace data represented(show as FPS) from nbody is stable, no hang/crash issue happen from guest/host;;RedHatEnterpriseLinux7/RHEL7-88802
2494;;;;;;;;;3;Shutdown guest and destroy the vgpu;Guest can shutdown normally and vgpu can be destroyed;;RedHatEnterpriseLinux7/RHEL7-88802
2495;RHEL7-88826;[Virtual Networks] enable ipv6 in network without set accept_ra to 2 - update in rhel7.4;"When enabling IPv6 on all interfaces, we may get the host Router Advertisement routes discarded. To avoid this, the user needs to set accept_ra to 2 for the interfaces with such route
 See https://www.kernel.org/doc/Documentation/networking/ip-sysctl.txt on this topic
 To avoid user mistakenly losing routes on their hosts, check accept_ra values before enabling IPv6 forwarding. If a RA route is  detected, but neither the corresponding device nor global accept_ra is set to 2, the network will fail to start.
only check for IPv6 RA routes when the network has an IPv6 address if IPv6 forwarding is going to be turned on, and that will only happen if the network has an IPv6 address, 
";Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"***make sure your host can obtain ipv6 address.***
 host have one network interface enp0s25
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-88826
2495;;;;;;;;;2;"1.# cat /proc/sys/net/ipv6/conf/enp0s25/accept_ra
​​";1;;RedHatEnterpriseLinux7/RHEL7-88826
2495;;;;;;;;;3;"2. edit the network xml to include ipv6 section
 # virsh net-dumpxml default
 <network>
   <name>default</name>
   <uuid>56a8965e-4fbb-46b4-84f4-c46cddf9bdfc</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:97:bd:f4'/>
   <ip family='ipv6' address='2001:db8:ca2:6::1' prefix='64'>
   </ip>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
     </dhcp>
   </ip>
 </network>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-88826
2495;;;;;;;;;4;"3.  # virsh net-start default
 
​​";"error: Failed to start network default
 error: internal error: Check the host setup: enabling IPv6 forwarding with RA routes without accept_ra set to 2 is likely to cause routes loss. Interfaces to look at: enp0s25";;RedHatEnterpriseLinux7/RHEL7-88826
2495;;;;;;;;;5;"4. # echo 2 > /proc/sys/net/ipv6/conf/enp0s25/accept_ra
 
 # cat /proc/sys/net/ipv6/conf/enp0s25/accept_ra
​​";2;;RedHatEnterpriseLinux7/RHEL7-88826
2495;;;;;;;;;6;"5.# virsh net-start default
 Network default started";with the accept_ra set to 2, the network enable ipv6 can start up;;RedHatEnterpriseLinux7/RHEL7-88826
2496;RHEL7-88833;[model type] attach e1000e or virtio model type interface to guest with q35 machine type;"The e1000e is an emulated network device based on the Intel 82574 present in qemu 2.7.0 and later. Among other differences from the e1000, it presents itself as a PCIe device rather than legacy PCI in vm with q35 machine type.
virtio modle type is attached to pcie on q35 guest, too. Do not set the address in the xml, and check the address get automatically is pcie address not pci address
 Bug 1330024 - Under q35 libvirt auto-plugs virtio devices into pci-bridge
 Bug 1343094 - e1000e network device should be assigned an address on a PCIe controller rather than legacy PCI 
";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"****edit****
 1. edit the guest's xml with e1000e interface, save and check xml, it will be attached to pcie slot
 # virsh edit rhel7.3-q35
 ...
 <interface type='network'>
       <mac address='52:54:00:42:9d:db'/>
       <source network='default'/>
       <model type='e1000e'/>
     </interface>
 ...====> save
 # virsh dumpxml rhel7.3-q35
​​";"  <controller type='pci' index='5' model='pcie-root-port'>
       <model name='ioh3420'/>
       <target chassis='5' port='0x12'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x2'/>
     </controller>
   ......
     <interface type='network'>
       <mac address='52:54:00:42:9d:db'/>
       <source network='default'/>
       <model type='e1000e'/>
       <address type='pci' domain='0x0000' bus='0x05' slot='0x00' function='0x0'/>
     </interface>
 
 (check the e1000e interface is plugged into pcie bus, not pci)";Test Case;RedHatEnterpriseLinux7/RHEL7-88833
2496;;;;;;;;;2;"2. start the guest and check network function
 on guest # ping www.baidu.com";"guest can get ip and ping outside successfully
 
 (ping succeed)";;RedHatEnterpriseLinux7/RHEL7-88833
2496;;;;;;;;;3;"****attach-device****
 3. # cat net.xml
     <interface type='network'>
       <source network='default'/>
       <model type='e1000e'/>
     </interface>
 # virsh attach-device rhel7.3-q35 net.xml
 ===> check the device add to pcie slot
 
 # virsh dumpxml  rhel7.3-q35
​​";check the device add to pcie slot not pci slot;;RedHatEnterpriseLinux7/RHEL7-88833
2496;;;;;;;;;4;"****attach-interface->save and restore*****
 4. # virsh attach-interface rhel7.3-q35 network default --model e1000e";check it attached to pcie slot;;RedHatEnterpriseLinux7/RHEL7-88833
2496;;;;;;;;;5;"5. # virsh save rhel7.3-q35 rhel.save
 # virsh restore rhel.save
​​";the interface exists and connected to right bus;;RedHatEnterpriseLinux7/RHEL7-88833
2496;;;;;;;;;6;6.  replace the e1000e to virtio, redo step 1~5;​​;;RedHatEnterpriseLinux7/RHEL7-88833
2497;RHEL7-88864;[cpu][vpmu] Guest event sample;"Guest event sample
";Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;1) Boot guest with, -cpu $cpu_supported # qemu-kvm ... \ -cpu $cpu_supported \ ...;1)Guest boot up without any error;Test Case;RedHatEnterpriseLinux7/RHEL7-88864
2497;;;;;;;;;2;2) Guest recording In Guest, For hw_event in command ' perf list hw ' output. do this perf record -e $hw_event -o $hw_event.report_log ping -f -c 100000 127.0.0.1' done;"2) After step 2 , all recording finishe, there is record files generated. These files could be found by command ""ls *.report_log""";;RedHatEnterpriseLinux7/RHEL7-88864
2497;;;;;;;;;3;"3) Guest report For log in ""ls *.report_log"" do this perf report -i $log press ""q"" to exit the report display done";3) For each event, we could see the sample result.;;RedHatEnterpriseLinux7/RHEL7-88864
2498;RHEL7-88865;[cpu][vpmu] Check instructions between guest and host;Check instructions between host and guest;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;"1) boot guest with ""-cpu $cpu_supported"", login into guest, see if guest has the same cpu model as host.";"1) cat /proc/cpuinfo should see the same cpu model as host. and, for x86, can see ""arch_perfmon"" flag.";Test Case;RedHatEnterpriseLinux7/RHEL7-88865
2498;;;;;;;;;2;2) run the below program on both host && guest, see if use same cpu cycles. perf stat -e instructions:u ./$test_program Note: need to compile from assemble to executable, pls see the source code;2) both host && guest should report almost same.;;RedHatEnterpriseLinux7/RHEL7-88865
2499;RHEL7-88866;[cpu][vpmu] unit test for vPMU(X86 only);Run kvm unit test on intel host;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;"Note: Make sure you have group ""Development Tools"" installed
 Compile kvm-unit-tests
 1) git clone git://git.kernel.org/pub/scm/virt/kvm/kvm-unit-tests
 2) cd kvm-unit-tests; ./configure ; make
 
 Run pmu part from kvm-unit-tests:
 ./x86-run x86/pmu.flat -cpu host,enforce";After pmu test finish, no test failures prompt in test result;Test Case;RedHatEnterpriseLinux7/RHEL7-88866
2500;RHEL7-88867;[cpu][vpmu] booting guest on AMD host;booting guest on AMD host;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;Boot rhel7 guest on rhel7 host(for details in Bug 928284);" at the beginning of booting guest,will see error info:""Failed to access perfctr msr (MSR c0010001 is ffffffffffffffff)"". (wait for good output from bug 928284)";Test Case;RedHatEnterpriseLinux7/RHEL7-88867
2501;RHEL7-88874;[cpu][ple/pf and directed yield]dbench benchmark compare performance with enable/disabling PLE;Load guest with CPU 200% overcommit, test performance with qpid-latency-test Verify performance is improved with PLE enabled.;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;"1.install dbench benchmark 1.1 git clone git://git.samba.org/sahlberg/dbench.git dbench 1.2 yum install libtoo* automake* 1.3 install popt-devel(brewweb) 1.4 compile cd dbench ./autogen.sh ./configure make make install 1.5 touch /usr/local/share/client.txt 
 2. check PLE if it is enabled in qemu-kvm by default
 # cat /sys/module/kvm_intel/parameters/ple_gap 3. boot guest with nvcpus(nvcpus == npcpus e.g host have 8 cpus. nvcpus=8) 
 4. run dbench tool inside linux guest mount -t tmpfs -o size=1G tmpfs /mnt dbench -D /mnt -t 60 32 
 5. collect and save test result of step 2 via shell script 
 6.disable PLE load kvm model with ple_gap=0 # cat /sys/module/kvm_intel/parameters/ple_gap
 7. run dbench tool inside linux guest again mount -t tmpfs -o size=1G tmpfs /mnt dbench -D /mnt -t 60 32 -c /usr/local/share/doc/dbench/loadfiles/client.txt 
 8. collect and save execute result of step5 via shell script 
 9. compare result between step5 and step8";"after step 2 128 after step6 0 after step4 and step7 seems this result below: # dbench -D /mnt -t 60 32 -c /usr/local/share/doc/dbench/loadfiles/client.txt dbench version 4.00 - Copyright Andrew Tridgell 1999-2004 Running for 60 seconds with load '/usr/local/share/doc/dbench/loadfiles/client.txt' and minimum warmup 12 secs 31 of 32 processes prepared for launch 0 sec 32 of 32 processes prepared for launch 0 sec
 releasing clients 32 10218 2113.32 MB/sec warmup 1 sec latency 54.152 ms 32 21466 2046.58 MB/sec warmup 2 sec latency 53.112 ms 32 32745 2006.35 MB/sec warmup 3 sec latency 52.173 ms 32 44124 1989.02 MB/sec warmup 4 sec latency 55.147 ms 32 55511 1979.62 MB/sec warmup 5 sec latency 56.118 ms 32 66848 1980.22 MB/sec warmup 6 sec latency 51.088 ms 32 78145 1979.71 MB/sec warmup 7 sec latency 55.150 ms 32 89456 1974.15 MB/sec warmup 8 sec latency 54.120 ms 32 100827 1970.70 MB/sec warmup 9 sec latency 58.087 ms 32 112154 1968.25 MB/sec warmup 10 sec latency 56.062 ms 32 123455 1969.23 MB/sec warmup 11 sec latency 53.067 ms 32 146038 1941.34 MB/sec execute 1 sec latency 57.124 ms 32 157393 1944.14 MB/sec execute 2 sec latency 54.189 ms 32 168669 1944.97 MB/sec execute 3 sec latency 55.124 ms 32 179942 1954.35 MB/sec execute 4 sec latency 54.069 ms 32 191223 1950.15 MB/sec execute 5 sec latency 55.095 ms 32 202525 1948.62 MB/sec execute 6 sec latency 58.121 ms 32 213922 1945.35 MB/sec execute 7 sec latency 56.074 ms 32 225204 1948.64 MB/sec execute 8 sec latency 53.084 ms 32 236482 1950.96 MB/sec execute 9 sec latency 55.048 ms 32 247736 1950.90 MB/sec execute 10 sec latency 54.105 ms 32 259055 1949.18 MB/sec execute 11 sec latency 59.086 ms 32 270426 1947.40 MB/sec execute 12 sec latency 56.057 ms 32 281737 1948.98 MB/sec execute 13 sec latency 53.108 ms 32 292998 1950.47 MB/sec execute 14 sec latency 54.052 ms 32 304258 1950.42 MB/sec execute 15 sec latency 57.075 ms 32 315593 1950.16 MB/sec execute 16 sec latency 57.095 ms 32 326946 1948.71 MB/sec execute 17 sec latency 54.144 ms 32 338257 1949.47 MB/sec execute 18 sec latency 54.086 ms 32 349533 1950.32 MB/sec execute 19 sec latency 56.071 ms 32 360812 1949.97 MB/sec execute 20 sec latency 54.096 ms 32 372112 1950.03 MB/sec execute 21 sec latency 54.128 ms 32 383423 1948.89 MB/sec execute 22 sec latency 52.055 ms 32 394682 1948.95 MB/sec execute 23 sec latency 53.078 ms 32 405954 1949.22 MB/sec execute 24 sec latency 58.101 ms 32 417251 1949.08 MB/sec execute 25 sec latency 56.044 ms 32 428533 1948.55 MB/sec execute 26 sec latency 54.085 ms 32 439827 1949.03 MB/sec execute 27 sec latency 57.544 ms 32 451110 1948.74 MB/sec execute 28 sec latency 57.084 ms 32 460829 1953.60 MB/sec execute 29 sec latency 52.083 ms 32 471631 1954.93 MB/sec execute 30 sec latency 56.099 ms 32 482790 1954.24 MB/sec execute 31 sec latency 54.184 ms 32 493981 1953.19 MB/sec execute 32 sec latency 54.219 ms 32 505169 1952.61 MB/sec execute 33 sec latency 62.115 ms 32 516366 1951.86 MB/sec execute 34 sec latency 54.092 ms 32 527569 1951.37 MB/sec execute 35 sec latency 60.065 ms 32 538778 1950.98 MB/sec execute 36 sec latency 52.094 ms 32 549962 1950.40 MB/sec execute 37 sec latency 56.185 ms 32 560731 1947.84 MB/sec execute 38 sec latency 76.107 ms 32 571922 1947.25 MB/sec execute 39 sec latency 54.146 ms 32 583086 1946.93 MB/sec execute 40 sec latency 55.097 ms 32 594283 1946.57 MB/sec execute 41 sec latency 53.064 ms 32 605459 1946.34 MB/sec execute 42 sec latency 57.090 ms 32 616644 1945.80 MB/sec execute 43 sec latency 55.100 ms 32 627828 1945.28 MB/sec execute 44 sec latency 58.069 ms 32 639010 1944.60 MB/sec execute 45 sec latency 53.059 ms 32 650192 1944.47 MB/sec execute 46 sec latency 58.085 ms 32 661351 1944.39 MB/sec execute 47 sec latency 54.114 ms 32 672514 1944.08 MB/sec execute 48 sec latency 52.141 ms 32 683686 1943.57 MB/sec execute 49 sec latency 52.143 ms 32 694877 1943.17 MB/sec execute 50 sec latency 57.075 ms 32 706100 1942.96 MB/sec execute 51 sec latency 53.106 ms 32 717277 1942.67 MB/sec execute 52 sec latency 53.060 ms 32 728458 1942.52 MB/sec execute 53 sec latency 54.104 ms 32 739616 1942.37 MB/sec execute 54 sec latency 53.128 ms 32 750806 1941.89 MB/sec execute 55 sec latency 58.092 ms 32 762047 1941.68 MB/sec execute 56 sec latency 53.088 ms 32 773262 1941.76 MB/sec execute 57 sec latency 58.082 ms 32 784428 1941.65 MB/sec execute 58 sec latency 55.102 ms 32 795625 1941.31 MB/sec execute 59 sec latency 55.072 ms 32 cleanup 60 sec 0 cleanup 60 sec Operation Count AvgLat MaxLat -------------------------------------------------- Deltree 64 16.192 56.070 Flush 260663 0.006 44.054 Close 2730816 0.013 54.045 LockX 12114 0.037 45.098 Mkdir 32 0.004 0.006 Rename 157521 0.145 57.066 ReadX 5830300 0.049 60.058 WriteX 1848489 0.149 76.096 Unlink 751015 0.100 55.202 UnlockX 12114 0.025 50.089 FIND_FIRST 1302987 0.141 59.078 SET_FILE_INFORMATION 303074 0.029 51.046 QUERY_FILE_INFORMATION 589797 0.011 54.037 QUERY_PATH_INFORMATION 3370965 0.047 58.140 QUERY_FS_INFORMATION 618009 0.030 53.121
 NTCreateX 3717978 0.103 66.094 Throughput 1941.31 MB/sec 32 clients 32 procs max_latency=76.107 ms after step9 step5 result should > step8 result";Test Case;RedHatEnterpriseLinux7/RHEL7-88874
2502;RHEL7-88875;[cpu][ple/pf and directed yield] run stress;Run stress in guest Verify both guest and host work well, no error and not crash.;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;1. boot guest with nvcpus(nvcpus == npcpus e.g host have 8 cpus. nvcpus=8) 2. run stress in guest Linux: stress --cpu 8 --io 4 --vm 2 --vm-bytes 128M --timeout 60s Windows: cpu-burn;verify both guest and host work well, no error and crash;Test Case;RedHatEnterpriseLinux7/RHEL7-88875
2503;RHEL7-88876;[cpu][ple/pf and directed yield] run performance with cpu overcommit;Boot multiple guests with multiple vpus(overcommit) in the same host and don't run cpu stress inside one guest of them, and pin guest'vcpu to host cpu;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;"1. check PLE if it is enabled in qemu-kvm by default # cat /sys/module/kvm_intel/parameters/ple_gap 
 2. boot two guests with nvcpus(nvcpus == npcpus e.g host have 8 cpus. nvcpus=8) 
 3. run stress in guest, make sure cpu is 200% usage per guest
 4. test performance host: # qpidd --auth no --mgmt-enable no guest: qpid-latency-test -b host_ip --count 100 --protocol tcp repeat 30+ time and get avg 
 5. disable PLE load kvm model with ple_gap=0 # cat /sys/module/kvm_intel/parameters/ple_gap
 6. run stress in guest, make sure cpu is 200% usage per guest 7. test performance";after step 1 128 after step5 0 after step2~step7 Verify the performance in step 4 in better than step7;Test Case;RedHatEnterpriseLinux7/RHEL7-88876
2504;RHEL7-88877;[cpu][ple/pf and directed yield] run performance when cpu usage is low;Test performance with CPU usage is low. Verify performance is not obviously decreased.;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;"1. check PLE if it is enabled in qemu-kvm by default # cat /sys/module/kvm_intel/parameters/ple_gap 
 2. boot guest with nvcpus(nvcpus == npcpus e.g host have 8 cpus. nvcpus=8) 
 3. run performance host: # qpidd --auth no --mgmt-enable no guest: # for i in `seq 100`; do qpid-latency-test -b host_ip --count 100 --protocol tcp; done repeat 30 times, and get avg 
 4. disable PLE load kvm model with ple_gap=0 # cat /sys/module/kvm_intel/parameters/ple_gap 
 5. boot guest with multi cpus 6. run performance";after step1 128 after step 5 0 after step 2~step 6 (Note: if not modified, please enable PLE in BIOS) Verify performance in step3 is not decreased obvious than step6;Test Case;RedHatEnterpriseLinux7/RHEL7-88877
2505;RHEL7-88878;[cpu][ple/pf and directed yield] run vmexit unit test(linux guest only);Run vmexit unit test. Verify no error and crash during unit test.;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;"1. git code git clone git://qe-git.englab.nay.redhat.com/s2/kvm-unit-tests 
 2. cd kvm-unit-tests &&./configure&&make 
 3. /usr/libexec/qemu-kvm -drive file=/root/linux-guest.qco2(optional win2008.qcow2),index=0,if=none,id=drive-virtio-disk1,media=disk, cache=none,format=qcow2,aio=native -device virtio-blk-pci,bus=pci.0, addr=0x4,drive=drive-virtio-disk1,id=virtio-disk1 \ -kernel x86/vmexit.flat";no error and crash;Test Case;RedHatEnterpriseLinux7/RHEL7-88878
2506;RHEL7-88879;[cpu][ple/pf and directed yield]Run performance on Linux guest enabling/disabling ple_gap;Run performance on Linux guest enabling/disabling ple_gap;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;"1. check host if enable PLE. cat /sys/module/kvm_intel/parameters/ple_gap 
 2. Boot linux guest with 32 vcpus (-smp 32) /usr/libexec/qemu-kvm -M rhel6.5.0 -cpu SandyBridge -enable-kvm -m 4G -smp 32,sockets=2,cores=8,threads=2 
 3. Start httpd service on guest # service httpd start 4. Install webbench package on guest
 # wget http://home.tiscali.cz/~cz210552/distfiles/webbench-1.5.tar.gz # tar xzvf [webbench-1.5.tar.gz](http://webbench-1.5.tar.gz) # cd webbench-1.5 # make 
 5. test performance on guest # webbench -c 800 -t 60 http://127.0.0.1/test.jpg repeat 10+ time and get average speed 
 6. disable PLE on host Load the kvm module with ple_gap=0 # modprobe -r kvm_intel # modprobe kvm_intel ple_gap=0 
 7. test performance on guest # webbench -c 800 -t 60 http://127.0.0.1/test.jpg repeat 10+ time and get average speed";"After Step1 128 After Step6 check the value of ple_gap of module ""kvm_intel"": # cat /sys/module/kvm_intel/parameters/ple_gap 0 Step4, Step6, the output of ""webbench -c 800 -t 60 http://127.0.0.1/test.jpg"" as following: Webbench - Simple Web Benchmark 1.5
 Copyright (c) Radim Kolar 1997-2004, GPL Open Source Software. Benchmarking: GET http://127.0.0.1/test.jpg 800 clients, running 60 sec. Speed=8961 pages/min, 59000 bytes/sec. Requests: 8951 susceed, 10 failed Compute the Speed average of 10 times. For example: Enable PLE: the average Speed=7628 pages/min, 50079 bytes/sec Disable PLE: the average Speed=6590 pages/min, 43130 bytes/sec The performance of enabling PLE is improved about 16%";Test Case;RedHatEnterpriseLinux7/RHEL7-88879
2507;RHEL7-88880;[cpu][ple/pf and directed yield]Run performance on Windows guest enabling/disabling ple_gap;Boot windows guest with multiple vcpus (>32) and run webbench to verify performance is improved with PLE enabled;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;"1. check PLE if it is enabled in qemu-kvm by default # cat /sys/module/kvm_intel/parameters/ple_gap 
 2. Boot windows guest with 32 vcpus (-smp 32)/usr/libexec/qemu-kvm -M pc-1.3 -cpu SandyBridge -enable-kvm -m 4G -smp 32,sockets=2,cores=8, threads=2 
 3. Start IIS service on guest 
 4. Install webbench package on host # wget http://home.tiscali.cz/~cz210552/distfiles/webbench-1.5.tar.gz # tar xzvf webbench-1.5.tar.gz # cd webbench-1.5 # make 
 5. On host, run webbench to test performance of guest # webbench -c 10000 -t 60 http://guest_ip/ repeat 10+ time and get average speed 
 6. disable PLE on host Load the kvm module with ple_gap=0 # modprobe -r kvm_intel # modprobe kvm_intel ple_gap=0 # cat /sys/module/kvm_intel/parameters/ple_gap 
 7. On host, run webbench to test performance of guest # webbench -c 10000 -t 60 http://guest_ip/ repeat 10+ time and get average speed";"After Step1 128 After Step6 0 Step4, Step6, the output of ""webbench -c 10000 -t 60 http://guest_ip/"" as following: Webbench - Simple Web Benchmark 1.5 Copyright (c) Radim Kolar 1997-2004, GPL Open Source Software. Benchmarking: GET http://10.66.105.184/ 10000 clients, running 60 sec. Speed=580003 pages/min, 5458392 bytes/sec. Requests: 579106 susceed, 897 failed. Compute the Speed average of 10 times. For example: Enable PLE: the average Speed=580523 pages/min, 5455780 bytes/sec Disable PLE: the average Speed=315733 pages/min, 2958610 bytes/sec The performance of enabling PLE is improved more than 40%.";Test Case;RedHatEnterpriseLinux7/RHEL7-88880
2508;RHEL7-88884;[cpu][pvticketlocks] [cpu][pvticketlocks] NMI watchdog detects hard lockup due to contention at run queue lock;NMI watchdog detects hard lockup due to contention at run queue lock;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;1. enable pvticketlocks -cpu cpu_model,+kvm_pv_unhalt ;after step1 # dmesg | grep spin [ 0.000000] KVM setup paravirtual spinlock(or pvticketlocks) after step5 qemu-kvm no core dump,host work well and guest reboot then work well after step6 # dmesg | grep spin print disable message or no any message output after step7 qemu-kvm no core dump,host work well and guest reboot then work well ;Test Case;RedHatEnterpriseLinux7/RHEL7-88884
2508;;;;;;;;;2;2. boot guest with nvcpus(nvcpus == npcpus e.g host have 8 cpus. nvcpus=8);​​;;RedHatEnterpriseLinux7/RHEL7-88884
2508;;;;;;;;;3;3. run stress inisde guest(In order to generate a large amount of pvticketlocks contention, cpu usage rate 200%) ;​​;;RedHatEnterpriseLinux7/RHEL7-88884
2508;;;;;;;;;4;4.inside guest: echo 1 >/proc/sys/kernel/panic_on_io_nmi echo 1 >/proc/sys/kernel/unknown_nmi_panic echo 1 >/proc/sys/kernel/panic_on_unrecovered_nmi service kdump start;​​;;RedHatEnterpriseLinux7/RHEL7-88884
2508;;;;;;;;;5;5.inject NMI from monitor #(qemu)nmi;​​;;RedHatEnterpriseLinux7/RHEL7-88884
2508;;;;;;;;;6;6. disable pv pvticketlocks(default) -cpu cpu_model,-kvm_pv_unhalt or default;​​;;RedHatEnterpriseLinux7/RHEL7-88884
2508;;;;;;;;;7;7.repeat step2~step5;​​;;RedHatEnterpriseLinux7/RHEL7-88884
2509;RHEL7-88885;[cpu][pvticketlocks] run performance when cpu usage is low;run performance when cpu usage is low;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;1. enable pvticketlocks -cpu cpu_model,+kvm_pv_unhalt;Step1: # dmesg | grep spin [ 0.000000] KVM setup paravirtual spinlock(or pvticketlocks) step4: # dmesg | grep spin(or pvticketlocks) print disable pvticketlocks message or no any message (Note: if not modified, please enable PLE in BIOS) Verify performance in step3 is not decreased obvious than step6;Test Case;RedHatEnterpriseLinux7/RHEL7-88885
2509;;;;;;;;;2;2. boot guest with multi cpus(no more than cpu the number of the host cpus,but exceed 1);​​;;RedHatEnterpriseLinux7/RHEL7-88885
2509;;;;;;;;;3;"3. run performance host: # qpidd --auth no --mgmt-enable no guest: # for i in `seq 100`; do qpid-latency-test -b host_ip --count 100 --protocol tcp; done repeat 30 times, and get avg";​​;;RedHatEnterpriseLinux7/RHEL7-88885
2509;;;;;;;;;4;4. disable pvticketlocks(default) -cpu cpu_model,-kvm_pv_unhalt or default;​​;;RedHatEnterpriseLinux7/RHEL7-88885
2509;;;;;;;;;5;5. boot guest with multi cpus (no more than cpu the number of the host cpus,but exceed 1);​​;;RedHatEnterpriseLinux7/RHEL7-88885
2509;;;;;;;;;6;6. run performance;​​;;RedHatEnterpriseLinux7/RHEL7-88885
2510;RHEL7-88886;[cpu][pvticketlocks] ebizzy benchmark compare performance with enabled/disabled pvticketlocks and disabled PLE;ebizzy benchmark compare performance with enabled/disabled pvticketlocks and disabled PLE;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;1. Boot guest with 4x commitment(vm1:vcpus=n, vm2:vcpus=n, vm3:vcpus=n,vm4:vcpus=n. n == npcpus);​​;Test Case;RedHatEnterpriseLinux7/RHEL7-88886
2510;;;;;;;;;2;2. enable pvticketlocks -cpu cpu_model,+kvm_pv_unhalt;after step2, # dmesg | grep spin [ 0.000000] KVM setup paravirtual spinlock(or pvticketlocks) ;;RedHatEnterpriseLinux7/RHEL7-88886
2510;;;;;;;;;3;3. disable PLE modprobe -r kvm_intel modprobe kvm_intel ple_gap=0 cat /sys/module/kvm_intel/parameters/ple_gap;after step3, 0 ;;RedHatEnterpriseLinux7/RHEL7-88886
2510;;;;;;;;;4;"4. run ebizzy script inside every linux guest at the same time: #!/bin/bash test -e /home/ebizzy4_g1.txt || touch /home/ebizzy4_g1.txt test -z ""`dmesg|grep spin`"" && echo disable >>/home/ebizzy4_g1.txt || echo enable >>/home/ebizzy4_g1.txt echo ""./ebizzy -T"" >>/home/ebizzy4_g1.txt && ./ebizzy -T >>/home/ebizzy4_g1.txt echo ""./ebizzy -M"" >>/home/ebizzy4_g1.txt && ./ebizzy -M >>/home/ebizzy4_g1.txt echo ""./ebizzy -S 90"" >>/home/ebizzy4_g1.txt && ./ebizzy -S 90 >>/home/ebizzy4_g1.txt";after step4,will get following result: inside guest1: enable ./ebizzy -T 821 records/s real 10.00 s user 0.98 s sys 58.19 s ./ebizzy -M 100 records/s real 10.00 s user 0.37 s sys 50.15 s ./ebizzy -S 90 151 records/s real 90.00 s user 0.45 s sys 178.52 s inside guest2: enable ./ebizzy -T 176 records/s real 10.00 s user 0.39 s sys 56.77 s ./ebizzy -M 119 records/s real 10.00 s user 0.17 s sys 50.69 s ./ebizzy -S 90 134 records/s real 90.00 s user 1.34 s sys 178.30 s ...............;;RedHatEnterpriseLinux7/RHEL7-88886
2510;;;;;;;;;5;5. disable pvticketlocks -cpu cpu_model,-kvm_pv_unhalt or default;after step5 # dmesg | grep spin get disable message or no any message ;;RedHatEnterpriseLinux7/RHEL7-88886
2510;;;;;;;;;6;6. run above ebizzy script inside every linux guest at the same time;after step6,will get following result: inside guest1: disable ./ebizzy -T 1159 records/s real 10.00 s user 0.43 s sys 27.25 s ./ebizzy -M 7 records/s real 10.00 s user 0.08 s sys 12.71 s ./ebizzy -S 90 132 records/s real 90.00 s user 0.08 s sys 173.75 s inside guest2: disable ./ebizzy -T 43 records/s real 10.00 s user 0.04 s sys 14.50 s ./ebizzy -M 150 records/s real 10.00 s user 0.01 s sys 18.92 s ./ebizzy -S 90 Red Hat http://www.redhat.com RedHatEnterpriseLinux7 CPU_Test_Plan (rev. 2048079) 51 | Page Polarion ALM 2016 2017-04-18 04:15 156 records/s real 90.00 s user 1.45 s sys 169.35 s .................................;;RedHatEnterpriseLinux7/RHEL7-88886
2510;;;;;;;;;7;7.compare result between step4 and step6;step7 step4 result of the records per second rate should almost > it is in step6;;RedHatEnterpriseLinux7/RHEL7-88886
2511;RHEL7-88887;[cpu][pvticketlocks] ebizzy benchmark compare performance with enabled/disabled pvticketlocks and enabled PLE;ebizzy benchmark compare performance with enabled/disabled pvticketlocks and enabled PLE;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;1. Boot guest with 4x commitment(vm1:vcpus=n, vm2:vcpus=n, vm3:vcpus=n,vm4:vcpus=n. n == npcpus);​​;Test Case;RedHatEnterpriseLinux7/RHEL7-88887
2511;;;;;;;;;2;2. enable pvticketlocks -cpu cpu_model,+kvm_pv_unhalt;after step2, # dmesg | grep spin [ 0.000000] KVM setup paravirtual spinlock(or pvticketlocks);;RedHatEnterpriseLinux7/RHEL7-88887
2511;;;;;;;;;3;3. enable PLE modprobe -r kvm_intel modprobe kvm_intel ple_gap=128 cat /sys/module/kvm_intel/parameters/ple_gap;after step3, 128;;RedHatEnterpriseLinux7/RHEL7-88887
2511;;;;;;;;;4;"4. run ebizzy script inside every linux guest at the same time: #!/bin/bash test -e /home/ebizzy4_g1.txt || touch /home/ebizzy4_g1.txt test -z ""`dmesg|grep spin`"" && echo disable >>/home/ebizzy4_g1.txt || echo enable >>/home/ebizzy4_g1.txt echo ""./ebizzy -T"" >>/home/ebizzy4_g1.txt && ./ebizzy -T >>/home/ebizzy4_g1.txt echo ""./ebizzy -M"" >>/home/ebizzy4_g1.txt && ./ebizzy -M >>/home/ebizzy4_g1.txt echo ""./ebizzy -S 90"" >>/home/ebizzy4_g1.txt && ./ebizzy -S 90 >>/home/ebizzy4_g1.txt";after step4,will get following result: inside guest1: enable ./ebizzy -T 4581 records/s real 10.00 s user 2.59 s sys 38.48 s ./ebizzy -M 3151 records/s real 10.00 s user 40.45 s sys 0.00 s ./ebizzy -S 90 3335 records/s real 90.00 s user 94.97 s sys 270.15 s inside guest2: enable ./ebizzy -T 3549 records/s real 10.00 s user 0.75 s sys 37.85 s ./ebizzy -M 2583 records/s real 10.00 s user 30.13 s sys 10.07 s ./ebizzy -S 90 2878 records/s real 91.00 s user 83.01 s sys 280.18 s ...............;;RedHatEnterpriseLinux7/RHEL7-88887
2511;;;;;;;;;5;5. disable pvticketlocks -cpu cpu_model,-kvm_pv_unhalt or default;after step5 # dmesg | grep spin get disable message or no any message;;RedHatEnterpriseLinux7/RHEL7-88887
2511;;;;;;;;;6;6. run above ebizzy script inside every linux guest at the same time;"after step6,will get following result: inside guest1: disable ./ebizzy -T 4205 records/s real 10.00 s user 2.90 s sys 38.64 s
 /ebizzy -M 2363 records/s real 10.00 s user 8.05 s sys 32.17 s ./ebizzy -S 90 2455 records/s real 90.00 s user 50.05 s sys 310.86 s inside guest2: disable ./ebizzy -T 3096 records/s real 10.00 s user 3.28 s sys 33.67 s ./ebizzy -M 2359 records/s real 10.00 s user 0.00 s sys 40.12 s ./ebizzy -S 90 2372 records/s real 90.00 s user 133.88 s sys 229.52 s ......................";;RedHatEnterpriseLinux7/RHEL7-88887
2511;;;;;;;;;7;7.compare result between step4 and step6;step7 step4 result of the records per second rate should almost > it is in step6;;RedHatEnterpriseLinux7/RHEL7-88887
2512;RHEL7-88888;[cpu][pvticketlocks]dbench benchmark compare performance with enabled/disabled pvticketlocks;dbench benchmark compare performance with enable/disabling pvticketlocks;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;1.Boot guest with nvcpus(nvcpus == npcpus);​​;Test Case;RedHatEnterpriseLinux7/RHEL7-88888
2512;;;;;;;;;2;2. enable pvticketlocks -cpu cpu_model,+kvm_pv_unhalt;step2, # dmesg | grep spin [ 0.000000] KVM setup paravirtual spinlock(or pvticketlocks);;RedHatEnterpriseLinux7/RHEL7-88888
2512;;;;;;;;;3;3. run dbench tool inside linux guest mount -t tmpfs -o size=1G tmpfs /mnt dbench -D /mnt -t 60 32;step3, seems this result below: # dbench -D /mnt -t 60 32 pvticketlocks=NA ple=NA dbench version 4.00 - Copyright Andrew Tridgell 1999-2004 Running for 60 seconds with load '/usr/local/share/client.txt' and minimum warmup 12 secs 31 of 32 processes prepared for launch 0 sec 32 of 32 processes prepared for launch 0 sec releasing clients 32 0 0.00 MB/sec warmup 1 sec latency 1183.574 ms 32 0 0.00 MB/sec warmup 2 sec latency 2183.611 ms 32 0 0.00 MB/sec warmup 3 sec latency 3183.645 ms 32 0 0.00 MB/sec warmup 4 sec latency 4183.685 ms 32 0 0.00 MB/sec warmup 5 sec latency 5183.709 ms 32 0 0.00 MB/sec warmup 6 sec latency 6183.732 ms 32 0 0.00 MB/sec warmup 7 sec latency 7183.755 ms 32 0 0.00 MB/sec warmup 8 sec latency 8183.780 ms 32 0 0.00 MB/sec warmup 9 sec latency 9183.804 ms 32 0 0.00 MB/sec warmup 10 sec latency 10183.825 ms 32 0 0.00 MB/sec warmup 11 sec latency 11183.845 ms 32 0 0.00 MB/sec execute 1 sec latency 13183.902 ms 32 0 0.00 MB/sec execute 2 sec latency 14183.930 ms;;RedHatEnterpriseLinux7/RHEL7-88888
2512;;;;;;;;;4;4. collect and save test result of step 2 via shell script;​​;;RedHatEnterpriseLinux7/RHEL7-88888
2512;;;;;;;;;5;5. disable pvticketlocks -cpu cpu_model,-kvm_pv_unhalt or default;step5 # dmesg | grep spin get disable message or no any message;;RedHatEnterpriseLinux7/RHEL7-88888
2512;;;;;;;;;6;6. run dbench tool inside linux guest again mount -t tmpfs -o size=1G tmpfs /mnt dbench -D /mnt -t 60 32;​​;;RedHatEnterpriseLinux7/RHEL7-88888
2512;;;;;;;;;7;7. collect and save execute result of step5 via shell script;step7 step3 result should similar as step6 result. Refer to https://bugzilla.redhat.com/show_bug.cgi?id=1026874 use pvticketlocks without over commit same physical cpu won't improve performance but should not decrease too much performance;;RedHatEnterpriseLinux7/RHEL7-88888
2512;;;;;;;;;8;8. compare result between step3 and step6;​​;;RedHatEnterpriseLinux7/RHEL7-88888
2513;RHEL7-88889;[cpu][pvticketlocks] run vmexit unit test(linux guest only);run vmexit unit test(linux guest only);Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;1. git code git clone git://qe-git.englab.nay.redhat.com/s2/kvm-unit-tests;no error and crash inside host and qemu;Test Case;RedHatEnterpriseLinux7/RHEL7-88889
2513;;;;;;;;;2;2. cd kvm-unit-tests &&./configure&&make;​​;;RedHatEnterpriseLinux7/RHEL7-88889
2513;;;;;;;;;3;3. /usr/libexec/qemu-kvm -drive file=/root/linux-guest.qco2(optional win2008.qcow2),index=0,if=none,id=drive-virtiodisk1,media=disk,cache=none,format=qcow2,aio=native -device virtio-blkpci,bus=pci.0,addr=0x4,drive=drive-virtio-disk1,id=virtio-disk1 \ -kernel x86/vmexit.flat;​​;;RedHatEnterpriseLinux7/RHEL7-88889
2514;RHEL7-88890;[cpu][pvticketlocks] run stress;run vmexit unit test(linux guest only);Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;1. git code git clone git://qe-git.englab.nay.redhat.com/s2/kvm-unit-tests;no error and crash inside host and qemu;Test Case;RedHatEnterpriseLinux7/RHEL7-88890
2514;;;;;;;;;2;2. cd kvm-unit-tests &&./configure&&make;​​;;RedHatEnterpriseLinux7/RHEL7-88890
2514;;;;;;;;;3;3. /usr/libexec/qemu-kvm -drive file=/root/linux-guest.qco2(optional win2008.qcow2),index=0,if=none,id=drive-virtiodisk1,media=disk,cache=none,format=qcow2,aio=native -device virtio-blkpci,bus=pci.0,addr=0x4,drive=drive-virtio-disk1,id=virtio-disk1 \ -kernel x86/vmexit.flat;​​;;RedHatEnterpriseLinux7/RHEL7-88890
2515;RHEL7-88891;[cpu][pvticketlocks] run stress;run stress;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;1. boot guest with multi cpus(no more than cpu the number of the host cpus and exceed 1);verify both guest and host work well, no error and crash;Test Case;RedHatEnterpriseLinux7/RHEL7-88891
2515;;;;;;;;;2;2. run stress in guest Linux: stress --cpu 8 --io 4 --vm 2 --vm-bytes 128M --timeout 60s Windows: cpu-burn;​​;;RedHatEnterpriseLinux7/RHEL7-88891
2516;RHEL7-88892;[cpu][pvticketlocks] run performance with cpu overcommit;run performance with cpu overcommit;Zhiyi Guo (zhguo);Low;Positive;Not Automated;;1;1.enable pvticketlocks -cpu cpu_model,+kvm_pv_unhalt;Verify the performance in step 4 in better than step7;Test Case;RedHatEnterpriseLinux7/RHEL7-88892
2516;;;;;;;;;2;2. boot two guests with nvcpus(nvcpus == npcpus e.g host have 8 cpus. nvcpus=8);​​;;RedHatEnterpriseLinux7/RHEL7-88892
2516;;;;;;;;;3;3. run stress in guest, make sure cpu is 100% usage per guest;​​;;RedHatEnterpriseLinux7/RHEL7-88892
2516;;;;;;;;;4;4. test performance host: # qpidd --auth no --mgmt-enable no guest: qpid-latency-test -b host_ip --count 100 --protocol tcp repeat 30+ time and get avg;​​;;RedHatEnterpriseLinux7/RHEL7-88892
2516;;;;;;;;;5;5. disable pvticketlocks(default) -cpu cpu_model,-kvm_pv_unhalt or default;​​;;RedHatEnterpriseLinux7/RHEL7-88892
2516;;;;;;;;;6;6. run stress in guest, make sure cpu is 100% usage per guest;​​;;RedHatEnterpriseLinux7/RHEL7-88892
2516;;;;;;;;;7;7. test performance;​​;;RedHatEnterpriseLinux7/RHEL7-88892
2517;RHEL7-89001;[audit log] Audit log related to guest CPU;Check audit log related to guest CPU;Fangge Jin (fjin);Low;Positive;Not Automated;;1;"Clear the audit log on host:
 # > /var/log/audit/audit.log
 # > /var/log/audit/audit.log.1
 # > /var/log/audit/audit.log.2
 # > /var/log/audit/audit.log.3
 # > /var/log/audit/audit.log.4";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-89001
2517;;;;;;;;;2;Start a guest.;​​;;RedHatEnterpriseLinux7/RHEL7-89001
2517;;;;;;;;;3;"Modify guest vcpu number:
 # virsh setvcpus $guest 2";​​;;RedHatEnterpriseLinux7/RHEL7-89001
2517;;;;;;;;;4;"Check the log.
 #ausearch --start today -m VIRT_RESOURCE -i | grep vcpu";"Output:
 
 type=VIRT_RESOURCE msg=audit(1311735946.799:2240): user pid=5352 uid=0
 auid=500 ses=1 subj=unconfined_u:system_r:virtd_t:s0-s0:c0.c1023
 msg='resrc=vcpu reason=update vm=""rhel7"" uuid=ad0e5e2f-
 1d03-d918-5c33-b39bd8c7a20a old-vcpu=1 new-vcpu=2:
 exe=2F7573722F7362696E2F6C69627669727464202864656C6574656429 hostname=? addr=?
 terminal=? res=success'";;RedHatEnterpriseLinux7/RHEL7-89001
2518;RHEL7-89002;[audit log] Audit log related to guest disk;Check audit log related to guest disk.;Fangge Jin (fjin);Low;Positive;Not Automated;;1;"Clear the audit log on host:
 # > /var/log/audit/audit.log
 # > /var/log/audit/audit.log.1
 # > /var/log/audit/audit.log.2
 # > /var/log/audit/audit.log.3
 # > /var/log/audit/audit.log.4";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-89002
2518;;;;;;;;;2;"Start a guest.
​​";​​;;RedHatEnterpriseLinux7/RHEL7-89002
2518;;;;;;;;;3;"Hot-plug a disk to guest:
 
 # qemu-img create /var/lib/libvirt/images/fd.img 10M
 
 # cat disk.xml
 <disk type=""file"" device=""disk"">
   <source file=""/var/lib/libvirt/images/fd.img""/>
   <target dev=""vdb"" bus=""virtio""/>
 </disk>

 # virsh attach-device demo disk.xml";​​;;RedHatEnterpriseLinux7/RHEL7-89002
2518;;;;;;;;;4;"Check the audit log:
 
 #ausearch --start today -m VIRT_RESOURCE -i | grep attach
 
 
 
 
​​";"Output:
 
 type=VIRT_RESOURCE msg=audit(08/19/2016 11:36:58.499:136) : pid=1303 uid=root auid=unset ses=unset subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm resrc=disk reason=attach vm=test1 uuid=613ad5ce-0c53-45df-8505-6ec16175fd89 old-disk=? new-disk=/var/lib/libvirt/images/fd.img exe=/usr/sbin/libvirtd hostname=? addr=? terminal=? res=success' 
​​";;RedHatEnterpriseLinux7/RHEL7-89002
2518;;;;;;;;;5;"Hot-unplug the disk from guest:
 
 # virsh detach-disk test1 vdb";​​;;RedHatEnterpriseLinux7/RHEL7-89002
2518;;;;;;;;;6;"Check the audit log:
 
 #ausearch --start today -m VIRT_RESOURCE -i | grep dettach";"Output:
 
 type=VIRT_RESOURCE msg=audit(08/19/2016 11:38:10.038:137) : pid=1303 uid=root auid=unset ses=unset subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm resrc=disk reason=detach vm=test1 uuid=613ad5ce-0c53-45df-8505-6ec16175fd89 old-disk=/var/lib/libvirt/images/fd.img new-disk=? exe=/usr/sbin/libvirtd hostname=? addr=? terminal=? res=success'";;RedHatEnterpriseLinux7/RHEL7-89002
2519;RHEL7-89003;[audit log] Audit log related to guest network interface of different models;Check audit log related to guest network interface.;Fangge Jin (fjin);Low;Positive;Not Automated;;1;"Clear the audit log on host:
 # > /var/log/audit/audit.log
 # > /var/log/audit/audit.log.1
 # > /var/log/audit/audit.log.2
 # > /var/log/audit/audit.log.3
 # > /var/log/audit/audit.log.4";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-89003
2519;;;;;;;;;2;"Query the supported nic models
 # /usr/libexec/qemu-kvm -net nic,model=?
​​";"Output:
 qemu: Supported NIC models: ne2k_pci,i82551,i82557b,i82559er,rtl8139,e1000,pcnet,virtio
 (Disabled ne2k_pci,i82551,i82557b,i82559er,pcnet on rhel7)";;RedHatEnterpriseLinux7/RHEL7-89003
2519;;;;;;;;;3;Start a guest.;​​;;RedHatEnterpriseLinux7/RHEL7-89003
2519;;;;;;;;;4;"Hotplug network interfaces of different models to guest:
 
 #  for i in {rtl8139,e1000,virtio,e1000e}; do virsh attach-interface test1 network default vnet0 --model $i; done
​​";​​;;RedHatEnterpriseLinux7/RHEL7-89003
2519;;;;;;;;;5;"Check the audit log:
 
 #  ausearch --start recent -m VIRT_RESOURCE -i | grep attach
 
 
 
 
​​";"Output:
 
 type=VIRT_RESOURCE msg=audit(08/19/2016 13:57:57.337:277) : pid=1303 uid=root auid=unset ses=unset subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm resrc=net reason=attach vm=test1 uuid=613ad5ce-0c53-45df-8505-6ec16175fd89 old-net=? new-net=52:54:00:42:5d:68 exe=/usr/sbin/libvirtd hostname=? addr=? terminal=? res=success' 
 
 type=VIRT_RESOURCE msg=audit(08/19/2016 13:57:57.508:281) : pid=1303 uid=root auid=unset ses=unset subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm resrc=net reason=attach vm=test1 uuid=613ad5ce-0c53-45df-8505-6ec16175fd89 old-net=? new-net=52:54:00:64:a8:54 exe=/usr/sbin/libvirtd hostname=? addr=? terminal=? res=success' 
 
 type=VIRT_RESOURCE msg=audit(08/19/2016 13:57:57.645:285) : pid=1303 uid=root auid=unset ses=unset subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm resrc=net reason=attach vm=test1 uuid=613ad5ce-0c53-45df-8505-6ec16175fd89 old-net=? new-net=52:54:00:a5:54:0c exe=/usr/sbin/libvirtd hostname=? addr=? terminal=? res=success'
​​";;RedHatEnterpriseLinux7/RHEL7-89003
2519;;;;;;;;;6;"Hot-unplug the network interfaces from guest:
 
 #  virsh detach-interface test1 network --mac 52:54:00:42:5d:68
 
 #  virsh detach-interface test1 network --mac 52:54:00:64:a8:54
 
 #  virsh detach-interface test1 network --mac 52:54:00:a5:54:0c";​​;;RedHatEnterpriseLinux7/RHEL7-89003
2519;;;;;;;;;7;"Check the audit log:
 
 #  ausearch --start recent -m VIRT_RESOURCE -i | grep detach";"Output:
 
 type=VIRT_RESOURCE msg=audit(08/19/2016 13:59:15.565:288) : pid=1303 uid=root auid=unset ses=unset subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm resrc=net reason=detach vm=test1 uuid=613ad5ce-0c53-45df-8505-6ec16175fd89 old-net=52:54:00:42:5d:68 new-net=? exe=/usr/sbin/libvirtd hostname=? addr=? terminal=? res=success' 
 
 type=VIRT_RESOURCE msg=audit(08/19/2016 13:59:25.718:291) : pid=1303 uid=root auid=unset ses=unset subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm resrc=net reason=detach vm=test1 uuid=613ad5ce-0c53-45df-8505-6ec16175fd89 old-net=52:54:00:64:a8:54 new-net=? exe=/usr/sbin/libvirtd hostname=? addr=? terminal=? res=success' 
 
 type=VIRT_RESOURCE msg=audit(08/19/2016 13:59:36.024:293) : pid=1303 uid=root auid=unset ses=unset subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm resrc=net reason=detach vm=test1 uuid=613ad5ce-0c53-45df-8505-6ec16175fd89 old-net=52:54:00:a5:54:0c new-net=? exe=/usr/sbin/libvirtd hostname=? addr=? terminal=? res=success'";;RedHatEnterpriseLinux7/RHEL7-89003
2520;RHEL7-89669;[Hyper-V][Network]Verify legacy network adapter could still work after ifdown/ifup  in Gen1 guest;Legacy network adapter is used in Gen1 guest, we should make sure its basic function, such as ifup/ifdown, network connectivity;Yaju Cao (yacao);Medium;Positive;Not Automated;;1;Install Gen1 guest and add a 'Legacy Network Adapter';​​;Test Case;RedHatEnterpriseLinux7/RHEL7-89669
2520;;;;;;;;;2;"Boot the guest, check the 'Legacy Network Adapter' is up, and network can work well.
 #ethtool -i enp0s10f0
 driver: tulip
 version: 1.1.15";​​;;RedHatEnterpriseLinux7/RHEL7-89669
2520;;;;;;;;;3;"Ifup and ifdown the 'Legacy Network Adapter' several times.
 # ifup enp0s10f0
 # ifdown enp0s10f0

";After ifup finally, network can still work well.;;RedHatEnterpriseLinux7/RHEL7-89669
2521;RHEL7-89730;[Hyper-V][Storage]Add a CD/DVD Drive on a new SCSI Controller;"Add a SCSI Controller and attach CD/DVD Drive when VM is power off, then boot up and check the DVD, only for gen2 guest
";Yaju Cao (yacao);High;Positive;Manual Only;;1; Install VM on Hyper-V and power off. Add a new SCSI Controller with DVD Drive attached;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-89730
2521;;;;;;;;;2;Boot up VM, and check DVD Drive in VM;VM boot up successfully, DVD could be mount and read;;RedHatEnterpriseLinux7/RHEL7-89730
2522;RHEL7-90064;[Hyper-V]SanityOnly Test;"SanityOnly test steps for some Requirements(Bugzilla) which have no way to reproduce/verify
Reference: https://wiki.test.redhat.com/Kernel/HowToSanityOnly ";Yaju Cao (yacao);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90064
2523;RHEL7-90386;"[Watchdog device] Start a guest with ""ib700"" watchdog and action=""inject-nmi""";Verify guest can start successfully with correct qemu command line when watchdog model is ib700 and action='inject-nmi';Fangge Jin (fjin);High;Positive;Automated;;1;"1. Start guest
 # virsh start rhel7.3";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-90386
2523;;;;;;;;;2;"2. Check qemu command line:
 # ps aux|grep qemu|grep watchdog";"The qemu command line includes:

 -device ib700,id=watchdog0 -watchdog-action inject-nmi";;RedHatEnterpriseLinux7/RHEL7-90386
2523;;;;;;;;;3;"The following step are optional:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-90386
2523;;;;;;;;;4;"3. Monitor guest event:
 # virsh event rhel7.3 --all
​​";​​;;RedHatEnterpriseLinux7/RHEL7-90386
2523;;;;;;;;;5;Load ib700 driver in guest;​​;;RedHatEnterpriseLinux7/RHEL7-90386
2523;;;;;;;;;6;Trigger watchdog, refer to: How to trigger watchdog  ;​​;;RedHatEnterpriseLinux7/RHEL7-90386
2523;;;;;;;;;7;6. Wait for some time. Check the guest terminal.;"Guest receive a NMI. The following messages are printed in guest terminal:

 Message from syslogd@localhost at Apr 28 13:53:01 ...
  kernel:Uhhuh. NMI received for unknown reason 20 on CPU 0.
 
 Message from syslogd@localhost at Apr 28 13:53:01 ...
  kernel:Do you have a strange power saving mode enabled?
 
 Message from syslogd@localhost at Apr 28 13:53:01 ...
  kernel:Dazed and confused, but trying to continue
 
​​";;RedHatEnterpriseLinux7/RHEL7-90386
2523;;;;;;;;;8;7. Check output of virsh event;"A watchdog event is printed:
 
 event 'watchdog' for domain rhel7.3: inject-nmi
 events received: 1";;RedHatEnterpriseLinux7/RHEL7-90386
2524;RHEL7-90387;"[Watchdog device] Start a guest with ""i6300esb"" watchdog and action=""inject-nmi“";Verify guest can start successfully with correct qemu command line when watchdog model is i6300esb and action='inject-nmi';Fangge Jin (fjin);High;Positive;Automated;;1;"1. Start guest
 # virsh start rhel7.3";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-90387
2524;;;;;;;;;2;"2. Check qemu command line:
 # ps aux|grep qemu|grep watchdog";"The qemu command line includes:

 -device i6300esb,id=watchdog0,bus=pci.0,addr=0x8 -watchdog-action inject-nmi";;RedHatEnterpriseLinux7/RHEL7-90387
2524;;;;;;;;;3;"The following steps are optional:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-90387
2524;;;;;;;;;4;"3. Monitor guest event:
 # virsh event rhel7.3 --all
";​​;;RedHatEnterpriseLinux7/RHEL7-90387
2524;;;;;;;;;5;Trigger watchdog, refer to: How to trigger watchdog  ;​​;;RedHatEnterpriseLinux7/RHEL7-90387
2524;;;;;;;;;6;Wait for some time, guest will receive a NMI. Check the guest terminal.;"The following messages are printed in guest terminal:

 Message from syslogd@localhost at Apr 28 13:53:01 ...
  kernel:Uhhuh. NMI received for unknown reason 20 on CPU 0.

 Message from syslogd@localhost at Apr 28 13:53:01 ...
  kernel:Do you have a strange power saving mode enabled?

 Message from syslogd@localhost at Apr 28 13:53:01 ...
  kernel:Dazed and confused, but trying to continue

";;RedHatEnterpriseLinux7/RHEL7-90387
2524;;;;;;;;;7;Check output of virsh event;"A watchdog event is printed:

 event 'watchdog' for domain rhel7.3: inject-nmi
 events received: 1";;RedHatEnterpriseLinux7/RHEL7-90387
2525;RHEL7-90530;[Video devices] [QXL] [ram/vram] Define a guest with qxl ram/vram set to a value lower than 0;N/A;Fangge Jin (fjin);Medium;Negative;Automated;;1;"Define a guest with such setting:
 1) with qxl video
 2) set (v)ram to an integer lower than 0";"Got such error in the terminal:
 
 error: XML error: cannot parse video (v)ram  '-2'";Test Case;RedHatEnterpriseLinux7/RHEL7-90530
2526;RHEL7-90539;[Video devices][QXL][vgamem] Start a guest with qxl vgamam set to an power-of-2 value in range (0, 4294967296);When vgamem is st to an integer that's power of two and in range (0, 4294967296), and the value will take effect.;Fangge Jin (fjin);High;Positive;Automated;;1;"Define or edit a guest with such setting:
 1) with qxl video
 2) set vgamem to an power-of-two value in range (0, 4294967296)";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-90539
2526;;;;;;;;;2;# virsh dumpxml $guest|grep vgamem;vgamem value is 65536 in dumpxml;;RedHatEnterpriseLinux7/RHEL7-90539
2526;;;;;;;;;3;Start guest;​​;;RedHatEnterpriseLinux7/RHEL7-90539
2526;;;;;;;;;4;"Check qemu cmd:
 ps -ef | grep $guest
";"The value of vgamem_mb is 65536/1024=64.
 
 Output:
 
 -device qxl-vga,id=video0,.......,vgamem_mb=64,......
 
 Note:
 The value of vgamem_mb in qemu command line is in MB, the value of vgamem in domain xml is KB.";;RedHatEnterpriseLinux7/RHEL7-90539
2527;RHEL7-90545;[Video devices] Retrieve runtime ram/vram/vgamem values when set single qxl video device;"Verify libvirt can retrieve the actual ram/vram value from qemu at runtime correctly when only one video device exists. Which can be verified by migration or save/restore
 Bug 1180574 - migration rhel7.1 -> rhel7.0 wont work if you set ""ram"" < 2*""vgamem"" for QXL device
 Bug 1357359";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Check the inactive value of qxl parameters:
 # virsh dumpxml rhel7.2";"...
 <video>
        <model type='qxl' ram='1024' vram='1024' vgamem='1024' heads='1' primary='yes'/>
 ...";Test Case;RedHatEnterpriseLinux7/RHEL7-90545
2527;;;;;;;;;2;"Start guest
 # virsh start rhel7-3";​​;;RedHatEnterpriseLinux7/RHEL7-90545
2527;;;;;;;;;3;"Check runtime value of qxl parameters
 # virsh dumpxml rhel7.2
​​";"Libvirt retrieves runtime values for the qxl attributes, which may be different from the inactive values. ram = vgamem * 2
 
 Output: 
 ...
     <video>
      <model type='qxl' ram='16184' vram='1024' vgamem='8192' heads='1' primary='yes'/>
 ...
";;RedHatEnterpriseLinux7/RHEL7-90545
2527;;;;;;;;;4;"Do migration or managedsave/start to verify the retrieved values are correct:

 1)
 # virsh migrate rhel7.2 qemu+ssh://10.66.144.76/system --live --verbose
 Migration: [100 %]

 or
 2)
 # virsh managedsave rhel7.2
 # virsh start rhel7.2";"1)
 migration complete correctly


 2)
 managedsave/start successfully";;RedHatEnterpriseLinux7/RHEL7-90545
2528;RHEL7-90546;KN-TC: nic/functions/packet_statistics;KN-TC: nic/functions/packet_statistics;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90546
2529;RHEL7-90547;KN-TC: nic/functions/link_check;KN-TC: nic/functions/link_check;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90547
2530;RHEL7-90548;KN-TC: nic/functions/ring;KN-TC: nic/functions/ring;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90548
2531;RHEL7-90549;KN-TC: nic/functions/offload FUNC=checksum-rx;KN-TC: nic/functions/offload FUNC=checksum-rx;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90549
2532;RHEL7-90550;KN-TC: nic/functions/offload FUNC=checksum-tx;KN-TC: nic/functions/offload FUNC=checksum-tx;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90550
2533;RHEL7-90551;KN-TC: nic/functions/offload FUNC=segmentation-tso;KN-TC: nic/functions/offload FUNC=segmentation-tso;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90551
2534;RHEL7-90552;KN-TC: nic/functions/offload FUNC=segmentation-gso;KN-TC: nic/functions/offload FUNC=segmentation-gso;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90552
2535;RHEL7-90553;KN-TC: nic/functions/offload FUNC=segmentation-gro;KN-TC: nic/functions/offload FUNC=segmentation-gro;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90553
2536;RHEL7-90554;KN-TC: nic/functions/offload FUNC=segmentation-lro;KN-TC: nic/functions/offload FUNC=segmentation-lro;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90554
2537;RHEL7-90555;KN-TC: nic/functions/offload FUNC=segmentation-ufo;KN-TC: nic/functions/offload FUNC=segmentation-ufo;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90555
2538;RHEL7-90556;KN-TC: nic/functions/multiqueue;KN-TC: nic/functions/multiqueue;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90556
2539;RHEL7-90557;KN-TC: nic/functions/coalesce;KN-TC: nic/functions/coalesce;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90557
2540;RHEL7-90558;KN-TC: nic/functions/nic_driver_load;KN-TC: nic/functions/nic_driver_load;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90558
2541;RHEL7-90559;[Video devices] [QXL]Start a guest with qxl video device set as the secondary video;Verify libvirt starts guest with correct qemu command line when use qxl as secondary video;Fangge Jin (fjin);High;Positive;Automated;;1;"1. Define or edit a guest with such setting:
 1) with qxl video
 2) set the qxl video as secondary video";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-90559
2541;;;;;;;;;2;"Start guest:
 # virsh start rhel7.3";​​;;RedHatEnterpriseLinux7/RHEL7-90559
2541;;;;;;;;;3;"Check qemu command line:
 # ps aux|grep qemu|grep qxl";"qemu command line includes secondary video""-device qxl"".

 Output:
 -device qxl,id=video1,ram_size=67108864,vram_size=67108864,vram64_size_mb=0,vgamem_mb=16,max_outputs=1,bus=pci.0,addr=0xb";;RedHatEnterpriseLinux7/RHEL7-90559
2542;RHEL7-90561;KN-TC: openvswitch/topo FUNC=ovs-test-nic;KN-TC: openvswitch/topo FUNC=ovs-test-nic;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90561
2543;RHEL7-90562;KN-TC: openvswitch/topo FUNC=ovs-test-vlan;KN-TC: openvswitch/topo FUNC=ovs-test-vlan;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90562
2544;RHEL7-90563;KN-TC: openvswitch/topo FUNC=ovs-test-vxlan;KN-TC: openvswitch/topo FUNC=ovs-test-vxlan;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90563
2545;RHEL7-90564;KN-TC: openvswitch/topo FUNC=ovs-test-vxlan1;KN-TC: openvswitch/topo FUNC=ovs-test-vxlan1;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90564
2546;RHEL7-90565;KN-TC: openvswitch/topo FUNC=ovs-test-vxlan-flow;KN-TC: openvswitch/topo FUNC=ovs-test-vxlan-flow;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90565
2547;RHEL7-90566;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-vxlan;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-vxlan;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90566
2548;RHEL7-90567;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-vxlan1;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-vxlan1;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90567
2549;RHEL7-90568;KN-TC: openvswitch/topo FUNC=ovs-test-geneve;KN-TC: openvswitch/topo FUNC=ovs-test-geneve;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90568
2550;RHEL7-90569;KN-TC: openvswitch/topo FUNC=ovs-test-geneve1;KN-TC: openvswitch/topo FUNC=ovs-test-geneve1;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90569
2551;RHEL7-90570;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-geneve;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-geneve;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90570
2552;RHEL7-90571;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-geneve1;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-geneve1;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90571
2553;RHEL7-90572;KN-TC: openvswitch/topo FUNC=ovs-test-gre;KN-TC: openvswitch/topo FUNC=ovs-test-gre;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90572
2554;RHEL7-90573;KN-TC: openvswitch/topo FUNC=ovs-test-gre1;KN-TC: openvswitch/topo FUNC=ovs-test-gre1;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90573
2555;RHEL7-90574;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-gre;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-gre;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90574
2556;RHEL7-90575;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-gre1;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-gre1;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90575
2557;RHEL7-90576;KN-TC: openvswitch/topo FUNC=ovs-test-vm-nic;KN-TC: openvswitch/topo FUNC=ovs-test-vm-nic;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90576
2558;RHEL7-90577;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90577
2559;RHEL7-90578;KN-TC: openvswitch/topo FUNC=ovs-test-vm-multiple-vlans;KN-TC: openvswitch/topo FUNC=ovs-test-vm-multiple-vlans;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90578
2560;RHEL7-90579;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vxlan;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vxlan;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90579
2561;RHEL7-90580;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vxlan1;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vxlan1;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90580
2562;RHEL7-90581;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vxlan-flow;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vxlan-flow;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90581
2563;RHEL7-90582;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vxlan-gbp;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vxlan-gbp;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90582
2564;RHEL7-90583;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-vxlan;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-vxlan;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90583
2565;RHEL7-90584;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-vxlan1;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-vxlan1;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90584
2566;RHEL7-90585;KN-TC: openvswitch/topo FUNC=ovs-test-vm-geneve;KN-TC: openvswitch/topo FUNC=ovs-test-vm-geneve;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90585
2567;RHEL7-90586;KN-TC: openvswitch/topo FUNC=ovs-test-vm-geneve1;KN-TC: openvswitch/topo FUNC=ovs-test-vm-geneve1;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90586
2568;RHEL7-90587;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-geneve;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-geneve;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90587
2569;RHEL7-90588;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-geneve1;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-geneve1;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90588
2570;RHEL7-90589;KN-TC: openvswitch/topo FUNC=ovs-test-vm-gre;KN-TC: openvswitch/topo FUNC=ovs-test-vm-gre;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90589
2571;RHEL7-90590;KN-TC: openvswitch/topo FUNC=ovs-test-vm-gre1;KN-TC: openvswitch/topo FUNC=ovs-test-vm-gre1;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90590
2572;RHEL7-90591;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-gre;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-gre;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90591
2573;RHEL7-90592;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-gre1;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-gre1;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90592
2574;RHEL7-90593;KN-TC: openvswitch/topo FUNC=ovs-test-bond-active-backup;KN-TC: openvswitch/topo FUNC=ovs-test-bond-active-backup;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90593
2575;RHEL7-90594;KN-TC: openvswitch/topo FUNC=ovs-test-bond-set-active-slave;KN-TC: openvswitch/topo FUNC=ovs-test-bond-set-active-slave;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90594
2576;RHEL7-90595;KN-TC: openvswitch/topo FUNC=ovs-test-bond-lacp-active;KN-TC: openvswitch/topo FUNC=ovs-test-bond-lacp-active;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90595
2577;RHEL7-90596;KN-TC: openvswitch/topo FUNC=ovs-test-bond-lacp-passive;KN-TC: openvswitch/topo FUNC=ovs-test-bond-lacp-passive;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90596
2578;RHEL7-90597;KN-TC: openvswitch/topo FUNC=ovs-test-bond-balance-slb;KN-TC: openvswitch/topo FUNC=ovs-test-bond-balance-slb;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90597
2579;RHEL7-90598;KN-TC: openvswitch/topo FUNC=ovs-test-bond-balance-tcp;KN-TC: openvswitch/topo FUNC=ovs-test-bond-balance-tcp;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90598
2580;RHEL7-90599;KN-TC: openvswitch/topo FUNC=ovs-test-chained-with-veth;KN-TC: openvswitch/topo FUNC=ovs-test-chained-with-veth;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90599
2581;RHEL7-90600;KN-TC: openvswitch/topo FUNC=ovs-test-chained-with-patchport;KN-TC: openvswitch/topo FUNC=ovs-test-chained-with-patchport;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90600
2582;RHEL7-90601;KN-TC: openvswitch/topo FUNC=ovs-test-ns-ovsbr-nic;KN-TC: openvswitch/topo FUNC=ovs-test-ns-ovsbr-nic;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90601
2583;RHEL7-90602;KN-TC: openvswitch/topo FUNC=ovs-test-ns1-ovsbr-ns2;KN-TC: openvswitch/topo FUNC=ovs-test-ns1-ovsbr-ns2;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90602
2584;RHEL7-90603;KN-TC: openvswitch/topo FUNC=ovs-test-ns-veth-ovsbr-nic;KN-TC: openvswitch/topo FUNC=ovs-test-ns-veth-ovsbr-nic;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90603
2585;RHEL7-90604;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-mode-access;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-mode-access;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90604
2586;RHEL7-90605;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-mode-trunk;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-mode-trunk;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90605
2587;RHEL7-90606;KN-TC: openvswitch/of_rules FUNC=of-rules-test-match-arp-ar-spa;KN-TC: openvswitch/of_rules FUNC=of-rules-test-match-arp-ar-spa;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90606
2588;RHEL7-90607;KN-TC: openvswitch/of_rules FUNC=of-rules-test-match-arp-ar-tpa;KN-TC: openvswitch/of_rules FUNC=of-rules-test-match-arp-ar-tpa;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90607
2589;RHEL7-90608;KN-TC: openvswitch/of_rules FUNC=of-rules-test-match-arp-opcode;KN-TC: openvswitch/of_rules FUNC=of-rules-test-match-arp-opcode;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90608
2590;RHEL7-90609;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-flood;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-flood;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90609
2591;RHEL7-90610;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-all;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-all;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90610
2592;RHEL7-90611;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-local;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-local;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90611
2593;RHEL7-90612;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-in-port;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-in-port;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90612
2594;RHEL7-90613;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-vlan-vid-0x8100;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-vlan-vid-0x8100;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90613
2595;RHEL7-90614;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-vlan-vid-0x0800;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-vlan-vid-0x0800;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90614
2596;RHEL7-90615;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-vlan-pcp-0x8100;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-vlan-pcp-0x8100;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90615
2597;RHEL7-90616;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-vlan-pcp-0x0800;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-vlan-pcp-0x0800;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90616
2598;RHEL7-90617;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-strip-vlan;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-strip-vlan;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90617
2599;RHEL7-90618;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-push-vlan;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-push-vlan;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90618
2600;RHEL7-90619;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-push-mpls;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-push-mpls;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90619
2601;RHEL7-90620;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-pop-mpls;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-pop-mpls;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90620
2602;RHEL7-90621;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-dl-src;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-dl-src;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90621
2603;RHEL7-90622;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-dl-dst;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-dl-dst;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90622
2604;RHEL7-90623;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-nw-src;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-nw-src;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90623
2605;RHEL7-90624;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-nw-dst;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-nw-dst;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90624
2606;RHEL7-90625;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-src-tcp;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-src-tcp;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90625
2607;RHEL7-90626;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-src-tcp6;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-src-tcp6;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90626
2608;RHEL7-90627;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-dst-tcp;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-dst-tcp;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90627
2609;RHEL7-90628;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-dst-tcp6;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-dst-tcp6;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90628
2610;RHEL7-90629;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-src-udp;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-src-udp;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90629
2611;RHEL7-90630;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-src-udp6;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-src-udp6;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90630
2612;RHEL7-90631;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-dst-udp;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-dst-udp;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90631
2613;RHEL7-90632;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-dst-udp6;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-dst-udp6;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90632
2614;RHEL7-90633;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-src-sctp;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-src-sctp;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90633
2615;RHEL7-90634;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-dst-sctp;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-tp-dst-sctp;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90634
2616;RHEL7-90635;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-nw-tos4;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-nw-tos4;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90635
2617;RHEL7-90636;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-nw-tos6;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-nw-tos6;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90636
2618;RHEL7-90637;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-nw-ecn4;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-nw-ecn4;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90637
2619;RHEL7-90638;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-nw-ecn6;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-nw-ecn6;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90638
2620;RHEL7-90639;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-nw-ttl4;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-nw-ttl4;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90639
2621;RHEL7-90640;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-nw-ttl6;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-mod-nw-ttl6;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90640
2622;RHEL7-90641;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-dec-ttl4;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-dec-ttl4;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90641
2623;RHEL7-90642;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-dec-ttl6;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-dec-ttl6;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90642
2624;RHEL7-90643;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-mpls-label;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-mpls-label;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90643
2625;RHEL7-90644;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-mpls-label;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-mpls-label;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90644
2626;RHEL7-90645;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-mpls-ttl;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-mpls-ttl;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90645
2627;RHEL7-90646;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-dec-mpls-ttl;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-dec-mpls-ttl;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90646
2628;RHEL7-90647;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-field-ip4;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-field-ip4;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90647
2629;RHEL7-90648;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-field-ip6;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-field-ip6;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90648
2630;RHEL7-90649;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-field-tcp4;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-field-tcp4;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90649
2631;RHEL7-90650;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-field-tcp6;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-field-tcp6;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90650
2632;RHEL7-90651;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-field-udp4;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-field-udp4;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90651
2633;RHEL7-90652;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-field-udp6;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-set-field-udp6;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90652
2634;RHEL7-90653;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-goto-table;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-goto-table;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90653
2635;RHEL7-90654;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-sample4;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-sample4;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90654
2636;RHEL7-90655;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-sample6;KN-TC: openvswitch/of_rules FUNC=of-rules-test-action-sample6;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90655
2637;RHEL7-90656;KN-TC: nic/sanity_check FUNC=broadcast-test;KN-TC: nic/sanity_check FUNC=broadcast-test;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90656
2638;RHEL7-90657;KN-TC: nic/sanity_check FUNC=dev-name-test;KN-TC: nic/sanity_check FUNC=dev-name-test;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90657
2639;RHEL7-90658;KN-TC: nic/sanity_check FUNC=dev-alias-test;KN-TC: nic/sanity_check FUNC=dev-alias-test;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90658
2640;RHEL7-90659;KN-TC: nic/sanity_check FUNC=set-ip-ip;KN-TC: nic/sanity_check FUNC=set-ip-ip;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90659
2641;RHEL7-90660;KN-TC: nic/sanity_check FUNC=set-ip-ifconfig;KN-TC: nic/sanity_check FUNC=set-ip-ifconfig;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90660
2642;RHEL7-90662;KN-TC: nic/sanity_check FUNC=change-mtu-ip;KN-TC: nic/sanity_check FUNC=change-mtu-ip;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90662
2643;RHEL7-90664;KN-TC: nic/sanity_check FUNC=change-mtu-ifconfig;KN-TC: nic/sanity_check FUNC=change-mtu-ifconfig;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90664
2644;RHEL7-90673;KN-TC: nic/sanity_check FUNC=multicast-test;KN-TC: nic/sanity_check FUNC=multicast-test;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90673
2645;RHEL7-90674;KN-TC: nic/sanity_check FUNC=allmulti-test;KN-TC: nic/sanity_check FUNC=allmulti-test;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90674
2646;RHEL7-90675;KN-TC: nic/sanity_check FUNC=para-sanity-test;KN-TC: nic/sanity_check FUNC=para-sanity-test;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90675
2647;RHEL7-90676;KN-TC: nic/sanity_check FUNC=promisc-test;KN-TC: nic/sanity_check FUNC=promisc-test;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90676
2648;RHEL7-90677;KN-TC: nic/sanity_check FUNC=selftest;KN-TC: nic/sanity_check FUNC=selftest;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90677
2649;RHEL7-90678;KN-TC: vlan/tier2/multi_vlan_traffic;KN-TC: vlan/tier2/multi_vlan_traffic;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90678
2650;RHEL7-90679;KN-TC: vlan/tier2/vlan_and_bond_over_nic;KN-TC: vlan/tier2/vlan_and_bond_over_nic;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90679
2651;RHEL7-90680;KN-TC: vlan/tier2/vlan_offload;KN-TC: vlan/tier2/vlan_offload;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90680
2652;RHEL7-90681;KN-TC: vlan/tier2/reorder_hdr;KN-TC: vlan/tier2/reorder_hdr;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90681
2653;RHEL7-90682;KN-TC: vlan/tier2/vlan_and_bridge_over_nic;KN-TC: vlan/tier2/vlan_and_bridge_over_nic;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90682
2654;RHEL7-90683;KN-TC: vlan/tier2/vlan_fragment_test;KN-TC: vlan/tier2/vlan_fragment_test;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90683
2655;RHEL7-90684;KN-TC: vlan/tier2/checksum_with_scp;KN-TC: vlan/tier2/checksum_with_scp;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90684
2656;RHEL7-90685;KN-TC: vlan/vxlan/vxlan_in_br;KN-TC: vlan/vxlan/vxlan_in_br;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90685
2657;RHEL7-90686;KN-TC: bridge/veth/veth_perf;KN-TC: bridge/veth/veth_perf;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90686
2658;RHEL7-90687;KN-TC: bridge/bridge_fdb;KN-TC: bridge/bridge_fdb;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90687
2659;RHEL7-90688;KN-TC: bridge/vlan_filter/multi_vms;KN-TC: bridge/vlan_filter/multi_vms;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90688
2660;RHEL7-90689;KN-TC: bridge/setageing_zero;KN-TC: bridge/setageing_zero;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90689
2661;RHEL7-90690;KN-TC: bridge/bridge_over_bonding;KN-TC: bridge/bridge_over_bonding;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90690
2662;RHEL7-90691;KN-TC: bridge/bridge_over_vlan;KN-TC: bridge/bridge_over_vlan;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90691
2663;RHEL7-90692;KN-TC: bridge/arp_proxy;KN-TC: bridge/arp_proxy;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90692
2664;RHEL7-90694;KN-TC: netperf/regular_netperf FUNC=nic;KN-TC: netperf/regular_netperf FUNC=nic;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90694
2665;RHEL7-90695;KN-TC: netperf/regular_netperf FUNC=nic_vlan;KN-TC: netperf/regular_netperf FUNC=nic_vlan;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90695
2666;RHEL7-90706;WALA-TC: [Storage] Verify storage rule;WALA-TC: [Storage] Verify storage rule;Yuxin Sun (yuxisun);Medium;Positive;Automated;;1;"Prepare a VM of A2 size in Azure.
 1. Check /dev/disk/azure/, there should be soft links to sda and sdb
​​";"# ll /dev/disk/azure
 lrwxrwxrwx. 1 root root  9 May  2 06:01 resource -> ../../sdb
 lrwxrwxrwx. 1 root root 10 May  2 06:01 resource-part1 -> ../../sdb1
 lrwxrwxrwx. 1 root root  9 May  2 06:01 root -> ../../sda
 lrwxrwxrwx. 1 root root 10 May  2 06:01 root-part1 -> ../../sda1
 lrwxrwxrwx. 1 root root 10 May  2 06:01 root-part2 -> ../../sda2
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-90706
2666;;;;;;;;;2;"2. Attach a new disk, then check /dev/disk/azure again. There should be a new folder scsi1, and a soft link to sdc.
​​";"# ll /dev/disk/azure/scsi1
 lrwxrwxrwx. 1 root root 12 May  2 07:59 lun0 -> ../../../sdc";;RedHatEnterpriseLinux7/RHEL7-90706
2666;;;;;;;;;3;"3. Create a partition of the /dev/sdc, then check /dev/disk/azure/scsi1 again. There should be a soft link to sdc1
​​";"# parted /dev/sdc mklabel msdos
 # parted /dev/sdc mkpart primary ext4 1 100
 # ll /dev/disk/azure/scsi1
 lrwxrwxrwx. 1 root root 13 May  2 08:05 lun0-part1 -> ../../../sdc1
​​";;RedHatEnterpriseLinux7/RHEL7-90706
2666;;;;;;;;;4;"4. Remove the partition /dev/sdc1, then check /dev/disk/azure/scsi1.
​​";"# parted /dev/sdc rm 1
 # ll /dev/disk/azure/scsi1/
 lun0 -> ../../../sdc
​​";;RedHatEnterpriseLinux7/RHEL7-90706
2666;;;;;;;;;5;"5. Add another new disk(disk2). Create a partition and check /dev/disk/azure/scsi1.
​​";"# parted /dev/sdc mklabel msdos
 # parted /dev/sdc mkpart primary ext4 1 100
 # ll /dev/disk/azure/scsi1
 lrwxrwxrwx. 1 root root 12 May  2 08:16 lun1 -> ../../../sdd
 lrwxrwxrwx. 1 root root 13 May  2 08:16 lun1-part1 -> ../../../sdd1";;RedHatEnterpriseLinux7/RHEL7-90706
2666;;;;;;;;;6;"6. Restart the VM. Then check /dev/disk/azure/scsi1.
 * The soft links might be changed. But the device_id and lun are matched. Can use udevadm info -a -p /sys/class/block/sdc|grep ATTRS{device_id} to check the device_id
​​";"# ll /dev/disk/azure/scsi1
 lrwxrwxrwx. 1 root root 12 May  2 08:16 lun0 -> ../../../sdc
 lrwxrwxrwx. 1 root root 12 May  2 08:16 lun1 -> ../../../sdd
 lrwxrwxrwx. 1 root root 13 May  2 08:16 lun1-part1 -> ../../../sdd1
​​";;RedHatEnterpriseLinux7/RHEL7-90706
2666;;;;;;;;;7;7. Detach the disk2, then check /dev/disk/azure/scsi1 again.;"There's no sdc and sdc1 links.
​​";;RedHatEnterpriseLinux7/RHEL7-90706
2666;;;;;;;;;8;config;​​;;RedHatEnterpriseLinux7/RHEL7-90706
2667;RHEL7-90782;KN-TC: vnic/sriov FUNC=sriov-test-vmvf1-vmvf2-vlan-remote;KN-TC: vnic/sriov FUNC=sriov-test-vmvf1-vmvf2-vlan-remote;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90782
2668;RHEL7-90784;KN-TC: vnic/sriov FUNC=sriov-test-bz1212361;KN-TC: vnic/sriov FUNC=sriov-test-bz1212361;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90784
2669;RHEL7-90786;KN-TC: vnic/sriov FUNC=sriov-test-bz1145063;KN-TC: vnic/sriov FUNC=sriov-test-bz1145063;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90786
2670;RHEL7-90788;KN-TC: vnic/sriov FUNC=sriov-test-trusted-vf-override-macaddr-via-bonding;KN-TC: vnic/sriov FUNC=sriov-test-trusted-vf-override-macaddr-via-bonding;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90788
2671;RHEL7-90790;KN-TC: vnic/sriov FUNC=sriov-test-bond-failovermac0;KN-TC: vnic/sriov FUNC=sriov-test-bond-failovermac0;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90790
2672;RHEL7-90792;KN-TC: vnic/sriov FUNC=sriov-test-bond-failovermac0-vlan;KN-TC: vnic/sriov FUNC=sriov-test-bond-failovermac0-vlan;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90792
2673;RHEL7-90801;KN-TC: vnic/sriov FUNC=sriov-test-bond-failovermac1-vlan;KN-TC: vnic/sriov FUNC=sriov-test-bond-failovermac1-vlan;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90801
2674;RHEL7-90803;KN-TC: vnic/sriov FUNC=sriov-test-bond-failovermac2;KN-TC: vnic/sriov FUNC=sriov-test-bond-failovermac2;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90803
2675;RHEL7-90804;KN-TC: vnic/sriov FUNC=sriov-test-bond-failovermac2-vlan;KN-TC: vnic/sriov FUNC=sriov-test-bond-failovermac2-vlan;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90804
2676;RHEL7-90805;KN-TC: vnic/sriov FUNC=sriov-test-bz1392128;KN-TC: vnic/sriov FUNC=sriov-test-bz1392128;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90805
2677;RHEL7-90806;KN-TC: vnic/sriov FUNC=sriov-test-trusted-vf-allmutlicast;KN-TC: vnic/sriov FUNC=sriov-test-trusted-vf-allmutlicast;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90806
2678;RHEL7-90807;KN-TC: vnic/sriov FUNC=sriov-test-max-vfs;KN-TC: vnic/sriov FUNC=sriov-test-max-vfs;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90807
2679;RHEL7-90808;KN-TC: vnic/sriov FUNC=sriov-test-vmvf-vlan-offload-remote;KN-TC: vnic/sriov FUNC=sriov-test-vmvf-vlan-offload-remote;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90808
2680;RHEL7-90809;KN-TC: vnic/sriov FUNC=sriov-test-trusted-vf-ipv6addr;KN-TC: vnic/sriov FUNC=sriov-test-trusted-vf-ipv6addr;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90809
2681;RHEL7-90810;KN-TC: vnic/sriov FUNC=sriov-test-max-vfs-attaching-to-different-vms;KN-TC: vnic/sriov FUNC=sriov-test-max-vfs-attaching-to-different-vms;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90810
2682;RHEL7-90857;[mtu] set mtu in network type interface - bug 1408701 1449346;"set mtu in network type interface and check on guest, the setting should work.
";Yalan Zhang (yalzhang);High;Positive;Automated;;1;" 1. default network without mtu settings; one guest with mtu=4000, and the other with mtu=9000
 # virsh net-dumpxml default
 <network connections='2'>
   <name>default</name>
   <uuid>9feee285-f4a5-491e-a68f-0d3ee4805921</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:77:9a:74'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
     </dhcp>
   </ip>
 </network>

 # virsh dumpxml rhel7 | grep /interface -B8
     <interface type='network'>
       <mac address='52:54:00:c2:66:40'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <mtu size='4000'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>

 # virsh dumpxml rhel7.4 | grep /interface -B8
     <interface type='network'>
       <mac address='52:54:00:85:61:9b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet2'/>
       <model type='virtio'/>
       <mtu size='9000'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
"; ;Test Case;RedHatEnterpriseLinux7/RHEL7-90857
2682;;;;;;;;;2;"2.check qemu command line for mtu
 # ps aux | grep qemu-kvm



";"....
 host_mtu=9000  <= for rhel7.4
 ....
 host_mtu=4000  <= for rhel7
 ...";;RedHatEnterpriseLinux7/RHEL7-90857
2682;;;;;;;;;3;3. # ifconfig | grep mtu;"virbr0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
 vnet0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 4000
 vnet2: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 9000";;RedHatEnterpriseLinux7/RHEL7-90857
2682;;;;;;;;;4;"4. after the guest boot, login the guest, check the mtu
 on rhel7
 # ifconfig eth0 | grep mtu
 eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 4000

 on rhel7.4
 # ifconfig eth0 | grep mtu
 eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 9000

";​​;;RedHatEnterpriseLinux7/RHEL7-90857
2682;;;;;;;;;5;"5. on rhel7 ping rhel7.4
 # ping -c 2 -s 3973 192.168.122.234 -M do 


";"ping gailed with:

 PING 192.168.122.234 (192.168.122.234) 3973(4001) bytes of data.
 ping: local error: Message too long, mtu=4000
 ping: local error: Message too long, mtu=4000

 --- 192.168.122.234 ping statistics ---
 2 packets transmitted, 0 received, +2 errors, 100% packet loss, time 1000ms

 (Note: the mtu between rhel7 and rhel7.4 will be the minimum of vnet0 and vnet1, as no forward needed, virbr0's mtu will not be take account.
 rhel7 can send a package with mtu< 4000)";;RedHatEnterpriseLinux7/RHEL7-90857
2682;;;;;;;;;6;"on rhel7 ping rhel7.4
 # ping -c 2 -s 3972 192.168.122.234 -M do ";ping succeed;;RedHatEnterpriseLinux7/RHEL7-90857
2682;;;;;;;;;7;"on rhel7.4:
 # ping -c 2 -s 5000 192.168.122.90 -M do
 ==> no response


";"ping failed and all the packages lost.

 (Note: rhel7.4 can send a packege with mtu <9000, but can not get response as the mtu of the network between rhel7 and rhel7.4 is 4000)";;RedHatEnterpriseLinux7/RHEL7-90857
2682;;;;;;;;;8;"on rhel7.4
 #  ping -c 2 -s 3972 192.168.122.90 -M do";ping succeed;;RedHatEnterpriseLinux7/RHEL7-90857
2683;RHEL7-90858;[mtu] set mtu in network then check in guest interface;"1. set mtu in network, without configuration in interface, the interface will inherent the mtu setting from the network on the host 
Note :  the interface will not get the mtu setting for qemu will ignore this setting.
Detail:
 https://bugzilla.redhat.com/show_bug.cgi?id=1449346#c14 
 https://www.redhat.com/archives/libvir-list/2017-May/msg00786.html 
 
2. set mtu in both in network and in interface, the interface will take its own one, and the network will choose the minimum one from the interfaces connected to it.";Yalan Zhang (yalzhang);High;Positive;Automated;;1;"scenario 1: mtu only in network
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-90858
2683;;;;;;;;;2;"confirm use packages newer than 
 kernel 3.10.0-613.el7.x86_64 
 qemu-kvm-rhev-2.9.0
 libvirt-3.1.0
 use virtio model type
 
 define a network with mtu=9000, and 2 guests with virtio model type connected to this network
 
 # virsh net-dumpxml isolated
 <network connections='2'>
   <name>isolated</name>
   <uuid>d6a548bb-172a-4b60-9263-df4c4709cdd5</uuid>
   <bridge name='virbr1' stp='on' delay='0'/>
   <mtu size='9000'/>
   <mac address='52:54:00:b0:8c:46'/>
   <ip address='192.168.100.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.100.2' end='192.168.100.254'/>
     </dhcp>
   </ip>
 </network>
 
 # virsh dumpxml rhel7 | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:c2:66:40'/>
       <source network='isolated' bridge='virbr1'/>
       <target dev='vnet1'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh dumpxml rhel7.4 | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:85:61:9b'/>
       <source network='isolated' bridge='virbr1'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";"
 
​​";;RedHatEnterpriseLinux7/RHEL7-90858
2683;;;;;;;;;3;"1.  start the 2 guests, check on host, the bridge virbr1 and the tap devices connected to this bridge have a mtu 9000
 # virsh start rhel7.4 
 # virsh start rhel7
 # ifconfig | grep mtu";"# ifconfig | grep mtu
 lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
 virbr1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 9000
 vnet0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 9000
 vnet1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 9000";;RedHatEnterpriseLinux7/RHEL7-90858
2683;;;;;;;;;4;"login guest and check mtu value on guest
 # ifconfig eth0 | grep mtu";...mtu 9000...;;RedHatEnterpriseLinux7/RHEL7-90858
2683;;;;;;;;;5;"2. destroy the network and 2 guests, edit the network to delete the mtu settings, then start the network and the guests, check the mtu is 1500
 
 # ifconfig | grep mtu
 
​​";"virbr1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
 vnet0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
 vnet1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500";;RedHatEnterpriseLinux7/RHEL7-90858
2683;;;;;;;;;6;"login guest and check mtu value on guest
 # ifconfig eth0| grep mtu";...mtu 1500...;;RedHatEnterpriseLinux7/RHEL7-90858
2683;;;;;;;;;7;scenario 2: set mtu both in network and interface;​​;;RedHatEnterpriseLinux7/RHEL7-90858
2683;;;;;;;;;8;"1. set mtu size=9000 in network and 4000 in the interface
 # virsh net-dumpxml default
 ...
 <mtu size='9000'/>
 ...
 # virsh dumpxml rhel7 | grep /interface -B6
     <interface type='network'>
       <mac address='52:54:00:c2:66:40'/>
       <source network='default'/>
       <model type='virtio'/>
       <mtu size='4000'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-90858
2683;;;;;;;;;9;"2. # virsh net-start default
 # ifconfig virbr0 | grep mtu
​​";virbr0: flags=4099<UP,BROADCAST,MULTICAST>  mtu 9000;;RedHatEnterpriseLinux7/RHEL7-90858
2683;;;;;;;;;10;"3. # virsh start rhel7
 Domain rhel7 started
 # ifconfig  | grep mtu
​​";"virbr0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 4000
 vnet0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 4000
 
 (mtu of bridge change to 4000, the mtu of the bridge will change to the min one in all the connected interfaces)";;RedHatEnterpriseLinux7/RHEL7-90858
2683;;;;;;;;;11;"login guest, and check the mtu on guest, should be 4000
 # ifconfig eth0 | grep mtu";...mtu 4000...;;RedHatEnterpriseLinux7/RHEL7-90858
2683;;;;;;;;;12;"4. attach an interface with source network default, the mtu of vnetx will be the same with the bridge
 
 # virsh attach-interface rhel7 network default 
 Interface attached successfully
 
 # ifconfig | grep mtu
​​";"virbr0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 4000
 vnet0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 4000
 vnet1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 4000";;RedHatEnterpriseLinux7/RHEL7-90858
2684;RHEL7-90867;WALA-TC: [General] Event clean up when > 1000;WALA-TC: [General] Event clean up when > 1000;Yuxin Sun (yuxisun);Medium;Positive;Automated;;1;"Prepare a VM on Azure
 1. Create 1000 files in /var/lib/waagent/events (The ""test0001"" is the first file created)
​​";"# touch /var/lib/waagent/events/test0001
 # touch /var/lib/waagent/events/test{0002..1000}.tld
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-90867
2684;;;;;;;;;2;"2. Restart waagent service
​​";​​;;RedHatEnterpriseLinux7/RHEL7-90867
2684;;;;;;;;;3;"3. Wait until the .tld file existed. Check if the test0001 file is removed.
​​";"# ls /var/lib/waagent/events/test0001
 ls: cannot access /var/lib/waagent/events/test0001: No such file or directory
​​";;RedHatEnterpriseLinux7/RHEL7-90867
2684;;;;;;;;;4;"4. Check /var/log/waagent.log
​​";No error logs. Only a warning log: WARNING Too many files under: /var/lib/waagent/events, removing oldest;;RedHatEnterpriseLinux7/RHEL7-90867
2684;;;;;;;;;5;config;​​;;RedHatEnterpriseLinux7/RHEL7-90867
2685;RHEL7-90877;WALA-TC: [General] host plugin - Blob status upload;WALA-TC: [General] host plugin - Blob status upload;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"1. Prepare a VM on azure with WALA installed.
 Attach an NSG to this VM with ACLs:
 outbound:deny 443 port
";"Note: Add NSG rule or Remove NSG rule,there will be some delay to take affect,msybe 1 minute.
 you can also use iptables rules to deny 443 port(This take affect immediately)
 #  iptables -A OUTPUT -p tcp --dport 443 -j DROP 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-90877
2685;;;;;;;;;2;"2. Wait for 25 seconds, check /var/log/waagent.log
 There should be ""HostGAPlugin: Put BlockBlob status succeeded"".
​​";"2017/05/03 16:48:48.680921 VERBOSE Get extension handler config
 2017/05/03 16:48:48.687579 VERBOSE Sleep 1 second to avoid throttling.
 2017/05/03 16:48:49.696036 VERBOSE HTTP connection [GET] [/machine/?comp=goalstate] [None] [{'x-ms-version': '2012-11-30', 'x-ms-agent-name': 'WALinuxAgent'}]
 2017/05/03 16:48:49.714888 VERBOSE HTTP response status: [200]
 2017/05/03 16:48:49.726268 VERBOSE Load GoalState.xml
 2017/05/03 16:48:49.733102 VERBOSE Handle extensions updates for incarnation 1
 2017/05/03 16:48:49.740315 VERBOSE No extension handler config found
 2017/05/03 16:48:49.747261 VERBOSE Report vm agent status
 2017/05/03 16:48:49.753591 VERBOSE Prepare status blob
 2017/05/03 16:48:49.758784 VERBOSE Get blob type
 2017/05/03 16:48:49.777158 VERBOSE HTTP connection [HEAD] [/vhds/wala740426wala2210a.wala740426wala2210a.wala740426wala2210a.status?sr=b&sp=rw&se=9999-01-01&sk=key1&sv=2014-02-14&sig=5EarOIbl3LVprcA%2BLsK%2B7G0qEdZS%2B7g0BuPwcUZr%2B5U%3D] [None] [{'x-ms-version': '2014-02-14', 'x-ms-date': '2017-05-03T08:48:49Z'}]
 2017/05/03 16:48:59.838427 VERBOSE HTTP connection [HEAD] [/vhds/wala740426wala2210a.wala740426wala2210a.wala740426wala2210a.status?sr=b&sp=rw&se=9999-01-01&sk=key1&sv=2014-02-14&sig=5EarOIbl3LVprcA%2BLsK%2B7G0qEdZS%2B7g0BuPwcUZr%2B5U%3D] [None] [{'x-ms-version': '2014-02-14', 'x-ms-date': '2017-05-03T08:48:49Z'}]
 2017/05/03 16:49:10.111568 VERBOSE HTTP connection [HEAD] [/vhds/wala740426wala2210a.wala740426wala2210a.wala740426wala2210a.status?sr=b&sp=rw&se=9999-01-01&sk=key1&sv=2014-02-14&sig=5EarOIbl3LVprcA%2BLsK%2B7G0qEdZS%2B7g0BuPwcUZr%2B5U%3D] [None] [{'x-ms-version': '2014-02-14', 'x-ms-date': '2017-05-03T08:48:49Z'}]
 2017/05/03 16:49:20.159443 VERBOSE HostGAPlugin: Getting API versions at [http://168.63.129.16:32526/versions]
 2017/05/03 16:49:20.169694 VERBOSE HTTP connection [GET] [/versions] [None] [{'x-ms-containerid': u'ad0abf6b-048f-402c-b2f6-90b8e9711daa'}]
 2017/05/03 16:49:20.184761 VERBOSE HTTP response status: [200]
 2017/05/03 16:49:20.192361 INFO Event: name=WALinuxAgent, op=InitializeHostPlugin, message=
 2017/05/03 16:49:20.201264 VERBOSE HostGAPlugin: Posting VM status
 2017/05/03 16:49:20.204969 VERBOSE HTTP connection [PUT] [/status] [{""content"": ""eyJhZ2dyZWdhdGVTdGF0dXMiOiB7Imd1ZXN0QWdlbnRTdGF0dXMiOiB7InN0YXR1cyI6ICJSZWFkeSIsICJmb3JtYXR0ZWRNZXNzYWdlIjogeyJsYW5nIjogImVuLVVTIiwgIm1lc3NhZ2UiOiAiR3Vlc3QgQWdlbnQgaXMgcnVubmluZyJ9LCAiaG9zdG5hbWUiOiAid2FsYTc0MDQyNndhbGEyMjEwYSIsICJvc25hbWUiOiAicmVkaGF0IiwgInZlcnNpb24iOiAiMi4yLjEwIiwgIm9zdmVyc2lvbiI6ICI3LjQifSwgImhhbmRsZXJBZ2dyZWdhdGVTdGF0dXMiOiBbXX0sICJ2ZXJzaW9uIjogIjEuMSIsICJ0aW1lc3RhbXBVVEMiOiAiMjAxNy0wNS0wM1QwODo0ODo0OVoifQ=="", ""headers"": [{""headerName"": ""Content-Length"", ""headerValue"": ""322""}, {""headerName"": ""x-ms-version"", ""headerValue"": ""2014-02-14""}, {""headerName"": ""x-ms-blob-type"", ""headerValue"": ""BlockBlob""}, {""headerName"": ""x-ms-date"", ""headerValue"": ""2017-05-03T08:49:20Z""}], ""requestUri"": ""https://walaautoasmsea.blob.core.windows.net/vhds/wala740426wala2210a.wala740426wala2210a.wala740426wala2210a.status?sr=b&sp=rw&se=9999-01-01&sk=key1&sv=2014-02-14&sig=5EarOIbl3LVprcA%2BLsK%2B7G0qEdZS%2B7g0BuPwcUZr%2B5U%3D""}] [{'x-ms-containerid': u'ad0abf6b-048f-402c-b2f6-90b8e9711daa', 'x-ms-host-config-name': u'd5af276af5324a72b869ca4b1b9f9a06.0.d5af276af5324a72b869ca4b1b9f9a06.0.wala740426wala2210a.1.xml', 'x-ms-version': '2015-09-01', 'Content-type': 'application/json'}]
 2017/05/03 16:49:20.366139 VERBOSE HTTP response status: [200]
 2017/05/03 16:49:20.383494 VERBOSE HostGAPlugin: Put BlockBlob status succeeded
 2017/05/03 16:49:20.396504 INFO HostGAPlugin: Setting host plugin as default channel
 2017/05/03 16:49:20.405525 VERBOSE Completed vm agent status report
 
​​";;RedHatEnterpriseLinux7/RHEL7-90877
2685;;;;;;;;;3;"3. Stop waagent
 
​​";"systemctl stop waagent
​​";;RedHatEnterpriseLinux7/RHEL7-90877
2685;;;;;;;;;4;"4.Decode the ""content"" value in waagent.log and get ""timestampUTC"".";"# echo ""eyJhZ2dyZWdhdGVTdGF0dXMiOiB7Imd1ZXN0QWdlbnRTdGF0dXMiOiB7InN0YXR1cyI6ICJSZWFkeSIsICJmb3JtYXR0ZWRNZXNzYWdlIjogeyJsYW5nIjogImVuLVVTIiwgIm1lc3NhZ2UiOiAiR3Vlc3QgQWdlbnQgaXMgcnVubmluZyJ9LCAiaG9zdG5hbWUiOiAid2FsYTc0MDQyNndhbGEyMjEwYSIsICJvc25hbWUiOiAicmVkaGF0IiwgInZlcnNpb24iOiAiMi4yLjEwIiwgIm9zdmVyc2lvbiI6ICI3LjQifSwgImhhbmRsZXJBZ2dyZWdhdGVTdGF0dXMiOiBbXX0sICJ2ZXJzaW9uIjogIjEuMSIsICJ0aW1lc3RhbXBVVEMiOiAiMjAxNy0wNS0wM1QwODo0ODo0OVoifQ==""|base64 -d
 ...""timestampUTC"": ""2017-05-03T08:48:49Z""";;RedHatEnterpriseLinux7/RHEL7-90877
2685;;;;;;;;;5;5. Remove the NSG deny rule. Get VM status from blob server. The timestampUTC should equal.;" # iptables -D OUTPUT -d 168.63.161.174 -p tcp --dport 443 -j DROP
 # curl ""https://walaautoasmsea.blob.core.windows.net/vhds/wala740426wala2210a.wala740426wala2210a.wala740426wala2210a.status?sr=b&sp=rw&se=9999-01-01&sk=key1&sv=2014-02-14&sig=5EarOIbl3LVprcA%2BLsK%2B7G0qEdZS%2B7g0BuPwcUZr%2B5U%3D""
 ""timestampUTC"": ""2017-05-03T08:48:49Z"" 
​​";;RedHatEnterpriseLinux7/RHEL7-90877
2685;;;;;;;;;6;config;​​;;RedHatEnterpriseLinux7/RHEL7-90877
2686;RHEL7-90880;WALA-TC: [life cycle] Create a VM with managed disk(ARM only);WALA-TC: [life cycle] Create a VM with managed disk(ARM only);Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"1. Prepare a storage blob with the VHD in it.
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-90880
2686;;;;;;;;;2;"2. Create an image base on the storage blob.(This is NOT the ASM image)
 On Azure portal: Images -> Add -> Create Image
​​";An image is created.;;RedHatEnterpriseLinux7/RHEL7-90880
2686;;;;;;;;;3;"3. Create a VM base on the image:
 On Azure portal: Images -> click the image we just created -> Create VM. On page ""3 Settings"", there's ""Use managed disks"" on the top. This VM use a managed disk. Fill all fields and create VM.
​​";"The VM can be created and running.
​​";;RedHatEnterpriseLinux7/RHEL7-90880
2686;;;;;;;;;4;"4. Login the VM. Check status:
 1). user account
 2). hostname and DNS
 3). swap
 4). /var/log/waagent.log and /var/log/messages
​​";"All the status are correct. There's no error logs.
​​";;RedHatEnterpriseLinux7/RHEL7-90880
2686;;;;;;;;;5;config;​​;;RedHatEnterpriseLinux7/RHEL7-90880
2687;RHEL7-90885;WALA-TC: [Settings] Extension uninstall;WALA-TC: [Settings] Extension uninstall;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"Prepare a VM in Azure
 1. Reset remote access to install the VMAccessForLinux extension
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-90885
2687;;;;;;;;;2;"2. Uninstall extension
​​";"# az vm extension delete -n enablevmaccess --vm-name vmname --resource-group groupname
 
​​";;RedHatEnterpriseLinux7/RHEL7-90885
2687;;;;;;;;;3;"3. Login VM. Check extension
​​";"# ll /var/lib/waagent
 The decoded extension folder is removed.
​​";;RedHatEnterpriseLinux7/RHEL7-90885
2687;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-90885
2688;RHEL7-90901;[mtu] set mtu in direct or hostdev type interface and other interfaces (not support);"mtu is not supported in other network types except for nat, route, isolated,open; for interface, mtu not support in interface type=direct or hostdev
";Yalan Zhang (yalzhang);High;Negative;Automated;;1;"scenario 1: macvtap network 
 # cat direct.xml
 <network>
   <name>direct-macvtap</name>
   <forward mode=""bridge"">
     <interface dev=""enp0s25""/>
   </forward>
 <mtu size='3000'/>
 </network>
​​";"
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-90901
2688;;;;;;;;;2;# virsh net-define direct.xml;"error: Failed to define network from direct.xml
 error: XML error: mtu size only allowed in open, route, nat, and isolated mode, not in bridge (network 'direct-macvtap')";;RedHatEnterpriseLinux7/RHEL7-90901
2688;;;;;;;;;3;# virsh net-create direct.xml;"error: Failed to create network from direct.xml
 error: XML error: mtu size only allowed in open, route, nat, and isolated mode, not in bridge (network 'direct-macvtap')";;RedHatEnterpriseLinux7/RHEL7-90901
2688;;;;;;;;;4;"macvtap interface
​​";​​;;RedHatEnterpriseLinux7/RHEL7-90901
2688;;;;;;;;;5;"1. use interface without a network
 # virsh edit rhel7 ==> add mtu in macvtap interface
   <interface type='direct'>
       <source dev='enp0s25' mode='vepa'/>
      <mtu size='9000'/>
      <model type='rtl8139'/>
     </interface>
 
 error: unsupported configuration: setting MTU on interface type direct is not supported yet
 Failed. Try again? [y,n,i,f,?]: 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-90901
2688;;;;;;;;;6;"2. use interface from a macvtap network
 # virsh net-dumpxml direct-macvtap
 <network>
   <name>direct-macvtap</name>
   <uuid>ccee78a5-13bb-4047-b52c-803d94db372f</uuid>
   <forward dev='enp0s25' mode='bridge'>
     <interface dev='enp0s25'/>
   </forward>
 </network>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-90901
2688;;;;;;;;;7;"3. one interface use this network as source network ,set mtu in the macvtap interface
 
 # virsh dumpxml rhel7 | grep /interface -B9
  <interface type='network'>
       <mac address='52:54:00:d8:4f:b3'/>
       <source network='direct-macvtap'/>
       <model type='rtl8139'/>
       <mtu size='9000'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-90901
2688;;;;;;;;;8;"# virsh start rhel7
​​";"error: Failed to start domain rhel7
 error: Cannot set interface MTU on 'macvtap0': Invalid argument";;RedHatEnterpriseLinux7/RHEL7-90901
2688;;;;;;;;;9;"scenario 2: pci passthrough network
​​";​​;;RedHatEnterpriseLinux7/RHEL7-90901
2688;;;;;;;;;10;"# virsh net-dumpxml hostnet
 <network>
   <name>hostnet</name>
   <uuid>c1fb4ead-21b8-4d69-8ad9-669c55b3dfc7</uuid>
   <forward mode='hostdev' managed='yes'>
     <driver name='vfio'/>
     <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x0'/>
     <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x2'/>
   </forward>
 </network>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-90901
2688;;;;;;;;;11;"# virsh net-edit hostnet  ==> add ""<mtu size='4000'/>""";"error: XML error: mtu size only allowed in open, route, nat, and isolated mode, not in hostdev (network 'hostnet')
 Failed. Try again? [y,n,f,?]:";;RedHatEnterpriseLinux7/RHEL7-90901
2688;;;;;;;;;12;"# cat hostnet1.xml 
 <network>
   <name>hostnet1</name>
 <mtu size='4000'/>
   <forward mode='hostdev' managed='yes'>
     <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x0'/>
     <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x2'/>
   </forward>
 </network>
 
 # virsh net-define hostnet1.xml 
​​";"error: Failed to define network from hostnet1.xml
 error: XML error: mtu size only allowed in open, route, nat, and isolated mode, not in hostdev (network 'hostnet1')";;RedHatEnterpriseLinux7/RHEL7-90901
2688;;;;;;;;;13;"# virsh net-create hostnet1.xml 
​​";"error: Failed to create network from hostnet1.xml
 error: XML error: mtu size only allowed in open, route, nat, and isolated mode, not in hostdev (network 'hostnet1')";;RedHatEnterpriseLinux7/RHEL7-90901
2688;;;;;;;;;14;PCI passthrough interface;​​;;RedHatEnterpriseLinux7/RHEL7-90901
2688;;;;;;;;;15;"1. interface without a network
 # virsh edit V2
   <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:20:73:a7'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x0'/>
       </source>
       <model type='rtl8139'/>
       <mtu size='7000'/>
       <alias name='hostdev0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
​​";"error: unsupported configuration: setting MTU on interface type hostdev is not supported yet
 Failed. Try again? [y,n,i,f,?]:
 
 
 (the mtu is not supported in hostdev interface)";;RedHatEnterpriseLinux7/RHEL7-90901
2688;;;;;;;;;16;"2. interface from a network
 # virsh net-dumpxml hostnet
 <network>
   <name>hostnet</name>
   <uuid>c1fb4ead-21b8-4d69-8ad9-669c55b3dfc7</uuid>
   <forward mode='hostdev' managed='yes'>
     <driver name='vfio'/>
     <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x0'/>
     <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x2'/>
   </forward>
 </network>
 
 # virsh dumpxml V2 | grep /interface -B7 
     <interface type='network'>
       <mac address='52:54:00:44:fd:d8'/>
       <source network='hostnet'/>
       <model type='rtl8139'/>
       <mtu size='9000'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-90901
2688;;;;;;;;;17;"3. # virsh start V2
 Domain V2 started
 
 # virsh dumpxml V2 | grep /interface -B11
    <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:44:fd:d8'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x0'/>
       </source>
       <model type='rtl8139'/>
       <mtu size='9000'/>
       <alias name='hostdev0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>";if set mtu in the interface connected to a hostdev network, as no tap/tun device will be created, the model type and mtu settings will be a dummy in the xml, no impact ;;RedHatEnterpriseLinux7/RHEL7-90901
2689;RHEL7-90902;[mtu] test the boundary of mtu size for network and interface and check boundry for different model type in guest;"1. for network, the max value is 0~65521; 2. in the guest interface xml, the max value is also 65521 as this the limitation for tap device on host; 3. for different model type, the max value we can set on guest: rtl8139 is 4096, virtio 65535, e1000 16110, e1000e 9212, for virtio, no need to set the value on guest, it will get automatically, for other types, we need to set it on guest to make it works.";Yalan Zhang (yalzhang);High;Positive;Manual Only;;1; scenario 1: for network;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;2;"1. edit the network to with <mtu='-5'/>
 # virsh net-edit default
 Network default XML configuration edited.

 # virsh net-dumpxml default



";"<network>
   <name>default</name>
   <uuid>9feee285-f4a5-491e-a68f-0d3ee4805921</uuid>
   <forward mode='nat'/>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mtu size='4294967291'/>
   <mac address='52:54:00:77:9a:74'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
     </dhcp>
   </ip>
 </network>

 (Any negative number will be changed to big number, and the network can not start)";;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;3;# virsh net-start default;"error: Failed to start network default
 error: Cannot set interface MTU on 'virbr0-nic': Invalid argument";;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;4;"2. set <mtu size='0'/>
 # virsh net-edit default
 Network default XML configuration edited.
 # virsh net-dumpxml default
 ===> the mtu setting will be ignored";it will be ignored;;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;5;"3. set <mtu size='dsf'/>
 # virsh net-edit default
 error: XML error: Invalid mtu size 'dsf' in network 'default'
 Failed. Try again? [y,n,f,?]:   ===> press 'f'
 error: XML error: Invalid mtu size 'dsf' in network 'default'
 Failed. Try again? [y,n,f,?]:
";'dsf' can not save;;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;6;"4. set <mtu size='65536'/>
 # virsh net-start default
 error: XML error: Invalid mtu size 'dsf' in network 'default'
 Failed. Try again? [y,n,f,?]:
";'65536' can not save;;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;7;"6. set <mtu size='65521'/ >, then start the guest
";guest start succesfully with mtu size is 65521;;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;8;"7. set <mtu size='65522'/>, then start
 
 # virsh net-start default
 error: Failed to start network default
 error: Cannot set interface MTU on 'virbr0-nic': Invalid argument";guest can not start with mtu size is 65522;;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;9;"Scenario 2: for interface
";​​;;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;10;"1. set negtive mtu in interface
    <interface type='network'>
       <source network='default'/>
 <mtu size='-1'/>
 <model type='virtio'/>
     </interface>
 # virsh edit rhel7
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content

 Failed. Try again? [y,n,i,f,?]:
";validate fail if use mtu=-1;;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;11;"2.change to mtu=0
 ==> 
 Domain rhel7 XML configuration edited.
";mtu=0 is ignored;;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;12;"3. <mtu size='sdf'/>
 ===>
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content

 Failed. Try again? [y,n,i,f,?]:
";'sdf' can not save;;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;13;"4. set <mtu size='65535'/>
 # virsh edit rhel7
 Domain rhel7 XML configuration edited.
 # virsh start rhel7
 error: Failed to start domain rhel7
 error: Cannot set interface MTU on 'vnet0': Invalid argument

";the max value is 65521 for a tap/tun device;;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;14;"5. set <mtu size='65521'/>
 # virsh start rhel7
 Domain rhel7 started
 # ifconfig | grep mtu
​​";vnet0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 65521;;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;15;"scenario 3: check boundry for different model type
";​​;;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;16;for model type other than virtio, need to set mtu manually in guest additionally;​​;;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;17;"start a guest with below interface
 <interface type='network'>
 <source network='default'/>
 <model type='rtl8139'> => rtl8139/e1000/e1000e
 <mtu size='65521'/>
 </interface>
";​​;;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;18;"on guest for rtl8139
 # ifconfig ens9 mtu 4096
 # ifconfig ens9 | grep mtu
 ens9: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 4096
 # ifconfig ens9 mtu 4097
 SIOCSIFMTU: Invalid argument";max value for rtl8139 is 4096;;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;19;"on guest for e1000:
 # ifconfig ens10 mtu 16110
 # ifconfig ens10 | grep mtu
 ens10: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 16110
 # ifconfig ens10 mtu 16111
 [  441.042523] e1000 0000:00:0a.0 ens10: Invalid MTU setting
 SIOCSIFMTU: Invalid argument
";max value for e1000 is 16110;;RedHatEnterpriseLinux7/RHEL7-90902
2689;;;;;;;;;20;"on guest for e1000e:
 # ifconfig ens11 mtu 9212
 # ifconfig ens11 | grep mtu
 ens11: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 9212
 # ifconfig ens11 mtu 9213
 [ 1154.106578] e1000e 0000:00:0b.0 ens11: Unsupported MTU setting
 SIOCSIFMTU: Invalid argument
";max value for e1000e is 9212;;RedHatEnterpriseLinux7/RHEL7-90902
2690;RHEL7-90903;[mtu] mtu set in bridge type network or interface;mtu set in network with forward mode=bridge is not supported, set in interface using a bridge with physical interface connected is supported. The guest works well with the mtu setting.;Yalan Zhang (yalzhang);High;Positive;Automated;;1;bridge type network;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-90903
2690;;;;;;;;;2;"1. create a bridge and add physical interface to it
 # brctl show
 bridge name    bridge id        STP enabled    interfaces
 br0        8000.00247e054232    no        enp0s25
 
 # cat br.xml
 <network>
   <name>host-bridge</name>
   <forward mode=""bridge""/>
   <mtu size='4000'/>
   <bridge name=""br0""/>
 </network>
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-90903
2690;;;;;;;;;3;# virsh net-define br.xml;"error: Failed to define network from br.xml
 error: XML error: mtu size only allowed in open, route, nat, and isolated mode, not in bridge (network 'host-bridge')";;RedHatEnterpriseLinux7/RHEL7-90903
2690;;;;;;;;;4;# virsh net-create br.xml;"error: Failed to create network from br.xml
 error: XML error: mtu size only allowed in open, route, nat, and isolated mode, not in bridge (network 'host-bridge')";;RedHatEnterpriseLinux7/RHEL7-90903
2690;;;;;;;;;5;network type interface pointed to a bridge with physical interface connected;set in interface with interface type=network is allowed, even the network use bridge with a physical interface connected.;;RedHatEnterpriseLinux7/RHEL7-90903
2690;;;;;;;;;6;"1. interface from network
 # brctl show
 bridge name    bridge id        STP enabled    interfaces
 br0        8000.00247e054232    no        enp0s25
 
 # virsh net-dumpxml host-bridge
 <network>
   <name>host-bridge</name>
   <uuid>71b1f41d-4bea-4603-88e1-0a7cee5c5c71</uuid>
   <forward mode='bridge'/>
   <bridge name='br0'/>
 </network>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-90903
2690;;;;;;;;;7;"2. # virsh dumpxml rhel7 | grep /interface -B6
     <interface type='network'>
       <mac address='52:54:00:d8:4f:b3'/>
       <source network='host-bridge'/>
       <model type='virtio'/>
       <mtu size='9000'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-90903
2690;;;;;;;;;8;# virsh start rhel7;guest start successfully;;RedHatEnterpriseLinux7/RHEL7-90903
2690;;;;;;;;;9;# virsh dumpxml rhel7 | grep /interface -B8;"     <interface type='bridge'>
       <mac address='52:54:00:d8:4f:b3'/>
       <source network='host-bridge' bridge='br0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <mtu size='9000'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-90903
2690;;;;;;;;;10;# ifconfig | grep mtu;"br0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
 enp0s25: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
 lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
 vnet0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 9000";;RedHatEnterpriseLinux7/RHEL7-90903
2690;;;;;;;;;11;bridge type interface without network defined;set mtu in interface with interface type=bridge is supported;;RedHatEnterpriseLinux7/RHEL7-90903
2690;;;;;;;;;12;"# brctl show
 bridge name    bridge id        STP enabled    interfaces
 br0        8000.00247e054232    no        enp0s25
 
 # virsh dumpxml rhel7 | grep /interface -B5
     <interface type='bridge'>
       <mac address='52:54:00:db:47:9f'/>
       <source bridge='br0'/>
     <mtu size='9000'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-90903
2690;;;;;;;;;13;"# virsh start rhel7
​​";domain rhel7 started;;RedHatEnterpriseLinux7/RHEL7-90903
2690;;;;;;;;;14;# ifconfig | grep mtu;"br0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
 enp0s25: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
 lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
 vnet0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 9000";;RedHatEnterpriseLinux7/RHEL7-90903
2691;RHEL7-90907;WALA-TC: [Settings] Extension update;WALA-TC: [Settings] Extension update;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;1. Prepare a VM on Azure with old version extension installed. (VMAccessForLinux-1.4.0.0);"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-90907
2691;;;;;;;;;2;"2. Check if the extension can update automatically. (Update to VMAccessForLinux-1.4.1.0)
 Check if there's error log in /var/log/waagent.log";"Extension can be updated.
 There's no error logs in waagent.log.";;RedHatEnterpriseLinux7/RHEL7-90907
2691;;;;;;;;;3;"3. Execute ""reset remote access"" to check if the new extension works well.";"Can reset remote access.
 The new extension works well.";;RedHatEnterpriseLinux7/RHEL7-90907
2691;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-90907
2692;RHEL7-90923;[mtu] mtu set in network with openvswitch or interface with openvswitch;mtu set in network with forward mode=bridge is not supported, set in interface using a openvswitch bridge with physical interface connected is supported. The guest works well with the mtu setting.;Yalan Zhang (yalzhang);High;Positive;Automated;;1;"install openvswitch package on the host
 # systemctl start openvswitch.service
 # ovs-vsctl add-br ovsbr0
 # ovs-vsctl show
 34660744-240e-436c-82b4-61eb764ccc71
     Bridge ""ovsbr0""
         Port ""ovsbr0""
             Interface ""ovsbr0""
                 type: internal
     ovs_version: ""2.6.1""
 
 # ovs-vsctl add-port  ovsbr0 enp0s25
 # ovs-vsctl show
 34660744-240e-436c-82b4-61eb764ccc71
     Bridge ""ovsbr0""
         Port ""enp0s25""
             Interface ""enp0s25""
         Port ""ovsbr0""
             Interface ""ovsbr0""
                 type: internal
     ovs_version: ""2.6.1""";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-90923
2692;;;;;;;;;2;"network with mtu setting
​​";​​;;RedHatEnterpriseLinux7/RHEL7-90923
2692;;;;;;;;;3;"1. # cat openv.xml 
 <network>
   <name>ovs-net</name>
   <forward mode='bridge'/>
  <mtu size='9000'/>
   <bridge name='ovsbr0'/>
   <virtualport type='openvswitch'/>
 </network>
 
 # virsh net-define openv.xml 
​​";"error: Failed to define network from openv.xml
 error: XML error: mtu size only allowed in open, route, nat, and isolated mode, not in bridge (network 'ovs-net')";;RedHatEnterpriseLinux7/RHEL7-90923
2692;;;;;;;;;4;# virsh net-create openv.xml;"error: Failed to create network from openv.xml
 error: XML error: mtu size only allowed in open, route, nat, and isolated mode, not in bridge (network 'ovs-net')";;RedHatEnterpriseLinux7/RHEL7-90923
2692;;;;;;;;;5;interface with source network; supported;;RedHatEnterpriseLinux7/RHEL7-90923
2692;;;;;;;;;6;"# cat openv.xml 
 <network>
   <name>ovs-net</name>
   <forward mode='bridge'/>
   <bridge name='ovsbr0'/>
   <virtualport type='openvswitch'/>
 </network>
 # virsh net-define openv.xml 
 Network ovs-net defined from openv.xml
 
 # virsh net-start ovs-net
 Network ovs-net started
 # virsh edit rhel7
   <interface type='network'>
       <source network='ovs-net'/>
       <model type='virtio'/>
       <mtu size='9000'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-90923
2692;;;;;;;;;7;"# virsh start rhel7
​​";Domain rhel7 started;;RedHatEnterpriseLinux7/RHEL7-90923
2692;;;;;;;;;8;# virsh dumpxml rhel7 | grep /interface -B11;"    <interface type='bridge'>
       <mac address='52:54:00:db:47:9f'/>
       <source network='ovs-net' bridge='ovsbr0'/>
       <virtualport type='openvswitch'>
         <parameters interfaceid='5669a5c0-f9de-404e-bf2f-5b58a45b5418'/>
       </virtualport>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <mtu size='9000'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-90923
2692;;;;;;;;;9;"interface without source network
​​";​​;;RedHatEnterpriseLinux7/RHEL7-90923
2692;;;;;;;;;10;"# virsh dumpxml rhel7 | grep /interface -B6
     <interface type='bridge'>
       <mac address='52:54:00:db:47:9f'/>
       <source bridge='ovsbr0'/>
 <virtualport type='openvswitch'/>
       <model type='virtio'/>
       <mtu size='9000'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";the guest can start, and vnet0 will get the mtu 9000, the bridge and other interface keep the default mtu 1500;;RedHatEnterpriseLinux7/RHEL7-90923
2692;;;;;;;;;11;# virsh start rhel7;Domain rhel7 started;;RedHatEnterpriseLinux7/RHEL7-90923
2692;;;;;;;;;12;# ovs-vsctl show;"34660744-240e-436c-82b4-61eb764ccc71
     Bridge ""ovsbr0""
         Port ""enp0s25""
             Interface ""enp0s25""
         Port ""ovsbr0""
             Interface ""ovsbr0""
                 type: internal
         Port ""vnet0""
             Interface ""vnet0""
     ovs_version: ""2.6.1""";;RedHatEnterpriseLinux7/RHEL7-90923
2692;;;;;;;;;13;# ifconfig | grep mtu;"enp0s25: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
 lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
 ovs-system: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
 ovsbr0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
 vnet0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 9000";;RedHatEnterpriseLinux7/RHEL7-90923
2693;RHEL7-90930;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-vms-vlans;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-vms-vlans;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90930
2694;RHEL7-90931;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-remote;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-remote;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90931
2695;RHEL7-90932;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-linux-qinq;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-linux-qinq;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90932
2696;RHEL7-90933;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-bridge;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-bridge;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90933
2697;RHEL7-90934;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-2vm;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-2vm;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90934
2698;RHEL7-90935;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-match;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-match;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90935
2699;RHEL7-90936;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-match-8100;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-match-8100;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90936
2700;RHEL7-90937;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-vms-cvlan;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-vms-cvlan;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90937
2701;RHEL7-90938;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-more;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-more;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90938
2702;RHEL7-90940;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-svlan;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-svlan;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90940
2703;RHEL7-90941;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-ethtype;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-ethtype;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90941
2704;RHEL7-90942;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-combine-access;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-combine-access;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90942
2705;RHEL7-90943;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-match-dltype;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-match-dltype;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90943
2706;RHEL7-90944;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-match-resubmit;KN-TC: openvswitch/ovs_qinq FUNC=ovs-qinq-match-resubmit;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90944
2707;RHEL7-90945;KN-TC: macsec/vlan_check;KN-TC: macsec/vlan_check;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90945
2708;RHEL7-90946;KN-TC: macsec/macsec_bond;KN-TC: macsec/macsec_bond;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90946
2709;RHEL7-90947;KN-TC: macsec/vm_check;KN-TC: macsec/vm_check;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90947
2710;RHEL7-90948;KN-TC: macsec/macsec_over_vxlan;KN-TC: macsec/macsec_over_vxlan;Yuying Ma (yuma);High;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-90948
2711;RHEL7-90950;WALA-TC: [Settings] Extension clean up if status is not valid;WALA-TC: [Settings] Extension clean up if status is not valid;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"1. Prepare a VM on Azure with an extension installed. (Such as VMAccessForLinux)
 * Can install extension my run reset password:
 # azure vm extension set  wala740426wala2210a VMAccessForLinux Microsoft.OSTCExtensions 1.4 --private-config-path ""/tmp/resetpassword.json""
 # cat /tmp/resetpassword.json
 {
 ""username"":""azureusernew"",
 ""password"":""passwordnew"",
 ""expiration"":""2116-01-01""
 }
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-90950
2711;;;;;;;;;2;"2.1 Login VM. Remove status file: 
 /var/lib/waagent/Microsoft.OSTCExtensions.VMAccessForLinux-1.4.6.0/config/HandlerState
 Wait for 25 seconds. Check if the folder /var/lib/waagent/Microsoft.OSTCExtensions.VMAccessForLinux-1.4.6.0 is removed.
 
 2.2 Check /var/log/waagent.log
​​";"2.1 # ls /var/lib/waagent/Microsoft.OSTCExtensions.VMAccessForLinux-1.4.6.0
 ls: cannot access /var/lib/waagent/Microsoft.OSTCExtensions.VMAccessForLinux-1.4.6.0: No such file or directory
 
 2.2 # cat /var/lib/waagent.log:
 WARNING Extension directory does not contain a valid status, removing [/var/lib/waagent/Microsoft.OSTCExtensions.VMAccessForLinux-1.4.6.0]";;RedHatEnterpriseLinux7/RHEL7-90950
2711;;;;;;;;;3;config;​​;;RedHatEnterpriseLinux7/RHEL7-90950
2712;RHEL7-91086;Start a guest with graphic listening on bridged network when an interface without address exists on host;"When graphic listen type=network and network forward type =bridge, these function will be called: qemuProcessGraphicsSetupNetworkAddress->networkGetNetworkAddress->virNetDevIPAddrGet->virNetDevGetifaddrsAddress. In function virNetDevGetifaddrsAddress, all the interfaces on the host will be mapped with the bridge name one by one. Before Bug 1444408 is fixed, if an interface without address exists on host, libvirtd will crash when the source code reaches here: int family = ifa->ifa_addr->sa_family;
 Bug 1444408 - starting guest with graphics device set to listen on network crashes libvirtd";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) set graphic listen on the bridged network we created in setup";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-91086
2712;;;;;;;;;2;"Start the guest
   $ virsh start $guest";"Libvirtd does not crash. The expected output is:
 
 error: Failed to start domain rhel7-3
 error: internal error: no IP address found for interface 'testbr'
​​";;RedHatEnterpriseLinux7/RHEL7-91086
2713;RHEL7-91158;[target dev] Set target name in direct type interface - bug 1335798;"when set target dev as ""macvtapx"" or ""vnetx"" the target name will be ignored, and default to macvtapn, n is ordered by number;
";Yalan Zhang (yalzhang);Medium;Positive;Automated;;1;"1. attach-interface 
 # virsh attach-interface rhel7 direct enp0s25 --target test 
 Interface attached successfully 
​​";"attach successfully
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-91158
2713;;;;;;;;;2;"2. check the target name
 # virsh dumpxml rhel7 | grep /interface -B9
​​";"<interface type='direct'> 
 <mac address='52:54:00:73:67:d9'/> 
 <source dev='enp0s25' mode='vepa'/> 
 <target dev='test'/> 
 <model type='rtl8139'/> 
 <alias name='net1'/> 
 <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/> 
 </interface> 
 
 (check the target name has been used)
​​";;RedHatEnterpriseLinux7/RHEL7-91158
2713;;;;;;;;;3;# ip l show | grep test;8: test@enp0s25: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UNKNOWN mode DEFAULT qlen 50;;RedHatEnterpriseLinux7/RHEL7-91158
2713;;;;;;;;;4;"3. attach-device 
 # cat macvtap.xml 
 <interface type='direct' trustGuestRxFilters='no'> 
 <source dev='enp0s25' mode='bridge'/>
 <target dev='tap1'/>
 </interface>
 
 # virsh attach-device rhel7 macvtap.xml 
 Device attached successfully 
​​";attach successfully;;RedHatEnterpriseLinux7/RHEL7-91158
2713;;;;;;;;;5;"4. check the target name
 # virsh dumpxml rhel7 | grep /interface -B9 
 
​​";"<interface type='direct' trustGuestRxFilters='no'>
 <mac address='52:54:00:28:3d:29'/> 
 <source dev='enp0s25' mode='bridge'/> 
 <target dev='tap1'/> 
 <model type='rtl8139'/> 
 <alias name='net2'/> 
 <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/> 
 </interface>
 
 (the target name is tap1)
​​";;RedHatEnterpriseLinux7/RHEL7-91158
2713;;;;;;;;;6;# ip l show | grep tap1;9: tap1@enp0s25 ......;;RedHatEnterpriseLinux7/RHEL7-91158
2713;;;;;;;;;7;"5. virsh edit
 edit the target name to 1234 on an inactive guest, it can be saved
 
 # virsh edit rhel7 
 <interface type='direct'> 
 <mac address='52:54:00:70:aa:44'/>
 <source dev='enp0s25' mode='vepa'/> 
 <model type='rtl8139'/> 
 <target dev='1234'/> 
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/> </interface> 
 
 # virsh start rhel7 
 Domain rhel7 started 
​​";"virsh edit can save successfully
 guest can start successfully";;RedHatEnterpriseLinux7/RHEL7-91158
2713;;;;;;;;;8;"6. check target name
 # virsh dumpxml rhel7
 
​​";"    <interface type='direct'>
    ......
       <target dev='1234'/>
     ......
     </interface>
 
​​";;RedHatEnterpriseLinux7/RHEL7-91158
2713;;;;;;;;;9;# ip l show | grep 1234;"# ip l show | grep 1234 
 17: 1234@enp0s25: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UNKNOWN mode DEFAULT qlen 500";;RedHatEnterpriseLinux7/RHEL7-91158
2714;RHEL7-91159;[autostart] Check vm status with no-autostart network destroyed and libvirtd restart -  bug 1442700;If the network has been stopped and *not* restarted, the bridge device won't exist and networkNotifyActualDevice() will fail. This patch changes networkNotifyActualDevice() and qemuProcessNotifyNets() to return void, so that qemuProcessReconnect() will soldier on regardless of what happens (any errors will still be logged though). If the network isn't active during networkNotifyActualDevice(), we would log an error message stating that the bridge device didn't exist. This patch adds a check to see if the network is active, making the logs more useful in the case that it isn't.;Yalan Zhang (yalzhang);High;Positive;Automated;;1;"1. prepare a transient  network, and a running guest connected to it
 
 # virsh net-list 
 Name State Autostart Persistent
 ---------------------------------------------------------- 
 default active no no
 
 # virsh start rhel7
 
 # brctl show 
​​";"bridge name bridge id STP enabled interfaces virbr0 8000.525400779a74 yes 
                                               virbr0-nic
                                                 vnet0";Test Case;RedHatEnterpriseLinux7/RHEL7-91159
2714;;;;;;;;;2;"2. destroy the transient network, then restart libvirtd, the guest do not shutdown. 
 
 # virsh net-destroy default 
 Network default destroyed 
 
 # systemctl restart libvirtd.service 
 
 # virsh list Id Name State 
 ---------------------------------------------------- 
 1 rhel7 running";the guest still running;;RedHatEnterpriseLinux7/RHEL7-91159
2714;;;;;;;;;3;"3. check the log file 
 # cat /var/log/libvirt/libvirtd.log
​​";".. 
 2017-05-07 06:43:40.690+0000: 15029: debug : networkNotifyActualDevice:4688 : Requested operation is not valid: network 'default' is not active...";;RedHatEnterpriseLinux7/RHEL7-91159
2714;;;;;;;;;4;4. # brctl show | grep virbr0;no output;;RedHatEnterpriseLinux7/RHEL7-91159
2715;RHEL7-91202;[coalesce] coalesce settings in interface with interface type=network - bug1414627;"This element provides means of setting coalesce settings for some interface devices (currently only type network and bridge. Currently there is just one attribute, max, to tweak, in element frames for the rx group, which accepts a non-negative integer that specifies the maximum number of packets that will be received before an interrupt. Since 3.3.0
The interface should use virtio modle type and vhost as the backend driver";Yalan Zhang (yalzhang);High;Positive;Automated;;1;scenario1: default network; ;Test Case;RedHatEnterpriseLinux7/RHEL7-91202
2715;;;;;;;;;2;"1. start a guest with the coalesce setting in the interface as below:
 # virsh dumpxml rhel7.4 | grep /interface -B10
     <interface type='network'>
       <source network='default'/>
       <model type='virtio'/>
       <coalesce>
         <rx>
           <frames max='32'/>
         </rx>
       </coalesce>
     </interface>
 # virsh start rhel7.4
";Domain rhel7.4 started;;RedHatEnterpriseLinux7/RHEL7-91202
2715;;;;;;;;;3;"2.
 # ethtool -c vnet0 | grep rx-frames:
";rx-frames: 32;;RedHatEnterpriseLinux7/RHEL7-91202
2715;;;;;;;;;4;"scenario3: macvtap network ; hostdev network (should not support, but can start)";Bug 1460862 - Sanity check for coalesce setting in virtual interface;;RedHatEnterpriseLinux7/RHEL7-91202
2715;;;;;;;;;5;"1. 
 # virsh net-dumpxml direct-macvtap
 <network>
   <name>direct-macvtap</name>
   <uuid>06848478-25db-4edc-8a85-27a0778b3f50</uuid>
   <forward dev='enp0s25' mode='bridge'>
     <interface dev='enp0s25'/>
   </forward>
 </network>

 # virsh dumpxml rhel7.4 | grep /interface -B10
     <interface type='network'>
       <mac address='52:54:00:6e:f4:f1'/>
       <source network='direct-macvtap'/>
       <model type='virtio'/>
       <coalesce>
         <rx>
           <frames max='32'/>
         </rx>
       </coalesce>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>

 # virsh start rhel7.4
";"Domain rhel7.4 started


 libvirtd do not crash
";;RedHatEnterpriseLinux7/RHEL7-91202
2715;;;;;;;;;6;# ethtool -c macvtap0;"Coalesce parameters for macvtap0:
 Cannot get device coalesce settings: No such device";;RedHatEnterpriseLinux7/RHEL7-91202
2715;;;;;;;;;7;scenario2: bridge network;​​;;RedHatEnterpriseLinux7/RHEL7-91202
2715;;;;;;;;;8;"1. prepare a bridge, and a bridge type network
 # brctl show
 bridge name bridge id STP enabled interfaces
 br0 8000.00247e054232 no enp0s25
 
 # virsh net-dumpxml net
 <network>
   <name>net</name>
   <uuid>f09ed37d-df13-48de-a5f9-dc8aee77072f</uuid>
   <forward mode='bridge'/>
   <bridge name='br0'/>
 </network>";​​;;RedHatEnterpriseLinux7/RHEL7-91202
2715;;;;;;;;;9;"2. prepare a vm with interface point to this network and start the guest
 # virsh dumpxml rhel7.4 | grep /interface -B12
     <interface type='network'>
       <source network='net' bridge='br0'/>
       <model type='virtio'/>
       <coalesce>
         <rx>
           <frames max='32'/>
         </rx>
       </coalesce>
     </interface>
 # virsh start rhel7.4";Domain rhel7.4 started;;RedHatEnterpriseLinux7/RHEL7-91202
2715;;;;;;;;;10;"3. 
 # ethtool -c vnet0 | grep rx-frames:";rx-frames: 32;;RedHatEnterpriseLinux7/RHEL7-91202
2715;;;;;;;;;11;using openvswitch;​​;;RedHatEnterpriseLinux7/RHEL7-91202
2715;;;;;;;;;12;"1. prepare a ovs bridge, and a network connected to this ovs bridge
 
 # ovs-vsctl show
 b8106695-3cf5-419c-9130-8bda7416dda0
     Bridge ""ovs-br0""
         Port ""ovs-br0""
             Interface ""ovs-br0""
                 type: internal
         Port ""enp0s25""
             Interface ""enp0s25""
     ovs_version: ""2.7.0""
 
 # virsh net-dumpxml ovs-net
 <network>
   <name>ovs-net</name>
   <uuid>2072af5d-b669-465b-b490-9cca7b7f005c</uuid>
   <forward mode='bridge'/>
   <bridge name='ovsbr0'/>
   <virtualport type='openvswitch'/>
 </network>";​​;;RedHatEnterpriseLinux7/RHEL7-91202
2715;;;;;;;;;13;"2. # virsh dumpxml rhel7.4 | grep /interface -B10
     <interface type='network'>
       <mac address='52:54:00:6e:f4:f1'/>
       <source network='ovs-net'/>
       <model type='virtio'/>
       <coalesce>
         <rx>
           <frames max='32'/>
         </rx>
       </coalesce>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 # virsh start rhel7.4";Domain rhel7.4 started;;RedHatEnterpriseLinux7/RHEL7-91202
2715;;;;;;;;;14;3. # ethtool -c vnet0 | grep rx-frames:;rx-frames: 32;;RedHatEnterpriseLinux7/RHEL7-91202
2715;;;;;;;;;15;hostdev network, the dummy xml exists,;Bug 1460862 - Sanity check for coalesce setting in virtual interface;;RedHatEnterpriseLinux7/RHEL7-91202
2716;RHEL7-91203;[coalesce] coalesce settings in interface with interface type=bridge;cover bridge,openvswitch;Yalan Zhang (yalzhang);High;Positive;Automated;;1; nat; ;Test Case;RedHatEnterpriseLinux7/RHEL7-91203
2716;;;;;;;;;2;"# virsh net-dumpxml default
 <network>
   <name>default</name>
   <uuid>6830c302-3faa-4b1b-8102-9f896fc8c6e1</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:9c:c1:62'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
     </dhcp>
   </ip>
 </network>

 # virsh dumpxml rhel7.4| grep /interface -B12
     <interface type='bridge'>
       <mac address='52:54:00:a7:4d:f7'/>
       <source bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <coalesce>
         <rx>
           <frames max='64'/>
         </rx>
       </coalesce>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
";​​;;RedHatEnterpriseLinux7/RHEL7-91203
2716;;;;;;;;;3;"start guest and check
 # ethtool -c vnet0 | grep rx-frames:";rx-frames: 64;;RedHatEnterpriseLinux7/RHEL7-91203
2716;;;;;;;;;4;bridge;​​;;RedHatEnterpriseLinux7/RHEL7-91203
2716;;;;;;;;;5;"prepare a bridge
 # brctl show
 bridge name bridge id STP enabled interfaces
 br0 8000.00247e054232 no enp0s25
 vnet0
 
 # virsh dumpxml rhel7.4 | grep /interface -B12
     <interface type='bridge'>
       <mac address='52:54:00:8e:f3:6f'/>
       <source bridge='br0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <coalesce>
         <rx>
           <frames max='64'/>
         </rx>
       </coalesce>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0a' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-91203
2716;;;;;;;;;6;"start guest and check
 # ethtool -c vnet0 | grep rx-frames:";rx-frames: 64;;RedHatEnterpriseLinux7/RHEL7-91203
2716;;;;;;;;;7;openswitch;​​;;RedHatEnterpriseLinux7/RHEL7-91203
2716;;;;;;;;;8;"prepare a ovs bridge
 # ovs-vsctl show
 b8106695-3cf5-419c-9130-8bda7416dda0
     Bridge ""ovs-br0""
         Port ""ovs-br0""
             Interface ""ovs-br0""
                 type: internal
         Port ""enp0s25""
             Interface ""enp0s25""
     ovs_version: ""2.7.0""
 
 # virsh edit rhel7.4
     <interface type='bridge'>
       <source bridge='ovs-br0'/>
       <virtualport type='openvswitch'/>
       <model type='virtio'/>
       <coalesce>
         <rx>
           <frames max='64'/>
         </rx>
       </coalesce>
     </interface>
 
 # virsh start rhel7.4
 Domain rhel7.4 started";​​;;RedHatEnterpriseLinux7/RHEL7-91203
2716;;;;;;;;;9;# ethtool -c vnet0 | grep rx-frames:;rx-frames: 64;;RedHatEnterpriseLinux7/RHEL7-91203
2717;RHEL7-91204;[coalesce] set coalesce with invalid interface type, or unsupported model type, or set to invalid value;"1. for hostdev, and other interface,it is not supported  
2. for modle type=e1000 or others
3. bondary test and  negative number, bondary is 0~4294967295, however on the host, the limitation of rx-frames for tap device  is 64.";Yalan Zhang (yalzhang);High;Negative;Automated;;1;scenairo 1: coalesce support only interface type = bridge / network; ;Test Case;RedHatEnterpriseLinux7/RHEL7-91204
2717;;;;;;;;;2;"1. add below content in guest's xml

 # virsh edit rhel7.4
    <interface type='direct'>
       <mac address='52:54:00:93:20:d2'/>
       <source dev='enp0s25' mode='bridge'/>
       <model type='virtio'/>
       <coalesce>
         <rx>
           <frames max='64'/>
         </rx>
       </coalesce>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>

 error: unsupported configuration: coalesce settings on interface type direct are not supported
 Failed. Try again? [y,n,i,f,?]: 
";can not save;;RedHatEnterpriseLinux7/RHEL7-91204
2717;;;;;;;;;3;"2. hotplug
 # cat direct.xml
   <interface type='direct'>
       <source dev='enp0s25' mode='bridge'/>
       <model type='virtio'/>
       <coalesce>
         <rx>
           <frames max='64'/>
         </rx>
       </coalesce>
     </interface>
 
 # virsh attach-device rhel7.4 direct.xml";"error: Failed to attach device from direct.xml
 error: unsupported configuration: coalesce settings on interface type direct are not supported";;RedHatEnterpriseLinux7/RHEL7-91204
2717;;;;;;;;;4;scenario 2: other model type: e1000, e1000e, rtl8139;can set in xml and change the rx-frames for the tap device, but in fact, it is no effect;;RedHatEnterpriseLinux7/RHEL7-91204
2717;;;;;;;;;5;"start a guest with belwo interface setting
 # virsh dumpxml rhel7.2 | grep /interface -B10
 <interface type='network'>    
   <source network='default' bridge='virbr0'/>
       <target dev='vnet1'/>
       <model type='rtl8139'/>
       <coalesce>
         <rx>
           <frames max='64'/>
         </rx>
       </coalesce>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
";"the rx-frames on the tap device need the backend's support
 only vhost can do it
 the settting is succeed, but no effect ";;RedHatEnterpriseLinux7/RHEL7-91204
2717;;;;;;;;;6;"# ethtool -c vnet1 | grep rx-frames:
​​";rx-frames: 64;;RedHatEnterpriseLinux7/RHEL7-91204
2717;;;;;;;;;7;scenario 3 : bondary test and  negative number;​​;;RedHatEnterpriseLinux7/RHEL7-91204
2717;;;;;;;;;8;"1. set  frames max=0 in interface, it will be ignored




";​​;;RedHatEnterpriseLinux7/RHEL7-91204
2717;;;;;;;;;9;"2. set  ""-1"", ""sdf"", ""  ""  , 
 # virsh edit rhel7.4
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content
 
 Failed. Try again? [y,n,i,f,?]: ";​​;;RedHatEnterpriseLinux7/RHEL7-91204
2717;;;;;;;;;10;"3. hotplug with such wrong settings
 # cat interface.xml
 <interface type='network'>
 <source network='default'/>
 <model type='virtio'/>
    <coalesce>
         <rx>
           <frames max='-23'/>
         </rx>
       </coalesce>
 </interface>
 # virsh attach-device rhel7.4  interface.xml";"error: Failed to attach device from interface.xml
 error: cannot parse value '-23' for coalesce parameter";;RedHatEnterpriseLinux7/RHEL7-91204
2717;;;;;;;;;11;virsh edit with big number;​​;;RedHatEnterpriseLinux7/RHEL7-91204
2717;;;;;;;;;12;"1. set to '1000000000000'
 # virsh edit rhel7.4

 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content  
 Failed. Try again? [y,n,i,f,?]:   ------>press f

 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content

 Failed. Try again? [y,n,i,f,?]:  ---> press i

 error: numerical overflow: value '100000000000' is too big for coalesce parameter, maximum is '4294967295'
 Failed. Try again? [y,n,f,?]: 

";​​;;RedHatEnterpriseLinux7/RHEL7-91204
2717;;;;;;;;;13;"2. set to '4294967295'
 # virsh edit rhel7.4
 Domain rhel7.4 XML configuration edited.
 
 # virsh dumpxml rhel7.4 | grep /interface -B12
     <interface type='network'>
       <mac address='52:54:00:4c:9a:04'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <coalesce>
         <rx>
           <frames max='4294967295'/>
         </rx>
       </coalesce>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
​​";"when ""frames max"" > 64, the tap device will always be 64, this is the kernel limitation, refer to https://bugzilla.redhat.com/show_bug.cgi?id=1414627#c16 ";;RedHatEnterpriseLinux7/RHEL7-91204
2717;;;;;;;;;14;# ethtool -c vnet0 | grep rx-frames:;rx-frames: 64;;RedHatEnterpriseLinux7/RHEL7-91204
2717;;;;;;;;;15;"hostdev type
 1. add below content in guest's interface xml
    <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:40:c2:71'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x0'/>
       </source>
       <model type='virtio'/>
      <coalesce>
         <rx>
           <frames max='64'/>
         </rx>
       </coalesce>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 error: unsupported configuration: coalesce settings on interface type hostdev are not supported
 Failed. Try again? [y,n,i,f,?]: ";​​;;RedHatEnterpriseLinux7/RHEL7-91204
2717;;;;;;;;;16;"2. hotplug
 # cat hostdev.xml
    <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:40:c2:71'/>
       <coalesce>
         <rx>
           <frames max='64'/>
         </rx>
       </coalesce>    
   <source>
         <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x0'/>
       </source>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh attach-device rhel7.2 hostdev.xml ";"error: Failed to attach device from hostdev.xml
 error: unsupported configuration: coalesce settings on interface type hostdev are not supported";;RedHatEnterpriseLinux7/RHEL7-91204
2718;RHEL7-91214;[attach-device][coalesce] hotplug with coalesce settings in interface, then save and restore;check if it is supported and if there is any expected.;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. start a guest
 # cat interface.xml
 <interface type='network'>
 <source network='default'/>
 <model type='virtio'/>
    <coalesce>
         <rx>
           <frames max='32'/>
         </rx>
       </coalesce>
 </interface>
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-91214
2718;;;;;;;;;2;"2. # virsh attach-device rhel7.4 interface.xml 
 Device attached successfully
 # virsh dumpxml rhel7.4 | grep /interface -B12";"# virsh dumpxml rhel7.4 | grep /interface -B12
   <interface type='network'>
       <mac address='52:54:00:05:d7:cc'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <coalesce>
         <rx>
           <frames max='32'/>
         </rx>
       </coalesce>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";;RedHatEnterpriseLinux7/RHEL7-91214
2718;;;;;;;;;3;"3 .# ethtool -c vnet0 | grep rx-frames:
​​";rx-frames: 32;;RedHatEnterpriseLinux7/RHEL7-91214
2718;;;;;;;;;4;"4. save and restore with coalesce setting

 # virsh save rhel7.4  rhel7.4.save
 Domain rhel7.4 saved to rhel7.4.save
 
 # virsh restore rhel7.4.save
 Domain restored from rhel7.4.save
​​";restore and save succeed;;RedHatEnterpriseLinux7/RHEL7-91214
2718;;;;;;;;;5;5. # virsh dumpxml rhel7.4 | grep /interface  -B12 ;"    <interface type='network'>
       <mac address='52:54:00:05:d7:cc'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <coalesce>
         <rx>
           <frames max='32'/>
         </rx>
       </coalesce>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-91214
2718;;;;;;;;;6;6. # ethtool -c vnet0 | grep rx-frames:;rx-frames: 32;;RedHatEnterpriseLinux7/RHEL7-91214
2719;RHEL7-91215;[attach-device][mtu] hotplug with mtu set in interface, do domain save and restore;check if there is any unexpected.;Yalan Zhang (yalzhang);High;Positive;Automated;;1;"1. # virsh start rhel7.4
 Domain rhel7.4 started
 
  # cat interface.xml
 <interface type='network'>
 <source network='default'/>
 <model type='virtio'/>
 <mtu size='9000'/>
 </interface>
 
 # virsh attach-device rhel7.4 interface.xml;";Device attached successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-91215
2719;;;;;;;;;2;2. # virsh dumpxml rhel7.4 | grep /interface -B8;"  <interface type='network'>
       <mac address='52:54:00:a9:8a:d1'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <mtu size='9000'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-91215
2719;;;;;;;;;3;3. # ifconfig vnet0 | grep mtu;vnet0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 9000;;RedHatEnterpriseLinux7/RHEL7-91215
2719;;;;;;;;;4;"4. login guest, check the mtu
 # ifconfig eth0 | grep mtu";eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 9000;;RedHatEnterpriseLinux7/RHEL7-91215
2719;;;;;;;;;5;"5. on host, save and restore, check the interface no changes
 # virsh save rhel7.4  rhel7.4.save
 # virsh restore rhel7.4.save
 # virsh dumpxml  rhel7.4 | grep /interface -B7";same as step 2;;RedHatEnterpriseLinux7/RHEL7-91215
2719;;;;;;;;;6;"6. # cat inter.xml
    <interface type='network'>
       <mac address='52:54:00:a9:8a:d1'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <mtu size='9000'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>

 # virsh detach-device rhel7.4 inter.xml
";Device detached successfully;;RedHatEnterpriseLinux7/RHEL7-91215
2719;;;;;;;;;7;6. # virsh dumpxml rhel7.4 | grep '52:54:00:a9:8a:d1';no output;;RedHatEnterpriseLinux7/RHEL7-91215
2720;RHEL7-91230;KN-TC: macsec/sanity_check;KN-TC: macsec/sanity_check;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-91230
2721;RHEL7-91231;KN-TC: macsec/diff_sa;KN-TC: macsec/diff_sa;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-91231
2722;RHEL7-91232;KN-TC: macsec/icvlen_test;KN-TC: macsec/icvlen_test;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-91232
2723;RHEL7-91233;KN-TC: macsec/replay_protection;KN-TC: macsec/replay_protection;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-91233
2724;RHEL7-91595;Libvirt should not allow paths symbol in ivshmem-plain/ivshmem name  --bug 1395496;"Libvirt should not allow paths symbol in ivshmem-plain/ivshmem name --bug 1395496
";Jingjing Shao (jishao);High;Positive;Not Automated;;1;" # virsh edit r7.2
 
 Add this xml as below to guest xml
  <shmem name='../../var/lib/libvirt/test-ivshmem'>
    <model type='ivshmem-plain'/>
     <size unit='M'>4</size>
     <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
  </shmem>
 
 Get the error as below
 
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content
 
 Failed. Try again? [y,n,i,f,?]: 
 
 enter i finish the edit 
 Domain r7.2 XML configuration edited.
 
 # virsh start r7.2
 error: Failed to start domain r7.2
 error: unsupported configuration: shmem name '../../var/lib/libvirt/test-ivshmem' must not contain '/'
 
 Edit the guest xml as below.
 <shmem name='test-ivshmem'>
  <model type='ivshmem-plain'/>
   <size unit='M'>4</size>
     <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </shmem>
 
 # virsh start r7.2
 Domain r7.2 started
 
 # ps aux|grep qemu  | grep shmmem
 .....
 -object memory-backend-file,id=shmmem-shmem0,mem-path=/dev/shm/test-ivshmem,size=4194304,share=yes -device ivshmem-plain,id=shmem0,memdev=shmmem-shmem0,bus=pci.0,addr=0x3 -msg timestamp=on
 ....
 
​​";" As the step result as left
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-91595
2725;RHEL7-93041;[virtio-win][vioser] transfer data after CPU hot added;"[virtio-win][vioser] transfer data after CPU hot added
";Yu Wang (wyu);Medium;Positive;Not Automated;;1;"1. boot guest with virtio-serial-pci (-smp 2,maxcpus=6) :
 CLI:...-smp 2,maxcpus=6 \
 -device virtio-serial-pci,id=virtio-serial0,max_ports=511 -chardev socket,id=channel1,path=/tmp/helloworld1,server,nowait -device virtserialport,chardev=channel1,name=com.redhat.rhevm.vdsm1,bus=virtio-serial0.0,id=port1";1. Guest boot up successfully without any error.;Test Case;RedHatEnterpriseLinux7/RHEL7-93041
2725;;;;;;;;;2;"2. Check whether vioser.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled vioser.sys verifier:
     #verifier.exe /standard /driver vioser.sys  (run as administrator)
     then reboot the guest and recheck 
     #verifier /querysettings";"2. All the Standards flags are checked ,the verified driver fields shows ""vioser.sys""";;RedHatEnterpriseLinux7/RHEL7-93041
2725;;;;;;;;;3;"3. Transfer data from host to guest via port1
 on the guest:
 #VirtIOChannel_guest_reieve.py com.redhat.rhevm.vdsm1
 on the host:
 #python serial-host-send.py /tmp/helloworld1
​​";3. data transferring data via port1 from host to guest successfully;;RedHatEnterpriseLinux7/RHEL7-93041
2725;;;;;;;;;4;"4.Transfer data from guest to host via port1
 on the host:
 #python serial-host-receive.py /tmp/helloworld1
 on the guest:
 #VirtIOChannel_guest_send.py com.redhat.rhevm.vdsm1";4.  data transferring data via port1 from guest to host successfully;;RedHatEnterpriseLinux7/RHEL7-93041
2725;;;;;;;;;5;"5 Hot add 2 vcpus
 { ""execute"": ""qmp_capabilities"" }
 { ""execute"": ""device_add"",""arguments"":{""driver"":""qemu64-x86_64-cpu"",""core-id"": ""'$j'"", ""thread-id"": ""'$z'"", ""socket-id"": ""'$i'"",""id"":""core'$a'"" }}
 
 eg.{ ""execute"": ""device_add"",""arguments"":{""driver"":""qemu64-x86_64-cpu"",""core-id"": ""0"", ""thread-id"": ""0"", ""socket-id"": ""2"",""id"":""core2"" }}
 { ""execute"": ""device_add"",""arguments"":{""driver"":""qemu64-x86_64-cpu"",""core-id"": ""0"", ""thread-id"": ""0"", ""socket-id"": ""3"",""id"":""core3"" }}
​​";"5. {""timestamp"": {""seconds"": 1495596691, ""microseconds"": 241272}, ""event"": ""ACPI_DEVICE_OST"", ""data"": {""info"": {""device"": ""core2"", ""source"": 0, ""status"": 163, ""slot"": ""2"", ""slot-type"": ""CPU""}}}
 {""timestamp"": {""seconds"": 1495596697, ""microseconds"": 649534}, ""event"": ""ACPI_DEVICE_OST"", ""data"": {""info"": {""device"": ""core3"", ""source"": 0, ""status"": 163, ""slot"": ""3"", ""slot-type"": ""CPU""}}}
​​";;RedHatEnterpriseLinux7/RHEL7-93041
2725;;;;;;;;;6;"6. repeat 3-4
​​";"6 data transfer succsessfully
​​";;RedHatEnterpriseLinux7/RHEL7-93041
2726;RHEL7-93088;[setvcpus] Restart libvirtd  during  hot-plug and  hot-unplug vcpu --bug 1439452   1451251 1462092;"Restart libvirtd  during  hot-plug and  hot-unplug vcpu 
";Jingjing Shao (jishao);High;Positive;Not Automated;;1;"S1: hotplug/ hotunplug vcpu during libvirtd restart (bug 1439452)
 
 set below xml in guest's xml
  <vcpu placement='static' current='3'>200</vcpu>
 
 # virsh start rhel7
 
 # virsh list --all
 Id    Name                           State
 ----------------------------------------------------
 2     r7.2                           running
 
 # virsh vcpucount r7.2
 maximum      config       200
 maximum      live         200
 current      config         3
 current      live          3
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-93088
2726;;;;;;;;;2;"(1)hotplug with libvirtd restart
 
 On one terminal,
 #  virsh setvcpus r7.2  200
 
 On second terminal
 #  service libvirtd restart
 
​​";"On the first terminal
 #  virsh setvcpus r7.2  200
 error: Disconnected from qemu:///system due to keepalive timeout
 error: internal error: connection closed due to keepalive timeout
 
 On the 2nd terminal
 #  service libvirtd restart
 Redirecting to /bin/systemctl restart libvirtd.service
 
 The libvirtd can start successfully.";;RedHatEnterpriseLinux7/RHEL7-93088
2726;;;;;;;;;3;"# virsh vcpucount r7.2
 
​​";"maximum      config       200
 maximum      live         200
 current      config         3
 current      live          47
 
 (part of the vcpu is hotplugged)";;RedHatEnterpriseLinux7/RHEL7-93088
2726;;;;;;;;;4;"Continue to hotplug or hotunplug
 
 # virsh setvcpus r7.2  20
 # virsh vcpucount r7.2
​​";"maximum      config       200
 maximum      live         200
 current      config         3
 current      live          20";;RedHatEnterpriseLinux7/RHEL7-93088
2726;;;;;;;;;5;"# virsh setvcpus r7.2  200
 # virsh vcpucount r7.2";"maximum      config       200
 maximum      live         200
 current      config         3
 current      live         200";;RedHatEnterpriseLinux7/RHEL7-93088
2726;;;;;;;;;6;"(2)hotunplug with libvirtd restart
 
 # virsh vcpucount r7.2
 maximum      config       200
 maximum      live         200
 current      config         3
 current      live         200
 
 On one terminal,
 #  virsh setvcpus r7.2  20
 On second terminal
 #  service libvirtd restart
​​";"On the first terminal
 # virsh setvcpus r7.2  20
 error: Disconnected from qemu:///system due to I/O error
 error: Cannot recv data: Connection reset by peer
 
 #  service libvirtd restart
 Redirecting to /bin/systemctl restart libvirtd.service
 The libvirtd can start successfully.
 
 
 (libvirtd can restart successfully)";;RedHatEnterpriseLinux7/RHEL7-93088
2726;;;;;;;;;7;"# virsh setvcpus r7.2  20
 # virsh vcpucount r7.2";"maximum      config       200
 maximum      live         200
 current      config         3
 current      live          20";;RedHatEnterpriseLinux7/RHEL7-93088
2726;;;;;;;;;8;"S2: Restart libvirtd again after hotplug vcpu during libvirtd restart (bug 1451251)
​​";​​;;RedHatEnterpriseLinux7/RHEL7-93088
2726;;;;;;;;;9;"1. # virsh start vm1
 Domain vm1 started
 #  virsh vcpucount vm1 
 maximum      config       200
 maximum      live         200
 current      config         1
 current      live           1";​​;;RedHatEnterpriseLinux7/RHEL7-93088
2726;;;;;;;;;10;"2. On the first terminal
 # virsh setvcpus vm1  200
 
 On the second terminal
 #  service libvirtd restart
 
 
 
​​";"On the first terminal
 virsh setvcpus vm1  200 
 error: Disconnected from qemu:///system due to keepalive timeout
 error: internal error: connection closed due to keepalive timeout
 On the second terminal
 #  service libvirtd restart
 Redirecting to /bin/systemctl restart libvirtd.service
 
 (libvirtd can restart successfully)";;RedHatEnterpriseLinux7/RHEL7-93088
2726;;;;;;;;;11;# virsh vcpucount vm1;"maximum      config       200
 maximum      live         200
 current      config         1
 current      live         110
 
 (part of the vcpus are hotplugged)";;RedHatEnterpriseLinux7/RHEL7-93088
2726;;;;;;;;;12;"3. # virsh list 
 
​​";"Id    Name                           State
 ----------------------------------------------------
 24    vm1                            running
 
 (the guest should still be running)";;RedHatEnterpriseLinux7/RHEL7-93088
2726;;;;;;;;;13;# virsh dumpxml vm1  | grep vcpu -A7;" <vcpu placement='static' current='59'>200</vcpu>
  <vcpus>
    <vcpu id='0' enabled='yes' hotpluggable='no' order='1'/>
    <vcpu id='1' enabled='yes' hotpluggable='yes' order='2'/>
    ......
    <vcpu id='107' enabled='yes' hotpluggable='yes' order='108'/>
    <vcpu id='108' enabled='yes' hotpluggable='yes' order='109'/>
    <vcpu id='109' enabled='yes' hotpluggable='yes' order='110'/>
    <vcpu id='110' enabled='no' hotpluggable='yes'/>
    <vcpu id='111' enabled='no' hotpluggable='yes'/>";;RedHatEnterpriseLinux7/RHEL7-93088
2726;;;;;;;;;14;"4. # service libvirtd restart
 Redirecting to /bin/systemctl restart libvirtd.service";​​;;RedHatEnterpriseLinux7/RHEL7-93088
2726;;;;;;;;;15;"5 # virsh list 
​​";"Id    Name                           State
 ----------------------------------------------------
 24    vm1                            running
 
 (the guest should still be running)";;RedHatEnterpriseLinux7/RHEL7-93088
2727;RHEL7-93111;Attach a virtio-rng device with implicitly occupied PCI address;"Attach a virtio-rng device with already occupied PCI address.
 BZ1452581";Fangge Jin (fjin);Medium;Negative;Not Automated;;1;" 1. Prepare a guest, and check the occupied PCI address:
 # virsh dumpxml vm1|grep ""address type='pci'""|awk '{print $5}'|sort
 
​​";"1.Output the occupied pci address, for example:
 
       <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x2'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0' multifunction='on'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x2'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x7'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0a' function='0x0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0d' function='0x0'/>";Test Case;RedHatEnterpriseLinux7/RHEL7-93111
2727;;;;;;;;;2;"2. Select a slot that's already occupied and has no free address before it, for example:
 slot='0x08' is suitable, but slot='0x0d' is not suitable";​​;;RedHatEnterpriseLinux7/RHEL7-93111
2727;;;;;;;;;3;"3.Prepare a RNG device xml that uses slot='0x08':
 # cat rng.xml 
     <rng model='virtio'>
       <backend model='random'>/dev/random</backend>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
     </rng>";​​;;RedHatEnterpriseLinux7/RHEL7-93111
2727;;;;;;;;;4;"4. Start guest
 # virsh start vm1";​​;;RedHatEnterpriseLinux7/RHEL7-93111
2727;;;;;;;;;5;"5. Attach rng device:
 # virsh attach-device vm1 rng.xml 
​​";"5.Attach failed
 Output:
 error: Failed to attach device from rng.xml
 error: XML error: Attempted double use of PCI Address 0000:00:08.0";;RedHatEnterpriseLinux7/RHEL7-93111
2727;;;;;;;;;6;"6. Attach again:
 # virsh attach-device vm1 rng.xml 
​​";"6.Still failed
 error: Failed to attach device from rng.xml
 error: XML error: Attempted double use of PCI Address 0000:00:08.0";;RedHatEnterpriseLinux7/RHEL7-93111
2727;;;;;;;;;7;"The following steps are to verify that libvirt doesn't release slot 0x08 after unsuccessful attaching:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-93111
2727;;;;;;;;;8;"7.Attach RNG device without specified address:
 # cat rng.xml
     <rng model='virtio'>
       <backend model='random'>/dev/random</backend>
     </rng>

 # virsh attach-device vm1 rng.xml";7.Attach successfully;;RedHatEnterpriseLinux7/RHEL7-93111
2727;;;;;;;;;9;"8. Check PCI address of attached RNG device:
 # virsh dumpxml vm1|grep rng -A4
 
​​";"The lowest available slot - Slot 0xob is used for attached RNG device:
 Output:
     <rng model='virtio'>
       <backend model='random'>/dev/random</backend>
       <alias name='rng0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
     </rng>";;RedHatEnterpriseLinux7/RHEL7-93111
2728;RHEL7-93122;KN-TC: stress/netperf;KN-TC: stress/netperf;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93122
2729;RHEL7-93123;KN-TC: nic/functions/devlink;KN-TC: nic/functions/devlink;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93123
2730;RHEL7-93124;KN-TC: nic/functions/abnormal FUNC=bad-ip-bz1293754;KN-TC: nic/functions/abnormal FUNC=bad-ip-bz1293754;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93124
2731;RHEL7-93125;KN-TC: nic/functions/abnormal FUNC=small-packet-bz790673;KN-TC: nic/functions/abnormal FUNC=small-packet-bz790673;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93125
2732;RHEL7-93126;KN-TC: nic/functions/abnormal FUNC=unload-load-driver-after-rings-re-sizing-bz1394304;KN-TC: nic/functions/abnormal FUNC=unload-load-driver-after-rings-re-sizing-bz1394304;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93126
2733;RHEL7-93127;KN-TC: nic/functions/abnormal FUNC=bnx2x-parity;KN-TC: nic/functions/abnormal FUNC=bnx2x-parity;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93127
2734;RHEL7-93128;KN-TC: nic/functions/stress FUNC=speed-parallel;KN-TC: nic/functions/stress FUNC=speed-parallel;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93128
2735;RHEL7-93130;KN-TC: nic/functions/stress FUNC=high-traffic;KN-TC: nic/functions/stress FUNC=high-traffic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93130
2736;RHEL7-93131;KN-TC: nic/functions/stress FUNC=curl-sha1sum-check;KN-TC: nic/functions/stress FUNC=curl-sha1sum-check;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93131
2737;RHEL7-93132;KN-TC: nic/functions/scaling;KN-TC: nic/functions/scaling;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93132
2738;RHEL7-93133;KN-TC: nic/functions/abnormal FUNC=unload-load-driver-after-offload-setting-bz1378509;KN-TC: nic/functions/abnormal FUNC=unload-load-driver-after-offload-setting-bz1378509;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93133
2739;RHEL7-93134;KN-TC: nic/functions/wol;KN-TC: nic/functions/wol;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93134
2740;RHEL7-93135;KN-TC: vnic/macvtap;KN-TC: vnic/macvtap;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93135
2741;RHEL7-93136;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-mode-native-untagged;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-mode-native-untagged;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93136
2742;RHEL7-93137;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-mode-native-tagged;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-mode-native-tagged;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93137
2743;RHEL7-93139;KN-TC: nic/functions/pause;KN-TC: nic/functions/pause;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93139
2744;RHEL7-93140;KN-TC: nic/functions/hashkey;KN-TC: nic/functions/hashkey;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93140
2745;RHEL7-93141;KN-TC: vlan/Regression/bz735015-Kernel-bug-at-net-8021q-vlan-c-402 FUNC=nic;KN-TC: vlan/Regression/bz735015-Kernel-bug-at-net-8021q-vlan-c-402 FUNC=nic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93141
2746;RHEL7-93142;KN-TC: vlan/Regression/bz1018158-cannt-create-vlan-on-veth;KN-TC: vlan/Regression/bz1018158-cannt-create-vlan-on-veth;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93142
2747;RHEL7-93144;KN-TC: vlan/Regression/bz692013-vlan-on-tunnel;KN-TC: vlan/Regression/bz692013-vlan-on-tunnel;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93144
2748;RHEL7-93145;KN-TC: vlan/Regression/bz872309-dhclient-fail-under-vlan-topo FUNC={nic};KN-TC: vlan/Regression/bz872309-dhclient-fail-under-vlan-topo FUNC={nic};Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93145
2749;RHEL7-93146;KN-TC: vlan/Regression/bz703709-vlan-on-loopback;KN-TC: vlan/Regression/bz703709-vlan-on-loopback;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93146
2750;RHEL7-93147;KN-TC: bridge/Regression/bz1144330-allow-bridge-forward-8021xeap;KN-TC: bridge/Regression/bz1144330-allow-bridge-forward-8021xeap;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93147
2751;RHEL7-93148;KN-TC: bridge/stp_test;KN-TC: bridge/stp_test;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93148
2752;RHEL7-93150;KN-TC: openvswitch/vm100;KN-TC: openvswitch/vm100;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93150
2753;RHEL7-93151;KN-TC: openvswitch/bz_regression/bz1359890;KN-TC: openvswitch/bz_regression/bz1359890;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93151
2754;RHEL7-93152;KN-TC: openvswitch/bz_regression/bz1397049;KN-TC: openvswitch/bz_regression/bz1397049;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93152
2755;RHEL7-93153;KN-TC: openvswitch/bz_regression/bz1411480;KN-TC: openvswitch/bz_regression/bz1411480;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93153
2756;RHEL7-93154;KN-TC: openvswitch/spanning_tree;KN-TC: openvswitch/spanning_tree;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93154
2757;RHEL7-93155;KN-TC: openvswitch/add_del_ports;KN-TC: openvswitch/add_del_ports;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93155
2758;RHEL7-93156;KN-TC: openvswitch/power_cycle_crash/set_config;KN-TC: openvswitch/power_cycle_crash/set_config;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93156
2759;RHEL7-93157;KN-TC: openvswitch/power_cycle_crash/check_config;KN-TC: openvswitch/power_cycle_crash/check_config;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93157
2760;RHEL7-93158;KN-TC: openvswitch/conntrack;KN-TC: openvswitch/conntrack;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93158
2761;RHEL7-93159;KN-TC: openvswitch/userspace_commands;KN-TC: openvswitch/userspace_commands;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93159
2762;RHEL7-93160;KN-TC: openvswitch/ovs_systemd;KN-TC: openvswitch/ovs_systemd;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93160
2763;RHEL7-93161;KN-TC: openvswitch/upgrade_systemd_check;KN-TC: openvswitch/upgrade_systemd_check;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93161
2764;RHEL7-93162;KN-TC: openvswitch/ovs_vlan;KN-TC: openvswitch/ovs_vlan;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93162
2765;RHEL7-93163;KN-TC: impairment FUNC=nic;KN-TC: impairment FUNC=nic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93163
2766;RHEL7-93164;KN-TC: impairment FUNC=linuxbr;KN-TC: impairment FUNC=linuxbr;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93164
2767;RHEL7-93165;KN-TC: impairment FUNC=linuxbr_vlan;KN-TC: impairment FUNC=linuxbr_vlan;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93165
2768;RHEL7-93166;KN-TC: impairment FUNC=ovsbr_vlan;KN-TC: impairment FUNC=ovsbr_vlan;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93166
2769;RHEL7-93167;KN-TC: impairment FUNC=ovsbr;KN-TC: impairment FUNC=ovsbr;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93167
2770;RHEL7-93285;[console][tcp] Support TLS encryption on chardev TCP transport - bug 1300773 1300776;the optional attribute tls can be used to control whether a chardev TCP communication channel would utilize a hypervisor configured TLS X.509 certificate environment in order to encrypt the data channel.;Yalan Zhang (yalzhang);Medium;Positive;Automated;;1;scenario 1: Run a generic gnutls-serv TLS server. Launch QEMU with a serial port as a TLS client, and ensure BIOS boot messages appear in the shell running gnutls-serv;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-93285
2770;;;;;;;;;2;"1. ucomment below content in qemu.conf 
        chardev_tls = 1 
        chardev_tls_x509_cert_dir = ""/etc/pki/libvirt-chardev""";​​;;RedHatEnterpriseLinux7/RHEL7-93285
2770;;;;;;;;;3;"2. prepare the certificates for server and client, and start the server. 
          # ll /etc/pki/libvirt-chardev/ 
          total 16 
          -rw-r--r--. 1 root qemu 1086 May 31 13:30 ca-cert.pem
          -r--r-----. 1 root qemu 1253 May 31 09:19 client-cert.pem
          -r--r-----. 1 root qemu 5823 May 31 09:19 client-key.pem
 
          # ll server* ca-cert.pem 
          -rw-r--r--. 1 root root 1086 May 31 13:22 ca-cert.pem
          -rw-r--r--. 1 root root 1180 May 31 13:23 server-cert.pem
          -r--------. 1 root root 5816 May 31 13:21 server-key.pem
 
          # gnutls-serv --echo --x509cafile ca-cert.pem --x509keyfile server-key.pem --x509certfile server-cert.pem 
 Set static Diffie-Hellman parameters, consider --dhparams. Processed 1 CA certificate(s). Echo Server listening on IPv4 0.0.0.0 port 5556...done";​​;;RedHatEnterpriseLinux7/RHEL7-93285
2770;;;;;;;;;4;"3. The guest have os installed and ""console=ttyS0,115200n"" configured in the kernel command line.
          Start the guest with below serial device: 
          # virsh dumpxml rhel-new | grep /console -B9 
          <serial type='tcp'> 
          <source mode='connect' host='127.0.0.1' service='5556' tls='yes'/>
          <protocol type='raw'/> 
          <target port='0'/>
          </serial>
          <console type='tcp'> 
          <source mode='connect' host='127.0.0.1' service='5556' tls='yes'/>
          <protocol type='raw'/> 
          <target type='serial' port='0'/>
          </console> 
 
          # virsh start rhel-new 
          Domain rhel-new started";​​;;RedHatEnterpriseLinux7/RHEL7-93285
2770;;;;;;;;;5;"4. check the gnutls-serv showed the QEMU BIOS boot messages as expected, the output will end with below messages: 
 #  gnutls-serv    --echo --x509cafile ca-cert.pem --x509keyfile server-key.pem --x509certfile server-cert.pem
​​";"Set static Diffie-Hellman parameters, consider --dhparams.
 Processed 1 CA certificate(s).
 Echo Server listening on IPv4 0.0.0.0 port 5556...done
 * Accepted connection from IPv4 127.0.0.1 port 37450 on Wed May 31 13:49:20 2017
 - Description: (TLS1.2)-(ECDHE-RSA-SECP256R1)-(AES-128-GCM)
 - Session ID: 39:32:0B:04:FF:7C:A4:B5:23:58:D8:08:DC:C3:02:11:A4:7F:CE:E7:E0:AA:CA:66:06:33:ED:BF:78:26:40:7E
 - Server has requested a certificate.
 - Certificate type: X.509
 - Got a certificate list of 1 certificates.
 - Certificate[0] info:
 - X.509 Certificate Information:
    Version: 3
    Serial Number (hex): 592e11212e27fe69f1d5fb22
    Issuer: CN=libvirt.org
    Validity:
        Not Before: Wed May 31 00:41:05 UTC 2017
        Not After: Thu May 31 00:41:05 UTC 2018
    Subject: CN=server74,O=libvirt.org,L=Brisbane,ST=Queensland,C=AU
    Subject Public Key Algorithm: RSA
    Algorithm Security Level: Medium (2048 bits)
        Modulus (bits 2048):
            00:e6:c2:09:24:1a:cf:c1:9b:25:68:b6:3b:5b:c1:44
            e7:24:4d:2c:4e:41:9e:4a:2d:27:4e:b3:e1:3a:8b:13
            1f:9c:03:9d:bc:35:11:7a:5e:ab:2f:11:51:85:b8:13
            fe:05:3c:20:e1:4e:0c:9e:5d:05:bb:02:d9:21:3a:34
            01:62:9e:af:df:dc:18:9d:c4:17:31:ac:e4:ee:2f:85
            b6:04:2f:3e:d1:c6:8e:f2:d9:fc:eb:42:5c:7f:0c:38
            a0:2c:73:9b:28:da:f5:aa:c5:69:98:3b:8e:f3:57:73
            d7:42:aa:4d:75:31:f0:49:01:bb:dc:a5:1a:ef:91:3f
            d6:c7:73:90:0e:a0:b1:07:bf:d2:99:f2:54:13:ca:6a
            e8:d8:e7:ac:c2:8f:b5:a2:8b:a5:1c:3c:9e:c6:e3:c1
            55:b9:34:bf:4d:c2:38:32:ca:9b:f5:e3:30:43:fb:cf
            cc:b2:cc:e9:9a:08:e9:9b:06:21:21:7c:e1:3d:c3:93
            05:c5:53:d3:b1:bc:d7:ef:a5:8a:50:a7:ca:46:7d:96
            f8:a8:ed:f3:07:39:6d:e4:8b:8f:81:6b:a5:15:0b:12
            24:1b:f8:fe:da:1d:88:c5:28:e3:f4:2a:40:92:37:7b
            56:d2:48:97:42:7f:aa:f2:f8:4e:be:76:3b:4b:c9:1d
            7b
        Exponent (bits 24):
            01:00:01
    Extensions:
        Basic Constraints (critical):
            Certificate Authority (CA): FALSE
        Key Purpose (not critical):
            TLS WWW Client.
        Key Usage (critical):
            Digital signature.
            Key encipherment.
        Subject Key Identifier (not critical):
            b1f122a301f97dfc739c84f3b453f6c05ddfa68f
        Authority Key Identifier (not critical):
            69f4f911b5859f8f380c4f02635dac5f3b6655b3
    Signature Algorithm: RSA-SHA256
    Signature:
        66:39:10:0f:5b:96:df:f4:ed:04:79:b8:d0:db:22:eb
        a3:83:dc:2a:3e:01:35:2c:16:e3:92:a0:4a:af:6c:92
        6c:f6:b4:fa:8c:ef:78:f7:e9:8f:eb:09:21:19:0b:65
        db:37:e0:44:f3:96:4d:6d:02:62:93:2f:eb:08:1b:1c
        4f:54:ec:a6:7f:bb:18:78:5c:e6:09:a0:a8:b3:76:c2
        01:8a:8a:d8:26:c8:19:b8:0b:44:51:29:77:54:37:a1
        70:57:41:d9:8e:99:5f:cb:71:64:83:95:fd:dc:13:17
        ae:dc:ea:bb:b5:01:41:d6:a7:88:ab:3b:55:f0:19:8f
        f1:19:d0:f6:9c:19:d9:5a:84:0b:ff:a6:25:cd:f9:6b
        2c:fa:a5:47:c1:29:2f:b1:3d:8f:2a:fc:bb:52:87:1f
        ce:9e:58:e5:e9:3d:53:9e:21:eb:f1:16:9f:de:3d:43
        56:26:67:bf:a3:1b:ce:4a:04:49:5a:20:be:76:f3:1b
        68:d9:fc:12:5e:ce:c5:27:64:e1:fc:74:57:49:54:b8
        a2:7e:cd:82:7d:99:0d:fc:8a:0d:df:75:7a:3f:55:78
        1b:bb:70:bf:8f:f2:f4:10:36:46:0d:bf:9e:fe:05:3a
        8d:d5:f4:9b:d1:31:26:5d:2c:09:4f:fa:ab:b8:2a:df
 Other Information:
    SHA1 fingerprint:
        e16367b9b216797fdb8b22d55ac447c804bbed5f
    SHA256 fingerprint:
        c6f14634509d489b7f4a451ae7a88d68e960b7ae5cd5b9a324e8d1a09315c1bb
    Public Key ID:
        b1f122a301f97dfc739c84f3b453f6c05ddfa68f
    Public key's random art:
        +--[ RSA 2048]----+
        |                 |
        |   .             |
        |  o     o       .|
        |   o . . = . . .+|
        |    o + S + o = =|
        |     o + o * = = |
        |    .     o B . .|
        |           o . o |
        |              E .|
        +-----------------+
 
 -----BEGIN CERTIFICATE-----
 MIIDcDCCAligAwIBAgIMWS4RIS4n/mnx1fsiMA0GCSqGSIb3DQEBCwUAMBYxFDAS
 BgNVBAMTC2xpYnZpcnQub3JnMB4XDTE3MDUzMTAwNDEwNVoXDTE4MDUzMTAwNDEw
 NVowXjERMA8GA1UEAxMIc2VydmVyNzQxFDASBgNVBAoTC2xpYnZpcnQub3JnMREw
 DwYDVQQHEwhCcmlzYmFuZTETMBEGA1UECBMKUXVlZW5zbGFuZDELMAkGA1UEBhMC
 QVUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDmwgkkGs/BmyVotjtb
 wUTnJE0sTkGeSi0nTrPhOosTH5wDnbw1EXpeqy8RUYW4E/4FPCDhTgyeXQW7Atkh
 OjQBYp6v39wYncQXMazk7i+FtgQvPtHGjvLZ/OtCXH8MOKAsc5so2vWqxWmYO47z
 V3PXQqpNdTHwSQG73KUa75E/1sdzkA6gsQe/0pnyVBPKaujY56zCj7Wii6UcPJ7G
 48FVuTS/TcI4Msqb9eMwQ/vPzLLM6ZoI6ZsGISF84T3DkwXFU9OxvNfvpYpQp8pG
 fZb4qO3zBzlt5IuPgWulFQsSJBv4/todiMUo4/QqQJI3e1bSSJdCf6ry+E6+djtL
 yR17AgMBAAGjdjB0MAwGA1UdEwEB/wQCMAAwEwYDVR0lBAwwCgYIKwYBBQUHAwIw
 DwYDVR0PAQH/BAUDAwegADAdBgNVHQ4EFgQUsfEiowH5ffxznITztFP2wF3fpo8w
 HwYDVR0jBBgwFoAUafT5EbWFn484DE8CY12sXztmVbMwDQYJKoZIhvcNAQELBQAD
 ggEBAGY5EA9blt/07QR5uNDbIuujg9wqPgE1LBbjkqBKr2ySbPa0+ozvePfpj+sJ
 IRkLZds34ETzlk1tAmKTL+sIGxxPVOymf7sYeFzmCaCos3bCAYqK2CbIGbgLRFEp
 d1Q3oXBXQdmOmV/LcWSDlf3cExeu3Oq7tQFB1qeIqztV8BmP8RnQ9pwZ2VqEC/+m
 Jc35ayz6pUfBKS+xPY8q/LtShx/Onljl6T1TniHr8Raf3j1DViZnv6MbzkoESVog
 vnbzG2jZ/BJezsUnZOH8dFdJVLiifs2CfZkN/IoN33V6P1V4G7twv4/y9BA2Rg2/
 nv4FOo3V9JvRMSZdLAlP+qu4Kt8=
 -----END CERTIFICATE-----
 - Ephemeral EC Diffie-Hellman parameters
 - Using curve: SECP256R1
 - Curve size: 256 bits
 - Version: TLS1.2
 - Key Exchange: ECDHE-RSA
 - Server Signature: RSA-SHA256
 - Client Signature: RSA-SHA256
 - Cipher: AES-128-GCM
 - MAC: AEAD
 - Compression: NULL
 - Options: safe renegotiation,
 - Channel binding 'tls-unique': 3f05c518bf28d0ce5ee49507
 *** Processing 50 bytes command: [  OK  ] Stopped dracut pre-udev hook.
 received:          Stopping dracut pre-udev hook...
 *** Processing 44 bytes command:          Stopping dracut pre-udev hook...
 received: [  OK  ] Stopped dracut cmdline hook.
 *** Processing 49 bytes command: [  OK  ] Stopped dracut cmdline hook.
 received:          Stopping dracut cmdline hook...
 *** Processing 43 bytes command:          Stopping dracut cmdline hook...
 received: [  OK  ] Closed udev Control Socket.
 ......
 *** Processing 63 bytes command: [  OK  ] Started dracut pre-pivot and cleanup hook.
 received:          Starting Cleaning Up and Shutting Down Daemons...
 *** Processing 61 bytes command:          Starting Cleaning Up and Shutting Down Daemons...
 Scheduling inactive connection for close
 
 (can got guest boot info after the certification verification)";;RedHatEnterpriseLinux7/RHEL7-93285
2771;RHEL7-93287;[console][tcp] Launch QEMU with a serial port as a TLS server;Launch QEMU with a serial port as a TLS server. Run a generic gnutls-cli TLS client, and ensure BIOS boot messages appear in the gnutls-cli terminal;Yalan Zhang (yalzhang);High;Positive;Automated;;1;"Senario 2: 
        Launch QEMU with a serial port as a TLS server. Run a generic gnutls-cli TLS client, it works as expected.
        1. ucomment these lines in qemu.conf, and restart libvirtd service.
        chardev_tls = 1
        chardev_tls_x509_cert_dir = ""/etc/pki/libvirt-chardev""
        chardev_tls_x509_verify = 1
       
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-93287
2771;;;;;;;;;2;" 2. start a vm with below content (the vm have os installed and console=ttyS0,115200 configured in kernel command line). The gnutls client will show bios boot messages as pretty format, and can login and execute commands.
        # virsh dumpxml rhel-new | grep /console -B11
           <serial type='tcp'>
             <source mode='bind' host='server74' service='5556' tls='yes'/>
             <protocol type='raw'/>
             <target port='0'/>
             <alias name='serial0'/>
           </serial>
           <console type='tcp'>
             <source mode='bind' host='server74' service='5556' tls='yes'/>
             <protocol type='raw'/>
             <target type='serial' port='0'/>
             <alias name='serial0'/>
           </console>";​​;;RedHatEnterpriseLinux7/RHEL7-93287
2771;;;;;;;;;3;"3. 
 # ps aux | grep qemu-kvm
 ...-object tls-creds-x509,id=objcharserial0_tls0,dir=/etc/pki/libvirt-chardev,endpoint=server,verify-peer=yes -chardev socket,id=charserial0,host=server74,port=5556,server,nowait,tls-creds=objcharserial0_tls0 -device isa-serial,chardev=charserial0,id=serial0 ...
​​";​​;;RedHatEnterpriseLinux7/RHEL7-93287
2771;;;;;;;;;4;"4. 
 # gnutls-cli --priority=NORMAL -p5556 --x509cafile=ca-cert.pem server74  --x509certfile=client-cert.pem --x509keyfile=client-key.pem
 Processed 1 CA certificate(s).
 Processed 1 client X.509 certificates...
 Resolving 'server74'...
 Connecting to '10.66.71.67:5556'...
 - Certificate type: X.509
 - Got a certificate list of 1 certificates.
 - Certificate[0] info:
 - subject `CN=server74,O=libvirt.org', issuer `CN=libvirt.org', RSA key 2048 bits, signed using RSA-SHA256, activated `2017-05-31 00:33:30 UTC', expires `2018-05-31 00:33:30 UTC', SHA-1 fingerprint `d2002e2d40fe836aa1af642c9335fb6f18f543b1'
    Public Key ID:
        557b4983a9c15a1fb945991a8d068c60d148631c
    Public key's random art:
        +--[ RSA 2048]----+
        |     oE* +...B+o |
        |     oo.o =.Oo=o |
        |         o.=.*o  |
        |        ... +.   |
        |        S        |
        |                 |
        |                 |
        |                 |
        |                 |
        +-----------------+
 - Status: The certificate is trusted. 
 - Successfully sent 1 certificate(s) to server.
 - Description: (TLS1.2)-(ECDHE-RSA-SECP256R1)-(AES-128-GCM)
 - Session ID: 99:87:7A:CF:F8:2C:7A:B3:18:41:01:3B:AE:56:ED:A7:1F:1B:3B:53:93:8E:5D:97:02:DE:D4:CD:AE:D3:AE:3C
 - Ephemeral EC Diffie-Hellman parameters
 - Using curve: SECP256R1
 - Curve size: 256 bits
 - Version: TLS1.2
 - Key Exchange: ECDHE-RSA
 - Server Signature: RSA-SHA256
 - Client Signature: RSA-SHA256
 - Cipher: AES-128-GCM
 - MAC: AEAD
 - Compression: NULL
 - Options: safe renegotiation,
 - Handshake was completed
 - Simple Client Mode:
 [  OK  ] Started Show Plymouth Boot Screen.
 [  OK  ] Reached target Paths.
 [  OK  ] Reached target Basic System.
 [  OK  ] Found device /dev/mapper/rhel-root.
         Starting File System Check on /dev/mapper/rhel-root...
 [  OK  ] Started File System Check on /dev/mapper/rhel-root.
 [  OK  ] Started dracut initqueue hook.
         Mounting /sysroot...
 [  OK  ] Reached target Remote File Systems (Pre).
 [  OK  ] Reached target Remote File Systems.
 [  OK  ] Mounted /sysroot.
 [  OK  ] Reached target Initrd Root File System.
         Starting Reload Configuration from the Real Root...
 [  OK  ] Started Reload Configuration from the Real Root.
 [  OK  ] Reached target Initrd File Systems.
 [  OK  ] Reached target Initrd Default Target.
         Starting dracut pre-pivot and cleanup hook...
 ......
 [  OK  ] Started Authorization Manager.
 [  OK  ] Started Login Service.
 Red Hat Enterprise Linux Server 7.4 Beta (Maipo)
 Kernel 3.10.0-671.el7.x86_64 on an x86_64
 localhost login: root
 root
 Password: redhat
 Last login: Wed May 31 11:26:54 on tty1
 [root@localhost ~]# ls
 ls
 anaconda-ks.cfg
 [root@localhost ~]#";​​;;RedHatEnterpriseLinux7/RHEL7-93287
2771;;;;;;;;;5;"Scenario 3: 
 Launch QEMU with a RHEL guest, and a serial port as a TLS server. Inside the guest OS run ""tail -f /dev/ttyS0'. Then launch a second QEMU instance with a serial port as a TLS client, connecting to the first QEMU guest. The BIOS boot messages from the second QEMU should appear in the guest terminal where you're running 'tail -f /dev/ttyS0'.";​​;;RedHatEnterpriseLinux7/RHEL7-93287
2771;;;;;;;;;6;"1.
 # ll /etc/pki/libvirt-chardev
 total 28
 -rw-r--r--. 1 root qemu 1086 May 31 13:30 ca-cert.pem
 -r--r-----. 1 root qemu 1253 May 31 09:19 client-cert.pem
 -r--r-----. 1 root qemu 5823 May 31 09:19 client-key.pem
 -r--r-----. 1 root qemu 1180 May 31 14:06 server-cert.pem
 -r--r-----. 1 root qemu 5826 May 31 14:06 server-key.pem
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-93287
2771;;;;;;;;;7;"2. the 2 guests both have os installed and kernel command line configured with ""console=ttyS0,115200""
 # virsh dumpxml rhel7.4 | grep /console -B5
    </serial>
    <console type='tcp'>
      <source mode='bind' host='server74' service='5556' tls='yes'/>
      <protocol type='raw'/>
      <target type='serial' port='1'/>
    </console>
 # virsh dumpxml rhel-new | grep /console -B5
    </serial>
    <console type='tcp'>
      <source mode='connect' host='server74' service='5556' tls='yes'/>
      <protocol type='raw'/>
      <target type='serial' port='0'/>
    </console>";​​;;RedHatEnterpriseLinux7/RHEL7-93287
2771;;;;;;;;;8;"3. start the server rhel7.4 and login the guest, then execute ""screen /dev/ttyS0""
​​";​​;;RedHatEnterpriseLinux7/RHEL7-93287
2771;;;;;;;;;9;"4. start the client rhel-new, the qemu command line looks like this:
 qemu     19362 32.3  4.7 1954960 351096 ?      Sl   15:24   0:19 /usr/libexec/qemu-kvm -name guest=rhel7.4, ...... 
 -object tls-creds-x509,id=objcharserial0_tls0,dir=/etc/pki/libvirt-chardev,endpoint=server,verify-peer=yes -chardev socket,id=charserial0,host=server74,port=5556,server,nowait,tls-creds=objcharserial0_tls0......
 qemu     19460 44.7  3.0 1919036 223860 ?      Sl   15:25   0:07 /usr/libexec/qemu-kvm -name guest=rhel-new......
 -object tls-creds-x509,id=objcharserial0_tls0,dir=/etc/pki/libvirt-chardev,endpoint=client,verify-peer=yes -chardev socket,id=charserial0,host=server74,port=5556,tls-creds=objcharserial0_tls0 ......";​​;;RedHatEnterpriseLinux7/RHEL7-93287
2771;;;;;;;;;10;"5. check the output in rhel7.4 
 [root@localhost ~]# screen /dev/ttyS0
 It will show the bios boot messages";​​;;RedHatEnterpriseLinux7/RHEL7-93287
2772;RHEL7-93314;[Node Devices]  Dump scsi device xml info;"Dump scsi device xml info
";Jingjing Shao (jishao);Critical;Positive;Not Automated;;1;" 1. # virsh nodedev-list --tree
   +- pci_0000_00_03_0
   |   |
   |   +- pci_0000_09_00_0
   |       |
   |       +- scsi_host0
   |           |
   |           +- scsi_target0_2_0
   |               |
   |               +- scsi_0_2_0_0
   |                   |
   |                   +- block_sda_3600605b004ff9e4017f7512d0e506535
   |                   +- scsi_generic_sg0
 
 
 
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-93314
2772;;;;;;;;;2;"2.Check scsci device
 # virsh nodedev-dumpxml  scsi_target0_2_0
​​";"<device>
   <name>scsi_target4_0_0</name>
   <path>/sys/devices/pci0000:80/0000:80:09.0/0000:95:00.1/host4/rport-4:0-0/target4:0:0</path>
   <parent>scsi_host4</parent>
   <capability type='scsi_target'>
     <target>target4:0:0</target>
     <capability type='fc_remote_port'>
       <rport>rport-4:0-0</rport>
       <wwpn>0x50050768030539b6</wwpn>
     </capability>
   </capability>
 </device>
 
 Related patch: 
 https://www.redhat.com/archives/libvir-list/2017-May/msg00785.html 
​​";;RedHatEnterpriseLinux7/RHEL7-93314
2772;;;;;;;;;3;"3, # virsh nodedev-dumpxml block_sr0_IBM_SATA_DEVICE_81Y3661_YM45_044072
​​";"# virsh nodedev-dumpxml block_sr0_IBM_SATA_DEVICE_81Y3661_YM45_044072
 <device>
   <name>block_sr0_IBM_SATA_DEVICE_81Y3661_YM45_044072</name>
   <path>/sys/devices/pci0000:00/0000:00:1f.2/ata1/host2/target2:0:0/2:0:0:0/block/sr0</path>
   <devnode type='dev'>/dev/sr0</devnode>
   <devnode type='link'>/dev/cdrom</devnode>
   <devnode type='link'>/dev/disk/by-id/ata-IBM_SATA_DEVICE_81Y3661_YM45_044072</devnode>
   <devnode type='link'>/dev/disk/by-path/pci-0000:00:1f.2-ata-1.0</devnode>
   <parent>scsi_2_0_0_0</parent>
   <capability type='storage'>
     <block>/dev/sr0</block>
     <bus>ata</bus>
     <drive_type>cdrom</drive_type>
     <model> DEVICE 81Y3661</model>
     <vendor>IBM SATA</vendor>
     <serial>IBM_SATA_DEVICE_81Y3661_YM45_044072</serial>
     <capability type='removable'>
       <media_available>0</media_available>
       <media_size>0</media_size>
     </capability>
   </capability>
 </device>
 
 
 
 # ll /dev/cdrom
 lrwxrwxrwx. 1 root root 3 May 27 03:07 /dev/cdrom -> sr0
 
 # ll /dev/disk/by-id/ata-IBM_SATA_DEVICE_81Y3661_YM45_044072
 lrwxrwxrwx. 1 root root 9 May 27 03:07 /dev/disk/by-id/ata-IBM_SATA_DEVICE_81Y3661_YM45_044072 -> ../../sr0
 
 # ll /dev/disk/by-path/pci-0000:00:1f.2-ata-1.0
 lrwxrwxrwx. 1 root root 9 May 27 03:07 /dev/disk/by-path/pci-0000:00:1f.2-ata-1.0 -> ../../sr0
​​";;RedHatEnterpriseLinux7/RHEL7-93314
2772;;;;;;;;;4;"4.  # virsh nodedev-dumpxml scsi_generic_sg1
 
 
​​";"# virsh nodedev-dumpxml scsi_generic_sg1
 <device>
   <name>scsi_generic_sg1</name>
   <path>/sys/devices/pci0000:00/0000:00:1f.2/ata1/host2/target2:0:0/2:0:0:0/scsi_generic/sg1</path>
   <devnode type='dev'>/dev/sg1</devnode>
   <parent>scsi_2_0_0_0</parent>
   <capability type='scsi_generic'>
     <char>/dev/sg1</char>
   </capability>
 </device>
​​";;RedHatEnterpriseLinux7/RHEL7-93314
2773;RHEL7-93318;polarion display display issue;;Yalan Zhang (yalzhang);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93318
2774;RHEL7-93365;KN-TC: vnic/sriov FUNC=sriov-test-vmvf-different-vlan;KN-TC: vnic/sriov FUNC=sriov-test-vmvf-different-vlan;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93365
2775;RHEL7-93366;KN-TC: vnic/sriov FUNC=sriov-test-bond-lacp;KN-TC: vnic/sriov FUNC=sriov-test-bond-lacp;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93366
2776;RHEL7-93397;KN-TC: vnic/macvtap FUNC=macvtap-test-bridge-vmvf-vmvf-virtio;KN-TC: vnic/macvtap FUNC=macvtap-test-bridge-vmvf-vmvf-virtio;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93397
2777;RHEL7-93398;KN-TC: vnic/macvtap FUNC=macvtap-test-bridge-vmvf-vmvf-vlan-virtio;KN-TC: vnic/macvtap FUNC=macvtap-test-bridge-vmvf-vmvf-vlan-virtio;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93398
2778;RHEL7-93399;KN-TC: vnic/macvtap FUNC=macvtap-test-bridge-vmvf-remote-virtio;KN-TC: vnic/macvtap FUNC=macvtap-test-bridge-vmvf-remote-virtio;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93399
2779;RHEL7-93400;KN-TC: vnic/macvtap FUNC=macvtap-test-passthru-vmvf-remote-virtio;KN-TC: vnic/macvtap FUNC=macvtap-test-passthru-vmvf-remote-virtio;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93400
2780;RHEL7-93401;KN-TC: vnic/macvtap FUNC=macvtap-test-passthru-vmvf-vlan-remote-virtio;KN-TC: vnic/macvtap FUNC=macvtap-test-passthru-vmvf-vlan-remote-virtio;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93401
2781;RHEL7-93402;KN-TC: vnic/macvtap FUNC=macvtap-test-bridge-vmvf-vmvf-e1000;KN-TC: vnic/macvtap FUNC=macvtap-test-bridge-vmvf-vmvf-e1000;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93402
2782;RHEL7-93403;KN-TC: vnic/macvtap FUNC=macvtap-test-bridge-vmvf-vmvf-vlan-e1000;KN-TC: vnic/macvtap FUNC=macvtap-test-bridge-vmvf-vmvf-vlan-e1000;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93403
2783;RHEL7-93404;KN-TC: vnic/macvtap FUNC=macvtap-test-bridge-vmvf-remote-e1000;KN-TC: vnic/macvtap FUNC=macvtap-test-bridge-vmvf-remote-e1000;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93404
2784;RHEL7-93405;KN-TC: vnic/macvtap FUNC=macvtap-test-passthru-vmvf-remote-e1000;KN-TC: vnic/macvtap FUNC=macvtap-test-passthru-vmvf-remote-e1000;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93405
2785;RHEL7-93406;KN-TC: vnic/macvtap FUNC=macvtap-test-passthru-vmvf-vlan-remote-e1000;KN-TC: vnic/macvtap FUNC=macvtap-test-passthru-vmvf-vlan-remote-e1000;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93406
2786;RHEL7-93412;[virtlogd][Reload] Reload virtlogd.service when guest with file-backend serial device is running;"Verify that reloading virtlogd.service can succeed when guest with file-backend serial device is running.
Bug 1430988 - Permission denied when reloading virtlogd";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set virtlogd as the log handler:
 
 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.
 
 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 
 
 (Re)start libvirtd:
 # systemctl restart libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-93412
2786;;;;;;;;;2;Start a guest with file-backend serial device;​​;;RedHatEnterpriseLinux7/RHEL7-93412
2786;;;;;;;;;3;"Reload virtlogd:
 # systemctl reload virtlogd";​​;;RedHatEnterpriseLinux7/RHEL7-93412
2786;;;;;;;;;4;"Check virtlogd status:
 # systemctl status virtlogd";virtlogd is running;;RedHatEnterpriseLinux7/RHEL7-93412
2787;RHEL7-93413;WALA-TC: [WALA conf] Enable FIPS;[WALA conf] Enable FIPS;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"1. Prepare a VM on Azure. 
 1.1 Ensure these packages are installed:
 fipscheck
 fipscheck-lib
 dracut-fips
 1.2 Add fips=1 in kernel parameters
 RHEL-7:
 # sed -i '/^GRUB_CMDLINE_LINUX=/s/""$/ fips=1""/' /etc/default/grub
 uuid=$(findmnt -no uuid /boot)
 [[ -n $uuid ]] && sed -i ""/^GRUB_CMDLINE_LINUX=/s/\""$/ boot=UUID=${uuid}\""/"" /etc/default/grub
 # grub2-mkconfig -o /boot/grub/grub.cfg
 RHEL-6:
 Add fips=1 in /etc/grub/grub.conf
 1.3 Rebuild initramfs:
 # mv /boot/initramfs-3.10.0-675.el7.x86_64.img{,.bak}
 # dracut
 1.4 Reboot
 * Detail steps are here: https://access.redhat.com/solutions/137833 
​​";"Check if FIPS is enable:
 # rpm -qa|grep fips
 fipscheck-1.4.1-6.el7.x86_64
 dracut-fips-033-496.el7.x86_64
 fipscheck-lib-1.4.1-6.el7.x86_64
 
 # cat /proc/sys/crypto/fips_enabled
 1
 
 # sysctl crypto.fips_enabled
 crypto.fips_enabled = 1
 
 # cat /proc/cmdline 
 BOOT_IMAGE=/vmlinuz-3.10.0-675.el7.x86_64 root=/dev/mapper/rhel-root ro earlyprintk=ttyS0 console=ttyS0 rootdelay=300 crashkernel=auto net.ifnames=0 fips=1 boot=UUID=cfb59caa-86a6-4795-8fdc-9cded73a2238
 
 # echo $(findmnt -no uuid /boot)
 cfb59caa-86a6-4795-8fdc-9cded73a2238
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-93413
2787;;;;;;;;;2;"2. Enable FIPS in waagent.conf
 Restart waagent service
​​";"# cat /etc/waagent.conf |grep FIPS
 OS.EnableFIPS=y";;RedHatEnterpriseLinux7/RHEL7-93413
2787;;;;;;;;;3;"3. Run ""reset remote access"" to install an Extension to the VM
 Wait for the extension installed, check if there's error log in /var/log/waagent.log
​​";"There's no error log. 
​​";;RedHatEnterpriseLinux7/RHEL7-93413
2787;;;;;;;;;4;config ;​​;;RedHatEnterpriseLinux7/RHEL7-93413
2788;RHEL7-93427;libvirt must audit resource information about ivshmem -bug 1218603;Make sure auditing is enabled (default for RHEL), even Libvirt leaves creation of shm segment to qemu, libvirt should audit resource information about ivshmem;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;" 1. Add below content into guest's xml:

   <shmem name='my_shmem1'>
       <model type='ivshmem-plain'/>
       <size unit='M'>4</size>
     </shmem>
     <shmem name='my_shmem2'>
       <model type='ivshmem-doorbell'/>
       <server path='/tmp/ivshmem_socket'/>
       <msi ioeventfd='on'/>
     </shmem>
     <shmem name='my_shmem3'>
       <model type='ivshmem'/>
       <size unit='M'>4</size>
     </shmem>

 2. # virsh start rhel7.4
 error: Failed to start domain rhel7.4
 error: internal error: process exited while connecting to monitor: 2017-06-08T02:21:08.052705Z qemu-kvm: -chardev pty,id=charserial0: char device redirected to /dev/pts/10 (label charserial0)
 2017-06-08T02:21:08.053253Z qemu-kvm: -chardev socket,id=charshmem1,path=/tmp/ivshmem_socket: Failed to connect socket: No such file or directory
";"   check the audit log:
 type=VIRT_RESOURCE msg=audit(1496888468.180:29975): pid=19036 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm resrc=shmem reason=start vm=""rhel7.4"" uuid=c156ca6f-3c16-435b-980d-9745e1d84ad1 size=4194304 path=/dev/shm/my_shmem1 exe=""/usr/sbin/libvirtd"" hostname=? addr=? terminal=? res=success'
 type=VIRT_RESOURCE msg=audit(1496888468.180:29976): pid=19036 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm resrc=ivshmem-socket reason=start vm=""rhel7.4"" uuid=c156ca6f-3c16-435b-980d-9745e1d84ad1 path=/tmp/ivshmem_socket exe=""/usr/sbin/libvirtd"" hostname=? addr=? terminal=? res=success'
 type=VIRT_RESOURCE msg=audit(1496888468.180:29977): pid=19036 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm resrc=shmem reason=start vm=""rhel7.4"" uuid=c156ca6f-3c16-435b-980d-9745e1d84ad1 size=4194304 path=/dev/shm/my_shmem3 exe=""/usr/sbin/libvirtd"" hostname=? addr=? terminal=? res=success'
";Test Case;RedHatEnterpriseLinux7/RHEL7-93427
2788;;;;;;;;;2;"3. for attach

 # cat shmem1.xml
 <shmem name='test_shmeme'>
     <model type='ivshmem-plain'/>
     <size unit='M'>4</size>
   </shmem>

 # virsh attach-device rhel7.4 shmem1.xml
 Device attached successfully
";"type=VIRT_RESOURCE msg=audit(1496891672.208:30492): pid=21711 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm resrc=shmem reason=attach vm=""rhel7.4"" uuid=c156ca6f-3c16-435b-980d-9745e1d84ad1 size=4194304 path=/dev/shm/test_shmeme exe=""/usr/sbin/libvirtd"" hostname=? addr=? terminal=? res=success'";;RedHatEnterpriseLinux7/RHEL7-93427
2788;;;;;;;;;3;"# cat shmem2.xml
     <shmem name='my_shmem5'>
       <model type='ivshmem-doorbell'/>
       <server path='/tmp/ivshmem_socket'/>
       <msi ioeventfd='on'/>
     </shmem>

 # virsh attach-device rhel7.4  shmem2.xml
 error: Failed to attach device from shmem2.xml
 error: internal error: unable to execute QEMU command 'chardev-add': Failed to connect socket: No such file or directory
";"type=VIRT_RESOURCE msg=audit(1496891755.045:30493): pid=21711 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm resrc=ivshmem-socket reason=attach vm=""rhel7.4"" uuid=c156ca6f-3c16-435b-980d-9745e1d84ad1 path=/tmp/ivshmem_socket exe=""/usr/sbin/libvirtd"" hostname=? addr=? terminal=? res=failed'
";;RedHatEnterpriseLinux7/RHEL7-93427
2788;;;;;;;;;4;"# cat shmem3.xml
    <shmem name='my_shmem3'>
       <model type='ivshmem'/>
       <size unit='M'>8</size>
     </shmem>

 # virsh attach-device rhel7.4 shmem3.xml
 error: Failed to attach device from shmem3.xml
 error: Operation not supported: live attach of shmem model 'ivshmem' is not supported
";"no audit log
";;RedHatEnterpriseLinux7/RHEL7-93427
2788;;;;;;;;;5;"4. for detach

 # virsh dumpxml rhel7.4 | grep /shmem -B5
     <shmem name='test_shmeme'>
       <model type='ivshmem-plain'/>
       <size unit='M'>4</size>
       <alias name='shmem0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0a' function='0x0'/>
     </shmem>

 # cat shmem1.xml
 <shmem name='test_shmeme'>
     <model type='ivshmem-plain'/>
     <size unit='M'>4</size>
   </shmem>

 # virsh detach-device rhel7.4  shmem1.xml
 Device detached successfully
";"type=VIRT_RESOURCE msg=audit(1496891959.240:30494): pid=21711 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm resrc=shmem reason=detach vm=""rhel7.4"" uuid=c156ca6f-3c16-435b-980d-9745e1d84ad1 size=4194304 path=/dev/shm/test_shmeme exe=""/usr/sbin/libvirtd"" hostname=? addr=? terminal=? res=success'
";;RedHatEnterpriseLinux7/RHEL7-93427
2789;RHEL7-93455;Check mac address change when VF detach and reattach to the host - Bug 1415609 1460082;"Background: 
when passing a VF to a guest, libvirt sets its MAC according to the domain xml. 
When the VF is later released back to the host, libvirt attempts to restore its original MAC, but some drivers do not allow to set it back to all-zero mac. 
libvirt then keeps the guest MAC on the VF, which can cause connectivity problems if that MAC is later assigned to another VF and the VM is restarted.
 
This is fixed in rhel7.4(Bug 1415609) and backport to rhel7.3(Bug 1442040)
 
 Bug 1415609 - libvirt fails to remove guest mac from VFs of certain drivers
 Bug 1460082 - Libvirt change mac address wrongly from VFs of mlx4 drivers
";Jingjing Shao (jishao);High;Positive;Not Automated;;1;"1.  Check mac address
 # ip l
​​";"Output: 
 45: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 7e:a6:8f:e6:0a:12, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC de:25:3b:42:ad:f1, spoof checking on, link-state auto, trust off, query_rss off
     vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
 43: enp134s16f5: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether 5a:6c:10:b1:c6:32 brd ff:ff:ff:ff:ff:ff";Test Case;RedHatEnterpriseLinux7/RHEL7-93455
2789;;;;;;;;;2;"2. Detach the device
 # virsh nodedev-detach pci_0000_86_10_5
 Device pci_0000_86_10_5 detached
​​";​​;;RedHatEnterpriseLinux7/RHEL7-93455
2789;;;;;;;;;3;"3.  Check mac address
 # ip l
​​";"Output:
 45: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 7e:a6:8f:e6:0a:12, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC de:25:3b:42:ad:f1, spoof checking on, link-state auto, trust off, query_rss off
     vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
​​";;RedHatEnterpriseLinux7/RHEL7-93455
2789;;;;;;;;;4;"4. Reattach the device 
 # virsh nodedev-reattach pci_0000_86_10_5
 Device pci_0000_86_10_5 re-attached
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-93455
2789;;;;;;;;;5;"5.Check mac address
   # ip l
​​";"Output:
 45: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 7e:a6:8f:e6:0a:12, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC de:25:3b:42:ad:f1, spoof checking on, link-state auto, trust off, query_rss off
     vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
 66: enp134s16f5: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether 3a:8e:c5:8d:73:ac brd ff:ff:ff:ff:ff:ff";;RedHatEnterpriseLinux7/RHEL7-93455
2790;RHEL7-93558;IDM-SSSD-TC: krb_provider: kcm: Enable and verify sssd kcm socket;Enable and verify sssd kcm socket;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"Setup sssd.conf file with krb provider.
​​";"SSSD service should be running.
 Sssd-kcm socket and service should be running.
 File /var/run/.heim_org.h5l.kcm-socket should exist.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-93558
2790;;;;;;;;;2;"Execute  the following:
           # systemctl start sssd.service ; systemctl enable sssd-kcm.socket
           # systemctl start sssd-kcm.socket ;
           # systemctl enable sssd-kcm.service
           # systemctl start sssd-kcm.service";​​;;RedHatEnterpriseLinux7/RHEL7-93558
2790;;;;;;;;;3;Verify the status of sssd-kcm service;​​;;RedHatEnterpriseLinux7/RHEL7-93558
2790;;;;;;;;;4;Verify the status of sssd-kcm socket;​​;;RedHatEnterpriseLinux7/RHEL7-93558
2790;;;;;;;;;5;Verify the existence of /var/run/.heim_org.h5l.kcm-socket file;​​;;RedHatEnterpriseLinux7/RHEL7-93558
2791;RHEL7-93561;[update-device][mtu] update mtu in interface (not support) - bug 1447618;"Currently, any attempt to change MTU on an interface that is plugged to a running domain is silently ignored. We should either do what's asked or error out. Well, we can update the host side of the interface, but we cannot change 'host_mtu' attribute for the virtio-net device. Therefore we have to error out.
";Yalan Zhang (yalzhang);Low;Negative;Automated;;1;"1. start a guest with mtu size = 9000
 # virsh dumpxml rhel7.4 | grep /interface -B8
     <interface type='network'>
       <mac address='52:54:00:11:0c:ff'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <mtu size='9000'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-93561
2791;;;;;;;;;2;# ifconfig vnet0 | grep mtu;vnet0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 9000;;RedHatEnterpriseLinux7/RHEL7-93561
2791;;;;;;;;;3;"2. restart libvirtd and check the mtu not change
 # systemctl restart libvirtd
 # ifconfig vnet0 | grep mtu
​​";"vnet0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 9000
 
 (check the mtu of vnet0 of host and check the mtu of interface on guest, should be 9000)";;RedHatEnterpriseLinux7/RHEL7-93561
2791;;;;;;;;;4;"3. mtu do not support live update
 # cat interface.xml
    <interface type='network'>
       <mac address='52:54:00:11:0c:ff'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <mtu size='5000'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel7.4 interface.xml
 ==> should be error out";"error: Failed to update device from interface.xml
 error: Operation not supported: cannot modify MTU";;RedHatEnterpriseLinux7/RHEL7-93561
2791;;;;;;;;;5;"4. 
 # cat mtu.xml
 <interface type='network'>
       <mac address='52:54:00:11:0c:ff'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
 <mtu size='-4'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel7.4 mtu.xml
 
​​";"error: Failed to update device from mtu.xml
 error: XML error: malformed mtu size";;RedHatEnterpriseLinux7/RHEL7-93561
2791;;;;;;;;;6;"5. # cat mtu.xml 
 <interface type='network'>
       <mac address='52:54:00:11:0c:ff'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
 <mtu size='s'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel7.4 mtu.xml
​​";"error: Failed to update device from mtu.xml
 error: XML error: malformed mtu size";;RedHatEnterpriseLinux7/RHEL7-93561
2792;RHEL7-93823;WALA-TC: [func] the path of configuration file can be customized;Check WALA can customize the path of configuration file;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"1. Prepare a VM on Azure. 
 1.1 Modify
 * RHEL-7: ""/usr/lib/systemd/system/waagent.service"".
 Change the value of key ""ConditionPathExists"" to ""/root/waagent.conf""
 (this value is specified by yourself,in this case,I use this file as WALA configuration file)
 
 Change the value of key ""ExecStart"" to
 ""/usr/bin/python -u /usr/sbin/waagent -configuration-path:/root/waagent.conf -daemon""
 * RHEL-6:
 ""/etc/init.d/waagent"" append ""-configuration-path:/root/waagent.conf"" to line ""    $WAZD_BIN -start""
 
 1.2 Move ""/etc/waagent.conf"" as ""/root/waagent.conf""
 Note: please use ""mv"" command,not ""cp"" command
 
 1.3 Systemd daemon reload
 # systemctl daemon-reload
​​";"RHEL-7:
 # sed -i -e '/ExecStart/s/$/ -configuration-path:\/root\/waagent.conf&/g' -e 's/\/etc\/waagent.conf/\/root\/waagent.conf/g' /usr/lib/systemd/system/waagent.service
 RHEL-6:
 # sed -i 's/WAZD_BIN -start/WAZD_BIN -start -configuration-path:\/root\/waagent.conf/g' /etc/init.d/waagent
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-93823
2792;;;;;;;;;2;"2. Deprovision this VM and use this as a template to create a new VM
 #
 waagent -configuration-path:/root/waagent.conf -deprovision+user -force
 
 As ASM model,you can stop this VM and Capture this as an Generalized images,and use the image to create a new VM
 As ARM model,you can directly use the disk to create a new VM through CLI
​​";​​;;RedHatEnterpriseLinux7/RHEL7-93823
2792;;;;;;;;;3;"3. After the VM finishing provisioning,login and Check whether wala normally running 
​​";wala is running as usual and there is no error log in log file;;RedHatEnterpriseLinux7/RHEL7-93823
2792;;;;;;;;;4;config ;;;RedHatEnterpriseLinux7/RHEL7-93823
2793;RHEL7-93849;KN-TC: openvswitch/topo FUNC=ovs-test-vxlan-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-vxlan-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93849
2794;RHEL7-93850;KN-TC: openvswitch/topo FUNC=ovs-test-vxlan1-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-vxlan1-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93850
2795;RHEL7-93851;KN-TC: openvswitch/topo FUNC=ovs-test-vxlan-flow-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-vxlan-flow-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93851
2796;RHEL7-93852;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-vxlan-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-vxlan-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93852
2797;RHEL7-93853;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-vxlan1-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-vlan-vxlan1-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93853
2798;RHEL7-93854;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vxlan-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vxlan-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93854
2799;RHEL7-93855;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vxlan1-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vxlan1-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93855
2800;RHEL7-93856;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vxlan-flow-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vxlan-flow-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93856
2801;RHEL7-93857;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-vxlan-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-vxlan-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93857
2802;RHEL7-93858;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-vxlan1-ipv6;KN-TC: openvswitch/topo FUNC=ovs-test-vm-vlan-vxlan1-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-93858
2803;RHEL7-93870;WALA-TC: [General] host plugin - ignore proxy;HostGAPlugin should never use proxy even if set proxy in waagent.conf;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"1.1 Stop waagent service.
 1.2 Edit /etc/waagent.conf, set a wrong proxy server, and enable verbose log
 HttpProxy.Host=172.16.0.1
 HttpProxy.Port=3128
 Logs.Verbose=y
 1.3 Remove /var/lib/waagent/WALinuxAgent-*
 1.4 Start waagent service
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-93870
2803;;;;;;;;;2;"2. Wait for about 30 seconds. 
 Check /var/log/waagent.log: Retry 3 times and report HTTP GET failed, then fall back to host plugin and get [200] http status.
 
​​";"2017/06/28 15:49:03.851414 VERBOSE HTTP connection [GET] [https://brdfepirv2by3prdstr04.blob.core.windows.net:443/7d89d439b79f4452950452399add2c90/Microsoft.OSTCLinuxAgent_Prod_uswest_manifest.xml] [None] [None]
 2017/06/28 15:49:13.915877 VERBOSE HTTP connection [GET] [https://brdfepirv2by3prdstr04.blob.core.windows.net:443/7d89d439b79f4452950452399add2c90/Microsoft.OSTCLinuxAgent_Prod_uswest_manifest.xml] [None] [None]
 2017/06/28 15:49:23.939687 VERBOSE Fetch failed from [https://brdfepirv2by3prdstr04.blob.core.windows.net/7d89d439b79f4452950452399add2c90/Microsoft.OSTCLinuxAgent_Prod_uswest_manifest.xml]: [000009] HTTP GET failed
 2017/06/28 15:49:23.975432 VERBOSE Manifest could not be downloaded, falling back to host plugin
 2017/06/28 15:49:23.992088 VERBOSE HostGAPlugin: Getting API versions at [http://168.63.129.16:32526/versions]
 2017/06/28 15:49:24.011251 VERBOSE HTTP connection [GET] [/versions] [None] [{'x-ms-containerid': u'b33a7d8e-5b10-412f-bd7b-fbd4f64e41b3'}]
 2017/06/28 15:49:24.034152 VERBOSE HTTP response status: [200]";;RedHatEnterpriseLinux7/RHEL7-93870
2803;;;;;;;;;3;3. Check if /var/lib/waagent/WALinuxAgent-* packages are downloaded.;"# ll /var/lib/waagent/
 drwxr-xr-x. 3 root root     65 Jun 22 17:34 WALinuxAgent-2.2.10
 -rw-r--r--. 1 root root 423464 Jun 22 17:34 WALinuxAgent-2.2.10.zip
 drwxr-xr-x. 3 root root     65 Jun 22 17:34 WALinuxAgent-2.2.12
 -rw-r--r--. 1 root root 450604 Jun 22 17:34 WALinuxAgent-2.2.12.zip
 drwxr-xr-x. 3 root root     95 Jun 27 15:32 WALinuxAgent-2.2.13
 -rw-r--r--. 1 root root 465382 Jun 22 17:34 WALinuxAgent-2.2.13.zip
 drwxr-xr-x. 3 root root     77 Jun 28 15:36 WALinuxAgent-2.2.14
 -rw-r--r--. 1 root root 471436 Jun 28 09:54 WALinuxAgent-2.2.14.zip
 drwxr-xr-x. 3 root root     65 Jun 22 17:34 WALinuxAgent-2.2.8
 -rw-r--r--. 1 root root 415993 Jun 22 17:34 WALinuxAgent-2.2.8.zip";;RedHatEnterpriseLinux7/RHEL7-93870
2803;;;;;;;;;4;config ;​​;;RedHatEnterpriseLinux7/RHEL7-93870
2804;RHEL7-93891;[Migration]Kill SRC libvirtd during Confirm Phase of live migration - bug 1343858;"Check the guest can running successfully on the target host if kill the target libvirtd at the confirm phase
 Bug 1343858 - Guest image owner changes to root:root if kill source libvirtd in migration confirm phase. ";Yan Fu (yafu);High;Positive;Manual Only;;1;Start a guest with disk on nfs storage on source host.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-93891
2804;;;;;;;;;2;"Check the ownership of the guest disk image:
 
* # ll /nfs-images/yafu/rhel7*
";"Output:
 -rwxrwxrwx. 1 qemu qemu 12887130112 Mar  2  2017 /nfs-images/yafu/rhel7.2.qcow2
​​";;RedHatEnterpriseLinux7/RHEL7-93891
2804;;;;;;;;;3;"Attach source libvirtd to gdb and set breakpoint:
 
* # gdb -p `pidof libvirtd`
* (gdb) br qemuMigrationConfirmPhase
Breakpoint 1 at 0x7f60739a0f30: file qemu/qemu_migration.c, line 4173.
* (gdb) c
Continuing. [Switching to Thread 0x7f60b7be9700 (LWP 7881)]";​​;;RedHatEnterpriseLinux7/RHEL7-93891
2804;;;;;;;;;4;"Do migration:
 
* # virsh migrate rhel7.3-min qemu+ssh://10.66.5.14/system --live --verbose
";​​;;RedHatEnterpriseLinux7/RHEL7-93891
2804;;;;;;;;;5;"After libvirtd reaches the breakpoint, kill the libvirtd on the source host:
 
* # pkill -9 libvirtd
";​​;;RedHatEnterpriseLinux7/RHEL7-93891
2804;;;;;;;;;6;"Check guest status on source host:
 
* # virsh list
";Guest is not on target host.;;RedHatEnterpriseLinux7/RHEL7-93891
2804;;;;;;;;;7;"Check domain status on target host:
 
* # virsh list
 Id    Name                           State
 ----------------------------------------------------
  1     V                              running

 
* ping {guest_ip}
* Do some disk I/O operations in guest
";"Guest is running on target host and can respond 
";;RedHatEnterpriseLinux7/RHEL7-93891
2804;;;;;;;;;8;"Check the ownership of the guest disk image:
 
* # ll /nfs-images/yafu/rhel7*
";"The ownership doesn't change.
 
 Output:
 -rwxrwxrwx. 1 qemu qemu 12887130112 Mar  2  2017 /nfs-images/yafu/rhel7.2.qcow2
​​";;RedHatEnterpriseLinux7/RHEL7-93891
2805;RHEL7-93910;[sVirt][selinux][config]enable qemu namespaces  - bug 1404952 1189275;"Libvirt will only relable the source disk in the qem process namespace if enabled namespaces.
";Yan Fu (yafu);Critical;Positive;Automated;;1;" 1.Enable qemu namespaces in the qemu.conf (enabled by default):
 #cat /etc/libvirt/qemu.conf
 namespaces = [ ""mount""   ]
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-93910
2805;;;;;;;;;2;"2.Restart libvirtd service:
 #systemctl restart libvirtd
​​";​​;;RedHatEnterpriseLinux7/RHEL7-93910
2805;;;;;;;;;3;"3.Start a guest with block device:
   <disk type='block' device='lun' sgio='unfiltered'>
       <driver name='qemu' type='raw' cache='none'/>
       <source dev='/dev/disk/by-path/ip-10.66.71.72:3260-iscsi-iqn.2016-03.com.virttest:logical-pool.target-lun-0'/>
       <target dev='vdb' bus='scsi'/>
       <shareable/>
       <alias name='scsi0-0-0-1'/>
       <address type='drive' controller='0' bus='0' target='0' unit='1'/>
     </disk>";​​;;RedHatEnterpriseLinux7/RHEL7-93910
2805;;;;;;;;;4;"4.Check the dac and selinux context of the block device after guest start:
 # ll /dev/disk/by-path/ip-10.66.71.72:3260-iscsi-iqn.2016-03.com.virttest:logical-pool.target-lun-0
 lrwxrwxrwx. 1 root root 9 Jun 22 11:07 /dev/disk/by-path/ip-10.66.71.72:3260-iscsi-iqn.2016-03.com.virttest:logical-pool.target-lun-0 -> ../../sdb
 # ll -Z /dev/sdb
 
​​";"4.# ll -Z /dev/sdb
 brw-rw----. root disk system_u:object_r:fixed_disk_device_t:s0 /dev/sdb";;RedHatEnterpriseLinux7/RHEL7-93910
2805;;;;;;;;;5;"5.Check the qemu namespaces:
 # lsns | grep -i qemu
 4026532392 mnt        1 15678 qemu   /usr/libexec/qemu-kvm -name guest=rhel7.3-min,debug-threads=on ...
​​";"5.
 4026532392 mnt        1 15678 qemu   /usr/libexec/qemu-kvm -name guest=rhel7.3-min,debug-threads=on ...";;RedHatEnterpriseLinux7/RHEL7-93910
2805;;;;;;;;;6;"6.Check the dac and selinux context in the qemu namespaces:
 #nsenter -t 15678 -m -- ls -l /dev/sdb -Z
​​";"6.Output:
 brw-rw----. qemu qemu system_u:object_r:svirt_image_t:s0 /dev/sdb";;RedHatEnterpriseLinux7/RHEL7-93910
2806;RHEL7-93924;[virtlogd] Check opened FDs of qemu log file when guest is running and destroyed;"When guest is running, qemu log file is opened by virtlogd preocess;
When guest is destroyed, the opened FDs are closed.";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Set virtlogd as the log handler:

 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.

 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 

 (Re)start libvirtd
 # systemctl restart libvirtd"; ;Test Case;RedHatEnterpriseLinux7/RHEL7-93924
2806;;;;;;;;;2;"Start the guest
 # virsh start $guest";​​;;RedHatEnterpriseLinux7/RHEL7-93924
2806;;;;;;;;;3;"Check the opened file descriptor of qemu log file:
 # lsof /var/log/libvirt/qemu/rhel7.2.log
​​";"Qemu log file is opened by virtlogd. Output:

 COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF   NODE NAME
 virtlogd 9193 root   13w   REG  253,0    50082 342134 /var/log/libvirt/qemu/rhel7.2.log";;RedHatEnterpriseLinux7/RHEL7-93924
2806;;;;;;;;;4;"Destroy guest:
 # virsh destroy $guest";​​;;RedHatEnterpriseLinux7/RHEL7-93924
2806;;;;;;;;;5;"Check the opened FDs on qemu log file again:
 # lsof /var/log/libvirt/qemu/rhel7.2.log";No output;;RedHatEnterpriseLinux7/RHEL7-93924
2807;RHEL7-93985;[vnc&spice]Start a guest with 247-character name-length and graphics listening on auto-generated unix socket;Verify that guest can start and be connected successfully when guest has 247-character name-length and graphic listens on auto-generated unix socket.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"1.Edit or define a guest with such setting:
 1) with 247-character domain name length
 2) graphic listen type=socket
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-93985
2807;;;;;;;;;2;2.# virsh start $guest;​​;;RedHatEnterpriseLinux7/RHEL7-93985
2807;;;;;;;;;3;"3.# virsh list
  ";"Guest is running. Output:
 
 Id    Name                           State
 ----------------------------------------------------
  29    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111 running";;RedHatEnterpriseLinux7/RHEL7-93985
2807;;;;;;;;;4;"4.Check the qemu command line:
 # ps aux|grep qemu-kvm
​​";"The qemu command line includes:
 ... -spice unix,addr=/var/lib/libvirt/qemu/domain-6-11111111111111111111/spice.sock,disable-ticketing,seamless-migration=on 
 OR:
 ...-vnc unix:/var/lib/libvirt/qemu/domain-29-11111111111111111111/vnc.sock...";;RedHatEnterpriseLinux7/RHEL7-93985
2807;;;;;;;;;5;"5.Connect to guest by virt-viewer:
 # virt-viewer $guest
​​";Connect to guest graphic successfully;;RedHatEnterpriseLinux7/RHEL7-93985
2808;RHEL7-93986;Start a guest with 247-character name-length and without specified source path for guest agent;"Verify guest agent can work well for domain with long name-length and auto-generated guest agent source path 
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with 247-character name-length
 2) with guest agent that uses auto-generated guest agent source path.
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-93986
2808;;;;;;;;;2;Start guest.;​​;;RedHatEnterpriseLinux7/RHEL7-93986
2808;;;;;;;;;3;"# virsh list
  ";"Guest is running. Output:
 
 Id    Name                           State
 ----------------------------------------------------
  29    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111 running";;RedHatEnterpriseLinux7/RHEL7-93986
2808;;;;;;;;;4;"Check the qemu command line:
 # ps aux|grep qemu-kvm
​​";"The format of guest agent socket path is /var/lib/libvir/qemu/channel/target/domain-{domain id}-{the first 20 characters of domain name}/org.qemu.guest_agent.{n}.
 
 ...-chardev socket,id=charchannel0,path=/var/lib/libvirt/qemu/channel/target/domain-29-11111111111111111111/org.qemu.guest_agent.0,server,nowait";;RedHatEnterpriseLinux7/RHEL7-93986
2808;;;;;;;;;5;"Run a random virsh command that relies on guest agent, for example:
 # virsh domtime 1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
​​";"The virsh command executes successfully. 
 
 Output:
 Time: 1460512496";;RedHatEnterpriseLinux7/RHEL7-93986
2809;RHEL7-93987;[virtlogd] Check qemu log when start a guest with 247-character name-length;Verify that qemu log can be recorded correctly when start a guest with 247-character name-length;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Set virtlogd as the log handler:
 
 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.
 
 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 
 
 (Re)start libvirtd
 # systemctl restart libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-93987
2809;;;;;;;;;2;"Start a domain xml with 247-character domain name length.
 # virsh start 1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
​​";​​;;RedHatEnterpriseLinux7/RHEL7-93987
2809;;;;;;;;;3;"Check qemu log file:
 # ls /var/log/libvirt/qemu/";" The qemu log file exists:
 
 1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.log";;RedHatEnterpriseLinux7/RHEL7-93987
2809;;;;;;;;;4;"Check the content of the qemu log file:
 # cat /var/log/libvirt/qemu/1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.log
​​";There is log data in the file.;;RedHatEnterpriseLinux7/RHEL7-93987
2810;RHEL7-94520;[vgpu]boot guest with a vgpu and verify it is visible inside guest;"Check each vgpu type can be created and passthrough to guest
";Zhiyi Guo (zhguo);Critical;Positive;Automated;;1;"Check host have mdev capable gpu device:
 ls /sys/class/mdev_bus/";"There should be at least one capable gpu device listed under this path, for example:
 # ls /sys/class/mdev_bus/
 0000:00:02.0
 (Note, if there are more than 1 devices list under this path, either device can be used to test this case, just select one of them for the reset test)";Test Case;RedHatEnterpriseLinux7/RHEL7-94520
2810;;;;;;;;;2;"Check vgpu types supported by host gpu device, for example:
 # ls /sys/class/mdev_bus/0000\:00\:02.0/mdev_supported_types/
 
​​";"There should be at least one vgpu type listed under this path, for example:
 # ls /sys/class/mdev_bus/0000\:00\:02.0/mdev_supported_types/
 i915-GVTg_V5_4  i915-GVTg_V5_8";;RedHatEnterpriseLinux7/RHEL7-94520
2810;;;;;;;;;3;Check if there are any vgpu devices exist on host and check the minimum number of available instances for a vgpu type;"Check host doesn't have any vgpu devices exist:
 # ls /sys/bus/mdev/devices/
 (nothing)
 the minimum number of available instances for a vgpu type should be 1, for example:
 cat /sys/class/mdev_bus/0000\:00\:02.0/mdev_supported_types/i915-GVTg_V5_4/available_instances
 1";;RedHatEnterpriseLinux7/RHEL7-94520
2810;;;;;;;;;4;"Create a vgpu device in a vgpu type, for example:
 # uuidgen | tee /sys/class/mdev_bus/0000\:00\:02.0/mdev_supported_types/i915-GVTg_V5_4/create
 8790afdd-e92f-4ded-965e-6a10a2401b7a
 (Note: 8790afdd-e92f-4ded-965e-6a10a2401b7a is a random uuid value generated by uuidgen)";"The uuid ""8790afdd-e92f-4ded-965e-6a10a2401b7a"" should be found under /sys/bus/mdev/devices/:
 # ls /sys/bus/mdev/devices/
 8790afdd-e92f-4ded-965e-6a10a2401b7a
​​";;RedHatEnterpriseLinux7/RHEL7-94520
2810;;;;;;;;;5;"Boot a guest with this vgpu and 2G memory and check the vgpu device can be found inside guest:
 /usr/libexec/qemu-kvm -m 2G -machine pc,accel=kvm\
         -smp 2 \
         -monitor stdio \
         -qmp unix:/tmp/qmp,server,nowait \
         -vga std \
         -vnc :1 \
         -serial unix:/tmp/console,server,nowait \
         -drive file=/home/win7-1.qcow2,if=none,id=drive-scsi-disk0,format=qcow2,cache=none,werror=stop,rerror=stop  -device ide-drive,dri
 ve=drive-scsi-disk0 \
         -netdev tap,id=idinWyYp,vhost=on -device e1000,mac=42:ce:a9:d2:4d:d7,id=idlbq7eA,netdev=idinWyYp \
         -device vfio-pci,id=nv1,sysfsdev=/sys/bus/mdev/devices/8790afdd-e92f-4ded-965e-6a10a2401b7a \
        -uuid 115e11b2-a869-41b5-91cd-6a32a907be7e \";"Guest can boot successfully. vgpu device can be found inside guest.
 Hint to check vgpu device can be found inside guest:
 (qemu) info qtree
 ...
 dev: vfio-pci, id ""nv1""
 ....
 class VGA controller, addr 00:04.0, pci id 10de:1c30(sub 10de:11b3)
 ...
 For rhel guest:
 lspci | grep 00:04.0
 For windows guest:
 use lspci for win(https://eternallybored.org/misc/pciutils/releases/pciutils-3.4.0-win64.zip)
 in a cmd or powershell(both with admin permission):
 .\lspci.exe
 
 On both rhel and win guest, device plugged into 00:04.0 should be informed as a ""VGA compatible controller""
​​";;RedHatEnterpriseLinux7/RHEL7-94520
2810;;;;;;;;;6;Shutdown guest ;Shutdown without problem;;RedHatEnterpriseLinux7/RHEL7-94520
2810;;;;;;;;;7;Repeat step 5-6 but give guest 4G, 16G memory;steps pass without error;;RedHatEnterpriseLinux7/RHEL7-94520
2810;;;;;;;;;8;"Destroy this vgpu device, for example:
 echo 1 > /sys/bus/mdev/devices/8790afdd-e92f-4ded-965e-6a10a2401b7a/remove";"No device list under /sys/bus/mdev/devices/
 # ls /sys/bus/mdev/devices/
 (nothing)";;RedHatEnterpriseLinux7/RHEL7-94520
2810;;;;;;;;;9;repeat step 3-8 for rest vgpu types found in step 2;steps pass without error;;RedHatEnterpriseLinux7/RHEL7-94520
2811;RHEL7-94525;[blkdeviotune][--group-name] Set and get the group name when guest is shutoff;"Test matrix:
 
 | without option | --current | --live | --config
guest is shutoff | get/set the persistent config | equal to ""without option"" | N/A | equal to ""without option""";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Test parameter:
 1) command_option:
     without option, --current, --live, --config

 Test all the combinations except this one:
 guest_status=shutoff, command_option_2=--live
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-94525
2811;;;;;;;;;2;"Set any of the other disk iotune parameters before set group name, for example:

 # virsh blkdeviotune vm1 vda  --read-iops-sec 400000000000

 Note: Because ""set group name alone doesn't make sense"":";​​;;RedHatEnterpriseLinux7/RHEL7-94525
2811;;;;;;;;;3;"Set iotune group name for a disk with command_option:
 # virsh blkdeviotune vm1 vda --group-name group1 command_option
";​​;;RedHatEnterpriseLinux7/RHEL7-94525
2811;;;;;;;;;4;"Get iotune group name for the disk with command_option :
 # virsh blkdeviotune vm1 vda command_option 
";"Group name is ""group1"" in the output:

 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec  : 400000000000
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 400000000000
 write_iops_sec_max: 0
 size_iops_sec  : 0
 group_name     : group1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0
";;RedHatEnterpriseLinux7/RHEL7-94525
2811;;;;;;;;;5;"# virsh dumpxml vm1 command_option 

";"group name is set to ""group1"" correctly in domain xml:
 ...
       <target dev='vda' bus='virtio'/>
       <iotune>
        <read_iops_sec>400000000000</read_iops_sec>
         <group_name>group1</group_name>
       </iotune>
 ...
";;RedHatEnterpriseLinux7/RHEL7-94525
2812;RHEL7-94730;[blkdeviotune][--group-name] Set and get the group name persistently when guest is running;"Test matrix:
 
 | --config
guest is running | get/set the persistent config";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set any of the other disk iotune parameters before set group name:

 # virsh blkdeviotune vm1 vda  --read-iops-sec 400000000000

 Note: Because ""set group name alone doesn't make sense""";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-94730
2812;;;;;;;;;2;"Set iotune group name for a disk with --config:
 # virsh blkdeviotune vm1 vda --group-name group1 --config
";​​;;RedHatEnterpriseLinux7/RHEL7-94730
2812;;;;;;;;;3;"Get iotune group name for the disk with --config:
 # virsh blkdeviotune vm1 vda --config";"group name is  ""group1"" in the output:
 
 total_bytes_sec: 0
 read_bytes_sec : 0
 write_bytes_sec: 0
 total_iops_sec : 0
 read_iops_sec  : 400000000000
 write_iops_sec : 0
 total_bytes_sec_max: 0
 read_bytes_sec_max: 0
 write_bytes_sec_max: 0
 total_iops_sec_max: 0
 read_iops_sec_max: 400000000000
 write_iops_sec_max: 0
 size_iops_sec  : 0
 group_name     : group1
 total_bytes_sec_max_length: 0
 read_bytes_sec_max_length: 0
 write_bytes_sec_max_length: 0
 total_iops_sec_max_length: 0
 read_iops_sec_max_length: 0
 write_iops_sec_max_length: 0";;RedHatEnterpriseLinux7/RHEL7-94730
2812;;;;;;;;;4;"Check that live setting and persistent setting don't affect each other:
 
 # virsh blkdeviotune vm1 vda --live";Group name is empty in the output;;RedHatEnterpriseLinux7/RHEL7-94730
2812;;;;;;;;;5;"Check group name in guest dumpxml with --config:
 # virsh dumpxml vm1 --config
";"group name is ""group1"" in the dumpxml:

 ...
       <target dev='vda' bus='virtio'/>
       <iotune>
        <read_iops_sec>400000000000</read_iops_sec>
         <group_name>group1</group_name>
       </iotune>
 ...
";;RedHatEnterpriseLinux7/RHEL7-94730
2812;;;;;;;;;6;"Check that live setting and persistent setting don't affect each other:
 
 # virsh dumpxml vm1 --live";Group name is empty in the output;;RedHatEnterpriseLinux7/RHEL7-94730
2813;RHEL7-94798;KN-TC: vlan/Regression/bz735015-Kernel-bug-at-net-8021q-vlan-c-402 FUNC={nic};KN-TC: vlan/Regression/bz735015-Kernel-bug-at-net-8021q-vlan-c-402 FUNC={nic};Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-94798
2814;RHEL7-94799;KN-TC: vlan/Regression/bz836164-Kernel-bug-at-net-8021q-vlan-c-796 FUNC={nic};KN-TC: vlan/Regression/bz836164-Kernel-bug-at-net-8021q-vlan-c-796 FUNC={nic};Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-94799
2815;RHEL7-94800;KN-TC: vnic/macvtap FUNC=/RUN;KN-TC: vnic/macvtap FUNC=/RUN;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-94800
2816;RHEL7-94801;KN-TC: openvswitch/of_rules FUNC=of-rules-test-disable-forward-bpdu;KN-TC: openvswitch/of_rules FUNC=of-rules-test-disable-forward-bpdu;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-94801
2817;RHEL7-94802;KN-TC: openvswitch/of_rules FUNC=of-rules-test-enable-forward-bpdu;KN-TC: openvswitch/of_rules FUNC=of-rules-test-enable-forward-bpdu;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-94802
2818;RHEL7-94803;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-disable;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-disable;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-94803
2819;RHEL7-94804;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-94804
2820;RHEL7-94805;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable-join;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable-join;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-94805
2821;RHEL7-94806;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable-leave;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable-leave;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-94806
2822;RHEL7-94807;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable-vlan;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable-vlan;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-94807
2823;RHEL7-94808;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-disable-vm;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-disable-vm;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-94808
2824;RHEL7-94809;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable-vm;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable-vm;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-94809
2825;RHEL7-94810;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable-join-vm;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable-join-vm;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-94810
2826;RHEL7-94811;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable-leave-vm;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable-leave-vm;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-94811
2827;RHEL7-94812;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable-vlan-vm;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-enable-vlan-vm;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-94812
2828;RHEL7-94813;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-join-vm-ipv6;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-join-vm-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-94813
2829;RHEL7-94814;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-leave-vm-ipv6;KN-TC: openvswitch/mcast_snoop FUNC=ovs-test-mcast-snooping-leave-vm-ipv6;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-94814
2830;RHEL7-94885;[Video devices][QXL][vgamem] Start a guest with qxl vgamem set to 0;When vgamem is set to 0 in guest xml, libvirt will update it to the default value 16384;Fangge Jin (fjin);Medium;Positive;Automated;;1;"Define or edit a guest with such setting:
 1) with qxl video
 2) set vgamem to 0";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-94885
2830;;;;;;;;;2;"Check vgamem in inactive xml:
 # virsh dumpxml rhel7 | grep vgamem
​​";"vgamem is set to 16384:
 
 Output: 
 ... 
 <model type='qxl' ram='65536' vram='65536' vgamem='16384' heads='1' primary='yes'/>";;RedHatEnterpriseLinux7/RHEL7-94885
2830;;;;;;;;;3;Start guest;​​;;RedHatEnterpriseLinux7/RHEL7-94885
2830;;;;;;;;;4;"Check qemu cmd:
 ps -ef | grep $guest";"The value of vgamem_mb is 16384/1024=16.
 
 Output:
 
 -device qxl-vga,id=video0,.......,vgamem_mb=16,......
 
 Note:
 The value of vgamem_mb in qemu command line is in MB, the value of vgamem in domain xml is KB.";;RedHatEnterpriseLinux7/RHEL7-94885
2831;RHEL7-94886;[Video devices][QXL][vgamem]  Edit a guest with qxl vgamem set to an integer out of range;"Verify libvirt will report error when set qxl vgamem to an integer out of range by virsh edit.
Test matrix: 
vgamem_value | 
lower than minimum:negative integer | e.g. -2
greater than maximum:an integer in range [4294967296, ~) | e.g. 2844674407370955161";Fangge Jin (fjin);Medium;Negative;Automated;;1;"Edit guest xml, set vgamem to a value out of range ( according to the matrix in description):
 # virsh edit rhel7
 .....
    <video>
       <model type='qxl' vgamem='vgamem_value'  primary='yes'/>
 ......";"Got such error in the terminal:
 
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content";Test Case;RedHatEnterpriseLinux7/RHEL7-94886
2832;RHEL7-94887;[Video devices][QXL][vgamem] Define a guest with qxl vgamem set to a non-power-of-2 integer in range (0, 4294967296);libvirt will report error;Fangge Jin (fjin);Medium;Negative;Automated;;1;"Define a guest with such setting:
 1) with qxl video
 2) set vgamem to a non-power-of-2 value in range (0, 4294967296)";"Got such error in the terminal:
 
 error: unsupported configuration: value for 'vgamem' must be power of two";Test Case;RedHatEnterpriseLinux7/RHEL7-94887
2833;RHEL7-94888;[Video devices][QXL][vgamem] Define a guest with qxl vgamem set to non-numeric characters;N/A;Fangge Jin (fjin);Medium;Negative;Automated;;1;"Define a guest with such setting:
 1) with qxl video
 2) set vgamem to a non-numeric value";"Got such error in the terminal:
 
 error: XML error: cannot parse video vgamem 'dhoaek'";Test Case;RedHatEnterpriseLinux7/RHEL7-94888
2834;RHEL7-94889;[Video devices][QXL][vgamem] Edit a guest with qxl vgamem set to non-numeric characters;N/A;Fangge Jin (fjin);Medium;Negative;Automated;;1;"Edit guest xml, set vgamem to non-numeric value:

 # virsh edit $guest
 .....
    <video>
       <model type='qxl' vgamem='aaabbb'  primary='yes'/>
 ..... ";"Got such error in the terminal:
 
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content";Test Case;RedHatEnterpriseLinux7/RHEL7-94889
2835;RHEL7-95001;WALA-TC: [Cloudinit] waagent -deprovision+user with cloud-init enabled;waagent -deprovision+user should remove cloud-init sudoers file. If not +user, should not remove this file;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"1. Prepare a VM with wala and cloud-init installed. Enable cloud-init related services. Edit /etc/waagent.conf:
 Provisioning.Enabled=n
 Provisioning.UseCloudInit=y
 Deprovision this VM, shutdown, capture it as an image";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-95001
2835;;;;;;;;;2;"2. Create a new VM base on this image.
 Check if /etc/sudoers.d/90-cloud-init-users exists";"# ll /etc/sudoers.d/90-cloud-init-users
 -r--r-----. 1 root root 129 Jun 27 14:25 90-cloud-init-users";;RedHatEnterpriseLinux7/RHEL7-95001
2835;;;;;;;;;3;"3. Do not remove user account
 # waagent -deprovision -force
 Check if /etc/sudoers.d/90-cloud-init-users is not removed";"# ll /etc/sudoers.d/90-cloud-init-users
 -r--r-----. 1 root root 129 Jun 27 14:25 90-cloud-init-users";;RedHatEnterpriseLinux7/RHEL7-95001
2835;;;;;;;;;4;"4. Remove the VM. Repeat step2 to create new one. 
 Login. Remove user account
 # waagent -deprovision+user -force
 Check if /etc/sudoers.d/90-cloud-init-users is removed";"# ll /etc/sudoers.d/90-cloud-init-users
 No such file or directory";;RedHatEnterpriseLinux7/RHEL7-95001
2835;;;;;;;;;5;config;​​;;RedHatEnterpriseLinux7/RHEL7-95001
2836;RHEL7-95064;[rom] check xml for rom enabled='no' - Bug 1425058;[rom] check xml validate for rom enabled='no';Yalan Zhang (yalzhang);Medium;Negative;Automated;;1;"1. create an bridge called br0 first
 prepare a vm with interface as below:
 <interface type='bridge'>
       <source bridge='br0'/>
       <model type='virtio'/>
     </interface>";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-95064
2836;;;;;;;;;2;"2. edit the vm xml in interface section to add 
 
 <rom enabled='no' bar='off'/>
​​";" # virsh edit rhel
 error: unsupported configuration: ROM tuning is not supported when ROM is disabled
 Failed. Try again? [y,n,i,f,?]: 
​​";;RedHatEnterpriseLinux7/RHEL7-95064
2836;;;;;;;;;3;"3. edit the vm xml in interface section to add 
 
 <rom enabled='no' file='/usr/share/qemu-kvm/pxe-virtio.rom'>
​​";"# virsh edit rhel
 error: unsupported configuration: ROM tuning is not supported when ROM is disabled
 Failed. Try again? [y,n,i,f,?]";;RedHatEnterpriseLinux7/RHEL7-95064
2836;;;;;;;;;4;"4. # cat net.xml
 <interface type='bridge'>
        <source bridge='br0'/>    
    <model type='virtio'/>    
 <rom enabled='no' bar='off'/>
  </interface>
 
 start one vm, then hotplug
 # virsh attach-device rhel net.xml
​​";"error: Failed to attach device from net.xml
 error: unsupported configuration: ROM tuning is not supported when ROM is disabled";;RedHatEnterpriseLinux7/RHEL7-95064
2836;;;;;;;;;5;"5. stop the vm, cold plug
 # virsh destroy rhel
 Domain rhel destroyed
 
 # virsh attach-device rhel net.xml --persistent
​​";"error: Failed to attach device from net.xml
 error: unsupported configuration: ROM tuning is not supported when ROM is disabled";;RedHatEnterpriseLinux7/RHEL7-95064
2837;RHEL7-95122;WALA-TC: [Cloudinit] Upgrade cloud-init;"Update cloud-init, then check if it works well
";Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"1. Prepare a VM with wala and old version cloud-init installed. 
 /etc/waagent.conf:
 Provisioning.Enabled=n
 Provisioning.UseCloudInit=y
 Update cloud-init to the newest version
 Deprovision this VM, shutdown, capture it as an image, create a new VM base on this image.
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-95122
2837;;;;;;;;;2;"2. Check if cloud-init works well:
 /var/log/cloud-init.log
​​";"There's no error logs in /var/log/cloud-init.log
​​";;RedHatEnterpriseLinux7/RHEL7-95122
2837;;;;;;;;;3;"3. General check:
 # hostname
 # nslookup `hostname`
 # /etc/sudoers.d/90-cloud-init-users
​​";"All these items are correct.
​​";;RedHatEnterpriseLinux7/RHEL7-95122
2837;;;;;;;;;4;"config 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-95122
2838;RHEL7-95143;IDM-SSSD-TC: krb_provider: kcm: KCM socket should auto start secrets socket;KCM socket should auto start secrets socket;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"After starting sssd-kcm socket, verify the status of sssd-secrets.socket
​​";"SSSD service should be running.
 Sssd-secrets.socket service should be running.
 File /var/run/secrets.socket should exist.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-95143
2838;;;;;;;;;2;"Execute  the following:
           # systemctl status sssd-secrets.socket";​​;;RedHatEnterpriseLinux7/RHEL7-95143
2838;;;;;;;;;3;Verify the existence of /var/run/secrets.socket file.;​​;;RedHatEnterpriseLinux7/RHEL7-95143
2839;RHEL7-95145;IDM-SSSD-TC: krb_provider: kcm: Set default ccache to KCM in kcm default ccache file and verify cached krb ticket;Set default ccache to KCM in kcm default ccache file and verify cached krb ticket;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"Edit /etc/krb5.conf.d/kcm_default_ccache file and uncomment:
   [libdefaults]
     default_ccache_name = KCM:
 "; Valid krb ticket in the form of KCM:$NAME:$CACHE_ID;Test Case;RedHatEnterpriseLinux7/RHEL7-95145
2839;;;;;;;;;2;Edit /etc/krb5.conf file and comment out default_ccache_name = KEYRING:persistent:%{uid};​​;;RedHatEnterpriseLinux7/RHEL7-95145
2839;;;;;;;;;3;Restart sssd service.;​​;;RedHatEnterpriseLinux7/RHEL7-95145
2839;;;;;;;;;4;Run user login and verify cached krb ticket.;​​;;RedHatEnterpriseLinux7/RHEL7-95145
2840;RHEL7-95146;IDM-SSSD-TC: krb_provider: kcm: Verify krb ticket by setting KCM in kcm default ccache file and KEYRING in krb5 conf file;Verify krb ticket by setting KCM in kcm default ccache file and KEYRING in krb5 conf file;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"Edit /etc/krb5.conf.d/kcm_default_ccache file and uncomment:
   [libdefaults]
     default_ccache_name = KCM:"; Valid KCM krb ticket, example: KCM:21201:27116;Test Case;RedHatEnterpriseLinux7/RHEL7-95146
2840;;;;;;;;;2;Edit /etc/krb5.conf file and set default_ccache_name = KEYRING:persistent:%{uid};​​;;RedHatEnterpriseLinux7/RHEL7-95146
2840;;;;;;;;;3;Restart sssd service.;​​;;RedHatEnterpriseLinux7/RHEL7-95146
2840;;;;;;;;;4;Run user login and verify cached krb ticket.;​​;;RedHatEnterpriseLinux7/RHEL7-95146
2841;RHEL7-95168;[virtlogd] Check qemu log when guest is running;When guest is running, the stdout of qemu process will be appended to log file by virtlogd.;Fangge Jin (fjin);High;Positive;Automated;;1;"Set virtlogd as the log handler:
 
 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.
 
 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 
 
 (Re)start libvirtd
 # systemctl restart libvirtd
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-95168
2841;;;;;;;;;2;"Start a guest with spice graphic
 ( so qemu process will produce log when connect guest by virt-viewer).
​​";​​;;RedHatEnterpriseLinux7/RHEL7-95168
2841;;;;;;;;;3;"Track the qemu log file:
 # tailf /var/log/libvirt/qemu/rhel7.2.log";​​;;RedHatEnterpriseLinux7/RHEL7-95168
2841;;;;;;;;;4;"Connect to guest by spice client:
 # virt-viewer rhel7.2";​​;;RedHatEnterpriseLinux7/RHEL7-95168
2841;;;;;;;;;5;"Check the output of tailf.
​​";"New log is appended to qemu log file:
 
 main_channel_link: add main channel client
 main_channel_handle_parsed: net test: latency 0.232000 ms, bitrate 32000000000 bps (30517.578125 Mbps)
 red_dispatcher_set_cursor_peer: 
 inputs_connect: inputs channel client create
​​";;RedHatEnterpriseLinux7/RHEL7-95168
2842;RHEL7-95169;[virtlogd] Check qemu log when guest shuts down;When destroy guest, the stdout of qemu process will be written into log file by virtlogd.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set virtlogd as the log handler:
 
 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.
 
 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 
 
 (Re)start libvirtd
 # systemctl restart libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-95169
2842;;;;;;;;;2;"Start a guest:
 # virsh start $guest";​​;;RedHatEnterpriseLinux7/RHEL7-95169
2842;;;;;;;;;3;"Track the qemu log file:
 # tailf /var/log/libvirt/qemu/rhel7.2.log";​​;;RedHatEnterpriseLinux7/RHEL7-95169
2842;;;;;;;;;4;"Shutdown the guest:
 # virsh shutdown $guest";​​;;RedHatEnterpriseLinux7/RHEL7-95169
2842;;;;;;;;;5;"Check the output of tailf.
​​";"The guest shutdown log is appended to the end of $guest.log file:
 
 ......
 2018-07-04T11:42:58.053773Z qemu-kvm: terminating on signal 15 from pid 15175 (<unknown process>)
 2018-07-04 11:42:58.853+0000: shutting down, reason=shutdown";;RedHatEnterpriseLinux7/RHEL7-95169
2843;RHEL7-95170;[virtlogd] Check qemu log when guest starts for the second time;When start guests for the second time, the stdout of qemu process will be appened to the log file;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Set virtlogd as the log handler:
 
 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.
 
 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 
 
 (Re)start libvirtd
 # systemctl restart libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-95170
2843;;;;;;;;;2;"Start && Destroy a guest:
 # virsh start $guest
 # virsh destroy $guest";​​;;RedHatEnterpriseLinux7/RHEL7-95170
2843;;;;;;;;;3;"Start the guest again:
 # virsh start $guest";​​;;RedHatEnterpriseLinux7/RHEL7-95170
2843;;;;;;;;;4;"Check qemu log file:
 # cat /var/log/libvirt/qemu/$guest.log";The old log still exists, the new start log is appended to the end of the $guest.log file;;RedHatEnterpriseLinux7/RHEL7-95170
2844;RHEL7-95425;[Video devices][QXL][ram/vram] Start a guest with qxl ram/vram set to a power-of-2 value in range (0, 2097152];N/A;Fangge Jin (fjin);Critical;Positive;Automated;;1;"Define or edit a guest with such setting:
 1) with qxl video
 2) set (v)ram to a power-of-2 value in range (0, 2097152]";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-95425
2844;;;;;;;;;2;"Dump guest xml:
 # virsh dumpxml $guest";"(v)ram  value is same as what's configured.

 Output:
 ...
     <video>
       <model type='qxl' ram='32768' vram='16384' vgamem='16384' heads='1' primary='yes'/>";;RedHatEnterpriseLinux7/RHEL7-95425
2844;;;;;;;;;3;" Start guest
 # virsh start $guest";​​;;RedHatEnterpriseLinux7/RHEL7-95425
2844;;;;;;;;;4;"check qemu cmd:
 ps -ef | grep $guest";"(v)ram  value is correct in qemu command line:
 
 -device qxl-vga,id=vide0,ram_size=33554432,vram_size=16777216,vram64_size_mb=0,vgamem_mb=16,max_outputs=1,bus=pci.0,addr=0x2
 
 Note: the ram_size and vram_size in qemu command line are in Bytes, while they are in KB in guest xml";;RedHatEnterpriseLinux7/RHEL7-95425
2845;RHEL7-95426;[Video devices][QXL][ram/vram] Start a guest with qxl ram/vram set to a non-power-of-2 value in range 90, 2097152];N/A;Fangge Jin (fjin);Medium;Positive;Automated;;1;"Define or edit a guest with such setting:
 1) with qxl video
 2) set (v)ram to a non-power-of-2 value in range (0, 2097152]";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-95426
2845;;;;;;;;;2;"Dump guest xml:
 # virsh dumpxml $guest";"(v)ram  value is up rounded to power of 2.

 Output:
 ...
     <video>
       <model type='qxl' ram='32768' vram='16384' vgamem='16384' heads='1' primary='yes'/>";;RedHatEnterpriseLinux7/RHEL7-95426
2845;;;;;;;;;3;" Start guest
 # virsh start $guest";​​;;RedHatEnterpriseLinux7/RHEL7-95426
2845;;;;;;;;;4;"check qemu cmd:
 ps -ef | grep $guest";"(v)ram  value is correct in qemu command line:
 
 -device qxl-vga,id=vide0,ram_size=33554432,vram_size=16777216,vram64_size_mb=0,vgamem_mb=16,max_outputs=1,bus=pci.0,addr=0x2
 
 Note: the ram_size and vram_size in qemu command line are in Bytes, while they are in KB in guest xml";;RedHatEnterpriseLinux7/RHEL7-95426
2846;RHEL7-95427;[Video devices] [QXL] [ram/vram] Define a guest with qxl ram/vram set to a non-numeric value;N/A;Fangge Jin (fjin);Medium;Positive;Automated;;1;"Define a guest with such setting:
 1) with qxl video
 2) set (v)ram to a non-numeric value";"Got such error in the terminal:
 
 error: XML error: cannot parse video (v)ram  'xxxxx'";Test Case;RedHatEnterpriseLinux7/RHEL7-95427
2847;RHEL7-95428;[Video devices] [QXL] [ram/vram] Define a guest with qxl ram/vram set to a value in range (2^21, 2^31];N/A;Fangge Jin (fjin);Medium;Negative;Automated;;1;"Define a guest with such setting:
 1) with qxl video
 2) set (v)ram to an integer in range (2^21, 2^31]";"Got such error in the terminal:
 
  error: numerical overflow: value for '(v)ram' must be less than '4194303";Test Case;RedHatEnterpriseLinux7/RHEL7-95428
2848;RHEL7-95429;[Video devices] [QXL] [ram/vram] Define a guest with qxl ram/vram set to a value in range (2^31, 2^32);N/A;Fangge Jin (fjin);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-95429
2849;RHEL7-95430;[Video devices] [QXL] [ram/vram] Define a guest with qxl ram/vram set to a value in range [2^32, ~);N/A;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Define a guest with such setting:
 1) with qxl video
 2) set (v)ram to an integer in range [2^32, ~)";"Got such error in the terminal:
 
 error: XML error: cannot parse video (v)ram  'xxxxxx'";Test Case;RedHatEnterpriseLinux7/RHEL7-95430
2850;RHEL7-95870;[virtual network][virtual-nic-device] install virtio netkvm driver(in iso) during guest installation - windows only;[virtual network][virtual-nic-device]install virtio netkvm driver(in iso) during guest installation;Yu Wang (wyu);Critical;Positive;Automated;420558;1;"1.create iso file when test prewhql build:
 # mkisofs -iso-level 3 -r -o /path-to-your-iso-file/virtio-win-prewhql-86.iso /path-of-prewhql/virtio-win-prewhql-0.1-86 ";1.iso file made correctly;Test Case;RedHatEnterpriseLinux7/RHEL7-95870
2850;;;;;;;;;2;"2. start newly created imge w/ virtio-net-pci and virtio-win iso file
 CLI: -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10 \
 -drive file=virtio-win-prewhql-86.iso,format=raw,if=none,id=drive2,media=cdrom,readonly=on -device ide-drive,drive=drive2,bus=ide.1,unit=0,id=cdrom
​​";2. Guest could boot up successfully;;RedHatEnterpriseLinux7/RHEL7-95870
2850;;;;;;;;;3;"3. during the installation stage click ""load driver ""-->""which driver you want to choose"" click browse, choose the driver we need .";3.choose the netkvm driver;;RedHatEnterpriseLinux7/RHEL7-95870
2850;;;;;;;;;4;4. continue the installation steps and wait for installation finished.;4. installation completed.;;RedHatEnterpriseLinux7/RHEL7-95870
2850;;;;;;;;;5;"5. After installation finish,check if netkvm driver is installed to guest: 
 Opening Device Manager and clicking Network adapters--> right-clicking Properties of Redhat VirtIO Ethernet Adapter---> properties---> Driver
​​";5. No any error such as yellow warning for netkvm driver and check the Driver Provider ,Driver Date ,Driver Version is right ,check the Digital Signer is exists;;RedHatEnterpriseLinux7/RHEL7-95870
2850;;;;;;;;;6;"6.ping between guest and extenal host
 from external host to guest: ping -c 10 $guest_ip
 from guest to external host: ping -n 10 $external-host_ip
​​";6.the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-95870
2851;RHEL7-95871;[virtual network][virtual-nic-device] install virtio netkvm driver(in iso) on preinstalled guest - windows only;[virtual network][virtual-nic-device]install virtio netkvm driver(in iso) on preinstalled guest;Yu Wang (wyu);Critical;Positive;Automated;420557;1;"steps:
 1).create iso file when test prewhql build:
 # mkisofs -iso-level 3 -r -o /path-to-your-iso-file/virtio-win-prewhql-86.iso /path-of-prewhql/virtio-win-prewhql-0.1-86
 
 2).start preinstalled guest w/ virtio-net-pci and virtio-win iso file
 CLI:-netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10 \
 -drive file=virtio-win-prewhql-86.iso,format=raw,if=none,id=drive2,media=cdrom,readonly=on -device ide-drive,drive=drive2,bus=ide.1,unit=0,id=cdrom 
​​";1. guest can boot up without any error.;Test Case;RedHatEnterpriseLinux7/RHEL7-95871
2851;;;;;;;;;2;"2. install virtio-net driver:
 in the guest : right click ""my computers"" --->Properties ---> device
 manager--->Other devices--->right-click ""Ethernet Controller""--->update driver
 software---->Browse my computer for driver software--->let me pick from list
 of device drivers on my computer--->Network adapters --->Next --->choose the cdrom path while located your driver ----> install";2. virtio-net driver can be installed from iso file succesfully;;RedHatEnterpriseLinux7/RHEL7-95871
2851;;;;;;;;;3;3. Check if netkvm driver is installed to guest: Opening Device Manager and clicking Network adapters--> right-clicking Properties of Redhat VirtIO Ethernet Adapter;3. No any error such as yellow warning for netkvm driver;;RedHatEnterpriseLinux7/RHEL7-95871
2851;;;;;;;;;4;"4..check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";4. driver verifiered successfully;;RedHatEnterpriseLinux7/RHEL7-95871
2851;;;;;;;;;5;"5. ping between guest and extenal host
 from external host to guest: ping -c 10 $guest_ip
 from guest to external host: ping -n 10 $external-host_ip";5. the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-95871
2852;RHEL7-95872;[virtual network][virtual-nic-device] install virtio driver(in floppy) during guest installation - windows only;[virtual network][virtual-nic-device] install virtio driver(in floppy) during guest installation;Yu Wang (wyu);Critical;Positive;Automated;;1;"1. Create floppy when test prewhql build:
 #dd if=/dev/zero of=./virtio-win-prewhql-86.vfd bs=1024 count=2880
 #mkfs.vfat ./virtio-win-prewhql-86.vfd
 #mount ./virtio-win-prewhql-86.vfd /mnt/ -o loop
 #cp virtio-win-prewhql-0.1-86/Wlh/x86/netkvm* /mnt/
 # umount /mnt/
​​";" floppy file can be made successfully
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-95872
2852;;;;;;;;;2;"2.Start guest w/ virtio-net-pci and netkvm driver floppy file:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10 \
 -drive file=virtio-win-prewhql-86.vfd,if=none,id=drive-fdc0-0-0,format=raw,cache=none -global isa-fdc.driveA=drive-fdc0-0-0
​​";guest should start normally, qemu-kvm should not core dump.;;RedHatEnterpriseLinux7/RHEL7-95872
2852;;;;;;;;;3;"3.During installing,click ""load driver"" to load netkvm driver from floppy";"netkvm device driver can be installed correctly;";;RedHatEnterpriseLinux7/RHEL7-95872
2852;;;;;;;;;4;"4.After installation finish,ping between guest and extenal host
 from external host to guest: ping -c 10 $guest_ip
 from guest to external host: ping -n 10 $external-host_ip";the packet loss in ping should be zero ;;RedHatEnterpriseLinux7/RHEL7-95872
2853;RHEL7-95873;[virtual network][virtual-nic-device] install virtio driver(in floppy) on preinstalled guest - windows only;[virtual network][virtual-nic-device] install virtio driver(in floppy) on preinstalled guest;Yu Wang (wyu);Critical;Positive;Not Automated;;1;"1. Create floppy when test prewhql build:
 #dd if=/dev/zero of=./virtio-win-prewhql-86.vfd bs=1024 count=2880
 #mkfs.vfat ./virtio-win-prewhql-86.vfd
 #mount ./virtio-win-prewhql-86.vfd /mnt/ -o loop
 #cp virtio-win-prewhql-0.1-86/Wlh/x86/netkvm* /mnt/
 # umount /mnt/
​​";" floppy file can be made successfully
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-95873
2853;;;;;;;;;2;"2.Start guest w/ virtio-net-pci and netkvm driver floppy file:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10 \
 -drive file=virtio-win-prewhql-86.vfd,if=none,id=drive-fdc0-0-0,format=raw,cache=none -global isa-fdc.driveA=drive-fdc0-0-0
​​";guest should start normally, qemu-kvm should not core dump.;;RedHatEnterpriseLinux7/RHEL7-95873
2853;;;;;;;;;3;"3.After instalation finished,install netkvm driver from floppy:
 in the guest : right click ""my computers"" --->Properties ---> device manager--->Other devices--->right-click ""Ethernet Controller""--->update driver software---->Browse my computer for driver software--->let me pick from list of device drivers on my computer--->Network adapters --->Next --->choose the floppy path ----> install";"netkvm device driver can be installed correctly;";;RedHatEnterpriseLinux7/RHEL7-95873
2853;;;;;;;;;4;"4.Ping between guest and extenal host
 from external host to guest: ping -c 10 $guest_ip
 from guest to external host: ping -n 10 $external-host_ip";the packet loss in ping should be zero ;;RedHatEnterpriseLinux7/RHEL7-95873
2854;RHEL7-95874;[virtual network][virtual-nic-device] Migrate guest after NIC hot-plug;Migration between hosts when run netperf test in guest, should test cover vhost=on and vhost=off.;Yu Wang (wyu);Medium;Positive;Automated;442564;1;"steps:
 1. start guest without virtio-net-pci:
 CLI: -net none
​​";1. guest can boot successfully without any error.;Test Case;RedHatEnterpriseLinux7/RHEL7-95874
2854;;;;;;;;;2;"2.query network 
 {""execute"":""human-monitor-command"",""arguments"":{""command-line"":""info network""}}";"2,qmp return empty network info:
 {""return"": """"}
 
​​";;RedHatEnterpriseLinux7/RHEL7-95874
2854;;;;;;;;;3;"3. add a tap device back-end using QMP (enable vhost for virtio_nic)
 #{""execute"": ""qmp_capabilities""}
 For tap backend:
 { ""execute"": ""netdev_add"", ""arguments"": { ""type"":""tap"",""id"":""hostnet0"",""vhost"":""on"",""script"":""/etc/qemu-ifup""}}
 For macvtap backend
 { ""execute"": ""netdev_add"", ""arguments"": { ""type"":""tap"",""id"":""hostnet0"",""vhost"":""on"",""fd"":""$fd""}}
​​";"3. Check the output of qmp,it should contain the message like the following: {""return"": {}}";;RedHatEnterpriseLinux7/RHEL7-95874
2854;;;;;;;;;4;"4. add a netkvm device:
 For tap backend:
 {""execute"": ""device_add"", ""arguments"": { ""driver"":""virtio-net-pci"",""netdev"":""hostnet0"",""mac"":""00:1a:4a:42:0b:01"",""id"": ""net0""}}
 For macvtap backend:
 {""execute"": ""device_add"", ""arguments"": { ""driver"":""virtio-net-pci"",""netdev"":""hostnet0"",""mac"":""$macvtap_interface_mac_address"",""id"": ""net0""}}
​​";"4. qmp should return NIC_RX_FILTER_CHANGED event:
 {""return"": {}}
 {""timestamp"": {""seconds"": 1404461175, ""microseconds"": 275539}, ""event"": ""NIC_RX_FILTER_CHANGED"", ""data"": {""name"": ""net0"", ""path"": ""/machine/peripheral/net0/virtio-backend""}}";;RedHatEnterpriseLinux7/RHEL7-95874
2854;;;;;;;;;5;"5. query network 
 {""execute"":""human-monitor-command"",""arguments"":{""command-line"":""info network""}}";"5.qmp will return netkvm nic info as following:
 {""return"": ""net0: index=0,type=nic,model=virtio-net-pci,macaddr=00:1a:4a:42:0b:01\r\n \\ hostnet0: index=0,type=tap,ifname=tap0,script=/etc/qemu-ifup,downscript=/etc/qemu-ifdown\r\n""}
​​";;RedHatEnterpriseLinux7/RHEL7-95874
2854;;;;;;;;;6;"6. Check if new interface gets ip address
 linux guest: # ifconfig
 windows guest: # ipconfig -all";6. new ip address can be got;;RedHatEnterpriseLinux7/RHEL7-95874
2854;;;;;;;;;7;"7. Stop firewall for guest
 For linux:# iptables -F ; ip6tables -F
 For windows, stop firewall.
​​";"7. no error
​​";;RedHatEnterpriseLinux7/RHEL7-95874
2854;;;;;;;;;8;" 8. Run netserver:
 1) Start netserver in the external host.         
 # netserver
 2) Execute netperf TCP_STREAM stress in guest.
  # netperf -H $external_host_ip -l 600";8. can ping guest successfully;;RedHatEnterpriseLinux7/RHEL7-95874
2854;;;;;;;;;9;"9.Start listenning port in another host :
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet0,vhost=on \
 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=00:1a:4a:42:0b:01 -incoming tcp:0:5888";9.the listening port could start successfully;;RedHatEnterpriseLinux7/RHEL7-95874
2854;;;;;;;;;10;"10.Do live migration:
 {""execute"": ""qmp_capabilities""}
 {""execute"": ""migrate"",""arguments"":{""uri"": ""tcp:0:5888""}}";10.qmp has no error prompt,and guest can do migration;;RedHatEnterpriseLinux7/RHEL7-95874
2854;;;;;;;;;11;"11. check migration status until it is finished.
 {""execute"":""query-migrate""}";"11.live migration successfully,qmp return complete status:
 {""return"": {""status"": ""completed"", ""downtime"": 605, ""total-time"": 15446,
 ""ram"": {""total"": 4312203264, ""remaining"": 176128, ""transferred"": 538227309}}}";;RedHatEnterpriseLinux7/RHEL7-95874
2854;;;;;;;;;12;"12.ping between guest and extenal host on the dst guest:
 from external host to guest: ping -c 10 $guest_ip 
 from guest to external host: ping -n 10 $external-host_ip ";12. the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-95874
2855;RHEL7-95875;[virtual network][virtual-nic-device] Migrate guest after NIC hot-unplug;Migrate guest after hotunplug netkvm driver;Yu Wang (wyu);Medium;Positive;Not Automated;442561;1;"steps:
 1. start guest w/ virtio-net-pci
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on \
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
​​";1.guest should start normally, qemu-kvm should not core dump.;Test Case;RedHatEnterpriseLinux7/RHEL7-95875
2855;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"2.drvier verifier can be enabled successfully,cmd output should include:
 Verified drivers: netkvm.sys";;RedHatEnterpriseLinux7/RHEL7-95875
2855;;;;;;;;;3;"3. remove virtual NIC
 {""execute"": ""qmp_capabilities""}
 {""execute"": ""device_del"", ""arguments"": {""id"": ""net1""}}";"5. Check the output of qmp,it should contain the message like the following DEVICE_DELETED event:
 {""timestamp"": {""seconds"": 1448521234, ""microseconds"": 109697}, ""event"": ""DEVICE_DELETED"", ""data"": {""path"": ""/machine/peripheral/net0/virtio-backend""}}
 {""timestamp"": {""seconds"": 1448521234, ""microseconds"": 109790}, ""event"": ""DEVICE_DELETED"", ""data"": {""device"": ""net0"", ""path"": ""/machine/peripheral/net0""}}
 
​​";;RedHatEnterpriseLinux7/RHEL7-95875
2855;;;;;;;;;4;"4. remove tap device back-end
 {""execute"": ""netdev_del"", ""arguments"": {""id"": ""hostnet1""}}";"6. qmp return no error msg:
 {""return"": {}}";;RedHatEnterpriseLinux7/RHEL7-95875
2855;;;;;;;;;5;"5. query network:
 {""execute"":""human-monitor-command"",""arguments"":{""command-line"":""info network""}} 
​​";"7. No any netkvm device info display:
 {""return"": """"}
​​";;RedHatEnterpriseLinux7/RHEL7-95875
2855;;;;;;;;;6;"6. Check if netkvm driver is removed from guest: 
 Opening Device Manager and clicking Network adapters";"8. virtio NIC and tap should be removed already,no device named ""Redhat VirtIO Ethernet Adapter"" is displayed.
​​";;RedHatEnterpriseLinux7/RHEL7-95875
2855;;;;;;;;;7;"7.Start listenning port in another host  without netkvm device:
 CLI:-net none -incoming tcp:0:5888";9. the listening port could start successfully;;RedHatEnterpriseLinux7/RHEL7-95875
2855;;;;;;;;;8;"8.Do live migration:
 {""execute"": ""migrate"",""arguments"":{""uri"": ""tcp:0:5888""}}";"10.qmp return no error msg:
 {""return"": {}}";;RedHatEnterpriseLinux7/RHEL7-95875
2855;;;;;;;;;9;"9. check migration status until it is finished.
 {""execute"":""query-migrate""}";"11.live migration successfully,qmp return complete status:
 {""return"": {""status"": ""completed"", ""downtime"": 605, ""total-time"": 15446,
 ""ram"": {""total"": 4312203264, ""remaining"": 176128, ""transferred"": 538227309}}}";;RedHatEnterpriseLinux7/RHEL7-95875
2855;;;;;;;;;10;"10. Check there is no netkvm driver in guest:
 For linux: # lspci |grep Eth
 For windows : Opening Device Manager and clicking Network adapters";"12. Linux: no output related Eth
 Windows:no device named ""Redhat VirtIO Ethernet Adapter"" is displayed.";;RedHatEnterpriseLinux7/RHEL7-95875
2856;RHEL7-95876;[virtual network][virtual-nic-device] Migrate guest while running netperf;Migrate guest while netkvm driver in use;Yu Wang (wyu);High;Positive;Automated;442537;1;"1. start guest w/ virtio-net-pci
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on \
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
​​";1. guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95876
2856;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"2.All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95876
2856;;;;;;;;;3;"3.Stop firewall in all related systems.
 For linux:
 # iptables -F ; ip6tables -F
 For windows, stop firewall.";"3 no errors
​​";;RedHatEnterpriseLinux7/RHEL7-95876
2856;;;;;;;;;4;"3. run netperf test:
 run netserver on a external host:
 # netserver
 run netperf in the src guest:
 linux: netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024
 windows: # for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in
 (TCP_STREAM,UDP_STREAM) do netperf.exe -H netserver_ip -c -C -t %j -f m -l 180
 -- -m %i done done";"3. netperf test can run normally:
 TCP STREAM TEST from 0.0.0.0 () port 0 AF_INET to 10.66.10.110 () port 0 AF_INET : histogram : interval : demo 
 Recv   Send    Send                           
 Socket Socket  Message  Elapsed               
 Size   Size    Size     Time     Throughput   
 bytes  bytes   bytes    secs.    10^6bits/sec   
  
  87380  65536  65536    10.22      98.30    
 
​​";;RedHatEnterpriseLinux7/RHEL7-95876
2856;;;;;;;;;5;"4.start listenning port in another host with the same qemu command in step1 and add ""-incoming tcp:0:5888""";4.the listening port could start successfully;;RedHatEnterpriseLinux7/RHEL7-95876
2856;;;;;;;;;6;"5.during step3,do live migration:
 {""execute"": ""migrate"",""arguments"":{""uri"": ""tcp:des_host_ip:5888""}}";"5.no error msg display in qmp:
 {""return"": {}}";;RedHatEnterpriseLinux7/RHEL7-95876
2856;;;;;;;;;7;"6. check migration status until it is finished.
 {""execute"":""query-migrate""}";"6.live migration successfully,qmp get following info:
 {""return"": {""status"": ""completed"", ""downtime"": 605, ""total-time"": 15446, ""ram"": {""total"": 4312203264, ""remaining"": 176128, ""transferred"": 538227309}}}";;RedHatEnterpriseLinux7/RHEL7-95876
2856;;;;;;;;;8;"7.ping between dst guest and extenal host
 1).from external host to guest: ping -c 10 $guest_ip
 2).from guest to external host: ping -n 10 $external-host_ip";7.the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-95876
2856;;;;;;;;;9;8. do ping-pong migration, repeat step 4-7;8. no errors or BSOD occurred;;RedHatEnterpriseLinux7/RHEL7-95876
2857;RHEL7-95878;[virtual network][virtual-nic-device] Migrate between vhost and non-vhost;Migrate between vhost and non-vhost;Yu Wang (wyu);Medium;Positive;Automated;;1;"1. start guest w/ virtio-net-pci, vhost=on
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on \
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
​​";src guest boot up correctly;Test Case;RedHatEnterpriseLinux7/RHEL7-95878
2857;;;;;;;;;2;"2.Launch the listening mode guest w/ vhost=off in the dst host.
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=off \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=off \
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \";des guest boot up correctly;;RedHatEnterpriseLinux7/RHEL7-95878
2857;;;;;;;;;3;"3.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings  ";"All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95878
2857;;;;;;;;;4;"3. Stop firewall in all related systems.
 For linux:
 # iptables -F ; ip6tables -F
 For windows, stop firewall.";"no errors
​​";;RedHatEnterpriseLinux7/RHEL7-95878
2857;;;;;;;;;5;"4.Execute netperf test
 run netserver on a external host:
 # netserver
 run netperf in the src guest:
 # netperf -H $external_host_ip -l 600";start netperf successfully.;;RedHatEnterpriseLinux7/RHEL7-95878
2857;;;;;;;;;6;"5.Migrate guest from src to dst host
 Command of qmp
 {""execute"": ""migrate"",""arguments"":{""uri"": ""tcp:$dst_host_ip:$port""}}
";migration can be finished successfully.;;RedHatEnterpriseLinux7/RHEL7-95878
2857;;;;;;;;;7;"6.After migration finished, check if netperf can finished in dst guest, and after netperf finished, check network of dst guest via ping out.
 Guest# ping $External-host_ip -c 10";"netperf is still running after migration and can be finished
 successfully, ping out successfully and no pkg lost.";;RedHatEnterpriseLinux7/RHEL7-95878
2857;;;;;;;;;8;"7.Kill the src guest and launch the listening mode guest w/ vhost=on in the dst host.
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \
 -incoming tcp:0:$port";des guest boot up correctly;;RedHatEnterpriseLinux7/RHEL7-95878
2857;;;;;;;;;9;8.Repeat steps 4~6.;"expected result similar to step4~6
​​";;RedHatEnterpriseLinux7/RHEL7-95878
2858;RHEL7-95881;[virtual network][virtual-nic-device] Reboot guest during netkvm in use - virtio-win only;[virtual network][virtual-nic-device]Reboot guest during netkvm in use;Yu Wang (wyu);High;Positive;Automated;420544;1;"1. start guest w/ virtio-net-pci
 CLI: 
 -netdev tap,id=hostnet0,vhost=on,script=/etc/qemu-ifup0 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=00:1a:4a:42:0b:01
​​";1. guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95881
2858;;;;;;;;;2;"2. check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings";"2.All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95881
2858;;;;;;;;;3;"3. run netperf test in guest(guest run as netperf client)
    for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netper_server_ip -c -C -t %j -f m -l 180 -- -m %i done done";"3. Guest did not crash,netperf run correctly without any error:
 TCP STREAM TEST from 0.0.0.0 () port 0 AF_INET to 10.66.10.110 () port 0 AF_INET : histogram : interval : demo
 Recv   Send    Send                           
 Socket Socket  Message  Elapsed               
 Size   Size    Size     Time     Throughput   
 bytes  bytes   bytes    secs.    10^6bits/sec   
  
  87380  65536  65536    10.22      98.30   ";;RedHatEnterpriseLinux7/RHEL7-95881
2858;;;;;;;;;4;"4. during step3, reboot guest in guest:
     #shutdown -r -t 0
​​";4. guest can reboot without crash and other error.;;RedHatEnterpriseLinux7/RHEL7-95881
2858;;;;;;;;;5;"5.after guest reboot,repeat step3
";5. Guest did not crash,netperf run correctly without any error;;RedHatEnterpriseLinux7/RHEL7-95881
2858;;;;;;;;;6;"6.during step5, reboot guest in qmp:
   {""execute"":""system_reset""}";6. guest can reboot without crash and other error.;;RedHatEnterpriseLinux7/RHEL7-95881
2858;;;;;;;;;7;"7. check netkvm device in device manager:
    open Device Manager and clicking Network adapters";"7. ""Redhat VirtIO Ethernet Adapter"" device still existing and No error such as yellow warning for netkvm driver";;RedHatEnterpriseLinux7/RHEL7-95881
2858;;;;;;;;;8;"8. ping between guest and extenal host
 from external host to guest: ping -c 10 $guest_ip
 from guest to external host: ping -n 10 $external-host_ip";8. the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-95881
2859;RHEL7-95882;[virtual network][virtual-nic-device] shutdown guest during netkvm in use - virtio-win only;[virtual network][virtual-nic-device]shutdown guest during netkvm in use;Yu Wang (wyu);High;Positive;Automated;420545;1;"1. start guest w/ virtio-net-pci
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10
​​";1. guest could boot succesfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95882
2859;;;;;;;;;2;"2. check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95882
2859;;;;;;;;;3;"3. run netperf test in guest(guest run as netperf client)
    for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netper_server_ip -c -C -t %j -f m -l 180 -- -m %i done done";"3. Guest did not crash,netperf run correctly without any error:
 TCP STREAM TEST from 0.0.0.0 () port 0 AF_INET to 10.66.10.110 () port 0 AF_INET : histogram : interval : demo
 Recv   Send    Send                           
 Socket Socket  Message  Elapsed               
 Size   Size    Size     Time     Throughput   
 bytes  bytes   bytes    secs.    10^6bits/sec   
  
  87380  65536  65536    10.22      98.30   
";;RedHatEnterpriseLinux7/RHEL7-95882
2859;;;;;;;;;4;"4. during step3 shutdown guest in qmp:
 {""execute"":""system_powerdown""}
​​";4. guest can be shutdown without any error;;RedHatEnterpriseLinux7/RHEL7-95882
2860;RHEL7-95883;[virtual network][virtual-nic-device] sleep guest (s3)&resume with netkvm driver enabled (only for desktop guest) - virtio-win only;[virtual network][virtual-nic-device]sleep guest (s3)&resume with netkvm driver enabled(only for desktop guest);Yu Wang (wyu);Low;Positive;Not Automated;420484;1;"steps:
 1. start guest w/ virtio-net-pci:
 -spice disable-ticketing,port=5931 -vga qxl -global
 PIIX4_PM.disable_s3=0 -global PIIX4_PM.disable_s4=0
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10 
​​";1. guest should boot normally;Test Case;RedHatEnterpriseLinux7/RHEL7-95883
2860;;;;;;;;;2;"2.check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95883
2860;;;;;;;;;3;"3.Install qxl driver in device manager:
 device manager--->Other devices--->right-click ""Microsoft basic display adapater""--->update driver
 software---->Browse my computer for driver software--->let me pick from list
 of device drivers on my computer--->choose the path while located your driver ----> install
​​";"3.qxl driver can be installed correctly
​​";;RedHatEnterpriseLinux7/RHEL7-95883
2860;;;;;;;;;4;"4. do sleep on guest (S3)
 Note:
 for win2k8-R2/win7: Click Start---> Sleep
 for win2k8:
 1) Click Start---> Control Panel---> Power Options --> Choose what the power button does---> Select ""Sleep"" from dropdown list---> Save changes
 2) Type ""system_powerdown"" from qemu monitor
 for win2k3/winxp:
 1) Click Start---> Control Panel---> Power Options---> Advanced---> Select ""Stand by"" from dropdown list in ""Power Buttons"" panel---> Click OK button to save
 2) Click Start---> Shutdown---> select ""Stand by"" from dropdown list---> Click OK button
​​";"4. the guest should suspend to s3 without any error,qmp get following event:
 {""timestamp"": {""seconds"": 1448446575, ""microseconds"": 201282}, ""event"": ""SUSPEND""}
​​";;RedHatEnterpriseLinux7/RHEL7-95883
2860;;;;;;;;;5;"5.check guest status:
 {""execute"":""query-status""}
​​";"5.guest status should be suspended：
 {""return"": {""status"": ""suspended"", ""singlestep"": false, ""running"": false}}
​​";;RedHatEnterpriseLinux7/RHEL7-95883
2860;;;;;;;;;6;6. after 10 mintues, press any key on keyboard to wake up guest (resume);"6. the guest should be awaken from s3 without any error,and qmp get wakeup event:
 {""timestamp"": {""seconds"": 1448446575, ""microseconds"": 695447}, ""event"": ""WAKEUP""}";;RedHatEnterpriseLinux7/RHEL7-95883
2860;;;;;;;;;7;7. after wake from S3, login to guest;7. can login to guest without any errot promt;;RedHatEnterpriseLinux7/RHEL7-95883
2860;;;;;;;;;8;"8.check guest status:
 {""execute"":""query-status""}";"8.guest status should be running:
 {""return"": {""status"": ""running"", ""singlestep"": false, ""running"": true}}";;RedHatEnterpriseLinux7/RHEL7-95883
2860;;;;;;;;;9;9. check netkvm driver by Opening Device Manager and clicking Network adapters--> right-clicking Properties of Redhat VirtIO Ethernet Adapter;9. No any error such as yellow warning for netkvm driver;;RedHatEnterpriseLinux7/RHEL7-95883
2860;;;;;;;;;10;"10. ping between guest and extenal host
 from external host to guest: ping -c 10 $guest_ip
 from guest to external host: ping -n 10 $external-host_ip";10. the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-95883
2861;RHEL7-95884;[virtual network][virtual-nic-device] hibernate guest(s4)& resume with netkvm driver enabled (only for desktop guest) - virtio-win only;[virtual network][virtual-nic-device] hibernate guest(s4)& resume with netkvm driver enabled(only for desktop guest);Yu Wang (wyu);Low;Positive;Not Automated;420485;1;"steps:
 1. start guest w/ virtio-net-pci:
 -spice disable-ticketing,port=5931 -vga qxl -global
 PIIX4_PM.disable_s3=0 -global PIIX4_PM.disable_s4=0
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10 
​​";1. guest should boot normally;Test Case;RedHatEnterpriseLinux7/RHEL7-95884
2861;;;;;;;;;2;"2.check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95884
2861;;;;;;;;;3;"3.Install qxl driver in device manager:
 device manager--->Other devices--->right-click ""Microsoft basic display adapater""--->update driver
 software---->Browse my computer for driver software--->let me pick from list
 of device drivers on my computer--->choose the path while located your driver ----> install";​​;;RedHatEnterpriseLinux7/RHEL7-95884
2861;;;;;;;;;4;"4. do hibernate on guest (S4)
 Note:
 for win2k8-R2/win7: Click Start---> Sleep
 for win2k8:
 1) Click Start---> Control Panel---> Power Options --> Choose what the power button does---> Select ""Hibernate"" from dropdown list---> Save changes
 2) Type ""system_powerdown"" from qemu monitor
 for win2k3/winxp:
 1) Click Start---> Control Panel---> Power Options---> Hibernate---> Check ""Enable Hibernate""---> Click OK button to save
 2) Click Start---> Shutdown---> select ""Hibernate"" from dropdown list---> Click OK button
​​";3. the guest should suspend to s4 without any error;;RedHatEnterpriseLinux7/RHEL7-95884
2861;;;;;;;;;5;"5. After qemu quit, boot guest with the same CLI in step1
​​";4. the guest should be awaken from s4 without any failure information in dmesg;;RedHatEnterpriseLinux7/RHEL7-95884
2861;;;;;;;;;6;6. after wake from S4, login to guest.;5. can login to guest without any errot promt;;RedHatEnterpriseLinux7/RHEL7-95884
2861;;;;;;;;;7;7. check netkvm driver by Opening Device Manager and clicking Network adapters--> right-clicking Properties of Redhat VirtIO Ethernet Adapter;6. No any error such as yellow warning for netkvm driver;;RedHatEnterpriseLinux7/RHEL7-95884
2861;;;;;;;;;8;"8. ping between guest and extenal host
 from external host to guest: ping -c 10 $guest_ip
 from guest to external host: ping -n 10 $external-host_ip";7. the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-95884
2862;RHEL7-95885;[virtual network][virtual-nic-device] guest reboot many times after virtio-nic installed;guest reboot many times after virtio-nic installed;Yu Wang (wyu);High;Positive;Automated;420568;1;"1. start guest w/ virtio-net-pci:
 CLI: -netdev tap,id=hostnet0,vhost=on,script=/etc/qemu-ifup0 -device virtio-net-
 pci,netdev=hostnet0,id=net0,mac=52:54:00:02:00:80
​​";1. Guest could boot up successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95885
2862;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"3. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95885
2862;;;;;;;;;3;"4. ping between guest and extenal host
 from external host to guest: ping -c 10 $guest_ip
 from guest to external host:
                                      windows guest: ping -n 10 $external-host_ip
                                      linux guest:       ping -c 10 $external-hohst_ip
​​";4. the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-95885
2862;;;;;;;;;4;"5. reboot guest:
 linux: init 6
 windows: ctrl+alt+delete --> reboot";5. guest can reboot successfully;;RedHatEnterpriseLinux7/RHEL7-95885
2862;;;;;;;;;5;"6. ping between guest and extenal host
 from external host to guest: ping -c 10 $guest_ip
 from guest to external host: ping -n 10 $external-host_ip";6. the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-95885
2862;;;;;;;;;6;7. repeat 5-6 many times such as 5 times;"7. network should connect well without any problem and can ping external host instead of keeping ""toggling"" after each reboot.";;RedHatEnterpriseLinux7/RHEL7-95885
2863;RHEL7-95886;[virtual network][virtual-nic-device] guest shutdown after hotplug netkvm - virtio-win only;[virtual network][virtual-nic-device]guest shutdown after hotplug netkvm;Yu Wang (wyu);Medium;Positive;Automated;420551;1;"steps:
 1. start guest without netkvm device:
 CLI: -net none
​​";1. guest can boot successfully without any error.;Test Case;RedHatEnterpriseLinux7/RHEL7-95886
2863;;;;;;;;;2;"2.query network 
 {""execute"":""human-monitor-command"",""arguments"":{""command-line"":""info network""}}";"2.qmp return empty network info:
 {""return"": """"}";;RedHatEnterpriseLinux7/RHEL7-95886
2863;;;;;;;;;3;"4. add a tap device back-end using QMP (enable vhost for virtio_nic)
 #{""execute"": ""qmp_capabilities""}
 #{ ""execute"": ""netdev_add"", ""arguments"": { ""type"":""tap"",""id"":""hostnet0"",""vhost"":""on"",""script"":""/etc/qemu-ifup"",""queues"":""4""}}";"3. Check the output of qmp,it should contain the message like the following: {""return"": {}}";;RedHatEnterpriseLinux7/RHEL7-95886
2863;;;;;;;;;4;"4. add netkvm device:
 {""execute"": ""device_add"", ""arguments"": { ""driver"":""virtio-net-pci"",""netdev"":""hostnet0"",""mac"":""00:1a:4a:42:0b:01"",""id"": ""net0"",""mq"":""on"",""vectors"":""10""}}";"4. qmp should contain the message like the following: {""return"": {}}
 {""timestamp"": {""seconds"": 1404461175, ""microseconds"": 275539}, ""event"": ""NIC_RX_FILTER_CHANGED"", ""data"": {""name"": ""net0"", ""path"": ""/machine/peripheral/net0/virtio-backend""}}";;RedHatEnterpriseLinux7/RHEL7-95886
2863;;;;;;;;;5;"5. query network
 {""execute"":""human-monitor-command"",""arguments"":{""command-line"":""info network""}}";"5.qmp will return netkvm nic info as following:
 {""return"": ""net0: index=0,type=nic,model=virtio-net-pci,macaddr=00:1a:4a:42:0b:01\r\n \\ hostnet0: index=0,type=tap,ifname=tap0,script=/etc/qemu-ifup,downscript=/etc/qemu-ifdown\r\n""}";;RedHatEnterpriseLinux7/RHEL7-95886
2863;;;;;;;;;6;"6. Check if new interface gets ip address
 guest) # ipconfig -all";6. new ip address can be got;;RedHatEnterpriseLinux7/RHEL7-95886
2863;;;;;;;;;7;"7. ping guest new ip from host
 host) # ping $guest_ip";7. can ping guest successfully;;RedHatEnterpriseLinux7/RHEL7-95886
2863;;;;;;;;;8;"8. shutdown guest:
 ctrl+alt+delete ---> shutdown";8. guest shutdown successfully without any error;;RedHatEnterpriseLinux7/RHEL7-95886
2864;RHEL7-95887;[virtual network][virtual-nic-device] guest reboot after hotplug netkvm - virtio-win only;[virtual network][virtual-nic-device]guest reboot after hotplug netkvm;Yu Wang (wyu);Medium;Positive;Automated;;1;"steps:
 1. start guest without netkvm device:
 CLI: -net none
​​";1. guest can boot successfully without any error.;Test Case;RedHatEnterpriseLinux7/RHEL7-95887
2864;;;;;;;;;2;"2.query network 
 {""execute"":""human-monitor-command"",""arguments"":{""command-line"":""info network""}}";"2.qmp return empty network info:
 {""return"": """"}";;RedHatEnterpriseLinux7/RHEL7-95887
2864;;;;;;;;;3;"4. add a tap device back-end using QMP (enable vhost for virtio_nic)
 #{""execute"": ""qmp_capabilities""}
 #{ ""execute"": ""netdev_add"", ""arguments"": { ""type"":""tap"",""id"":""hostnet0"",""vhost"":""on"",""script"":""/etc/qemu-ifup"",""queues"":""4""}}";"3. Check the output of qmp,it should contain the message like the following: {""return"": {}}";;RedHatEnterpriseLinux7/RHEL7-95887
2864;;;;;;;;;4;"4. add netkvm device:
 {""execute"": ""device_add"", ""arguments"": { ""driver"":""virtio-net-pci"",""netdev"":""hostnet0"",""mac"":""00:1a:4a:42:0b:01"",""id"": ""net0"",""mq"":""on"",""vectors"":""10""}}";"4. qmp should contain the message like the following: {""return"": {}}
 {""timestamp"": {""seconds"": 1404461175, ""microseconds"": 275539}, ""event"": ""NIC_RX_FILTER_CHANGED"", ""data"": {""name"": ""net0"", ""path"": ""/machine/peripheral/net0/virtio-backend""}}";;RedHatEnterpriseLinux7/RHEL7-95887
2864;;;;;;;;;5;"5. query network
 {""execute"":""human-monitor-command"",""arguments"":{""command-line"":""info network""}}";"5.qmp will return netkvm nic info as following:
 {""return"": ""net0: index=0,type=nic,model=virtio-net-pci,macaddr=00:1a:4a:42:0b:01\r\n \\ hostnet0: index=0,type=tap,ifname=tap0,script=/etc/qemu-ifup,downscript=/etc/qemu-ifdown\r\n""}";;RedHatEnterpriseLinux7/RHEL7-95887
2864;;;;;;;;;6;"6. Check if new interface gets ip address
 guest) # ipconfig -all";6. new ip address can be got;;RedHatEnterpriseLinux7/RHEL7-95887
2864;;;;;;;;;7;"7. ping guest new ip from host
 host) # ping $guest_ip";7. can ping guest successfully;;RedHatEnterpriseLinux7/RHEL7-95887
2864;;;;;;;;;8;"8. reboot guest:
 ctrl+alt+delete --->reboot";8. guest  reboot successfully without any error;;RedHatEnterpriseLinux7/RHEL7-95887
2864;;;;;;;;;9;"9.repeat step 7
​​";9.can ping guest successfully;;RedHatEnterpriseLinux7/RHEL7-95887
2865;RHEL7-95888;[virtual network][virtual-nic-device] guest shutdown after hotunplug netkvm - virtio-win only;[virtio-win][netkvm] guest shutdown after hotunplug netkvm;Yu Wang (wyu);Medium;Positive;Not Automated;;1;"steps:
 1. start guest w/ virtio-net-pci and QMP enabled
 CLI: -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet0,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10
​​";1. guest can boot successfully without any error.;Test Case;RedHatEnterpriseLinux7/RHEL7-95888
2865;;;;;;;;;2;"3. check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";"3. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95888
2865;;;;;;;;;3;"5. remove virtual NIC
 # {""execute"": ""qmp_capabilities""}
 # {""execute"": ""device_del"", ""arguments"": {""id"": ""net0""}}";"5. qmp should contain the message like the following DEVICE_DELETED event:
 {""timestamp"": {""seconds"": 1448521234, ""microseconds"": 109697}, ""event"": ""DEVICE_DELETED"", ""data"": {""path"": ""/machine/peripheral/net0/virtio-backend""}}
 {""timestamp"": {""seconds"": 1448521234, ""microseconds"": 109790}, ""event"": ""DEVICE_DELETED"", ""data"": {""device"": ""net0"", ""path"": ""/machine/peripheral/net0""}}";;RedHatEnterpriseLinux7/RHEL7-95888
2865;;;;;;;;;4;"6. remove tap device back-end
 {""execute"": ""netdev_del"", ""arguments"": {""id"": ""hostnet0""}}";"6. No any netkvm device info display:
 {""return"": """"}";;RedHatEnterpriseLinux7/RHEL7-95888
2865;;;;;;;;;5;"7. query network:
 {""execute"":""human-monitor-command"",""arguments"":{""command-line"":""info network""}}";7. No any netkvm device info display;;RedHatEnterpriseLinux7/RHEL7-95888
2865;;;;;;;;;6;8. Check if netkvm driver is removed from guest: Opening Device Manager and clicking Network adapters;"8. virtio NIC and tap should be removed already,no device named ""Redhat VirtIO Ethernet Adapter"" is displayed.";;RedHatEnterpriseLinux7/RHEL7-95888
2865;;;;;;;;;7;"9. shutdown guest:
 ctrl+alt+delete --->  shutdown";9. guest shutdown successfully;;RedHatEnterpriseLinux7/RHEL7-95888
2866;RHEL7-95889;[virtual network][virtual-nic-device]  guest reboot after hotunplug netkvm - virtio-win only;[virtual network][virtual-nic-device]guest reboot after hotunplug netkvm;Yu Wang (wyu);Medium;Positive;Not Automated;420554;1;"steps:
 1. start guest w/ virtio-net-pci and QMP enabled
 CLI: -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet0,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10
​​";1. guest can boot successfully without any error.;Test Case;RedHatEnterpriseLinux7/RHEL7-95889
2866;;;;;;;;;2;"3. check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";"3. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95889
2866;;;;;;;;;3;"5. remove virtual NIC
 # {""execute"": ""qmp_capabilities""}
 # {""execute"": ""device_del"", ""arguments"": {""id"": ""net0""}}";"5. qmp should contain the message like the following DEVICE_DELETED event:
 {""timestamp"": {""seconds"": 1448521234, ""microseconds"": 109697}, ""event"": ""DEVICE_DELETED"", ""data"": {""path"": ""/machine/peripheral/net0/virtio-backend""}}
 {""timestamp"": {""seconds"": 1448521234, ""microseconds"": 109790}, ""event"": ""DEVICE_DELETED"", ""data"": {""device"": ""net0"", ""path"": ""/machine/peripheral/net0""}}";;RedHatEnterpriseLinux7/RHEL7-95889
2866;;;;;;;;;4;"6. remove tap device back-end
 {""execute"": ""netdev_del"", ""arguments"": {""id"": ""hostnet0""}}";"6. No any netkvm device info display:
 {""return"": """"}";;RedHatEnterpriseLinux7/RHEL7-95889
2866;;;;;;;;;5;"7. query network:
 {""execute"":""human-monitor-command"",""arguments"":{""command-line"":""info network""}}";7. No any netkvm device info display;;RedHatEnterpriseLinux7/RHEL7-95889
2866;;;;;;;;;6;8. Check if netkvm driver is removed from guest: Opening Device Manager and clicking Network adapters;"8. virtio NIC and tap should be removed already,no device named ""Redhat VirtIO Ethernet Adapter"" is displayed.";;RedHatEnterpriseLinux7/RHEL7-95889
2866;;;;;;;;;7;"9. reboot guest:
 ctrl+alt+delete --->  reboot";9. reboot successfully;;RedHatEnterpriseLinux7/RHEL7-95889
2866;;;;;;;;;8;10. login to guest and to check netkvm driver by Opening Device Manager and clicking Network adapters--> right-clicking Properties of Redhat VirtIO Ethernet Adapter;"10. no device named ""Redhat VirtIO Ethernet Adapter"" is displayed.";;RedHatEnterpriseLinux7/RHEL7-95889
2867;RHEL7-95890;[virtual network][virtual-nic-device] hot-plug NIC device;hotplug netkvm device;Yu Wang (wyu);High;Positive;Automated;;1;"1.  start guest without netkvm device:
 CLI: -net none";guest can boot successfully without any error.;Test Case;RedHatEnterpriseLinux7/RHEL7-95890
2867;;;;;;;;;2;"2.query network:
 {""execute"":""human-monitor-command"",""arguments"":{""command-line"":""info network""}}";"qmp return empty network info:
 {""return"": """"}";;RedHatEnterpriseLinux7/RHEL7-95890
2867;;;;;;;;;3;"3.  add a tap device back-end using QMP (enable vhost for virtio_nic)
 #{""execute"": ""qmp_capabilities""}
 For tap backend:
 { ""execute"": ""netdev_add"", ""arguments"": { ""type"":""tap"",""id"":""hostnet0"",""vhost"":""on"",""script"":""/etc/qemu-ifup""}}
 For macvtap backend
 { ""execute"": ""netdev_add"", ""arguments"": { ""type"":""tap"",""id"":""hostnet0"",""vhost"":""on"",""fd"":""$fd""}}";"netdev can be add correctly:
 {""return"": {}}";;RedHatEnterpriseLinux7/RHEL7-95890
2867;;;;;;;;;4;"4. add a virtual NIC
 For tap backend:
 {""execute"": ""device_add"", ""arguments"": { ""driver"":""virtio-net-pci"",""netdev"":""hostnet0"",""mac"":""00:1a:4a:42:0b:01"",""id"": ""net0""}}
 For macvtap backend:
 {""execute"": ""device_add"", ""arguments"": { ""driver"":""virtio-net-pci"",""netdev"":""hostnet0"",""mac"":""$macvtap_interface_mac_address"",""id"": ""net0""}}";"qmp get NIC_RX_FILTER_CHANGED event:
 {""return"": {}}
 {""timestamp"": {""seconds"": 1404461175, ""microseconds"": 275539}, ""event"": ""NIC_RX_FILTER_CHANGED"", ""data"":           {""name"": ""net0"", ""path"": ""/machine/peripheral/net0/virtio-backend""}}";;RedHatEnterpriseLinux7/RHEL7-95890
2867;;;;;;;;;5;"5. query network:
 {""execute"":""human-monitor-command"",""arguments"":{""command-line"":""info network""}}";"qmp will return netkvm nic info as following:
 {""return"": ""net0: index=0,type=nic,model=virtio-net-pci,macaddr=00:1a:4a:42:0b:01\r\n \\ hostnet0: index=0,type=tap,ifname=tap0,script=/etc/qemu-ifup,downscript=/etc/qemu-ifdown\r\n""}";;RedHatEnterpriseLinux7/RHEL7-95890
2867;;;;;;;;;6;"6. ping between guest and extenal host 
      from external host to guest: ping -c 10 $guest_ip 
      from guest to external host: ping -n 10 $external-host_ip";the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-95890
2868;RHEL7-95891;[virtual network][virtual-nic-device] hot-unplug NIC device;hot-unplug netkvm device;Yu Wang (wyu);High;Positive;Automated;;1;"1. start guest w/ vhost=on
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on \
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
​​";guest can boot successfully without any error.;Test Case;RedHatEnterpriseLinux7/RHEL7-95891
2868;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings
​​";drvier verifier can be enabled successfully,cmd output should include：     Verified drivers:     netkvm.sys;;RedHatEnterpriseLinux7/RHEL7-95891
2868;;;;;;;;;3;"3.query network:
 {""execute"":""human-monitor-command"",""arguments"":{""command-line"":""info network""}}";"qmp will return netkvm nic info as following:
 {""return"": ""net0: index=0,type=nic,model=virtio-net-pci,macaddr=00:1a:4a:42:0b:01\r\n \\ hostnet0: index=0,type=tap,ifname=tap0,script=/etc/qemu-ifup,downscript=/etc/qemu-ifdown\r\n""}";;RedHatEnterpriseLinux7/RHEL7-95891
2868;;;;;;;;;4;"4.remove virtual NIC
 {""execute"": ""qmp_capabilities""}
 {""execute"": ""device_del"", ""arguments"": {""id"": ""net1""}}";"qmp should contain the message like the following DEVICE_DELETED event:
 {""timestamp"": {""seconds"": 1448521234, ""microseconds"": 109697}, ""event"": ""DEVICE_DELETED"", ""data"": {""path"": ""/machine/peripheral/net0/virtio-backend""}}
 {""timestamp"": {""seconds"": 1448521234, ""microseconds"": 109790}, ""event"": ""DEVICE_DELETED"", ""data"": {""device"": ""net0"", ""path"": ""/machine/peripheral/net0""}}";;RedHatEnterpriseLinux7/RHEL7-95891
2868;;;;;;;;;5;"5. remove tap device back-end
     {""execute"": ""netdev_del"", ""arguments"": {""id"": ""hostnet1""}}";"qmp return no error msg:
 {""return"": {}}";;RedHatEnterpriseLinux7/RHEL7-95891
2868;;;;;;;;;6;"6. query network:
 {""execute"":""human-monitor-command"",""arguments"":{""command-line"":""info network""}}";"No any netkvm device info display:
 {""return"": """"} ";;RedHatEnterpriseLinux7/RHEL7-95891
2868;;;;;;;;;7;"7. Check if netkvm driver is removed from guest: 
 For linux: # lspci |grep Eth
 For windows: Opening Device Manager and clicking Network adapters--> right-clicking Properties of Redhat VirtIO Ethernet Adapter";"virtio NIC and tap should be removed already
 linux: no output related Eth
 windows: no device named ""Redhat VirtIO Ethernet Adapter"" is displayed.";;RedHatEnterpriseLinux7/RHEL7-95891
2869;RHEL7-95893;"[virtual network][virtual-nic-device] Use ""sigverif"" Utilityto verifying driver safety (only for the rpm build) - virtio-win only";"[virtual network][virtual-nic-device]Use ""sigverif"" Utilityto verifying driver safety(only for the rpm build)";Yu Wang (wyu);Critical;Positive;Not Automated;420560;1;"1. start guest with netkvm device:
 CLI: -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10";"1.guest can boot up successfully;";Test Case;RedHatEnterpriseLinux7/RHEL7-95893
2869;;;;;;;;;2;"3. use signverif to check driver safety:
 From cmd in guest:
 3.1.type sigverif command,then press the Enter
 3.2 run the tool by clicking Start.";"2.After step3, the netkvm driver is digitally signed, a dialog box appears indicating ""**Your Files Have Been Scanned And Verified As Digitally Signed.**""";;RedHatEnterpriseLinux7/RHEL7-95893
2870;RHEL7-95894;[virtual network][virtual-nic-device] Use signtool.exe to check whether the driver is digital signed - virtio-win only;[virtual network][virtual-nic-device] Use signtool.exe to check whether the driver is digital signed;Yu Wang (wyu);Critical;Positive;Automated;420559;1;"1. start guest with netkvm device:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10";1. guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95894
2870;;;;;;;;;2;"2. From cmd in guest:
 #SignTool.exe verify /v /kp /c netkvm.cat netkvm.sys
 #SignTool.exe verify /v /kp /c netkvm.cat netkvm.inf";"2. all files should be signed after signtool checked:
 Number of files successsfully verified:1
 Number of warnings:0
 Number of errors:0";;RedHatEnterpriseLinux7/RHEL7-95894
2871;RHEL7-95895;[virtual network][virtual-nic-device] install\uninstall netkvm drivers (please do this case in the last) - virtio-win only;[virtual network][virtual-nic-device]install\uninstall netkvm drivers(please do this case in the last);Yu Wang (wyu);Critical;Positive;Automated;420628;1;"1. start guest w/ virtio-net-pci
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10
​​";1. Guest could bootup successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95895
2871;;;;;;;;;2;"2.check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95895
2871;;;;;;;;;3;"3.do netper test in guest:
 #for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in
 (TCP_STREAM,UDP_STREAM) do netperf.exe -H 10.66.10.178 -c -C -t %j -f m -l 180
 -- -m %i done done";"3. Netperf test can start successfully:
 TCP STREAM TEST from 0.0.0.0 () port 0 AF_INET to 10.66.10.110 () port 0 AF_INET : histogram : interval : demo 
 Recv   Send    Send                           
 Socket Socket  Message  Elapsed               
 Size   Size    Size     Time     Throughput   
 bytes  bytes   bytes    secs.    10^6bits/sec   
  
  87380  65536  65536    10.22      98.30   ";;RedHatEnterpriseLinux7/RHEL7-95895
2871;;;;;;;;;4;"4. during steps 3 ,uninstall virtio-net driver:
 eg: in the guest : right click ""my computers"" --->Properties ---> device
 manager--->right-click ""Red Hat VirtIO Athernet Adapter""---uninstall";4. driver could uninstall successfully, guest did not hang or BSOD and qemu-kvm did not crash;;RedHatEnterpriseLinux7/RHEL7-95895
2871;;;;;;;;;5;"5. reinstall virtio-net driver
 in the guest : right click ""my computers"" --->Properties ---> device
 manager--->Other devices--->right-click ""Ethernet Controller""--->update driver
 software---->Browse my computer for driver software--->let me pick from list
 of device drivers on my computer--->Network adapters --->Next --->Hard Disk
 --->choose the path while located your driver ----> install";5. driver could be installed successfully;;RedHatEnterpriseLinux7/RHEL7-95895
2871;;;;;;;;;6;6. repeat step3 or do some ping work.;6. there is no network issue;;RedHatEnterpriseLinux7/RHEL7-95895
2872;RHEL7-95896;[virtual network][virtual-nic-device] upgrade/Downgrade netkvm drivers (pls do this case in the last) - virtio-win only;[virtual network][virtual-nic-device]upgrade/Downgrade netkvm drivers(pls do this case in the last);Yu Wang (wyu);Critical;Positive;Automated;420627;1;"1. start guest w/ virtio-net-pci
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10
​​";1. guest could bootup scuccessfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95896
2872;;;;;;;;;2;"2.check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95896
2872;;;;;;;;;3;"3. check the version of virtio-nic-driver
 eg: in the guest : right click ""my computers"" --->Properties ---> device
 manager--->right-click ""Red Hat VirtIO Athernet Adapter""--->properties";"3.druver version is the current version
​​";;RedHatEnterpriseLinux7/RHEL7-95896
2872;;;;;;;;;4;"4.ping between guest and extenal host
 from external host to guest: ping -c 10 $guest_ip
 from guest to external host: ping -n 10 $external-host_ip";4.the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-95896
2872;;;;;;;;;5;"5. downgrade the virtio-nic driver to previous one:
 eg:on the host # rpm -ivh virtio-win-1.4.0-1.el6.noarch.rpm
 in the qemu-kvm monitor (qemu)change ide1-cd0 /usr/share/virtio-win/virtio- win.iso
 in the guest : right click ""my computers"" --->Properties ---> device manager--->Other devices--->right-click ""Ethernet Controller""--->update driver  software---->Browse my computer for driver software--->let me pick from list of device drivers on my computer--->Network adapters --->Next --->Hard Disk --->choose the path while located your driver ----> install";5. virtio-nic driver downgrade successfully;;RedHatEnterpriseLinux7/RHEL7-95896
2872;;;;;;;;;6;"6. check the version of virtio-nic-driver
 eg: in the guest : right click ""my computers"" --->Properties ---> device
 manager--->right-click ""Red Hat VirtIO Athernet Adapter""--->properties";6. check the version of virtio-nic whether is the old one;;RedHatEnterpriseLinux7/RHEL7-95896
2872;;;;;;;;;7;"7. ping between guest and extenal host
 from external host to guest: ping -c 10 $guest_ip
 from guest to external host: ping -n 10 $external-host_ip";7. the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-95896
2872;;;;;;;;;8;"8. upgrade the driver to the newer one which you was asked to test (eg,this run is for virtio-win-prewhql-30, use the virtio-net driver in virtio-win-prewhql-30)
 in the guest : right click ""my computers"" --->Properties ---> device manager--->Other devices--->right-click ""Ethernet Controller""--->update driver
 software---->Browse my computer for driver software--->let me pick from list
 of device drivers on my computer--->Network adapters --->Next --->Hard Disk --->choose the path while located your driver ----> install";8. driver could update successfully;;RedHatEnterpriseLinux7/RHEL7-95896
2872;;;;;;;;;9;"9. check the version of virtio-nic-driver
 eg: in the guest : right click ""my computers"" --->Properties ---> device manager--->right-click ""Red Hat VirtIO Athernet Adapter""--->properties";9. check the verision of virtio-net driver whether is the new installed one;;RedHatEnterpriseLinux7/RHEL7-95896
2872;;;;;;;;;10;"10. ping between guest and extenal host
 from external host to guest: ping -c 10 $guest_ip
 from guest to external host: ping -n 10 $external-host_ip";10. the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-95896
2873;RHEL7-95897;[virtual network][virtual-nic-device] Disable/enable netkvm driver - virtio-win only;[virtual network][virtual-nic-device] Disable/enable netkvm driver;Yu Wang (wyu);High;Positive;Not Automated;;1;"1.start VM with virtio-net-pci:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10
​​";"1. guest boot up correctly
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-95897
2873;;;;;;;;;2;"2.check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""
​​";;RedHatEnterpriseLinux7/RHEL7-95897
2873;;;;;;;;;3;"3. run netperf test in guest(guest run as netperf client)
    for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netper_server_ip -c -C -t %j -f m -l 180 -- -m %i done done
​​";"3.Guest did not crash,netperf run correctly without any error:
 TCP STREAM TEST from 0.0.0.0 () port 0 AF_INET to 10.66.10.110 () port 0 AF_INET : histogram : interval : demo 
 Recv   Send    Send                           
 Socket Socket  Message  Elapsed               
 Size   Size    Size     Time     Throughput   
 bytes  bytes   bytes    secs.    10^6bits/sec   
  
  87380  65536  65536    10.22      98.30    
 
​​";;RedHatEnterpriseLinux7/RHEL7-95897
2873;;;;;;;;;4;"4.during step3,disable netkvm driver in device manager:
 Device Manager -->"" Network adapters""--> right click ""Redhat VirtIO Ethernet Adapter"" --> Disable
​​";"4.""Redhat VirtIO Ethernet Adapter"" is in disabled status in device manager;
   netperf test in step 3 failed as following:
 establish control: are you sure there is a netserver listening on 10.66.xx.xx at port 12865? 
 establish_control could not establish the control connection from 0.0.0.0 port 0 address family AF_UNSPEC to 10.66.xx.xx port 12865 address family AF_INET
​​";;RedHatEnterpriseLinux7/RHEL7-95897
2873;;;;;;;;;5;"5.after 5 minutes,enable netkvm driver in device manager:
 Device Manager -->"" Network adapters""--> right click ""Redhat VirtIO Ethernet Adapter"" --> Enable
​​";"5.""Redhat VirtIO Ethernet Adapter"" is in enabled status in device manager;";;RedHatEnterpriseLinux7/RHEL7-95897
2873;;;;;;;;;6;"6.repeat step3
​​";"6.netperf run correctly without any error
​​";;RedHatEnterpriseLinux7/RHEL7-95897
2874;RHEL7-95898;[virtual network][virtual-nic-device] Check the netkvm driver version for netkvm.inf,netkvm.sys,netkvm.cat - virtio-win only;[virtual network][virtual-nic-device]Check the netkvm driver version for netkvm.inf,netkvm.sys,netkvm.cat;Yu Wang (wyu);High;Positive;Not Automated;;1;"1. Start guest w/ virtio-net-pci:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10
​​";1. guest should start normally, qemu-kvm should not core dump.;Test Case;RedHatEnterpriseLinux7/RHEL7-95898
2874;;;;;;;;;2;"2. check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";"2. drvier verifier can be enabled successfully,cmd output should include：     Verified drivers:     netkvm.sys
​​";;RedHatEnterpriseLinux7/RHEL7-95898
2874;;;;;;;;;3;"3. In the device manager ,right click netkvm device and chek version,digital signer
​​";3. all files should have correct version info.;;RedHatEnterpriseLinux7/RHEL7-95898
2874;;;;;;;;;4;4. in the C:\windows\system32\drivers\XXX.sys ---> right-click it ,check the version, copyright .etc.;4. all files should have correct version info.;;RedHatEnterpriseLinux7/RHEL7-95898
2875;RHEL7-95899;[virtual network][virtual-nic-device] stop/cont guest during network in use;stop/cont guest during netkvm in use;Yu Wang (wyu);High;Positive;Automated;;1;"1. start guest w/ virtio-net-pci
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on \ 
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
​​";Guest could bootup successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95899
2875;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95899
2875;;;;;;;;;3;"3.run netperf test in guest(guest run as netperf client)
 for linux: netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024
 for windows: for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netperf_server_ip -c -C -t %j -f m -l 180 -- -m %i done done
​​";"Guest did not crash,netperf run correctly without any error:
 TCP STREAM TEST from 0.0.0.0 () port 0 AF_INET to 10.66.10.110 () port 0 AF_INET : histogram : interval : demo 
 Recv   Send    Send                           
 Socket Socket  Message  Elapsed               
 Size   Size    Size     Time     Throughput   
 bytes  bytes   bytes    secs.    10^6bits/sec   
  
  87380  65536  65536    10.22      98.30    
 
​​";;RedHatEnterpriseLinux7/RHEL7-95899
2875;;;;;;;;;4;"4.during step3 stop guest
 {""execute"":""stop""}
​​";"Guest stop and qmp get following feedback:
 {""timestamp"": {""seconds"": 1440558162, ""microseconds"": 212802}, ""event"": ""STOP""}
​​";;RedHatEnterpriseLinux7/RHEL7-95899
2875;;;;;;;;;5;"5.check guest status in qmp monitor
 {""execute"":""query-status""}";"guest status should be paused:
 {""return"": {""status"": ""paused"", ""singlestep"": false, ""running"": false}}";;RedHatEnterpriseLinux7/RHEL7-95899
2875;;;;;;;;;6;"6.after 5mins ,continue guest
 {""execute"":""cont""}";"guest continue to work and qmp get following feedback:
 {""timestamp"": {""seconds"": 1440558432, ""microseconds"": 709017}, ""event"": ""RESUME""}
​​";;RedHatEnterpriseLinux7/RHEL7-95899
2875;;;;;;;;;7;"7.check guest status in qmp monitor
 {""execute"":""query-status""}";"guest status should be running:
 {""return"": {""status"": ""running"", ""singlestep"": false, ""running"": true}}";;RedHatEnterpriseLinux7/RHEL7-95899
2875;;;;;;;;;8;"6.check network status,netperf is still running without any error.
​​";network still alive,netperf is still running;;RedHatEnterpriseLinux7/RHEL7-95899
2876;RHEL7-95900;[virtual network][virtual-nic-device] iperf test with multiqueue - only for multiqueue;iperf test with multiqueue;Yu Wang (wyu);Critical;Positive;Not Automated;;1;"1. Boot guest with:
     -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10";1.Guest can boot up correctly;Test Case;RedHatEnterpriseLinux7/RHEL7-95900
2876;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"2.All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95900
2876;;;;;;;;;3;"3.Stop firewall in guest and the external host.
 For linux:
 # iptables -F ; ip6tables -F
 For windows: Control Panel --> search ""firewall""  --> turn windows firewall on or off --> turn the firewall off";3. iptables could be turned off without errors;;RedHatEnterpriseLinux7/RHEL7-95900
2876;;;;;;;;;4;"3.run iperf as a server
 1).in guest: iperf3.exe -s
 2).in host: iperf3 -c <guest_ip> -f K -i 2 -w 300K –d -P 4 -t 60
 or
 iperf3 -c <guest_ip> -f K -i 2 -w 300K -n 10400000 –d -P 4
​​";"3.data can transferred successfully,can get messages as following:
 [ ID] Interval       Transfer     Bandwidth
 [  5]  0.0-10.0 sec  1.78 GBytes  1.52 Gbits/sec
 [ ID] Interval       Transfer     Bandwidth
 [  6]  0.0-10.0 sec  1.67 GBytes  1.43 Gbits/sec
 [ ID] Interval       Transfer     Bandwidth
 [  7]  0.0-10.0 sec  1.82 GBytes  1.56 Gbits/sec
 [ ID] Interval       Transfer     Bandwidth
 [  4]  0.0-10.0 sec  2.00 GBytes  1.72 Gbits/sec
 [SUM]  0.0-10.0 sec  7.27 GBytes  6.23 Gbits/sec
​​";;RedHatEnterpriseLinux7/RHEL7-95900
2876;;;;;;;;;5;"4.run iperf as a client
 1).in host:iperf -s
 2).in guest: iperf3.exe -c <host_ip> -f K -i 2 -w 300K –d -P 4 -t 60
 or
 iperf3.exe -c <host_ip> -f K -i 2 -w 300K -n 10400000 –d -P 4
​​";"4.data can transferred successfully,can get messages as following:
 [ ID] Interval       Transfer     Bandwidth
 [  5]  0.0-10.0 sec  1.78 GBytes  1.52 Gbits/sec
 [ ID] Interval       Transfer     Bandwidth
 [  6]  0.0-10.0 sec  1.67 GBytes  1.43 Gbits/sec
 [ ID] Interval       Transfer     Bandwidth
 [  7]  0.0-10.0 sec  1.82 GBytes  1.56 Gbits/sec
 [ ID] Interval       Transfer     Bandwidth
 [  4]  0.0-10.0 sec  2.00 GBytes  1.72 Gbits/sec
 [SUM]  0.0-10.0 sec  7.27 GBytes  6.23 Gbits/sec";;RedHatEnterpriseLinux7/RHEL7-95900
2877;RHEL7-95902;[virtual network][virtual-nic-device] openvswitch env. setup with virtio-net-pci;openvswitch test with virtio-net-pci;Yu Wang (wyu);Critical;Positive;Not Automated;;1;"setup - configure ovs env:
 1).Make sure the NetworkManager service is stopped, and disabled inside host:
 on RHEL7 :
 # systemctl disable NetworkManager.service
 # systemctl status NetworkManager.service
 on RHEL6 
 Service NetworkManager stop
 chkconfig NetworkManager off
 
 2).Make sure openvswitch installed in host.
 # rpm -q openvswitch
 
 3).Install openvswitch in host, and load the module:
 # modprobe openvswitch
 # systemctl start openvswitch.service (on RHEL6 #service openvswitch start)
 # chkconfig openvswitch on
 
 4).configure the script file of network:
 # cat /etc/sysconfig/network-scripts/ifcfg-em1 
 # Generated by dracut initrd
 DEVICE=em1
 ONBOOT=yes
 #NETBOOT=yes
 #UUID=f722b40d-644b-417b-9560-d3d591618ea4
 #BOOTPROTO=dhcp
 BOOTPROTO=none
 HWADDR=""00:9c:02:a0:b6:48""
 #TYPE=Ethernet
 DEVICETYPE=ovs
 TYPE=OVSPort
 OVS_BRIDGE=ovs0
 NM_CONTROLLED=no
 #NAME=""Boot Disk""
 
 # cat /etc/sysconfig/network-scripts/ifcfg-ovs0 
 DEVICE=ovs0
 ONBOOT=yes
 DEVICETYPE=ovs
 TYPE=OVSBridge
 BOOTPROTO=dhcp
 OVSDHCPINTERFACES=em1
 OVSBOOTPROTO=dhcp
 NM_CONTROLED=no
 
 5).Enable the setup, and check it:
 # ifup em1
 # ovs-vsctl show
 # ifconfig ovs0
 
 6).Reboot host, then check the openvswitch again:
 # lsmod |grep openvswitch
 # systemctl status openvswitch.service
 # ifconfig
 # ovs-vsctl show
 
 7).Setup the guest network script, including up script and down script:
 # cat /etc/ovs-ifup
 #!/bin/sh
 
 switch='ovs0'
 /sbin/ifconfig $1 0.0.0.0 up
 ovs-vsctl add-port ${switch} $1
 
 #cat /etc/ovs-ifdown
 #!/bin/sh
 
 switch='ovs0'
 /sbin/ifconfig $1 0.0.0.0 down
 ovs-vsctl del-port ${switch} $1
 
 #chmod +x /etc/ovs-if*
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-95902
2877;;;;;;;;;2;"1.start a guest w/ network over openvswitch:.
 -netdev tap,id=tap1,script=/etc/ovs-ifup,downscript=/etc/ovs-ifdown -device virtio-net-pci,netdev=tap1,id=nic1,mac=1a:59:0a:4b:5a:94
 -qmp tcp:0:4444,server,nowait";1.guest can boot up correctly;;RedHatEnterpriseLinux7/RHEL7-95902
2877;;;;;;;;;3;" 2.check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";"2.All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95902
2877;;;;;;;;;4;" 3. access guest from external host:
 from external host to guest: ping $guest_ip";3. the guest network is alive;;RedHatEnterpriseLinux7/RHEL7-95902
2877;;;;;;;;;5;" 4. running netperf (use VM w/ovs as client ):
 # for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in
 (TCP_STREAM,UDP_STREAM) do netperf.exe -H 10.66.10.178 -c -C -t %j -f m -l 180
 -- -m %i done done";"4.netperf test can run normally:
 TCP STREAM TEST from 0.0.0.0 () port 0 AF_INET to 10.66.10.110 () port 0 AF_INET : histogram : interval : demo 
 Recv   Send    Send                           
 Socket Socket  Message  Elapsed               
 Size   Size    Size     Time     Throughput   
 bytes  bytes   bytes    secs.    10^6bits/sec   
  
  87380  65536  65536    10.22      98.30";;RedHatEnterpriseLinux7/RHEL7-95902
2877;;;;;;;;;6;"5.running netserver (use VM w/ovs as server )
 #netsever.exe";"5.netserver works well,no error prompt
​​";;RedHatEnterpriseLinux7/RHEL7-95902
2877;;;;;;;;;7;"6.do netperf from a remote host
 netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024
​​";"6.netperf works well,host get following msg:
 MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.66.8.116 () port 0 AF_INET : demo
 Recv   Send    Send                          Utilization       Service Demand
 Socket Socket  Message  Elapsed              Send     Recv     Send    Recv
 Size   Size    Size     Time     Throughput  local    remote   local   remote
 bytes  bytes   bytes    secs.    10^6bits/s  % S      % N      us/KB   us/KB
 
  65536  16384   1024    180.01      916.12   41.73    20.96    7.464   3.749  
​​";;RedHatEnterpriseLinux7/RHEL7-95902
2878;RHEL7-95903;[virtual network][virtual-nic-device] Change Mac Address Test -  not test for macvtap;MAC changing test. Boot up guest and check the network, change guest mac address and restart guest network, then re-check guest network.;Yu Wang (wyu);High;Positive;Automated;420418;1;"1. start guest w/ virtio-net-pci:
 CLI: -netdev tap,id=hostnet0,vhost=on,script=/etc/qemu-ifup0 -device virtio-net-
 pci,netdev=hostnet0,id=net0,mac=52:54:00:02:00:80
";1. guest could bootup successfully.;Test Case;RedHatEnterpriseLinux7/RHEL7-95903
2878;;;;;;;;;2;"2. in the Device manager , install virtio net pci driver
 in the guest : right click ""my computers"" --->Properties ---> device manager--->Other devices--->right-click ""Ethernet Controller""--->update driver software---->Browse my computer for driver software--->let me pick from list of device drivers on my computer--->Network adapters --->Next --->Hard Disk --->choose the path while located your driver ----> install";2. it shows the driver is installed successfully;;RedHatEnterpriseLinux7/RHEL7-95903
2878;;;;;;;;;3;"3.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings ";"3. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95903
2878;;;;;;;;;4;"4. change the value of Mac Address to ""52-54-00-02-9a-8f"":
 for linux:
 4.1.1.Change mac address via iproute:
 #ip link set $interface  address $new_mac up
 4.1.2.Set ip address to 0
 #ifconfig $interface 0.0.0.0 up
 4.1.3.Renew ip address
 #dhclient $interface
 for windows: device manager-->right-click Redhat virtio Ethernet
 Adapater-->properties-->Advanced-->Mac->Value->52-54-00-02-9a-8f";"4. No error
";;RedHatEnterpriseLinux7/RHEL7-95903
2878;;;;;;;;;5;5.Check mac changed to new one in 'info network';Mac could changed successfully;;RedHatEnterpriseLinux7/RHEL7-95903
2878;;;;;;;;;6;"6. check guest mac address
 linux: #ifconfig
 windows: # ipconfig -all";Mac could changed successfully;;RedHatEnterpriseLinux7/RHEL7-95903
2878;;;;;;;;;7;"7. ping between guest and extenal host
      from external host to guest: ping -c 10 $guest_ip
      from guest to external host: ping -n 10 $external-host_ip";5. no packet loss;;RedHatEnterpriseLinux7/RHEL7-95903
2878;;;;;;;;;8;"8. save it and reboot the guest
 start-->reboot";"6. guest can reboot without any error.
";;RedHatEnterpriseLinux7/RHEL7-95903
2878;;;;;;;;;9;"9. check guest mac address in cmd:
 linux: #ifconfig
 windows: # ipconfig -all";"7.For linux:
 mac address should change back to the old one ""52:54:00:02:00:80""
 For windows:
 the mac address should change to ""52-54-00-02-9a-8f"".
";;RedHatEnterpriseLinux7/RHEL7-95903
2878;;;;;;;;;10;"10. change the mac address back to ""52:54:00:02:00:80"":
 for linux:
 4.1.1.Change mac address via iproute:
 #ip link set $interface  address $origin_mac up
 4.1.2.Set ip address to 0
 #ifconfig $interface 0.0.0.0 up
 4.1.3.Renew ip address
 for windows: device manager-->right-click Redhat virtio Ethernet
 Adapater-->properties-->Advanced-->Mac->Value->52-54-00-02-00-80
";8. Mac could changed successfully ;;RedHatEnterpriseLinux7/RHEL7-95903
2878;;;;;;;;;11;"9.check guest mac address in cmd:
 linux: # ifconfig
 windows: # ipconfig -all";"9.linux :the mac address should change back to ""52:54:00:02:00:80""
 windows:
 1 legacy mode/ctrl_mac_addr=on, both guest/hmp mac changed
 2 modern mode/ctrl_mac_addr=on, both guest/hmp mac changed";;RedHatEnterpriseLinux7/RHEL7-95903
2878;;;;;;;;;12;"10.ping between guest and extenal host
      from external host to guest: ping -c 10 $guest_ip
      from guest to external host: ping -n 10 $external-host_ip
";"10. no packet loss
";;RedHatEnterpriseLinux7/RHEL7-95903
2878;;;;;;;;;13;"11. Only for virtio-net: 
 CLI: -netdev tap,id=hostnet0,vhost=on,script=/etc/qemu-ifup0 -device virtio-net-
 pci,netdev=hostnet0,id=net0,mac=52:54:00:02:00:80,ctrl_mac_addr=off";11. boot without error;;RedHatEnterpriseLinux7/RHEL7-95903
2878;;;;;;;;;14;12. repeat step4-6;"12. in guest:
 mac address will be 52-54-00-02-9a-8f
 in host:
 info network, mac address is still 52:54:00:02:00:80
 for windows:1 legacy mode/ctrl_mac_addr=off, both guest/hmp mac changed
 2 modern mode/ctrl_mac_addr=off, both guest/hmp mac NOT changedrefer to : bz1351089";;RedHatEnterpriseLinux7/RHEL7-95903
2879;RHEL7-95904;[virtual network][virtual-nic-device] Network test when ZeroCopy tx disabled;Zero copy send disabled Test: Zero copy tx is disabled in module vhost_net in default, it support all virtual network backend in rhel7, so will test all virtual network cases w/ zero copy tx disabled.;Yu Wang (wyu);Medium;Positive;Automated;420419;1;"1.disable zero copy from host
 # modprobe vhost-net expiremental_zcopytx=0
 # cat /sys/module/vhost_net/parameters/experimental_zcopytx";"1.command executed successfully and value is 0
";Test Case;RedHatEnterpriseLinux7/RHEL7-95904
2879;;;;;;;;;2;"2. start guest w/ virtio-net-pci
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on \ 
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \";"2.guest boot up correctly
";;RedHatEnterpriseLinux7/RHEL7-95904
2879;;;;;;;;;3;"3.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings ";"3. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95904
2879;;;;;;;;;4;"4. ping out
 For linux: check dmesg, and ping out and count 10 times
 #ping $ip -c 10
 For windows: ping $ip";"4 no error in dmesg messages and no BSOD in windows guest, no
 pkg lost after ping finished.";;RedHatEnterpriseLinux7/RHEL7-95904
2880;RHEL7-95905;[virtual network][virtual-nic-device] Offload Tx/Rx checksum;Offload Tx/Rx checksum;Yu Wang (wyu);High;Positive;Automated;420426;1;"1. start guest w/ virtio-net-pci
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on \
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
​​";1. guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95905
2880;;;;;;;;;2;"2. only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95905
2880;;;;;;;;;3;3. keep all the nic driver properties default;3. all the nic driver properties keep default;;RedHatEnterpriseLinux7/RHEL7-95905
2880;;;;;;;;;4;"4. change offload checksum to TCP:
 For linux:
 # ethtool -K eth0 tx on
 # ethtool -k eth0
 For windows: Open Device Manager and click Network adapters--> right-click Properties of Redhat VirtIO Ethernet Adapter---> Properties---> Advanced
 change the value of Offload Tx checksum and Offload Rx checksum to TCP";"4. the value change correctly
 For linux:
 Features for eth0:
 rx-checksumming: on
 tx-checksumming: on [fixed]
 
 For windows:
 value of Offload Tx checksum enabled
​​";;RedHatEnterpriseLinux7/RHEL7-95905
2880;;;;;;;;;5;5. scp file from host to guest;5. guest receive the scp file successfully;;RedHatEnterpriseLinux7/RHEL7-95905
2880;;;;;;;;;6;"6. md5 the transferred file on both host and guest:
 #md5sum xxx";"6. md5 value of host and guest should be the same
​​";;RedHatEnterpriseLinux7/RHEL7-95905
2880;;;;;;;;;7;7. scp file from guest to host;7. host receive the scp file successfully;;RedHatEnterpriseLinux7/RHEL7-95905
2880;;;;;;;;;8;"8. md5 the transferred file on both host and guest:
 #md5sum xxx";8. md5 value of host and guest should be the same;;RedHatEnterpriseLinux7/RHEL7-95905
2880;;;;;;;;;9;"9. change offload checksum to Disable:
 For linux:
 # ethtool -K eth0 tx off
 # ethtool -k eth0
 For windows:
 Open Device Manager and click Network adapters--> right-click Properties of Redhat VirtIO Ethernet Adapter---> Properties---> Advanced
 change the value of Offload Tx checksum and Offload Rx checksum to Disable";"9. the value change
 For linux:
 Features for eth0:
 rx-checksumming: off
 tx-checksumming: on [fixed]
 
 For windows:
 value of Offload Tx checksum disabled";;RedHatEnterpriseLinux7/RHEL7-95905
2880;;;;;;;;;10;10. scp file from host to guest;10. guest receive the scp file successfully;;RedHatEnterpriseLinux7/RHEL7-95905
2880;;;;;;;;;11;"11. md5 the transferred file on both host and guest:
 #md5sum xxx";11. md5 value of host and guest should be the same;;RedHatEnterpriseLinux7/RHEL7-95905
2880;;;;;;;;;12;12. scp file from guest to host;12. host receive the scp file successfully;;RedHatEnterpriseLinux7/RHEL7-95905
2880;;;;;;;;;13;"13. md5 the transferred file on both host and guest:
 #md5sum xxx";13. md5 value of host and guest should be the same;;RedHatEnterpriseLinux7/RHEL7-95905
2881;RHEL7-95906;[virtual network][virtual-nic-device] enable scatter-gather offload Tx guest;enable scantter-gather offload Tx guest;Yu Wang (wyu);Medium;Positive;Not Automated;420423;1;"1. start guest w/ virtio-net-pci
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on \
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
​​";1. guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95906
2881;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95906
2881;;;;;;;;;3;"3.  change scatter-gather to enable
 for linux:
 # ethtool -K eno1 scatter-gather on
 # ethtool -k eno1
 for windows:
 enable Offload Tx LSO:
 device manager--> click Network adapters--> right-click Properties of Redhat VirtIO Ethernet Adapter---> Properties---> Advanced-->change""Offload Tx LSO"" to enable";"3. t
 for linux:
 tx-scatter-gather: on
 tx-scatter-gather-fraglist: off [fixed]
 
 for windows: he value of ""Offload Tx LSO"" could change successfully";;RedHatEnterpriseLinux7/RHEL7-95906
2881;;;;;;;;;4;"4.  copy file from guest to host
 For linux: 
 #scp guest_file <host_ip>:/path
 #md5sum file (in host)
 For windows: use winscp to scp file from guest to host ,and the same time ,open wireshark to listenning the package.";"4.
 For linux: md5sum is right
 For windows: host can receive the scp file successfully and length of some package wih
 SSH protocal >=1514";;RedHatEnterpriseLinux7/RHEL7-95906
2881;;;;;;;;;5;"5. Only for windows: change MTU to 1000:
 device manager--> click Network adapters--> right-click Properties of Redhat VirtIO Ethernet Adapter---> Properties---> Advanced--> MTU --> change to 1000;
​​";5. the value changed successfully ;;RedHatEnterpriseLinux7/RHEL7-95906
2881;;;;;;;;;6;"6.Only for windows: change ""Offload Tx LSO"" to disable:
 device manager--> click Network adapters--> right-click Properties of Redhat VirtIO Ethernet Adapter---> Properties---> Advanced-->Offload Tx LSO --> change to disable
​​";6. the value changed successfully;;RedHatEnterpriseLinux7/RHEL7-95906
2881;;;;;;;;;7;7. Only for windows: use winscp to scp file from guest to host ,and the same time ,open wireshark to listenning the package.;7. length of all the packages wih SSH protocal <=1014;;RedHatEnterpriseLinux7/RHEL7-95906
2882;RHEL7-95907;[virtual network][virtual-nic-device] Jumbo Frame -  not test for macvtap;Jumbo frame testing. Change MTU value of guest NIC, virtual bridge to 9000, ping guest from host, check the packet loss ratio, flood ping guest, and continually execute normal ping test, re-check the packet loss ratio.;Yu Wang (wyu);High;Positive;Automated;420422;1;"steps:
 1. start guest w/ virtio-net-pci
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \ -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
​​";1. guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95907
2882;;;;;;;;;2;"2. only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95907
2882;;;;;;;;;3;"3. Check the MTU 
 For linux: use tcpdump to snoop the icmp traffic in the guest:
 # tcpdump -i eth0 icmp > tcpdump
 # ping host_ip -c 10 -s 1472
 For windows:
 1) # ping host_ip -n 10 -l 1472 -f
 2) # ping host_ip -n 10 -l 1473 -f
";"3. For linux:
 search the frame length in tcpdump like:
 15:50:28.133809 IP dhcp-9-217.nay.redhat.com > dhcp-8-120.nay.redhat.com: ICMP echo request, id 32589, seq 6, length 1480
 15:50:28.134092 IP dhcp-8-120.nay.redhat.com > dhcp-9-217.nay.redhat.com: ICMP echo reply, id 32589, seq 6, length 1480
 15:50:29.133803 IP dhcp-9-217.nay.redhat.com > dhcp-8-120.nay.redhat.com: ICMP echo request, id 32589, seq 7, length 1480
 
 For windows :
 1) ping returns value successfully .
 2) ping returns ""Packet needs to be fragmented bug DP set""";;RedHatEnterpriseLinux7/RHEL7-95907
2882;;;;;;;;;4;"4. change the MTU value to 9000
 For linux:
 ifconfig eno1 mtu 9000
 ifconfig IFNAME mtu 9000
 For windows:
 open device manager
 click Network adapters--> right-click Properties of Redhat VirtIO Ethernet
 Adapter---> Properties---> Advanced
 change ""Init.MTUSize"" value to 9000";4. MTU value change successfully;;RedHatEnterpriseLinux7/RHEL7-95907
2882;;;;;;;;;5;"5. Check the MTU 
 For linux:use tcpdump to snoop the icmp traffic in the guest:
 # tcpdump -i eth0 icmp > tcpdump
 # ping host_ip -c 10 -s 8972
 For windows:
 1) # ping host_ip -n 10 -l 8972 -f
 2) # ping host_ip -n 10 -l 8973 -f
";"5. For linux:
 search the frame length in tcpdump like:
 15:45:09.874774 IP dhcp-9-217.nay.redhat.com > dhcp-8-120.nay.redhat.com: ICMP echo request, id 32568, seq 8, length 8980
 15:45:09.874941 IP dhcp-8-120.nay.redhat.com > dhcp-9-217.nay.redhat.com: ICMP echo reply, id 32568, seq 8, length 8980
 15:45:10.874764 IP dhcp-9-217.nay.redhat.com > dhcp-8-120.nay.redhat.com: ICMP echo request, id 32568, seq 9, length 8980
 
 For windows :
 1) ping returns value successfully .
 2) ping returns ""Packet needs to be fragmented bug DP set""";;RedHatEnterpriseLinux7/RHEL7-95907
2882;;;;;;;;;6;"6. Change MTU to min and max value
 For linux:ifconfig eno1 mtu 68/65535
 For windows:
 click Network adapters--> right-click Properties of Redhat VirtIO Ethernet
 Adapter---> Properties---> Advanced
 change ""Init.MTUSize"" value to 576 and 65500";6. MTU value change successfully;;RedHatEnterpriseLinux7/RHEL7-95907
2882;;;;;;;;;7;"7.Check the MTU  as step3
 For linux:use tcpdump to snoop the icmp traffic in the guest:
 # tcpdump -i eth0 icmp > tcpdump
 # ping host_ip -c 10 -s 65472
 For windows:
 1) # ping host_ip -n 10 -l 548/65472 -f
 2) # ping host_ip -n 10 -l 549/65473 -f";"7.For linux:
 15:45:10.874764 IP dhcp-9-217.nay.redhat.com > dhcp-8-120.nay.redhat.com: ICMP echo request, id 32568, seq 9, length 59/65472
 For windows :
 1) ping returns value successfully .
 2) ping returns ""Packet needs to be fragmented bug DP set""";;RedHatEnterpriseLinux7/RHEL7-95907
2882;;;;;;;;;8;"8. Change MTU to invalid value
 For linux:ifconfig eno1 mtu 30/65550
 For windows: change to 30";"8. 
 For windows: It will prompt a error""The value is out of range . The valid range is from 576 to 65500""";;RedHatEnterpriseLinux7/RHEL7-95907
2883;RHEL7-95908;[virtual network][virtual-nic-device] netperf Test between guest and externel host.;Netperf stress between two guest. Set guest as server/client, execute netperf test one by one, analyze the result. Multiple netperf in parallel (both STREAM and RR). Netperf with -b -w parameters to trigger packet bursts.;Yu Wang (wyu);Critical;Positive;Not Automated;420421;1;"1. start guest w/ virtio-net-pci
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on \ 
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \";1. guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95908
2883;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95908
2883;;;;;;;;;3;"3.Stop firewall in guest and the external host.
 For linux:
 # iptables -F ; ip6tables -F
 For windows: Control Panel --> search ""firewall""  --> turn windows firewall on or off --> turn the firewall off";"3. iptables could be turned off without errors
​​";;RedHatEnterpriseLinux7/RHEL7-95908
2883;;;;;;;;;4;"4. run netserver on the external host:
 # netserver start";"4.host netserver start correctly:
 Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC";;RedHatEnterpriseLinux7/RHEL7-95908
2883;;;;;;;;;5;"5. running netperf in guest
 for linux: netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024
 for windows: for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netperf_server_ip -c -C -t %j -f m -l 180 -- -m %i done done
​​";"5.netperf test can run normally:
 TCP STREAM TEST from 0.0.0.0 () port 0 AF_INET to 10.66.10.110 () port 0 AF_INET : histogram : interval : demo
 Recv   Send    Send                           
 Socket Socket  Message  Elapsed               
 Size   Size    Size     Time     Throughput   
 bytes  bytes   bytes    secs.    10^6bits/sec   
  
  87380  65536  65536    10.22      98.30";;RedHatEnterpriseLinux7/RHEL7-95908
2883;;;;;;;;;6;"6. running netserver on guest
 # netsever";6.netserver could start successfully;;RedHatEnterpriseLinux7/RHEL7-95908
2883;;;;;;;;;7;"7. do netperf from external host
 #netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024";"7. netperf works well,host get following msg:
 MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.66.8.116 () port 0 AF_INET : demo
 Recv   Send    Send                          Utilization       Service Demand
 Socket Socket  Message  Elapsed              Send     Recv     Send    Recv
 Size   Size    Size     Time     Throughput  local    remote   local   remote
 bytes  bytes   bytes    secs.    10^6bits/s  % S      % N      us/KB   us/KB
 
  65536  16384   1024    180.01      916.12   41.73    20.96    7.464   3.749";;RedHatEnterpriseLinux7/RHEL7-95908
2884;RHEL7-95909;[virtual network][virtual-nic-device] Network test when ZeroCopy tx enabled;Zero copy send disabled Test: Zero copy tx is disabled in module vhost_net in default, it support all virtual network backend in rhel7, so will test all virtual network cases w/ zero copy tx disabled.;Yu Wang (wyu);Medium;Positive;Automated;;1;"1.enable zero copy from host
 # modprobe vhost-net expiremental_zcopytx=1
 # cat /sys/module/vhost_net/parameters/experimental_zcopytx";"1.command executed successfully and value is 1
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-95909
2884;;;;;;;;;2;"2. start guest w/ virtio-net-pci
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on \ 
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \";"3.guest boot up correctly
​​";;RedHatEnterpriseLinux7/RHEL7-95909
2884;;;;;;;;;3;"3.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings  ";"3. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95909
2884;;;;;;;;;4;"4. Check guest's network and guest status
 For linux: check dmesg, and ping out and count 10 times
 #ping $ip -c 10 
 For windows: check if BSOD, and ping out and count 10 times.
 c:\ ping $ip 
 
​​";"4 no error in dmesg messages and no BSOD in windows guest, no
 pkg lost after ping finished.";;RedHatEnterpriseLinux7/RHEL7-95909
2885;RHEL7-95910;[virtual network][virtual-nic-device] NetKVMConfig:change values of NetKVM parameters-enable/disable - virtio-win only;[virtual network][virtual-nic-device] NetKVMConfig:change values of NetKVM parameters-enable/disable - virtio-win only;Yu Wang (wyu);Low;Positive;Not Automated;420564;1;"steps:
 1.Registration in NetSH (instllation):
 1).cmd --> run as administrator
 2).cd path-to-the-netkvm-driver
 3).# rundll32 netkvmco.dll,RegisterNetKVMNetShHelper
​​";"Steps:
 1.after step1,command can be executed successfully;";Test Case;RedHatEnterpriseLinux7/RHEL7-95910
2885;;;;;;;;;2;"2.get the index of virtio-net-pci:
 # netsh netkvm show devices
​​";"2.after step2,get the index 0:
 NetKVM device: PCI\VEN_1AF4&DEV_1000&SUBSYS_00011AF4&REV_00\3&13C0B0C5&0&20
 Index: 0
 Description: Red Hat VirtIO Ethernet Adapter
 Name: Red Hat VirtIO Ethernet Adapter
 Location: PCI bus 0, device 4, function 0
 Number on bus: 4
 Software registry key: SYSTEM\ControlSet001\Control\Class\\{4d36e972-e325
 -11ce-bfc1-08002be10318}\0014
 NetKVM device: PCI\VEN_8086&DEV_100E&SUBSYS_11001AF4&REV_03\3&13C0B0C5&0&30
 Index: 1
 Description: Intel(R) PRO/1000 MT Network Connection
 Name: Intel(R) PRO/1000 MT Network Connection #2
 Location: PCI bus 0, device 6, function 0
 Number on bus: 6
 Software registry key: SYSTEM\ControlSet001\Control\Class\\{4d36e972-e325
 -11ce-bfc1-08002be10318}\0013";;RedHatEnterpriseLinux7/RHEL7-95910
2885;;;;;;;;;3;"3.Read NetKVM parameter value
 # netsh netkvm getparam 0 param=*LsoV2IPv4
​​";3.after step3,get the parameter value as:*LsoV2IPv4=0;;RedHatEnterpriseLinux7/RHEL7-95910
2885;;;;;;;;;4;"4.Enable NetKVM parameter value
 # netsh netkvm setparam 0 *LsoV2IPv4 1";"4.no error prompt
​​";;RedHatEnterpriseLinux7/RHEL7-95910
2885;;;;;;;;;5;"5.check the value whether changed:
 1).netsh netkvm getparam 0 param=*LsoV2IPv4
 2).from device manager,Redhat Virtio Ethernet Adapter--->
 properties--->Advanced--->Large Send Offload V2(IPV4),check the value";"5.after step5,*LsoV2IPv4=1;
 in device manager the value of ""Large Send Offload V2(IPV4) "" is enabled";;RedHatEnterpriseLinux7/RHEL7-95910
2885;;;;;;;;;6;"6.Disable NetKVM parameter value
 # netsh netkvm setparam 0 *LsoV2IPv4 0";6.no error prompt;;RedHatEnterpriseLinux7/RHEL7-95910
2885;;;;;;;;;7;"7.check the value whether changed:
 1).netsh netkvm getparam 0 param=*LsoV2IPv4
 2).from device manager,Redhat Virtio Ethernet Adapter--->
 properties--->Advanced--->Large Send Offload V2(IPV4),check the value";"7.after step7,*LsoV2IPv4=0;
 in device manager the value of ""Large Send Offload V2(IPV4) "" is disabled";;RedHatEnterpriseLinux7/RHEL7-95910
2885;;;;;;;;;8;"8.repeat step 3~7 with
 parameter:Priority,*LsoV2IPv4,*LsoV2IPv6,DoLog,*RSS,*RscIPv4,*RscIPv6";"8.result should be the same as 3~7
​​";;RedHatEnterpriseLinux7/RHEL7-95910
2886;RHEL7-95913;[virtual network][virtual-nic-device] Long transfer tests - perform long (several hours) transfer with netperf;Long transfer tests - perform long (several hours) transfer with netperf;Yu Wang (wyu);High;Positive;Not Automated;420561;1;"1. start guest w/ virtio-net-pci
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on \
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
​​";1. guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95913
2886;;;;;;;;;2;"2. only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"2.All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95913
2886;;;;;;;;;3;"3. run netserver on the external host:
 #netserver start";"3. host netserver start correctly:
 Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC";;RedHatEnterpriseLinux7/RHEL7-95913
2886;;;;;;;;;4;"4. run netperf in guest as script:
 For linux:
 #cat host-to-guest.sh
 for ((i=1;i<=10000;i++));
 do
 netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024;
 sleep 30;
 done;
 For windows:
 for /l /g in (1,1,10000) do for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netperf_server_ip -c -C -t %j -f m -l 180 -- -m %i done done done
 Let the netperf testing for about 10 hours";"4. after netpert the guest network still alive
 after 10 hours testing,the guest network still alive";;RedHatEnterpriseLinux7/RHEL7-95913
2887;RHEL7-95914;[virtual network][virtual-nic-device] Reboot guest with netkvm driver disabled when netserver running - virtio-win only;[virtual network][virtual-nic-device] Reboot guest with netkvm driver disabled when netserver running;Yu Wang (wyu);Low;Positive;Not Automated;420572;1;"1.Start VM w/ virtio-net-pci:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10
​​";1.guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95914
2887;;;;;;;;;2;"2.check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";"2.All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95914
2887;;;;;;;;;3;"3.run netserver in guest:
    # netserver";3.netserver could start successfully;;RedHatEnterpriseLinux7/RHEL7-95914
2887;;;;;;;;;4;"4.on the host start 100 instance of netperf
 for ((i=1;i<=100;i++)); do netperf -D 1 -H guest_ip -l 100 -C -c -t TCP_STREAM -- -m 65535 & done";"4.netperf test going on:
 MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.66.8.116 () port 0 AF_INET
 Recv   Send    Send                          Utilization       Service Demand
 Socket Socket  Message  Elapsed              Send     Recv     Send    Recv
 Size   Size    Size     Time     Throughput  local    remote   local   remote
 bytes  bytes   bytes    secs.    10^6bits/s  % S      % N      us/KB   us/KB
 
  65536  16384  65535    100.00     3552.84   53.78    57.92    4.960   2.671";;RedHatEnterpriseLinux7/RHEL7-95914
2887;;;;;;;;;5;"5.during step 4 (more or less 30 secs) ,disable virito-nic driver in the device manager:
 Device Manager -->"" Network adapters""--> right click ""Redhat VirtIO Ethernet Adapter"" --> Disable";"5.""Redhat VirtIO Ethernet Adapter"" is in disabled status in device manager;";;RedHatEnterpriseLinux7/RHEL7-95914
2887;;;;;;;;;6;"6.in the guest enable the virtio-nic driver:
 Device Manager -->"" Network adapters""--> right click ""Redhat VirtIO Ethernet Adapter"" --> Enable";"6.""Redhat VirtIO Ethernet Adapter"" is in enabled status in device manager;";;RedHatEnterpriseLinux7/RHEL7-95914
2887;;;;;;;;;7;"7.Wait for 5-10 mins , restart guest
 #shutdown -t 0 -r -f";7.the guest could reboot successfully;;RedHatEnterpriseLinux7/RHEL7-95914
2888;RHEL7-95915;[virtual network][virtual-nic-device] check netkvm multi-queue support is enabled - windows only;[virtual network][virtual-nic-device] check netkvm multi-queue support is enabled;Yu Wang (wyu);Critical;Positive;Not Automated;420571;1;"1. Boot guest with:
     -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10";"1.Guest can boot up correctly;";Test Case;RedHatEnterpriseLinux7/RHEL7-95915
2888;;;;;;;;;2;"2.check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";"2.All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95915
2888;;;;;;;;;3;"3.open traceview:
 create New Log Session as https://mojo.redhat.com/docs/DOC-1166671 ";"3.operation can be done correctly
";;RedHatEnterpriseLinux7/RHEL7-95915
2888;;;;;;;;;4;"4.disable netkvm driver in device manager:
 Device Manager -->"" Network adapters""--> right click ""Redhat VirtIO Ethernet Adapter"" --> Disable";"4.Redhat VirtIO Ethernet Adapter"" is in disabled status in device manager;";;RedHatEnterpriseLinux7/RHEL7-95915
2888;;;;;;;;;5;"5.enable netkvm driver in device manager:
 Device Manager -->"" Network adapters""--> right click ""Redhat VirtIO Ethernet Adapter"" --> Enable";"5.Redhat VirtIO Ethernet Adapter"" is in enabled status in device manager;";;RedHatEnterpriseLinux7/RHEL7-95915
2888;;;;;;;;;6;"6.check the traceview output:
 Note:win2008 does NOT support multiqueue.
";"6. When running in the multiqueue mode, prints out the following message, among others:
 [DetermineQueueNumber] Number of hardware queues = 4
     [DetermineQueueNumber] 2 CPUs reported
     [DetermineQueueNumber] 10 MSIs, 4 queues
     [DetermineQueueNumber] 2 CPUs reported
     [DetermineQueueNumber] 10 MSIs, 4 queues
     [DetermineQueueNumber] # of path bundles = 2
";;RedHatEnterpriseLinux7/RHEL7-95915
2889;RHEL7-95916;[virtual network][virtual-nic-device] MSI Check for network device;MSI Check for netkvm;Yu Wang (wyu);Medium;Positive;Not Automated;420569;1;"1. Start VM without assign vectors value
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet0,vhost=on -device virtio-net-pci,netdev=hostnet0,id=net0,mac=00:52:6d:0a:89:a4,bus=pci.0,addr=0x3  -qmp tcp:0:4444,server,nowait
​​";1.guest can boot up correctly;Test Case;RedHatEnterpriseLinux7/RHEL7-95916
2889;;;;;;;;;2;"2.check the default vector value in qemu
 (qemu)info qtree";"2.MSI is defalut enabled(vector value should be positive value)
 dev: virtio-net-pci, id ""xxxx""
         class = 0 (0x0)
         vectors = 3 (0x3)
​​";;RedHatEnterpriseLinux7/RHEL7-95916
2889;;;;;;;;;3;"3.check the irq number in guest
 For linux:
 # lspci -vvv -s $pci_addr_of_Eth_device |grep MSI
 
 For windows:
 device manager -->view-->resources by connection ---> Interrupt request IRQ ---> find the line with ""Redhat VirtIO Etherpad Adapter """;"3.
 For linux:
 # lspci -vvv -s 00:03.0 |grep MSI
 Capabilities: [40] MSI-X: Enable+ Count=3 Masked-
 
 For windows: there are a few lines named Red Hat VirtIO Etherpad Adapte,and there should be  negative number in ( )
 eg :
 (PCI)0x0000000A (-1) Red Hat VirtIO Etherpad Adapter
 (PCI)0x0000000A (-2) Red Hat VirtIO Etherpad Adapter
 (PCI)0x0000000A (-3) Red Hat VirtIO Etherpad Adapter";;RedHatEnterpriseLinux7/RHEL7-95916
2889;;;;;;;;;4;"4.Disable MSI in guest:
 For linux: add ""pci=nomsi"" to the kernel cmdline.
 # vim /etc/grub2.conf
 ...
 linux /vmlinuz-... ... pci=nomsi
 
 For windows: open registry and set HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum\PCI\
 VEN_1AF4&DEV_1001&SUBSYS_00021AF4&REV_00\3&13c0b0c5&0&18\Device Parameters\Interrupt Management\MessageSignaledInterruptProperties\MSISupported to 0";4.registry value can be set correctly;;RedHatEnterpriseLinux7/RHEL7-95916
2889;;;;;;;;;5;"5.reboot guest:
 ctrl+alt+delete --> reboot";5.guest reboot successfully;;RedHatEnterpriseLinux7/RHEL7-95916
2889;;;;;;;;;6;"6.check the irq number in guest
 For linux:
 # cat /proc/cmdline
 # lspci -vvv -s $pci_addr_of_Eth_device |grep MSI
 
 For windows:
 device manager -->view-->resources by connection ---> Interrupt request IRQ ---> find the line with ""Redhat VirtIO Etherpad Adapter """;"6.For linux:
 There is ""pci=nomsi""
 # lspci -vvv -s 00:03.0 |grep MSI
 Capabilities: [40] MSI-X: Enable- Count=3 Masked-

 For windows:
 MSI is disabled,there are only 1 line named Red Hat VirtIO Etherpad Adapter,and there should be positive number in ( )
 eg :
 (PCI)0x0000000A (10) Red Hat VirtIO Etherpad Adapter";;RedHatEnterpriseLinux7/RHEL7-95916
2889;;;;;;;;;7;"7.Enable MSI in guest:
 For linux: delete ""pci=nomsi"" to the kernel cmdline.
 # vim /etc/grub2.conf
 ...
 linux /vmlinuz-... ... pci=nomsi --> delete

 For windows: set the key value(HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum\PCI\
 VEN_1AF4&DEV_1001&SUBSYS_00021AF4&REV_00\3&13c0b0c5&0&18\Device Parameters\Interrupt Management\MessageSignaledInterruptProperties\MSISupported) to 1";7.registry value can be set correctly;;RedHatEnterpriseLinux7/RHEL7-95916
2889;;;;;;;;;8;"8.shutdown guest:
 ctrl+alt+delete --> shutdown
​​";8.guest can shutdown;;RedHatEnterpriseLinux7/RHEL7-95916
2889;;;;;;;;;9;"9.Set vectors=0 to cli in order to disable MSI/MSI-X:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet0,vhost=on -device virtio-net-pci,vectors =0,netdev=hostnet0,id=net0,mac=00:52:6d:0a:89:a4,bus=pci.0,addr=0x3  -qmp tcp:0:4444,server,nowait";9.guest boot up;;RedHatEnterpriseLinux7/RHEL7-95916
2889;;;;;;;;;10;"10. check the irq number in guest
 For linux:
 # cat /proc/cmdline
 # lspci -vvv -s $pci_addr_of_Eth_device |grep MSI
 
 For windows : check the irq number in the device manager:
 computer-->properites-->device manager -->view-->resources by connection ---> Interrupt request IRQ ---> find the line with  ""Redhat VirtIO Etherpad Adapter""";"10.For linux:
 There is no ""pci=nomsi""
 # lspci -vvv -s 00:03.0 |grep MSI
 No output

 For windows:
 MSI is disabled,there are only 1 line named Red Hat VirtIO Etherpad Adapter,and there should be positive number in ( )
 eg :
 (PCI)0x0000000A (10) Red Hat VirtIO Etherpad Adapter";;RedHatEnterpriseLinux7/RHEL7-95916
2890;RHEL7-95917;[virtual network][virtual-nic-device] NetKVMConfig:change values of NetKVM parameters-multi option - virtio-win only;[virtual network][virtual-nic-device]NetKVMConfig:change values of NetKVM parameters-multi option;Yu Wang (wyu);Low;Positive;Not Automated;420567;1;"steps:
 1.Registration in NetSH (instllation):
 1).cmd --> run as administrator
 2).cd path-to-the-netkvm-driver
 3).#rundll32 netkvmco.dll,RegisterNetKVMNetShHelper";"Steps:
 1.after step1,command can be executed successfully;";Test Case;RedHatEnterpriseLinux7/RHEL7-95917
2890;;;;;;;;;2;"2.get the index of virtio-net-pci:
    #netsh netkvm show devices";"2.after step2,get the index 0:
 NetKVM device: PCI\VEN_1AF4&DEV_1000&SUBSYS_00011AF4&REV_00\3&13C0B0C5&0&20
 Index: 0
 Description: Red Hat VirtIO Ethernet Adapter
 Name: Red Hat VirtIO Ethernet Adapter
 Location: PCI bus 0, device 4, function 0
 Number on bus: 4
 Software registry key: SYSTEM\ControlSet001\Control\Class\\{4d36e972-e325
 -11ce-bfc1-08002be10318}\0014
 NetKVM device: PCI\VEN_8086&DEV_100E&SUBSYS_11001AF4&REV_03\3&13C0B0C5&0&30
 Index: 1
 Description: Intel(R) PRO/1000 MT Network Connection
 Name: Intel(R) PRO/1000 MT Network Connection #2
 Location: PCI bus 0, device 6, function 0
 Number on bus: 6
 Software registry key: SYSTEM\ControlSet001\Control\Class\\{4d36e972-e325
 -11ce-bfc1-08002be10318}\0013";;RedHatEnterpriseLinux7/RHEL7-95917
2890;;;;;;;;;3;"3.Read NetKVM parameter value
 # netsh netkvm _getparam_ 0 param=*TCPChecksumOffloadIPv4";"3.after step3,get the parameter value as:
 *TCPChecksumOffloadIPv4=0";;RedHatEnterpriseLinux7/RHEL7-95917
2890;;;;;;;;;4;"4.Modify NetKVM parameter value
 #netsh netkvm _setparam_ 0 *TCPChecksumOffloadIPv4 3 or
 #netsh netkvm _setparam_ 0 *TCPChecksumOffloadIPv4 2 or
 #netsh netkvm _setparam_ 0 *TCPChecksumOffloadIPv4 1";"4.after step5,*TCPChecksumOffloadIPv4=3/2/1,
 in device manager it shows ""Rx &
 Tx enabled""/""Rx enabled""/""Tx enabled""";;RedHatEnterpriseLinux7/RHEL7-95917
2890;;;;;;;;;5;"5.check the value whether changed:
 1).netsh netkvm _getparam_ 0 param=*TCPChecksumOffloadIPv4
 2).from device manager,Redhat Virtio Ethernet Adapter--->
 properties--->Advanced--->TCP Checksum Offload(IPv4),
 check the value";"5.no error prompts
​​";;RedHatEnterpriseLinux7/RHEL7-95917
2890;;;;;;;;;6;"6.repeat step 3,4,5 with parameter:
 *IPChecksumOffloadIPv4,Offload.RXCS,Offload
 .TxChecksum,Offload.TXLSO,*PriorityVLANTag,
 TCPChecksumOffloadIPv4,*TCPChecksumOffloadIPv6,
 *UDPChecksumOffloadIPv4,*UDPChecksumOffloadIPv6";6.after step6,those parameters can be changed successfully.;;RedHatEnterpriseLinux7/RHEL7-95917
2891;RHEL7-95918;[virtual network][virtual-nic-device] NetKVMConfig:change values of NetKVM parameters-modify value directly - virtio-win only;[virtual network][virtual-nic-device] NetKVMConfig:change values of NetKVM parameters-modify value directly;Yu Wang (wyu);Low;Positive;Not Automated;420565;1;"steps:
 1.Registration in NetSH (instllation):
   1).cmd --> run as administrator
   2).cd path-to-the-netkvm-driver
   3).rundll32 netkvmco.dll,RegisterNetKVMNetShHelper
 
 
 
 
 
​​";"Steps:
 1.after step1,command can be executed successfully;";Test Case;RedHatEnterpriseLinux7/RHEL7-95918
2891;;;;;;;;;2;"2.get the index of virtio-net-pci:
 # netsh netkvm show devices";"2.after step2,get the index 0:
 NetKVM device: PCI\VEN_1AF4&DEV_1000&SUBSYS_00011AF4&REV_00\3&13C0B0C5&0&20
 Index: 0
 Description: Red Hat VirtIO Ethernet Adapter
 Name: Red Hat VirtIO Ethernet Adapter
 Location: PCI bus 0, device 4, function 0
 Number on bus: 4
 Software registry key: SYSTEM\ControlSet001\Control\Class\\{4d36e972-e325
 -11ce-bfc1-08002be10318}\0014
 NetKVM device: PCI\VEN_8086&DEV_100E&SUBSYS_11001AF4&REV_03\3&13C0B0C5&0&30
 Index: 1
 Description: Intel(R) PRO/1000 MT Network Connection
 Name: Intel(R) PRO/1000 MT Network Connection #2
 Location: PCI bus 0, device 6, function 0
 Number on bus: 6
 Software registry key: SYSTEM\ControlSet001\Control\Class\\{4d36e972-e325
 -11ce-bfc1-08002be10318}\0013";;RedHatEnterpriseLinux7/RHEL7-95918
2891;;;;;;;;;3;"3.Read NetKVM parameter value
 #netsh netkvm getparam 0 param=RxCapacity";3.after step3,get the parameter value as:RxCapacity=1024;;RedHatEnterpriseLinux7/RHEL7-95918
2891;;;;;;;;;4;"4.Modify NetKVM parameter value
 #netsh netkvm setparam 0 RxCapacity 256";"4.no error prompts
​​";;RedHatEnterpriseLinux7/RHEL7-95918
2891;;;;;;;;;5;"5.check the value whether changed:
 1).netsh netkvm getparam 0 param=RxCapacity
 2).from device manager,Redhat Virtio Ethernet Adapter--->
 properties--->Advanced--->init.MaxRxBuffers,check the value";5.RxCapacity=256;;RedHatEnterpriseLinux7/RHEL7-95918
2891;;;;;;;;;6;"6.repeat step 3,4,5 with parameter:MTU,DebugLevel,LogStatistics,*NumRssQueues
 ,NumberOfHandledRXPackersInDPC,RxCapacity,TxCapacity,ConnectRate";6.after step6,those parameters can be changed successfully.;;RedHatEnterpriseLinux7/RHEL7-95918
2892;RHEL7-95919;[virtual network][virtual-nic-device] NTttcp test - windows only;[virtual network][virtual-nic-device] NTttcp test;Yu Wang (wyu);Critical;Positive;Not Automated;;1;"1.Boot two guests with:
     -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10";1.Guest can boot up correctly;Test Case;RedHatEnterpriseLinux7/RHEL7-95919
2892;;;;;;;;;2;"2.check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";2.Driver verifier can be enabled;;RedHatEnterpriseLinux7/RHEL7-95919
2892;;;;;;;;;3;"3.Install  NTttcp program from NTttcp.msi
 After completing the installation, go to the installation directory, and make two copies of ntttcp.exe:
 ntttcpr.exe --- use for receiving traffic 
 ntttcps.exe --- use for sending traffic 
​​";"3.ntttcp can be installed correctly
​​";;RedHatEnterpriseLinux7/RHEL7-95919
2892;;;;;;;;;4;"4.run ntttcpr.exe on the first guest:
 # ntttcpr.exe -m 4,*,ip_of_the_second_guest
​​";"4.no error occurs
​​";;RedHatEnterpriseLinux7/RHEL7-95919
2892;;;;;;;;;5;"5.run ntttcps.exe on the seond guest:
 # ntttcps.exe -m 4,*,ip_of_the_first_guest";"5.connection can established,message as following:
 Network activity progressing...
​​";;RedHatEnterpriseLinux7/RHEL7-95919
2892;;;;;;;;;6;"6.after a while,check the status of both guest
​​";"the transfer data should be display as following:
 
 Copyright Version 3.0 
 Network activity progressing... 
  
  
 Thread Realtime(s) Throughput(KB/s) Throughput(Mbit/s) Avg Bytes per Completion 
 ====== =========== ================ ================== ======================== 
  
      0      58.329       23010.463            184.084                65536.000 
      1      37.969       35349.292            282.794                65536.000 
      2      58.625       22894.282            183.154                65536.000 
      3      36.719       36552.664            292.421                65536.000 
  
  
 Total Bytes(MEG) Realtime(s) Average Frame Size Total Throughput(Mbit/s) 
 ================ =========== ================== ======================== 
  
      5368.709120      58.625           1456.356                  942.454 
  
  
 Total Buffers Throughput(Buffers/s) Pkts(sent/intr) Intr(count/s) Cycles/Byte 
 ============= ===================== =============== ============= =========== 
  
    105383.573              1797.588               7       8099.46         1.6 
  
  
 Packets Sent Packets Received Total Retransmits Total Errors Avg. CPU % 
 ============ ================ ================= ============ ========== 
  
      3686400           153706                 0            0       2.96";;RedHatEnterpriseLinux7/RHEL7-95919
2892;;;;;;;;;7;7.switch NTttcp sender and receiver,repeat step3~step6;"same result from step3~6
​​";;RedHatEnterpriseLinux7/RHEL7-95919
2893;RHEL7-95920;[virtual network][virtual-nic-device] Download/upload files via ipv6;Download/upload files via ipv6;Yu Wang (wyu);High;Positive;Not Automated;;1;"1.boot guest with netkvm:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
​​";"guest boot up normally
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-95920
2893;;;;;;;;;2;"2.Only for windows: keep all netkvm parameters as default value,check the value of ""TCP/UDP checksum offload(IPv6)"":
 For windows:
 Opening Device Manager and clicking Network adapters--> right-clicking Properties of Redhat VirtIO Ethernet Adapter--> Advanced--> TCP/UDP checksum offload(IPv6) 
​​";"TCP/UDP checksum offload(IPv6) should be ""Rx/Tx enabled""
​​";;RedHatEnterpriseLinux7/RHEL7-95920
2893;;;;;;;;;3;"3.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings  ";"drvier verifier can be enabled successfully,cmd output should include：     Verified drivers:     netkvm.sys
​​";;RedHatEnterpriseLinux7/RHEL7-95920
2893;;;;;;;;;4;"4.check whether guest get ipv6 address
 For linux: 
 In guest # ifconfig eth0 add 2001::3/64 up
 In host # ifconfig switch add 2001::2/64 up
            # ping6 2001::3 -I switch
 For windows: # ipconfig /all
​​";"guest got ipv6 address:
 Link-local IPv6 Address . . . . . : fe80::15de:ae98:32d4:fb41%4
​​";;RedHatEnterpriseLinux7/RHEL7-95920
2893;;;;;;;;;5;5.Only for windows: install winscp software;"winscp tool installed
​​";;RedHatEnterpriseLinux7/RHEL7-95920
2893;;;;;;;;;6;"6. use winscp download a 3G file from host to guest via ipv6
 For linux:
 scp -6 [ipv6_ip]:/path/file .
 eg. scp -6 [2001::2]:/home/file .
 For windows:
 how to connect to host via ipv6:
 winscp ""hostname"" field - host ipv6 address
​​";"guest can download files normally
​​";;RedHatEnterpriseLinux7/RHEL7-95920
2893;;;;;;;;;7;"7. use winscp uploading a 3G file to host via ipv6
 For linux:
 scp -6 file [ipv6_ip]:/path/file:/path
 eg. scp -6 file [2001::2]:/home
 
 For windows:
    how to connect to host via ipv6:
    winscp ""hostname"" field - host ipv6 address";"guest can upload files successfully
​​";;RedHatEnterpriseLinux7/RHEL7-95920
2893;;;;;;;;;8;"8. Only for windows: change TCP/UDP checksum offload(IPv6) to ""Rx enabled"" and repeat step6 and step7
​​";"guest can download/upload files correctly
​​";;RedHatEnterpriseLinux7/RHEL7-95920
2894;RHEL7-95921;[virtual network][virtual-nic-device] virtio-net works normally when indirect_desc=on/off;netkvm works normally when indirect_desc=on/off;Yu Wang (wyu);Medium;Positive;Not Automated;;1;"1.boot guest with netkvm:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,indirect_desc=on
​​";"guest boot up correctly
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-95921
2894;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95921
2894;;;;;;;;;3;"3.run netperf test in guest(guest run as netperf client)
 for linux: netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024
 for windows: for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netperf_server_ip -c -C -t %j -f m -l 180 -- -m %i done done
​​";"netperf test can run normally:
 TCP STREAM TEST from 0.0.0.0 () port 0 AF_INET to 10.66.10.110 () port 0 AF_INET : histogram : interval : demo
 Recv   Send    Send                           
 Socket Socket  Message  Elapsed               
 Size   Size    Size     Time     Throughput   
 bytes  bytes   bytes    secs.    10^6bits/sec   
  
  87380  65536  65536    10.22      98.30
​​";;RedHatEnterpriseLinux7/RHEL7-95921
2894;;;;;;;;;4;"4.shutdown guest and boot guest again with:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,indirect_desc=off
​​";guest boot up correctly;;RedHatEnterpriseLinux7/RHEL7-95921
2894;;;;;;;;;5;"5.repeat step3
​​";Guest did not crash,netperf run correctly without any error,no BSOD;;RedHatEnterpriseLinux7/RHEL7-95921
2895;RHEL7-95922;[virtual network][virtual-nic-device] virtio-net works normally when mrg_rxbuf=on/off;netkvm works normally when mrg_rxbuf=off;Yu Wang (wyu);Medium;Positive;Not Automated;;1;"1.boot guest with:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mrg_rxbuf=on
​​";guest boot up correctly;Test Case;RedHatEnterpriseLinux7/RHEL7-95922
2895;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95922
2895;;;;;;;;;3;"3.run netperf test in guest(guest run as netperf client)
 for linux: netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024
 for windows: for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netperf_server_ip -c -C -t %j -f m -l 180 -- -m %i done done
​​";"netperf test can run normally:
 TCP STREAM TEST from 0.0.0.0 () port 0 AF_INET to 10.66.10.110 () port 0 AF_INET : histogram : interval : demo
 Recv   Send    Send                           
 Socket Socket  Message  Elapsed               
 Size   Size    Size     Time     Throughput   
 bytes  bytes   bytes    secs.    10^6bits/sec   
  
  87380  65536  65536    10.22      98.30 ";;RedHatEnterpriseLinux7/RHEL7-95922
2895;;;;;;;;;4;"4.shutdown guest and boot guest again with:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mrg_rxbuf=off";guest boot up correctly;;RedHatEnterpriseLinux7/RHEL7-95922
2895;;;;;;;;;5;"5.repeat step3
​​";Guest did not crash,netperf run correctly without any error,no BSOD;;RedHatEnterpriseLinux7/RHEL7-95922
2896;RHEL7-95923;[virtual network][virtual-nic-device] guest work well when boot multi network cards;guest work well when boot multi network cards;Yu Wang (wyu);Medium;Positive;Automated;;1;" 1.boot guest with 29 netkvm cards:
 -netdev tap,id=hostnet1,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet1,id=virtio-net-pci1,mac=4e:63:28:bc:b1:01 \ 
 -netdev tap,id=hostnet2,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet2,id=virtio-net-pci2,mac=4e:63:28:bc:b1:02 \ 
 -netdev tap,id=hostnet3,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet3,id=virtio-net-pci3,mac=4e:63:28:bc:b1:03 \ 
 -netdev tap,id=hostnet4,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet4,id=virtio-net-pci4,mac=4e:63:28:bc:b1:04 \ 
 -netdev tap,id=hostnet5,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet5,id=virtio-net-pci5,mac=4e:63:28:bc:b1:05 \ 
 -netdev tap,id=hostnet6,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet6,id=virtio-net-pci6,mac=4e:63:28:bc:b1:06 \ 
 -netdev tap,id=hostnet7,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet7,id=virtio-net-pci7,mac=4e:63:28:bc:b1:07 \ 
 -netdev tap,id=hostnet8,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet8,id=virtio-net-pci8,mac=4e:63:28:bc:b1:08 \ 
 -netdev tap,id=hostnet9,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet9,id=virtio-net-pci9,mac=4e:63:28:bc:b1:09 \ 
 -netdev tap,id=hostnet10,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet10,id=virtio-net-pci10,mac=4e:63:28:bc:b1:0A \ 
 -netdev tap,id=hostnet11,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet11,id=virtio-net-pci11,mac=4e:63:28:bc:b1:0B \ 
 -netdev tap,id=hostnet12,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet12,id=virtio-net-pci12,mac=4e:63:28:bc:b1:0C \ 
 -netdev tap,id=hostnet13,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet13,id=virtio-net-pci13,mac=4e:63:28:bc:b1:0D \ 
 -netdev tap,id=hostnet14,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet14,id=virtio-net-pci14,mac=4e:63:28:bc:b1:0E \ 
 -netdev tap,id=hostnet15,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet15,id=virtio-net-pci15,mac=4e:63:28:bc:b1:0F \ 
 -netdev tap,id=hostnet16,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet16,id=virtio-net-pci16,mac=4e:63:28:bc:b1:10 \ 
 -netdev tap,id=hostnet17,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet17,id=virtio-net-pci17,mac=4e:63:28:bc:b1:11 \ 
 -netdev tap,id=hostnet18,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet18,id=virtio-net-pci18,mac=4e:63:28:bc:b1:12 \ 
 -netdev tap,id=hostnet19,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet19,id=virtio-net-pci19,mac=4e:63:28:bc:b1:13 \ 
 -netdev tap,id=hostnet20,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet20,id=virtio-net-pci20,mac=4e:63:28:bc:b1:14 \ 
 -netdev tap,id=hostnet21,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet21,id=virtio-net-pci21,mac=4e:63:28:bc:b1:15 \ 
 -netdev tap,id=hostnet22,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet22,id=virtio-net-pci22,mac=4e:63:28:bc:b1:16 \ 
 -netdev tap,id=hostnet23,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet23,id=virtio-net-pci23,mac=4e:63:28:bc:b1:17 \ 
 -netdev tap,id=hostnet24,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet24,id=virtio-net-pci24,mac=4e:63:28:bc:b1:18 \ 
 -netdev tap,id=hostnet25,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet25,id=virtio-net-pci25,mac=4e:63:28:bc:b1:19 \ 
 -netdev tap,id=hostnet26,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet26,id=virtio-net-pci26,mac=4e:63:28:bc:b1:1A \ 
 -netdev tap,id=hostnet27,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet27,id=virtio-net-pci27,mac=4e:63:28:bc:b1:1B \ 
 -netdev tap,id=hostnet28,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet28,id=virtio-net-pci28,mac=4e:63:28:bc:b1:1C \
​​"; guest boot up correctly;Test Case;RedHatEnterpriseLinux7/RHEL7-95923
2896;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95923
2896;;;;;;;;;3;"3.check all nics can get ip:
 For linux: # ifconfig
 For windows:   # ipconfig
​​";"3.all netkvm cards can get ip
​​";;RedHatEnterpriseLinux7/RHEL7-95923
2897;RHEL7-95924;[virtual network][virtual-nic-device] CTRL_VLAN check of virtio-net-pci;CTRL_VLAN check of virtio-net-pci;Yu Wang (wyu);Medium;Positive;Automated;;1;"1.boot guest with:
 -netdev tap,id=hostnet0,vhost=on,vhostforce=off -device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:83:66:77:88:66,bus=pci.0,addr=0x3,status=on,ctrl_vlan=on
​​"; guest boot up correctly;Test Case;RedHatEnterpriseLinux7/RHEL7-95924
2897;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys"" ";;RedHatEnterpriseLinux7/RHEL7-95924
2897;;;;;;;;;3;"3.Check vlan table in rx-filter information when guest starts.
 { ""execute"": ""query-rx-filter"", ""arguments"": { ""name"": ""net0"" } }";"the vlan-table is [0] for RHEL7.6 guest, but vlan-table is [] for RHEL8.0 guest.
 For window it should be [0-4095]
​​";;RedHatEnterpriseLinux7/RHEL7-95924
2897;;;;;;;;;4;"4.set vlan id =1 in device manager:
 For linux:
 # ip link add link em1 name em1.1 type vlan id 1; ip link set em1.1 address 00:52:11:36:3f:00 up ;ifconfig em1.1 192.168.10.1/24 up
 For windows:   
 Device manager --- > Red Hat Virtio Ethernet Adpater --> properities --- > Advanced --> VLan ID --> set it as 1
​​";"Vlan ID can set correctly
​​";;RedHatEnterpriseLinux7/RHEL7-95924
2897;;;;;;;;;5;"5.Check vlan table in rx-filter information when guest starts.
 { ""execute"": ""query-rx-filter"", ""arguments"": { ""name"": ""net0"" } }";"vlan table is 1:
 {""return"": [{""promiscuous"": false, ""name"": ""net0"", ""main-mac"": ""00:52:54:46:f0:ed"", ""unicast"": ""normal"", ""vlan"": ""normal"", ""vlan-table"": [1, 0], ""unicast-table"": [], ""multicast"": ""normal"", ""multicast-overflow"": false, ""unicast-overflow"": false, ""multicast-table"": [""01:00:5e:00:00:fc"", ""01:00:5e:00:00:fb"", ""33:33:00:00:00:fb"", ""33:33:ff:67:6f:a0"", ""33:33:00:01:00:03"", ""01:00:5e:00:00:01"", ""33:33:00:00:00:01""], ""broadcast-allowed"": false}]}
 
​​";;RedHatEnterpriseLinux7/RHEL7-95924
2897;;;;;;;;;6;"6.shutdown guest and boot guest with:
 -netdev tap,id=hostnet0,vhost=on,vhostforce=off -device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:83:66:77:88:66,bus=pci.0,addr=0x3,status=on,ctrl_vlan=off
​​";guest boot up correctly;;RedHatEnterpriseLinux7/RHEL7-95924
2897;;;;;;;;;7;"7.Check vlan table in rx-filter information when guest starts.
 { ""execute"": ""query-rx-filter"", ""arguments"": { ""name"": ""net0"" } }";the vlan-table is filled from 0~4095;;RedHatEnterpriseLinux7/RHEL7-95924
2898;RHEL7-95926;[virtual network][virtual-nic-device] Check guest network link status of virtio nic with status=on;Check guest network link status of virtio nic with status=on;Yu Wang (wyu);Medium;Positive;Automated;;1;"1.Boot a guest of virtio-net-pci with status=on and vhost=on:
 -device virtio-net-pci,netdev=hostnet0,mac=9a:e8:e9:ea:eb:ec,id=net0,status=on
 -netdev tap,id=hostnet0,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \";guest boot up correctly;Test Case;RedHatEnterpriseLinux7/RHEL7-95926
2898;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95926
2898;;;;;;;;;3;"3.check network connection status in guest:
 for linux:cat /sys/class/net/eno1/operstate
 for windows: In the right-down corner of windows,click the network icon
​​";"for linux: output is ""up""
 for windows: there is no red cross on the icon and it shows ""Connected""";;RedHatEnterpriseLinux7/RHEL7-95926
2898;;;;;;;;;4;"4.Inside guest, ping out from guest, and check link status by:
 # ping www.baidu.com";"can ping www.baidu.com successfully, no pkg lost.
​​";;RedHatEnterpriseLinux7/RHEL7-95926
2898;;;;;;;;;5;"5. Set network link down.
 { ""execute"": ""set_link"", ""arguments"": { ""name"": ""net0"", ""up"": false } }
";"qmp return no error msg:
 {""return"": {}}
​​";;RedHatEnterpriseLinux7/RHEL7-95926
2898;;;;;;;;;6;"6.check network connection status in guest:
 For linux:cat /sys/class/net/eno1/operstate
 For windows: In the right-down corner of windows,click the network icon";"for linux: output is ""down""
 for windows: here is a red cross on the icon and it shows ""Not Connected"" 
​​";;RedHatEnterpriseLinux7/RHEL7-95926
2898;;;;;;;;;7;"7.Inside guest, ping out from guest, and check link status by:
 # ping www.baidu.com
​​";the network status is down, can not ping out;;RedHatEnterpriseLinux7/RHEL7-95926
2898;;;;;;;;;8;"8.Reboot guest inside
 # ctrl+alt+del --> reboot
";"guest reboot correctly
​​";;RedHatEnterpriseLinux7/RHEL7-95926
2898;;;;;;;;;9;"9.Inside guest, ping out from guest, and check link status by:
 # ping www.baidu.com";the network status is down, can not ping out;;RedHatEnterpriseLinux7/RHEL7-95926
2898;;;;;;;;;10;"10.Reboot guest via qemu monitor
 (qemu) system_reset";guest reboot correctly;;RedHatEnterpriseLinux7/RHEL7-95926
2898;;;;;;;;;11;"11.Inside guest, ping out from guest, and check link status by:
 # ping www.baidu.com";the network status is down, can not ping out;;RedHatEnterpriseLinux7/RHEL7-95926
2898;;;;;;;;;12;"12.Under qemu monitor, set network link up.
 { ""execute"": ""set_link"", ""arguments"": { ""name"": ""net0"", ""up"":true}}";"qmp return no error msg:
 {""return"": {}}
​​";;RedHatEnterpriseLinux7/RHEL7-95926
2898;;;;;;;;;13;"13.check network connection status in guest:
 for linux:cat /sys/class/net/eno1/operstate
 for windows: In the right-down corner of windows,click the network icon";"for linux: output is ""up""
 for windows: there is no red cross on the icon and it shows ""Connected""";;RedHatEnterpriseLinux7/RHEL7-95926
2898;;;;;;;;;14;"14 .Inside guest, ping out from guest, and check link status by:
 # ping www.baidu.com";can ping www.baidu.com successfully, no pkg lost.;;RedHatEnterpriseLinux7/RHEL7-95926
2898;;;;;;;;;15;"15. repeat step 3-14, change device id  to netdev id
 eg. { ""execute"": ""set_link"", ""arguments"": { ""name"": ""hostnet0"", ""up"":true}}";the same as each expected results;;RedHatEnterpriseLinux7/RHEL7-95926
2899;RHEL7-95927;[virtual network][virtual-nic-device] MQ\Control Queue\MSI test - only for multiqueue;MQ\Control Queue\MSI test;Yu Wang (wyu);High;Positive;Not Automated;;1;"1.start guest with netkvm device with following matrix:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,bus=pci.0,id=net1,mac=00:52:6e:2d:90:b6,mq=on/off,vectors=10,ctrl_vq=on/off -smp 1/2/64";"guest can boot up
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-95927
2899;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95927
2899;;;;;;;;;3;"3.ping between guest and extenal host
      from external host to guest: ping -c 10 $guest_ip
      from guest to external host: -windows: ping -n 10 $external-host_ip    
                                              -linux: ping -c 10 $external-host_ip    ";the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-95927
2900;RHEL7-95928;[virtual network][virtual-nic-device] tcpreplay test;tcpreplay test;Yu Wang (wyu);Medium;Positive;Not Automated;;1;"1.boot guest with netkvm device:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
​​";guest can boot up;Test Case;RedHatEnterpriseLinux7/RHEL7-95928
2900;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95928
2900;;;;;;;;;3;"3.run tcpreplay on host:
 # tcpreplay -i switch 2603.pcap
(2603.pcap can copy from 10.73.225.151 or
download link:https://bugzilla.redhat.com/attachment.cgi?id=1160431 )

you can find tcpreplay-4.2.5-1.el7.x86_64.rpm on 10.73.225.151

";"host display as following,no bsod in guest
 Actual: 1 packets (426 bytes) sent in 0.020099 seconds.
 Rated: 21100.0 Bps, 0.168 Mbps, 49.75 pps
 Statistics for network device: switch
     Successful packets:        1
     Failed packets:            0
     Truncated packets:         0
     Retried packets (ENOBUFS): 0
     Retried packets (EAGAIN):  0
​​";;RedHatEnterpriseLinux7/RHEL7-95928
2901;RHEL7-95929;[virtual network][virtual-nic-device] memory leak check;memory leak check;Yu Wang (wyu);Medium;Positive;Not Automated;;1;"1.boot guest with:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet0,vhost=on\
 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=00:52:11:36:3f:00,bus=pci.0,mq=on
​​";guest can boot up;Test Case;RedHatEnterpriseLinux7/RHEL7-95929
2901;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95929
2901;;;;;;;;;3;"3.use following script to hotlug/hot-unplug netkvm device at least 100 times in Windows:
 let i=0
 exec 3<>/dev/tcp/localhost/4444 #note modify this to qmp port
 echo -e ""{ 'execute': 'qmp_capabilities' }"" >&3
 read response <&3
 echo $response
 while [ $i -lt 100 ]
 do
     echo -e ""{ 'execute': 'device_del', 'arguments': {'id': 'net0' }}"">&3 ;
     sleep 3 ;
     read response <&3 ;
     echo ""$i: $response""
     echo -e ""{ 'execute': 'netdev_del', 'arguments': {'id': 'hostnet0' }}"">&3 ;
     sleep 3 ;
     read response <&3 ;
     echo ""$i: $response""
     echo -e ""{'execute':'netdev_add','arguments':{'type':'tap','id':'hostnet0','vhost':'on','script':'/etc/qemu-ifup'}}"">&3 ;
     sleep 3 ;
     read response <&3
     echo ""$i: $response""
     echo -e ""{'execute':'device_add','arguments':{'driver':'virtio-net-pci','id':'net0','mac':'00:1a:4a:42:0b:01','netdev':'hostnet0'}}"">&3 ;
     sleep 3 ;
     read response <&3
     echo ""$i: $response""
     let i=$i+1
 done";"netkvm device/vlan devices can be hot-unplug and plug correctly
​​";;RedHatEnterpriseLinux7/RHEL7-95929
2901;;;;;;;;;4;"4.during step 3,run
 For linux:
 #free -m
 For windows:
 Poolmon.exe in guest:
 #poolmon.exe /iMdl";"For linux:
 the changes for free memory and cache are not too big
 For windows:
 The Diff should NOT too big,for example:
 Tag Type Allocs Frees Diff Bytes Per Alloc
 Mdl Nonp 40665 14171 26494 5567312 208
 In this case diff value 26494 is too big,memory leak detected
​​";;RedHatEnterpriseLinux7/RHEL7-95929
2902;RHEL7-95930;[virtual network][virtual-nic-device] expose host MTU to guest;"host_mtu check
https://bugzilla.redhat.com/show_bug.cgi?id=1366919 ";Yu Wang (wyu);High;Positive;Automated;;1;"1.Boot a guest of virtio-net-pci with host_mtu=4000:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:20:76:1a:4d,bus=pci.0,host_mtu=4000";guest boot up correctly;Test Case;RedHatEnterpriseLinux7/RHEL7-95930
2902;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95930
2902;;;;;;;;;3;"3.Check netkvm's interface in cmd:
 For linux: 
 # systemctl disable NetworkManager 
 reboot this guest
 # ifconfig eth0
 For windows: # netsh interface ipv4 show subinterfaces
​​";"twindows: he Net-KVM interface's MTU is the same as host_mtu:4000
 
 linux: mtu of eth0 should be 4000
​​";;RedHatEnterpriseLinux7/RHEL7-95930
2902;;;;;;;;;4;"4. set mtu in host
 # ifconfig tap0 mtu 4000
 # ifconfig eno1 mtu 4000
​​";​​;;RedHatEnterpriseLinux7/RHEL7-95930
2902;;;;;;;;;5;"5. ping between guest and extenal host(for macvtap backend)
    from local host to guest: # ping -c 10 -s 3972 -M do $guest_ip
    from guest to local host: 
    linux: ping -c 10 -s 3972 -M do $local-host_ip
    windows: # ping -n 10 -l 3972  -f $local-host_ip";5 the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-95930
2903;RHEL7-95931;[virtual network][virtual-nic-device] network works normally in vlan -- windows only;[virtio-win][netkvm] network works normally in vlan;Yu Wang (wyu);Medium;Positive;Automated;;1;"1.boot guest A with virtio-net-pci:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet0,vhost=on \
 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=00:52:11:36:3f:00,bus=pci.0
​​";"guest A start normally
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-95931
2903;;;;;;;;;2;"2.Set guest A vlan id to 900:
 Device manager --> RedHat VirtIO Ethernet Adapter --> Properties-->Advanced-->Vlan ID-->set to 900 and click ok
​​";"Vlan is set correctly,guest can get ip 169.254.xx.xx
​​";;RedHatEnterpriseLinux7/RHEL7-95931
2903;;;;;;;;;3;"3.boot guest B with virtio-net-pci:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet0,vhost=on \
 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=00:52:11:36:3f:98,bus=pci.0
​​";guest B start normally;;RedHatEnterpriseLinux7/RHEL7-95931
2903;;;;;;;;;4;"4.Set guest B vlan id to 900:
    steps same as step2";Vlan is set correctly;;RedHatEnterpriseLinux7/RHEL7-95931
2903;;;;;;;;;5;"5.From guest A,ping guest B:
 # ping ip_of_guestB -t
​​";"no timeout
​​";;RedHatEnterpriseLinux7/RHEL7-95931
2904;RHEL7-95934;[virtual network][virtual-nic-device] virtio-net multi-queue enablement by default -- only for linux;"Boot guest w/ vhost=on and mq, if x-vcpu >= y-mq(in qemu command line) then y mqs should be auto-configured after guest boot up; if x-vcpu <  y-mq then x mqs should be auto-configured after guest boot up.
 https://bugzilla.redhat.com/show_bug.cgi?id=1396578";Yu Wang (wyu);High;Positive;Not Automated;;1;"1.Boot a guest with multiple queues and vhost=on
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=18,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=8 \
 -smp 4
 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=18,mq=on \
 -netdev tap,id=dev1,vhost=on,fds=$fd1:$fd2:$fd3:$fd4  $fd1<>/dev/tap$index $fd2<>/dev/tap$index $fd3<>/dev/tap$index $fd4<>/dev/tap$index \
 -smp 4";guest boot up successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95934
2904;;;;;;;;;2;"2.In guest, check the queues (eth0 is the interface name, modify it to you real interface name)
 # ethtool -l eth0";"# ethtool -l eth0
Channel parameters for eth0:
Pre-set maximums:
RX:             0
TX:             0
Other:          0
Combined:       8
Current hardware settings:
RX:             0
TX:             0
Other:          0
Combined:       4

Checkpoint: Pre-set maximums ""Combined"" = queues in cmd line;
Current hardware settings ""Combined"" = smp in cmd line
smp < queues";;RedHatEnterpriseLinux7/RHEL7-95934
2904;;;;;;;;;3;3. #ethtool -L eth0 combined 8;"# ethtool -l eth0
Channel parameters for eth0:
Pre-set maximums:
RX:             0
TX:             0
Other:          0
Combined:       8
Current hardware settings:
RX:             0
TX:             0
Other:          0
Combined:       8

Checkpoint: Current hardware settings ""Combined"" changed to 8.";;RedHatEnterpriseLinux7/RHEL7-95934
2904;;;;;;;;;4;4. poweroff guest;"
​​";;RedHatEnterpriseLinux7/RHEL7-95934
2904;;;;;;;;;5;"5. Boot a guest with multiple queues and vhost=on
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=6,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=2 \
 -smp 4
 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=6,mq=on \
 -netdev tap,id=dev1,vhost=on,fds=$fd1:$fd2:$fd3:$fd4  $fd1<>/dev/tap$index $fd2<>/dev/tap$index $fd3<>/dev/tap$index $fd4<>/dev/tap$index \
 -smp 4";"
​​";;RedHatEnterpriseLinux7/RHEL7-95934
2904;;;;;;;;;6;"6.In guest, check the queues (eth0 is the interface name, modify it to you real interface name)
 # ethtool -l eth0";"# ethtool -l eth0
Channel parameters for eth0:
Pre-set maximums:
RX:             0
TX:             0
Other:          0
Combined:       2
Current hardware settings:
RX:             0
TX:             0
Other:          0
Combined:       2

Checkpoint: Pre-set maximums ""Combined"" = queues in cmd line;
Current hardware settings ""Combined"" = smp in cmd line
smp > queues";;RedHatEnterpriseLinux7/RHEL7-95934
2904;;;;;;;;;7;7. #ethtool -L eth0 combined 4;"# ethtool -L eth0 combined 4
Cannot set device channel
 parameters: Invalid argument

Checkpoint: Pre-set maximums is the range valid. 4 is out of [0, 2], should not set successfully.";;RedHatEnterpriseLinux7/RHEL7-95934
2904;;;;;;;;;8;"8. Boot a guest with multiple queues and vhost=on
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=4 \
 -smp 4
 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,fds=$fd1:$fd2:$fd3:$fd4  $fd1<>/dev/tap$index $fd2<>/dev/tap$index $fd3<>/dev/tap$index $fd4<>/dev/tap$index \
 -smp 4";"
​​";;RedHatEnterpriseLinux7/RHEL7-95934
2904;;;;;;;;;9;"9. in guest
 # ethtool -l eth0
​​";"# ethtool -l eth0
 Channel parameters for eth0:
 Pre-set maximums:
 RX:        0
 TX:        0
 Other:        0
 Combined:    4
 Current hardware settings:
 RX:        0
 TX:        0
 Other:        0
 Combined:    4
 
 Checkpoint: Pre-set maximums ""Combined"" = queues in cmd line;
 Current hardware settings ""Combined"" = smp in cmd line
 smp = queues";;RedHatEnterpriseLinux7/RHEL7-95934
2904;;;;;;;;;10;"10. # ethtool -L eth0 combined 2
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-95934
2904;;;;;;;;;11;"11. # ethtool -l eth0
​​";"# ethtool -l eth0
 Channel parameters for eth0:
 Pre-set maximums:
 RX:        0
 TX:        0
 Other:        0
 Combined:    4
 Current hardware settings:
 RX:        0
 TX:        0
 Other:        0
 Combined:    2
 
 Checkpoint: values smaller Pre-set maximums ""Combined"" can be set succesfully, otherwise, the cmd should fail.
​​";;RedHatEnterpriseLinux7/RHEL7-95934
2905;RHEL7-95936;[virtual network][virtual-nic-device] Check vhost could be enabled when msi-x is disabled (vhostforce=on/off）;vhost is no longer disabled when guest does not use MSI-X. The vhostforce flag is no longer required.;Yu Wang (wyu);Medium;Positive;Not Automated;;1;" 1.Boot a guest w/ vhost=on over virtio-net-pci.
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \
 -qmp tcp:0:4444,server,nowait

 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd,vhost=on \
 -qmp tcp:0:4444,server,nowait";"1. Guest boot up successfully.
";Test Case;RedHatEnterpriseLinux7/RHEL7-95936
2905;;;;;;;;;2;"2. ping an external host from guest
 # ping $IP_external_host -c 10";2. network works normally, ping an external host from guest, to check the network status, no pkg lost.;;RedHatEnterpriseLinux7/RHEL7-95936
2905;;;;;;;;;3;"3.Confirm guest enabled msi inside guest.
 For linux:
 # cat /proc/cmdline
 # lspci -vvv -s $pci_addr_of_Eth_device |grep MSI

 For windows:
 device manager -->view-->resources by connection ---> Interrupt request IRQ ---> find the line with ""Redhat VirtIO Etherpad Adapter """;"3.
 For linux:
 # lspci -vvv -s 00:03.0 |grep MSI
 Capabilities: [40] MSI-X: Enable+ Count=3 Masked-

 For windows: there are a few lines named Red Hat VirtIO Etherpad Adapte,and there should be  negative number in ( )
 eg :
 (PCI)0x0000000A (-4) Red Hat VirtIO Etherpad Adapter
 (PCI)0x0000000A (-5) Red Hat VirtIO Etherpad Adapter
 (PCI)0x0000000A (-6) Red Hat VirtIO Etherpad Adapter";;RedHatEnterpriseLinux7/RHEL7-95936
2905;;;;;;;;;4;"4.Disable msi of guest
 For Linux:
 add ""pci=nomsi"" to the kernel cmdline.
 # vim /etc/grub2.conf
 ...
 linux /vmlinuz-... ... pci=nomsi

 For windows: open registry and set HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum\PCI\
 VEN_1AF4&DEV_1001&SUBSYS_00021AF4&REV_00\3&13c0b0c5&0&18\Device Parameters\Interrupt Management\MessageSignaledInterruptProperties\MSISupported to 0";"4. set successfully
";;RedHatEnterpriseLinux7/RHEL7-95936
2905;;;;;;;;;5;"5.Reboot guest, and check if msi is disabled.
 For linux:
 # cat /proc/cmdline
 # lspci -vvv -s $pci_addr_of_Eth_device |grep MSI

 For windows:
 device manager -->view-->resources by connection ---> Interrupt request IRQ ---> find the line with ""Redhat VirtIO Etherpad Adapter """;"5. For linux:
 There is ""pci=nomsi""
 # lspci -vvv -s 00:03.0 |grep MSI
 Capabilities: [40] MSI-X: Enable- Count=3 Masked-

 For windows:
 MSI is disabled,there are only 1 line named Red Hat VirtIO Etherpad Adapter,and there should be positive number in ( )
 eg :
 (PCI)0x0000000A (10) Red Hat VirtIO Etherpad Adapter
";;RedHatEnterpriseLinux7/RHEL7-95936
2905;;;;;;;;;6;"6.Check network and vhost process.
 For Linux tun/tap/macvtap backend (bridge-utils based & openvswitch based & macvtap based):
 Transfer file(2Gfile) from guest to an external host, and check vhost in host.
 1) scp $file_name root@$host_ip:/home/file_from_guest.
 2) Host#top -p $pid_of_vhost (# pgrep vhost  --> $pid_of_vhost)

 For Windows:
 1). install winscp tool
 2). use winscp to uploading a 3G file from guest to host 
 3). Host# top -p $pid_of_vhost (# pgrep vhost  --> $pid_of_vhost)
";"6. vhost process consumes host resource, and file can be transferred successfully.
  PID     USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND 
  13898     root      20   0       0             0      0 S        2.4       0.0       0:01.39 vhost-138+ 
 ";;RedHatEnterpriseLinux7/RHEL7-95936
2905;;;;;;;;;7;"7.Check md5 value of both sides.
 # md5sum $file_name";7. md5 value is same after transferring. ;;RedHatEnterpriseLinux7/RHEL7-95936
2905;;;;;;;;;8;"8.Shutdown guest, and modify qemu-kvm cmdline, set vhostforce value to be ""on"", then boot the guest.
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,vhostforce=on \

 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd,vhost=on,vhostforce=on \";8. boot successfully;;RedHatEnterpriseLinux7/RHEL7-95936
2905;;;;;;;;;9;"9. Confirm msi is disabled.
 For Linux:
 # cat /proc/cmdline
 # lspci -vvv -s $PCI_ADDR_Eth_card |grep MSI
 
 For windows:
 device manager -->view-->resources by connection ---> Interrupt request IRQ ---> find the line with ""Redhat VirtIO Etherpad Adapter ""
​​";"9. For linux:
 There is ""pci=nomsi""
 # lspci -vvv -s 00:03.0 |grep MSI
 Capabilities: [40] MSI-X: Enable- Count=3 Masked-

 For windows:
 MSI is disabled,there are only 1 line named Red Hat VirtIO Etherpad Adapter,and there should be positive number in ( )
 eg :
 (PCI)0x0000000A (10) Red Hat VirtIO Etherpad Adapter
​​";;RedHatEnterpriseLinux7/RHEL7-95936
2905;;;;;;;;;10;"10. repeat steps 6-7
​​";"10. as results of steps 6-7
​​";;RedHatEnterpriseLinux7/RHEL7-95936
2905;;;;;;;;;11;"11. Shutdown guest, and modify qemu-kvm cmdline, set vhostforce value to be ""on"" and  ""off"", then boot the guest.
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,vhostforce=off \
 
 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd,vhost=on,vhostforce=off \";11 boot successful;;RedHatEnterpriseLinux7/RHEL7-95936
2905;;;;;;;;;12;12.repeat step 9;​​;;RedHatEnterpriseLinux7/RHEL7-95936
2905;;;;;;;;;13;13.repeat steps 6-7;"13. as results of steps 6-7
​​";;RedHatEnterpriseLinux7/RHEL7-95936
2906;RHEL7-95937;[virtual network][virtual-nic-device] busy pooling parameter simple test;poll-us parameter add to netdev guest can work well;Yu Wang (wyu);Medium;Positive;Not Automated;;1;"1.Boot a guest w/ vhost=on and poll-us=30
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,poll-us=30,script=/etc/ifup_script,downscript=/etc/ifdown_script \

 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,poll-us=30,fd=$fd,vhost=on \
";" 1.can login to guest, and no BSOD in windows guest, and no
 errors/call trace/kernel panic in linux guest.
";Test Case;RedHatEnterpriseLinux7/RHEL7-95937
2906;;;;;;;;;2;"2.Check the guest ip address.
 For linux, inside guest:
 # ifconfig $interface_name

 For Windows, open a cmd window, c:\ ipconfig \all";"2. guest can get an ip address. (our host and guest are in the
 network that have dhcp server that can assign ip address to the systems.)";;RedHatEnterpriseLinux7/RHEL7-95937
2906;;;;;;;;;3;"3. For tun/tap backend guest, ping guest from host; For macvtap backend, ping guest from external host.
 # ping $guest_ip -c 30 -i {for each value in interval} -s { for each value in packet_size }
 For Windows:
 # for %i in (0, 1, 48, 64, 512, 1440, 1500, 1505, 4096, 4192, 32767, 65500) do ping $guest_ip -n 30 -l %i";"3. the packet loss ratio should be zero for all combinations of
 packet_size and interval.";;RedHatEnterpriseLinux7/RHEL7-95937
2906;;;;;;;;;4;"4.set poll-us=50, repeat step1-3.
";"4. the same test result.
";;RedHatEnterpriseLinux7/RHEL7-95937
2907;RHEL7-95938;[virtual network][virtual-nic-device] tx array support in tun;"guest vpn used normal, then do netperf test.
https://bugzilla.redhat.com/show_bug.cgi?id=1352741";Yu Wang (wyu);Medium;Positive;Not Automated;;1;" 1. 1.Boot a guest w/ vhost=on
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \
 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd,vhost=on \";" 
";Test Case;RedHatEnterpriseLinux7/RHEL7-95938
2907;;;;;;;;;2;"2.Stop firewall in guest and the external host.
 For linux:
 # iptables -F ; ip6tables -F

 For windows, stop firewall.";​​;;RedHatEnterpriseLinux7/RHEL7-95938
2907;;;;;;;;;3;"3.Install openvpn in guest and login to company network.
 For linux:
  1). install pkcs11-helper and openvpn from brewweb
 2). install redhat-internal-cert and redhat-internal-openvpn-profiles in
 https://redhat.service-now.com/rh_ess/kb_view.do?sysparm_article=KB0005424 
 
 For win:
 follow this article
 https://redhat.service-now.com/kb?id=kb_article&sys_id=82ee419ac08f49400395467893d05ff6 ";​​;;RedHatEnterpriseLinux7/RHEL7-95938
2907;;;;;;;;;4;"4. start openvpn in guest 
 For linux:
 openvpn --config /etc/openvpn/ovpn-pek2-udp.conf
 
 For Win:
 Click Connect -> In the Username field, enter your Red Hat Username -> In the Password field, enter your PIN+Token";guest had a tun0 and had a tunnel ip,ping success.;;RedHatEnterpriseLinux7/RHEL7-95938
2907;;;;;;;;;5;"4.confirm guest had tun ip and connect to company network.
 For linux:
 # ifconfig redhat0  (tun created by openvpn)
 # ping mail.corp.redhat.com -I redhat0

 For Win:
 # ipconfig /all
 # ping mail.corp.redhat.com
";​​;;RedHatEnterpriseLinux7/RHEL7-95938
2907;;;;;;;;;6;"5.Start netserver in the external host.
 # netserver";"netserver is started and in listen mode.
 # netstat -anp |grep netserver
 tcp6 0 0 :::12865 :::* LISTEN 18524/netserver";;RedHatEnterpriseLinux7/RHEL7-95938
2907;;;;;;;;;7;"6.Execute netperf client with different protocol in guest, please test all protocol in this case(windows guest won't test TCP_SENDFILE):
 procotol=[TCP_RR, TCP_CRR, UDP_RR, TCP_STREAM, TCP_MAERTS, TCP_SENDFILE, UDP_STREAM ]
 # netperf -H $host_ip&external_ip -t $protocol -l 60

 For Win:
 # netperf.exe -H $host_ip&external_ip -t $protocol -l 60";"netperf test all passed, and successfully, no errors found, no
 panic and call trace.";;RedHatEnterpriseLinux7/RHEL7-95938
2908;RHEL7-95939;[virtual network][virtual-nic-device]   KVM multi guest test -- not for macvtap, and only for autotest;KVM multi guest test -- not for macvtap, and only for autotest.;Yu Wang (wyu);High;Positive;Automated;425174;1;" KVM multi test:
 1) Log into guests
 2) Check all the nics available or not
 3) Ping among guest nic and host
 3.1) Ping with different packet size
 3.2) Flood ping test
 3.3) Final ping test
 4) Transfer files among guest nics and host
 4.1) Create file by dd command in guest
 4.2) Transfer file between nics
 4.3) Compare original file and transferred file
 5) ping among different nics
 5.1) Ping with different packet size
 5.2) Flood ping test
 5.3) Final ping test
 6) Transfer files among different nics
 6.1) Create file by dd command in guest
 6.2) Transfer file between nics
 6.3) Compare original file and transferred file
 7) Repeat step 3 - 6 on every nic."; 1.After ping successfully and no pkg lost(<5% pkg lost);Test Case;RedHatEnterpriseLinux7/RHEL7-95939
2908;;;;;;;;;2;​​;2.File transfer succeed.;;RedHatEnterpriseLinux7/RHEL7-95939
2908;;;;;;;;;3;​​;3.No coredumpd or crash occured.;;RedHatEnterpriseLinux7/RHEL7-95939
2909;RHEL7-95940;[virtual network][virtual-nic-device] Check the virtual nic options;Check the list of virtual nic devices.;Yu Wang (wyu);High;Positive;Automated;405743;1;" Start qemu-kvm w/ nic options to check help:
 1.For virtio-net-pci
 /usr/libexec/qemu-kvm -device virtio-net-pci,?";" 1.After step1, there's output like following (the checkpoint is that can print the parameters)
 # /usr/libexec/qemu-kvm -device virtio-net-pci,?
 virtio-net-pci.indirect_desc=bool (on/off)
 virtio-net-pci.x-txtimer=uint32
 virtio-net-pci.guest_ufo=bool (on/off)
 virtio-net-pci.mq=bool (on/off)
 virtio-net-pci.status=bool (on/off)
 virtio-net-pci.host_ecn=bool (on/off)
 virtio-net-pci.ioeventfd=bool (on/off)
 virtio-net-pci.tx=str
 virtio-net-pci.multifunction=bool (on/off)
 virtio-net-pci.rombar=uint32
 virtio-net-pci.ctrl_rx_extra=bool (on/off)
 virtio-net-pci.ctrl_vq=bool (on/off)
 virtio-net-pci.mac=str (Ethernet 6-byte MAC Address, example: 52:54:00:12:34:56)
 virtio-net-pci.event_idx=bool (on/off)
 virtio-net-pci.x-disable-pcie=bool (on/off)
 virtio-net-pci.guest_tso6=bool (on/off)
 virtio-net-pci.gso=bool (on/off)
 virtio-net-pci.guest_ecn=bool (on/off)
 virtio-net-pci.ctrl_rx=bool (on/off)
 virtio-net-pci.guest_tso4=bool (on/off)
 virtio-net-pci.disable-modern=bool (on/off)
 virtio-net-pci.guest_csum=bool (on/off)
 virtio-net-pci.guest_announce=bool (on/off)
 virtio-net-pci.disable-legacy=bool (on/off)
 virtio-net-pci.command_serr_enable=bool (on/off)
 virtio-net-pci.x-txburst=int32
 virtio-net-pci.ctrl_vlan=bool (on/off)
 virtio-net-pci.csum=bool (on/off)
 virtio-net-pci.mrg_rxbuf=bool (on/off)
 virtio-net-pci.any_layout=bool (on/off)
 virtio-net-pci.ctrl_guest_offloads=bool (on/off)
 virtio-net-pci.host_tso6=bool (on/off)
 virtio-net-pci.ctrl_mac_addr=bool (on/off)
 virtio-net-pci.addr=int32 (Slot and optional function number, example: 06.0 or 06)
 virtio-net-pci.migrate-extra=bool (on/off)
 virtio-net-pci.modern-pio-notify=bool (on/off)
 virtio-net-pci.vectors=uint32
 virtio-net-pci.vlan=int32 (Integer VLAN id to connect to)
 virtio-net-pci.host_tso4=bool (on/off)
 virtio-net-pci.host_ufo=bool (on/off)
 virtio-net-pci.virtio-backend=child<virtio-net-device>
 virtio-net-pci.bootindex=int32
 virtio-net-pci.netdev=str (ID of a netdev to use as a backend)
 virtio-net-pci.notify_on_empty=bool (on/off)
 virtio-net-pci.virtio-pci-bus-master-bug-migration=bool (on/off)
 virtio-net-pci.romfile=str
";Test Case;RedHatEnterpriseLinux7/RHEL7-95940
2909;;;;;;;;;2;"2.For e1000
 # /usr/libexec/qemu-kvm -device e1000,?";"2.After step2, there's output like following (the checkpoint is that can print the parameters)
 # /usr/libexec/qemu-kvm -device e1000,?
 e1000.mac=macaddr
 e1000.vlan=vlan
 e1000.netdev=netdev
 e1000.bootindex=int32
 e1000.autonegotiation=on/off
 e1000.addr=pci-devfn
 e1000.romfile=string
 e1000.rombar=uint32
 e1000.multifunction=on/off
 e1000.command_serr_enable=on/off";;RedHatEnterpriseLinux7/RHEL7-95940
2909;;;;;;;;;3;"3.For rtl8139
 # /usr/libexec/qemu-kvm -device rtl8139,?";"3.After step3, there's output like following (the checkpoint is that can print the parameters)
 # /usr/libexec/qemu-kvm -device rtl8139,?
 rtl8139.mac=macaddr
 rtl8139.vlan=vlan
 rtl8139.netdev=netdev
 rtl8139.bootindex=int32
 rtl8139.addr=pci-devfn
 rtl8139.romfile=string
 rtl8139.rombar=uint32
 rtl8139.multifunction=on/off
 rtl8139.command_serr_enable=on/off";;RedHatEnterpriseLinux7/RHEL7-95940
2909;;;;;;;;;4;"4.For spapr-vlan
 #/usr/libexec/qemu-kvm -device spapr-vlan,?";"3.After step4, there's output like following (the checkpoint is that can print the parameters)
 # /usr/libexec/qemu-kvm -device spapr-vlan,?
 spapr-vlan.bootindex=int32
 spapr-vlan.irq=uint32
 spapr-vlan.netdev=str (ID of a netdev to use as a backend)
 spapr-vlan.vlan=int32 (Integer VLAN id to connect to)
 spapr-vlan.mac=str (Ethernet 6-byte MAC Address, example: 52:54:00:12:34:56)
 spapr-vlan.reg=uint32";;RedHatEnterpriseLinux7/RHEL7-95940
2910;RHEL7-95942;[virtual network][virtual-nic-device] pktgen stress test -- only for linux;Pktgen stress test with M queues. both from guest and from host tap.;Yu Wang (wyu);Medium;Positive;Automated;405565;1;" 1.Boot 2 guests w/ vhost=on, the cli should be like this:
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=4 \
 -smp 4
 For macvtap backend
 NTD [ will add when we actually support ]"; 1. guest boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95942
2910;;;;;;;;;2;"2.In both systems, set all queues work
 # ethtool -L eth0 combined 4
";"2. in guest, ethtool -l can see the channel parameters of the
 interface
 like:
 Pre-set maximums:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4
 Currten hardware settings:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4";;RedHatEnterpriseLinux7/RHEL7-95942
2910;;;;;;;;;3;"3.In guest1, create the pktgen script, and modify the ""$DST_system_ip"" to guest2's ip address, and ""$dst-system-macaddress"" to guest2's mac address.";​​;;RedHatEnterpriseLinux7/RHEL7-95942
2910;;;;;;;;;4;"4.In guest1, run this script like this:
 # ./pktgen.sh eth0 4 [eth0 is the interface in guest1, 4 is the queues number, modify them according to your env]";"in the dst system, check the interface, you can
 see the dst guest have recive the package, do the following repeatedly inside
 dst system, you can see that the rx pkgs increase fast.
 # ifconfig eth0 [eth0 is the interface in guest, modify them according to
 your env]";;RedHatEnterpriseLinux7/RHEL7-95942
2910;;;;;;;;;5;5.After 10 minitues, if pktgen test is not finished, try finish by ping out from guest1.;​​;;RedHatEnterpriseLinux7/RHEL7-95942
2910;;;;;;;;;6;"6.Check both systems and host.
 #dmesg
 #ping $external_host_ip";"no error and call trace in dmesg, and ping out has
 no pkg lost.";;RedHatEnterpriseLinux7/RHEL7-95942
2910;;;;;;;;;7;"7.In host, create the pktgen script, and modify the ""$DST_system_ip"" to guest1's ip address, and ""$dst-system-macaddress"" to guest1's mac address.";​​;;RedHatEnterpriseLinux7/RHEL7-95942
2910;;;;;;;;;8;"8.In host, run this script like this:
 # ./pktgen.sh tap0 4 [tap0 is the interface corresponds to guest1, 4 is the queues number, modify them according to your env]";"in the dst system, check the interface, you can
 see the dst guest have recive the package, do the following repeatedly inside
 dst system, you can see that the rx pkgs increase fast.
 # ifconfig eth0 [eth0 is the interface in guest, modify them according to
 your env]";;RedHatEnterpriseLinux7/RHEL7-95942
2910;;;;;;;;;9;9.After 10 minitues, if pktgen test is not finished, try finish by ping out from host.;​​;;RedHatEnterpriseLinux7/RHEL7-95942
2910;;;;;;;;;10;"10.Check both guest and host.
 #dmesg
 #ping $external_host_ip";"no error and call trace in dmesg, and ping out has
 no pkg lost.";;RedHatEnterpriseLinux7/RHEL7-95942
2911;RHEL7-95943;[virtual network][virtual-nic-device] flow caches stress test, not for mq test. -- only for linux;Flow caches stress test, start more than 512 instances of TCP_CRR tests, this scenario is not for mq.;Yu Wang (wyu);Medium;Positive;Automated;405564;1;" 1. Boot a guest w/ vhost=on virtio-net-pci
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device $net_device,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,(vhost=on for virtio-net-pci),script=/etc/ifup_script,downscript=/etc/ifdown_script \
 For macvtap backend
 -device $net_device,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd,vhost=on(for virtio-net-pci) \";" 1. guest can bootup w/o kernel panic, after bootup, no errors
 and call trace in dmesg messages
";Test Case;RedHatEnterpriseLinux7/RHEL7-95943
2911;;;;;;;;;2;"2. ping host from guest
 # ping $host_ip -c 10
​​";2. can ping host w/ no pkgs lost, please ping 10 counts to confirm this.;;RedHatEnterpriseLinux7/RHEL7-95943
2911;;;;;;;;;3;3.Confirm nf_conntrack is disabled in host and guest.(refer to setup);​​;;RedHatEnterpriseLinux7/RHEL7-95943
2911;;;;;;;;;4;"4.After installation of netperf, run netserver in host
 # netserver";​​;;RedHatEnterpriseLinux7/RHEL7-95943
2911;;;;;;;;;5;"5.Run netperf TCP_CRR protocal test in guest, start 520(more than 512 is ok) instances of TCP_CRR tests, during this time, ping host and guest from external system.
 # for i in $(seq 520); do netperf -H $HOST_IP -t TCP_CRR -l 600 -- -b 10 -D & done
";"quit ping process, no pkgs lost and netperf test finished w/
 no error, no errors in dmesg messages and no call trace.";;RedHatEnterpriseLinux7/RHEL7-95943
2911;;;;;;;;;6;"6.After stress finished, in both guest and host, check dmesg messages, and then transfer file from host to guest and from guest to host:
 host# scp $Bigfile(2Gfile) root@$guest_ip:/home/host_to_guest
 guest# scp $Bigfile(2Gfile) root@$host_ip:/home/guest_to_host";"the scp speed is accesable, should be more than 10m/s, and no
 sudden change. The scp can finished";;RedHatEnterpriseLinux7/RHEL7-95943
2911;;;;;;;;;7;"7.Check the network of both host and guest via md5sum checking.
 # md5sum $all_transfer_file";md5sum value should be same after transfer for each scp;;RedHatEnterpriseLinux7/RHEL7-95943
2912;RHEL7-95944;[virtual network][virtual-nic-device] Kill guest with guest network stress;Abrupt kill test. Kill qemu abruptly with -9 while send/receive stress test executing on guest, and verify that it can be killed. Repeatedly load/unload NIC driver, kill qemu abruptly with -9 and verify that it can be killed.;Yu Wang (wyu);Medium;Positive;Automated;405525;1;" 1.Boot a guest
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \

 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd,vhost=on \";" 1.guest boot up successfully
";Test Case;RedHatEnterpriseLinux7/RHEL7-95944
2912;;;;;;;;;2;"2.Stop firewall in guest and the external host.
 For linux:
 # iptables -F ; ip6tables -F

 For windows, stop firewall.";2. firewall stopped;;RedHatEnterpriseLinux7/RHEL7-95944
2912;;;;;;;;;3;"3.Start netserver in the external host.
 # netserver";"3. netserver started
​​";;RedHatEnterpriseLinux7/RHEL7-95944
2912;;;;;;;;;4;"4.Execute netperf stress inside guest:
 # netperf -t TCP_STREAM -H $Host_ip -- -m 1500";4. netpef can start;;RedHatEnterpriseLinux7/RHEL7-95944
2912;;;;;;;;;5;"6.Wait for 5 minitus then kill the vm.
 # kill -9 $pid_guest";6. can kill the vm;;RedHatEnterpriseLinux7/RHEL7-95944
2912;;;;;;;;;6;7.Boot this guest again;7. can boot again;;RedHatEnterpriseLinux7/RHEL7-95944
2913;RHEL7-95945;[virtual network][virtual-nic-device] Hot-plug nic w/ the netdev already used.;Hot-plug nic w/ the netdev already used., hotplug should fail.;Yu Wang (wyu);Medium;Positive;Automated;405742;1;" 1.Boot a guest w/ vhost=on
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \
 -qmp tcp:0:4444,server,nowait
 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd,vhost=on \
 -qmp tcp:0:4444,server,nowait";" 1.After step2, can access the qmp session.
 $ telnet $host_ip $port
 Trying $host_ip...
 Connected to $host_ip.
 Escape character is '^]'.
 {""QMP"": {""version"": {""qemu"": {""micro"": 2, ""minor"": 5, ""major"": 1}, ""package"": "" (qemu-kvm-1.5.2-4.el7)""}, ""capabilities"": []}}";Test Case;RedHatEnterpriseLinux7/RHEL7-95945
2913;;;;;;;;;2;"2.Telnet to the 4444 port of host.
 # telnet 10.66.7.126 4444";"2.After step3, from the qmp monitor:
 {""execute"":""qmp_capabilities""}
 {""return"": {}}";;RedHatEnterpriseLinux7/RHEL7-95945
2913;;;;;;;;;3;"3.After access the qmp sessions, execute following cmd
 {""execute"":""qmp_capabilities""}";"3{""return"": {}}";;RedHatEnterpriseLinux7/RHEL7-95945
2913;;;;;;;;;4;"4.Hotplug virtual nic to guest based the exist tap device.
 For tun/tap backend (bridge-utils based & openvswitch based)
 qmp cmd:
 {""execute"": ""device_add"", ""arguments"": { ""driver"":""virtio-net-pci"",""netdev"":""hostnet0"",""mac"":""22:11:22:45:61:99"",""id"": ""net1""}}
 hmp cmd
 (qemu)device_add virtio-net-pci,netdev=hostnet0,mac=22:11:22:45:61:99,id=net1
 For macvtap backend
 Create a new macvtap interface
 qmp cmd:
 {""execute"": ""device_add"", ""arguments"": { ""driver"":""virtio-net-pci"",""netdev"":""hostnet0"",""mac"":""$macvtap_interface_mac_address"",""id"": ""net1""}}
 hmp cmd
 (qemu)device_add virtio-net-pci,netdev=hostnet0,mac=$macvtap_interface_mac_address,id=net1";"4. can not execute successfully
 For qmp:
 {""error"": {""class"": ""GenericError"", ""desc"": ""Property 'virtio-net-pci.netdev' can't take value 'hostnet0', it's in use""}}
 For hmp
 Property 'virtio-net-pci.netdev' can't take value 'hostnet0', it's in use";;RedHatEnterpriseLinux7/RHEL7-95945
2914;RHEL7-95949;[virtual network][virtual-nic-device] ping out from guest.;Ping out from guest. Ping out from guest with different size/interval of packets. Flood ping out, check if the network is still usable.;Yu Wang (wyu);Critical;Positive;Automated;405698;1;"1. start guest w/ vhost=on
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on \
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \";"1. After step1 , can login guest, and no BSOD in windows guest, and no
 errors/call trace/kernel panic in linux guest.";Test Case;RedHatEnterpriseLinux7/RHEL7-95949
2914;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95949
2914;;;;;;;;;3;"3.Check the guest ip address.
 For linux, inside guest:
 # ifconfig $interface_name
 For Windows, open a cmd window, c:\ > ipconfig \all";"3. guest can got a ip address. (our host and guest are in the
 network that have dhcp server that can assign ip address to the systems.)";;RedHatEnterpriseLinux7/RHEL7-95949
2914;;;;;;;;;4;"4. Ping out with various interval and packet_size
 (For tun/tap backend guest, ping host from guest; For macvtap backend, ping external host from guest.)
 For linux: # ping $host_ip -c 30 -i {for each value in interval} -s { for each value in packet_size }
 For windows: # ping $host_ip -n 30 -l { for each value in packet_size }";"4.the packet loss ratio should be zero for all combinations of
 packet_size and interval.";;RedHatEnterpriseLinux7/RHEL7-95949
2914;;;;;;;;;5;"5.Ping w/ flood option
 (for tun/tap backend guest, ping host from guest; For macvtap backend, ping external host from guest.)
 For linux: # ping $host_ip -f
 For windows: # ping $host_ip -t";"5. wait for 5 minutes, ctrl+c this process
 For linux:
 --- 10.73.72.12 ping statistics ---
 30 packets transmitted, 30 received, 0% packet loss, time 6ms
 rtt min/avg/max/mdev = 0.143/0.198/0.589/0.101 ms, ipg/ewma 0.230/0.169 ms

 For windows: ping without error
";;RedHatEnterpriseLinux7/RHEL7-95949
2915;RHEL7-95950;[virtual network][virtual-nic-device] ping guest from host.;Ping guest stress test. Ping the guest with different size/interval of packets. Flood ping the guest, check if the network is still usable.;Yu Wang (wyu);Critical;Positive;Automated;405379;1;" steps:
 1. start guest w/ virtio-net-pci:
 CLI: -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \ -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0";1. Guest could boot up successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95950
2915;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95950
2915;;;;;;;;;3;"3.Stop firewall in guest and the external host.
 For linux:
 # iptables -F ; ip6tables -F
 For windows: Control Panel --> search ""firewall""  --> turn windows firewall on or off --> turn the firewall off";3. iptables could be turned off without errors;;RedHatEnterpriseLinux7/RHEL7-95950
2915;;;;;;;;;4;"4.Check the guest ip address.
 For linux, inside guest:
 # ifconfig $interface_name
 For Windows, open a cmd window, c:\ > ipconfig \all";"4. guest can got a ip address. (our host and guest are in the
 network that have dhcp server that can assign ip address to the systems.)";;RedHatEnterpriseLinux7/RHEL7-95950
2915;;;;;;;;;5;"5. For tun/tap backend guest, ping guest from host; For macvtap backend, ping guest from external host.
 # ping $guest_ip -c 30 -i {for each value in interval} -s { for each value in packet_size }";"5. the packet loss ratio should be zero for all combinations of
 packet_size and interval.";;RedHatEnterpriseLinux7/RHEL7-95950
2915;;;;;;;;;6;"6.Ping w/ flood option, for tun/tap backend guest, ping guest from host; For macvtap backend, ping guest from external host.
 # ping $guest_ip -f";6. wait for 5 minutes, no packet loss in host.;;RedHatEnterpriseLinux7/RHEL7-95950
2916;RHEL7-95951;[virtual network][virtual-nic-device] Guest network stress when under heavy memory pressure;Guest network stress when under heavy memory pressure.;Yu Wang (wyu);Medium;Positive;Not Automated;414734;1;" 1.Boot guest :
 ...
 -netdev tap,id=hostnet0,script=/etc/qemu-ifup,vhost=on \
 -device virtio-net,netdev=hostnet0,mac=54:52:1b:35:3c:16,id=test";" 1. guest boot up successfully
";Test Case;RedHatEnterpriseLinux7/RHEL7-95951
2916;;;;;;;;;2;"2.In guest, flood ping host, swapoff, and do stress test for 4 hours
 For linux:
 # swapoff -a
 # ping 10.66.70.254 -f
 # stress --vm 4 --vm-bytes 256M --vm-keep

 For windows:
 # ping $ip -t
 # heavyload.exe /CPU n /FILE n /MEMORY n /DURATION timeout /START

 (download link:
 https://en.softonic.com/download/heavyload/windows/post-download?sl=1 
  )";"2. wait for long time (4 hours), then quit the stress, and test guest's network of guest works well
​​";;RedHatEnterpriseLinux7/RHEL7-95951
2917;RHEL7-95953;[virtual network][virtual-nic-device] query cpuinfo during pxe boot;Query cpu frequently during pxe boot, qemu won't hit error, and can execute pxe boot process successfully.{comment:5};Yu Wang (wyu);Medium;Positive;Automated;405524;1;" 1.Enable ept/npt in kvm_intel/kvm_amd
 # modprobe -r kvm_intel ; modprobe kvm_intel ept=1
 # modprobe -r kvm_amd; modprobe kvm_amd npt=1";" 1. mod installed
";Test Case;RedHatEnterpriseLinux7/RHEL7-95953
2917;;;;;;;;;2;"2.Launch qemu without disk and with unix backend monitor ""-boot menu=on"" and ""vhost=on"" in ""-netdev"" option.
 For tun/tap backend (bridge-utils based & openvswitch based)
 -boot menu=on
 -monitor unix:/tmp/monitor1,server,nowait
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \
 For macvtap backend
 -boot menu=on
 -monitor unix:/tmp/monitor1,server,nowait
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd,vhost=on \";"2. guest booted up
";;RedHatEnterpriseLinux7/RHEL7-95953
2917;;;;;;;;;3;3.On seabios window, press f12, access the boot menu.;"3. access boot menu
";;RedHatEnterpriseLinux7/RHEL7-95953
2917;;;;;;;;;4;"4.Execute ""info cpus"" in unix monitor session frequently, you can refer to this script.
 # while true; do echo ""info cpus"" |nc -U /tmp/monitor1 ; done";4. can get the cpus info from monitor session repeatedly.;;RedHatEnterpriseLinux7/RHEL7-95953
2917;;;;;;;;;5;"5.On seabios window, select ""iPXE (PCI ...)"" item.";"5. from window, can access pxe booding like this:
 ............................................................
 Booting from ROM...
 iPXE (PCI 00:05.0) starting execution . . . OK
 iPXE initalising devices . . .OK
 iPXE 1.0.0+ (c4bce43) -- Open Source Network Boot Firmware --
 <http://ipxe.org>
 Features: iSCSI HTTP DNS TFTP AoE bzImage ELF MBOOT PXE Menu PXEXT
 .......
 .................................................................
 and can continue to got ip address form dhcp server and access the remote
 kickstart server.";;RedHatEnterpriseLinux7/RHEL7-95953
2917;;;;;;;;;6;"6.Disable ept/npt in kvm_intel/kvm_amd
 # modprobe -r kvm_intel ; modprobe kvm_intel ept=0
 # modprobe -r kvm_amd; modprobe kvm_amd npt=0";"6. no error
​​";;RedHatEnterpriseLinux7/RHEL7-95953
2917;;;;;;;;;7;7.Repeatedly test step 2~5, the expected results should be same as step1.;"7. qemu works well, no error in hmp/qmp prints or remote-viewer
 window.
​​";;RedHatEnterpriseLinux7/RHEL7-95953
2918;RHEL7-95955;[virtual network][virtual-nic-device] Netperf test between guest and guest;Netperf stress between guest and host, Set guest, host as server/client, execute netperf test one by one, analyze the result. Multiple netperf in parallel (both STREAM and RR). Netperf with -b -w parameters to trigger packet bursts.;Yu Wang (wyu);Critical;Positive;Automated;405375;1;" 1. start guest w/ virtio-net-pci
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on \ 
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \";1. guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95955
2918;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings ";"2.After step5, netperf test all passed, and successfully, no errors found, no
 panic and call trace.";;RedHatEnterpriseLinux7/RHEL7-95955
2918;;;;;;;;;3;"3.Stop firewall in guests.
 For linux:
 # iptables -F ; ip6tables -F
 For windows: Control Panel --> search ""firewall""  --> turn windows firewall on or off --> turn the firewall off";3. iptables could be turned off without errors;;RedHatEnterpriseLinux7/RHEL7-95955
2918;;;;;;;;;4;"3. run netserver on guestA:
 # netserver";"3.host netserver start correctly:
 Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC";;RedHatEnterpriseLinux7/RHEL7-95955
2918;;;;;;;;;5;"4. running netperf on guestB
 for linux: netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024
 for windows: for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netperf_server_ip -c -C -t %j -f m -l 180 -- -m %i done done";"4.netperf test can run normally:
 TCP STREAM TEST from 0.0.0.0 () port 0 AF_INET to 10.66.10.110 () port 0 AF_INET : histogram : interval : demo 
 Recv   Send    Send                           
 Socket Socket  Message  Elapsed               
 Size   Size    Size     Time     Throughput   
 bytes  bytes   bytes    secs.    10^6bits/sec   
  
  87380  65536  65536    10.22      98.30";;RedHatEnterpriseLinux7/RHEL7-95955
2918;;;;;;;;;6;"5. running netserver guestB
 # netsever";5. netserver could start successfully;;RedHatEnterpriseLinux7/RHEL7-95955
2918;;;;;;;;;7;"6. do netperf on guestB
 for linux: netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024
 for windows: for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netperf_server_ip -c -C -t %j -f m -l 180 -- -m %i done done";"6.netperf works well,host get following msg:
 MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.66.8.116 () port 0 AF_INET : demo
 Recv   Send    Send                          Utilization       Service Demand
 Socket Socket  Message  Elapsed              Send     Recv     Send    Recv
 Size   Size    Size     Time     Throughput  local    remote   local   remote
 bytes  bytes   bytes    secs.    10^6bits/s  % S      % N      us/KB   us/KB
 
  65536  16384   1024    180.01      916.12   41.73    20.96    7.464   3.749";;RedHatEnterpriseLinux7/RHEL7-95955
2919;RHEL7-95958;[virtual network][virtual-nic-device] nic bonding/teaming test - not test for macvtap;Bonding test. Login guest by serial and setup bond0 in guest, transfer file between guest and host. Repeatedly put down/up interfaces by set_link, re-transfer file between guest and host.;Yu Wang (wyu);Medium;Positive;Not Automated;405378;1;" 1.Boot a guest w/ 4 virtual nics and
 For tun/tap backend (bridge-utils based & openvswitch based)
 For windows guests only run on win2012/2012R2 and win2016
 -netdev tap,script=/etc/qemu-ifup1,downscript=no,id=hostnet1,vhost=on -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:67:17:c5:a1,bus=pci.0 -netdev tap,script=/etc/qemu-ifup1,downscript=no,id=hostnet2,vhost=on -device virtio-net-pci,netdev=hostnet2,id=net2,mac=00:52:67:17:c5:b1,bus=pci.0 -netdev tap,script=/etc/qemu-ifup1,downscript=no,id=hostnet3,vhost=on -device virtio-net-pci,netdev=hostnet3,id=net3,mac=00:52:67:17:c5:c1,bus=pci.0 -netdev tap,script=/etc/qemu-ifup1,downscript=no,id=hostnet4,vhost=on -device virtio-net-pci,netdev=hostnet4,id=net4,mac=00:52:67:17:c5:d1,bus=pci.0";" 1.guest boot successfully

";Test Case;RedHatEnterpriseLinux7/RHEL7-95958
2919;;;;;;;;;2;"2. Only for linux: after guest boot up, load the bonding module.
   # lspci |grep Eth
    # modprobe bonding
   Only for windows:check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"2.no errors
 For linux
 # lspci |grep Eth
 00:04.0 Ethernet controller: Red Hat, Inc Virtio network device
 00:05.0 Ethernet controller: Red Hat, Inc Virtio network device
 00:06.0 Ethernet controller: Red Hat, Inc Virtio network device
 00:07.0 Ethernet controller: Red Hat, Inc Virtio network device
 # lsmod |grep bond
 For windows:
 All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""
 bonding 125223 0
​​";;RedHatEnterpriseLinux7/RHEL7-95958
2919;;;;;;;;;3;"3.Only for linux: check the bond interface, and set it up, check mac address of all network interfaces
 # ifconfig bond
 # ifconfig bond0 up
 # ip -d link show $interfaces |grep ether";"3. bond interface can be created after bonding module loaded, and all interfaces mac addresses are same as their real mac address.
 bond0: flags=5187<UP,BROADCAST,RUNNING,MASTER,MULTICAST> mtu 1500
 ...
​​";;RedHatEnterpriseLinux7/RHEL7-95958
2919;;;;;;;;;4;"4.Bond these four nics to bond0, then check mac address of all network interfaces
 for linux:
 # ifenslave bond0 eth1 eth2 eth3 eth4
 # ip -d link show $interfaces |grep ether
 for windows:
 Server manager--> NIC Teaming --> TEAMS --> New team --> fill in team name and select these 4 nics --> OK";"4.For linux: command can be execute successfully, and all interfaces mac addresses are same.
 For windows: Teaming can be created successfully and can been seen in ""Network and Sharing Center""
​​";;RedHatEnterpriseLinux7/RHEL7-95958
2919;;;;;;;;;5;"5. Only for linux: Make bond0 w/ ip address, can get one from dhcp server
 # dhclient bond0";"5.After step5, bond0 can get ip address.
 
​​";;RedHatEnterpriseLinux7/RHEL7-95958
2919;;;;;;;;;6;"6.In the guest run the following scripts to down/up the interface one by one in sequeues eth0,eth1,eth2,eth3, until step7 finished
 For linux:
 # while true ; do for i in {0..3} ; do ifconfig eth$i down ; sleep 1 ; ifconfig eth$i up ; done ; done
 For windows:
 @echo off
 for /l %i in (1,1,100) do ( 
 netsh interface set interface ""Ethernet"" disable
 netsh interface set interface ""Ethernet"" enable
 netsh interface set interface ""Ethernet 2"" disable
 netsh interface set interface ""Ethernet 2"" enable
 netsh interface set interface ""Ethernet 3"" disable
 netsh interface set interface ""Ethernet 3"" enable
 netsh interface set interface ""Ethernet 4"" disable
 netsh interface set interface ""Ethernet 4"" enable
 )";6.no error occurs;;RedHatEnterpriseLinux7/RHEL7-95958
2919;;;;;;;;;7;"7.During Step6, transfer a 2Gfile from guest to host.
 For linux: # scp $file_name -lroot $external_host_ip:/home/$receivefile
 For windows: use winscp";7. no error occurs;;RedHatEnterpriseLinux7/RHEL7-95958
2919;;;;;;;;;8;"8.Check md5 value after transferred.
 # md5sum $file_name";8. md5 value is the same as guest;;RedHatEnterpriseLinux7/RHEL7-95958
2919;;;;;;;;;9;"9.Make sure all interfaces up, and then run the following script to leave only one interface up in meantime, until step10 finished.
 For linux:
 #!/bin/sh
 num=0
 while true; do
 i=$num
 i=$(($i%4))
 ifconfig eth$i up
 i=$(($i+1))
 i=$(($i%4))
 ifconfig eth$i down
 i=$(($i+1))
 i=$(($i%4))
 ifconfig eth$i down
 i=$(($i+1))
 i=$(($i%4))
 ifconfig eth$i down
 sleep 2
 num=$(($num+1))
 done

 For windows:
 @echo off
 for /l %i in (1,1,100) do ( 
 netsh interface set interface ""Ethernet 2"" disable
 netsh interface set interface ""Ethernet 3"" disable
 netsh interface set interface ""Ethernet 4"" disable
 netsh interface set interface ""Ethernet 2"" enable
 netsh interface set interface ""Ethernet"" disable
 netsh interface set interface ""Ethernet 3"" enable
 netsh interface set interface ""Ethernet 2"" disable
 netsh interface set interface ""Ethernet 4"" enable
 netsh interface set interface ""Ethernet 3"" disable
 netsh interface set interface ""Ethernet"" enable
 netsh interface set interface ""Ethernet 4"" disable
 )";9.After all steps, ping test w/ no pkg lost.;;RedHatEnterpriseLinux7/RHEL7-95958
2919;;;;;;;;;10;"10.During Step9, transfer a 2Gfile from guest to host.
 For linux: # scp $file_name1 -lroot $external_host_ip:/home/$receivefile1
 For windows: use winscp";10. no error occurs;;RedHatEnterpriseLinux7/RHEL7-95958
2919;;;;;;;;;11;"11.Check md5 value after transferred.
 # md5sum $file_name";11. md5 value is the same as guest;;RedHatEnterpriseLinux7/RHEL7-95958
2920;RHEL7-95961;[virtual network][virtual-nic-device] Test 802.1q vlan in guest-- only for linux;"802.1q VLAN test between two guests.


Note: When testing with macvtap, the mac in guest should not be changed. Please refer to bug[1]
Bug 1531459 - 802.1q vlan doesn't work well over macvtap";Yu Wang (wyu);Critical;Positive;Automated;405365;1;" 1.Boot 2 guests w/ vhost=on, the cli like following:
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \
 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd,vhost=on \";1. guest boot up successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95961
2920;;;;;;;;;2;"2.In both guests and host, load 802.1q module, and stop firewall.
 # modprobe 8021q
 # iptables -F ; ip6tables -F";"2. the 802.1q module is loaded successfully.
 # lsmod |grep 8021q
 8021q 24570 0
 garp 14384 1 8021q
 mrp 18542 1 8021q
​​";;RedHatEnterpriseLinux7/RHEL7-95961
2920;;;;;;;;;3;"3.Enable arp_ignore in both guests.
 # echo 1 > /proc/sys/net/ipv4/conf/all/arp_ignore";"3. arp_ignore is enabled successfully
 # cat /proc/sys/net/ipv4/conf/all/arp_ignore
 1
​​";;RedHatEnterpriseLinux7/RHEL7-95961
2920;;;;;;;;;4;"4.Setup 2 vlans in both guests.
 For guest1:
 # ip link add link em1 name em1.10 type vlan id 10; ip link set em1.10 address 54:52:00:01:02:01 up ;ifconfig em1.10 192.168.10.1/24 up
 # ip link add link em1 name em1.20 type vlan id 20; ip link set em1.20 address 54:52:00:01:02:02 up; ifconfig em1.20 192.168.20.1/24 up
 For guest2:
 # ip link add link em1 name em1.10 type vlan id 10; ip link set em1.10 address 54:52:00:01:03:01 up ifconfig em1.10 192.168.10.2/24 up
 # ip link add link em1 name em1.20 type vlan id 20; ip link set em1.20 address 54:52:00:01:03:02 up;ifconfig em1.20 192.168.20.2/24 up";"4. vlan interfaces are created successfully
 # ip -d link show em1.10
 23: em1.10@em1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP mode DEFAULT
 link/ether 54:52:00:01:02:01 brd ff:ff:ff:ff:ff:ff promiscuity 0
 vlan id 10 <REORDER_HDR>
 #ip -d link show em1.20
 24: em1.20@em1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP mode DEFAULT
 link/ether 54:52:00:01:02:02 brd ff:ff:ff:ff:ff:ff promiscuity 0
 vlan id 20 <REORDER_HDR>
​​";;RedHatEnterpriseLinux7/RHEL7-95961
2920;;;;;;;;;5;"5.Ping test from guest1 to guest2, test pinging via same vlan.
 # ping -I em1.10 192.168.10.2";"5. ping successfully, no pkg lost.
​​";;RedHatEnterpriseLinux7/RHEL7-95961
2920;;;;;;;;;6;"6.Ping test from guest1 to guest2, test pinging via different vlan.
 # ping -I em1.10 192.168.20.2";"6. ping failed, all pkgs lost.
​​";;RedHatEnterpriseLinux7/RHEL7-95961
2920;;;;;;;;;7;"7.Transfer a 2G file from guest1 to guest2 via vlan 10, and check md5 value.
 # scp $file_name root@192.168.10.2:/home/Recive_from_guest1
 # md5sum $file_name";"7. scp successfully and md5 value is same after transferring.
​​";;RedHatEnterpriseLinux7/RHEL7-95961
2920;;;;;;;;;8;"8.Delete vlans in both guests
 # ip link delete em1.10; ip link delete em1.20";"8. the vlan links are deleted successfully.
 # ip -d link show
 no outputs that related w/ em1.10 or em1.20
​​";;RedHatEnterpriseLinux7/RHEL7-95961
2920;;;;;;;;;9;"9.Test maximum vlans in guest, select one guest, and create 4094 vlans inside.
 # for i in $(seq 4094); do ip link add link em1 name em1.$i type vlan id $i; ip link set em1.$i up; done; ifconfig";"9. all 4094 vlans are successfully, no errors and call trace/
 kernel panic in dmesg.
​​";;RedHatEnterpriseLinux7/RHEL7-95961
2920;;;;;;;;;10;"10.Delete all vlans.
 # for i in $(seq 4094); do ip link delete em1.$i ; done; ifconfig -a";"10. all vlans are deleted.
 # ip -d link show
 no outputs that related w/ vlan
​​";;RedHatEnterpriseLinux7/RHEL7-95961
2920;;;;;;;;;11;"11.Test vlan when id=4095 in guest, select one guest, and create vlan 4095.
 # ip link add link em1 name em1.4095 type vlan id 4095";"11. can not create vlan 4095, output like this :
 RTNETLINK answers: Numerical result out of range
​​";;RedHatEnterpriseLinux7/RHEL7-95961
2921;RHEL7-95964;[virtual network][virtual-nic-device] Promisc Mode;Promisc mode: change guest's nic promisc and -promisc mode repeatedly, and meanwhile transfer data from guest to host, after finished check md5sum';Yu Wang (wyu);Medium;Positive;Automated;405380;1;" 1.Boot a guest w/ vhost=on
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \
 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd,vhost=on \";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-95964
2921;;;;;;;;;2;"2.Transfer file from guest to host.
 For linux, we could use scp tool to test.
 For tun/tap backend (bridge-utils based & openvswitch based)
 Transfer file(4Gfile) from guest to host.
 Guest# scp $file_name root@$host_ip:/home/file_from_guest.

 For macvtap backend
 Transfer file(4Gfile) from guest to an external host.
 Guest# scp $file_name root@$Externel_host_ip:/home/file_from_guest.

 For windows, we could use winscp to test this, paste winscp link here:
 link:http://download.winscp.net/download/files/201308020500a26f8b56853235615225a5e4621b3443/winscp516setup.exe
 For tun/tap backend (bridge-utils based & openvswitch based)
 Transfer file(4Gfile) from guest to host.

 For macvtap backend
 Transfer file(4Gfile) from guest to an external host.";​​;;RedHatEnterpriseLinux7/RHEL7-95964
2921;;;;;;;;;3;"3.Repeatedly enable promisc and disable promisc mode inside guest:
 For linux, can use this script:
 # while true; do ifconfig eth0 promisc ; sleep 0.1; ifconfig eth0 -promisc; sleep 0.1; done

 For windows, run set_win_promisc.py  (need install python in guest)
 (pls refer to setup, and can also find this script in /usr/share/avocado-plugins-vt/shared/scripts/set_win_promisc.py)
";"the linux guest, check the ""ifconfig $interface"", the output
 will change between promisc and nopromisc.";;RedHatEnterpriseLinux7/RHEL7-95964
2921;;;;;;;;;4;"4.After transferred, check md5 value of both sides.
 For linux:
 Guest&host&external_host# md5sum $file_name

 For windows, refer to this link to download chksum tools:
 http://www.microsoft.com/en-us/download/confirmation.aspx?id=11533";md5sum is same after transferred.;;RedHatEnterpriseLinux7/RHEL7-95964
2922;RHEL7-95965;[virtual network][virtual-nic-device] PXE Booting;Install guest via pxe boot. Install guest OS by public PXE/TFTP server --- only install rhel is OK.;Yu Wang (wyu);Critical;Positive;Automated;405381;1;" 1.Create a empty image via qemu-img
 # qemu-img create -f $format $image_name 30G ...(if need, please add other options)";1. img created;Test Case;RedHatEnterpriseLinux7/RHEL7-95965
2922;;;;;;;;;2;"2.Boot this image with ""-boot menu=on"" and ""vhost=on"" in ""-netdev"" option.
 For tun/tap backend (bridge-utils based & openvswitch based)
 -boot menu=on
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \

 For macvtap backend
 -boot menu=on
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd,vhost=on \";"2. guest boot up successfully
​​";;RedHatEnterpriseLinux7/RHEL7-95965
2922;;;;;;;;;3;3.On seabios window, press f12, access the boot menu.;"3. access to boot menu
​​";;RedHatEnterpriseLinux7/RHEL7-95965
2922;;;;;;;;;4;"4.In host, try to dump the tftp protocol pkgs:
 # tcpdump -i test11 -T tftp |tee tcpdump";"4. tcpdump started
​​";;RedHatEnterpriseLinux7/RHEL7-95965
2922;;;;;;;;;5;"5.On seabios window, select ""iPXE (PCI ...)"" item.";"5. select iPXE...
​​";;RedHatEnterpriseLinux7/RHEL7-95965
2922;;;;;;;;;6;6.Secect one pxe installing profile, and start installing.;"6. the guest can start installing and can finish installation
 successfully.";;RedHatEnterpriseLinux7/RHEL7-95965
2922;;;;;;;;;7;7.Check the tcpdump during installing.;7. can get tftp pkgs from the dump file.;;RedHatEnterpriseLinux7/RHEL7-95965
2923;RHEL7-95966;[virtual network][virtual-nic-device] Send buffer test -- not test for macvtap;"Tap buffer size test. Boot guest with -netdev tap,sndbuf=1048576.... , then scp file from guest to host and from host to guest, check md5sum, and test nerperf UDP_STREAM protocal, then compare the cpu consumes from sndbuf=0(default), when sndbuf=1048576, the cpu is less used.
 https://bugzilla.redhat.com/show_bug.cgi?id=1190573";Yu Wang (wyu);Medium;Positive;Automated;405383;1;" 1.Boot a guest w/ vhost=on and sndbuf=1048576
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,sndbuf=1048576,script=/etc/ifup_script,downscript=/etc/ifdown_script \";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-95966
2923;;;;;;;;;2;"2.Transfer file from guest to host.
 For linux, we could use scp tool to test.
 For tun/tap backend (bridge-utils based & openvswitch based)
 Transfer file(2Gfile) from guest to host.
 Guest# scp $file_name root@$host_ip:/home/file_from_guest.

 For windows, we could use winscp to test this, paste winscp link here:
 link:http://download.winscp.net/download/files/201308020500a26f8b56853235615225a5e4621b3443/winscp516setup.exe
 For tun/tap backend (bridge-utils based & openvswitch based)
 Transfer file(2Gfile) from guest to host.";​​;;RedHatEnterpriseLinux7/RHEL7-95966
2923;;;;;;;;;3;"3.Chech md5 value of both sides.
 For linux:
 Guest&host&external_host# md5sum $file_name

 For windows, refer to this link to download chksum tools:
 http://www.microsoft.com/en-us/download/confirmation.aspx?id=11533";the value of md5 is same after transferring;;RedHatEnterpriseLinux7/RHEL7-95966
2923;;;;;;;;;4;"4.Install netperf in both host and guest,and:
 For tun/tap backend (bridge-utils based & openvswitch based)
 run netserver in host
 #netserver";​​;;RedHatEnterpriseLinux7/RHEL7-95966
2923;;;;;;;;;5;"5.Start netperf test in UDP_STREAM protocol inside guest.
 # netperf -H $host&external_host_ip -t UDP_STREAM -l 60";"netperf test can start and finish with no error, the
 performance is acceptable";;RedHatEnterpriseLinux7/RHEL7-95966
2923;;;;;;;;;6;"6.During netperf testing, from an external host ping the host whitch booting the guest. When the netperf test finished, quit pinging.
 # ping $host_ip";ping successfully and no pkg lost;;RedHatEnterpriseLinux7/RHEL7-95966
2924;RHEL7-95967;[virtual network][virtual-nic-device] Test driver load/unload (disable/enable);Load/unload driver. Repeatedly load/unload NIC driver, transfer file from host to guest with multiple sessions, verify transmission by md5sum.;Yu Wang (wyu);Critical;Positive;Automated;405367;1;" 1.Boot a guest w/ vhost=on
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \
 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd,vhost=on \"; 1.After step2, step4, ping test successfully, no pkg lost.;Test Case;RedHatEnterpriseLinux7/RHEL7-95967
2924;;;;;;;;;2;"2.Only for windows:
    check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck 
     #verifier /querysettings";"2.All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95967
2924;;;;;;;;;3;"3.Transfer a 2G file from guest to host and 
 for linux:# scp $file_name root@$host_ip:/home/file_from_guest
              # md5summ $file_name
 for windows: scp file using winscp";3. file transferred successfully,;;RedHatEnterpriseLinux7/RHEL7-95967
2924;;;;;;;;;4;"4.during step3, inside guest, load/unload NIC driver, virtio_net in this case.
 For linux:
 # for i in $(seq 100); do modprobe -r virtio_net ; sleep 0.1; modprobe virtio_net ; sleep 0.1 ; done
 For windows:
 disable driver:
 Device Manager -->"" Network adapters""--> right click ""Redhat VirtIO Ethernet Adapter"" --> Disable
 enable driver:
 Device Manager -->"" Network adapters""--> right click ""Redhat VirtIO Ethernet Adapter"" --> Enable
";"3 the driver is load successfully, check following:
 For linux: when ""# lsmod |grep $driver_name"", output the corresponding drivers.
 when ""ifconfig $interface_name"", the corresponding interface have got ip
 address.

 For windows: no errors";;RedHatEnterpriseLinux7/RHEL7-95967
2924;;;;;;;;;5;"5. check network by ping external host from guest.
 For linux: #pkill dhclient
                #dhclient
                # ping $external_ip -c 10
 For windows:# ping $external_ip -n 10";4. ping successfully;;RedHatEnterpriseLinux7/RHEL7-95967
2924;;;;;;;;;6;6. check md5 value.;"6.  md5sum is same after
​​";;RedHatEnterpriseLinux7/RHEL7-95967
2925;RHEL7-95968;[virtual network][virtual-nic-device] Migrate guest while scp files;Transfer data between guests during migration.;Yu Wang (wyu);High;Positive;Automated;405814;1;"1. start guest w/ virtio-net-pci
 For tun/tap backend:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0
 For macvtap backend:
 -netdev tap,id=dev1,fd=$fd,vhost=on \ 
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \"; 1. guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95968
2925;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck
    #verifier /querysettings ";"2.All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-95968
2925;;;;;;;;;3;"3. scp files from guest to host
 For linux: # scp $file_name -lroot $external_host_ip:/home/$receivefile
 For windows: use winscp";3.no error occurs;;RedHatEnterpriseLinux7/RHEL7-95968
2925;;;;;;;;;4;"4.start listenning port in another host with the same qemu command in step1 and add ""-incoming tcp:0:5888""";4.the listening port could start successfully;;RedHatEnterpriseLinux7/RHEL7-95968
2925;;;;;;;;;5;"5.during step3,do live migration:
 {""execute"": ""migrate"",""arguments"":{""uri"": ""tcp:des_host_ip:5888""}}";"5.no error msg display in qmp:
 {""return"": {}}";;RedHatEnterpriseLinux7/RHEL7-95968
2925;;;;;;;;;6;"6. Check the md5 value of both files on both guests
 #md5sum $filename";6 md5 value is the same as guest ;;RedHatEnterpriseLinux7/RHEL7-95968
2926;RHEL7-95971;[virtual network][virtual-nic-device] UFO test for ipv6 -- only for linux;UFO test for ipv6.;Yu Wang (wyu);Medium;Positive;Not Automated;;1;" 1.Boot 2 guests of virtio-net-pci
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,status=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \
";;Test Case;RedHatEnterpriseLinux7/RHEL7-95971
2926;;;;;;;;;2;"2.Check if the ufo is enabled in host:
 host # ethtool -k tap0
 host # ethtool -k tap1";;;RedHatEnterpriseLinux7/RHEL7-95971
2926;;;;;;;;;3;"3.Inside guest, configure ip address for the interface
 guest1 # ifconfig eth0 add 2001::2/64 up
 guest2 # ifconfig eth0 add 2001::3/64 up";​​;;RedHatEnterpriseLinux7/RHEL7-95971
2926;;;;;;;;;4;"4.Confirm the ufo of guest1 is on, if it is not enabled, enable it:
 guest1# ethtool -k eth0 ufo -- first check
 192.168.1.3
 guest1# ethtool -K eth0 ufo on -- if is disabled, enable it
 guest1# ethtool -k eth0 ufo --- check again to make sure it is enabled";​​;;RedHatEnterpriseLinux7/RHEL7-95971
2926;;;;;;;;;5;"5.Inside guest1, use tcpdump to monitor the pkgs of udp
 # tcpdump -vvv udp";​​;;RedHatEnterpriseLinux7/RHEL7-95971
2926;;;;;;;;;6;"6.In guest2, run netserver
 # netserver -6";​​;;RedHatEnterpriseLinux7/RHEL7-95971
2926;;;;;;;;;7;"7.In guest1, run netperf and UDP_STREAM protocol for 60s
 # netperf -H 2001::3 -t UDP_STREAM -l 60";​​;;RedHatEnterpriseLinux7/RHEL7-95971
2926;;;;;;;;;8;8.During netperf test, watching tcpdump result.;the lenth should be as 65507;;RedHatEnterpriseLinux7/RHEL7-95971
2926;;;;;;;;;9;"9.Disable ufo of guest1 after the netperf test done.
 guest1 # ethtool -K eth0 ufo off
 guest1 # ethtool -k eth0 ufo --- check again to make sure it is disabled";​​;;RedHatEnterpriseLinux7/RHEL7-95971
2926;;;;;;;;;10;"10.Re run netperf UDP_STREAM protocol for 60s
 # netperf -H 2001::3 -t UDP_STREAM -l 60";​​;;RedHatEnterpriseLinux7/RHEL7-95971
2926;;;;;;;;;11;11.During netperf test, watching tcpdump result.;"the lenth should be fragmented to be 1448.
 .... frag(....|1448)";;RedHatEnterpriseLinux7/RHEL7-95971
2927;RHEL7-95972;[virtual network][virtual-nic-device] UFO test for ipv4 -- only for linux;"UFO test for ipv4.
Not support on RHEL8";Yu Wang (wyu);Medium;Positive;Not Automated;435168;1;" 1.Boot 2 guests of virtio-net-pci
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,status=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \"; ;Test Case;RedHatEnterpriseLinux7/RHEL7-95972
2927;;;;;;;;;2;"2.Check if the ufo is enabled in host:
 host # ethtool -k tap0
 host # ethtool -k tap1";the ufo should be enabled by default. ;;RedHatEnterpriseLinux7/RHEL7-95972
2927;;;;;;;;;3;"3.Inside guest, configure ip address for the interface
 guest1 # ifconfig eth0 192.168.1.2/24 up
 guest2 # ifconfig eth0 192.168.1.3/24 up";"
​​";;RedHatEnterpriseLinux7/RHEL7-95972
2927;;;;;;;;;4;"4.Confirm the ufo of guest1 is on, if it is not enabled, enable it:
 guest1# ethtool -k eth0 ufo -- first check
 guest1# ethtool -K eth0 ufo on -- if is disabled, enable it
 guest1# ethtool -k eth0 ufo --- check again to make sure it is enabled";"
​​";;RedHatEnterpriseLinux7/RHEL7-95972
2927;;;;;;;;;5;"5.Inside guest1, use tcpdump to monitor the pkgs of udp
 # tcpdump -vvv udp";"
​​";;RedHatEnterpriseLinux7/RHEL7-95972
2927;;;;;;;;;6;"6.In guest2, run netserver
 # netserver";"
​​";;RedHatEnterpriseLinux7/RHEL7-95972
2927;;;;;;;;;7;"7.In guest1, run netperf and UDP_STREAM protocol for 60s
 # netperf -H 192.168.1.3 -t UDP_STREAM -l 60";"
​​";;RedHatEnterpriseLinux7/RHEL7-95972
2927;;;;;;;;;8;8.During netperf test, watching tcpdump result.;the lenth should be as 65507;;RedHatEnterpriseLinux7/RHEL7-95972
2927;;;;;;;;;9;"9.Disable ufo of guest1 after the netperf test done.
 guest1 # ethtool -K eth0 ufo off
 guest1 # ethtool -k eth0 ufo --- check again to make sure it is disabled";"
​​";;RedHatEnterpriseLinux7/RHEL7-95972
2927;;;;;;;;;10;"10.Re run netperf UDP_STREAM protocol for 60s
 # netperf -H 192.168.1.3 -t UDP_STREAM -l 60";"
​​";;RedHatEnterpriseLinux7/RHEL7-95972
2927;;;;;;;;;11;11.During netperf test, watching tcpdump result.;"the lenth should be fragmented to be 1500.
 .... frag(....|1500)";;RedHatEnterpriseLinux7/RHEL7-95972
2928;RHEL7-95973;[virtual network][virtual-nic-device] sndbuf=100 and stop guest during pkgten test. --- only for linux;sndbuf=100 and stop guest during pkgten test. --- linux guest only.;Yu Wang (wyu);Medium;Positive;Not Automated;414190;1;" 1.Boot guest with sndbuf=100 and vhost=off
 ...
 -qmp unix:/tmp/q1,server,nowait \
 -netdev tap,id=hostnet0,vhost=off,sndbuf=100,script=/etc/qemu-ifup \
 -device virtio-net-pci,netdev=hostnet0,id=vnet0,mac=52:54:00:1a:2b:01 \"; 1.After all steps, no crash and error occurs.;Test Case;RedHatEnterpriseLinux7/RHEL7-95973
2928;;;;;;;;;2;"2.In guest, modify the pktgen script, set the dst address as host's and start pktgen test to host
 # cat pktgen.sh
 ...
 pgset ""dst $host_ip""
 pgset ""dst_mac $host-macaddress""
 ...
 #./pktgen.sh eth0";"
​​";;RedHatEnterpriseLinux7/RHEL7-95973
2928;;;;;;;;;3;"3.After 15s, stop guest under hmp
 (qemu) stop";"
​​";;RedHatEnterpriseLinux7/RHEL7-95973
2928;;;;;;;;;4;"4.After 30s, continue guest under hmp
 (qemu) c";"
​​";;RedHatEnterpriseLinux7/RHEL7-95973
2928;;;;;;;;;5;5.Shutdown this guest, and boot it with vhost=on, and repeat 2~3.;"
​​";;RedHatEnterpriseLinux7/RHEL7-95973
2928;;;;;;;;;6;6.Shutdown guest, and boot guest as step1 with vhost=off and sndbuf=100;"
​​";;RedHatEnterpriseLinux7/RHEL7-95973
2928;;;;;;;;;7;7.Modify the dst_mac as the MAC that not match the host_ip address (change mac it to another one ), and repeat 2~4;"
​​";;RedHatEnterpriseLinux7/RHEL7-95973
2928;;;;;;;;;8;8.Shutdown guest, and boot geust as step7 with vhost=on and sndbuf=100.;"
​​";;RedHatEnterpriseLinux7/RHEL7-95973
2929;RHEL7-95974;[virtual network][virtual-nic-device] Guest can not mirror flows between other guests -- only for linux;Guest can not mirror flows between other guests.;Yu Wang (wyu);Critical;Positive;Automated;405854;1;" 1.Boot 3 guests w/ vhost=on
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \
 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd,vhost=on"; 1.After step4, check the result of tcpdump, no print.;Test Case;RedHatEnterpriseLinux7/RHEL7-95974
2929;;;;;;;;;2;2.Get all ip addresses of these 3 guests;2.After step5, md5 value matches for each transfer.;;RedHatEnterpriseLinux7/RHEL7-95974
2929;;;;;;;;;3;"3.In guest1, start tcpdump and try to capture pkgs between the other guests until step4 finished
 # tcpdump -s 0 -n tcp -vv port ssh and dst $guest2 and src $guest3 -i $interface_guest1";3.No matter vhost=on or off, the result should be same.;;RedHatEnterpriseLinux7/RHEL7-95974
2929;;;;;;;;;4;"4.Transfter files (2G size) from guest2 to guest3, and then transfter another file from guest3 to guest2 use scp.
 guest2(3)# scp $file root@$ip_guest3(2):/home/";​​;;RedHatEnterpriseLinux7/RHEL7-95974
2929;;;;;;;;;5;5.Check md5 value of all files.;​​;;RedHatEnterpriseLinux7/RHEL7-95974
2930;RHEL7-95975;[virtual network][virtual-nic-device] ActiveBackup testing by team driver inside guest. -- only for linux;ActiveBackup testing by team driver inside guest.;Yu Wang (wyu);Medium;Positive;Manual Only;;1;"1. Prepare env
 # sh bz1253539-setup.sh (remember to modify this script according to the backend used, bridge or ovs? em1 and em2 used for test, em3 linked to external network in this script. modify accordingly) 
​​";"env prepared
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-95975
2930;;;;;;;;;2;"2. Boot guest with more than 2 nics, please use same nic model
 e.g.
 -netdev tap,id=hostnet0,vhost=off,script=/etc/ovs1-ifup,downscript=/etc/ovs1-ifdown -device virtio-net-pci,netdev=hostnet0,id=vnet0,mac=52:54:00:1a:2b:01 \
 -netdev tap,id=hostnet1,vhost=off,script=/etc/ovs2-ifup,downscript=/etc/ovs2-ifdown -device virtio-net-pci,netdev=hostnet1,id=vnet1,mac=52:54:00:1a:2b:02";  can boot successfully.;;RedHatEnterpriseLinux7/RHEL7-95975
2930;;;;;;;;;3;"3. Inside guest, run the script attached.
 #ifconfig eth0 0 up
 #ifconfig eth1 0 up
 # sh team_ab_test.sh $host_virbr0ip
 (modify the script ""team_ab_test.sh"" +64)
 #dhclient -v team0
 ifconfig team0 192.168.122.2";reter to the script result, the packets loss should less than 5%.;;RedHatEnterpriseLinux7/RHEL7-95975
2931;RHEL7-95976;[virtual network][virual-nic-device] Basic QinQ test - 10x4094 check -- only for linux;"Test 10x802.1ad and 1024x802.1q, please use the script attached.  
tips: do not check the nic interface after adding 10X4094 vlan link. you will wait for a very long time to let guest show up all the nics";Yu Wang (wyu);High;Positive;Not Automated;;1;1.Boot guest in a bridge, better boot it in a private bridge, in order to capture clearly by tcpdump;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-95976
2931;;;;;;;;;2;"2.Create vlans via the script attached
 # sh qinq.sh eth0";"Check with ip
";;RedHatEnterpriseLinux7/RHEL7-95976
2931;;;;;;;;;3;"3.Select same vlan of the l1 tag in guest, e.g. the interface with vid 10, and configure ip address for it.
 guest1 # ip link set v1v10 add 54:52:01:2a:0b:01 up                         ---- (or you can specify a mac address yourself, and for other steps, you need modify other mac address.)
 guest1# ifconfig v1v10 192.168.10.10/24 up";can configure successfully.;;RedHatEnterpriseLinux7/RHEL7-95976
2931;;;;;;;;;4;"4.Try to capture the packets via tcpdump in guest via v1v10 and eth0
 # tcpdump -xxleni v1v10
 # tcpdump -xxleni eth0";​​;;RedHatEnterpriseLinux7/RHEL7-95976
2931;;;;;;;;;5;"5.Create the 802.1ad vlan via the bridge, and configure the ip address. And the vid should be the same as the one in step3, the ip address should be in the same network as in step3.
 # ip link add link switch name vbr10 type vlan proto 802.1ad id 10
 # ip link set vbr10 add 54:52:01:2a:0b:02 up                         ---- (or you can specify a mac address yourself)
 # ifconfig vbr10 192.168.10.1/24 up";Can created successfully.;;RedHatEnterpriseLinux7/RHEL7-95976
2931;;;;;;;;;6;"6.ping from host to guest via vbr10 for 100 counts
 # ping 192.168.10.10 -c 100 -I vbr10";The packets loss should be less than 5%;;RedHatEnterpriseLinux7/RHEL7-95976
2931;;;;;;;;;7;7.Check the tcpdump result;"From v1v10, no vlan tag exist, and the ethertype is 0x0800
 From eth0, the ""ICMP echo reply/request"" has one vlan tag, same as you select from step3, and the ethertype is 802.1Q-QinQ(0x88a8)";;RedHatEnterpriseLinux7/RHEL7-95976
2931;;;;;;;;;8;"8.Select same vlan of the l2 tag in guest, e.g. the interface with vid 20, and configure ip address for it
 guest1# ifconfig v2v10_20 192.168.20.10/24 up";can configure successfully.;;RedHatEnterpriseLinux7/RHEL7-95976
2931;;;;;;;;;9;"9.Try to capture the packets via tcpdump in guest via v1v10 v2v10_20 and eth0
 # tcpdump -xxleni v1v10
 # tcpdump -xxleni v2v10_20
 # tcpdump -xxleni eth0";​​;;RedHatEnterpriseLinux7/RHEL7-95976
2931;;;;;;;;;10;"10.Create the 802.1q vlan via the 802.1ad vlan created in step5, and configure the ip address. And the vid should be the same as the one in step8, the ip address should be in the same network as in step8.
 # ip link add link vbr10 name vbr10_20 type vlan id 20
 # ifconfig vbr10_20 192.168.20.1/24 up";Can created successfully.;;RedHatEnterpriseLinux7/RHEL7-95976
2931;;;;;;;;;11;"11.ping from host to guest via vbr10_20 for 100 counts
 # ping 192.168.20.10 -c 100 -I vbr10_20";The packets loss should be less than 5%;;RedHatEnterpriseLinux7/RHEL7-95976
2931;;;;;;;;;12;12.Check the tcpdump resultFrom v2v10_20, no vlan tag exist, the ethertype is 0x0800;"From v1v10, one vlan tag exist, and the ethertype is 0x8100
 From eth0, the ""ICMP echo reply/request"" has two vlan tags, same as you select from step3 and step8, and the ethertype is [  802.1Q-QinQ(0x88a8) and 802.1Q(0x8100)] OR [ double tagged:  802.1Q(0x8100) and 802.1Q(0x8100)]";;RedHatEnterpriseLinux7/RHEL7-95976
2931;;;;;;;;;13;"13.Test nerperf with l2 tag vlan
 # netperf -H 192.168.20.10 -l 120
 # netperf -H 192.168.20.10 -l 120 -t UDP_STREAM";The performance is acceptable;;RedHatEnterpriseLinux7/RHEL7-95976
2931;;;;;;;;;14;"14.Transfer fiile with l2 tag vlan
 # scp 4Gfile root@192.168.20.10:/home/";The performance is acceptable, and md5 value is right.;;RedHatEnterpriseLinux7/RHEL7-95976
2931;;;;;;;;;15;15. shutdown guests.;Can shutdown them.;;RedHatEnterpriseLinux7/RHEL7-95976
2931;;;;;;;;;16;"16. delete the vlans inside guest
 # for i in `seq 10`; do ip link delete v1v$i ; done";"this will last long, please wait w/o any other ""network related"" options.
 During and after delete, host have no error/crash/cpu lockup  occurs.";;RedHatEnterpriseLinux7/RHEL7-95976
2932;RHEL7-95977;lti[virtual network][virtual-nic-device] vhost with cgroup;Vhost with cgroup.;Yu Wang (wyu);Low;Positive;Automated;405385;1;" 1.Boot guest w/ virtio-net-pci and vhost=on, the cli like following:
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \
 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd,vhost=on \";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-95977
2932;;;;;;;;;2;"2.Get the vhost pid
 # pgrep vhost";2. can get the pid of vhost.;;RedHatEnterpriseLinux7/RHEL7-95977
2932;;;;;;;;;3;"3.Push the vhost pid to the cgroup tasks
 # echo $vhost_pid > /vhost/tasks";3. can execute w/ no error;;RedHatEnterpriseLinux7/RHEL7-95977
2932;;;;;;;;;4;"4.Check if vhost joined cgroup.
 # cat /proc/$vhost_pid/cgroup";"4. should see the similar like this (only 2 message, not show all the messages eg. cpuset,devices, memeory, blkio):
 # cat /proc/27412/cgroup
 10:cpu:/
 1:name=systemd:/user.slice/user-0.slice/session-2.scope";;RedHatEnterpriseLinux7/RHEL7-95977
2933;RHEL7-95978;[virtual network][virtual-nic-device] Test features of e1000 and e1000e driver:GRO/LRO;GRO/LRO test, this is e1000 and e1000e only test case.;Yu Wang (wyu);Low;Positive;Manual Only;405368;1;"1.Boot a guest w/ e1000 or e1000e (two nic types should all be covered)
 NOTE: Better to run this case with Q35, not PC
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device $net_device,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,script=/etc/ifup_script,downscript=/etc/ifdown_script \
 For macvtap backend
 -device $net_device,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd \";" 1. After step2,'ethtool -k eth0' in the guest should see the lro off and gro
 on";Test Case;RedHatEnterpriseLinux7/RHEL7-95978
2933;;;;;;;;;2;"2.Check LRO and GRO of e1000 or e1000e inside guest, then disable LRO and enable GRO
 #ethtool -k eth0
 #ethtool -K eth0 lro off; ethtool -K eth0 gro on";2.After step5, from tcpdump, can find that the pkt length is larger than MTU.;;RedHatEnterpriseLinux7/RHEL7-95978
2933;;;;;;;;;3;"3.Check the port used for ssh.
 For tun/tap backend (bridge-utils based & openvswitch based)
 In host, check the port that used for ssh:
 # netstat -nap |grep ssh
 For macvtap backend
 In external host, check the port that used for ssh:
 # netstat -nap |grep ssh";"3.After step5, the file is transferred successfully and md5 value is same
 after transferred.";;RedHatEnterpriseLinux7/RHEL7-95978
2933;;;;;;;;;4;"4.Dump the log of pkt length.
 For tun/tap backend (bridge-utils based & openvswitch based)
 In guest, dump the log of network to check if there exists pkt that larger than MTU.
 # tcpdump -lep src $host_ip and port $port |tee tcpdump
 For macvtap backend
 In guest, dump the log of network to check if there exists pkt that larger than MTU.
 # tcpdump -lep src $exter_host_ip and port $port |tee tcpdump";​​;;RedHatEnterpriseLinux7/RHEL7-95978
2933;;;;;;;;;5;"5.Transfer file (2G file) from host/external to guest, and after transferred, check md5 value.
 # scp $file_name root@$guest_ip:/home/receive_from_host
 # md5sum $file_name";​​;;RedHatEnterpriseLinux7/RHEL7-95978
2934;RHEL7-95979;[virtual network][spapr-vlan] Boot up guest with 8 spapr-vlan devices;Test the max number spapr-vlan devices(suggest by IBM knowledge center) on same guest;Yu Wang (wyu);High;Positive;Not Automated;472572;1;" 1. On PPC64 host :
 boot guest with 8 sPAPR vitual LAN :
 $ qemu-kvm   -machine pseries,accel=kvm
 ...
 -netdev tap,id=hostnet1,script=/etc/qemu-sPAPR-ifup,downscript=/etc/qemu-sPAPR-ifdown \
 -device spapr-vlan,netdev=hostnet1,id=net1,mac=52:54:01:c4:e7:01,reg=0x2000 \
 -netdev tap,id=hostnet2,script=/etc/qemu-liuzt-ifup,downscript=/etc/qemu-liuzt-ifdown \
 -device spapr-vlan,netdev=hostnet2,id=net2,mac=52:54:01:c4:e7:02,reg=0x3000 \
 ...
 -netdev tap,id=hostnet8,script=/etc/qemu-liuzt-ifup,downscript=/etc/qemu-liuzt-ifdown \
 -device spapr-vlan,netdev=hostnet8,id=net8,mac=52:54:01:c4:e7:08,reg=0x9000 \";  1. in step 1, the guest could be start up without any error information;Test Case;RedHatEnterpriseLinux7/RHEL7-95979
2934;;;;;;;;;2;"2.Connect to Guest with vncviewer, and in guest console,check the function through ping virbr0 with the shell script as follows:
 $cat test_multi_eth.sh
 #!/bin/sh
 ip=10
 for i in `ifconfig -a | grep eth[0-9][0-9]* | cut -b 1-4 `
 do
 echo $i

 ifconfig $i 192.168.122.$ip/24 up
 echo ""ping 192.168.122.1 -c 5""
 ping 192.168.122.1 -c 5
 ifconfig $i down
 ip=`expr $ip + 1`

 done";"2. in step 2, there is ping through message output in guest console like this:
  
 eth0
 ping 192.168.122.1 -c 5
 PING 192.168.122.1 (192.168.122.1)  56(84) bytes of data.
 64 bytes from 192.168.122.1: icmp_seq=1 ttl=64 time=5.24 ms
 64 bytes from 192.168.122.1: icmp_seq=1 ttl=64 time=0.252 ms
 64 bytes from 192.168.122.1: icmp_seq=1 ttl=64 time=0.314 ms";;RedHatEnterpriseLinux7/RHEL7-95979
2935;RHEL7-95981;[virtual network][vn-backend] Check vlan tags if packet is transferred via the vlan interface of bonding. -- only for linux;Check vlan tags if packet is transferred via the vlan interface of bonding.;Yu Wang (wyu);Medium;Positive;Manual Only;414549;1;" 1. Create a tap0 device.
 #gcc mktap.c
 #./a.out &"; 1.A vlan tag is observed into a captured packet of bond0,;Test Case;RedHatEnterpriseLinux7/RHEL7-95981
2935;;;;;;;;;2;"2. Configure and up the following interfaces.
 # modprobe bonding mode=1
 # ifconfig bond0 0 up
 # ifenslave bond0 tap0
 # ifconfig tap0 up
 # ifconfig bond0 192.168.0.1/24 up
 # ip link add link bond0 name bond0.100 type vlan id 100
 # ifconfig bond0.100 192.168.1.1/24 up";2.A vlan tag is observed into a captured packet of tap0.;;RedHatEnterpriseLinux7/RHEL7-95981
2935;;;;;;;;;3;"3. Capture on the interfaces
 # tcpdump -i tap0 -w tap0.c
 # tcpdump -i bond0 -w bond0.cap
 # tcpdump -i bond0.100 -w bond0.100.cap";3.No vlan tap is observed of bond0.100.;;RedHatEnterpriseLinux7/RHEL7-95981
2935;;;;;;;;;4;"4. Send a packet from the bond0.100.
 # arping -I bond0.100 -c 1 192.168.1.100";​​;;RedHatEnterpriseLinux7/RHEL7-95981
2935;;;;;;;;;5;5.Open the cap files via wireshark(please yum install wireshark*);​​;;RedHatEnterpriseLinux7/RHEL7-95981
2936;RHEL7-95987;[virtual network][virtual-nic-device] Boot the guest with multiple queues(256 queues) nic;Boot the guest with multiple queues(256 queues);Yu Wang (wyu);Medium;Positive;Not Automated;405553;1;" 1.Increase the maximum possible number of open file descriptors with ""ulimit -n 10240""
 #ulimit -n 10240
 #ulimit -n";"1.the maximum number of open file descriptors is 10240
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-95987
2936;;;;;;;;;2;"2.Boot a guest with multiple queues and vhost=on( for windows and pc , only support queues=203 and vectors=408 )
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=514,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=256 \
 -smp 256
 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=514,mq=on \
 -netdev tap,id=dev1,vhost=on,fds=$fd1:$fd2:...:$fd256 $fd1<>/dev/tap$index .... $fd256<>/dev/$index\
 -smp 256";"2. boot guest successfully
";;RedHatEnterpriseLinux7/RHEL7-95987
2936;;;;;;;;;3;"3.Only for linux:In guest, enable the queues (eth0 is the interface name, modify it to you real interface name)
 For linux, # ethtool -L eth0 combined 256";"3. check the queues enabled, the output is this:
 # ethtool -l eth0
 Channel parameters for eth0:
 Pre-set maximums:
 RX:        0
 TX:        0
 Other:        0
 Combined:    256
 Current hardware settings:
 RX:        0
 TX:        0
 Other:        0
 Combined:    256

 After step4 step6 ,";;RedHatEnterpriseLinux7/RHEL7-95987
2936;;;;;;;;;4;"4. check the irq number in guest
 For linux:
 # cat /proc/cmdline
 # lspci -vvv -s $pci_addr_of_Eth_device |grep MSI
 
 For windows : check the irq number in the device manager:
 computer-->properites-->device manager -->view-->resources by connection ---> Interrupt request IRQ ---> find the line with  ""Redhat VirtIO Etherpad Adapter""";"4.For linux:
 There is no ""pci=nomsi""
 # lspci -vvv -s 00:03.0 |grep MSI
 Capabilities: [40] MSI-X: Enable- Count=514 Masked-

 For windows:
 MSI is disabled,there are 514 line named Red Hat VirtIO Etherpad Adapter,and there should be negtive number in ( )
 eg :
 (PCI)0x0000000A (-2) Red Hat VirtIO Etherpad Adapter";;RedHatEnterpriseLinux7/RHEL7-95987
2936;;;;;;;;;5;"4.Start 10 scp sessions in guest and transfer 10 files from guest to host or external host
 For tun/tap backend (bridge-utils based & openvswitch based)
 # for i in $(seq 10) ; do scp bigfile$i $host_ip:/home/receivefiles/from_guest$i & ; done
 For macvtap backend
 # for i in $(seq 10) ; do scp bigfile$i $external_host_ip:/home/receivefiles/from_guest$i & ; done

 For windows: use winscp copy 10 files";"4.file can transferred successfully by no errors or call trace in dmesg, and no kernel panic
";;RedHatEnterpriseLinux7/RHEL7-95987
2936;;;;;;;;;6;5.Check md5 value of all files after transferred.;"5. md5 values are same after transferred.
​​";;RedHatEnterpriseLinux7/RHEL7-95987
2936;;;;;;;;;7;"6.Start 10 scp sessions in guest and receive 10 files from host or external host.
 For tun/tap backend (bridge-utils based & openvswitch based)
 # for i in $(seq 10) ; do scp $host_ip:/home/bigfile$i /home/receivefiles/from_host$i & ; done
 For macvtap backend
 # for i in $(seq 10) ; do scp $external_host_ip:/home/bigfile$i /home/receivefiles/from_host$i & ; done";"6. file can transferred successfully by no errors or call trace in dmesg, and no kernel panic
​​";;RedHatEnterpriseLinux7/RHEL7-95987
2936;;;;;;;;;8;7.Check md5 value of all files after transferred.;7. md5 values are same after transferred.;;RedHatEnterpriseLinux7/RHEL7-95987
2937;RHEL7-95988;[virtual network][virtual-nic-device] boot the guest with multiple queues when queues are out of range.;boot the guest with multiple queues when queues are out of range.;Yu Wang (wyu);Low;Positive;Automated;405554;1;" 1.Boot a guest with multiple queues and vhost=on, and the queues=0
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=0 \
 -smp 4
 For macvtap backend
 NTD [ will add when we actually support ]";" 1.After step1 , qemu quit and report error, but qemu-kvm won't coredump like
 this:
 (qemu) qemu-kvm: -device virtio-net-pci,mq=on,vectors=9,netdev=vnet0,mac=54:52:1a:4b:c2:01,id=vnic1: Property 'virtio-net-pci.netdev' can't find value 'vnet0'";Test Case;RedHatEnterpriseLinux7/RHEL7-95988
2937;;;;;;;;;2;"2.
 For x86_64:
 Boot a guest with multiple queues and vhost=on, and the queues=257
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=516,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=257 \
 -smp 10


 For macvtap backend
 NTD [ will add when we actually support ]";"2.
 For x86-64:
 After step2 , can not start qemu-kvm, will report error like this, but no
 core dump happened:
 qemu-kvm: -netdev tap,id=vnet0,vhost=on,script=/etc/ovs-ifup,downscript=/etc/ovs-ifdown,queues=257: could not configure /dev/net/tun (tap0): Argument list too long
 qemu-kvm: -netdev tap,id=vnet0,vhost=on,script=/etc/ovs-ifup,downscript=/etc/ovs-ifdown,queues=257: Device 'tap' could not be initialized



";;RedHatEnterpriseLinux7/RHEL7-95988
2938;RHEL7-95989;[virtual network][virtio-net-pci] boot the guest with multi nics, each nic enable mq;"Boot guest with multi nic, each nic enable multiple queue.
Delete this case, merged with RHEL7-10499";Yu Wang (wyu);Critical;Positive;Automated;405555;1;" 1. Boot guest with 2 nics in the 2 private switches , each nic enable multiple queues like :
 Tuntap:
 -smp 8,sockets=2,cores=4,threads=1 \
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/qemu-pri1-ifup,queues=4 \
 -device virtio-net-pci,netdev=dev2,mac=9a:e8:e9:ea:eb:ed,id=net2,vectors=10,mq=on \
 -netdev tap,id=dev2,vhost=on,script=/etc/qemu-pri2-ifup,queues=4";" 1.After step1, can boot up successfully
 2.After step3, can successfully enable the mq for each interface:
 # ethtool -l eth1
 Channel parameters for eth1:
 Pre-set maximums:
 RX:        0
 TX:        0
 Other:        0
 Combined:    4
 Current hardware settings:
 RX:        0
 TX:        0
 Other:        0
 Combined:    4
 # ethtool -l eth2
 Channel parameters for eth2:
 Pre-set maximums:
 RX:        0
 TX:        0
 Other:        0
 Combined:    4
 Current hardware settings:
 RX:        0
 TX:        0
 Other:        0
 Combined:    4
 3.After step3. from the interrupts, can get that each interface has 4 couples of input/output and a configure
 28: 0 0 0 0 0 0 0 0 PCI-MSI-edge virtio2-config
 29: 1285 0 0 150718 27607 0 0 0 PCI-MSI-edge virtio2-input.0
 30: 2 0 0 0 0 5 0 0 PCI-MSI-edge virtio2-output.0
 31: 1 362075 0 0 0 0 0 0 PCI-MSI-edge virtio2-input.1
 32: 1 0 0 0 0 0 10 0 PCI-MSI-edge virtio2-output.1
 33: 1 0 87826 0 0 0 0 0 PCI-MSI-edge virtio2-input.2
 34: 1 0 0 0 0 0 0 4 PCI-MSI-edge virtio2-output.2
 35: 131906 0 0 30169 0 0 0 18016 PCI-MSI-edge virtio2-input.3
 36: 1 0 0 0 3 2 1 0 PCI-MSI-edge virtio2-output.3
 37: 0 0 0 0 0 0 0 0 PCI-MSI-edge virtio3-config
 38: 5788 6728 21590 0 34689 62264 31702 2499 PCI-MSI-edge virtio3-input.0
 39: 2 0 1 0 0 2 1 0 PCI-MSI-edge virtio3-output.0
 40: 777 27241 37854 10364 67 0 33641 46747 PCI-MSI-edge virtio3-input.1
 41: 2 0 2 0 3 0 1 0 PCI-MSI-edge virtio3-output.1
 42: 56 1395 20225 0 52492 55972 81 28807 PCI-MSI-edge virtio3-input.2
 43: 1 0 0 1 0 2 1 2 PCI-MSI-edge virtio3-output.2
 44: 8769 12700 18327 0 53150 370 5509 10777 PCI-MSI-edge virtio3-input.3
 45: 1 0 1 0 3 0 1 0 PCI-MSI-edge virtio3-output.3
 4.After step 6, the vhost threads exhaust nearly same cpu resouces
 5.After step 7, the md5 value should match.";Test Case;RedHatEnterpriseLinux7/RHEL7-95989
2938;;;;;;;;;2;"2. In guest configure the ip addresses of guest
 # ifconfig eth0 192.168.10.11/24 up
 # ifconfig eth1 192.168.20.11/24 up";​​;;RedHatEnterpriseLinux7/RHEL7-95989
2938;;;;;;;;;3;"3. Enable mq on all nics.
 #ethtool -L ethx combined 4";​​;;RedHatEnterpriseLinux7/RHEL7-95989
2938;;;;;;;;;4;"4. In host, run netserver
 # netserver";​​;;RedHatEnterpriseLinux7/RHEL7-95989
2938;;;;;;;;;5;"5. In guest, run multi netperf instances for each network interfaces:
 # cat netperf.sh
 #!/bin/sh
 for i in $(seq 10)
 do
 netperf -H $1 -l 120 &
 netperf -H $2 -l 120 &
 done
 # sh netperf.sh 192.168.10.10 192.168.20.10";​​;;RedHatEnterpriseLinux7/RHEL7-95989
2938;;;;;;;;;6;"6.Monitor the vhost processes in host
 # top -p $vhost_threads";​​;;RedHatEnterpriseLinux7/RHEL7-95989
2938;;;;;;;;;7;"7.Transfer two 2G files from guest to host, and check md5 value after transfer:
 # scp file1 root@192.168.10.10:/home/ &
 # scp file2 root@192.168.20.10:/home/ &
 #md5sum file1 ; md5sum file2";​​;;RedHatEnterpriseLinux7/RHEL7-95989
2939;RHEL7-95990;[virtual network][virtual-nic-device] boot the guest with N queues with smp N, run single network instance -- only for linux;Boot a guest with N queues with smp N, start a single instance of netperf and make sure only 1 vhost threads is working in the host, only 1 vcpus were used to process the packets.;Yu Wang (wyu);Critical;Positive;Automated;405556;1;" 1.Boot a guest with multiple queues and vhost=on
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=4 \
 -smp 4
 For macvtap backend
 NTD [ will add when we actually support ]";" 1.After step2, in guest, ethtool -l can see the channel parameters of the
 interface
 Pre-set maximums:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4
 Currten hardware settings:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4
 2.After step3, can get the queues and cpus and irqs like this, 4 couple of
 queues (input/output)
 ...
 44: 0 0 0 0 PCI-MSI-edge virtio1-config
 45: 7596 77 7 3006 PCI-MSI-edge virtio1-input.0
 46: 1 0 0 0 PCI-MSI-edge virtio1-output.0
 47: 674 525 1 184 PCI-MSI-edge virtio1-input.1
 48: 0 0 1 0 PCI-MSI-edge virtio1-output.1
 49: 761 0 418 378 PCI-MSI-edge virtio1-input.2
 50: 2 1 0 0 PCI-MSI-edge virtio1-output.2
 51: 1 0 1205 29364 PCI-MSI-edge virtio1-input.3
 52: 0 18 1 0 PCI-MSI-edge virtio1-output.3
 ...
 3.After step5, cat get that the values of affinity_hint of irqs of each couple
 of queues are same, and from couple 0 to couple 1, but the values of
 smp_affinity are not in rule.
 the output of the script should be this:
 affinity_hint of irq45 is 1
 smp_affinity of irq45 is 1
 affinity_hint of irq46 is 1
 smp_affinity of irq46 is 2
 affinity_hint of irq47 is 2
 smp_affinity of irq47 is 1
 affinity_hint of irq48 is 2
 smp_affinity of irq48 is 2
 affinity_hint of irq49 is 4
 smp_affinity of irq49 is 1
 affinity_hint of irq50 is 4
 smp_affinity of irq50 is 2
 affinity_hint of irq51 is 8
 smp_affinity of irq51 is 4
 affinity_hint of irq52 is 8
 smp_affinity of irq52 is 2
 4.After step6, the values of affinity_hint and corresponding smp_affinity
 changed same.the output of the script is:
 smp_affinity of irq45 is 1
 affinity_hint of irq45 is 1
 smp_affinity of irq46 is 1
 affinity_hint of irq46 is 1
 smp_affinity of irq47 is 2
 affinity_hint of irq47 is 2
 smp_affinity of irq48 is 2
 affinity_hint of irq48 is 2
 smp_affinity of irq49 is 4
 affinity_hint of irq49 is 4
 smp_affinity of irq50 is 4
 affinity_hint of irq50 is 4
 smp_affinity of irq51 is 8
 affinity_hint of irq51 is 8
 smp_affinity of irq52 is 8
 affinity_hint of irq52 is 8
 5.After step8, the netperf test can be started and can be finished
 successfully.
 6.After step9, only one cpu works according the the interrupts table, and only
 one vhost process works in host.
 7.After step10, the netperf test can be started and can be finished
 successfully.
 8.After step11, during one netperf session, only one cpu works according the
 the interrupts table, and only one vhost process works in host, and when the
 loop start another netperf session, change cpu works and change vhost process
 works.";Test Case;RedHatEnterpriseLinux7/RHEL7-95990
2939;;;;;;;;;2;"2.In guest, enable the queues (eth0 is the interface name, modify it to you real interface name)
 For linux, # ethtool -L eth0 combined 4
 For windows, TBD";​​;;RedHatEnterpriseLinux7/RHEL7-95990
2939;;;;;;;;;3;"3.Check irqs of each couple of queues in guest, only for linux, the following steps are all only for linux.
 # cat /proc/interrupts |grep virtio";​​;;RedHatEnterpriseLinux7/RHEL7-95990
2939;;;;;;;;;4;"4.Stop irqbalance service in guest.
 # systemctl stop irqbalance.service";​​;;RedHatEnterpriseLinux7/RHEL7-95990
2939;;;;;;;;;5;"5.Check affinity_hint and smp_affinity of corresponding irq, refer to this script:
 # cat check.sh
 #!/bin/sh
 for i in 45 46 47 48 49 50 51 52
 # 45 46 47 48 49 50 51 52 are the irqs I used in my test, please modify them when you test.
 do
 ret=`cat /proc/irq/$i/affinity_hint`
 echo ""affinity_hint of irq$i is $ret""
 ret=`cat /proc/irq/$i/smp_affinity`
 echo ""smp_affinity of irq$i is $ret""
 done";​​;;RedHatEnterpriseLinux7/RHEL7-95990
2939;;;;;;;;;6;"6.Make the smp_affinity of each irq is same as the corresponding affinity_hint, refer to this script:
 # cat veriy.sh
 #!/bin/sh
 for i in 45 46 47 48 49 50 51 52
 # 45 46 47 48 49 50 51 52 are the irqs I used in my test, please modify them when you test.
 do
 ret=`cat /proc/irq/$i/affinity_hint`
 echo $ret >/proc/irq/$i/smp_affinity
 ret=`cat /proc/irq/$i/smp_affinity`
 echo ""smp_affinity of irq$i is $ret""
 ret=`cat /proc/irq/$i/affinity_hint`
 echo ""affinity_hint of irq$i is $ret""
 done";​​;;RedHatEnterpriseLinux7/RHEL7-95990
2939;;;;;;;;;7;"7.Run netserver in host or external host.
 For tun/tap backend (bridge-utils based & openvswitch based), run netserver in host
 # netserver
 For macvtap backend, run netserver in external host.
 # netserver";​​;;RedHatEnterpriseLinux7/RHEL7-95990
2939;;;;;;;;;8;"### step8 and step9 will not be tested. confused here.
 8.run netperf client inside guest.
 #netperf -H $HOST_IP&External_host_ip -l 60";​​;;RedHatEnterpriseLinux7/RHEL7-95990
2939;;;;;;;;;9;"### step8 and step9 will not be tested. confused here.
 9.During netperf test, watch the cpu interrupts of virtio queues in guest, and resource consumes of vhost processes in host.
 Guest # cat /proc/interrupts |grep virtio
 Host # pgrep vhost
 Host # top -p $pids_of_vhosts";​​;;RedHatEnterpriseLinux7/RHEL7-95990
2939;;;;;;;;;10;"10.Using task -c to make sure run one single netperf in each cpu of guest
 #for i in 0 1 2 3; do taskset -c $i netperf -H $HOST_IP&External_host_ip -l 60 ;done";​​;;RedHatEnterpriseLinux7/RHEL7-95990
2939;;;;;;;;;11;"11.During netperf test, watch the cpu interrupts of virtio queues in guest, and resource consumes of vhost processes in host.
 Guest # cat /proc/interrupts |grep virtio
 Host # pgrep vhost
 Host # top -p $pids_of_vhosts";​​;;RedHatEnterpriseLinux7/RHEL7-95990
2940;RHEL7-95991;[virtual network][virtual-nic-device] Boot the guest with N queues with smp N, run multiple instance -- only for linux;Boot a guest with N queues with smp N, start M instances of netperf (M < N) and make sure, only M vhost threads is working in the host, only M vcpus were used to process the packets.;Yu Wang (wyu);Critical;Positive;Automated;405557;1;" 1.Boot a guest with multiple queues and vhost=on
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=4 \
 -smp 4
 For macvtap backend
 NTD [ will add when we actually support ]";1. guest boot up successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-95991
2940;;;;;;;;;2;"2.In guest, enable the queues (eth0 is the interface name, modify it to you real interface name)
 For linux, # ethtool -L eth0 combined 4
 For windows, TBD";"2. in guest, ethtool -l can see the channel parameters of the
 interface
 Pre-set maximums:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4
 Currten hardware settings:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4";;RedHatEnterpriseLinux7/RHEL7-95991
2940;;;;;;;;;3;"3.Check irqs of each couple of queues in guest, only for linux, the following steps are all only for linux.
 # cat /proc/interrupts |grep virtio";"3. can get the queues and cpus and irqs like this, 4 couple of
 queues (input/output)
 ...
 44: 0 0 0 0 PCI-MSI-edge virtio1-config
 45: 7596 77 7 3006 PCI-MSI-edge virtio1-input.0
 46: 1 0 0 0 PCI-MSI-edge virtio1-output.0
 47: 674 525 1 184 PCI-MSI-edge virtio1-input.1
 48: 0 0 1 0 PCI-MSI-edge virtio1-output.1
 49: 761 0 418 378 PCI-MSI-edge virtio1-input.2
 50: 2 1 0 0 PCI-MSI-edge virtio1-output.2
 51: 1 0 1205 29364 PCI-MSI-edge virtio1-input.3
 52: 0 18 1 0 PCI-MSI-edge virtio1-output.3
 ...";;RedHatEnterpriseLinux7/RHEL7-95991
2940;;;;;;;;;4;"4.Stop irqbalance service in guest.
 # systemctl stop irqbalance.service";"4. irqbalance stopped
​​";;RedHatEnterpriseLinux7/RHEL7-95991
2940;;;;;;;;;5;"5.Check affinity_hint and smp_affinity of corresponding irq, refer to this script:
 # cat check.sh
 #!/bin/sh
 for i in 45 46 47 48 49 50 51 52
 # 45 46 47 48 49 50 51 52 are the irqs I used in my test, please modify them when you test.
 do
 ret=`cat /proc/irq/$i/affinity_hint`
 echo ""affinity_hint of irq$i is $ret""
 ret=`cat /proc/irq/$i/smp_affinity`
 echo ""smp_affinity of irq$i is $ret""
 done";"5. cat get that the values of affinity_hint of irqs of each
 couple of queues are same, and from couple 0 to couple 1, but the values of
 smp_affinity are not in rule.
 the output of the script should be this:
 affinity_hint of irq45 is 1
 smp_affinity of irq45 is 1
 affinity_hint of irq46 is 1
 smp_affinity of irq46 is 2
 affinity_hint of irq47 is 2
 smp_affinity of irq47 is 1
 affinity_hint of irq48 is 2
 smp_affinity of irq48 is 2
 affinity_hint of irq49 is 4
 smp_affinity of irq49 is 1
 affinity_hint of irq50 is 4
 smp_affinity of irq50 is 2
 affinity_hint of irq51 is 8
 smp_affinity of irq51 is 4
 affinity_hint of irq52 is 8
 smp_affinity of irq52 is 2";;RedHatEnterpriseLinux7/RHEL7-95991
2940;;;;;;;;;6;"6.Make the smp_affinity of each irq is same as the corresponding affinity_hint, refer to this script:
 # cat veriy.sh
 #!/bin/sh
 for i in 45 46 47 48 49 50 51 52
 # 45 46 47 48 49 50 51 52 are the irqs I used in my test, please modify them when you test.
 do
 ret=`cat /proc/irq/$i/affinity_hint`
 echo $ret >/proc/irq/$i/smp_affinity
 ret=`cat /proc/irq/$i/smp_affinity`
 echo ""smp_affinity of irq$i is $ret""
 ret=`cat /proc/irq/$i/affinity_hint`
 echo ""affinity_hint of irq$i is $ret""
 done";"6. the values of affinity_hint and corresponding smp_affinity
 changed same.the output of the script is:
 smp_affinity of irq45 is 1
 affinity_hint of irq45 is 1
 smp_affinity of irq46 is 1
 affinity_hint of irq46 is 1
 smp_affinity of irq47 is 2
 affinity_hint of irq47 is 2
 smp_affinity of irq48 is 2
 affinity_hint of irq48 is 2
 smp_affinity of irq49 is 4
 affinity_hint of irq49 is 4
 smp_affinity of irq50 is 4
 affinity_hint of irq50 is 4
 smp_affinity of irq51 is 8
 affinity_hint of irq51 is 8
 smp_affinity of irq52 is 8
 affinity_hint of irq52 is 8";;RedHatEnterpriseLinux7/RHEL7-95991
2940;;;;;;;;;7;"7.Run netserver in host or external host.
 For tun/tap backend (bridge-utils based & openvswitch based), run netserver in host
 # netserver
 For macvtap backend, run netserver in external host.
 # netserver";"7. netserver started
​​";;RedHatEnterpriseLinux7/RHEL7-95991
2940;;;;;;;;;8;"### step8 and step9 will not be tested. confused here.
 8.run 3 netperf sessions inside guest.
 #netperf -H $HOST_IP&External_host_ip -l 60 &
 #netperf -H $HOST_IP&External_host_ip -l 60 &
 #netperf -H $HOST_IP&External_host_ip -l 60 &";"8. the netperf test can be started and can be finished
 successfully.";;RedHatEnterpriseLinux7/RHEL7-95991
2940;;;;;;;;;9;"### step8 and step9 will not be tested. confused here.
 9.During netperf test, watch the cpu interrupts of virtio queues in guest, and resource consumes of vhost processes in host.
 Guest # cat /proc/interrupts |grep virtio
 Host # pgrep vhost
 Host # top -p $pids_of_vhosts";"9. only 3 cpus work according the the interrupts table, and only
 3 vhost process work in host.";;RedHatEnterpriseLinux7/RHEL7-95991
2940;;;;;;;;;10;"10.Using task -c to make sure run each netperf in each cpu of guest
 # taskset -c 0 netperf -H $HOST_IP&External_host_ip -l 60 &
 # taskset -c 1 netperf -H $HOST_IP&External_host_ip -l 60 &
 # taskset -c 2 netperf -H $HOST_IP&External_host_ip -l 60 &";"10. the netperf test can be started and can be finished
 successfully.";;RedHatEnterpriseLinux7/RHEL7-95991
2940;;;;;;;;;11;"11.During netperf test, watch the cpu interrupts of virtio queues in guest, and resource consumes of vhost processes in host.
 Guest # cat /proc/interrupts |grep virtio
 Host # pgrep vhost
 Host # top -p $pids_of_vhosts";"11. during 3 netperf session, only 3 cpu work according the the
 interrupts table, and only 3 vhost process work in host";;RedHatEnterpriseLinux7/RHEL7-95991
2941;RHEL7-95992;[virtual network][virtual-nic-device] boot the guest with N queues with smp 1;Boot the guest with multiple queues, but only one vcpu. the guest can boot normally, the mq works ok.;Yu Wang (wyu);Medium;Positive;Not Automated;405558;1;" 1.Boot a guest with multiple queues and vhost=on and -smp 1
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=4 \
 -smp 1
 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,fds=$specify_a_free_fd1:$specify_a_free_fd2:$specify_a_free_fd3:$specify_a_free_fd4 \
 $specify_a_free_fd1<>/dev/tapn $specify_a_free_fd2<>/dev/tapn $specify_a_free_fd3<>/dev/tapn $specify_a_free_fd4<>/dev/tapn \
 -smp 1"; 1. guest can boot up, and no errors or call trace messages in dmesg;Test Case;RedHatEnterpriseLinux7/RHEL7-95992
2941;;;;;;;;;2;"2.In guest, enable the queues (eth0 is the interface name, modify it to you real interface name)
 For linux, # ethtool -L eth0 combined 4
 For windows,do nothing
";"2.After step2 , in guest, ethtool -l can see the channel parameters of the
 interface
 like:
 Pre-set maximums:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4
 Currten hardware settings:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4";;RedHatEnterpriseLinux7/RHEL7-95992
2941;;;;;;;;;3;"3.Run netserver in host or external host.
 For tun/tap backend (bridge-utils based & openvswitch based), run netserver in host
 # netserver
 For macvtap backend, run netserver in external host.
 # netserver";"3.netserver started
";;RedHatEnterpriseLinux7/RHEL7-95992
2941;;;;;;;;;4;"4.Run 4 netperf sessions in guest
 For linux:
 #for i in $(seq 4); do netperf -H $host_ip&external_ip -l 300 & ; done
 For windows in 4 sessions:
 netperf.exe -H $host_ip$external_ip -l 300
";4. netperf can run successfully.;;RedHatEnterpriseLinux7/RHEL7-95992
2941;;;;;;;;;5;"5.During netperf test, check the cpu interrupts in guest and vhost process in host.
 Guest:
 linux: # cat /proc/interrupts |grep virtio
 windows:
 open traceview:
 create New Log Session as https://mojo.redhat.com/docs/DOC-1166671 
 Device Manager -->"" Network adapters""--> right click ""Redhat VirtIO Ethernet Adapter"" --> Disable/ Enable

 host # pgrep vhost
 host # top -p $all_vhost_pid";"5. only one cpu works in the cpu interrupts and in host, only one vhost process works.
 
 windows:
 [DetermineQueueNumber] Number of hardware queues = 4
 [DetermineQueueNumber] 1 CPUs reported
 [DetermineQueueNumber] 10 MSIs, 4 queues' bundles
 [DetermineQueueNumber] # of path bundles = 1";;RedHatEnterpriseLinux7/RHEL7-95992
2942;RHEL7-95993;[virtual network][virtual-nic-device] Change the queues number, including the wrong ones -- only for linux;Change the queues number from -1 to N+1(N is the queues you boot) for 10 times during the netperf test;Yu Wang (wyu);Medium;Positive;Automated;405561;1;" 1.Boot a guest with multiple queues and vhost=on
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=4 \
 -smp 4
 For macvtap backend
 NTD [ will add when we actually support ]";" 1. After step2 , in guest, ethtool -l can see the channel parameters of the
 interface like:
 Pre-set maximums:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4
 Currten hardware settings:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4";Test Case;RedHatEnterpriseLinux7/RHEL7-95993
2942;;;;;;;;;2;"2.In guest, enable the queues (eth0 is the interface name, modify it to you real interface name)
 For linux, # ethtool -L eth0 combined 4
 For windows, TBD";2.After step4 , no pkg lost during ping.;;RedHatEnterpriseLinux7/RHEL7-95993
2942;;;;;;;;;3;"3.Run netserver in host or external host.
 For tun/tap backend (bridge-utils based & openvswitch based), run netserver in host
 # netserver
 For macvtap backend, run netserver in external host.
 # netserver";3.After step5 , netperf can run successfully, and finished.;;RedHatEnterpriseLinux7/RHEL7-95993
2942;;;;;;;;;4;"4.Ping guest from another external host, until the queues_change and netperf finished.
 # ping $guest_ip";"4.During step6 , when queues are set -1, will report erorr like this:
 no channel parameters changed, aborting
 current values: tx 0 rx 0 other 0combined ...
 when queues are set 5, will report like this:
 Cannot set device channel parameters: Invalid argument";;RedHatEnterpriseLinux7/RHEL7-95993
2942;;;;;;;;;5;"5.Run 1 netperf session for 2 minitues.
 # netperf -H $Host_ip&external_host_ip -l 120";​​;;RedHatEnterpriseLinux7/RHEL7-95993
2942;;;;;;;;;6;"6.Change the queues number from -1 to N+1(N is the queues you boot) for 10 times during the netperf test.
 # for i in $(seq 10) ; do for j in -1 0 1 2 3 4 5 ; do ethtool -L eth0 combined $j ; ethtool -l eth0 ; done ; done";​​;;RedHatEnterpriseLinux7/RHEL7-95993
2943;RHEL7-95994;[virtual network][virtual-nic-device] boot guest with diff vectors;Boot guest with multiple queues N, try vectors using 0, 1 ... 2N+1, 2N+2 , the guest can boot,mq works normally.;Yu Wang (wyu);Medium;Positive;Not Automated;405562;1;" 1.Boot a guest with multiple queues and vhost=on when vectors=0
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=0,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=4 \
 -smp 4
 For macvtap backend
 NTD [ will add when we actually support ]";" 1. guest boot up
";Test Case;RedHatEnterpriseLinux7/RHEL7-95994
2943;;;;;;;;;2;"2.In guest, enable the queues (eth0 is the interface name, modify it to you real interface name)
 For linux, # ethtool -L eth0 combined 4
 For windows, do not need do anything
";"2. in guest, ethtool -l can see the channel parameters of the interface
 like:
 Pre-set maximums:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4
 Currten hardware settings:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4
";;RedHatEnterpriseLinux7/RHEL7-95994
2943;;;;;;;;;3;"3.Check if vnic inside guest support msi.
 For linux:
 # lspci |grep Eth
 # lspci -vvv -s $address_of_Ethernet_device |grep MSI

 For windows:
 open traceview:
 create New Log Session as https://mojo.redhat.com/docs/DOC-1166671 
";"3. after execute ""# lspci -vvv -s $address_of_Ethernet_device
 |grep MSI""
 For vectors=0, no output
 For vectorts=1, MSI-X is disabled, like this: "" ....MSI-X: Enable- ...""
 For vectors=2~10, MSI-X is enabled, like this ""...MSI-X: Enable+ ...""

 For windows: operation can be done correctly

";;RedHatEnterpriseLinux7/RHEL7-95994
2943;;;;;;;;;4;"only for windows:
 disable netkvm driver in device manager:
 Device Manager -->"" Network adapters""--> right click ""Redhat VirtIO Ethernet Adapter"" --> Disable";"Redhat VirtIO Ethernet Adapter"" is in disabled status in device manager;";;RedHatEnterpriseLinux7/RHEL7-95994
2943;;;;;;;;;5;"only for windows:
 enable netkvm driver in device manager:
 Device Manager -->"" Network adapters""--> right click ""Redhat VirtIO Ethernet Adapter"" --> Enable
";"Redhat VirtIO Ethernet Adapter"" is in enabled status in device manager;";;RedHatEnterpriseLinux7/RHEL7-95994
2943;;;;;;;;;6;"only for windows:
 check the dbgviewer output:
 Note:win2008 does NOT support multiqueue.";"When running in the multiqueue mode,dbgview prints out the following message, among others:
 [DetermineQueueNumber] No MSIX, using 1 queue
";;RedHatEnterpriseLinux7/RHEL7-95994
2943;;;;;;;;;7;"4.Check the cpu interrupt of virito
 Guest# cat /proc/interrupts |grep virtio

 For windows:
 device manager -->view-->resources by connection ---> Interrupt request IRQ ---> find the line with ""Redhat VirtIO Etherpad Adapter ""
";"4. when check the cpu interrupt, you can get the following infos:
 For vectors=0, and vectors=1, since they are not using MSI, they just use ""IO-
 APIC-fasteoi"" for interrupt.

 For windows:  vectors=0
 MSI is disabled,there are only 1 line named Red Hat VirtIO Etherpad Adapter,and there should be positive number in ( )
 eg :
 (PCI)0x0000000A (10) Red Hat VirtIO Etherpad Adapter

 vectors=1, 2, xxx, (irq number matches vectors)
 For windows: there are a few lines named Red Hat VirtIO Etherpad Adapte,and there should be  negative number in ( )
 eg :
 (PCI)0x0000000A (-1) Red Hat VirtIO Etherpad Adapter
 (PCI)0x0000000A (-2) Red Hat VirtIO Etherpad Adapter 
";;RedHatEnterpriseLinux7/RHEL7-95994
2943;;;;;;;;;8;"5.Start netperf test :
 run netserver in host or external host.
 For tun/tap backend (bridge-utils based & openvswitch based), run netserver in host
 # netserver
 For macvtap backend, run netserver in external host.
 # netserver
 Run 6 netperf sessions in guest
 #for i in $(seq 6); do netperf -H $host_ip&external_ip -l 300 & ; done
 For win:
 #for i in $(seq 6); do netperf.exe -H $host_ip&external_ip -l 300 & ; done";"5. All netperf test can be finished sucessfully.
";;RedHatEnterpriseLinux7/RHEL7-95994
2943;;;;;;;;;9;6.Boot a guest with multiple queues and vhost=on when vectors=1, and repeat steps 2~5.;"linux:
 For vectors=0, and vectors=1, since they are not using MSI, they just use ""IO-
 APIC-fasteoi"" for interrupt.

 windows:
 [DetermineQueueNumber] Number of hardware queues = 4
 [DetermineQueueNumber] WARNING: Single MSIx interrupt allocated, performance will be reduced
 [DetermineQueueNumber] 2 CPUs reported
 [DetermineQueueNumber] 1 MSIs, 1 queues' bundles
 [DetermineQueueNumber] # of path bundles = 1
";;RedHatEnterpriseLinux7/RHEL7-95994
2943;;;;;;;;;10;7.Boot a guest with multiple queues and vhost=on when vectors=2, and repeat steps 2~5;"linux:
 For vectors=2~8, all vectors of this mq enabled virtio-net-pci share one msi
 interrupt, it named like this ""vritio0-virtqueues""

 windows:
 [DetermineQueueNumber] Number of hardware queues = 4
 [DetermineQueueNumber] WARNING: Single MSIx interrupt allocated, performance will be reduced
 [DetermineQueueNumber] 2 CPUs reported
 [DetermineQueueNumber] 2 MSIs, 1 queues' bundles
 [DetermineQueueNumber] # of path bundles = 1";;RedHatEnterpriseLinux7/RHEL7-95994
2943;;;;;;;;;11;8.Boot a guest with multiple queues and vhost=on when vectors=8, and repeat steps 2~5;"linux:
 For vectors=2~8, all vectors of this mq enabled virtio-net-pci share one msi
 interrupt, it named like this ""vritio0-virtqueues""

 windows:
 [DetermineQueueNumber] Number of hardware queues = 4
 [DetermineQueueNumber] 2 CPUs reported
 [DetermineQueueNumber] 8 MSIs, 3 queues
 [DetermineQueueNumber] # of path bundles = 2";;RedHatEnterpriseLinux7/RHEL7-95994
2943;;;;;;;;;12;"9.From 3~7, select a random number, you can use the following to select the number:
 # echo $((RANDOM%5+3))
 Then boot a guest w/ multi-queues w/ vhost=on and vectors that you got from that, then repeat steps 2~5.";​​;;RedHatEnterpriseLinux7/RHEL7-95994
2943;;;;;;;;;13;10.Boot a guest with multiple queues and vhost=on when vectors=9, and repeat steps 2~5.;"linux:
 For vectors=9~10, each vector uses one msi interrupt, and one couple of queue
 named like this ""virtio0-input"" & ""virtio0-output""

 windows:
 [DetermineQueueNumber] Number of hardware queues = 4
 [DetermineQueueNumber] 2 CPUs reported
 [DetermineQueueNumber] 9 MSIs, 4 queues
 [DetermineQueueNumber] # of path bundles = 2";;RedHatEnterpriseLinux7/RHEL7-95994
2943;;;;;;;;;14;11.Boot a guest with multiple queues and vhost=on when vectors=10, and repeat steps 2~5.;"linux:
 For vectors=9~10, each vector uses one msi interrupt, and one couple of queue
 named like this ""virtio0-input"" & ""virtio0-output""

 windows:
 [DetermineQueueNumber] Number of hardware queues = 4
 [DetermineQueueNumber] 2 CPUs reported
 [DetermineQueueNumber] 10 MSIs, 4 queues
 [DetermineQueueNumber] # of path bundles = 2";;RedHatEnterpriseLinux7/RHEL7-95994
2943;;;;;;;;;15;12.Boot a guest with multiple queues and vhost=on when vectors=-1.;"12. qemu quit quickly when boot this guest, and report error like
 this:
 Parameter 'vectors' expects uint32_t
";;RedHatEnterpriseLinux7/RHEL7-95994
2944;RHEL7-95995;[virtual network][virtual-nic-device] Boot the guest with multiple queues nic with guest msi disabled inside guest.;In guest disable msi, then try to using multiple queue. check the guest network, it can works, but when disable msi the performance lost.;Yu Wang (wyu);Medium;Positive;Automated;405563;1;" 1.Boot a guest with multiple queues and vhost=on
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=4 \
 -smp 4
 For macvtap backend
 NTD [ will add when we actually support ]";"1. boot guest successfully
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-95995
2944;;;;;;;;;2;"2.Disable msi
 For linux:modifing the kernel cmdline of guest, just add pci=nomsi in the corresonding vmlinuz line of /etc/grub2.cfg .
 For windows:
 open registry and set HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum\PCI\VEN_1AF4&DEV_1001&SUBSYS_00021AF4&REV_00\3&13c0b0c5&0&18\Device Parameters\Interrupt Management\MessageSignaledInterruptProperties\MSISupported to 0";"2 no errors
​​";;RedHatEnterpriseLinux7/RHEL7-95995
2944;;;;;;;;;3;"3.Reboot guest, and check if the msi is disabled.
 #cat /proc/cmdline
 # lspci |grep Eth
 # lspci -vvvv-s 00:03.0|grep MSI";"you can get the ""pci=nomsi"" in the kernel cmdline:
 #cat /proc/cmdline
 BOOT_IMAGE=/vmlinuz... pci=nomsi
 and in lspci, MSI is disabled, like this:
 # lspci |grep Eth
 00:03.0 Ethernet controller: Red Hat, Inc Virtio network device
 # lspci -vvvv-s 00:03.0|grep MSI
 Capabilities: [40] MSI-X: Enable- Count=9 Masked-
 You can see that msi-x is ""...Enabled-"" .";;RedHatEnterpriseLinux7/RHEL7-95995
2944;;;;;;;;;4;"4.In guest, enable the queues (eth0 is the interface name, modify it to you real interface name)
 For linux, # ethtool -L eth0 combined 4
 For windows, do not need to do this step
";"in guest, ethtool -l can see the channel parameters of the
 interface like:
 Pre-set maximums:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4
 Currten hardware settings:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4";;RedHatEnterpriseLinux7/RHEL7-95995
2944;;;;;;;;;5;"5.only for linux: repeatedly change the working queues inside guest.
 # for i in $(seq 10000); do for j in 1 2 1 3 1 4 ; do ethtool -L eth0 combined $j ; ethtool -l eth0; done; done
";"from the script, the value of ""combined"" from ""Current hardware
 settings:"" changed as sequence: 1 2 1 3 1 4 repeatedly";;RedHatEnterpriseLinux7/RHEL7-95995
2944;;;;;;;;;6;"6.only for linux: ping guest from another external host, until the 10000 times finished.
 # ping $guest_ip";no pkg lost during ping.;;RedHatEnterpriseLinux7/RHEL7-95995
2944;;;;;;;;;7;"7.Start 6 scp sessions in guest and transfer 6 files from guest to host or external host.
 For tun/tap backend (bridge-utils based & openvswitch based)
 # for i in $(seq 6) ; do scp bigfile$i $host_ip:/home/receivefiles/from_guest$i & ; done
 For macvtap backend
 # for i in $(seq 6) ; do scp bigfile$i $external_host_ip:/home/receivefiles/from_guest$i & ; done

 For windows:
 use winscp to transfer files";all scp session can be started and finished.;;RedHatEnterpriseLinux7/RHEL7-95995
2944;;;;;;;;;8;"8.Check md5 value of all files after transferred.
 # md5sum $file_name";the values of md5 are same after transferred.;;RedHatEnterpriseLinux7/RHEL7-95995
2944;;;;;;;;;9;"9.Start 6 scp sessions in guest and receive 6 files from host or external host.
 For tun/tap backend (bridge-utils based & openvswitch based)
 # for i in $(seq 6) ; do scp $host_ip:/home/bigfile$i /home/receivefiles/from_host$i & ; done
 For macvtap backend
 # for i in $(seq 6) ; do scp $external_host_ip:/home/bigfile$i /home/receivefiles/from_host$i & ; done";all scp session can be started and finished.;;RedHatEnterpriseLinux7/RHEL7-95995
2944;;;;;;;;;10;"10.Check md5 value of all files after transferred.
 # md5sum $file_name";the values of md5 are same after transferred.;;RedHatEnterpriseLinux7/RHEL7-95995
2945;RHEL7-95996;[virtual network][virtual-nic-device] Set_link test, only for multi-queues --- only for linux;Do Set_link test, do set_link on/off then in guest change the queues number, when set_link is off , the guest can not accessible. when is on the guest is accessible.;Yu Wang (wyu);Critical;Positive;Automated;405569;1;" 1.Boot a guest with multiple queues and vhost=on
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=4 \
 -smp 4
 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,fds=$fd1:$fd2:$fd3:$fd4  $fd1<>/dev/tap$index $fd2<>/dev/tap$index $fd3<>/dev/tap$index $fd4<>/dev/tap$index \
 -smp 4";" 1.guest boot up successfully
";Test Case;RedHatEnterpriseLinux7/RHEL7-95996
2945;;;;;;;;;2;"2.In guest, enable the queues (eth0 is the interface name, modify it to you real interface name)
 For linux, # ethtool -L eth0 combined 4";"2. mq set successfully
 # ethtool -l eth0
 Channel parameters for eth0:
 Pre-set maximums:
 RX:        0
 TX:        0
 Other:        0
 Combined:    4
 Current hardware settings:
 RX:        0
 TX:        0
 Other:        0
 Combined:    4
";;RedHatEnterpriseLinux7/RHEL7-95996
2945;;;;;;;;;3;"3.In guest, ping an external host, until finish step4.
 # ping $external_host_ip";"3. ping successfully
";;RedHatEnterpriseLinux7/RHEL7-95996
2945;;;;;;;;;4;"4.Change queues and check link status inside guest:
 For linux
 # for i in $(seq 4); do ethtool -L eth0 combined $i; ethtool -l eth0 ; cat /sys/class/net/eth0/operstate ; done
";"4. from the script, the queues are changd as the
 sequence 1 2 3 4 and the status is always up, and ping finished w/ no pkg
 lost.
";;RedHatEnterpriseLinux7/RHEL7-95996
2945;;;;;;;;;5;"5.Under qemu monitor, set network link down.
 (qemu)set_link net1 off";"5. set_link off
​​";;RedHatEnterpriseLinux7/RHEL7-95996
2945;;;;;;;;;6;"6.In guest, try to get ip by dhclient
 # dhclient -v eth0   (eth0 is the test nic device , please change to you target)";6. guest can't get ip by dhcp.;;RedHatEnterpriseLinux7/RHEL7-95996
2945;;;;;;;;;7;"7.Change queues and check link status inside guest:
 For linux
 # for i in $(seq 4); do ethtool -L eth0 combined $i; ethtool -l eth0 ; cat /sys/class/net/eth0/operstate ; done";"7. from the script, queues are changed as
 the sequence 1 2 3 4 and the status is always down, ping finished w/ all pkg
 lost.";;RedHatEnterpriseLinux7/RHEL7-95996
2945;;;;;;;;;8;"8.Reboot guest inside
 # reboot";"8. guest reboot successfully
​​";;RedHatEnterpriseLinux7/RHEL7-95996
2945;;;;;;;;;9;"9.After guest reboot up, enable the queues inside guest. (eth0 is the interface name, modify it to you real interface name)
 For linux, # ethtool -L eth0 combined 4";"9. # ethtool -l eth0
 Channel parameters for eth0:
 Pre-set maximums:
 RX:        0
 TX:        0
 Other:        0
 Combined:    4
 Current hardware settings:
 RX:        0
 TX:        0
 Other:        0
 Combined:    4";;RedHatEnterpriseLinux7/RHEL7-95996
2945;;;;;;;;;10;"10.In guest, try to get ip by dhclient
 # dhclient -v eth0   (eth0 is the test nic device , please change to you target)";10.  guest can't get ip by dhcp.;;RedHatEnterpriseLinux7/RHEL7-95996
2945;;;;;;;;;11;"11.Change queues and check link status inside guest:
 For linux
 # for i in $(seq 4); do ethtool -L eth0 combined $i; ethtool -l eth0 ; cat /sys/class/net/eth0/operstate ; done";"11. from the script, queues are changed as
 the sequence 1 2 3 4 and the status is always down, ping finished w/ all pkg
 lost.";;RedHatEnterpriseLinux7/RHEL7-95996
2945;;;;;;;;;12;"12.Reboot guest via qemu monitor
 (qemu) system_reset";"12. guest reboot successfully
​​";;RedHatEnterpriseLinux7/RHEL7-95996
2945;;;;;;;;;13;"13.After guest reboot up, enable the queues inside guest. (eth0 is the interface name, modify it to you real interface name)
 For linux, # ethtool -L eth0 combined 4";"13. # ethtool -l eth0
 Channel parameters for eth0:
 Pre-set maximums:
 RX:        0
 TX:        0
 Other:        0
 Combined:    4
 Current hardware settings:
 RX:        0
 TX:        0
 Other:        0
 Combined:    4";;RedHatEnterpriseLinux7/RHEL7-95996
2945;;;;;;;;;14;"14.In guest, try to get ip by dhclient
 # dhclient -v eth0   (eth0 is the test nic device , please change to you target)";14. guest can't get ip by dhcp.;;RedHatEnterpriseLinux7/RHEL7-95996
2945;;;;;;;;;15;"15.Change queues and check link status inside guest:
 For linux
 # for i in $(seq 4); do ethtool -L eth0 combined $i; ethtool -l eth0 ; cat /sys/class/net/eth0/operstate ; done";"15. from the script, queues are changed as
 the sequence 1 2 3 4 and the status is always down, ping finished w/ all pkg
 lost.";;RedHatEnterpriseLinux7/RHEL7-95996
2945;;;;;;;;;16;"16.Under qemu monitor, set network link up.
 (qemu)set_link net1 on";"16. set_link on
​​";;RedHatEnterpriseLinux7/RHEL7-95996
2945;;;;;;;;;17;"17.In guest, ping an external host, until finish step18.
 # ping $external_host_ip";"17. ping works normally
​​";;RedHatEnterpriseLinux7/RHEL7-95996
2945;;;;;;;;;18;"18.Change queues and check link status inside guest:
 For linux
 # for i in $(seq 4); do ethtool -L eth0 combined $i; ethtool -l eth0 ; cat /sys/class/net/eth0/operstate ; done";"18. from the script, the queues are changd as the
 sequence 1 2 3 4 and the status is always up, and ping finished w/ no pkg
 lost.
​​";;RedHatEnterpriseLinux7/RHEL7-95996
2946;RHEL7-95997;[virtual network][virtual-nic-device] changing the number of queues during migration -- only for linux;Change the queues number during guest migration.;Yu Wang (wyu);High;Positive;Automated;405568;1;" 1.Boot a guest with multiple queues and vhost=on
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=4 \
 -smp 4
 For macvtap backend
 NTD [ will add when we actually support ]";" 1.After step 3.and step7, in guest, ethtool -l can see the channel parameters
 of the interface like:
 Pre-set maximums:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4
 Currten hardware settings:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4";Test Case;RedHatEnterpriseLinux7/RHEL7-95997
2946;;;;;;;;;2;"2.Boot a listening mode guest in the destination host.
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=4 \
 -smp 4
 -incoming tcp:0:4444
 For macvtap backend
 NTD [ will add when we actually support ]";"2.After step 4, from the script, the value of ""combined"" from ""Current
 hardware settings:"" changed as sequence: 1 2 1 3 1 4 repeatedly";;RedHatEnterpriseLinux7/RHEL7-95997
2946;;;;;;;;;3;"3.In guest, enable the queues (eth0 is the interface name, modify it to you real interface name)
 For linux, # ethtool -L eth0 combined 4
 For windows, TBD";"3.After step6, ping finished successfully and no pkg lost, no error and call
 trace in dmesg";;RedHatEnterpriseLinux7/RHEL7-95997
2946;;;;;;;;;4;"4.Inside src guest, changing the queues in guest for a loop.
 # while true ; do for i in 1 2 1 3 1 4 ; do ethtool -L eth0 combined $i ; ethtool -l eth0 ; done; done";"4.After step9, file all successfully transferred and md5 values are same after
 transfferred.";;RedHatEnterpriseLinux7/RHEL7-95997
2946;;;;;;;;;5;"5.Migrate guest from scr host to dst one.
 Command of qmp
 {""execute"": ""migrate"",""arguments"":{""uri"": ""tcp:$dst_host_ip:4444""}}
 Command of hmp
 (qemu) migrate -d tcp:$dst_host_ip:4444";​​;;RedHatEnterpriseLinux7/RHEL7-95997
2946;;;;;;;;;6;"6.After migration, inside guest, kill the script in step 4. And check guest via:
 # ping $external host -c 10
 # dmesg";​​;;RedHatEnterpriseLinux7/RHEL7-95997
2946;;;;;;;;;7;"7.Make sure the queues are enabled.
 # ethtool -L eth0 combined 4; ethtool -l eth0";​​;;RedHatEnterpriseLinux7/RHEL7-95997
2946;;;;;;;;;8;"8.Check the network guest by transfer pkg to external host when change queues inside guest.
 # for i in $(seq 4) ; do ethtool -L eth0 combined $i ; ethtool -l eth0 ; for j in $(seq 6) ; do scp bigfile$j $external_host_ip:/home/receivefiles/from_guest$i$j ; done ; done";​​;;RedHatEnterpriseLinux7/RHEL7-95997
2946;;;;;;;;;9;"9.Check md5 value of all files after transferred.
 # md5sum $file_name";​​;;RedHatEnterpriseLinux7/RHEL7-95997
2947;RHEL7-95999;[virtual network][virtual-nic-device] Boot the guest with multi queues with conflicting params;Boot guest with the params conflict, the qemu should report the error.;Yu Wang (wyu);Low;Negative;Automated;405570;1;" 1.Try to specify fd and fds together when boot guest.
 -device virtio-net-pci,id=net_2,netdev=net_dev2,mac=9a:5e:5f:60:61:62,vectors=10,mq=on \
 -netdev tap,vhost=on,id=net_dev2,fd=4,fds=20:21:22:23 \";" 1. after step 1, step2 and step3 the qemu will report error like:
 ifname=, script=, downscript=, vnet_hdr=, helper=, queues=, and fds= are invalid with fd=";Test Case;RedHatEnterpriseLinux7/RHEL7-95999
2947;;;;;;;;;2;"2.Try to specify fd and vhostfds together when boot guest.
 -device virtio-net-pci,id=net_2,netdev=net_dev2,mac=9a:5e:5f:60:61:62,vectors=10,mq=on \
 -netdev tap,vhost=on,id=net_dev2,fd=4,vhostfds=20:21:22:23 \";"2. After step4 and step5, the qemu will report error like:
 ifname=, script=, downscript=, vnet_hdr=, helper=, queues=, and fd= are
 invalid with fds=";;RedHatEnterpriseLinux7/RHEL7-95999
2947;;;;;;;;;3;"3.Try to specify fd and queues together when boot guest.
 -device virtio-net-pci,id=net_2,netdev=net_dev2,mac=9a:5e:5f:60:61:62,vectors=10,mq=on \
 -netdev tap,vhost=on,id=net_dev2,fd=4,queues=4 \";"3.After step6~step10, the qemu reports error like:
 ifname=, script=, downscript=, and vnet_hdr= queues=, and fds= are invalid
 with helper=";;RedHatEnterpriseLinux7/RHEL7-95999
2947;;;;;;;;;4;"4.Try to specify fds and vhostfd together when boot guest.
 -device virtio-net-pci,id=net_2,netdev=net_dev2,mac=9a:5e:5f:60:61:62,vectors=10,mq=on \
 -netdev tap,vhost=on,id=net_dev2,fds=30:31:32:33,vhostfds=20:21:22:23 \";​​;;RedHatEnterpriseLinux7/RHEL7-95999
2947;;;;;;;;;5;"5.Try to specify fds and queues together when boot guest.
 -device virtio-net-pci,id=net_2,netdev=net_dev2,mac=9a:5e:5f:60:61:62,vectors=10,mq=on \
 -netdev tap,vhost=on,id=net_dev2,fds=30:31:32:33,queues=4 \";​​;;RedHatEnterpriseLinux7/RHEL7-95999
2947;;;;;;;;;6;"6.Try to specify helper and fd together when boot guest
 -device virtio-net-pci,id=net_2,netdev=net_dev2,mac=9a:5e:5f:60:61:62,vectors=10,mq=on \
 -netdev tap,vhost=on,id=net_dev2,helper=/home/helper.sh,fd=4 \";​​;;RedHatEnterpriseLinux7/RHEL7-95999
2947;;;;;;;;;7;"7.Try to specify helper and fds together when boot guest
 -device virtio-net-pci,id=net_2,netdev=net_dev2,mac=9a:5e:5f:60:61:62,vectors=10,mq=on \
 -netdev tap,vhost=on,id=net_dev2,helper=/home/helper.sh,fds=20:21:22:23 \";​​;;RedHatEnterpriseLinux7/RHEL7-95999
2947;;;;;;;;;8;"8.Try to specify helper and vhostfds together when boot guest
 -device virtio-net-pci,id=net_2,netdev=net_dev2,mac=9a:5e:5f:60:61:62,vectors=10,mq=on \
 -netdev tap,vhost=on,id=net_dev2,helper=/home/helper.sh,vhostfds=20:21:22:23 \";​​;;RedHatEnterpriseLinux7/RHEL7-95999
2947;;;;;;;;;9;"9 Try to specify helper and vhostfd together when boot guest.
 -device virtio-net-pci,id=net_2,netdev=net_dev2,mac=9a:5e:5f:60:61:62,vectors=10,mq=on \
 -netdev tap,vhost=on,id=net_dev2,helper=/home/helper.sh,vhostfd=4 \";​​;;RedHatEnterpriseLinux7/RHEL7-95999
2947;;;;;;;;;10;"10 Try to specify helper and queues together when boot guest.
 -device virtio-net-pci,id=net_2,netdev=net_dev2,mac=9a:5e:5f:60:61:62,vectors=10,mq=on \
 -netdev tap,vhost=on,id=net_dev2,helper=/home/helper.sh,queues=4 \";​​;;RedHatEnterpriseLinux7/RHEL7-95999
2948;RHEL7-96000;[virtual network][virtual-nic-device] Enable/disable multi queues  repeatedly when test netperf. -- only for linux;Boot guest with multiple queues, run M instances netperf, during netperf running enable/disable multiqueue through ethtool -L, repeat 10000 times.;Yu Wang (wyu);Medium;Positive;Automated;405559;1;" 1.Boot a guest with multiple queues and vhost=on
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=4 \
 -smp 4
 For macvtap backend
 NTD [ will add when we actually support ]";" 1. After step2 , in guest, ethtool -l can see the channel parameters of the
 interface like:
 Pre-set maximums:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4
 Currten hardware settings:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4";Test Case;RedHatEnterpriseLinux7/RHEL7-96000
2948;;;;;;;;;2;"2.In guest, enable the queues (eth0 is the interface name, modify it to you real interface name)
 For linux, # ethtool -L eth0 combined 4
 For windows, TBD";"2.After step4 , from the script, the value of ""combined"" from ""Current
 hardware settings:"" changed as sequence: 1 2 1 3 1 4 repeatedly";;RedHatEnterpriseLinux7/RHEL7-96000
2948;;;;;;;;;3;"3.Run netserver in host or external host.
 For tun/tap backend (bridge-utils based & openvswitch based), run netserver in host
 # netserver
 For macvtap backend, run netserver in external host.
 # netserver";3.After step5 , no pkg lost during ping.;;RedHatEnterpriseLinux7/RHEL7-96000
2948;;;;;;;;;4;"4.Repeatedly change the working queues inside guest.
 # for i in $(seq 10000); do for j in 1 2 1 3 1 4 ; do ethtool -L eth0 combined $j ; ethtool -l eth0; done; done";4.After step6 , every netperf can run successfully, and finished.;;RedHatEnterpriseLinux7/RHEL7-96000
2948;;;;;;;;;5;"5.Ping guest from another external host, until the 10000 times finished.
 # ping $guest_ip";​​;;RedHatEnterpriseLinux7/RHEL7-96000
2948;;;;;;;;;6;"6.Run 6(more than queues) netperf sessions inside guest.
 # for i in $(seq 6); do netperf -H $host_ip&external_host_ip -l 900 & ; done";​​;;RedHatEnterpriseLinux7/RHEL7-96000
2949;RHEL7-96001;[virtual network][virtual-nic-device] Enable/disable multi queues  repeatedly while file transfer -- only for linux;Boot guest with multiple queues, run M instances filetransfer, during filetransfer does ethtool -L Repeatedly.;Yu Wang (wyu);Medium;Positive;Automated;405560;1;" 1.Boot a guest with multiple queues and vhost=on
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=4 \
 -smp 4
 For macvtap backend
 NTD [ will add when we actually support ]";" 1. After step2 , in guest, ethtool -l can see the channel parameters of the
 interface like:
 Pre-set maximums:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4
 Currten hardware settings:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4";Test Case;RedHatEnterpriseLinux7/RHEL7-96001
2949;;;;;;;;;2;"2.In guest, enable the queues (eth0 is the interface name, modify it to you real interface name)
 For linux, # ethtool -L eth0 combined 4
 For windows, TBD";"2.After step3 , from the script, the value of ""combined"" from ""Current
 hardware settings:"" changed as sequence: 1 2 1 3 1 4 repeatedly";;RedHatEnterpriseLinux7/RHEL7-96001
2949;;;;;;;;;3;"3.Repeatedly change the working queues inside guest.
 # for i in $(seq 10000); do for j in 1 2 1 3 1 4 ; do ethtool -L eth0 combined $j ; ethtool -l eth0; done; done";3.After step4 , no pkg lost during ping.;;RedHatEnterpriseLinux7/RHEL7-96001
2949;;;;;;;;;4;"4.ping guest from another external host, until the 10000 times finished.
 # ping $guest_ip";4.After step5 step7 , all scp session can be started and finished.;;RedHatEnterpriseLinux7/RHEL7-96001
2949;;;;;;;;;5;"5.Start 6 scp sessions in guest and transfer 6 files from guest to host or external host.
 For tun/tap backend (bridge-utils based & openvswitch based)
 # for i in $(seq 6) ; do scp bigfile$i $host_ip:/home/receivefiles/from_guest$i & ; done
 For macvtap backend
 # for i in $(seq 6) ; do scp bigfile$i $external_host_ip:/home/receivefiles/from_guest$i & ; done";5.After step6 step8 , the values of md5 are same after transferred.;;RedHatEnterpriseLinux7/RHEL7-96001
2949;;;;;;;;;6;"6.Check md5 value of all files after transferred.
 # md5sum $file_name";​​;;RedHatEnterpriseLinux7/RHEL7-96001
2949;;;;;;;;;7;"7.Start 6 scp sessions in guest and receive 6 files from host or external host.
 For tun/tap backend (bridge-utils based & openvswitch based)
 # for i in $(seq 6) ; do scp $host_ip:/home/bigfile$i /home/receivefiles/from_host$i & ; done
 For macvtap backend
 # for i in $(seq 6) ; do scp $external_host_ip:/home/bigfile$i /home/receivefiles/from_host$i & ; done";​​;;RedHatEnterpriseLinux7/RHEL7-96001
2949;;;;;;;;;8;"8.Check md5 value of all files after transferred.
 # md5sum $file_name";​​;;RedHatEnterpriseLinux7/RHEL7-96001
2950;RHEL7-96003;[virtual network][virtual-nic-device] flow caches stress test, only for mq=on -- only for linux;Flow caches stress test, start more than 512 instances of TCP_CRR tests, this scenario is for mq.;Yu Wang (wyu);Medium;Positive;Automated;405694;1;" 1.Boot a guest with multiple queues and vhost=on
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=4 \
 -smp 4
 For macvtap backend
 NTD [ will add when we actually support ]";" 1.After step1 , guest can bootup w/o kernel panic, after bootup, no errors
 and call trace in dmesg messages, and from guest, can ping host w/ no pkgs
 lost, please ping 10 counts to confirm this.
 # ping $host_ip -c 10";Test Case;RedHatEnterpriseLinux7/RHEL7-96003
2950;;;;;;;;;2;2.Confirm nf_conntrack is disabled in host and guest.(refer to setup);"2.After step3 , queues should be enabled, check like this and the output is
 same as below:
 # ethtool -l eth0
 Channel parameters for eth0:
 Pre-set maximums:
 RX:        0
 TX:        0
 Other:        0
 Combined:    4
 Current hardware settings:
 RX:        0
 TX:        0
 Other:        0
 Combined:    4";;RedHatEnterpriseLinux7/RHEL7-96003
2950;;;;;;;;;3;"3.In guest, enable the queues (eth0 is the interface name, modify it to you real interface name)
 # ethtool -L eth0 combined 4
";"3.After step5 , quit ping process, no pkgs lost and netperf test finished w/
 no error, no errors in dmesg messages and no call trace.";;RedHatEnterpriseLinux7/RHEL7-96003
2950;;;;;;;;;4;"4.After installation of netperf, run netserver in host
 # netserver";"4.During step6 , the scp speed is accesable, should be more than 10m/s, and
 no sudden change. The scp can finished";;RedHatEnterpriseLinux7/RHEL7-96003
2950;;;;;;;;;5;"5.Run netperf TCP_CRR protocal test in guest, start 520(more than 512 is ok) instances of TCP_CRR tests, during this time, ping host and guest from external system.
 # for i in $(seq 520); do netperf -H $HOST_IP -t TCP_CRR -l 600 -- -b 10 -D & done";5.After step7 , md5sum value should be same after transfer for each scp.;;RedHatEnterpriseLinux7/RHEL7-96003
2950;;;;;;;;;6;"6.After stress finished, in both guest and host, check dmesg messages, and then transfer file from host to guest and from guest to host:
 host# scp $Bigfile(2Gfile) root@$guest_ip:/home/host_to_guest
 guest# scp $Bigfile(2Gfile) root@$host_ip:/home/guest_to_host
";​​;;RedHatEnterpriseLinux7/RHEL7-96003
2950;;;;;;;;;7;"7.Check the network of both host and guest via md5sum checking.
 # md5sum $all_transfer_file
";​​;;RedHatEnterpriseLinux7/RHEL7-96003
2951;RHEL7-96004;[virtual network][virtual-nic-device] Change the queues number during pktgen  stress test -- only for linux;Change the queues number during pktgen stress test;Yu Wang (wyu);Medium;Positive;Automated;405567;1;" 1.Boot 2 guests w/ vhost=on, the cli should be like this:
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,vectors=10,mq=on \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=4 \
 -smp 4
 For macvtap backend
 NTD [ will add when we actually support ]";" 1. guest boot up successfully
";Test Case;RedHatEnterpriseLinux7/RHEL7-96004
2951;;;;;;;;;2;"2.In both systems, set all queues work
 For linux, # ethtool -L eth0 combined 4
 For windows, TBD";"2. in guest, ethtool -l can see the channel
 parameters of the interface
 like:
 Pre-set maximums:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4
 Currten hardware settings:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4";;RedHatEnterpriseLinux7/RHEL7-96004
2951;;;;;;;;;3;"3.Repeatedly changing queues in guest like:
 # while true; do for i in 1 2 1 3 1 4 ; do ethtool -L eth0 combined $i ; ethtoo -l eth0 ; done; done";"3. from the script, the value of ""combined"" from
 ""Current hardware settings:"" changed as sequence: 1 2 1 3 1 4 repeatedly
";;RedHatEnterpriseLinux7/RHEL7-96004
2951;;;;;;;;;4;"4.In guest1, create the pktgen script, and modify the ""$DST_system_ip"" to guest2's ip address, and ""$dst-system-macaddress"" to guest2's mac address.";"4. script prepared
";;RedHatEnterpriseLinux7/RHEL7-96004
2951;;;;;;;;;5;"5.In guest1, run this script like this:
 # ./pktgen.sh eth0 4 [eth0 is the interface in guest1, 4 is the queues number, modify them according to your env]";"5. in the dst system, check the interface, you can
 see the dst guest have recive the package, do the following repeatedly inside
 dst system, you can see that the rx pkgs increase fast.
 # ifconfig eth0 [eth0 is the interface in guest, modify them according to
 your env]
​​";;RedHatEnterpriseLinux7/RHEL7-96004
2951;;;;;;;;;6;6.After 20 minitues, if pktgen test is not finished, try finish by ping out from guest1.;"6. finish pktgen
​​";;RedHatEnterpriseLinux7/RHEL7-96004
2951;;;;;;;;;7;"7.Stop the changing queues loop, and confirm the queues enabled.
 # ethtool -l eth0 (if the queues is not enabled, enabled it as step2).";"7. confirm mq for eth0
​​";;RedHatEnterpriseLinux7/RHEL7-96004
2951;;;;;;;;;8;"8.Check both systems and host.
 #dmesg
 #ping $external_host_ip";"8. no error and call trace in dmesg, and ping out has no
 pkg lost.
​​";;RedHatEnterpriseLinux7/RHEL7-96004
2951;;;;;;;;;9;9.Shutdown both guests, and then boot 1 guest w/ vhost=on, the cli should be like the step1.;"9. guest boot up successfully
​​";;RedHatEnterpriseLinux7/RHEL7-96004
2951;;;;;;;;;10;"10.In guest, enable the queues (eth0 is the interface name, modify it to you real interface name)
 For linux, # ethtool -L eth0 combined 4
 For windows, TBD";"10. in guest, ethtool -l can see the channel
 parameters of the interface
 like:
 Pre-set maximums:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4
 Currten hardware settings:
 RX: 0
 Tx: 0
 Others: 0
 Combined: 4
​​";;RedHatEnterpriseLinux7/RHEL7-96004
2951;;;;;;;;;11;"11.Repeatedly changing queues in guest like:
 # While true; do for i in 1 2 1 3 1 4 ; do ethtool -L eth0 combined $i ; done; done";"11. from the script, the value of ""combined"" from
 ""Current hardware settings:"" changed as sequence: 1 2 1 3 1 4 repeatedly
​​";;RedHatEnterpriseLinux7/RHEL7-96004
2951;;;;;;;;;12;"12.In host, create the pktgen script, and modify the ""$DST_system_ip"" to guest's ip address, and ""$dst-system-macaddress"" to guest's mac address.";"12. script prepared
​​";;RedHatEnterpriseLinux7/RHEL7-96004
2951;;;;;;;;;13;"13.In host, run this script like this:
 # ./pktgen.sh tap0 4 [tap0 is the interface corresponds to guest, 4 is the queues number, modify them according to your env]";"13. in the dst system, check the interface, you can
 see the dst guest have recive the package, do the following repeatedly inside
 dst system, you can see that the rx pkgs increase fast.
 # ifconfig eth0 [eth0 is the interface in guest, modify them according to
 your env]
​​";;RedHatEnterpriseLinux7/RHEL7-96004
2951;;;;;;;;;14;14.After 20 minitues, if pktgen test is not finished, try finish by ping out from guest.;"14. finish pktgen
​​";;RedHatEnterpriseLinux7/RHEL7-96004
2951;;;;;;;;;15;"15.Stop the changing queues loop, and confirm the queues enabled.
 # ethtool -l eth0 (if the queues is not enabled, enabled it as step2).";"15. confirm mq
​​";;RedHatEnterpriseLinux7/RHEL7-96004
2951;;;;;;;;;16;"16.Check both systems and host.
 #dmesg
 #ping $external_host_ip";"16. no error and call trace in dmesg, and ping out has no
 pkg lost.
​​";;RedHatEnterpriseLinux7/RHEL7-96004
2952;RHEL7-96005;[virtual network][virtual-nic-device] Remove the tap/macvtap interfaces in host while guest is using it;Remove tap/macvtap interfaces in virtual network backend, check guest if crashed.;Yu Wang (wyu);High;Positive;Automated;405763;1;" 1.Boot a guest
 For tun/tap backend (bridge-utils based & openvswitch based)
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,ifname=guest1 \
 For macvtap backend
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd,vhost=on \";" 1.boot up guest successfully
";Test Case;RedHatEnterpriseLinux7/RHEL7-96005
2952;;;;;;;;;2;"2.Inside guest, ping an external host until all steps finished
 # ping $external_host_ip";2.ping successfully and no pkg lost;;RedHatEnterpriseLinux7/RHEL7-96005
2952;;;;;;;;;3;"3.In host, disable the tap/macvtap interface
 # ip link set $ifname/$macvtap_interface down";3.no error in dmesg of guest or host, ping lost.;;RedHatEnterpriseLinux7/RHEL7-96005
2952;;;;;;;;;4;"4.In host, enable the tap/macvtap interface
 # ip link set $ifname/$macvtap_interface up";4.ping successfully and no pkg lost;;RedHatEnterpriseLinux7/RHEL7-96005
2952;;;;;;;;;5;"5.Delete the tap/macvtap interface in host.
 # ip link delete $ifname/$macvtap_interface";5.no error in dmesg of guest or host, ping lost;;RedHatEnterpriseLinux7/RHEL7-96005
2952;;;;;;;;;6;"6.Shutdown guest
 For linux:
 # shutdown -h now

 Fow win:
 shutdown guest
";"6.no error
";;RedHatEnterpriseLinux7/RHEL7-96005
2952;;;;;;;;;7;"7. boot guest with new created tap/macvtap, ping from guest to external host (If it is macvtap test, pls create a new macvtap interface)
 # ping $external_host_ip -c 30";7. guest can boot successfully and works well, no pkg lost during pinging.;;RedHatEnterpriseLinux7/RHEL7-96005
2953;RHEL7-96006;[virtual network][virtio-net-pci] Qemu calculate the default number of vectors for multiqueue - TBD;Qemu should calculate the default number of vectors for multiqueue virtio-net.;Yu Wang (wyu);Critical;Positive;Not Automated;405776;1;"1.Boot a guest with multiple queues without parameter ""vectors"", and set queues=4
For tun/tap backend (bridge-utils based & openvswitch based)
-device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,mq=on \
-netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=4 \
For macvtap backend
NTD [ will add when we actually support ]";"1.After step2, from hmp, the value of vectors is 9
(qemu) info qtree
bus: main-system-bus
type System
dev: kvm-ioapic, id """"
gpio-in 24
gsi_base = 0
irq 0
mmio 00000000fec00000/0000000000001000
dev: i440FX-pcihost, id """"
....
dev: virtio-net-pci, id ""net1""
ioeventfd = off
vectors = 9
indirect_desc = on
event_idx = on
csum = on
2.After step3:in guest, ethtool -l can see the channel parameters of the interface
Pre-set maximums:
RX: 0
Tx: 0
Others: 0
Combined: 4
Currten hardware settings:
RX: 0
Tx: 0
Others: 0
Combined: 4
3.Ater step4:can get the queues and cpus and irqs like this, 9 queues in total and including 4 couple of queues (input/output)
...
44: 0 0 0 0 PCI-MSI-edge virtio1-config
45: 7596 77 7 3006 PCI-MSI-edge virtio1-input.0
46: 1 0 0 0 PCI-MSI-edge virtio1-output.0
47: 674 525 1 184 PCI-MSI-edge virtio1-input.1
48: 0 0 1 0 PCI-MSI-edge virtio1-output.1
49: 761 0 418 378 PCI-MSI-edge virtio1-input.2
50: 2 1 0 0 PCI-MSI-edge virtio1-output.2
51: 1 0 1205 29364 PCI-MSI-edge virtio1-input.3
52: 0 18 1 0 PCI-MSI-edge virtio1-output.3
4.After step6 and step10 from hmp, the value of vectors is 17.
5.After step7 and step11, in guest, ethtool -l can see the channel parameters of the interface
Pre-set maximums:
RX: 0
Tx: 0
Others: 0
Combined: 8
Currten hardware settings:
RX: 0
Tx: 0
Others: 0
Combined: 8
6.After step8 and step12 , can get the queues and cpus and irqs like this, 17 queues in total and including 8 couple of queues (input/output), the result is like result ""3""";Test Case;RedHatEnterpriseLinux7/RHEL7-96006
2953;;;;;;;;;2;"2.After guest boot up, check vectors via hmp:
# info qtree";​​;;RedHatEnterpriseLinux7/RHEL7-96006
2953;;;;;;;;;3;"3.In guest, enable the queues (eth0 is the interface name, modify it to you real interface name)
For linux, # ethtool -L eth0 combined 4
For windows, TBD";​​;;RedHatEnterpriseLinux7/RHEL7-96006
2953;;;;;;;;;4;"4.Check irqs of each couple of queues in guest, only for linux, the following steps are all only for linux.
# cat /proc/interrupts |grep virtio";​​;;RedHatEnterpriseLinux7/RHEL7-96006
2953;;;;;;;;;5;"5.Boot a guest with multiple queues without parameter ""vectors"", and set queues=8
For tun/tap backend (bridge-utils based & openvswitch based)
-device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,mq=on \
-netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=8 \
For macvtap backend
NTD [ will add when we actually support ]";​​;;RedHatEnterpriseLinux7/RHEL7-96006
2953;;;;;;;;;6;"6.After guest boot up, check vectors via hmp:
# info qtree";​​;;RedHatEnterpriseLinux7/RHEL7-96006
2953;;;;;;;;;7;"7.In guest, enable the queues (eth0 is the interface name, modify it to you real interface name)
For linux, # ethtool -L eth0 combined 8
For windows, TBD";​​;;RedHatEnterpriseLinux7/RHEL7-96006
2953;;;;;;;;;8;"8.Check irqs of each couple of queues in guest, only for linux, the following steps are all only for linux.
# cat /proc/interrupts |grep virtio";​​;;RedHatEnterpriseLinux7/RHEL7-96006
2953;;;;;;;;;9;"9.Boot a guest with multiple queues without parameter ""vectors"", and set queues=9
For tun/tap backend (bridge-utils based & openvswitch based)
-device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1,mq=on \
-netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script,queues=9 \
For macvtap backend
NTD [ will add when we actually support ]";​​;;RedHatEnterpriseLinux7/RHEL7-96006
2953;;;;;;;;;10;"10.After guest boot up, check vectors via hmp:
# info qtree";​​;;RedHatEnterpriseLinux7/RHEL7-96006
2953;;;;;;;;;11;"11.In guest, enable the queues (eth0 is the interface name, modify it to you real interface name)
For linux, # ethtool -L eth0 combined 8
For windows, TBD";​​;;RedHatEnterpriseLinux7/RHEL7-96006
2953;;;;;;;;;12;"12.Check irqs of each couple of queues in guest, only for linux, the following steps are all only for linux.
# cat /proc/interrupts |grep virtio";​​;;RedHatEnterpriseLinux7/RHEL7-96006
2954;RHEL7-96007;[virtual network] S4 during and after network load;{comment:8};Yu Wang (wyu);Critical;Positive;Automated;405710;1;"1.Boot a guest w/ vhost=on and S3/S4 support.
 For tun/tap backend (bridge-utils based & openvswitch based)
 -global PIIX4_PM.disable_s3=0 \
 -global PIIX4_PM.disable_s4=0 \
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \
 For macvtap backend
 -global PIIX4_PM.disable_s3=0 \
 -global PIIX4_PM.disable_s4=0 \
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd,vhost=on \";1.After step3, the netperf test is in process, and not finished.;Test Case;RedHatEnterpriseLinux7/RHEL7-96007
2954;;;;;;;;;2;"2.After installation of netperf in both guest and host.
 For tun/tap backend (bridge-utils based & openvswitch based) guest, run the netserver in host
 # netserver
 For macvtap backend, run the netserver in external host
 #netserver";2.After step4, the guest is in S4 mode, qemu-kvm process quit.;;RedHatEnterpriseLinux7/RHEL7-96007
2954;;;;;;;;;3;"3.Run netperf TCP_STREAM protocol test in guest.
 For linux
 # netperf -H $(external_)HOST_IP -l 600 -- -b 10 -D
 For windows, open a cmd window. and change to the dir of netperf client, and do
 c:\ > netperf -H $(External_)HOST_IP -l 600 -- -b 10 -D";"3.After step5, guest resumes successfully, netperf won't be quit w/ errors or
 core dump; dmesg in guest, no error and core dump.";;RedHatEnterpriseLinux7/RHEL7-96007
2954;;;;;;;;;4;"4.During netperf test, do S4 inside guest.
 For linux
 # pm-hibernate
 For windows
 Terminal: powercfg -h on
 check if support S3 S4 :powercfg -a
 a.win7,winXP,win2003: Click Start-->Turn Off computer-->choose hibernate
 b.win2012 win8 win2008:Control panel-->Power Options-->Change what the power buttons do-->Power button settins-->select ""hibernate""-->save changes";4.After step6, ping out, no pkg lost.;;RedHatEnterpriseLinux7/RHEL7-96007
2954;;;;;;;;;5;5.Wake guest from S4, boot the same cli as before.;5.After step7, netperf test successfully and can finished.;;RedHatEnterpriseLinux7/RHEL7-96007
2954;;;;;;;;;6;"6.Check network via ping external host.
 # ping $external_host_ip -c 10";6.After step8, the guest is in S4 mode, qemu-kvm process quit.;;RedHatEnterpriseLinux7/RHEL7-96007
2954;;;;;;;;;7;"7.Shutdown and boot again guest w/ same cli, then run netperf TCP_STREAM protocol for 1 minitus test in guest again.
 For linux
 # netperf -H $(external_)HOST_IP -l 60 -- -b 10 -D
 For windows, open a cmd window. and change to the dir of netperf client, and do
 c:\ > netperf -H $(External_)HOST_IP -l 60 -- -b 10 -D";"7.After step9, guest resumes successfully, and netperf won't be quit w/ errors
 or core dump; dmesg in guest, no error and core dump.";;RedHatEnterpriseLinux7/RHEL7-96007
2954;;;;;;;;;8;"8.After netperf load, do S4 inside guest.
 For linux
 # pm-hibernate
 For windows
 Terminal: powercfg -h on
 check if support S3 S4 :powercfg -a
 a.win7,winXP,win2003: Click Start-->Turn Off computer-->choose hibernate
 b.win2012 win8 win2008:Control panel-->Power Options-->Change what the power buttons do-->Power button settins-->select ""hibernate""-->save changes";8.After step10, ping out, no pkg lost.;;RedHatEnterpriseLinux7/RHEL7-96007
2954;;;;;;;;;9;9.Wake guest from S4, boot the same cli as before.;​​;;RedHatEnterpriseLinux7/RHEL7-96007
2954;;;;;;;;;10;"10.Check network via ping external host.
 # ping $external_host_ip -c 10";​​;;RedHatEnterpriseLinux7/RHEL7-96007
2955;RHEL7-96008;[virtual network] S3 during and after network load;;Yu Wang (wyu);Critical;Positive;Automated;405387;1;"1.Boot a guest w/ vhost=on and S3/S4 support.
 For tun/tap backend (bridge-utils based & openvswitch based)
 -global PIIX4_PM.disable_s3=0 \
 -global PIIX4_PM.disable_s4=0 \
 -device virtio-net-pci,netdev=dev1,mac=9a:e8:e9:ea:eb:ec,id=net1 \
 -netdev tap,id=dev1,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \
 For macvtap backend
 -global PIIX4_PM.disable_s3=0 \
 -global PIIX4_PM.disable_s4=0 \
 -device virtio-net-pci,netdev=dev1,mac=$mac_macvtap_interface,id=net1 $fd<>/dev/$tap \
 -netdev tap,id=dev1,fd=$fd,vhost=on \";1.After step3 , the netperf test is in process, and not finished.;Test Case;RedHatEnterpriseLinux7/RHEL7-96008
2955;;;;;;;;;2;"2.After installation of netperf in both guest and host.
 For tun/tap backend (bridge-utils based & openvswitch based) guest, run the netserver in host
 # netserver
 For macvtap backend, run the netserver in external host
 #netserver";"2.After step4 , the guest is in S3 mode, ping guest from external host,
 failed.";;RedHatEnterpriseLinux7/RHEL7-96008
2955;;;;;;;;;3;"3.Run netperf TCP_STREAM protocol test in guest.
 For linux
 # netperf -H $(external_)HOST_IP -l 600 -- -b 10 -D
 For windows, open a cmd window. and change to the dir of netperf client, and do
 c:\ > netperf -H $(External_)HOST_IP -l 600 -- -b 10 -D";"3.After step5 , guest resumes successfully, guest can finish the netperf test,
 and netperf won't be quit w/ errors or core dump; dmesg in guest, no error and
 core dump.";;RedHatEnterpriseLinux7/RHEL7-96008
2955;;;;;;;;;4;"4.During netperf test, do S3 inside guest.
 For linux
 # pm-suspend
 For windows
 Control panel--->Device manager--->Display Adapters-->update
 Terminal: powercfg -h on
 check if support S3 S4 :powercfg -a
 a.win7,winXP,win2003: Click Start-->Turn Off computer-->choose Sleep
 b.win2012 win8 win2008:Control panel-->Power Options-->Change what the power buttons do-->Power button settins-->select ""Sleep""-->save changes";4.After step6 , ping out, no pkg lost.;;RedHatEnterpriseLinux7/RHEL7-96008
2955;;;;;;;;;5;"5.Wake guest from S3, press ""Enter"".";5.After step7 , netperf test successfully and can finished.;;RedHatEnterpriseLinux7/RHEL7-96008
2955;;;;;;;;;6;"6.Check network via ping external host.
 # ping $external_host_ip -c 10";"6.After step8 , the guest is in S3 mode, ping guest from external host,
 failed.";;RedHatEnterpriseLinux7/RHEL7-96008
2955;;;;;;;;;7;"7.Shutdown and boot again guest w/ same cli, then run netperf TCP_STREAM protocol for 1 minitus test in guest again.
 For linux
 # netperf -H $(external_)HOST_IP -l 60 -- -b 10 -D
 For windows, open a cmd window. and change to the dir of netperf client, and do
 c:\ > netperf -H $(External_)HOST_IP -l 60 -- -b 10 -D";"7.After step9 , guest resumes successfully, guest can finish the netperf test,
 and netperf won't be quit w/ errors or core dump; dmesg in guest, no error and
 core dump.";;RedHatEnterpriseLinux7/RHEL7-96008
2955;;;;;;;;;8;"8.After netperf load, do S3 inside guest.
 For linux
 # pm-suspend
 For windows
 Control panel--->Device manager--->Display Adapters-->update
 Terminal: powercfg -h on
 check if support S3 S4 :powercfg -a
 a.win7,winXP,win2003: Click Start-->Turn Off computer-->choose Sleep
 b.win2012 win8 win2008:Control panel-->Power Options-->Change what the power buttons do-->Power button settins-->select ""Sleep""-->save chang";8.After step10 , ping out, no pkg lost.;;RedHatEnterpriseLinux7/RHEL7-96008
2955;;;;;;;;;9;"9.Wake guest from S3, press ""Enter"".";​​;;RedHatEnterpriseLinux7/RHEL7-96008
2955;;;;;;;;;10;"10.Check network via ping external host.
 # ping $external_host_ip -c 10";​​;;RedHatEnterpriseLinux7/RHEL7-96008
2956;RHEL7-96353;sdfs;sdfs;Yan Fu (yafu);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-96353
2957;RHEL7-96471;[target dev] set target name with prefix 'vnet'  'macvtap', 'macvlan' 'vif' in macvtap interface;"This name can be manually specified, however the name should not start with either 'vnet', 'vif', 'macvtap', or 'macvlan', which are prefixes reserved by libvirt and certain hypervisors. Manually specified targets using these prefixes may be ignored. -libvirt.org  currently in rhel7.4 libvirt, for macvtap interface, target name start with prefix ""macvtap"" ""vnet"" will be override(not override for macvlan, vif), for interface type other than macvtap, target name start with prefix ""vnet"" will be override.(not override with macvtap, vif, macvlan)";Yalan Zhang (yalzhang);Low;Positive;Automated;;1;"1. set to the target name to macvtap100, it will be ignored 
 
 the guest is inactibe
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  -     rhel                           shut off
 
 
 # virsh edit rhel7 
 <interface type='direct'> 
 ......
 <target dev='macvtap100'/> 
 ......
 </interface>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-96471
2957;;;;;;;;;2;"2. # virsh dumpxml rhel7 | grep /interface -B5
​​";"<interface type='direct'>
       <mac address='52:54:00:06:0b:5d'/>
       <source dev='ens1f0' mode='vepa'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
 
 (no target name set, it is ignored)";;RedHatEnterpriseLinux7/RHEL7-96471
2957;;;;;;;;;3;"3. set to the target name to vnet100
 
 # virsh edit rhel
 <interface type='direct'> 
 ......
 <target dev='vnet100'/> 
 ......
 </interface>
 Domain rhel XML configuration edited.
 
 # virsh dumpxml rhel | grep vnet100
 #";"no output
 
 (vnet* will be igonred as macvtap*)";;RedHatEnterpriseLinux7/RHEL7-96471
2957;;;;;;;;;4;"4.set target name to macvlan100, redo step 1~2, it will not be ignored
 # virsh edit rhel
 <interface type='direct'> 
 ......
 <target dev='macvlan100'/> 
 ......
 </interface>
 Domain rhel XML configuration edited.
 
 # virsh dumpxml rhel | grep macvlan";"output:     <target dev='macvlan100'/>
 
 
 
 (the macvlan100 can be save and set)";;RedHatEnterpriseLinux7/RHEL7-96471
2957;;;;;;;;;5;"5. set target name to vif100
 # virsh edit rhel
  <interface type='direct'>
       <mac address='52:54:00:20:93:f5'/>
       <source dev='ens1f0' mode='vepa'/>
       <target dev='vif100'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
 
 # virsh dumpxml rhel | grep vif
​​";"output:
 
       <target dev='vif100'/>
 
 (vif100 will not be ignored, can be save and set)";;RedHatEnterpriseLinux7/RHEL7-96471
2958;RHEL7-96473;[target dev] set target dev to null or to the one already in use for macvtap and network interface;"1. set the target dev to null, it will report error 
2. set duplicate target dev name, will report error when start";Yalan Zhang (yalzhang);Low;Negative;Automated;;1;For macvtap;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-96473
2958;;;;;;;;;2;"1. edit the target dev to null, it will report error
 # virsh edit rhel
   <interface type='direct'>
       <mac address='52:54:00:20:93:f5'/>
       <source dev='ens1f0' mode='vepa'/>
       <target dev=''/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
 
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content
 
 Failed. Try again? [y,n,i,f,?]:  ==> press ""i""
 Domain rhel XML configuration edited.
 
 # virsh start rhel
​​";"error: Failed to start domain rhel
 error: error destroying network device : No such device
 
 (the xml with target dev=null can not be saved, if ignore the validation, guest can not start)
​​";;RedHatEnterpriseLinux7/RHEL7-96473
2958;;;;;;;;;3;"2. set duplicate target dev name, will report error when start
 # virsh edit rhel
    <interface type='direct'>
       <mac address='52:54:00:20:93:f5'/>
       <source dev='ens1f0' mode='bridge'/>
       <target dev='test'/>
     </interface>
   <interface type='direct'>
       <mac address='52:54:00:20:93:f5'/>
       <source dev='ens1f0' mode='bridge'/>
       <target dev='test'/>
     </interface>
 
 # virsh start rhel
​​";"output:
 error: Failed to start domain rhel
 error: Unable to create macvtap device test: File exists
 
​​";;RedHatEnterpriseLinux7/RHEL7-96473
2958;;;;;;;;;4;"3. prepare a running guest with one direct interface with target dev=test
 
 # virsh dumpxml rhel   | grep /interface -B7
 <interface type='direct'>
       <mac address='52:54:00:b6:0a:67'/>
       <source dev='ens1f0' mode='bridge'/>
       <target dev='test'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-96473
2958;;;;;;;;;5;"4. hotplug one interface with the same target name
 # virsh attach-interface rhel direct  ens1f0 --target test
​​";"output:
 error: Failed to attach interface
 error: Unable to create macvtap device test: File exists";;RedHatEnterpriseLinux7/RHEL7-96473
2958;;;;;;;;;6;For other interface type;​​;;RedHatEnterpriseLinux7/RHEL7-96473
2958;;;;;;;;;7;"1. prepare an active guest with interface type=network and target dev=test
 
 # virsh dumpxml rhel | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:ee:64:4d'/>
       <source network='default' bridge='virbr0'/>
       <target dev='test'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-96473
2958;;;;;;;;;8;"2. attach an interface with duplicate target name
 # virsh attach-interface rhel network default --target test
​​";"output:
 error: Failed to attach interface
 error: Unable to create tap device test: Device or resource busy";;RedHatEnterpriseLinux7/RHEL7-96473
2958;;;;;;;;;9;3. # virsh attach-interface rhel direct enp0s25 --target test;"output:
 error: Failed to attach interface
 error: Unable to create macvtap device test: File exists";;RedHatEnterpriseLinux7/RHEL7-96473
2958;;;;;;;;;10;"4. try to start a guest with duplicate target name
 # virsh dumpxml rhel | grep /interface -B6
     <interface type='network'>
       <mac address='52:54:00:ee:64:4d'/>
       <source network='default'/>
       <target dev='test'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
     <interface type='network'>
       <mac address='52:54:00:e3:76:6b'/>
       <source network='default'/>
       <target dev='test'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
 
 # virsh start rhel";"output:
 error: Failed to start domain rhel
 error: Unable to create tap device test: Device or resource busy
 
​​";;RedHatEnterpriseLinux7/RHEL7-96473
2959;RHEL7-96475;[target dev] set target name with prefix 'macvtap' 'vif' 'macvlan' in network interface;"for interface type other than macvtap, target name start with prefix ""vnet"" will be override.(not override with macvtap, vif, macvlan)
set target name with prefix 'macvtap' 'vif' 'macvlan' in network interface will not be override";Yalan Zhang (yalzhang);Low;Positive;Automated;;1;" 1. edit a vm's xml to with below xml with target name=macvtap0
 # virsh edit rhel
    <interface type='network'>
       <source network='default' />
       <target dev='macvtap0'/>
     </interface>"; can save and edit succeed;Test Case;RedHatEnterpriseLinux7/RHEL7-96475
2959;;;;;;;;;2;" 2.  # virsh dumpxml rhel | grep /interface -B6
​​";"     <interface type='network'>
       <mac address='52:54:00:16:36:69'/>
       <source network='default'/>
       <target dev='macvtap0'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-96475
2959;;;;;;;;;3;"3. set the target name with prefix 'macvlan', such as macvlan100
 
 # virsh dumpxml rhel | grep macvlan100";"output:
 <target dev='macvlan100'/>
 
 
 (the macvlan100 will not be ignored)";;RedHatEnterpriseLinux7/RHEL7-96475
2959;;;;;;;;;4;"4. set the target name with prefix ""vif"", see vif100
 # virsh dumpxml rhel | grep vif100";"output:
 <target dev='vif100'/>
 
 (the vif100 will not be ignored)";;RedHatEnterpriseLinux7/RHEL7-96475
2960;RHEL7-96502;[user] configure ip address  for  interface (negative) - bug  1075520, bug 1515533;<ip/> is only supported for user type interface. And try unsupported value for prefix or mac;Yalan Zhang (yalzhang);Low;Positive;Not Automated;;1;scenario 1: 2 ipv4 or ipv6 address;" 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-96502
2960;;;;;;;;;2;"1. use non-root
 prepare an inactive domain with user type interface as below
 $ virsh dumpxml rhel7.2 | grep /interface -B6
     <interface type='user'>
       <mac address='00:11:22:33:44:55'/>
       <ip address='172.17.2.0' family='ipv4' prefix='24'/>
       <ip address='2001:db8:ac10:fd01::' family='ipv6' prefix='64'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-96502
2960;;;;;;;;;3;"2. Set more than 1 ip address for ipv4 or ipv6
 $ virsh edit rhel7.2
   <interface type='user'>
       <mac address='00:11:22:33:44:55'/>
       <ip address='172.17.2.0' family='ipv4' prefix='24'/>
       <ip address='100.17.2.0' family='ipv4' prefix='24'/>
       <ip address='2001:db8:ac10:fd01::' family='ipv6' prefix='64'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 error: unsupported configuration: Only one IPv4 address per interface is allowed
 Failed. Try again? [y,n,i,f,?]: 
​​";2 ipv4 address is not accepted;;RedHatEnterpriseLinux7/RHEL7-96502
2960;;;;;;;;;4;"$ virsh edit rhel7.2
   <interface type='user'>
       <mac address='00:11:22:33:44:55'/>
       <ip address='172.17.2.0' family='ipv4' prefix='24'/>
       <ip address='2001:db8:ac10:fd01::' family='ipv6' prefix='64'/>
       <ip address='2001:db8:ac10:fd03::' family='ipv6' prefix='64'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 error: unsupported configuration: Only one IPv6 address per interface is allowed
 Failed. Try again? [y,n,i,f,?]: ";2 ipv6 address is not accepted;;RedHatEnterpriseLinux7/RHEL7-96502
2960;;;;;;;;;5;scenario 2: set prefix out of the range 4~27;​​;;RedHatEnterpriseLinux7/RHEL7-96502
2960;;;;;;;;;6;"3. set prefix as 1~3, 
 $ virsh edit rhel7.2
 $ virsh dumpxml rhel7.2 | grep /interface -B6
     <interface type='user'>
       <mac address='00:11:22:33:44:55'/>
       <ip address='172.17.2.0' family='ipv4' prefix='2'/>
       <ip address='2001:db8:ac10:fd01::' family='ipv6' prefix='64'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";ipv4 prefix can be 4~27 including 4 and 27, or the guest will not start or can not validate;;RedHatEnterpriseLinux7/RHEL7-96502
2960;;;;;;;;;7;$ virsh start rhel7.2;"error: Failed to start domain rhel7.2
 error: internal error: qemu unexpectedly closed the monitor: 2017-10-23T08:05:50.974182Z qemu-kvm: -chardev pty,id=charserial0: char device redirected to /dev/pts/2 (label charserial0)
 2017-10-23T08:05:50.979382Z qemu-kvm: -netdev user,net=172.17.2.0/2,ipv6-net=2001:db8:ac10:fd01::/64,id=hostnet0: Device 'user' could not be initialized";;RedHatEnterpriseLinux7/RHEL7-96502
2960;;;;;;;;;8;"4. Set prefix as 28, will get error.
 # virsh edit rhel7.4
     <interface type='user'>
       <mac address='00:11:22:33:44:55'/>
       <ip address='172.17.2.0' family='ipv4' prefix='28'/>
       <ip address='2001:db8:ac10:fd01::' family='ipv6' prefix='64'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 error: XML error: prefix too long
 Failed. Try again? [y,n,i,f,?]:";the xml with prefix as 28 for ipv4 can not be validate;;RedHatEnterpriseLinux7/RHEL7-96502
2960;;;;;;;;;9;scenario 3:;​​;;RedHatEnterpriseLinux7/RHEL7-96502
2960;;;;;;;;;10;"1. Define and start guest with interface below without the prefix:
     <interface type='user'>
       <mac address='00:11:22:33:44:55'/>
       <ip address='172.17.2.0' family='ipv4'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
     </interface>";"The guest start successfully
​​";;RedHatEnterpriseLinux7/RHEL7-96502
2960;;;;;;;;;11;"2. Login to the guest, check the guest interface
​​";"Interface get the ipaddress
​​";;RedHatEnterpriseLinux7/RHEL7-96502
2960;;;;;;;;;12;scenario 4: other type interface do not support ip element;​​;;RedHatEnterpriseLinux7/RHEL7-96502
2960;;;;;;;;;13;"5. set ip in other type of interface, change to root, prepare a domain with network interface
 # virsh dumpxml rhel7.4 | grep /interface -B5
     <interface type='network'>
       <mac address='52:54:00:11:0c:ff'/>
       <source network='default'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh edit rhel7.4
    <interface type='network'>
       <mac address='52:54:00:11:0c:ff'/>
       <source network='default'/>
       <model type='virtio'/>
     <ip address='172.17.2.0' family='ipv4' prefix='24'/>   
   <ip address='2001:db8:ac10:fd01::' family='ipv6' prefix='64'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content
 
 Failed. Try again? [y,n,i,f,?]:  ==> press 'i'
 error: unsupported configuration: Invalid attempt to set network interface guest-side IP route and/or address info, not supported by QEMU
 Failed. Try again? [y,n,f,?]: 
 
​​";network type interface do not support ip element;;RedHatEnterpriseLinux7/RHEL7-96502
2960;;;;;;;;;14;" 6. direct type
 # virsh dumpxml rhel7.4 | grep /interface -B5
     <interface type='direct'>
       <mac address='52:54:00:08:ae:94'/>
       <source dev='eno1' mode='vepa'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-96502
2960;;;;;;;;;15;" # virsh edit rhel7.4
    <interface type='direct'>
       <mac address='52:54:00:08:ae:94'/>
       <source dev='eno1' mode='vepa'/>
       <model type='rtl8139'/>
   <ip address='172.17.2.0' family='ipv4' prefix='24'/>     
 <ip address='2001:db8:ac10:fd01::' family='ipv6' prefix='64'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content
 
 Failed. Try again? [y,n,i,f,?]: 
 error: unsupported configuration: Invalid attempt to set network interface guest-side IP route and/or address info, not supported by QEMU
 Failed. Try again? [y,n,f,?]: 
​​";direct type interface do not support ip element;;RedHatEnterpriseLinux7/RHEL7-96502
2961;RHEL7-96520;[ethernet] start guest with ethernet type interface with non-exists script path;if the script do not exists, should report error, not any anomaly.;Yalan Zhang (yalzhang);Medium;Negative;Not Automated;;1;" 1. confirm the path is not exists
 # ll /etc/qemu-ifup-mynet
 ls: cannot access /etc/qemu-ifup-mynet: No such file or directory

 prepare an inactive guest with below interface
    <interface type='ethernet'>
       <script path='/etc/qemu-ifup-mynet'/>
     </interface>
"; ;Test Case;RedHatEnterpriseLinux7/RHEL7-96520
2961;;;;;;;;;2;"2. start the guest
 # virsh start rhel
​​";"error: Failed to start domain rhel
 error: internal error: Child process (LC_ALL=C PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin /etc/qemu-ifup-mynet vnet0) unexpected exit status 127: libvirt:  error : cannot execute binary /etc/qemu-ifup-mynet: No such file or directory";;RedHatEnterpriseLinux7/RHEL7-96520
2962;RHEL7-96625;[virtual network][virtual-nic-device] Check guest network link status of virtio nic with status=off;"Check guest network link status of virtio nic with status=off
Deprecated on RHEL8. This feature only support 1.0 device.";Yu Wang (wyu);Medium;Positive;Automated;;1;"1.Boot a guest of virtio-net-pci with status=off and vhost=on:
 -device virtio-net-pci,netdev=hostnet0,mac=9a:e8:e9:ea:eb:ec,id=net0,status=off 
 -netdev tap,id=hostnet0,vhost=on,script=/etc/ifup_script,downscript=/etc/ifdown_script \";guest boot up correctly;Test Case;RedHatEnterpriseLinux7/RHEL7-96625
2962;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-96625
2962;;;;;;;;;3;"3.check network connection status in guest:
 for linux:cat /sys/class/net/eno1/operstate
 for windows: In the right-down corner of windows,click the network icon";"for linux: output is ""unknown""
 for windows: there is no red cross on the icon and it shows ""Connected""";;RedHatEnterpriseLinux7/RHEL7-96625
2962;;;;;;;;;4;"4.Inside guest, ping out from guest, and check link status by:
 # ping www.baidu.com";can ping www.baidu.com successfully, no pkg lost.;;RedHatEnterpriseLinux7/RHEL7-96625
2962;;;;;;;;;5;"5. Set network device link down.
 { ""execute"": ""set_link"", ""arguments"": { ""name"": ""net0"", ""up"": false } }";"qmp return no error msg:
 {""return"": {}}";;RedHatEnterpriseLinux7/RHEL7-96625
2962;;;;;;;;;6;"6.check network connection status in guest:
 For linux:cat /sys/class/net/eno1/operstate
 For windows: In the right-down corner of windows,click the network icon";"for linux: output is still ""unknown""
 or windows: there is no red cross on the icon and it shows ""Connected""";;RedHatEnterpriseLinux7/RHEL7-96625
2962;;;;;;;;;7;"7.Inside guest, ping out from guest, and check link status by:
 # ping www.baidu.com";there is no red cross on the icon, but can not ping out;;RedHatEnterpriseLinux7/RHEL7-96625
2962;;;;;;;;;8;"8.Reboot guest inside
 # ctrl+alt+del --> reboot";guest reboot correctly;;RedHatEnterpriseLinux7/RHEL7-96625
2962;;;;;;;;;9;"9.Inside guest, ping out from guest, and check link status by:
 # ping www.baidu.com";there is no red cross on the icon, but can not ping out;;RedHatEnterpriseLinux7/RHEL7-96625
2962;;;;;;;;;10;"10.Reboot guest via qemu monitor
 (qemu) system_reset";guest reboot correctly;;RedHatEnterpriseLinux7/RHEL7-96625
2962;;;;;;;;;11;"11.Inside guest, ping out from guest, and check link status by:
 # ping www.baidu.com";there is no red cross on the icon, but can not ping out;;RedHatEnterpriseLinux7/RHEL7-96625
2962;;;;;;;;;12;"12.Under qemu monitor, set network device link up.
 { ""execute"": ""set_link"", ""arguments"": { ""name"": ""net0"", ""up"":true}}";"qmp return no error msg:
 {""return"": {}}";;RedHatEnterpriseLinux7/RHEL7-96625
2962;;;;;;;;;13;"13.check network connection status in guest:
 for linux:cat /sys/class/net/eno1/operstate
 for windows: In the right-down corner of windows,click the network icon";"for linux: output is ""unknown""
 or windows: there is no red cross on the icon and it shows ""Connected""";;RedHatEnterpriseLinux7/RHEL7-96625
2962;;;;;;;;;14;"14 .Inside guest, ping out from guest, and check link status by: (win7 and win2008 may get ip with 5 min, so you can use ""ipconfig  /renew"" to get ip , refer to Bug 1532472)
 # ping www.baidu.com ";can ping www.baidu.com successfully, no pkg lost.;;RedHatEnterpriseLinux7/RHEL7-96625
2962;;;;;;;;;15;"15. repeat step 3-14, change device id  to netdev id
 eg. { ""execute"": ""set_link"", ""arguments"": { ""name"": ""hostnet0"", ""up"":true}}
​​";the same as each expected results;;RedHatEnterpriseLinux7/RHEL7-96625
2963;RHEL7-96660;connect session mode by tls;"Connect session by tls
";Yan Fu (yafu);High;Positive;Manual Only;;1;" 1.Prepare tls env as case:
 RHEL7-18274 - [remote access] [tls] Prepare the ipv4 tls env 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-96660
2963;;;;;;;;;2;"2.connect session mode server with tls:
 $virsh -c qemu+tls://user@ip/session
​​";"2.
 Welcome to virsh, the virtualization interactive terminal.

 Type:  'help' for help with commands
        'quit' to quit

 virsh #";;RedHatEnterpriseLinux7/RHEL7-96660
2964;RHEL7-96671;fdsf;;Yan Fu (yafu);High;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-96671
2965;RHEL7-96730;[driver][name][hostdev] start a guest with hostdev legacy driver - kvm;guest can not start with hostdev legacy driver kvm;Yalan Zhang (yalzhang);Medium;Negative;Not Automated;;1;"1. prepare an inactive interface with hostdev interface and driver name='kvm'
 # virsh dumpxml R7.2 | grep /interface -B7
     <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:c5:60:dc'/>
       <driver name='kvm'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x4'/>
       </source>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-96730
2965;;;;;;;;;2;2. # virsh start R7.2;"the guest can not start with driver name='kvm'
 
 # virsh start R7.2
 error: Failed to start domain R7.2
 error: unsupported configuration: host doesn't support legacy PCI passthrough";;RedHatEnterpriseLinux7/RHEL7-96730
2965;;;;;;;;;3;"3. edit the driver name to vfio, then start guest
 <driver name='vfio'/>";the guest can start successfully;;RedHatEnterpriseLinux7/RHEL7-96730
2965;;;;;;;;;4;"4. for hostdev device
 hotplug:cat hostdev1.xml
 <hostdev mode='subsystem' type='pci' managed='yes'>
 <driver name='kvm'/>
 <source>
 <address domain='0x0000' bus='0x03' slot='0x10' function='0x2'/>
 </source>
 <alias name='hostdev0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
 </hostdev>
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-96730
2965;;;;;;;;;5;# virsh attach-device rhel hostdev1.xml;"error: Failed to attach device from hostdev1.xml
 error: unsupported configuration: host doesn't support legacy PCI passthrough";;RedHatEnterpriseLinux7/RHEL7-96730
2965;;;;;;;;;6;"start guest:
 add above xml into guest xml and try to start the guest
 
 # virsh start rhel";"error: Failed to start domain rhel
 error: unsupported configuration: host doesn't support legacy PCI passthrough";;RedHatEnterpriseLinux7/RHEL7-96730
2965;;;;;;;;;7;"5.  detach the device with --driver kvm# virsh nodedev-detach pci_0000_03_10_2 --driver kvm
 
​​";"error: Failed to detach device pci_0000_03_10_2
 error: argument unsupported: KVM device assignment is currently not supported on this system";;RedHatEnterpriseLinux7/RHEL7-96730
2966;RHEL7-96747;[virtual interface] check the access of nat interface for nfs server - bug 615144;"verify guest with nat network can not access the nfs server unless adding ""insecure"" flag in the configure file of nfs server.";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;1. Prepare two machines, one is nfs server, another is a test machine on which guest is running.;"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-96747
2966;;;;;;;;;2;"2. On nfs server, share a directory.
 # cat /etc/exports
 /tmp *(rw)
 # service nfs start
 # iptables -F";​​;;RedHatEnterpriseLinux7/RHEL7-96747
2966;;;;;;;;;3;"3. On test machine, make sure a guest with NAT virtual network is running
 # virsh dumpxml <guestname>
 ...
 <interface type='network'>
 <mac address='52:54:00:f9:14:28'/>
 <source network='default'/>
 <target dev='vnet0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/>
 </interface>
 ...";​​;;RedHatEnterpriseLinux7/RHEL7-96747
2966;;;;;;;;;4;"4. In the guest, run mount command.
 # mount <nfs_server_IP>:/tmp /mnt
​​";"The following error message is seen:
 mount.nfs: access denied by server while mounting 10.66.92.185:/tmp";;RedHatEnterpriseLinux7/RHEL7-96747
2966;;;;;;;;;5;"5. On nfs server, edit /etc/exports as following:
 # cat /etc/exports
 /tmp *(rw,insecure)
 # service nfs restart";​​;;RedHatEnterpriseLinux7/RHEL7-96747
2966;;;;;;;;;6;"6. In guest, re-mount the nfs share directory.
 # mount <nfs_server_IP>:/tmp /mnt
​​";Mount successfully.;;RedHatEnterpriseLinux7/RHEL7-96747
2967;RHEL7-96871;[svirt][selinux][config]Disable qemu namesapce with running guest- bug 1453142;"Disable qemu namespace with running guest.
";Yan Fu (yafu);High;Positive;Not Automated;;1;" 1.Start a guest:
 #virsh start rhel7.3-min
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-96871
2967;;;;;;;;;2;"2.Disable the namespace in qemu.conf:
 #vim /etc/libvirt/qemu.conf
 namespaces = []
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-96871
2967;;;;;;;;;3;"3.Restart libvirtd service:
 #systemctl restart libvirtd
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-96871
2967;;;;;;;;;4;"4.Destroy and start the guest again:
 #virsh destroy rhel7.3-min
 #virsh start rhel7.3-min
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-96871
2967;;;;;;;;;5;"5.Check whether libvirtd create namespace for the guest:
 #lsns | grep qemu
​​";"5.no output
​​";;RedHatEnterpriseLinux7/RHEL7-96871
2968;RHEL7-97039;IDM-SSSD-TC: krb_provider: kcm: Verify krb ticket by setting KCM in krb5 conf file and KEYRING in kcm default ccache file;Verify krb ticket by setting KCM in krb5 conf file and KEYRING in kcm default ccache file;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;" Edit /etc/krb5.conf.d/kcm_default_ccache file and set KEYRING as follows:
   [libdefaults]
     default_ccache_name = KEYRING:persistent:%{uid}"; Valid KEYRING krb ticket, clearly kcm_default_ccache file take precedence over /etc/krb5.conf file.;Test Case;RedHatEnterpriseLinux7/RHEL7-97039
2968;;;;;;;;;2;"Edit /etc/krb5.conf file and set default_ccache_name = KCM: 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97039
2968;;;;;;;;;3;Restart sssd service.;​​;;RedHatEnterpriseLinux7/RHEL7-97039
2968;;;;;;;;;4;Run user login and verify cached krb ticket.;​​;;RedHatEnterpriseLinux7/RHEL7-97039
2969;RHEL7-97134;KN-TC: vlan/multi_arch/tier1_all;KN-TC: vlan/multi_arch/tier1_all;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-97134
2970;RHEL7-97135;KN-TC: vlan/tier1/reorder_hdr_toggle FUNC=nic;KN-TC: vlan/tier1/reorder_hdr_toggle FUNC=nic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-97135
2971;RHEL7-97136;[driver][multiqueue] start a guest with network or direct type interface with max queues - Bug 1484697 ;the boundry for network type and bridge type interface is 1~256. as kernel limitation, the max value is 256. for direct type interface,the max value can be 16 and for vhostuser, the max value can be . Start guest with with max value, it should works.  ;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;Test some boundary values:;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97136
2971;;;;;;;;;2;"1. edit the queues  to 256 in interface xml, then start the guest
 
 [root@localhost ~]# virsh edit r7
 Domain r7 XML configuration edited.
 
 [root@localhost ~]# virsh dumpxml r7 | grep queues
 <driver name='vhost' queues='256'/>
 
 [root@localhost ~]# virsh dumpxml r7 | grep -a2A2 queues
 <source network='default'/>
 <model type='virtio'/>
 <driver name='vhost' queues='256'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 
 [root@localhost ~]# virsh start r7
 Domain r7 started";​​;;RedHatEnterpriseLinux7/RHEL7-97136
2971;;;;;;;;;3;"2. check the qemu command line 
 [root@localhost ~]# ps aux | grep qemu-kvm 
 |grep -v grep| sed 's/-device/\n-device/g' | grep ""virtio-net-pci""";"-device virtio-net-pci,**mq=on,vectors=514**,netdev=hostnet0,id=net0
 ,mac=52:54:00:e5:99:99,bus=pci.0,addr=0x3 -chardev pty,id=charserial0";;RedHatEnterpriseLinux7/RHEL7-97136
2971;;;;;;;;;4;"3. check the value on guest
 # ethtool -l eth0
 Channel parameters for eth0:
 Pre-set maximums:
 RX: 0
 TX: 0
 Other: 0
 Combined: 256
 Current hardware settings:
 RX: 0
 TX: 0
 Other: 0
 Combined: 1
 
 combined then check again:
 # ethtool -L eth0 combined 256
 # ethtool -l eth0";"Channel parameters for eth0:
 Pre-set maximums:
 RX: 0
 TX: 0
 Other: 0
 Combined: 256
 Current hardware settings:
 RX: 0
 TX: 0
 Other: 0
 Combined: 256";;RedHatEnterpriseLinux7/RHEL7-97136
2971;;;;;;;;;5;macvtap;​​;;RedHatEnterpriseLinux7/RHEL7-97136
2971;;;;;;;;;6;"for macvtap, the max value can set and start is 16
 set 16 and start the guest
 # virsh dumpxml rhel7.4  | grep /interface -B9
 ...
    <interface type='direct'>
       <mac address='52:54:00:30:89:a6'/>
       <source dev='eno1' mode='bridge'/>
       <model type='virtio'/>
       <driver queues='16'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
 # virsh start rhel7.4";"Domain rhel7.4 started
 
 
 (when set to 17, there is a bug 1484697)";;RedHatEnterpriseLinux7/RHEL7-97136
2971;;;;;;;;;7;"# ethtool -l eth1
 
​​";"Channel parameters for eth1:
 Pre-set maximums:
 RX: 0
 TX: 0
 Other: 0
 Combined: 16
 Current hardware settings:
 RX: 0
 TX: 0
 Other: 0
 Combined: 1";;RedHatEnterpriseLinux7/RHEL7-97136
2971;;;;;;;;;8;"# ethtool -l eth1
 
 
​​";"Channel parameters for eth1:
 Pre-set maximums:
 RX: 0
 TX: 0
 Other: 0
 Combined: 16
 Current hardware settings:
 RX: 0
 TX: 0
 Other: 0
 Combined: 15";;RedHatEnterpriseLinux7/RHEL7-97136
2971;;;;;;;;;9;"for vhostuser, the max value can set and start is 
 
 There is a related bug for vhostuser.
 https://bugzilla.redhat.com/show_bug.cgi?id=1512488 ";​​;;RedHatEnterpriseLinux7/RHEL7-97136
2972;RHEL7-97138;[attach-device][mutiqueue] hotplug / unplug an network interface with multiqueue;hotplug a network type interface with multiqueue defined;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;Hotplug/unplug interface device with multi-queue testing:**;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97138
2972;;;;;;;;;2;"# cat nic.xml
 <interface type='network'>
 <source network='default'/>
 <model type='virtio'/>
 <driver name='vhost' queues='5'/>
 </interface>
 
 # virsh list --all
 Id Name State
 ----------------------------------------------------
 5 r7 running
 
 prepare an active guest already with an network interface
 # virsh dumpxml r7| grep -aA8 interface
 <interface type='network'>
 <mac address='52:54:00:02:0a:7a'/>
 <source network='default'/>
 <target dev='vnet0'/>
 <model type='virtio'/>
 <driver name='vhost' queues='8'/>
 <alias name='net0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
 </interface>
 ...
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97138
2972;;;;;;;;;3;"# virsh attach-device r7 nic.xml
 Device attached successfully";"# virsh dumpxml r7| grep -aA8 interface
 <interface type='network'>
 <mac address='52:54:00:02:0a:7a'/>
 <source network='default'/>
 <target dev='vnet0'/>
 <model type='virtio'/>
 <driver name='vhost' queues='8'/>
 <alias name='net0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
 </interface>
 <interface type='network'>
 <mac address='52:54:00:ee:e4:bf'/>
 <source network='default'/>
 <target dev='vnet1'/>
 <model type='virtio'/>
 <driver name='vhost' queues='5'/>
 <alias name='net1'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 ...";;RedHatEnterpriseLinux7/RHEL7-97138
2972;;;;;;;;;4;"# cat remove.xml
 <interface type='network'>
 <mac address='52:54:00:ee:e4:bf'/>
 <source network='default'/>
 <target dev='vnet1'/>
 <model type='virtio'/>
 <driver name='vhost' queues='5'/>
 <alias name='net1'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 
 # virsh detach-device r7 remove.xml
 Device detached successfully";​​;;RedHatEnterpriseLinux7/RHEL7-97138
2972;;;;;;;;;5;"# virsh dumpxml r7| grep ""52:54:00:ee:e4:bf""";no output;;RedHatEnterpriseLinux7/RHEL7-97138
2973;RHEL7-97183;KN-TC: vlan/multi_arch/promisc;KN-TC: vlan/multi_arch/promisc;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-97183
2974;RHEL7-97184;KN-TC: vlan/multi_arch/vlan_and_bridge_over_nic;KN-TC: vlan/multi_arch/vlan_and_bridge_over_nic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-97184
2975;RHEL7-97185;KN-TC: vlan/multi_arch/config_file_test;KN-TC: vlan/multi_arch/config_file_test;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-97185
2976;RHEL7-97186;KN-TC: vlan/multi_arch/vlan_fragment_test;KN-TC: vlan/multi_arch/vlan_fragment_test;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-97186
2977;RHEL7-97261;[update-device][coalesce] update coalesce settings for interface;coalesce is supported since rhel7.5, and for all the interface connected to a bridge or ovs with vhost backend driver. It support live update.;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"delete the setting by update-device from 32 to blank
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97261
2977;;;;;;;;;2;"1. prepare a running guest with interface as below with coalesce settings
 # virsh dumpxml rhel7.4 | grep /interface -B12
    <interface type='network'>
       <mac address='52:54:00:05:d7:cc'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <coalesce>
         <rx>
           <frames max='32'/>
         </rx>
       </coalesce>
    <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-97261
2977;;;;;;;;;3;"2. prepare a xml just like above with coalesce settings deleted
 # cat interface2.xml
    <interface type='network'>
       <mac address='52:54:00:05:d7:cc'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-97261
2977;;;;;;;;;4;"3. # virsh update-device rhel7.4 interface2.xml
 
​​";"Device updated successfully
​​";;RedHatEnterpriseLinux7/RHEL7-97261
2977;;;;;;;;;5;"4. # virsh dumpxml rhel7.4 | grep /interface -B12
    ---> no coalesce settings";no coalesce settings as in step1;;RedHatEnterpriseLinux7/RHEL7-97261
2977;;;;;;;;;6;add the coalesce settings;​​;;RedHatEnterpriseLinux7/RHEL7-97261
2977;;;;;;;;;7;"1. a running guest  with one interface without coalesce settings
 # virsh dumpxml rhel7.4 | grep /interface -B12
      <interface type='network'>
       <mac address='52:54:00:05:d7:cc'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97261
2977;;;;;;;;;8;"2. prepare a interface xml with coalesce setting
 # cat interface3.xml
    <interface type='network'>
       <mac address='52:54:00:05:d7:cc'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
        <coalesce>
         <rx>
           <frames max='64'/>
         </rx>
       </coalesce>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-97261
2977;;;;;;;;;9;"3. # virsh update-device rhel7.4  interface3.xml
​​";Device updated successfully;;RedHatEnterpriseLinux7/RHEL7-97261
2977;;;;;;;;;10;"4. # virsh dumpxml rhel7.4 | grep /interface -B12
​​";"...
   <coalesce>
         <rx>
           <frames max='64'/>
         </rx>
 ...";;RedHatEnterpriseLinux7/RHEL7-97261
2977;;;;;;;;;11;change the coalesce settings by update-device;​​;;RedHatEnterpriseLinux7/RHEL7-97261
2977;;;;;;;;;12;"1. prepate a running guest with interface with coalesce settings
 # virsh dumpxml rhel7.4 | grep /interface -B12
 ...
   <coalesce>
         <rx>
           <frames max='64'/>
         </rx>
 ...";​​;;RedHatEnterpriseLinux7/RHEL7-97261
2977;;;;;;;;;13;"2. prepate a interface xml just like above but with different coalesce settings like
 # cat interface.xml
 ...
   <coalesce>
         <rx>
           <frames max='32'/>
         </rx>
 ...";​​;;RedHatEnterpriseLinux7/RHEL7-97261
2977;;;;;;;;;14;3. # virsh update-device rhel7.4 interface.xml;Device updated successfully;;RedHatEnterpriseLinux7/RHEL7-97261
2977;;;;;;;;;15;"4. check the coalesce setting changed from 64 to 32
 # virsh dumpxml rhel7.4 | grep /interface -B9";"...
   <coalesce>
         <rx>
           <frames max='32'/>
         </rx>
 ...";;RedHatEnterpriseLinux7/RHEL7-97261
2978;RHEL7-97268;[update-device][link state] update interface link status by update-device;link state is supported in all interface type other than hostdev, update the link state for all interface type other than hostdev is supported;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"1. # virsh dumpxml rhel | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:97:2b:6b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97268
2978;;;;;;;;;2;"2. copy the interface xml into a file and add the ""<link state='down'/>""
 # cat interface.xml
   <interface type='network'>
       <mac address='52:54:00:97:2b:6b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
 <link state='down'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97268
2978;;;;;;;;;3;"on guest 
 # ethtool ens3";Link detected: yes;;RedHatEnterpriseLinux7/RHEL7-97268
2978;;;;;;;;;4;3. # virsh update-device rhel iface.xml;Device updated successfully;;RedHatEnterpriseLinux7/RHEL7-97268
2978;;;;;;;;;5;"on guest
 # ethtool ens3";Link detected: no;;RedHatEnterpriseLinux7/RHEL7-97268
2978;;;;;;;;;6;"# virsh domif-getlink rhel vnet0
​​";vnet0 down;;RedHatEnterpriseLinux7/RHEL7-97268
2978;;;;;;;;;7;"4. #cat interface2.xml 
   <interface type='network'>
       <mac address='52:54:00:97:2b:6b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
 <link state='up'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-97268
2978;;;;;;;;;8;5.  # virsh update-device rhel interface.xml;Device updated successfully;;RedHatEnterpriseLinux7/RHEL7-97268
2978;;;;;;;;;9;"# virsh domif-getlink rhel vnet0
​​";vnet0 up;;RedHatEnterpriseLinux7/RHEL7-97268
2978;;;;;;;;;10;"6. on guest
 # ethtool ens3";Link detected: yes;;RedHatEnterpriseLinux7/RHEL7-97268
2978;;;;;;;;;11;"Test other interface type, redo above steps
 RHEL7-46088 - virtual interface - performance check for different types";​​;;RedHatEnterpriseLinux7/RHEL7-97268
2979;RHEL7-97269;[link state] update link status by domif-setlink with --config;"The command ""domif-setlink domain interface-device state [--config]"" only support one option, that is the --config, it will only modify the persistent configuration of the domain, for compatibility purposes, --persistent is alias of --config. same for domif-getlink
";Yalan Zhang (yalzhang);High;Positive;Not Automated;;1; with --config;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97269
2979;;;;;;;;;2;"1.  prepare a running vm
 # virsh dumpxml rhel | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:97:2b:6b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-97269
2979;;;;;;;;;3;"on the guest 
 # ethtool ens3";Link detected: yes;;RedHatEnterpriseLinux7/RHEL7-97269
2979;;;;;;;;;4;"on the host
 # virsh domif-getlink rhel vnet0
​​";vnet0 up;;RedHatEnterpriseLinux7/RHEL7-97269
2979;;;;;;;;;5;"2. update link state with --config
 To change the persistent config, need to use mac address instead of the alias
 # virsh domiflist rhel
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet0      network    default    rtl8139     52:54:00:97:2b:6b
 
 # virsh domif-setlink rhel 52:54:00:97:2b:6b down --config
​​";Device updated successfully;;RedHatEnterpriseLinux7/RHEL7-97269
2979;;;;;;;;;6;"3. it only update persistent config, the live state is also up, 
 # virsh domif-getlink rhel 52:54:00:97:2b:6b";52:54:00:97:2b:6b up;;RedHatEnterpriseLinux7/RHEL7-97269
2979;;;;;;;;;7;"4. the persistent config is down
 # virsh domif-getlink rhel 52:54:00:97:2b:6b --config
";52:54:00:97:2b:6b down;;RedHatEnterpriseLinux7/RHEL7-97269
2979;;;;;;;;;8;# virsh domif-getlink rhel 52:54:00:97:2b:6b --persistent;52:54:00:97:2b:6b down;;RedHatEnterpriseLinux7/RHEL7-97269
2979;;;;;;;;;9;"5. destroy then check persistent config
 # virsh destroy rhel
 Domain rhel destroyed
 
 # virsh dumpxml rhel | grep /interface -B6
  ";"  <interface type='network'>
       <mac address='52:54:00:97:2b:6b'/>
       <source network='default'/>
       <model type='rtl8139'/>
       <link state='down'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-97269
2979;;;;;;;;;10;"6. start and check again
 # virsh start rhel
 # virsh domif-getlink rhel vnet0
​​";vnet0 down;;RedHatEnterpriseLinux7/RHEL7-97269
2979;;;;;;;;;11;with --persistent;​​;;RedHatEnterpriseLinux7/RHEL7-97269
2979;;;;;;;;;12;"continue with above steps
 
 6. # virsh domif-setlink rhel 52:54:00:97:2b:6b  up --persistent
 Device updated successfully
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97269
2979;;;;;;;;;13;# virsh domif-getlink rhel  vnet0;vnet0 down;;RedHatEnterpriseLinux7/RHEL7-97269
2979;;;;;;;;;14;"7. # virsh destroy rhel
 # virsh dom-getlink rhel 52:54:00:97:2b:6b
​​";52:54:00:97:2b:6b up;;RedHatEnterpriseLinux7/RHEL7-97269
2980;RHEL7-97270;[link state] restart libvirtd after update link status and save-restore with link state setting;restart libvirtd, or save-restore will not change the link state;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. prepare a running vm
 # virsh dumpxml rhel | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:97:2b:6b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97270
2980;;;;;;;;;2;"2. 
 # virsh domif-setlink rhel vnet0 down
 Device updated successfully
 
 # virsh domif-getlink rhel vnet0
 vnet0 down
 
 # systemctl restart libvirtd.service
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97270
2980;;;;;;;;;3;"3. 
 # virsh domif-getlink rhel vnet0
​​";vnet0 down;;RedHatEnterpriseLinux7/RHEL7-97270
2980;;;;;;;;;4;"4. 
 # virsh domif-setlink rhel vnet0 up
 Device updated successfully
 
 # virsh domif-getlink rhel vnet0
 vnet0 up";​​;;RedHatEnterpriseLinux7/RHEL7-97270
2980;;;;;;;;;5;"5. # systemctl restart libvirtd.service
 # virsh domif-getlink rhel 52:54:00:97:2b:6b
​​";52:54:00:97:2b:6b up;;RedHatEnterpriseLinux7/RHEL7-97270
2980;;;;;;;;;6;"6.
 # virsh save rhel  rhel.save
 Domain rhel saved to rhel.save";​​;;RedHatEnterpriseLinux7/RHEL7-97270
2980;;;;;;;;;7;"7. # virsh restore rhel.save
 Domain restored from rhel.save
 
 # virsh dumpxml rhel | grep /interface -B8
     <interface type='network'>
       <mac address='52:54:00:97:2b:6b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <link state='up'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";<link state='up'/>;;RedHatEnterpriseLinux7/RHEL7-97270
2981;RHEL7-97271;[attach-device][vhostuser] hotplug vhostuser interface with multiqueue;"setup refer to RHEL7-51239 - [NFV] Test vhostuser interface with openvswtich+dpdk 
and enable multiqueue in the script by uncomment the multiqueue setting lines as below
# echo ""enable queue size ='4'""
# ovs-vsctl set Interface vhost-user2 options:n_rxq=4
# ovs-vsctl set Interface vhost-user2 options:n_rxq=4";Yalan Zhang (yalzhang);Critical;Positive;Not Automated;;1;"1. start a guest with no interface with vhostuser setting,
 # virsh dumpxml vhost1
 ....
  <memoryBacking>
     <hugepages>
       <page size='2048' unit='KiB'/>
     </hugepages>
   </memoryBacking>
   <vcpu placement='static'>24</vcpu>
 ...
  <cpu mode='host-passthrough' check='none'>
     <numa>
       <cell id='0' cpus='0-23' memory='1048576' unit='KiB' memAccess='shared'/>
     </numa>
   </cpu>
 ....

 # virsh start vhost1
 Domain vhost1 started


 prepare the xml as below
 # cat net.xml
     <interface type='vhostuser'>
       <source type='unix' path='/var/run/openvswitch/vhost-user2' mode='client'/>
       <model type='virtio'/>
       <driver name='vhost' queues='4'/>
     </interface>
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97271
2981;;;;;;;;;2;"2. # virsh attach-device vhost1 net.xml
 Device attached successfully
";the vhostuser interface with multiqueue define can be hotplug;;RedHatEnterpriseLinux7/RHEL7-97271
2981;;;;;;;;;3;3. # virsh dumpxml vhost1 | grep /interface -B7;"   <interface type='vhostuser'>
       <mac address='52:54:00:fe:a5:81'/>
       <source type='unix' path='/var/run/openvswitch/vhost-user2' mode='client'/>
       <model type='virtio'/>
       <driver name='vhost' queues='4'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
";;RedHatEnterpriseLinux7/RHEL7-97271
2981;;;;;;;;;4;"4. login guest and check the interface exists
 # lspci  | grep -i ethernet
 00:03.0 Ethernet controller: Red Hat, Inc Virtio network device
 
 # ifconfig  -a
​​";"eth0: flags=4098<BROADCAST,MULTICAST>  mtu 1500
         ether 52:54:00:fe:a5:81  txqueuelen 1000  (Ethernet)
         RX packets 0  bytes 0 (0.0 B)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 0  bytes 0 (0.0 B)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0";;RedHatEnterpriseLinux7/RHEL7-97271
2981;;;;;;;;;5;"5. restart libvirtd, and check the interface still exists
 on guest check interface still exists, # ifconfig
 on host check interface sill exists
 # virsh dumpxml vhost1 | grep /interface -B9";​​;;RedHatEnterpriseLinux7/RHEL7-97271
2981;;;;;;;;;6;"6. detach
 # cat net.xml
 <interface type='vhostuser'>
 <mac address='52:54:00:fe:a5:81'/>
        <source type='unix' path='/var/run/openvswitch/vhost-user2' mode='client'/>
        <model type='virtio'/>
        <driver name='vhost' queues='4'/>
      </interface>
 # virsh detach-device vhost1 net.xml
 Device detached successfully
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97271
2981;;;;;;;;;7;7. # virsh dumpxml vhost1 | grep /interface -B9;no output;;RedHatEnterpriseLinux7/RHEL7-97271
2981;;;;;;;;;8;"8. detach by detach-interface
 # virsh attach-device vhost1 net.xml
 Device attached successfully
 # virsh detach-interface vhost1 vhostuser
 Interface detached successfully
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97271
2982;RHEL7-97272;[attach-device][macvtap] hotplug macvtap interface with multiple elements - bug 1313264;"direct interface | attach-device
support | target, model, driver(with multiqueue), rom, boot order  Qos, link state, , mac type, backend vhost
do not support | vlan,  mtu, coalesce, nwfilter, backend tap";Yalan Zhang (yalzhang);Critical;Positive;Automated;;1;"1. Prepare a running guest  with <boot order='1'/> in disk device.
 And delete     <boot dev='hd'/> in <os> ...</os>part.
 
 <disk>
 ...
 <boot order='1'/>
 ...
 </disk>
 
 # virsh list 
  Id    Name                           State
 ----------------------------------------------------
  24    rhel7                          running
 
 prepare an interface xml
 # cat macvtap.xml 
 <interface type='direct'>   
     <mac address='52:54:00:98:c4:a3'/>  
      <source dev='enp0s25' mode='bridge'/> 
       <bandwidth>   
       <inbound average='100' peak='200' burst='100'/>     
     <outbound average='200' peak='300' burst='200'/>  
      </bandwidth>  
  <driver name='vhost' txmode='iothread' ioeventfd='on' event_idx='off' queues='5' rx_queue_size='256' tx_queue_size='256'>
       <host csum='off' gso='off' tso4='off' tso6='off' ecn='off' ufo='off' mrg_rxbuf='off'/>
       <guest csum='off' tso4='off' tso6='off' ecn='off' ufo='off'/>
   </driver>
  <rom bar='on'/>
 <link state='up'/>
 <boot order='2'/>
 <backend vhost='/dev/vhost-net'/>
      <target dev='test'/>   
     <model type='virtio'/>    
    <alias name='net0'/>      
  <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>    
  </interface>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97272
2982;;;;;;;;;2;"2. 
 # virsh attach-device rhel7 macvtap.xml
​​";"output: 
 Device attached successfully";;RedHatEnterpriseLinux7/RHEL7-97272
2982;;;;;;;;;3;"3. # virsh dumpxml rhel7  | grep /interface -B19
 
 check mac, source dev, mode, bandwidth, target, driver, backend, link state, boot order, rom bar";"   <interface type='direct'>
       <mac address='52:54:00:98:c4:a3'/>
       <source dev='enp0s25' mode='bridge'/>
       <bandwidth>
         <inbound average='100' peak='200' burst='100'/>
         <outbound average='200' peak='300' burst='200'/>
       </bandwidth>
       <target dev='test'/>
       <model type='virtio'/>
       <driver name='vhost' txmode='iothread' ioeventfd='on' event_idx='off' queues='5' rx_queue_size='256'>
         <host csum='off' gso='off' tso4='off' tso6='off' ecn='off' ufo='off' mrg_rxbuf='off'/>
         <guest csum='off' tso4='off' tso6='off' ecn='off' ufo='off'/>
       </driver>
       <backend vhost='/dev/vhost-net'/>
       <link state='up'/>
       <boot order='2'/>
       <alias name='net0'/>
       <rom bar='on'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-97272
2982;;;;;;;;;4;"4.  log in guest, check the network function
 guest # ping www.baidu.com";ping succeed;;RedHatEnterpriseLinux7/RHEL7-97272
2982;;;;;;;;;5;"5. check on host for the mac, target name, mode, source dev, 
 # ip -d l show test
​​";"191: test@enp0s25: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc htb state UNKNOWN mode DEFAULT qlen 500
     link/ether 52:54:00:98:c4:a3 brd ff:ff:ff:ff:ff:ff promiscuity 0 
     macvtap  mode bridge addrgenmode eui64 ";;RedHatEnterpriseLinux7/RHEL7-97272
2982;;;;;;;;;6;"6. # systemctl restart libvirtd
 # virsh dumpxml rhel7  | grep /interface -B19";the interface exists;;RedHatEnterpriseLinux7/RHEL7-97272
2982;;;;;;;;;7;"7.  # virsh save rhel7 rhel7.save2
 
 Domain rhel7 saved to rhel7.save2
 # virsh restore rhel7.save2
 Domain restored from rhel7.save2
 
 # virsh dumpxml rhel7  | grep /interface -B19";after save and restore, the interface exists;;RedHatEnterpriseLinux7/RHEL7-97272
2982;;;;;;;;;8;"8. # virsh detach-device rhel7 macvtap.xml
 # virsh dumpxml rhel7 | grep 52:54:00:98:c4:a3";no output, the interface detached;;RedHatEnterpriseLinux7/RHEL7-97272
2983;RHEL7-97283;KN-TC: vlan/multi_arch/change_vlan_mac;KN-TC: vlan/multi_arch/change_vlan_mac;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-97283
2984;RHEL7-97284;KN-TC: vlan/multi_arch/reorder_hdr FUNC=nic;KN-TC: vlan/multi_arch/reorder_hdr FUNC=nic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-97284
2985;RHEL7-97285;KN-TC: vlan/multi_arch/vlan_tcpdump;KN-TC: vlan/multi_arch/vlan_tcpdump;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-97285
2986;RHEL7-97331;[detach-interface] detach a bridge type interface with right mac and pci address but wrong interface type;detach device do not check the interface type;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. Start guest, and then attach interface to the guest.
 
 # virsh start 7
 Domain 7 started
 
 # virsh attach-interface 7 bridge virbr0 --mac 52:54:00:5a:a0:8d
​​"; Interface attached successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-97331
2986;;;;;;;;;2;2. # virsh dumpxml 7 | grep interface -A10;"<interface type='network'>
 <mac address='00:16:3e:3e:a9:11'/>
 <source network='default' bridge='virbr0'/>
 <target dev='vnet0'/>
 <model type='rtl8139'/>
 <alias name='net0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>
 </interface>
 <interface type='bridge'>
 <mac address='52:54:00:5a:a0:8d'/>
 <source bridge='virbr0'/>
 <target dev='vnet1'/>
 <model type='rtl8139'/>
 <alias name='net1'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 ...";;RedHatEnterpriseLinux7/RHEL7-97331
2986;;;;;;;;;3;"3. Detach the device.
 
 # cat br.xml
 <interface type='network'>
 <mac address='52:54:00:5a:a0:8d'/>
 <source network='default'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 
 # virsh detach-device 7 br.xml
​​";Device detached successfully;;RedHatEnterpriseLinux7/RHEL7-97331
2987;RHEL7-97336;[attach-device][user] attach-device with user type interface - bug 1420668;user type interface support hotplug;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"user type interface (bug 1420668）
 with unprivileged user";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97336
2987;;;;;;;;;2;"1. $ virsh start rhel7.2 
 Domain rhel7.2 started

 $ cat /tmp/user.xml
 <interface type='user'>
     <mac address=""00:11:22:33:44:55""/>
     <ip family='ipv4' address='172.17.2.0' prefix='24'/>
     <ip family='ipv6' address='2001:db8:ac10:fd01::' prefix='64'/>
   </interface>

 $ virsh attach-device rhel7.2 /tmp/user.xml
";"Device attached successfully
​​";;RedHatEnterpriseLinux7/RHEL7-97336
2987;;;;;;;;;3;2. $ virsh dumpxml rhel7.2 | grep /interface -B5;"    <interface type='user'>
       <mac address='00:11:22:33:44:55'/>
       <ip address='172.17.2.0' family='ipv4' prefix='24'/>
       <ip address='2001:db8:ac10:fd01::' family='ipv6' prefix='64'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-97336
2987;;;;;;;;;4;"3. log in the guest, and check the network function, it works well.
 For example:
 # ifconfig 
 ens3: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 172.17.2.15  netmask 255.255.255.0  broadcast 172.17.2.255
         inet6 2001:db8:ac10:fd01:211:22ff:fe33:4455  prefixlen 64  scopeid 0x0<global>
         inet6 fe80::211:22ff:fe33:4455  prefixlen 64  scopeid 0x20<link>
         ether 00:11:22:33:44:55  txqueuelen 1000  (Ethernet)
 ....
 # ssh 10.66.x.x (your host or any hostname can be resolved, like ibm-x3850x5-04.lab.eng.pek2.redhat.com)
 ssh can connect succeed, do not use ping as user type interface do not support ICMP";​​;;RedHatEnterpriseLinux7/RHEL7-97336
2987;;;;;;;;;5;"4. $ cat /tmp/user.xml
 <interface type='user'>
     <mac address=""00:11:22:33:44:55""/>
     <ip family='ipv4' address='172.17.2.0' prefix='24'/>
     <ip family='ipv6' address='2001:db8:ac10:fd01::' prefix='64'/>
   </interface>

 $ virsh detach-device rhel7.2 /tmp/user.xml
";Device detached successfully;;RedHatEnterpriseLinux7/RHEL7-97336
2987;;;;;;;;;6;"5. detach  by detach-interface
 $ virsh attach-device rhel7.2 user.xml 
 Device attached successfully
 
 $ virsh detach-interface rhel7.2 user 
​​";Interface detached successfully;;RedHatEnterpriseLinux7/RHEL7-97336
2987;;;;;;;;;7;"6. use root
 # virsh attach-device rhel /tmp/user.xml
 Device attached successfully
 
 
 
 
​​";"
 ...
   <interface type='user'>
       <mac address='00:11:22:33:44:55'/>
       <ip address='172.17.2.0' family='ipv4' prefix='24'/>
       <ip address='2001:db8:ac10:fd01::' family='ipv6' prefix='64'/>
       <model type='rtl8139'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
​​";;RedHatEnterpriseLinux7/RHEL7-97336
2987;;;;;;;;;8;7. log in the guest, and check the network function, it works well.;​​;;RedHatEnterpriseLinux7/RHEL7-97336
2987;;;;;;;;;9;"8. # virsh detach-interface rhel user 
​​";Interface detached successfully;;RedHatEnterpriseLinux7/RHEL7-97336
2987;;;;;;;;;10;10. # virsh dumpxml rhel | grep /interface;the interface is gone;;RedHatEnterpriseLinux7/RHEL7-97336
2988;RHEL7-97340;"[spice/vnc]Validate guest xml with graphic listening on an ipv6 address ending with ""::""";"Verify guest xml can validate pass when set graphic listening on an ipv6 address which ends with ""::"" in guest xml";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Prepare a guest xml file with such setting:
 1) set graphic listen to an ipv6 address which ends with ""::""";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97340
2988;;;;;;;;;2;"Validate the xml file: 
 # virt-xml-validate rhel7.xml
​​";" validation passes, output:
 
 rhel7.xml validates
​​";;RedHatEnterpriseLinux7/RHEL7-97340
2989;RHEL7-97343;[svirt][DAC]negative test for dac seclabel with dynamic type;negative test for dac seclabel with dynamic type;Yan Fu (yafu);High;Negative;Automated;;1;" 1.invalid group/user name in the qemu.conf:
 #cat /etc/libvirt/qemu.conf
 user = ""test-non""
 or 
 group  = ""test-non""
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97343
2989;;;;;;;;;2;"2.Restart libvirtd service:
 #systemctl restart libvirtd
​​";"2.libvirtd service failed to start:
 # systemctl status libvirtd
 ● libvirtd.service - Virtualization daemon
    Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; enabled; vendor preset: enabled)
    Active: inactive (dead) since Tue 2017-08-08 12:08:37 CST; 1min 23s ago
  ....
 Aug 08 12:08:37 dhcp-66-71-72.eng.nay.redhat.com libvirtd[16300]: 16316: error : virGetGroupID:1110 : invalid argument: Failed to parse group 'test-non'
 Aug 08 12:08:37 dhcp-66-71-72.eng.nay.redhat.com libvirtd[16300]: 16316: error : virStateInitialize:775 : Initialization of QEMU state driver failed: invalid argument: Failed to parse group 'test-non'
 Aug 08 12:08:37 dhcp-66-71-72.eng.nay.redhat.com libvirtd[16300]: 16316: error : daemonRunStateInit:884 : Driver state initialization failed
​​";;RedHatEnterpriseLinux7/RHEL7-97343
2989;;;;;;;;;3;"3.set relable='no' and save xml:
 #virsh edit rhel7.3-min:
 ...
  <seclabel type='dynamic' model='dac' relabel='no'/>
 ...
​​";"3.xml failed to validate:
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Invalid attribute relabel for element seclabel
 Extra element seclabel in interleave
 Element domain failed to validate content
 
 Failed. Try again? [y,n,i,f,?]: 
 
​​";;RedHatEnterpriseLinux7/RHEL7-97343
2990;RHEL7-97344;[svirt][DAC]negative test for dac seclabel with static type;"negative test for dac seclabel with static type
";Yan Fu (yafu);Medium;Negative;Automated;;1;"1.  Edit seclabel with non-exist group name :
 # virsh edit libvirt_test_api
 ...
 <seclabel type='static' model='dac' relabel='yes'>
 <label>qemu:test-non</label>
 </seclabel>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97344
2990;;;;;;;;;2;"2.Start the guest:
 #virsh start libvirt_test_api
​​";"2.
 # virsh start libvirt_test_api
 error: Failed to start domain libvirt_test_api
 error: internal error invalid argument: Failed to parse group 'test-non'";;RedHatEnterpriseLinux7/RHEL7-97344
2990;;;;;;;;;3;"3.Edit seclabell with non-exist user name:
 #virsh edit libvirt_test_api
 ...
 <seclabel type='static' model='dac' relabel='yes'>
 <label>test-non:qemu</label>
 </seclabel>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97344
2990;;;;;;;;;4;"4.Start the guest:
 #virsh start libvirt_test_api
​​";"4.
 # virsh start libvirt_test_api
 error: Failed to start domain libvirt_test_api
 error: internal error invalid argument: Failed to parse user 'test-non'";;RedHatEnterpriseLinux7/RHEL7-97344
2990;;;;;;;;;5;"5.Edit seclabel with invalid format:
 ...
 <seclabel type='static' model='dac' relabel='yes'>
 <label>sdfklsdjlfjklsdjkl</label>
 </seclabel>
 ...";​​;;RedHatEnterpriseLinux7/RHEL7-97344
2990;;;;;;;;;6;"6.Start guest:
 #virsh start libvirt-test-api
​​";"6.
 # virsh start rhel7
 error: Failed to start domain rhel7
 error: invalid argument: Failed to parse uid and gid from 'sdfklsdjlfjklsdjkl'
 # virsh dumpxml rhel7
 ...";;RedHatEnterpriseLinux7/RHEL7-97344
2991;RHEL7-97411;/etc/sysconfig/network-scripts/route-* files should be configurable via netcf  --bug 822989;"/etc/sysconfig/network-scripts/route-* files should be configurable via netcf 
Need update the test case when the bug fixed
";Jingjing Shao (jishao);Low;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-97411
2992;RHEL7-97438;[spice][tls][ipv6] Start and connect to a guest with spice autoport and spice tls enabled;Verify that guest can start and be connected successfully when spice listens on ipv6 port+tlsPort. Only localhost is covered for now.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) with spice secure channels
 3) set spice listen to an ipv6 address";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97438
2992;;;;;;;;;2;"Start guest:
 #virsh start rhel6
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97438
2992;;;;;;;;;3;"Connect to guest on local host by virt-viewer, input password:
 
 # virt-viewer rhel6 --spice-host-subject=""C=IL,L=Raanana,O=Red Hat,CN=redhat"" --spice-ca-file='/etc/pki/libvirt-spice/ca-cert.pem'
 
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97438
2992;;;;;;;;;4;"Connect to guest on local host by remote-viewer, input password:
 
 # remote-viewer spice://[::1]/?port=5900\&tls-port=5901 --spice-host-
 subject='C=IL,L=Raanana,O=Red Hat,CN=redhat' --spice-ca-file='/etc/pki
 /libvirt-spice/ca-cert.pem'
 
 Note:
 5900 --- the port in xml graphic section
 5901 --- the tlsPort in xml graphic section
 redhat --- the passwd you set in the xml graphic section
 ""C=IL,L=Raanana,O=Red Hat,CN=redhat"" --- is got from command 
 #openssl x509 -noout -text -in server-cert.pem | grep Subject: | cut -f 10- -d "" """;you can access the spice interface successfully with ipv6 address;;RedHatEnterpriseLinux7/RHEL7-97438
2993;RHEL7-97464;[vnc&spice] Start guest with spice/vnc listening to unix socket and with specified port;"Verify no port is allocated/reserved when spice/vnc listening to unix domain socket and port number is specified for graphic.
 Bug 1364843 - libvirt should not reserve the port setting in the xml when vnc_auto_unix_socket takes effect
";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Edit or define two guests with such setting:
 1) set graphic listen type to unix
 2) set a port for graphic";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97464
2993;;;;;;;;;2;"Start the first guest
​​";"Guest can start successfully
​​";;RedHatEnterpriseLinux7/RHEL7-97464
2993;;;;;;;;;3;"Start the second guest
​​";Guest can start successfully;;RedHatEnterpriseLinux7/RHEL7-97464
2994;RHEL7-97467;[vnc&spice]  Start guest with graphic password set in guest xml;Verify that guest can start and be connected successfully when graphic password is set in guest xml{comment:50};Fangge Jin (fjin);Critical;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with graphic
 2) set graphic password in guest xml";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97467
2994;;;;;;;;;2;Start the guest;"
​​";;RedHatEnterpriseLinux7/RHEL7-97467
2994;;;;;;;;;3;"use virt-viewer or virt-manager to open guest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97467
2994;;;;;;;;;4;"Input password configured in guest xml
​​";Log in guest successfully;;RedHatEnterpriseLinux7/RHEL7-97467
2995;RHEL7-97471;[virtual network][virtual-nic-device] netperf Test between guest and local host - not test for macvtap;Netperf stress between guest and host, Set guest, host as server/client, execute netperf test one by one, analyze the result. Multiple netperf in parallel (both STREAM and RR). Netperf with -b -w parameters to trigger packet bursts;Yu Wang (wyu);High;Positive;Automated;;1;" steps:
 1. start guest w/ virtio-net-pci:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0"; 1. guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-97471
2995;;;;;;;;;2;"2.only for windows: check whether netkvm.sys verifier enabled in guest:
    #verifier /querysettings (run as administrator)
    If No ,enabled netkvm.sys verifier:
    #verifier.exe /standard /driver netkvm.sys  (run as administrator)
    then reboot the guest and recheck 
    #verifier /querysettings ";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-97471
2995;;;;;;;;;3;"3.Stop firewall in guest and the local host.
 For linux:
 # iptables -F ; ip6tables -F
 For windows: Control Panel --> search ""firewall""  --> turn windows firewall on or off --> turn the firewall off
";3. iptables could be turned off without errors;;RedHatEnterpriseLinux7/RHEL7-97471
2995;;;;;;;;;4;"4. run netserver on the local host:
 # netserver start";"4.host netserver start correctly:
 Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC
";;RedHatEnterpriseLinux7/RHEL7-97471
2995;;;;;;;;;5;"5. running netperf on guest
 for linux: netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024
 for windows: for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netperf_server_ip -c -C -t %j -f m -l 180 -- -m %i done done";"5.netperf test can run normally:
 TCP STREAM TEST from 0.0.0.0 () port 0 AF_INET to 10.66.10.110 () port 0 AF_INET : histogram : interval : demo
 Recv   Send    Send                           
 Socket Socket  Message  Elapsed               
 Size   Size    Size     Time     Throughput   
 bytes  bytes   bytes    secs.    10^6bits/sec   
  
  87380  65536  65536    10.22      98.30";;RedHatEnterpriseLinux7/RHEL7-97471
2995;;;;;;;;;6;"6. running netserver on guest
 # netsever.exe";6.netserver could start successfully;;RedHatEnterpriseLinux7/RHEL7-97471
2995;;;;;;;;;7;"7. do netperf from local host
 #netperf -H guest_ip -c -C -t tcp_stream -f m -l 180s -- -m 1024";"7. netperf works well,host get following msg:
 MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.66.8.116 () port 0 AF_INET : demo
 Recv   Send    Send                          Utilization       Service Demand
 Socket Socket  Message  Elapsed              Send     Recv     Send    Recv
 Size   Size    Size     Time     Throughput  local    remote   local   remote
 bytes  bytes   bytes    secs.    10^6bits/s  % S      % N      us/KB   us/KB
 
  65536  16384   1024    180.01      916.12   41.73    20.96    7.464   3.749";;RedHatEnterpriseLinux7/RHEL7-97471
2996;RHEL7-97479;[attach-device][ethernet] hotplug ethernet type interface by attach-device;the ethernet interface used with this script just link a bridge type interface, so the performance, supported elements or attributes should be the same with bridge type interface;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"1. prepare the script,  replace the ip 10.66.4.237 with the actual ip of your host which you will used to connected to the bridge.
 And gateway / broadcast address with the host actual gateway / broadcast address; 
 eno1 to the actual physical interface name.
 
 # cat /etc/qemu-ifup
 #!/bin/sh 
 ETH0IPADDR=10.66.4.237
 GATEWAY=10.66.7.254 
 BROADCAST=10.66.7.255 
 
 /sbin/ifdown eno1 
 /sbin/ifconfig eno1 0.0.0.0 promisc up 
 /sbin/ifconfig $1 0.0.0.0 promisc up 
 
 /usr/sbin/brctl addbr br0 
 /usr/sbin/brctl addif br0 eno1 
 /usr/sbin/brctl addif br0 $1 
 
 /usr/sbin/brctl stp br0 off 
 
 /sbin/ifconfig br0 $ETH0IPADDR netmask 255.255.252.0 broadcast $BROADCAST 
 /sbin/route add default gw $GATEWAY
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97479
2996;;;;;;;;;2;2. ensure there is no bridge called br0 on your host, and the physical interface eno1 is free (not connected to any bridge and macvtap, etc. );​​;;RedHatEnterpriseLinux7/RHEL7-97479
2996;;;;;;;;;3;"3. prepare a guest with boot order in disk setting
 # virsh dumpxml rhel7.4 
 ...
   <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.4.0'>hvm</type>
   </os>
 ...
  <devices>
     <emulator>/usr/libexec/qemu-kvm</emulator>
     <disk type='file' device='disk'>
       <driver name='qemu' type='qcow2'/>
       <source file='/var/lib/libvirt/images/RHEL-7.4-x86_64-latest.qcow2'/>
       <target dev='vda' bus='virtio'/>
       <boot order='1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
     </disk>
 ....";"no <boot dev=...> in <os/> element
 and <boot order='1'/> in disk";;RedHatEnterpriseLinux7/RHEL7-97479
2996;;;;;;;;;4;"4.  prepare the ethernet interface xml
 # cat  ethernet_boot.xml 
 <interface type='ethernet'>
 <mac address='52:54:00:b5:f5:18'/>
 <script path='/etc/qemu-ifup'/> 
 <target dev='test'/>
     <model type='virtio'/>
 <driver name='vhost' txmode='iothread' ioeventfd='on' event_idx='off' queues='5' rx_queue_size='256'>
 <host csum='off' gso='off' tso4='off' tso6='off' ecn='off' ufo='off' mrg_rxbuf='off'/> 
 <guest csum='off' tso4='off' tso6='off' ecn='off' ufo='off'/> 
 </driver>
 <link state='up'/>
   <bandwidth>
         <inbound average='1000' peak='5000' burst='5120'/>
         <outbound average='128' peak='256' burst='256'/>
       </bandwidth>
  <rom bar='on'/>
 <boot order='2'/>
 <mtu size='3000'/>
 <filterref filter='allow-arp'/>
  <backend tap='/dev/net/tun' vhost='/dev/vhost-net'/>
 </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97479
2996;;;;;;;;;5;"5. start the guest, then do hotplug
 # virsh start rhel7.4
 Domain rhel7.4 started
 
 # virsh attach-device rhel7.4 ethernet_boot.xml 
​​";Device attached successfully;;RedHatEnterpriseLinux7/RHEL7-97479
2996;;;;;;;;;6;6. # virsh dumpxml rhel7.4 | grep /interface -B21;"check the element with the xml in step 4 
 # virsh dumpxml rhel7.4 | grep /interface -B21
     <interface type='ethernet'>
       <mac address='52:54:00:b5:f5:18'/>
       <bandwidth>
         <inbound average='1000' peak='5000' burst='5120'/>
         <outbound average='128' peak='256' burst='256'/>
       </bandwidth>
       <script path='/etc/qemu-ifup'/>
       <target dev='test'/>
       <model type='virtio'/>
       <driver name='vhost' txmode='iothread' ioeventfd='on' event_idx='off' queues='5' rx_queue_size='256'>
         <host csum='off' gso='off' tso4='off' tso6='off' ecn='off' ufo='off' mrg_rxbuf='off'/>
         <guest csum='off' tso4='off' tso6='off' ecn='off' ufo='off'/>
       </driver>
       <backend tap='/dev/net/tun' vhost='/dev/vhost-net'/>
       <filterref filter='allow-arp'/>
       <link state='up'/>
       <mtu size='3000'/>
       <boot order='2'/>
       <alias name='net0'/>
       <rom bar='on'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";;RedHatEnterpriseLinux7/RHEL7-97479
2996;;;;;;;;;7;"7.
  # brctl show
 bridge name bridge id STP enabled interfaces
 br0 8000.4437e66a7f29 no eno1
 test
 
 # ip l show test
 184: test: <BROADCAST,MULTICAST,PROMISC,UP,LOWER_UP> mtu 3000 qdisc pfifo_fast master br0 state UNKNOWN mode DEFAULT qlen 1000
     link/ether fe:54:00:b5:f5:18 brd ff:ff:ff:ff:ff:ff
​​";"check
 1. bridge br0 created and connected to eno1;
 2. target test connected to br0
 3. mtu of the tap device is 3000
​​";;RedHatEnterpriseLinux7/RHEL7-97479
2996;;;;;;;;;8;"8. # virsh detach-interface rhel7.4 ethernet 
 Interface detached successfully
 # virsh dumpxml rhel7.4  | grep /interface -B20";no such ethernet interface;;RedHatEnterpriseLinux7/RHEL7-97479
2996;;;;;;;;;9;"scenario 2: 
 same xml with step 4, cold plug
 # virsh attach-device rhel7.4 ethernet_boot.xml --config
 Device attached successfully
 
 # virsh destroy rhel7.4
 Domain rhel7.4 destroyed
 
 # virsh start rhel7.4
 Domain rhel7.4 started
​​";the guest can start;;RedHatEnterpriseLinux7/RHEL7-97479
2996;;;;;;;;;10;# ps aux | grep rhel7.4;"-netdev tap,fds=26:28:29:30:31,id=hostnet0,vhost=on,vhostfds=32:33:34:35:36
 -device virtio-net-pci,tx=bh,ioeventfd=on,event_idx=off,csum=off,gso=off,host_tso4=off,
 host_tso6=off,host_ecn=off,host_ufo=off,mrg_rxbuf=off,guest_csum=off,guest_tso4=off,
 guest_tso6=off,guest_ecn=off,guest_ufo=off,mq=on,vectors=12,rx_queue_size=256,
 host_mtu=3000,netdev=hostnet0,id=net0,mac=52:54:00:b5:f5:18,
 bus=pci.0,addr=0x3,rombar=1,bootindex=2";;RedHatEnterpriseLinux7/RHEL7-97479
2997;RHEL7-97482;[vnc&spice]Update graphic passwd lively before it expires;Verify that guest graphic can be opened with new password if update graphic passwd lively before it expires;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Get system UTC date
 # date -u
 Wed Aug  9 07:01:00 UTC 2017
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-97482
2997;;;;;;;;;2;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set graphic password to a non-empty string
 3) set the passwdValidTo to a time a few minutes (like 3m, which allows you have enough time to finish the left steps) later than current UTC time.
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97482
2997;;;;;;;;;3;Start guest;​​;;RedHatEnterpriseLinux7/RHEL7-97482
2997;;;;;;;;;4;"Update the graphic password to a new value before the password expired.
 
 #cat update.xml
   <graphics type='vnc' port='-1' autoport='yes' keymap='en-us' passwd='cccdddd'
 passwdValidTo='2017-08-09T07:03:00' listen='127.0.0.1'/>
 
 #virsh update-device rhel6 update.xml
​​";"Update the password successfully
 
​​";;RedHatEnterpriseLinux7/RHEL7-97482
2997;;;;;;;;;5;"Connect the guest by client:
 # vncviewer $hostIP:$vncport
 
 or
 # remote-viewer vnc://$hostIP:$vncport
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-97482
2997;;;;;;;;;6;"Input old passwd
​​";Can't auth the connection with the old password;;RedHatEnterpriseLinux7/RHEL7-97482
2997;;;;;;;;;7;"Input new passwd
​​";can connect successfully with the new password;;RedHatEnterpriseLinux7/RHEL7-97482
2998;RHEL7-97483;[vnc&spice] Renew the graphic passwd  valid time lively after it expires;Verify that guest can be connected again after renewing the password valid time after it expires.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Check system UTC date
 # date -u
 Wed Aug  9 07:01:00 UTC 2017
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-97483
2998;;;;;;;;;2;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set graphic password to a non-empty string
 3) set the passwdValidTo to a time a little later than current UTC time
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97483
2998;;;;;;;;;3;"Start guest:
 # virsh start rhel6
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97483
2998;;;;;;;;;4;"Wait for the passwd to expire
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97483
2998;;;;;;;;;5;"Update the passwdValidTo to a new value later than current UTC time:
 
 # cat update.xml
    <graphics type='vnc' port='-1' autoport='yes' keymap='en-us' passwd='aaabbb' passwdValidTo='2017-08-09T07:02:00'
 listen='$hostip'/>
 
 # virsh update-device rhel6 update.xml
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97483
2998;;;;;;;;;6;"Connect the guest graphic by vnc client:
 # vncviewer $hostIP:$vncportor 
 
 Or # virt-viewer $guestname
 
 Or # remote-viewer vnc://$hostIP";​​;;RedHatEnterpriseLinux7/RHEL7-97483
2998;;;;;;;;;7;"Input graphic passwd
​​";Guest graphic can be opened successfully;;RedHatEnterpriseLinux7/RHEL7-97483
2999;RHEL7-97484;[vnc&spice] Update graphic passwd lively after it expires;Verify that guest graphic can't be opened with new password if update graphic passwd lively after it expires but don't update the valid time.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Get system UTC date
 # date -u
 Wed Aug  9 07:01:00 UTC 2017
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-97484
2999;;;;;;;;;2;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set graphic password to a non-empty string
 3) set the passwdValidTo to a time a little later than current UTC time
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97484
2999;;;;;;;;;3;"Start guest:
 # virsh start rhel6
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97484
2999;;;;;;;;;4;"Wait for the passwd to expire
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97484
2999;;;;;;;;;5;"Update graphic passwd, but don't update the password valid time:
 
 # cat update.xml
 <graphics type='vnc' port='-1' autoport='yes' keymap='en-us' passwd='cccddd' passwdValidTo='2017-08-09T07:02:00'
 listen='$hostip'/>
 
 # virsh update-device rhel6 update.xml
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97484
2999;;;;;;;;;6;"Access the guest graphic:
 # vncviewer $hostIP:$vncport
 
 or # virt-viewer rhel6
 
 or # remote-viewer vnc://$hostIP:$vncport";​​;;RedHatEnterpriseLinux7/RHEL7-97484
2999;;;;;;;;;7;"Input new passwd
​​";Guest graphic can't be opened with the new password;;RedHatEnterpriseLinux7/RHEL7-97484
3000;RHEL7-97493;[virtual network][virtual-nic-device] Multiple Nics Stress;Multi nics stress inside guest.;Yu Wang (wyu);Medium;Positive;Automated;405377;1;" 1.Boot a guest(guest1) w/ 4 virtual nics and
 For tun/tap backend (bridge-utils based & openvswitch based)
 -netdev tap,id=hostnet1,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet1,id=virtio-net-pci1,mac=4e:63:28:bc:b1:01 \ 
 -netdev tap,id=hostnet2,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet2,id=virtio-net-pci2,mac=4e:63:28:bc:b1:02 \ 
 -netdev tap,id=hostnet3,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet3,id=virtio-net-pci3,mac=4e:63:28:bc:b1:03 \ 
 -netdev tap,id=hostnet4,script=/etc/qemu-ifup,vhost=on -device virtio-net-pci,netdev=hostnet4,id=virtio-net-pci4,mac=4e:63:28:bc:b1:04 \ "; 1. boot with out error;Test Case;RedHatEnterpriseLinux7/RHEL7-97493
3000;;;;;;;;;2;2.Boot another 4 client guests.;2. boot successfully;;RedHatEnterpriseLinux7/RHEL7-97493
3000;;;;;;;;;3;"3.Stop firewall in guest and the external host.
 For linux:
 # iptables -F ; ip6tables -F
 For windows: Control Panel --> search ""firewall""  --> turn windows firewall on or off --> turn the firewall off";3. no error;;RedHatEnterpriseLinux7/RHEL7-97493
3000;;;;;;;;;4;"4. in the first vm config static route:
 For linux:
 # ip route add $ip_client1/32 dev eth1
 # ip route add $ip_client2/32 dev eth2
 # ip route add $ip_client3/32 dev eth3
 # ip route add $ip_client4/32 dev eth4
 For window:
 set static ip for each device in vm1 to vm5
 vm1_network1 and vm2 are the same network segment
 vm1_network2 and vm3 are the same network segment
 vm1_network3 and vm4 are the same network segment
 vm1_network4 and vm5 are the same network segment
 command as below, you can also change it via GUI
 # netsh interface ip set address name=""Ethernet"" static 192.168.1.42 255.255.255.0 192.168.1.1";4. no error;;RedHatEnterpriseLinux7/RHEL7-97493
3000;;;;;;;;;5;"5.Launch netperf server on the 4 guests.
 # netserver";​​;;RedHatEnterpriseLinux7/RHEL7-97493
3000;;;;;;;;;6;"6.Launch 4 clients in parallal in guest1
 For linux:
 $protocol = [ TCP_STREAM ,TCP_MAERTS ,TCP_SENDFILE ,UDP_STREAM ,TCP_RR ,TCP_CRR , UDP_RR ]
 vm1_network 1) # netperf-2.4.5/src/netperf -t $protocol -H $ip_client1 -l 60 -- -m 1500
 vm1_network 2) # netperf-2.4.5/src/netperf -t $protocol -H $ip_client2 -l 60 -- -m 1500
 vm1_network 3) # netperf-2.4.5/src/netperf -t $protocol -H $ip_client3 -l 60 -- -m 1500
 vm1_network 4) # netperf-2.4.5/src/netperf -t $protocol -H $ip_client4 -l 60 -- -m 1500
 For windows:
 vm1_network 1) # for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netperf_server_vm2_ip -c -C -t %j -f m -l 180 -- -m %i done done
 vm1_network 2) # for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netperf_server_vm3_ip -c -C -t %j -f m -l 180 -- -m %i done done
 vm1_network 3) # for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netperf_server_vm4_ip -c -C -t %j -f m -l 180 -- -m %i done done
 vm1_network 4) # for %i in (32 64 128 256 512 1024 2048 4096 8192 16384 32768) do for %j in (TCP_STREAM,UDP_STREAM) do netperf.exe -H netperf_server_vm5_ip -c -C -t %j -f m -l 180 -- -m %i done done";6. all netperf can be started and finished successfully.;;RedHatEnterpriseLinux7/RHEL7-97493
3001;RHEL7-97520;[vnc&spice][save] Save, save-image-edit and restore a guest with graphic password;"Verify graphic password will not disappear after save-image-edit
 Bug 1183890 - save-image-edit will make spice or vnc passwd disappear when we edit something";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set graphic password to a non-empty string
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97520
3001;;;;;;;;;2;Start guest;​​;;RedHatEnterpriseLinux7/RHEL7-97520
3001;;;;;;;;;3;"Save the guest
 # virsh save virt-tests-vm1 virt-tests-vm1.save";"Output:
 Domain virt-tests-vm1 saved to virt-tests-vm1.save";;RedHatEnterpriseLinux7/RHEL7-97520
3001;;;;;;;;;4;"Edit save file(modify some place, such as on_crash events) and save.
 
 #virsh save-image-edit virt-tests-vm1.save
 --
 <on_crash>coredump-destroy</on_crash>
 --";"2.
​​";;RedHatEnterpriseLinux7/RHEL7-97520
3001;;;;;;;;;5;"Check the guest's xml saved in the image with --security-info:
 
 # virsh save-image-dumpxml virt-tests-vm1.save --security-info
​​";graphic password still exists;;RedHatEnterpriseLinux7/RHEL7-97520
3001;;;;;;;;;6;"Restore the guest from the save file
 # virsh restore virt-tests-vm1.save 
​​";"Output:
 Domain restored from virt-tests-vm1.save";;RedHatEnterpriseLinux7/RHEL7-97520
3001;;;;;;;;;7;"Check the guest's xml with --security-info:
 # virsh dumpxml virt-tests-vm1 --security-info
​​";Graphic password still exists;;RedHatEnterpriseLinux7/RHEL7-97520
3002;RHEL7-97618;[console] virsh crashes at remoteStreamEventTimer when libvirtd restarts - BZ#716781;Virsh console can reconnect to vm when libvirtd restarts{comment:12};Yan Fu (yafu);Medium;Positive;Automated;484897;1;"1. Open a terminal, execute the cmd and leave it open.
 virsh # start test --console";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-97618
3002;;;;;;;;;2;"2. on another terminal, kill -TERM libvirtd and restart.
 # kill  -15 `pidof libvirtd `
 # systemctl restart libvirtd";​​;;RedHatEnterpriseLinux7/RHEL7-97618
3002;;;;;;;;;3;3. Type any key in virsh.;"virsh # list --all
 Id Name State
 ----------------------------------------------------
 308 test running
 
 (should not get this
 error: Reconnected to the hypervisor)";;RedHatEnterpriseLinux7/RHEL7-97618
3002;;;;;;;;;4;"4. Retry connecting to the console, then quit
 virsh # console test";can connect the console;;RedHatEnterpriseLinux7/RHEL7-97618
3002;;;;;;;;;5;"5. Retry connecting to the console.
 virsh # console test";can connect the console;;RedHatEnterpriseLinux7/RHEL7-97618
3003;RHEL7-97622;[guest agent][domfsfreeze] Freeze the domain's mounted filesystems again when they are already freezed;Verify freeze will fail when the domain's mounted filesystems are already freezed;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Freeze guest filssystems:
 # virsh domfsfreeze test3
​​";"Output:
 Froze 2 filesystem(s)";Test Case;RedHatEnterpriseLinux7/RHEL7-97622
3003;;;;;;;;;2;"Freeze again:
 # virsh domfsfreeze test3 
​​";"Get the following error in the terminal:
 
 error: Unable to freeze filesystems
 error: internal error: unable to execute QEMU agent command 'guest-fsfreeze-
 freeze-list': The command guest-fsfreeze-freeze-list has not been found";;RedHatEnterpriseLinux7/RHEL7-97622
3004;RHEL7-97624;[guest agent][domfsinfo] Get information of domain's mounted filesystems after hotplug / hotunplug;"Verify that ""virsh domfsinfo"" can get domain's mounted filesystems correctly after hotplug / hotunplug a disk to/from guest.";Fangge Jin (fjin);Low;Positive;Automated;;1;Start guest;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97624
3004;;;;;;;;;2;"Hot-plug a disk to the guest:
 1) Create a disk on host:
 #qemu-img create /var/lib/libvirt/images/test.img 100M
 
 2) #virsh attach-disk rhel7.0
 /var/lib/libvirt/images/test.img vdb
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97624
3004;;;;;;;;;3;"In guest, format it to ext3 filesystem and mount it
 guest#mkfs.ext3 /dev/vdb
 guest# mount /dev/vdb /mnt
 
 Note:
 Check the real name of the disk(by lsblk) in guest before make filesystem on it (because although we set it to vdb, it may be different inside guest)
​​";​​;;RedHatEnterpriseLinux7/RHEL7-97624
3004;;;;;;;;;4;"Check the filesystem of the guest by domfsinfo:
 #virsh domfsinfo rhel7.0
 
​​";"Could see new filesystem detected:
 
 Output:
 Mountpoint                  Name     Type     Target
 ----------------------------------------------------------------
 /                                   dm-1     xfs        vda
 /boot                            vda1     xfs         vda
 /mnt                            vdb      ext3      vdb
";;RedHatEnterpriseLinux7/RHEL7-97624
3004;;;;;;;;;5;"Detach the disk,then re-check the filesystem inside the guest
 #virsh detach-disk rhel7.0 vdb
 #virsh domfsinfo rhel7.0";"The filesystem about vdb will disappear.

 Output:
 Mountpoint                 Name   Type    Target
 ---------------------------------------------------------------
 /                                 dm-1     xfs      vda
 /boot                           vda1     xfs      vda
​​";;RedHatEnterpriseLinux7/RHEL7-97624
3005;RHEL7-97695;[set-user-password] Set guest user password with plain text via guest agent;Verify linux guest user password can be set via guest agent, covers both root user and non-root user.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Start guest
​​"; ;Test Case;RedHatEnterpriseLinux7/RHEL7-97695
3005;;;;;;;;;2;"Change the guest's password for user (root/non-root) 
 # virsh set-user-password virt-tests-vm1 --user (root/non-root)  --password 1A2b3c4#
​​";"Output:
 Password set successfully for root/non-root in virt-tests-vm1";;RedHatEnterpriseLinux7/RHEL7-97695
3005;;;;;;;;;3;Login guest with the old password;fail to login guest with the old password;;RedHatEnterpriseLinux7/RHEL7-97695
3005;;;;;;;;;4;Login guest with the new password ;could login guest successfully with the new password;;RedHatEnterpriseLinux7/RHEL7-97695
3006;RHEL7-97736;IDM-SSSD-TC: krb_provider: kcm: Verify krb ticket by setting KCM in krb5 conf and KEYRING in kcm default ccache file;Verify krb ticket by setting KCM in krb5 conf and KEYRING in kcm default ccache file;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"Edit /etc/krb5.conf.d/kcm_default_ccache file and set KEYRING as follows:
   [libdefaults]
     default_ccache_name = KEYRING:persistent:%{uid}";Valid KEYRING krb ticket, clearly kcm_default_ccache file take precedence over /etc/krb5.conf file;Test Case;RedHatEnterpriseLinux7/RHEL7-97736
3006;;;;;;;;;2;Edit /etc/krb5.conf file and set default_ccache_name = KCM:;​​;;RedHatEnterpriseLinux7/RHEL7-97736
3006;;;;;;;;;3;Restart sssd service.;​​;;RedHatEnterpriseLinux7/RHEL7-97736
3006;;;;;;;;;4;Run user login and verify cached krb ticket.;​​;;RedHatEnterpriseLinux7/RHEL7-97736
3007;RHEL7-97775;IDM-SSSD-TC: krb_provider: kcm: Verify krb ticket by setting KCM in krb5 conf file and KEYRING in kcm default ccache file;Verify krb ticket by setting KCM in krb5 conf file and KEYRING in kcm default ccache file;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"Edit /etc/krb5.conf.d/kcm_default_ccache file and set KEYRING as follows:
   [libdefaults]
     default_ccache_name = KEYRING:persistent:%{uid}";"Valid KEYRING krb ticket, clearly kcm_default_ccache file take precedence over /etc/krb5.conf file.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-97775
3007;;;;;;;;;2;Edit /etc/krb5.conf file and set default_ccache_name = KCM:;​​;;RedHatEnterpriseLinux7/RHEL7-97775
3007;;;;;;;;;3;Restart sssd service.;​​;;RedHatEnterpriseLinux7/RHEL7-97775
3007;;;;;;;;;4;Run user login and verify cached krb ticket.;​​;;RedHatEnterpriseLinux7/RHEL7-97775
3008;RHEL7-97777;IDM-SSSD-TC: krb_provider: kcm: KCM ticket NAME field should match UID of user;KCM ticket NAME field should match UID of user;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"Edit /etc/krb5.conf.d/kcm_default_ccache file and set default_ccache_name to KCM. 
   [libdefaults]
     default_ccache_name = KCM:";The NAME field matches ldap user ID 21201;Test Case;RedHatEnterpriseLinux7/RHEL7-97777
3008;;;;;;;;;2;Restart sssd service.;​​;;RedHatEnterpriseLinux7/RHEL7-97777
3008;;;;;;;;;3;"Run user login and verify the $NAME field of cached ticket. It should match user ID. 
    KCM ticket format should be KCM:$NAME:$CACHE_ID.";​​;;RedHatEnterpriseLinux7/RHEL7-97777
3009;RHEL7-97778;IDM-SSSD-TC: krb_provider: kcm: As root verify KCM tkt cache NAME field of other user;As root verify KCM tkt cache NAME field of other user;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"As root user, run kinit for a test user.
​​"; The NAME field matches ROOT user 0.;Test Case;RedHatEnterpriseLinux7/RHEL7-97778
3009;;;;;;;;;2;List the KCM ticket cache and verify the $NAME field of cached ticket. It should match ROOT user ID.;​​;;RedHatEnterpriseLinux7/RHEL7-97778
3010;RHEL7-97779;IDM-SSSD-TC: krb_provider: kcm: As unprivileged user verify KCM tkt cache NAME field of other user;As unprivileged user verify KCM tkt cache NAME field of other user;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;As unprivileged user, run kinit for a test user.; The NAME field matches Unprivileged user’s ID;Test Case;RedHatEnterpriseLinux7/RHEL7-97779
3010;;;;;;;;;2;List the KCM ticket cache and verify the $NAME field of cached ticket. It should match Unprivileged user’s ID.;​​;;RedHatEnterpriseLinux7/RHEL7-97779
3011;RHEL7-97780;IDM-SSSD-TC: krb_provider: kcm: CACHE ID field disappears after running kdestroy;CACHE ID field disappears after running kdestroy;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"Run user login and list the $CACHE_ID field of cached KCM ticket. 
    KCM ticket format should be KCM:$NAME:$CACHE_ID.
     # ssh -l testuser localhost
​​";The CACHE_ID field (value 50401) disappears from the tkt;Test Case;RedHatEnterpriseLinux7/RHEL7-97780
3011;;;;;;;;;2;Run kdestroy and fetch a new ticket.;​​;;RedHatEnterpriseLinux7/RHEL7-97780
3011;;;;;;;;;3;Verify the  $CACHE_ID field of cached KCM ticket;​​;;RedHatEnterpriseLinux7/RHEL7-97780
3012;RHEL7-97781;IDM-SSSD-TC: krb_provider: kcm: Generate new CACHE ID by switching default ccache name between KCM and KEYRING;Generate new CACHE ID by switching default ccache name between KCM and KEYRING;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;Run user login and destroy the cached ticket. This should remove CACHE_ID field from cached KCM ticket.; A new CACHE_ID field (value 28388) gets generated in the KCM cached ticket;Test Case;RedHatEnterpriseLinux7/RHEL7-97781
3012;;;;;;;;;2;Change the /etc/krb5.conf.d/kcm_default_ccache file and set default_ccache_name to KEYRING.;​​;;RedHatEnterpriseLinux7/RHEL7-97781
3012;;;;;;;;;3;Restart SSSD service and run user login.;​​;;RedHatEnterpriseLinux7/RHEL7-97781
3012;;;;;;;;;4;Fetch KEYRING krb ticket.;​​;;RedHatEnterpriseLinux7/RHEL7-97781
3012;;;;;;;;;5;Change the /etc/krb5.conf.d/kcm_default_ccache file again and set default_ccache_name to KCM.;​​;;RedHatEnterpriseLinux7/RHEL7-97781
3012;;;;;;;;;6;Restart SSSD service and run user login.;​​;;RedHatEnterpriseLinux7/RHEL7-97781
3012;;;;;;;;;7;Verify the  $CACHE_ID field of cached KCM ticket;​​;;RedHatEnterpriseLinux7/RHEL7-97781
3013;RHEL7-97782;IDM-SSSD-TC: krb_provider: kcm:  As root access other user’s KCM credential cache ; As root access other user’s KCM credential cache;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"Run user login and fetch the krb ticket. 
     [testuser@vm-idm-020 ~]$ klist
 Ticket cache: KCM:21201
 Default principal: testuser@EXAMPLE.COM";"Root user unable to access other user credential cache.
 Bug logged: https://bugzilla.redhat.com/show_bug.cgi?id=1441764
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-97782
3013;;;;;;;;;2;"Open a new terminal, as root user try to access test user's credential cache.
 [root@vm-idm-020 ~]# KRB5CCNAME=KCM:21201 klist
 klist: No credentials cache found";​​;;RedHatEnterpriseLinux7/RHEL7-97782
3014;RHEL7-97783;IDM-SSSD-TC: krb_provider: kcm: As unprivileged user try to access other users KCM credential cache;As unprivileged user try to access other users KCM credential cache;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"Run user login and fetch the krb ticket. 
     [testuser@vm-idm-020 ~]$ klist
 Ticket cache: KCM:21201
 Default principal: testuser@EXAMPLE.COM";Unprivileged user unable to access other user credential cache;Test Case;RedHatEnterpriseLinux7/RHEL7-97783
3014;;;;;;;;;2;"Open a new terminal, as unprivileged non-root user try to access test user's credential cache.
 [testuser1@vm-idm-020 ~]$ KRB5CCNAME=KCM:21201 klist
 klist: No credentials cache found";​​;;RedHatEnterpriseLinux7/RHEL7-97783
3015;RHEL7-97784;IDM-SSSD-TC: krb_provider: kcm: Verify variable KRB5CCNAME;Verify variable KRB5CCNAME;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"Run user login and fetch the krb ticket. 
     # ssh -l testuser localhost
 [testuser@vm-idm-020 ~]$ klist
 Ticket cache: KCM:21201:48692
 Default principal: testuser@EXAMPLE.COM";The KRB5CCNAME variable shouldn’t be in the form of KCM:$NAME:$CACHE_ID. Based on its design “KCM:” represents the entire collection.;Test Case;RedHatEnterpriseLinux7/RHEL7-97784
3015;;;;;;;;;2;"Verify the contents of variable KRB5CCNAME
 [testuser@vm-idm-020 ~]$ echo $KRB5CCNAME
 KCM:";​​;;RedHatEnterpriseLinux7/RHEL7-97784
3016;RHEL7-97785;IDM-SSSD-TC: krb_provider: kcm: Test SSSD behaviour by adding kcm to services directive;Test SSSD behaviour by adding kcm to services directive;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"Edit sssd.conf file and add kcm string to services directive in sssd section.
    For example, services = nss, pam, kcm";"SSSD service fail to start.
 Logged message in sssd.log: “Invalid service kcm”
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-97785
3016;;;;;;;;;2;Restart SSSD service.;​​;;RedHatEnterpriseLinux7/RHEL7-97785
3017;RHEL7-97786;IDM-SSSD-TC: krb_provider: kcm: Set kcm socket path to non default location;Set kcm socket path to non default location;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;Stop SSSD service and sssd-kcm.socket service.;"The KCM service still listens on the default file /var/run/.heim_org.h5l.kcm-socket 
 Updating socket_path option in the kcm section of SSSD.CONF file has no impact on the socket file KCM service listens on.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-97786
3017;;;;;;;;;2;"Add kcm section in sssd.conf file and set socket_path to a custom location.
    See the contents of sssd.conf -
 [sssd]
 config_file_version = 2
 domains = LDAP-KRB5
 debug_level = 0xFFF0
 services = nss, pam
 [kcm]
 debug_level = 0xFFF0
 socket_path = /var/run/kcm/kcm.sock
 [domain/LDAP-KRB5]
 id_provider = ldap
 ldap_uri = ldap://hubcap.lab.eng.pnq.redhat.com
 debug_level = 0xFFF0
 enumerate = false
 auth_provider = krb5
 krb5_server = hubcap.lab.eng.pnq.redhat.com
 krb5_realm = EXAMPLE.COM
 ldap_search_base = dc=example,dc=com";​​;;RedHatEnterpriseLinux7/RHEL7-97786
3017;;;;;;;;;3;Create Directory /var/run/kcm;​​;;RedHatEnterpriseLinux7/RHEL7-97786
3017;;;;;;;;;4;Start SSSD service.;​​;;RedHatEnterpriseLinux7/RHEL7-97786
3017;;;;;;;;;5;Start sssd-kcm.socket service and verify the status.;​​;;RedHatEnterpriseLinux7/RHEL7-97786
3018;RHEL7-97787;IDM-SSSD-TC: krb_provider: kcm: Tune systemd sssd kcm socket to change default path;Tune systemd sssd kcm socket to change default path;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;Stop SSSD service and sssd-kcm.socket service.;"The KCM service listens on the modified path /var/run/kcm/kcm.sock 
 The socket file /var/run/kcm/kcm.sock is created.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-97787
3018;;;;;;;;;2;"Copy /usr/lib/systemd/system/sssd-kcm.socket file to /etc/systemd/system/ directory and update ListenStream as follows:
 [Socket]
 ListenStream=/var/run/kcm/kcm.sock";​​;;RedHatEnterpriseLinux7/RHEL7-97787
3018;;;;;;;;;3;Run 'systemctl daemon-reload' to reload units.;​​;;RedHatEnterpriseLinux7/RHEL7-97787
3018;;;;;;;;;4;Start sssd and sssd-kcm.socket service.;​​;;RedHatEnterpriseLinux7/RHEL7-97787
3018;;;;;;;;;5;"Verify the status.
     # systemctl start sssd-kcm.socket
     # systemctl status sssd-kcm.socket
 ● sssd-kcm.socket - SSSD Secrets Service responder socket
       Loaded: loaded (/etc/systemd/system/sssd-kcm.socket; …. disabled)
      Active: active (listening) since Mon 2017-04-17 14:21:39 IST; 10s ago
     Docs: man:sssd-kcm(8)";​​;;RedHatEnterpriseLinux7/RHEL7-97787
3019;RHEL7-97788;IDM-SSSD-TC: krb_provider: kcm: Test user auth by setting socket path to non default and systemd kcm socket to default path;Test user auth by setting socket path to non default and systemd kcm socket to default path;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"Set socket_path to a non_default path in sssd.conf
     [kcm]
 debug_level = 0xFFF0
 socket_path = /var/run/kcm/kcm.sock
​​"; User successfully authenticates and lists credential caches.;Test Case;RedHatEnterpriseLinux7/RHEL7-97788
3019;;;;;;;;;2;"Set systemd sssd-kcm socket to default path in /etc/systemd/system/sssd-kcm.socket
 [Socket]
 ListenStream=/var/run/.heim_org.h5l.kcm-socket";​​;;RedHatEnterpriseLinux7/RHEL7-97788
3019;;;;;;;;;3;Run 'systemctl daemon-reload' to reload units.;​​;;RedHatEnterpriseLinux7/RHEL7-97788
3019;;;;;;;;;4;"Start sssd and sssd-kcm.socket service. 
     # systemctl status sssd-kcm.socket
 ● sssd-kcm.socket - SSSD Secrets Service responder socket
      Loaded: loaded (/etc/systemd/system/sssd-kcm.socket; enabled; ….et: disabled)
       Active: active (listening) since Mon 2017-04-17 17:29:26 IST; 8min ago
     Docs: man:sssd-kcm(8)
 Listen: /var/run/.heim_org.h5l.kcm-socket (Stream)";​​;;RedHatEnterpriseLinux7/RHEL7-97788
3019;;;;;;;;;5;"Run user auth.
     # ssh -l testuser localhost";​​;;RedHatEnterpriseLinux7/RHEL7-97788
3020;RHEL7-97789;IDM-SSSD-TC: krb_provider: kcm: Verify user auth when socket path and systemd sssd kcm socket path are same and non default.;Verify user auth when socket path and systemd sssd kcm socket path are same and non default.;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"Set socket_path to a non_default path in sssd.conf
     [kcm]
 debug_level = 0xFFF0
 socket_path = /var/run/kcm/kcm.sock
​​";"User authentication fails. 
 KRB5_CHILD.log shows the following:
 [get_and_save_tgt] (0x0100): TGT validation is disabled.
 [sss_get_ccache_name_for_principal] (0x4000): Location: [KCM:]
 [sss_get_ccache_name_for_principal] (0x2000): krb5_cc_cache_match failed: [111][Connection refused]";Test Case;RedHatEnterpriseLinux7/RHEL7-97789
3020;;;;;;;;;2;"Set systemd sssd-kcm socket to non default path in /etc/systemd/system/sssd-kcm.socket
 [Socket]
 ListenStream=/var/run/kcm/kcm.sock";​​;;RedHatEnterpriseLinux7/RHEL7-97789
3020;;;;;;;;;3;Run 'systemctl daemon-reload' to reload units.;​​;;RedHatEnterpriseLinux7/RHEL7-97789
3020;;;;;;;;;4;"Restart sssd and sssd-kcm.socket service. 
     #  systemctl status sssd-kcm.socket
 ● sssd-kcm.socket - SSSD Secrets Service responder socket
      Loaded: loaded (/etc/systemd/system/sssd-kcm.soc...bled; vendor preset: disabled)
     Active: active (listening) since Mon 2017-04-17 19:08:22 IST; 7s ago
 Docs: man:sssd-kcm(8)
     Listen: /var/run/kcm/kcm.sock (Stream)";​​;;RedHatEnterpriseLinux7/RHEL7-97789
3020;;;;;;;;;5;Run user auth.;​​;;RedHatEnterpriseLinux7/RHEL7-97789
3021;RHEL7-97790;IDM-SSSD-TC: krb_provider: kcm: Disable socket path, set kcm socket to non default and systemd kcm socket path to default.;Disable socket path, set kcm socket to non default and systemd kcm socket path to default.;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;Disable socket_path in sssd.conf file.;"User authentication fails. 
 KRB5_CHILD.log shows the following:
     [sss_get_ccache_name_for_principal] (0x4000): Location: [KCM:]
 [sss_get_ccache_name_for_principal] (0x2000): krb5_cc_cache_match failed: [-1750600181][No KCM server found][create_ccache] (0x0020): 970: [-1750600181][No KCM server found]
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-97790
3021;;;;;;;;;2;"Set kcm_socket to a non_default path in krb5.conf
     [libdefaults]
     dns_lookup_realm = false
 ticket_lifetime = 24h
 renew_lifetime = 7d
 forwardable = true
 rdns = false
 default_ccache_name = KCM:
     default_realm = EXAMPLE.COM    
 kcm_socket = /var/run/kcm/kcm.sock";​​;;RedHatEnterpriseLinux7/RHEL7-97790
3021;;;;;;;;;3;"Set systemd sssd-kcm socket to default path.
    File /etc/systemd/system/sssd-kcm.socket:
 [Socket]
 ListenStream=/var/run/.heim_org.h5l.kcm-socket";​​;;RedHatEnterpriseLinux7/RHEL7-97790
3021;;;;;;;;;4;Stop sssd-kcm.socket service and Run 'systemctl daemon-reload' to reload units.;​​;;RedHatEnterpriseLinux7/RHEL7-97790
3021;;;;;;;;;5;Start sssd and sssd-kcm.socket service.;​​;;RedHatEnterpriseLinux7/RHEL7-97790
3021;;;;;;;;;6;"Run user auth.
     # ssh -l testuser localhost";​​;;RedHatEnterpriseLinux7/RHEL7-97790
3022;RHEL7-97791;IDM-SSSD-TC: krb_provider: kcm: Disable socket path test auth by setting same non default value to kcm socket and systemd kcm socket path;Disable socket path test auth by setting same non default value to kcm socket and systemd kcm socket path;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;Disable socket_path in sssd.conf file.; User authentication succeeds.;Test Case;RedHatEnterpriseLinux7/RHEL7-97791
3022;;;;;;;;;2;"Set kcm_socket to a non_default path in krb5.conf
     [libdefaults]
     dns_lookup_realm = false
 ticket_lifetime = 24h
 renew_lifetime = 7d
 forwardable = true
 rdns = false
 default_ccache_name = KCM:
     default_realm = EXAMPLE.COM    
 kcm_socket = /var/run/kcm/kcm.sock";​​;;RedHatEnterpriseLinux7/RHEL7-97791
3022;;;;;;;;;3;"Set systemd sssd-kcm socket to non-default path.
    File /etc/systemd/system/sssd-kcm.socket:
 [Socket]
 ListenStream=/var/run/kcm/kcm.sock";​​;;RedHatEnterpriseLinux7/RHEL7-97791
3022;;;;;;;;;4;Stop sssd-kcm.socket service and Run 'systemctl daemon-reload' to reload units.;​​;;RedHatEnterpriseLinux7/RHEL7-97791
3022;;;;;;;;;5;"Start sssd and sssd-kcm.socket service. 
     # ls /var/run//kcm/
     kcm.sock";​​;;RedHatEnterpriseLinux7/RHEL7-97791
3022;;;;;;;;;6;"Run user auth.
     # ssh -l testuser localhost";​​;;RedHatEnterpriseLinux7/RHEL7-97791
3023;RHEL7-97792;IDM-SSSD-TC: krb_provider: kcm: Set same non default value to socket path kcm socket and systemd kcm socket path;Set same non default value to socket path kcm socket and systemd kcm socket path;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"Set socket_path to /var/run/kcm/kcm.sock in sssd.conf file.
​​";User authentication succeeds.;Test Case;RedHatEnterpriseLinux7/RHEL7-97792
3023;;;;;;;;;2;"Set kcm_socket to a non_default path in krb5.conf
     [libdefaults]
     default_ccache_name = KCM:
     default_realm = EXAMPLE.COM   
 kcm_socket = /var/run/kcm/kcm.sock";​​;;RedHatEnterpriseLinux7/RHEL7-97792
3023;;;;;;;;;3;"Set systemd sssd-kcm socket to non-default path.
    File /etc/systemd/system/sssd-kcm.socket:
 [Socket]
 ListenStream=/var/run/kcm/kcm.sock";​​;;RedHatEnterpriseLinux7/RHEL7-97792
3023;;;;;;;;;4;Stop sssd-kcm.socket service and Run 'systemctl daemon-reload' to reload units.;​​;;RedHatEnterpriseLinux7/RHEL7-97792
3023;;;;;;;;;5;"Start sssd and sssd-kcm.socket service.
     # ls /var/run//kcm/
 kcm.sock
     #  systemctl status sssd-kcm.socket";​​;;RedHatEnterpriseLinux7/RHEL7-97792
3023;;;;;;;;;6;Run user auth.;​​;;RedHatEnterpriseLinux7/RHEL7-97792
3024;RHEL7-97793;virtio input: Config Qemu to use IOMMU for Virtio devices - bug 1464891;"As a Technology Preview, this update enables virtio devices to use virtual Input/Output Memory Management Unit (vIOMMU).
 This guarantees the security of Direct Memory Access (DMA) by allowing the device to DMA only to permitted addresses.
 However, note that only guest virtual machines using Red Hat Enterprise Linux 7.4 or later are able to use this feature. (BZ#1283251, BZ#1464891){comment:47}";Jingjing Shao (jishao);High;Positive;Not Automated;;1;"1. Prepare  a q35 guest  which OS is rhel7.4 or higher version
 add the xml as below in the guest
 
   <features>
    <ioapic driver='qemu'/>
  </features>
  ...
   <iommu model='intel'>
      <driver intremap='on'  iotlb='on'/>
   </iommu>
 ...
"; ;Test Case;RedHatEnterpriseLinux7/RHEL7-97793
3024;;;;;;;;;2;"2. Add the  iommu='on' ats='on' to  input device, this needs the guest with GUI 
 
  <input type='mouse' bus='virtio'>
       <driver iommu='on' ats='on'/>
       <alias name='input0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0e' function='0x0'/>
     </input>
 
    <input type='keyboard' bus='virtio'>
       <driver iommu='on' ats='on'/>
       <alias name='input0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x10' function='0x0'/>
     </input>
 
  <input type='tablet' bus='virtio'>
       <driver iommu='on' ats='on'/>
       <alias name='input0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x11' function='0x0'/>
     </input>
 
  <input type='passthrough' bus='virtio'>
       <driver iommu='on' ats='on'/>
       <source evdev='/dev/input/event0'/>
       <alias name='input0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x12' function='0x0'/>
     </input>
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-97793
3024;;;;;;;;;3;"3. Start the guest , check the qemu command line and  check the basic function
 # ps -ef | grep qemu | grep iommu";"Output:
 -device virtio-mouse-pci,id=input0,bus=pcie.0,addr=0xe,iommu_platform=on,ats=on 
 -device virtio-keyboard-pci,id=input0,bus=pcie.0,addr=0x10,iommu_platform=on,ats=on
 -device virtio-tablet-pci,id=input0,bus=pcie.0,addr=0x11,iommu_platform=on,ats=on
 -device virtio-input-host-pci,id=input0,evdev=/dev/input/event0,bus=pcie.0,addr=0x12,iommu_platform=on,ats=on";;RedHatEnterpriseLinux7/RHEL7-97793
3024;;;;;;;;;4;"4. login in the guest
 Use the mouse and keyboard
";"Output:
 mouse and keyboard can be used as expected.";;RedHatEnterpriseLinux7/RHEL7-97793
3025;RHEL7-97891;[vIOMMU] Support  migration with intel-iommu device - bug 1459906;"Support  migration with intel-iommu device, save 
 Bug 1433994 - libvirt attempts migration of a domain with intel-iommu device";Jingjing Shao (jishao);High;Positive;Not Automated;;1;" 1. Prepare a guest with xml as below
  <features>
     <ioapic driver='qemu'/>
   </features>
 ...
   <iommu model='intel'>
     <driver intremap='on' caching_mode='on'/>
   </iommu>
 
 and enable iommu in the guest";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-97891
3025;;;;;;;;;2;"2. Do the migration
 # virsh migrate --live q35-js  qemu+ssh://xx.xx.xx.xx/system
    # 
 Check the guest on the other host
​​";"Output:
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  20    q35-js                         running";;RedHatEnterpriseLinux7/RHEL7-97891
3025;;;;;;;;;3;"4. Migrate back to the first host
 # virsh migrate --live q35-js  qemu+ssh://10.73.8.21/system
 
 
 
​​";"Output:
 # virsh migrate --live q35-js  qemu+ssh://10.73.8.21/system
 root@10.73.8.21's password: 
 error: operation failed: job: unexpectedly failed";;RedHatEnterpriseLinux7/RHEL7-97891
3026;RHEL7-98314;WALA-TC: [func] waagent -show-configuration;"WALA-TC: [func] waagent -show-configuration    

";Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"1. Prepare a VM on Azure. 
 Run ""waagent -show-configuration""";Can show all the parameters in /etc/waagent.conf;Test Case;RedHatEnterpriseLinux7/RHEL7-98314
3027;RHEL7-98370;AZURE-TC:[Network]UDP dataloss;AZURE-TC:[Network]UDP dataloss;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;1. Prepare 2 VMs in Azure. The 2 VMs in the same subnet. VM(A) as client, VM(B) as server.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-98370
3027;;;;;;;;;2;"2. Send UDP traffic and check dataloss. The dataloss should not larger than 1%
 Server:
 # iperf3 -s 4 -p 8001 -i 60 -D
 
 Client:
 # iperf3 -u -c 172.16.0.8 -p 8001 -4 -b 0 -l 8k -P 64 -t 60 --get-server-output -i 60";"Sender:
 Interval           Transfer     Bandwidth       Jitter    Lost/Total Datagrams
 0.00-60.00  sec  15.9 GBytes  2.28 Gbits/sec  1.761 ms  4538/2086167 (0.22%)
 
 Server:
 Interval           Transfer     Bandwidth       Jitter    Lost/Total Datagrams
 0.00-60.00  sec  15.9 GBytes  2.27 Gbits/sec  1.834 ms  4538/2086108 (0.22%)";;RedHatEnterpriseLinux7/RHEL7-98370
3027;;;;;;;;;3;config ;​​;;RedHatEnterpriseLinux7/RHEL7-98370
3028;RHEL7-98383;WALA-TC: [WALA conf] Customize the extension log directory;WALA-TC: [WALA conf] Customize the extension log directory    ;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"1. Prepare a VM on Azure. 
 Modify ""/etc/waagent.conf"",
 Extension.LogDir=/var/log/azurenew
 Then restart waagent service";"The new extension log directory is created.
 # ls -d /var/log/azurenew
 /var/log/azurenew";Test Case;RedHatEnterpriseLinux7/RHEL7-98383
3028;;;;;;;;;2;"2. Reset remote access
 Check if the extension logs are written in the new directory";"# ls /var/log/azurenew
 Microsoft.OSTCExtensions.VMAccessForLinux";;RedHatEnterpriseLinux7/RHEL7-98383
3028;;;;;;;;;3;config ;​​;;RedHatEnterpriseLinux7/RHEL7-98383
3029;RHEL7-98389;WALA-TC: [General] Clean up run-exthandlers pid;WALA-TC: [General] Clean up run-exthandlers pid;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"Prepare a VM on Azure
 1.Ensure the waagent -run-exthandlers process is running. Check pid file";"# ls /run/*_waagent.pid
 /run/0_waagent.pid";Test Case;RedHatEnterpriseLinux7/RHEL7-98389
3029;;;;;;;;;2;2. Restart waagent service. The old pid file should be removed and a new *_waagent.pid file is generated.;"# ls /run/*_waagent.pid
 /run/1_waagent.pid
 The 0_waagent.pid is removed.";;RedHatEnterpriseLinux7/RHEL7-98389
3029;;;;;;;;;3;config ;​​;;RedHatEnterpriseLinux7/RHEL7-98389
3030;RHEL7-98403;[PPC only] Hotplug/unplug network device with managed='yes'; Hotplug/unplug network device with managed='yes';Jingjing Shao (jishao);Critical;Positive;Not Automated;;1;"  *************************************************************************************************************
 Below is for PPC only.
 *************************************************************************************************************
 Make a guest running without any <hostdev> (PF) in XML";Guest is started;Test Case;RedHatEnterpriseLinux7/RHEL7-98403
3030;;;;;;;;;2;List PCI devices on the host, and find the PCI devices you want to hotplug to the guest.;# lspci;;RedHatEnterpriseLinux7/RHEL7-98403
3030;;;;;;;;;3;"Get the dumpxml of the device
 # virsh nodedev-dumpxml <pci device>";"# virsh nodedev-dumpxml pci_0002_01_00_3
 <device>
   <name>pci_0002_01_00_3</name>
   <path>/sys/devices/pci0002:00/0002:00:00.0/0002:01:00.3</path>
   <parent>pci_0002_00_00_0</parent>
   <driver>
     <name>be2net</name>
   </driver>
   <capability type='pci'>
     <domain>2</domain>
     <bus>1</bus>
     <slot>0</slot>
     <function>0</function>
     <product id='0xe220'>OneConnect NIC (Lancer)</product>
     <vendor id='0x10df'>Emulex Corporation</vendor>
     <iommuGroup number='1'>
       <address domain='0x0002' bus='0x01' slot='0x00' function='0x0'/>
       <address domain='0x0002' bus='0x01' slot='0x00' function='0x1'/>
       <address domain='0x0002' bus='0x01' slot='0x00' function='0x2'/>
       <address domain='0x0002' bus='0x01' slot='0x00' function='0x3'/>
       <address domain='0x0002' bus='0x01' slot='0x00' function='0x4'/>
       <address domain='0x0002' bus='0x01' slot='0x00' function='0x5'/>
     </iommuGroup>
     <numa node='0'/>
     <pci-express>
       <link validity='cap' port='0' speed='8' width='8'/>
       <link validity='sta' speed='8' width='8'/>
     </pci-express>
   </capability>
 </device>";;RedHatEnterpriseLinux7/RHEL7-98403
3030;;;;;;;;;4;"Make sure the device you want to hotplug to the guest is bound on the host already and other devices in same iommuGroup should be unbound from the host already.
 For example, pci_0002_01_00_3 which is to hotplug to the guest should use be2net driver, not vfio-pci
 # readlink /sys/bus/pci/devices/0002\:01\:00.3/driver
 ../../../../bus/pci/drivers/be2net
 Others should use vfio-pci.
 # readlink /sys/bus/pci/devices/0002\:01\:00.0/driver
 ../../../../bus/pci/drivers/vfio-pci
 If not ready, use nodedev-detach  and nodedev-reset to make it unbound from the host or use nodedev-reattach and nodedev-reset to bind to the host again.
 # virsh nodedev-detach pci_0002_01_00_4
 # virsh nodedev-reset pci_0002_01_00_4";"# readlink /sys/bus/pci/devices/0002\:01\:00.3/driver
 ../../../../bus/pci/drivers/be2net
 # readlink /sys/bus/pci/devices/0002\:01\:00.0/driver
 ../../../../bus/pci/drivers/vfio-pci
 # readlink /sys/bus/pci/devices/0002\:01\:00.1/driver
 ../../../../bus/pci/drivers/vfio-pci
 # readlink /sys/bus/pci/devices/0002\:01\:00.2/driver
 ../../../../bus/pci/drivers/vfio-pci
 # readlink /sys/bus/pci/devices/0002\:01\:00.4/driver
 ../../../../bus/pci/drivers/vfio-pci
 # readlink /sys/bus/pci/devices/0002\:01\:00.5/driver
 ../../../../bus/pci/drivers/vfio-pci";;RedHatEnterpriseLinux7/RHEL7-98403
3030;;;;;;;;;5;"Prepare a hotplug.xml below.
 <hostdev mode='subsystem' type='pci' managed='yes'>
   <source>
     <address domain='0x0002' bus='0x01' slot='0x00' function='0x3'/>
   </source>
 </hostdev>
 
 Attach the device to the guest successfully
 # virsh attach-device dzhengvm2 hotplug.xml";"# virsh attach-device dzhengvm2 hotplug.xml
 Device attached successfully";;RedHatEnterpriseLinux7/RHEL7-98403
3030;;;;;;;;;6;Check within the guest and lspci can see it with correct address comparing with the dumpxml <hostdev> entry.;"[root@localhost ~]# lspci
 00:00.0 USB controller: Apple Inc. KeyLargo/Intrepid USB
 00:01.0 Communication controller: Red Hat, Inc Virtio console
 00:03.0 Unclassified device [00ff]: Red Hat, Inc Virtio memory balloon
 00:04.0 VGA compatible controller: Device 1234:1111 (rev 02)
 00:05.0 Unclassified device [00ff]: Red Hat, Inc Virtio RNG
 ***00:06.0 Ethernet controller: Emulex Corporation OneConnect NIC (Lancer) (rev 10)";;RedHatEnterpriseLinux7/RHEL7-98403
3030;;;;;;;;;7;"Check the device dumpxml and driver vfio-pci is used correctly.
 # virsh nodedev-dumpxml pci_0002_01_00_3 |grep driver -a1
   
​​";"# virsh nodedev-dumpxml pci_0002_01_00_3 |grep driver -a1
 <parent>pci_0002_00_00_3</parent>
   <driver>
     <name>vfio-pci</name>
   </driver>
   <capability type='pci'>";;RedHatEnterpriseLinux7/RHEL7-98403
3030;;;;;;;;;8;"Check dumpxml and the <hostdev> entry should be inserted correctly. 
 Check the <address> is same with the value within the guest.
 
​​";"# virsh dumpxml dzhengvm2|grep hostdev -A5
      <hostdev mode='subsystem' type='pci' managed='yes'>
       <driver name='vfio'/>
       <source>
         <address domain='0x0002' bus='0x01' slot='0x00' function='0x3'/>
       </source>
       <alias name='hostdev0'/>
      *** <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>***
     </hostdev>";;RedHatEnterpriseLinux7/RHEL7-98403
3030;;;;;;;;;9;"Destroy the guest.
 Check the device is bound to host again automatically.
 # virsh destroy dzhengvm2
 
 # readlink /sys/bus/pci/devices/0002\:01\:00.3/driver";"# virsh destroy dzhengvm2
 Domain dzhengvm2 destroyed
 
 # readlink /sys/bus/pci/devices/0002\:01\:00.3/driver
 ../../../../bus/pci/drivers/be2net";;RedHatEnterpriseLinux7/RHEL7-98403
3030;;;;;;;;;10;"Edit XML with <hostdev>
     <hostdev mode='subsystem' type='pci' managed='yes'>
       <source>
         <address domain='0x0002' bus='0x01' slot='0x00' function='0x3'/>
       </source>
     </hostdev>
 Start the guest again. Check qemu process has similar options as below.
 -device vfio-pci,host=0002:01:00.3,id=hostdev0,bus=pci.0,addr=0x6";"Guest is started ok.
 
 # ps -ef|grep qemu-kevm
 ... -device vfio-pci,host=0002:01:00.3,id=hostdev0,bus=pci.0,addr=0x6";;RedHatEnterpriseLinux7/RHEL7-98403
3030;;;;;;;;;11;Hotplug another device in same iommuGroup, repeat step 6-10.;Everything is ok.;;RedHatEnterpriseLinux7/RHEL7-98403
3031;RHEL7-98409;[SRIOV] Check state for running domain with PCI passthrough device during libvirtd restart - Bug 1046337;"model type for hostdev is meaningless, but allowed.
Bug 1046337 - running domain with PCI passthrough device is ""lost"" during libvirtd restart
 this case test different model type: virtio, rtl8139, e1000, e1000e, it should have no impact for hostdev type.";Jingjing Shao (jishao);Medium;Positive;Automated;;1;no model type specified:;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-98409
3031;;;;;;;;;2;"1. Prepare a running guest
 # virsh start V
 Domain V started
​​";​​;;RedHatEnterpriseLinux7/RHEL7-98409
3031;;;;;;;;;3;"2. Attach this vf to guest
 # cat hostdev.xml
 <interface type='hostdev' managed='yes'>
 <mac address='52:54:00:c6:b7:84'/>
 <source>
 <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x1'/>
 </source>
 </interface>
 
 # virsh attach-device V  hostdev.xml
​​";"Output:
 Device attached successfully
 
​​";;RedHatEnterpriseLinux7/RHEL7-98409
3031;;;;;;;;;4;"3. Check device xml
 # virsh dumpxml V";"Output:
 ...
 <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:c6:b7:84'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x0'/>
       </source>
       <alias name='hostdev0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>
 .....
 (no model type added)";;RedHatEnterpriseLinux7/RHEL7-98409
3031;;;;;;;;;5;"4.Restart the libvirtd service, check guest still running
 # systemctl restart libvirtd.service
 # virsh list --all
​​";Check the guest‘ status , still running;;RedHatEnterpriseLinux7/RHEL7-98409
3031;;;;;;;;;6;"specify the model type:
 it can be: virtio, e1000, e1000e, rtl8139,";​​;;RedHatEnterpriseLinux7/RHEL7-98409
3031;;;;;;;;;7;"1. prepare a guest with hostdev type interface and model type defined
 
 # virsh start rhel
 Domain rhel started
 
 # virsh attach-interface rhel hostdev  0000:05:11:1 --managed  --model ${model type} --mac 52:54:00:31:44:ffInterface attached successfully
​​";​​;;RedHatEnterpriseLinux7/RHEL7-98409
3031;;;;;;;;;8;# virsh dumpxml rhel | grep /interface -B12;"<interface type='hostdev' managed='yes'>
       <mac address='52:54:00:31:44:ff'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x05' slot='0x11' function='0x1'/>
       </source>
       <model type='virtio'/>  ----> should be the one we use in step 1 the virsh cmd
       <alias name='hostdev0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";;RedHatEnterpriseLinux7/RHEL7-98409
3031;;;;;;;;;9;"2. restart libvirtd, check the guest still running
 # systemctl restart libvirtd
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  8     rhel                           running";guest still running, should not disappear;;RedHatEnterpriseLinux7/RHEL7-98409
3032;RHEL7-98410;[interface hotplug] [hostdev] attach hostdev interface/device with different elements/attributes - bug 997561;"attach-interface domain type source [[[--live] [--config] | [--current]] | [--persistent]] [--target target] [--mac mac] [--script script] [--model model] [--inbound average,peak,burst,floor] [--outbound average,peak,burst] [--managed] [--print-xml]
 
 
hostdev type | attach-interface | attach-device
support | --target, --model, --mac,  --managed, --print-xml --live,--config, --current, --persistent(RHEL7-42269) | target, model, driver, rom, vlan, boot order, source, type
not support | --inbound, --outbound(RHEL7-43223), --script(RHEL7-18679) | Qos, backend, link state, mtu, coalesce, nwfilter";Yalan Zhang (yalzhang);High;Positive;Not Automated;;1; scenario 1: attach-interface;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-98410
3032;;;;;;;;;2;"1. prepare a running guest
 # virsh list 
  Id    Name                           State
 ----------------------------------------------------
  8     rhel                           running

 2. ensure there are vf on the host
 # lspci | grep -i Ethernet
 ...
 86:10.0 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)
 86:10.1 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)";​​;;RedHatEnterpriseLinux7/RHEL7-98410
3032;;;;;;;;;3;"3. # virsh attach-interface rhel hostdev --source 0000:86:10.1 --managed  --mac 52:54:00:98:c4:a8  --model virtio --target test --print-xml

";"<interface type='hostdev' managed='yes'>
   <source>
     <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x1'/>
   </source>
   <target dev='test'/>
   <mac address='52:54:00:98:c4:a8'/>
   <model type='virtio'/>
 </interface>";;RedHatEnterpriseLinux7/RHEL7-98410
3032;;;;;;;;;4;"4. # virsh attach-interface rhel hostdev --source 0000:86:10.1 --managed  --mac 52:54:00:98:c4:a8  --model virtio --target test
";Interface attached successfully;;RedHatEnterpriseLinux7/RHEL7-98410
3032;;;;;;;;;5;"5. # virsh dumpxml rhel | grep /interface -B10

 ==>check the mac, address, target dev
  ";"  <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:98:c4:a8'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x1'/>
       </source>
       <target dev='test'/>
       <model type='virtio'/>
       <alias name='hostdev0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-98410
3032;;;;;;;;;6;"6. login guest, to check the network function(ensure the pf is active and can ping outside)
 on guest:
 # dhclient
 # ping www.baidu.com
 # ping ${host's ip}";guest can get public ip as in the same range as the host, and have full access to outside;;RedHatEnterpriseLinux7/RHEL7-98410
3032;;;;;;;;;7; scenario 2: attach-device;​​;;RedHatEnterpriseLinux7/RHEL7-98410
3032;;;;;;;;;8;"1. prepare a running guest and there is <boot order='1'> in disk xml
 # virsh dumpxm rhel
 ....
  <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.4.0'>hvm</type>
   </os>
 ....
 <device>
 <disk type='file' device='disk'>
 <boot order='1'/>
 ...
 </disk>

 2. ensure there are vf on the host
 # lspci | grep -i Ethernet
 ...
 86:10.0 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)
 86:10.1 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)";​​;;RedHatEnterpriseLinux7/RHEL7-98410
3032;;;;;;;;;9;"3. prepare xml as below
 # cat vf.xml 
 <interface type='hostdev' managed='yes'>     
  <mac address='52:54:00:98:c4:a8'/>   
    <driver name='vfio'/>    
   <source>
         <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x2'/>    
   </source>   
    <target dev='test'/>     
   <rom bar='on' file='/usr/share/ipxe/808610ed.rom'/>
    <boot order='2'/>
   <vlan>
       <tag id='42'/>
     </vlan>
   <model type='virtio'/>   
 <alias name='ua-a6701522-e67a-4e6b-8f86-48b34c30d3f6'>
    <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>  
   </interface>

 (the rom file path can be found by:
 1. # lspci -nn -s 86:10.2 
 86:10.2 Ethernet controller [0200]: Intel Corporation 82599 Ethernet Controller Virtual Function [8086:10ed] (rev 01)
 2. # yum install # lspci -nn -s 86:10.1 
 86:10.1 Ethernet controller [0200]: Intel Corporation 82599 Ethernet Controller Virtual Function [8086:10ed] (rev 01)
 3. # rpm -ql ipxe-roms
 and found the file named by ""808610ed.rom"")
";​​;;RedHatEnterpriseLinux7/RHEL7-98410
3032;;;;;;;;;10;# virsh attach-device rhel vf.xml ;Device attached successfully;;RedHatEnterpriseLinux7/RHEL7-98410
3032;;;;;;;;;11;"4.  check mac, driver, address, vlan, target and model, boot order, rom bar in the xml
 # virsh dumpxml rhel | grep /interface -B15";"# virsh dumpxml rhel | grep /interface -B15
     <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:98:c4:a8'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x2'/>
       </source>
       <vlan>
         <tag id='42'/>
       </vlan>
       <target dev='test'/>
       <model type='virtio'/>
       <boot order='2'/>
       <alias name='ua-a6701522-e67a-4e6b-8f86-48b34c30d3f6'>
       <rom bar='on' file='/usr/share/ipxe/808610ed.rom'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
";;RedHatEnterpriseLinux7/RHEL7-98410
3032;;;;;;;;;12;"5. login guest, and check the new add interface can get public ip address
 # dhclient
 # ifconfig";can get public ip address;;RedHatEnterpriseLinux7/RHEL7-98410
3033;RHEL7-98411;KN-TC Bonding Driver test case: mode0;KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/modes/mode0;Amit Supugade (asupugad);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98411
3034;RHEL7-98412;KN-TC Bonding Driver test case: mode1;"KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/modes/mode1 
";Amit Supugade (asupugad);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98412
3035;RHEL7-98413;KN-TC Bonding Driver test case: mode2;"KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/modes/mode2 
";Amit Supugade (asupugad);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98413
3036;RHEL7-98414;KN-TC Bonding Driver test case: mode3;"KN-TC Bonding Driver test case:http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/modes/mode3 
";Amit Supugade (asupugad);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98414
3037;RHEL7-98415;KN-TC Bonding Driver test case: mode4;"KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/modes/mode4 
";Amit Supugade (asupugad);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98415
3038;RHEL7-98416;KN-TC Bonding Driver test case: mode5;"KN-TC Bonding Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/bonding/modes/mode5 
";Amit Supugade (asupugad);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98416
3039;RHEL7-98417;KN-TC Team Driver test case: activebackup;"KN-TC Team Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/runners/activebackup 
";Amit Supugade (asupugad);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98417
3040;RHEL7-98418;KN-TC Team Driver test case: broadcast;"KN-TC Team Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/runners/broadcast 
";Amit Supugade (asupugad);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98418
3041;RHEL7-98419;KN-TC Team Driver test case: lacp;"KN-TC Team Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/runners/lacp 
";Amit Supugade (asupugad);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98419
3042;RHEL7-98420;KN-TC Team Driver test case: loadbalance;"KN-TC Team Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/runners/loadbalance 
";Amit Supugade (asupugad);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98420
3043;RHEL7-98421;KN-TC Team Driver test case: roundrobin;"KN-TC Team Driver test case: http://pkgs.devel.redhat.com/cgit/tests/kernel/tree/networking/team/runners/roundrobin 
";Amit Supugade (asupugad);;Positive;Manual Only;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98421
3044;RHEL7-98426;[Video devices] [QXL] [vram64] define a guest with qxl vram64 set to empty value;Verify guest xml will fail to validate when vram 64 is set to empty value.;Fangge Jin (fjin);Medium;Negative;Automated;;1;"define guest xml, set vram64 to empty value:
 
 # virsh edit rhel7.2
      ...
     <video>
      <model type='qxl' vram64='' heads='1'/> 
 </video>
      ...
​​";"Got such error in the terminal:
 
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content
 
 Failed. Try again? [y,n,i,f,?]: 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-98426
3045;RHEL7-98434;[Network] Define network with duplicate VF pci addresses (negative) - Bug 1002423;Libvirt should  forbid to define network with duplicate VF pci addresses;Jingjing Shao (jishao);Medium;Negative;Not Automated;;1;" 1. Prepare a network xml with duplicate pci address
 # cat passthrough1.xml
 <network>
 <name>passthrough1</name>
  <forward mode='hostdev' managed='yes'>
     <driver name='vfio'/>
     <address type='pci' domain='0000' bus='03' slot='10' function='4'/>
     <address type='pci' domain='0000' bus='03' slot='10' function='5'/>
     <address type='pci' domain='0000' bus='03' slot='10' function='4'/>
     <address type='pci' domain='0000' bus='03' slot='10' function='6'/>
     <address type='pci' domain='0000' bus='03' slot='10' function='4'/>
   </forward>
 </network>
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-98434
3045;;;;;;;;;2;"2.Define the network
 # virsh net-define passthrough1.xml";"error: Failed to define network from passthrough1.xml
 error: XML error: PCI device '0000:03:0a.4' can only be listed once in network passthrough1";;RedHatEnterpriseLinux7/RHEL7-98434
3045;;;;;;;;;3;# virsh net-list --all;no network passthrogh1 defined;;RedHatEnterpriseLinux7/RHEL7-98434
3045;;;;;;;;;4;"3. Create the network
 # virsh net-create passthrough1.xml
​​";"error: Failed to create network from passthrough1.xml
 error: XML error: PCI device '0000:03:0a.4' can only be listed once in network passthrough1
​​";;RedHatEnterpriseLinux7/RHEL7-98434
3045;;;;;;;;;5;# virsh net-list --all;no network passthrough1 defined or created;;RedHatEnterpriseLinux7/RHEL7-98434
3045;;;;;;;;;6;"4. prepare a valid xml and define network, then net-edit to add a duplicate vf
 # cat passthrough1.xml
 <network>
 <name>passthrough1</name>
  <forward mode='hostdev' managed='yes'>
     <driver name='vfio'/>
     <address type='pci' domain='0000' bus='03' slot='10' function='4'/>
     <address type='pci' domain='0000' bus='03' slot='10' function='5'/>
     <address type='pci' domain='0000' bus='03' slot='10' function='6'/>
   </forward>
 </network>

 # virsh net-define passthrough1.xml
 Network passthrough1 defined from passthrough1.xml
 
 use net-edit to add duplicate address <address type='pci' domain='0000' bus='03' slot='10' function='4'/> into the xml:
 
 # virsh net-edit passthrough1
 
​​";"error: XML error: PCI device '0000:03:0a.4' can only be listed once in network passthrough1
 Failed. Try again? [y,n,f,?]:";;RedHatEnterpriseLinux7/RHEL7-98434
3046;RHEL7-98440;[Network] Define or start 'hostdev' network which contains PF pci addresses(negative) - Bug 1004676;Define the VF Pool --- libvirt  forbid to define or start 'hostdev' network which contains PF pci addresses;Jingjing Shao (jishao);Medium;Negative;Automated;;1;"For SRIOV NIC
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-98440
3046;;;;;;;;;2;"1. Check devices list 
 # lspci | grep 82599
 86:00.0 Ethernet controller: Intel Corporation 82599ES 10-Gigabit SFI/SFP+ Network Connection (rev 01)
 86:00.1 Ethernet controller: Intel Corporation 82599ES 10-Gigabit SFI/SFP+ Network Connection (rev 01)
 86:10.0 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)
 86:10.1 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)
 86:10.2 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-98440
3046;;;;;;;;;3;"2. Define VF pool with PF pci addresses
 # cat hostnet.xml
  <network>
   <name>hostnet</name>
   <uuid>6b49be3c-bb91-c16d-b475-2929678720f4</uuid>
   <forward mode='hostdev' managed='yes'>
     <address type='pci' domain='0x0000' bus='0x86' slot='0x00' function='0x1'/>
   </forward>
 </network>
 
 # virsh net-define hostnet.xml
 
​​";" 
 error: Failed to define network from hostnet.xml
 error: unsupported configuration: device '/sys/bus/pci/devices/0000:86:00.1' in network 'hostnet' is not an SR-IOV Virtual Function
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-98440
3046;;;;;;;;;4; # virsh net-create hostnet.xml;" error: Failed to define network from hostnet.xml
 error: unsupported configuration: device '/sys/bus/pci/devices/0000:86:00.1' in network 'hostnet' is not an SR-IOV Virtual Function";;RedHatEnterpriseLinux7/RHEL7-98440
3047;RHEL7-98441;[Network] Define macvtap network with vf passthrough mode;"Define macvtap network with vf passthrough mode ,   listing a device by PCI address is valid only for hostdev networks, not for other types of network (e.g. macvtap passthrough)
";Jingjing Shao (jishao);Critical;Positive;Automated;;1;"1.Check the device list to find the VF's device name
  # ip l
 18: enp134s16f3: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000
     link/ether e2:97:eb:3f:ed:18 brd ff:ff:ff:ff:ff:ff
 19: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 52:54:00:3b:3e:02, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
 ....";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-98441
3047;;;;;;;;;2;"2. Prepare the xml as below to define a network
 # cat macvtap.xml
 <network> 
 <name>macvtap</name> 
 <forward mode='passthrough'> 
 <interface dev='enp5s2f1'/> 
 <interface dev='enp132s16'/> 
 <interface dev='enp132s16f2'/> 
 <interface dev='enp5s2f2'/> 
 <interface dev='enp132s16f4'/> 
 </forward> 
 </network>
 
 (all the devs are VF's name, can have 1 or more)
 
 # virsh net-define macvtap.xml
​​";"Output:
 Network macvtap defined from macvtap.xml";;RedHatEnterpriseLinux7/RHEL7-98441
3047;;;;;;;;;3;"3,Check the network info 
 # virsh net-dumpxml macvtap
​​";"<network>
   <name>macvtap</name>
   <uuid>a66a45a3-33f4-4911-8908-a0fd8c2764de</uuid>
   <forward dev='enp5s2f1' mode='passthrough'>
     <interface dev='enp5s2f1'/>
     <interface dev='enp132s16'/>
     <interface dev='enp132s16f2'/>
     <interface dev='enp5s2f2'/>
     <interface dev='enp132s16f4'/>
   </forward>
 </network>";;RedHatEnterpriseLinux7/RHEL7-98441
3047;;;;;;;;;4;"4, Start the network
 # virsh net-start macvtap
​​";"Output:
 Network macvtap started";;RedHatEnterpriseLinux7/RHEL7-98441
3047;;;;;;;;;5;"5, Check the network info
 # virsh net-dumpxml macvtap
​​";same as step 3;;RedHatEnterpriseLinux7/RHEL7-98441
3047;;;;;;;;;6;"6, Destroy the network
 # virsh net-destroy macvtap
​​";"Output:
 Network macvtap destroyed";;RedHatEnterpriseLinux7/RHEL7-98441
3048;RHEL7-98465;WALA-TC: [WALA conf] Use system http_proxy environment;WALA-TC: [WALA conf] Use system http_proxy environment;Yuxin Sun (yuxisun);Medium;Positive;Manual Only;;1;"1.1 Prepare a squid server on Azure. Set a static private IP address(such as 172.20.0.254).(http proxy port:3128). Disable iptables.
 # iptables -F
 # service iptables stop
 1.2 Prepare a VM on Azure. The virtual network group and subnet should be the same with the squid server machine.
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-98465
3048;;;;;;;;;2;"2.1 vi waagent.conf:
 HttpProxy.Host=None
 HttpProxy.Port=None
 2.2 Restart waagent service";​​;;RedHatEnterpriseLinux7/RHEL7-98465
3048;;;;;;;;;3;"3. Set http proxy in system environment:
 # export http_proxy=[squid private IP]:3128
 Restart waagent service";​​;;RedHatEnterpriseLinux7/RHEL7-98465
3048;;;;;;;;;4;"4. Catch traffic on the squid server to check if the waagent can connect to Azure through proxy. (Should catch packages from VM every 25 seconds)
 # tcpdump host [proxy IP] -nnn -s 0";Can catch packages.;;RedHatEnterpriseLinux7/RHEL7-98465
3048;;;;;;;;;5;config ;​​;;RedHatEnterpriseLinux7/RHEL7-98465
3049;RHEL7-98468;[SRIOV] Check the the connections  of macvtap network with  VF;"Check the the connections  of macvtap network with  VF  
";Jingjing Shao (jishao);High;Positive;Not Automated;;1;"  1.  Prepare one **macvtap passthrough** network.
 # virsh net-dumpxml macvtap-passthrough
 
​​";"Output:
 <network>
 <name>macvtap-passthrough</name>
 <uuid>a53c4f33-58ea-4b2e-80b4-f9d103b7b0a3</uuid>
 <forward dev='p1p1_0' mode='passthrough'>
 <interface dev='p1p1_0'/>
 <interface dev='p1p1_1'/>
 <interface dev='p1p2_0'/>
 <interface dev='p1p2_1'/>
 </forward>
 </network>
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-98468
3049;;;;;;;;;2;"2.  Prepare the xml info  and attach the network device to guest
 # cat vf-network.xml
 <interface type='network'>
 <source network='macvtap-passthrough'/>
 <model type='virtio'/>
 </interface>
 
 # virsh attach-device V1  vf-network.xml
​​";"Output:
 Device attached successfully
​​";;RedHatEnterpriseLinux7/RHEL7-98468
3049;;;;;;;;;3;"3. Check the connections of network
 # virsh net-dumpxml macvtap-passthrough
​​";"Output:
 <network connections='1'>
 <name>macvtap-passthrough</name>
 <uuid>a53c4f33-58ea-4b2e-80b4-f9d103b7b0a3</uuid>
 <forward dev='p1p1_0' mode='passthrough'>
 <interface dev='p1p1_0' connections='1'/>
 <interface dev='p1p1_1'/>
 <interface dev='p1p2_0'/>
 <interface dev='p1p2_1'/>
 </forward>
 </network>";;RedHatEnterpriseLinux7/RHEL7-98468
3049;;;;;;;;;4;"4.Attach other three devices to guest 
 # virsh attach-device V1  vf-network.xml
 # virsh attach-device V1  vf-network.xml
 # virsh attach-device V1  vf-network.xml
​​";"Output:
 Device attached successfully
 Device attached successfully
 Device attached successfully";;RedHatEnterpriseLinux7/RHEL7-98468
3049;;;;;;;;;5;"5. check the network status
 # virsh net-dumpxml macvtap-passthrough
​​";"Output:
 <network connections='4'>
 <name>macvtap-passthrough</name>
 <uuid>a53c4f33-58ea-4b2e-80b4-f9d103b7b0a3</uuid>
 <forward dev='p1p1_0' mode='passthrough'>
 <interface dev='p1p1_0' connections='1'/>
 <interface dev='p1p1_1' connections='1'/>
 <interface dev='p1p2_0' connections='1'/>
 <interface dev='p1p2_1' connections='1'/>
 </forward>
 </network>";;RedHatEnterpriseLinux7/RHEL7-98468
3049;;;;;;;;;6;"5.  Attach fifth devices to guest
   # virsh attach-device V1  vf-network.xml
​​";"Output:
 error: Failed to attach device from vf-network.xml
 error: internal error: network 'macvtap-passthrough' requires exclusive access to interfaces, but none are available
​​";;RedHatEnterpriseLinux7/RHEL7-98468
3049;;;;;;;;;7;"6,check the network status
 # virsh net-dumpxml macvtap-passthrough";"Output:
 <network connections='4'>
 <name>macvtap-passthrough</name>
 <uuid>a53c4f33-58ea-4b2e-80b4-f9d103b7b0a3</uuid>
 <forward dev='p1p1_0' mode='passthrough'>
 <interface dev='p1p1_0' connections='1'/>
 <interface dev='p1p1_1' connections='1'/>
 <interface dev='p1p2_0' connections='1'/>
 <interface dev='p1p2_1' connections='1'/>
 </forward>
 </network>";;RedHatEnterpriseLinux7/RHEL7-98468
3050;RHEL7-98469;[SRIOV] Guest migration with  macvtap passthrough mode network;"Guest migration with  macvtap passthrough mode network 
";Jingjing Shao (jishao);High;Positive;Not Automated;;1;" 1. Prepare one migration env, and prepare the same macvtap passthrough mode network on the 2 hosts as below.
 
 # virsh net-dumpxml hostdev
 
 
​​";"Output:
 <network>
   <name>hostdev</name>
   <uuid>7354df99-a04a-ee96-7b55-97a1029ab8bc</uuid>
   <forward dev='enp134s16f1' mode='passthrough'>
     <interface dev='enp134s16f1'/>
     <interface dev='enp134s16f5'/>
   </forward>
 </network>";Test Case;RedHatEnterpriseLinux7/RHEL7-98469
3050;;;;;;;;;2;"2, Prepare a guest with macvtap network interface.
 # virsh dumpxml rhel | grep interface  -A 6
​​";"Output:
     <interface type='direct'>
       <mac address='52:54:00:9a:70:8f'/>
       <source dev='enp134s16f1' mode='passthrough'/>
       <target dev='macvtap0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-98469
3050;;;;;;;;;3;"3, Do the migration
 # virsh migrate --live mig qemu+ssh://ip address/system --verbose
​​";"Output:
 root@10.66.4.215's password:
 Migration: [100 %]";;RedHatEnterpriseLinux7/RHEL7-98469
3050;;;;;;;;;4;"4, Check the interface in the guest on the second host.
 # virsh dumpxml rhel | grep interface  -A 6
​​";"Output:
     <interface type='direct'>
       <mac address='52:54:00:9a:70:8f'/>
       <source dev='enp134s16f1' mode='passthrough'/>
       <target dev='macvtap0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-98469
3051;RHEL7-98470;"[PPC only] passthrough part of the PCIs of one iommu group to one guest with ""managed=yes""  or ""managed=no""";"passthrough part of the PCIs of one iommu group to one guest with ""managed=yes""  or ""managed=no""  -- [Invalid]";Jingjing Shao (jishao);High;Positive;Manual Only;;1;" Test for ppc:
 1. List and check PCI devices on the host and find  ommu_group contains 2 network card.
 # lspci
 ...
 0002:01:00.0 Ethernet controller: Emulex Corporation OneConnect NIC (Lancer) (rev 10)
 0002:01:00.1 Ethernet controller: Emulex Corporation OneConnect NIC (Lancer) (rev 10)
 0002:01:00.2 Ethernet controller: Emulex Corporation OneConnect NIC (Lancer) (rev 10)
 0002:01:00.3 Ethernet controller: Emulex Corporation OneConnect NIC (Lancer) (rev 10)
 0002:01:00.4 Fibre Channel: Emulex Corporation OneConnect FCoE Initiator (Lancer) (rev 10)
 0002:01:00.5 Fibre Channel: Emulex Corporation OneConnect FCoE Initiator (Lancer) (rev 10)
 0003:00:00.0 PCI bridge: IBM Device 03dc
 0003:03:00.0 USB controller: Texas Instruments TUSB73x0 SuperSpeed USB 3.0 xHCI Host Controller (rev 02)
 0003:09:00.0 Ethernet controller: Broadcom Corporation NetXtreme BCM5719 Gigabit Ethernet PCIe (rev 01)
 0003:09:00.1 Ethernet controller: Broadcom Corporation NetXtreme BCM5719 Gigabit Ethernet PCIe (rev 01)
 0003:09:00.2 Ethernet controller: Broadcom Corporation NetXtreme BCM5719 Gigabit Ethernet PCIe (rev 01)
 0003:09:00.3 Ethernet controller: Broadcom Corporation NetXtreme BCM5719 Gigabit Ethernet PCIe (rev 01)
 ...
 2. # virsh nodedev-dumpxml pci_0002_01_00_0
 <device>
   <name>pci_0002_01_00_0</name>
   <path>/sys/devices/pci0002:00/0002:00:00.0/0002:01:00.0</path>
   <parent>pci_0002_00_00_0</parent>
   <driver>
     <name>vfio-pci</name>
   </driver>
   <capability type='pci'>
     <domain>2</domain>
     <bus>1</bus>
     <slot>0</slot>
     <function>0</function>
     <product id='0xe220'>OneConnect NIC (Lancer)</product>
     <vendor id='0x10df'>Emulex Corporation</vendor>
     <iommuGroup number='1'>
       <address domain='0x0002' bus='0x01' slot='0x00' function='0x0'/>
       <address domain='0x0002' bus='0x01' slot='0x00' function='0x1'/>
       <address domain='0x0002' bus='0x01' slot='0x00' function='0x2'/>
       <address domain='0x0002' bus='0x01' slot='0x00' function='0x3'/>
       <address domain='0x0002' bus='0x01' slot='0x00' function='0x4'/>
       <address domain='0x0002' bus='0x01' slot='0x00' function='0x5'/>
     </iommuGroup>
     <numa node='0'/>
     <pci-express>
       <link validity='cap' port='0' speed='8' width='8'/>
       <link validity='sta' speed='8' width='8'/>
     </pci-express>
   </capability>
 </device>
 3. Edit XML to add one member of the iommu_group to the guest
 <hostdev mode='subsystem' type='pci' managed='yes'>
   <source>
      <address domain='0x0002' bus='0x01' slot='0x00' function='0x0'/>
   </source>
 </hostdev>
 
 4.Start the guest and check qemu process that '-device vfio-pci,host=0002:01:00.0,id=hostdev0,bus=pci.0,addr=0x6' can be displayed.
 
 5. Check within the guest that the device is assigned successfully.
 # lspci
 00:06.0 Ethernet controller: Emulex Corporation OneConnect NIC (Lancer) (rev 10)
 
 6. Restart the guest and check the device should be correctly assigned to the guest.
 # lspci
 00:06.0 Ethernet controller: Emulex Corporation OneConnect NIC (Lancer) (rev 10)";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-98470
3052;RHEL7-98508;IDM-SSSD-TC: krb_provider: kcm: Verify kcm data within sssd secrets db;Verify kcm data within sssd secrets db;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"Set default_ccache_name = KCM: in krb5.conf
​​"; Successfully list the secrets value for user id = 2121 from the stored cache in secrets db.;Test Case;RedHatEnterpriseLinux7/RHEL7-98508
3052;;;;;;;;;2;"Add secrets section in sssd.conf : 
 [secrets]
     debug_level = 0xFFF0
     provider = local";​​;;RedHatEnterpriseLinux7/RHEL7-98508
3052;;;;;;;;;3;Restart SSSD service;​​;;RedHatEnterpriseLinux7/RHEL7-98508
3052;;;;;;;;;4;Execute user login and cache KRB ticket.;​​;;RedHatEnterpriseLinux7/RHEL7-98508
3052;;;;;;;;;5;"Verify the user record from SSSD secrets persistent cache.
 # ldbsearch -H /var/lib/sss/secrets/secrets.ldb -b ""cn=default,cn=2121,cn=persistent,cn=kcm""";​​;;RedHatEnterpriseLinux7/RHEL7-98508
3053;RHEL7-98509;IDM-SSSD-TC: krb_provider: kcm: Access user secrets using KCM responder URI; Access user secrets using KCM responder URI;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;Execute user login and cache KRB ticket.; Successfully retrieved the key:value pair for user id = 2121;Test Case;RedHatEnterpriseLinux7/RHEL7-98509
3053;;;;;;;;;2;"Verify user id to use it in secrets responder URI.
     [testuser1@vm-idm-020 ~]$ id
 uid=2121(testuser1) gid=2121 groups=2121,23011(TestGroup)";​​;;RedHatEnterpriseLinux7/RHEL7-98509
3053;;;;;;;;;3;"As root user, list the user’s secret by executing HTTP XGET request against secrets socket as follows:
     #  curl -H ""Content-Type: application/json"" --unix-socket /var/run/secrets.socket -XGET http://localhost/kcm/persistent/2121/default
     {
     ""type"": ""simple"",
     ""value"": ""MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwAA==""
 }";​​;;RedHatEnterpriseLinux7/RHEL7-98509
3054;RHEL7-98510;IDM-SSSD-TC: krb_provider: kcm: Access sssd secrets db as unprivileged user;Access sssd secrets db as unprivileged user;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;Execute user login and cache KRB ticket.; Unprivileged user denied access to secrets.ldb file.;Test Case;RedHatEnterpriseLinux7/RHEL7-98510
3054;;;;;;;;;2;"Verify the user record from SSSD secrets persistent cache.
     # ssh -l testuser localhost
     [testuser@vm-idm-020 ~]$ klist
     Ticket cache: KCM:21201:97778
      Default principal: testuser@EXAMPLE.COM
 [testuser@vm-idm-020 ~]$ ldbsearch -H /var/lib/sss/secrets/secrets.ldb -b ""cn=default,cn=21201,cn=persistent,cn=kcm""ltdb: tdb(/var/lib/sss/secrets/secrets.ldb): tdb_open_ex: could not open file /var/lib/sss/secrets/secrets.ldb: Permission deniedUnable to open tdb '/var/lib/sss/secrets/secrets.ldb': Permission denied
 Failed to connect to '/var/lib/sss/secrets/secrets.ldb' with backend 'tdb': Unable to open tdb '/var/lib/sss/secrets/secrets.ldb': Permission denied";​​;;RedHatEnterpriseLinux7/RHEL7-98510
3055;RHEL7-98511;IDM-SSSD-TC: krb_provider: kcm: As unprivileged user, access user secrets using KCM responder URI;As unprivileged user, access user secrets using KCM responder URI;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"Execute user login and cache KRB ticket.
​​";Unprivileged user denied access to the resources.;Test Case;RedHatEnterpriseLinux7/RHEL7-98511
3055;;;;;;;;;2;"Verify the key:value pair record of uid 21201 from secrets cache.
 [testuser@vm-idm-020 ~]$ curl -H ""Content-Type: application/json"" --unix-socket /var/run/secrets.socket -XGET http://localhost/kcm/persistent/21201/default
 <html>
 <head>
 <title>403 Forbidden</title></head>
 <body>
 <h1>Forbidden</h1>
 <p>Access to the requested resource is forbidden.</p>";​​;;RedHatEnterpriseLinux7/RHEL7-98511
3056;RHEL7-98512;IDM-SSSD-TC: krb_provider: kcm: User login should renew KRB credentials;User login should renew KRB credentials;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;Execute user login and run klist.;User login renews and updates KRB ticket cache.;Test Case;RedHatEnterpriseLinux7/RHEL7-98512
3056;;;;;;;;;2;"Verify tIcket START and EXPIRE time. 
     [testuser@vm-idm-020 ~]$ klist
 Ticket cache: KCM:21201:67973
 Default principal: testuser@EXAMPLE.COM
     Valid starting          Expires                         Service principal
 2017-04-20T13:16:40  2017-04-21T13:16:40  krbtgt/EXAMPLE.COM@EXAMPLE.COM
    renew until 2017-04-20T13:16:40";​​;;RedHatEnterpriseLinux7/RHEL7-98512
3056;;;;;;;;;3;Wait for 5 mins and logout.;​​;;RedHatEnterpriseLinux7/RHEL7-98512
3056;;;;;;;;;4;Login again and verify  tIcket START and EXPIRE time.;​​;;RedHatEnterpriseLinux7/RHEL7-98512
3057;RHEL7-98513;IDM-SSSD-TC: krb_provider: kcm: kinit should renew user KRB credentials;kinit should renew user KRB credentials;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;Execute user login and run klist.;Kinit renews and updates KRB ticket cache.;Test Case;RedHatEnterpriseLinux7/RHEL7-98513
3057;;;;;;;;;2;"Verify tIcket START and EXPIRE time. 
     [testuser@vm-idm-020 ~]$ klist
 Ticket cache: KCM:21201:67973
 Default principal: testuser@EXAMPLE.COM
     Valid starting          Expires                         Service principal
 2017-04-20T13:16:40  2017-04-21T13:16:40  krbtgt/EXAMPLE.COM@EXAMPLE.COM
    renew until 2017-04-20T13:16:40";​​;;RedHatEnterpriseLinux7/RHEL7-98513
3057;;;;;;;;;3;"Wait for 5 mins and execute kinit.
     [testuser@vm-idm-020 ~]$ kinit
 Password for testuser@EXAMPLE.COM:";​​;;RedHatEnterpriseLinux7/RHEL7-98513
3057;;;;;;;;;4;Run klist and verify tIcket START and EXPIRE time.;​​;;RedHatEnterpriseLinux7/RHEL7-98513
3058;RHEL7-98514;IDM-SSSD-TC: krb_provider: kcm: SSSD service restart should retain KRB credentials;SSSD service restart should retain KRB credentials;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;1;"Execute user login and run klist on one terminal
​​";SSSD service restart retains KRB credentials.;Test Case;RedHatEnterpriseLinux7/RHEL7-98514
3058;;;;;;;;;2;"Verify tIcket START and EXPIRE time. 
     [testuser@vm-idm-020 ~]$ klist
 Ticket cache: KCM:21201:67973
 Default principal: testuser@EXAMPLE.COM
     Valid starting          Expires                         Service principal
 2017-04-20T13:16:40  2017-04-21T13:16:40  krbtgt/EXAMPLE.COM@EXAMPLE.COM
    renew until 2017-04-20T13:16:40";​​;;RedHatEnterpriseLinux7/RHEL7-98514
3058;;;;;;;;;3;Wait for 5 mins and on another terminal restart SSSD service.;​​;;RedHatEnterpriseLinux7/RHEL7-98514
3058;;;;;;;;;4;Go back to first terminal and verify KRB credentials.;​​;;RedHatEnterpriseLinux7/RHEL7-98514
3059;RHEL7-98549;[vIOMMU] Save -> restore and managedsave with intel-iommu device - bug 1459906;Emulated IOMMU: Support  guest  save with intel-iommu device;Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;" 1. Prepare a guest with xml as below
  <features>
     <ioapic driver='qemu'/>
   </features>
 ...
   <iommu model='intel'>
     <driver intremap='on' caching_mode='on'/>
   </iommu>

 and enable iommu in the guest
 start the guest
 # echo test > test";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-98549
3059;;;;;;;;;2;"2 Do the managedsave
 #virsh managedsave q35
 Domain vm1-q35 state saved by libvirt
";​​;;RedHatEnterpriseLinux7/RHEL7-98549
3059;;;;;;;;;3;"3,  Start the guest:
 # virsh start q35
";"Domain q35 started

 (guest start successfully)";;RedHatEnterpriseLinux7/RHEL7-98549
3059;;;;;;;;;4;"4. login guest, check the file no changes
 # cat test
 test";​​;;RedHatEnterpriseLinux7/RHEL7-98549
3059;;;;;;;;;5;save--> restore;​​;;RedHatEnterpriseLinux7/RHEL7-98549
3059;;;;;;;;;6;"1. prepare a running guest and login the guest, create a file and write something into it
 [on host]# virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  9     q                              running

 [on guest]# echo save_and_restore > save
";​​;;RedHatEnterpriseLinux7/RHEL7-98549
3059;;;;;;;;;7;"2. on host, save the guest to a file, then restore
 [on host] # virsh save q q.savenew
 Domain q saved to q.savenew


 [on host]# virsh restore q.savenew
 Domain restored from q.savenew

";save -> restore both succeed;;RedHatEnterpriseLinux7/RHEL7-98549
3059;;;;;;;;;8;"3. check on guest, the file no changes
 [on guest]# cat save
​​";"save_and_restore
 
 (file no changes)";;RedHatEnterpriseLinux7/RHEL7-98549
3060;RHEL7-98573;[Video devices] [QXL]Start a guest with  qxl video - default parameters;Verify libvirt sets default values for qxl video parameters when no parameters are set;Fangge Jin (fjin);Medium;Positive;Automated;;1;"Define or edit a guest with such setting:
 1) with qxl video
 2) don't set any parameter for the qxl video";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-98573
3060;;;;;;;;;2;" Dump guest xml:
 # virsh dumpxml vm
 
 
 
​​";"Libvirt sets default values for qxl video parameters:
 ram: 65536, vram: 65536, vgamem: 16384, heads: 1, no vram64
 
 Output:
 ...
     <video>
       <model type='qxl' ram='65536' vram='65536' vgamem='16384' heads='1' primary='yes'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>
     </video>
 ...";;RedHatEnterpriseLinux7/RHEL7-98573
3060;;;;;;;;;3;"2.Start the vm.
 # virsh start vm";​​;;RedHatEnterpriseLinux7/RHEL7-98573
3060;;;;;;;;;4;"3.check qemu command line:
 # ps aux|grep qemu-kvm|grep qxl";"The qemu command line includes correct ram/vram/vram64/vgamem/heads parameters for qxl video:

 -device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vram64_size_mb=0,vgamem_mb=16,max_outputs=1,bus=pci.0,addr=0x2
 
 Note:
 In guest xml, ram/vram/vgamem are in KB; while in qemu command line, ram/vram are in Bytes, vram64/vgamem are in MB
​​";;RedHatEnterpriseLinux7/RHEL7-98573
3061;RHEL7-98584;[Video devices] [cirrus] Start a guest with cirrus video - default parameters;"Verify libvirt will set default parameters for cirrus video when no parameters are set.
 Bug 1447831 - vgamem_mb is missing in qemu command line for cirrus video - ASSIGNED
";Fangge Jin (fjin);Medium;Positive;Automated;;1;"Define or edit a guest with such setting:
 1) with cirrus video
 2) don't set any parameter for the cirrus video";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-98584
3061;;;;;;;;;2;"Dump guest xml:
 # virsh dumpxml vm";"Heads=1, and no memory related parameters in domain xml.
 
 Output:
 ...
     <video>
       <model type='cirrus' heads='1' primary='yes'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0a' function='0x0'/>
     </video>
 ...";;RedHatEnterpriseLinux7/RHEL7-98584
3061;;;;;;;;;3;"Start guest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-98584
3061;;;;;;;;;4;"Check qemu command line:
 # ps aux|grep qemu|grep cirrus
​​";"The qemu command line includes correct value for vram/heads:
 
 ... -device cirrus-vga,id=video0,bus=pci.0,addr=0xa...
";;RedHatEnterpriseLinux7/RHEL7-98584
3061;;;;;;;;;5;"The following steps are optional:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-98584
3061;;;;;;;;;6;"3. In guest, run "" lspci|grep VGA ""
 
 Note:This is default model of video device kvm could support.";"Output:
 00:0a:0 VGA compatible controller: Cirrus Logic GD 5446";;RedHatEnterpriseLinux7/RHEL7-98584
3062;RHEL7-98585;[Video devices] [VGA] Start a guest with vga video - default parameters;Verify libvirt sets default values for VGA video parameters when no parameters are set;Fangge Jin (fjin);Medium;Positive;Automated;;1;"Define or edit a guest with such setting:
 1) with vga video
 2) don't set any parameter for the vga video";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-98585
3062;;;;;;;;;2;"Dump guest xml:
 # virsh dumpxml guest
​​";"Libvirt sets default value for vram/heads:
 vram: 16384, heads: 1
 
 Output:
 ...
     <video>
       <model type='vga' vram='16384' heads='1' primary='yes'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0a' function='0x0'/>
     </video>
 ...";;RedHatEnterpriseLinux7/RHEL7-98585
3062;;;;;;;;;3;"Start guest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-98585
3062;;;;;;;;;4;"2.Check qemu command line:
 # ps aux|grep qemu|grep cirrus
​​";"The qemu command line includes correct values for vram:
 
 ...-device VGA,id=video0,vgamem_mb=16,bus=pci.0,addr=0x2..

 Note:
 In guest xml, vram is in KB; while in qemu command line, it is in MB";;RedHatEnterpriseLinux7/RHEL7-98585
3062;;;;;;;;;5;"The following steps are optional:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-98585
3062;;;;;;;;;6;"3. In guest, run "" lspci|grep VGA ""
 
 Note:This is default model of video device kvm could support.";"Output:
 00:02.0 VGA compatible controller: Device 1234:1111 (rev 02)";;RedHatEnterpriseLinux7/RHEL7-98585
3063;RHEL7-98587;[virtual network][virtual-nic-device] macvtap env. setup with virtio-net-pci;macvtap env. setup with virtio-net-pci;Yu Wang (wyu);Critical;Positive;Not Automated;;1;" 1. configure macvtap env.:
 1). If host use brige, need to remove brige and reboot host
 2). Create macvtap device at host,the command is:
    # ip link add link eth1 name macvtap0 type macvtap mode bridge
    # ip link set macvtap0 address 1a:46:0b:ca:bc:7b up
    # ip link show macvtap0";" 1. after macvtap configure,ip link show macvtap can show the correct macvtap info.
 # ip link show macvtap0
    6: macvtap0@eth1: <BROADCAST,MULTICAST,UP> mtu 1500 qdisc noqueue state UNKNOWN
          link/ether 1a:46:0b:ca:bc:7b brd ff:ff:ff:ff:ff:ff";Test Case;RedHatEnterpriseLinux7/RHEL7-98587
3063;;;;;;;;;2;"2. boot guest using the macvtap:
 -netdev tap,vhost=on,id=macvtap_netdev,fd=6 6<>/dev/tap6 -device virtio-net-pci,netdev=macvtap_netdev,mac=1a:46:0b:ca:bc:7b
​​";"2. guest boot up correctly
​​";;RedHatEnterpriseLinux7/RHEL7-98587
3063;;;;;;;;;3;"3.check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";"3. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-98587
3063;;;;;;;;;4;"4. access guest from external host:
 from external host to guest: ping $guest_ip";4. the guest network is alive;;RedHatEnterpriseLinux7/RHEL7-98587
3064;RHEL7-98588;[Video devices] [QXL] [head] Start a guest with heads set for multiple qxl videos;Verify guest can start successfully with correct qemu command line when set multiple qxl videos and 4>=heads>=1;Fangge Jin (fjin);Medium;Positive;Automated;;1;"Edit or define a guest with:
 1) spice graphic
 2) multiple qxl videos
 3) set different heads for the videos";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-98588
3064;;;;;;;;;2;"Start guest:
 # virsh start rhel7.4";​​;;RedHatEnterpriseLinux7/RHEL7-98588
3064;;;;;;;;;3;"Check qemu command line:
 # ps aux|grep rhel7.4|grep max_outputs 
​​";"max_outputs is set correctly in qemu command line:
 
 ...
 -device qxl-vga,id=video0,ram_size=67108864,vram_size=16777216,vram64_size_mb=0,vgamem_mb=16,max_outputs=3,bus=pci.0,addr=0x7 
 -device qxl,id=video1,ram_size=67108864,vram_size=16777216,vram64_size_mb=0,vgamem_mb=16,max_outputs=4,bus=pci.0,addr=0x8
 ...";;RedHatEnterpriseLinux7/RHEL7-98588
3065;RHEL7-98610;[interface type] set undefined interface type in guest xml;"model type: negative test, illegal interface type or model type will report error.
";Yalan Zhang (yalzhang);Medium;Negative;Automated;;1;"1. # virsh edit rhel7.3
 ...
 <interface type='test'>
 <mac address='54:52:00:54:9e:f4'/>
 <source network='default'/>
 <model type='virtio'/>
 </interface>
 
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content
 
 Failed. Try again? [y,n,i,f,?]:
​​";can not save and validte ;Test Case;RedHatEnterpriseLinux7/RHEL7-98610
3066;RHEL7-98613;KN-TC: bridge/ppc64le/veth/veth_as_filter FUNC=nic;KN-TC: bridge/ppc64le/veth/veth_as_filter FUNC=nic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98613
3067;RHEL7-98614;KN-TC: bridge/ppc64le/veth/veth_ping FUNC=nic;KN-TC: bridge/ppc64le/veth/veth_ping FUNC=nic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98614
3068;RHEL7-98615;KN-TC: bridge/ppc64le/veth/veth_pass_vlan FUNC=nic;KN-TC: bridge/ppc64le/veth/veth_pass_vlan FUNC=nic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98615
3069;RHEL7-98616;KN-TC: vlan/ppc64le/singleHW/vlan_fragment_test;KN-TC: vlan/ppc64le/singleHW/vlan_fragment_test;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98616
3070;RHEL7-98617;KN-TC: vlan/ppc64le/singleHW/vlan_offload;KN-TC: vlan/ppc64le/singleHW/vlan_offload;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98617
3071;RHEL7-98618;KN-TC: vlan/ppc64le/singleHW/config_file_test;KN-TC: vlan/ppc64le/singleHW/config_file_test;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98618
3072;RHEL7-98619;KN-TC: vlan/ppc64le/singleHW/vlan_and_bond_over_nic;KN-TC: vlan/ppc64le/singleHW/vlan_and_bond_over_nic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98619
3073;RHEL7-98620;KN-TC: vlan/ppc64le/singleHW/vlan_tcpdump;KN-TC: vlan/ppc64le/singleHW/vlan_tcpdump;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98620
3074;RHEL7-98621;KN-TC: vlan/ppc64le/singleHW/change_vlan_mac;KN-TC: vlan/ppc64le/singleHW/change_vlan_mac;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98621
3075;RHEL7-98622;KN-TC: vlan/ppc64le/singleHW/vlan_and_bridge_over_nic;KN-TC: vlan/ppc64le/singleHW/vlan_and_bridge_over_nic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98622
3076;RHEL7-98623;KN-TC: vlan/ppc64le/singleHW/tier1_all;KN-TC: vlan/ppc64le/singleHW/tier1_all;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98623
3077;RHEL7-98624;KN-TC: vlan/ppc64le/singleHW/promisc;KN-TC: vlan/ppc64le/singleHW/promisc;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98624
3078;RHEL7-98625;KN-TC: vlan/ppc64le/singleHW/reorder_hdr FUNC=nic;KN-TC: vlan/ppc64le/singleHW/reorder_hdr FUNC=nic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98625
3079;RHEL7-98626;KN-TC: vlan/ppc64le/singleHW/multi_vlan_traffic;KN-TC: vlan/ppc64le/singleHW/multi_vlan_traffic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98626
3080;RHEL7-98627;KN-TC: bridge/ppc64le/veth/veth_perf FUNC=nic;KN-TC: bridge/ppc64le/veth/veth_perf FUNC=nic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98627
3081;RHEL7-98628;KN-TC: vlan/ppc64le/dualHost/vlan_fragment_test;KN-TC: vlan/ppc64le/dualHost/vlan_fragment_test;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98628
3082;RHEL7-98629;KN-TC: vlan/ppc64le/dualHost/vlan_and_bond_over_nic;KN-TC: vlan/ppc64le/dualHost/vlan_and_bond_over_nic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98629
3083;RHEL7-98630;KN-TC: vlan/ppc64le/dualHost/vlan_and_bridge_over_nic;KN-TC: vlan/ppc64le/dualHost/vlan_and_bridge_over_nic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98630
3084;RHEL7-98631;KN-TC: vlan/ppc64le/dualHost/checksum_with_scp;KN-TC: vlan/ppc64le/dualHost/checksum_with_scp;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98631
3085;RHEL7-98632;KN-TC: vlan/ppc64le/dualHost/reorder_hdr FUNC=nic;KN-TC: vlan/ppc64le/dualHost/reorder_hdr FUNC=nic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98632
3086;RHEL7-98633;KN-TC: vlan/ppc64le/dualHost/multi_vlan_traffic;KN-TC: vlan/ppc64le/dualHost/multi_vlan_traffic;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98633
3087;RHEL7-98634;KN-TC: vlan/ppc64le/dualHost/vm_offload;KN-TC: vlan/ppc64le/dualHost/vm_offload;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98634
3088;RHEL7-98635;KN-TC: vlan/ppc64le/dualHost/config_file_test;KN-TC: vlan/ppc64le/dualHost/config_file_test;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98635
3089;RHEL7-98636;KN-TC: vlan/ppc64le/dualHost/vlan_tcpdump;KN-TC: vlan/ppc64le/dualHost/vlan_tcpdump;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98636
3090;RHEL7-98637;KN-TC: vlan/ppc64le/dualHost/change_vlan_mac;KN-TC: vlan/ppc64le/dualHost/change_vlan_mac;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98637
3091;RHEL7-98638;KN-TC: vlan/ppc64le/dualHost/promisc;KN-TC: vlan/ppc64le/dualHost/promisc;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98638
3092;RHEL7-98639;KN-TC: vlan/ppc64le/dualHost/ppc64le/tier1_all;KN-TC: vlan/ppc64le/dualHost/ppc64le/tier1_all;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98639
3093;RHEL7-98640;KN-TC: bonding/module_load_unload;KN-TC: bonding/module_load_unload;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98640
3094;RHEL7-98641;KN-TC: bonding/modes/mode2;KN-TC: bonding/modes/mode2;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98641
3095;RHEL7-98642;KN-TC: bonding/modes/mode4;KN-TC: bonding/modes/mode4;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98642
3096;RHEL7-98643;KN-TC: bonding/sanity_check;KN-TC: bonding/sanity_check;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98643
3097;RHEL7-98644;KN-TC: bonding/modes/mode0;KN-TC: bonding/modes/mode0;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98644
3098;RHEL7-98645;KN-TC: bonding/modes/mode3;KN-TC: bonding/modes/mode3;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98645
3099;RHEL7-98646;KN-TC: bonding/modes/mode1;KN-TC: bonding/modes/mode1;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98646
3100;RHEL7-98647;KN-TC: bonding/modes/mode5;KN-TC: bonding/modes/mode5;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98647
3101;RHEL7-98648;KN-TC: bonding/setup_bond;KN-TC: bonding/setup_bond;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98648
3102;RHEL7-98649;KN-TC: bonding/parameters/primary;KN-TC: bonding/parameters/primary;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98649
3103;RHEL7-98650;KN-TC: bonding/parameters/miimon;KN-TC: bonding/parameters/miimon;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98650
3104;RHEL7-98651;KN-TC: bonding/parameters/arp_validate;KN-TC: bonding/parameters/arp_validate;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98651
3105;RHEL7-98652;KN-TC: bonding/parameters/min_links;KN-TC: bonding/parameters/min_links;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98652
3106;RHEL7-98653;KN-TC: bonding/parameters/num_grat_arp;KN-TC: bonding/parameters/num_grat_arp;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98653
3107;RHEL7-98654;KN-TC: bonding/parameters/downdelay;KN-TC: bonding/parameters/downdelay;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98654
3108;RHEL7-98655;KN-TC: bonding/parameters/lacp_rate;KN-TC: bonding/parameters/lacp_rate;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98655
3109;RHEL7-98656;KN-TC: bonding/parameters/arp_interval;KN-TC: bonding/parameters/arp_interval;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98656
3110;RHEL7-98657;KN-TC: bonding/parameters/resend_igmp;KN-TC: bonding/parameters/resend_igmp;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98657
3111;RHEL7-98658;KN-TC: bonding/parameters/fail_over_mac;KN-TC: bonding/parameters/fail_over_mac;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98658
3112;RHEL7-98659;KN-TC: bonding/parameters/primary_reselect;KN-TC: bonding/parameters/primary_reselect;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98659
3113;RHEL7-98660;KN-TC: bonding/parameters/updelay;KN-TC: bonding/parameters/updelay;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98660
3114;RHEL7-98661;KN-TC: bonding/parameters/arp_ip_target;KN-TC: bonding/parameters/arp_ip_target;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98661
3115;RHEL7-98662;KN-TC: bonding/parameters/arp_all_targets;KN-TC: bonding/parameters/arp_all_targets;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98662
3116;RHEL7-98663;KN-TC: bonding/parameters/use_carrier;KN-TC: bonding/parameters/use_carrier;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98663
3117;RHEL7-98664;KN-TC: bonding/parameters/max_bonds;KN-TC: bonding/parameters/max_bonds;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98664
3118;RHEL7-98670;KN-TC: openvswitch/upgrade_dpdk;KN-TC: openvswitch/upgrade_dpdk;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98670
3119;RHEL7-98671;KN-TC: openvswitch/upgrade_ovs;KN-TC: openvswitch/upgrade_ovs;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-98671
3120;RHEL7-99249;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: ldapsearch base specified in sssd conf	;ldapsearch base specified in sssd conf;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99249
3121;RHEL7-99250;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Without ldapsearch base specified in sssd conf and rootDSE exists;Without ldapsearch base specified in sssd conf and rootDSE exists;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99250
3122;RHEL7-99251;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Without ldapsearch base and with ldap user search base specified;Without ldapsearch base and with ldap user search base specified;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99251
3123;RHEL7-99252;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Without ldapsearch base and with ldap group search base specified;Without ldapsearch base and with ldap group search base specified;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99252
3124;RHEL7-99253;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Without ldapsearch base and with ldap netgroup search base specified; Without ldapsearch base and with ldap netgroup search base specified;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99253
3125;RHEL7-99254;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Without ldapsearch base and multiple namingContexts and 1 defaultnamingcontext;Without ldapsearch base and multiple namingContexts and 1 defaultnamingcontext;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99254
3126;RHEL7-99255;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: With ldapsearch base and with ldap user search base specified multi namingContexts;With ldapsearch base and with ldap user search base specified multi namingContexts;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99255
3127;RHEL7-99269;[virtio-win][netkvm] Migrate guest with netkvm driver enabled;[virtio-win][netkvm] Migrate guest with netkvm driver enabled;Yu Wang (wyu);Critical;Positive;Automated;442489;1;"steps:
 1. start guest w/ virtio-net-pci
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10
​​";1.guest should start normally, qemu-kvm should not core dump.;Test Case;RedHatEnterpriseLinux7/RHEL7-99269
3127;;;;;;;;;2;"2. make sure the netkvm driver is enable. 
 click Network adapters--> right-click Properties of Redhat VirtIO Ethernet Adapter";2.netkvm driver is enable;;RedHatEnterpriseLinux7/RHEL7-99269
3127;;;;;;;;;3;"3. check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";"3.drvier verifier can be enabled successfully,cmd output should include:
 Verified drivers: netkvm.sys";;RedHatEnterpriseLinux7/RHEL7-99269
3127;;;;;;;;;4;"4.ping between guest and extenal host
 from external host to guest: ping -c 10 $guest_ip
 from guest to external host: ping -n 10 $external-host_ip";4.the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-99269
3127;;;;;;;;;5;"5. Start listenning port in another host with the same cli in step1 and
 -incoming tcp:0:5888";5.the listening port could start successfully;;RedHatEnterpriseLinux7/RHEL7-99269
3127;;;;;;;;;6;"6.Do live migration:
 {""execute"": ""migrate"",""arguments"":{""uri"": ""tcp:0:5888""}}";6.no err;;RedHatEnterpriseLinux7/RHEL7-99269
3127;;;;;;;;;7;"7. check migration status until it is finished.
 {""execute"":""query-migrate""}";"7.live migration successfully,qmp return complete status:
 {""return"": {""status"": ""completed"", ""downtime"": 605, ""total-time"": 15446,
 ""ram"": {""total"": 4312203264, ""remaining"": 176128, ""transferred"": 538227309}}}";;RedHatEnterpriseLinux7/RHEL7-99269
3127;;;;;;;;;8;"8.ping between dst guest and extenal host
 from external host to guest: ping -c 10 $guest_ip
 from guest to external host: ping -n 10 $external-host_ip
​​";8.the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-99269
3128;RHEL7-99270;[virtio-win][netkvm] Reboot guest with netkvm driver enabled;[virtio-win][netkvm] Reboot guest with netkvm driver enabled;Yu Wang (wyu);Critical;Positive;Automated;420427;1;"steps:
 1. start guest w/ virtio-net-pci
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10
​​";1. guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-99270
3128;;;;;;;;;2;2. make sure the netkvm driver is enable. (click Network adapters--> right-click Properties of Redhat VirtIO Ethernet Adapter);2. netkvm driver is enable;;RedHatEnterpriseLinux7/RHEL7-99270
3128;;;;;;;;;3;"3. check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";3. driver verifer effective;;RedHatEnterpriseLinux7/RHEL7-99270
3128;;;;;;;;;4;"4. reboot guest:
 ctrl+alt+delete ---> select ""reboot""";4. guest can reboot without crash and other error.;;RedHatEnterpriseLinux7/RHEL7-99270
3128;;;;;;;;;5;5. check netkvm driver by Opening Device Manager and clicking Network adapters--> right-clicking Properties --> Redhat VirtIO Ethernet Adapter;5. No any error such as yellow warning for netkvm driver;;RedHatEnterpriseLinux7/RHEL7-99270
3128;;;;;;;;;6;"6. ping between guest and extenal host
 from external host to guest: ping -c 10 $guest_ip
 from guest to external host: ping -n 10 $external-host_ip";6. the packet loss in ping should be zero;;RedHatEnterpriseLinux7/RHEL7-99270
3129;RHEL7-99271;[virtio-win][netkvm] shutdown guest with netkvm driver enabled;[virtio-win][netkvm] shutdown guest with netkvm driver enabled;Yu Wang (wyu);Critical;Positive;Automated;420428;1;"steps:
 1. start guest w/ virtio-net-pci
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10
​​";1. guest could boot successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-99271
3129;;;;;;;;;2;"2. make sure the netkvm driver is enable. :
 Opening Device Manager and clicking Network adapters--> right-clicking Properties of Redhat VirtIO Ethernet Adapter";2. netkvm driver is enable;;RedHatEnterpriseLinux7/RHEL7-99271
3129;;;;;;;;;3;"3.check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";"3. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-99271
3129;;;;;;;;;4;"4. shutdown guest:
 ctrl+alt+delete ---> select ""shutdown""";4. guest can shutdown without crash and other error.;;RedHatEnterpriseLinux7/RHEL7-99271
3130;RHEL7-99272;[virtual network][virtual-nic-device] hotplug/hot-unplug netkvm device in a loop ;[virtio-win][netkvm] hotplug/hot-unplug netkvm device in a loop;Yu Wang (wyu);Medium;Positive;Not Automated;420556;1;"1. start guest w/ virtio-net-pci:
 -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet0,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net0,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10
​​";1. guest can boot successfully without any error.;Test Case;RedHatEnterpriseLinux7/RHEL7-99272
3130;;;;;;;;;2;"2. check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";"3. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-99272
3130;;;;;;;;;3;"3. use following scrip to hotlug/hot-unplug netkvm device at least 100 times:
 let i=0
 exec 3<>/dev/tcp/localhost/4444 #note modify this to qmp port
 echo -e ""{ 'execute': 'qmp_capabilities' }"" >&3
 read response <&3
 echo $response
 while [ $i -lt 100 ]
 do
     echo -e ""{ 'execute': 'device_del', 'arguments': {'id': 'net0' }}"">&3 ;
     sleep 3 ;
     read response <&3 ;
     echo ""$i: $response""
     echo -e ""{ 'execute': 'netdev_del', 'arguments': {'id': 'hostnet0' }}"">&3 ;
     sleep 3 ;
     read response <&3 ;
     echo ""$i: $response""
     echo -e ""{'execute':'netdev_add','arguments':{'type':'tap','id':'hostnet0','vhost':'on','script':'/etc/qemu-ifup','queues':'4'}}"">&3 ;
     sleep 3 ;
     read response <&3
     echo ""$i: $response""
     echo -e ""{'execute':'device_add','arguments':{'driver':'virtio-net-pci','id':'net0','mac':'00:1a:4a:42:0b:01','netdev':'hostnet0','mq':'on','vectors':'10'}}"">&3 ;
     sleep 3 ;
     read response <&3
     echo ""$i: $response""
     let i=$i+1
 done
​​";3. there is no any error during hotunplug/hotplug loop;;RedHatEnterpriseLinux7/RHEL7-99272
3130;;;;;;;;;4;"4. Check if new interface gets ip address and can ping guest new ip from host
 guest) # ipconfig -all
 host) # ping $guest_ip";4. after 10 times loop, network can work normally.;;RedHatEnterpriseLinux7/RHEL7-99272
3131;RHEL7-99273;[virtio-win][netkvm] Ping flood guest;[virtio-win][netkvm] Ping flood guest;Yu Wang (wyu);High;Positive;Not Automated;420563;1;"steps:
 1. start guest w/ virtio-net-pci
 CLI: -netdev tap,script=/etc/qemu-ifup,downscript=no,id=hostnet1,vhost=on,queues=4 \
 -device virtio-net-pci,netdev=hostnet1,id=net1,mac=00:52:11:36:3f:00,bus=pci.0,mq=on,vectors=10
​​";1. Guest could boot up successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-99273
3131;;;;;;;;;2;"2. check whether netkvm.sys verifier enabled in guest:
     #verifier /querysettings (run as administrator)
     If No ,enabled netkvm.sys verifier:
     #verifier.exe /standard /driver netkvm.sys  (run as administrator)
     then reboot the guest and recheck
     #verifier /querysettings";"2. All the Standards flags are checked ,the verified driver fields shows ""netkvm.sys""";;RedHatEnterpriseLinux7/RHEL7-99273
3131;;;;;;;;;3;"3. open 20 cmd windows,in each cmd run following command:
    # ping www.baidu.com -t -f
​​";3. after 10mins network can do flood ping for a long time without any error;;RedHatEnterpriseLinux7/RHEL7-99273
3132;RHEL7-99274;[driver][vhostuser][tx_queue_size] check tx_queue_size and rx_queue_size on vhostuser interface on guest - bug 1484234;"for vhost-user, we allow tx queue size to be greater than 256, for vhost-kernel, we don't allow more than 256."" this is kernel limitation. ";Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"1. start the guest with vhostuser interface with tx_queue_size
 # virsh dumpxml rhel7.4
    <interface type='vhostuser'>
       <source type='unix' path='/var/run/openvswitch/vhost-user1' mode='client'/>
       <model type='virtio'/>
       <driver name='qemu' queues='5' rx_queue_size='1024' tx_queue_size='1024'/>
     </interface>
 
 # virsh start rhel7.4";Domain rhel7.4 started;Test Case;RedHatEnterpriseLinux7/RHEL7-99274
3132;;;;;;;;;2;"2. # virsh dumpxml rhel7.4 | grep /interface -B8
​​";"    <interface type='vhostuser'>
       <mac address='52:54:00:93:51:db'/>
       <source type='unix' path='/var/run/openvswitch/vhost-user1' mode='client'/>
       <model type='virtio'/>
       <driver name='qemu' queues='5' rx_queue_size='1024' tx_queue_size='1024'/>
       <link state='up'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-99274
3132;;;;;;;;;3;"# ps aux | grep qemu-kvm| grep -v grep|sed ""s/-device/\n-device/g"" | grep virtio-net-pci";"-device virtio-net-pci,mq=on,vectors=12,rx_queue_size=1024,tx_queue_size=1024,netdev=hostnet0,id=net0,mac=52:54:00:93:51:db,bus=pci.0,addr=0x3 -netdev tap,fd=25,id=hostnet1 
​​";;RedHatEnterpriseLinux7/RHEL7-99274
3132;;;;;;;;;4;"login guest and check 
 # ethtool -g eth0";"# ethtool -g eth0
 Ring parameters for eth0:
 Pre-set maximums:
 RX: 1024
 RX Mini: 0
 RX Jumbo: 0
 TX: 1024
 Current hardware settings:
 RX: 1024
 RX Mini: 0
 RX Jumbo: 0
 TX: 1024";;RedHatEnterpriseLinux7/RHEL7-99274
3132;;;;;;;;;5;"3. attach an interface other than vhostuser type with tx_queue_ size set to 1024
 
 # cat inter.xml
   <interface type='network'>
       <model type='virtio'/>
       <source network='default'/>
       <driver name='vhost' queues='5' rx_queue_size='1024' tx_queue_size='1024'>
       </driver>
     </interface>
 
 # virsh attach-device rhel7.4 inter.xml
​​";"attach succeed and the dumpxml output with correct setting:
  
​​";;RedHatEnterpriseLinux7/RHEL7-99274
3132;;;;;;;;;6;4. # virsh dumpxml rhel7.4 | grep /interface -B8;" <interface type='network'>
       <mac address='52:54:00:b3:f2:bb'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <driver name='vhost' queues='5' rx_queue_size='1024' tx_queue_size='1024'/>
       <alias name='net2'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0b' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-99274
3132;;;;;;;;;7;# ethtool -g eth1;"Ring parameters for eth1:
 Pre-set maximums:
 RX: 1024
 RX Mini: 0
 RX Jumbo: 0
 TX: 256
 Current hardware settings:
 RX: 1024
 RX Mini: 0
 RX Jumbo: 0
 TX: 256


 the tx_queue_size may work only for a subset of interface types,
 e.g. aforementioned QEMU enables this option only for vhostuser type.";;RedHatEnterpriseLinux7/RHEL7-99274
3133;RHEL7-99281;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: With ldapsearch base and with ldap user search base specified;With ldapsearch base and with ldap user search base specified;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99281
3134;RHEL7-99283;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Set passwordMaxAge to 24 hours bz748856;Set passwordMaxAge to 24 hours bz748856;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99283
3135;RHEL7-99284;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Set passwordMaxAge to 1;Set passwordMaxAge to 1;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99284
3136;RHEL7-99285;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Display last grace login bz954323; Display last grace login bz954323;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99285
3137;RHEL7-99286;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Password expiration policies are not being enforced by SSSD bz1146198 bz1144011;Password expiration policies are not being enforced by SSSD bz1146198 bz1144011;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99286
3138;RHEL7-99287;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Create a ou set to netgroup and nisNetgroupTriple; Create a ou set to netgroup and nisNetgroupTriple;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99287
3139;RHEL7-99288;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Decrease the cache time out and add new entry for nisNetgroupTriple;"Decrease the cache time out and add new entry for nisNetgroupTriple

";Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99288
3140;RHEL7-99289;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Create multiple netgroups;Create multiple netgroups;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99289
3141;RHEL7-99290;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Adding memberNisNetgroup;Adding memberNisNetgroup;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99290
3142;RHEL7-99291;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Adding dn to memberNisNetgroup;Adding dn to memberNisNetgroup;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99291
3143;RHEL7-99292;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Using different syntax for nisNetgroupTriple; Using different syntax for nisNetgroupTriple;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99292
3144;RHEL7-99293;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: With just host and domain info;With just host and domain info;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99293
3145;RHEL7-99294;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: netgroups with nested loop;netgroups with nested loop;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99294
3146;RHEL7-99295;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: sssd returns empty netgroup at a second request for an non existing netgroup bz785888;sssd returns empty netgroup at a second request for an non existing netgroup bz785888;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99295
3147;RHEL7-99296;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: getent netgroup hangs when use fully qualified names set to TRUE bz802207;getent netgroup hangs when use fully qualified names set to TRUE bz802207;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99296
3148;RHEL7-99297;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: ldap search base dose not fully limit the group search base bz785908; ldap search base dose not fully limit the group search base bz785908;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99297
3149;RHEL7-99299;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: ldap search base dose not fully limit the Netgroup search base bz785908;ldap search base dose not fully limit the Netgroup search base bz785908;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99299
3150;RHEL7-99300;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Raise limits for max num of files sssd nss or sssd pam can use bz799929;Raise limits for max num of files sssd nss or sssd pam can use bz799929;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99300
3151;RHEL7-99301;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Enable midway cache refresh by default bz785898;Enable midway cache refresh by default bz785898;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99301
3152;RHEL7-99303;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: netgroups do not honor entry cache nowait percentage bz822236; netgroups do not honor entry cache nowait percentage bz822236;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99303
3153;RHEL7-99304;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Honour TTL when resolving host names bz785884; Honour TTL when resolving host names bz785884;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99304
3154;RHEL7-99305;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Crash with netgroup lookup after cache lifetime bz682807;Crash with netgroup lookup after cache lifetime bz682807;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99305
3155;RHEL7-99306;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: id command shows recently deleted users bz678410 bz894381;id command shows recently deleted users bz678410 bz894381;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99306
3156;RHEL7-99307;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: debug timestamps equals to 1 is not passed to providers bz785909;debug timestamps equals to 1 is not passed to providers bz785909;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99307
3157;RHEL7-99308;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Thread issue can cause the application to not get any identity information bz847043; Thread issue can cause the application to not get any identity information bz847043;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99308
3158;RHEL7-99310;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Warn to syslog when dereference requests fail bz799009;Warn to syslog when dereference requests fail bz799009;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99310
3159;RHEL7-99311;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: sss debuglevel help should not list debug bz799039;sss debuglevel help should not list debug bz799039;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99311
3160;RHEL7-99312;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: SSSD will sometimes lose groups from the cache bz649286;SSSD will sometimes lose groups from the cache bz649286;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99312
3161;RHEL7-99313;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: sssd be crashes when resolving non trivial nested group structure bz801533;sssd be crashes when resolving non trivial nested group structure bz801533;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99313
3162;RHEL7-99314;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: getent passwd username returns nothing if its uidNumber gt 2147483647 bz645449; getent passwd username returns nothing if its uidNumber gt 2147483647 bz645449;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99314
3163;RHEL7-99315;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: SSSD starts multiple processes due to syntax error in ldap uri bz869466;SSSD starts multiple processes due to syntax error in ldap uri bz869466;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99315
3164;RHEL7-99316;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Verify when nesting limit is reached bz790848 bz894997; Verify when nesting limit is reached bz790848 bz894997;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99316
3165;RHEL7-99317;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: SSSD fails to store users if any of the requested attribute is empty bz842842;SSSD fails to store users if any of the requested attribute is empty bz842842;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99317
3166;RHEL7-99339;ALIYUN-TC: Verify all packages are signed with GPG key;ALIYUN-TC: Verify all packages are signed with GPG key;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"# rpm -qa --qf '%{name}-%{version}-%{release}.%{arch} (%{SIGPGP:pgpsig})\n' | grep -v ""Key ID""
"; There's no output;Test Case;RedHatEnterpriseLinux7/RHEL7-99339
3167;RHEL7-99340;ALIYUN-TC: Check the hostname;ALIYUN-TC: Check the hostname;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;Login the VM and check if the hostname is the same as what it is set.;The hostname is the same as what it is set.;Test Case;RedHatEnterpriseLinux7/RHEL7-99340
3167;;;;;;;;;2;"Change hostname from UI(or cli), then restart VM from outside.
 Login and check if the hostname is changed";The hostname is changed to the new one;;RedHatEnterpriseLinux7/RHEL7-99340
3168;RHEL7-99341;ALIYUN-TC: Check the /etc/redhat-release file contains a correct release version;ALIYUN-TC: Check the /etc/redhat-release file contains a correct release version;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"# cat /etc/redhat-release
​​";"Should have a correct release version according to the image release
  
 Red Hat Enterprise Linux Server release 7.4 (Maipo)
";Test Case;RedHatEnterpriseLinux7/RHEL7-99341
3169;RHEL7-99342;ALIYUN-TC: Check the boot messages with no errors;ALIYUN-TC: Check the boot messages with no errors;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;" # cat /var/log/messages
​​";" There's no error messages.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-99342
3170;RHEL7-99343;ALIYUN-TC: Check kvm pv drivers in VM;ALIYUN-TC: Check kvm pv drivers in VM;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;" # lsmod|grep virtio
​​";"virtio_balloon         13834  0 
 virtio_net             28024  0 
 virtio_console         28115  1 
 virtio_blk             18156  2 
 virtio_pci             22913  0 
 virtio_ring            21524  5 virtio_blk,virtio_net,virtio_pci,virtio_balloon,virtio_console
 virtio                 15008  5 virtio_blk,virtio_net,virtio_pci,virtio_balloon,virtio_console
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-99343
3171;RHEL7-99346;ALIYUN-TC: Start a VM;ALIYUN-TC: Start a VM;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Click the ""Start"" button on portal
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99346
3171;;;;;;;;;2;"Check the VM status after seconds.
 2.1 On the portal, check the the ""status"" value.
 2.2 Access the VM with ssh and check the VM works properly
 # ssh $USER@$VM_IP_ADDR
 # uptime";"2.1 The status becomes ""Running""
 2.2 # ssh $USER@$VM_IP_ADDR
      # uptime
 01:09:53 up 12 min,  1 user,  load average: 0.04, 0.13, 0.13
";;RedHatEnterpriseLinux7/RHEL7-99346
3172;RHEL7-99347;ALIYUN-TC: Create VM with 48C 1T mem (large -memory ECSs support only RHEL7.2);ALIYUN-TC: Create VM with 48C 1T mem (large -memory ECSs support only RHEL7.2);Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99347
3173;RHEL7-99348;ALIYUN-TC: Stop a VM;ALIYUN-TC: Stop a VM;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Click the More... -> Stop on portal, and select ""Stop""";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99348
3173;;;;;;;;;2;"2.1 On the portal, check the the ""status"" value.
 2.2 Try to access to the VM with ssh
 # ssh $USER@$VM_IP_ADDR";"2.1 The status becomes ""Stopped""
 2.2 Cannot access to the VM through ssh
​​";;RedHatEnterpriseLinux7/RHEL7-99348
3173;;;;;;;;;3;"3. Start the VM. Then Click the More... -> Stop on portal, and select ""Force Stop""
 Repeat step2.";"2.1 The status becomes ""Stopped""
 2.2 Cannot access to the VM through ssh";;RedHatEnterpriseLinux7/RHEL7-99348
3174;RHEL7-99349;ALIYUN-TC: Reboot inside VM;ALIYUN-TC: Reboot inside VM;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Reboot VM inside the guest:
 # sudo reboot";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99349
3174;;;;;;;;;2;"Wait for running. Login.
 Check /var/log/messages";"Can login the VM after reboot.
 There's no error logs in the messages";;RedHatEnterpriseLinux7/RHEL7-99349
3175;RHEL7-99350;ALIYUN-TC: Restart VM;ALIYUN-TC: Restart VM;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Click the More...->Restart on portal and select ""Restart""
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99350
3175;;;;;;;;;2;"Check the VM status.
 2.1 On the portal, check the the ""status"" value.
 2.2 Access the VM with ssh
 # ssh $USER@$VM_IP_ADDR
​​";"2.1 The VM status changes as ""Restarting"" -> ""Running"".
 2.2 # ssh  $USER@$VM_IP_ADDR
     $ uptime
     01:17:54 up 2 min,  1 user,  load average: 0.14, 0.20, 0.09 ";;RedHatEnterpriseLinux7/RHEL7-99350
3175;;;;;;;;;3;"Click the More...->Restart on portal and select ""Force Restart"". Then repeat step 2.";"2.1 The VM status changes as ""Restarting"" -> ""Running"".
 2.2 # ssh  $USER@$VM_IP_ADDR
     $ uptime
     01:17:54 up 2 min,  1 user,  load average: 0.14, 0.20, 0.09";;RedHatEnterpriseLinux7/RHEL7-99350
3176;RHEL7-99351;ALIYUN-TC: Delete VM;ALIYUN-TC: Delete VM;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Select the VM and click ""Delete"" button on portal
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99351
3176;;;;;;;;;2;"Check the VM status
 2.1 On the portal, the VM is deleted, doesn't exist.
 2.2 Try to access to the VM with ssh
 # ssh $USER@$VM_IP_ADDR
​​";"2.1 The VM doesn't exist any more.
 2.2 Cannot access to the VM through ssh.
​​";;RedHatEnterpriseLinux7/RHEL7-99351
3177;RHEL7-99352;ALIYUN-TC: Modify ECS instance type;ALIYUN-TC: Modify ECS instance type;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;Prepare a ecs.n1.tiny ECS on aliyun. And stop it.;"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-99352
3177;;;;;;;;;2;"Modify ECS instance type to ecs.n1.medium through aliyuncli:
 # aliyuncli ecs ModifyInstanceSpec --InstanceId i-rj91d9u1g5nxke8gxmt7 --InstanceType ecs.n1.medium";​​;;RedHatEnterpriseLinux7/RHEL7-99352
3177;;;;;;;;;3;"Start the ECS and check the CPU and memory.
​​";"The ECS is modified to the new instance type. The CPU and memory are correct.
​​";;RedHatEnterpriseLinux7/RHEL7-99352
3178;RHEL7-99355;ALIYUN-TC: Register the VM to the subscription service;ALIYUN-TC: Register the VM to the subscription service;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;" 1. Login into the VM and register the guest to subscription-manager
 1.1 # subscription-manager register --auto-attach --username YourUsername --password YourPassword (YourUsername and YourPassword can be got in https://mojo.redhat.com/docs/DOC-97363 )
 1.2 # subscription-manager list --available
 1.3 # subscription-manager attach --pool=PoolID(PoolID please check available subscription list)
 1.4 # subscription-manager list --consumed";" Can execute all these commands without error.
 1.1 Can register your VM to Red Hat Subscription Management.
 1.2 Can list all the available subscriptions.
 1.3 Successfully attached the subscription.
 1.4 Can list all the consumed subscriptions.(Employee SKU and the subscription of your PoolID)";Test Case;RedHatEnterpriseLinux7/RHEL7-99355
3178;;;;;;;;;2;"2. Check the guest profile is available in subscription-manager:
 2.1 Login https://access.redhat.com/management/consumers?type=system , type your VM ID(shown when you register your VM) or the VM's hostname in the Filter.
 (Or directly access to https://access.redhat.com/management/consumers/<Your Register ID> )
 2.2 Click the VM's name link.";"2.1 Can find your VM in the list.
 2.2 Can show the subscription detail infomations.";;RedHatEnterpriseLinux7/RHEL7-99355
3178;;;;;;;;;3;"3. Check if yum install/remove works well
 # yum install expect
 # yum remove expect"; Can install and remove expect package;;RedHatEnterpriseLinux7/RHEL7-99355
3178;;;;;;;;;4;"4. Remove pool and unregister
 4.1 # subscription-manager remove --all
 4.2 # subscription-manager unregister";"4.1 All the consumed subscriptions are removed at the server. All the local certificates are deleted.
 # subscription-manager list --consumed
 No consumed subscription pools to list
 4.2 Your VM is unregistered.";;RedHatEnterpriseLinux7/RHEL7-99355
3179;RHEL7-99356;ALIYUN-TC: Check RHEL Server product certificate;ALIYUN-TC: Check RHEL Server product certificate;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Check the RHEL Server product certificate under /etc/pki/product/
 # openssl x509 -in /etc/pki/product-default/69.pem -noout -text";"Certificate file exists. Can show certificate informations.
";Test Case;RedHatEnterpriseLinux7/RHEL7-99356
3180;RHEL7-99357;ALIYUN-TC: Get updates/install packages from RHUI;ALIYUN-TC: Get updates/install packages from RHUI;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1; Yum install/update could work; yum works well;Test Case;RedHatEnterpriseLinux7/RHEL7-99357
3181;RHEL7-99360;ALIYUN-TC: Check the new account created with cloud-init;ALIYUN-TC: Check the new account created with cloud-init;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Access the VM with ""cloud-user"" account and the ssh key.
";"Can access to the VM with ""cloud-user"" account with ssh key.
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-99360
3182;RHEL7-99361;ALIYUN-TC: Access the VM with  ssh key;ALIYUN-TC: Access the VM with ssh key;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Access the VM with ""root"" account and the ssh key.";"Can access to the VM with ""root"" account and ssh key.";Test Case;RedHatEnterpriseLinux7/RHEL7-99361
3183;RHEL7-99362;ALIYUN-TC: Access the VM with password;ALIYUN-TC: Access the VM with password;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Access the VM with ""root""account and password";"Can access to the VM with ""root"" account and password";Test Case;RedHatEnterpriseLinux7/RHEL7-99362
3184;RHEL7-99365;ALIYUN-TC: Remote login to VM from WebUI;ALIYUN-TC: Remote login to VM from WebUI;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Click ""Remote Login"" on portal
​​";"Can open the VNC window and see the VM console
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-99365
3184;;;;;;;;;2;"Input some strings with keyboard and check.
​​";"The strings can be shown in the console. Can interact with it.
​​";;RedHatEnterpriseLinux7/RHEL7-99365
3185;RHEL7-99368;ALIYUN-TC: Check NUMA node inside the VM ( large vCPUs flavor ? );Check NUMA node inside the VM ( large vCPUs flavor ? );Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"1. Configure the guest vCPU or Memory exceed the NUMA node maximum.
 Guest NUMA topology :
 On a single NUMA node:
     Maximum mumber of processors: 4
     Maximum amount of memory(MB): 1024
 Guest vCPU : 8 Virtual processors
 Guest Memory : 2048 MB";"1. numactl shows correct information and without any call trace in dmesg.
 e.g. # numactl --hardware
 available: 2 nodes (0-1)
 node 0 cpus: 0 1 2 3
 node 0 size: 1023 MB
 node 0 free: 702 MB
 node 1 cpus: 4 5 6 7
 node 1 size: 1024 MB
 node 1 free: 878 MB
 node distances:
 node   0   1 
   0:  10  20 
   1:  20  10";Test Case;RedHatEnterpriseLinux7/RHEL7-99368
3185;;;;;;;;;2;2.  numactl --hardware to check details information;​​;;RedHatEnterpriseLinux7/RHEL7-99368
3185;;;;;;;;;3;3. Check the dmesg without any call trace;​​;;RedHatEnterpriseLinux7/RHEL7-99368
3186;RHEL7-99371;ALIYUN-TC: Start a VM with GPU card;ALIYUN-TC: Start a VM with GPU card;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99371
3187;RHEL7-99374;ALIYUN-TC: Check 82599 nic passthrough ( Disk-intensive and large memory ECSs use p...;ALIYUN-TC: Check 82599 nic passthrough ( Disk-intensive and large memory ECSs use passthrough NICs );Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99374
3188;RHEL7-99375;ALIYUN-TC: Hogplug 11 NICs to VM ( limitation );ALIYUN-TC: Hogplug 11 NICs to VM ( limitation );Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;" Start the VM. Ensure the VM status is running.
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99375
3188;;;;;;;;;2;"Change to ""NIC"" tab and click ""Add NIC"" button to attach NIC. Repeat several times until the portal shows ""You can add 0 more NICs.""";These NICs are shown on portal.;;RedHatEnterpriseLinux7/RHEL7-99375
3188;;;;;;;;;3;"Access to the VM. Check the NICs.
 # ip addr";All the NICs can be seen inside the VM.;;RedHatEnterpriseLinux7/RHEL7-99375
3188;;;;;;;;;4;"Add a ifcfg-ethx file for the NIC and up it. Check the IP address
​​";"# ifup ethx
 Can up the NIC. The IP address is what it is shown on portal
​​";;RedHatEnterpriseLinux7/RHEL7-99375
3188;;;;;;;;;5;"Ping this NIC IP from other VMs in the same subnet
​​";"Can ping to this NIC from other VMs in the same subnet
​​";;RedHatEnterpriseLinux7/RHEL7-99375
3188;;;;;;;;;6;"Detach a NIC when the VM is running. Check the portal, and the NIC status inside the VM
​​";"Can detach the NIC on portal. 
 # ip addr
 The NIC is removed inside the VM.
​​";;RedHatEnterpriseLinux7/RHEL7-99375
3189;RHEL7-99376;ALIYUN-TC: Attach 12 NICs to VM ( limitation );ALIYUN-TC: Attach 12 NICs to VM ( limitation );Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;" Stop the VM
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99376
3189;;;;;;;;;2;"Change to ""NIC"" tab and click ""Add NIC"" button to attach NIC(in subnetA). Repeat several times until the portal shows ""You can add 0 more NICs."" 
 * Put one of the NICs(NIC-B) into subnetB.
​​";"These NICs are shown on portal.
​​";;RedHatEnterpriseLinux7/RHEL7-99376
3189;;;;;;;;;3;"Click ""Add NIC"" 1 more time.";"Cannot attach more NICs. There's error message ""The number of NICs has reached the upper limit.""
​​";;RedHatEnterpriseLinux7/RHEL7-99376
3189;;;;;;;;;4;"Start the VM.
 Access to the VM. Check the NICs.
 # ip addr";"All the NICs can be seen inside the VM.
 All the NICs can get IP through DHCP.
​​";;RedHatEnterpriseLinux7/RHEL7-99376
3189;;;;;;;;;5;"From another VM(NIC in subnetB) ping NIC-B IP.
​​";"Can ping to the NIC-B IP.
​​";;RedHatEnterpriseLinux7/RHEL7-99376
3190;RHEL7-99377;ALIYUN-TC: Check the opening ports of the VM (security group);ALIYUN-TC: Check the opening ports of the VM (security group);Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Only allow Inbound TCP port 22 in the Security Group.
 Configure smtp that listen to all addresses:
 vi /etc/postfix/main.cf
 inet_interfaces = all
 service postfix restart
​​";"# netstat -antp|grep master
 tcp        0      0 0.0.0.0:25              0.0.0.0:*               LISTEN      2805/master        ";Test Case;RedHatEnterpriseLinux7/RHEL7-99377
3190;;;;;;;;;2;" Check the endpoints inside the VM
 # nmap 127.0.0.1";" # nmap 127.0.0.1

 Starting Nmap 6.40 ( http://nmap.org ) at 2016-02-02 04:26 EST
 Nmap scan report for localhost (127.0.0.1)
 Host is up (0.0000050s latency).
 Not shown: 998 closed ports
 PORT   STATE SERVICE
 22/tcp open  ssh
 25/tcp open  smtp

 Nmap done: 1 IP address (1 host up) scanned in 0.13 seconds";;RedHatEnterpriseLinux7/RHEL7-99377
3190;;;;;;;;;3;"Check the endpoints outside the VM
 # nmap VM_IP_ADDR";"# nmap esu-rhel72-a7.cloudapp.net

 Starting Nmap 6.40 ( http://nmap.org ) at 2016-02-02 17:27 CST
 Nmap scan report for esu-rhel72-a7.cloudapp.net (104.41.156.19)
 Host is up (0.015s latency).
 Not shown: 994 filtered ports
 PORT      STATE  SERVICE
 22/tcp    open   ssh
 25/tcp    closed smtp
 135/tcp   closed msrpc
 139/tcp   closed netbios-ssn
 445/tcp   closed microsoft-ds
 10000/tcp closed snet-sensor-mgmt

 Nmap done: 1 IP address (1 host up) scanned in 17.83 seconds";;RedHatEnterpriseLinux7/RHEL7-99377
3191;RHEL7-99378;ALIYUN-TC: Check VF/PF is pass-throughed to the VM ( SR-IOV is enabled by Disk-inte...;ALIYUN-TC: Check VF/PF is pass-throughed to the VM ( SR-IOV is enabled by Disk-intensive );Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;# ll /sys/class/net/eth0/device/driver;" SR-IOV:
 # ll /sys/class/net/eth0/device/driver
 lrwxrwxrwx 1 root root 0 Jan 24 21:52 /sys/class/net/eth0/device/driver -> ../../../bus/pci/drivers/ixgbevf";Test Case;RedHatEnterpriseLinux7/RHEL7-99378
3192;RHEL7-99381;ALIYUN-TC: Start VM with a new disk attached;ALIYUN-TC: Start VM with a new disk attached;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;" Stop the VM. Ensure the VM status is ""Stopped""
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99381
3192;;;;;;;;;2;"Click ""Attach Disk"" button in the ""EVS"" tab
 Click the ""Create disk"" link at the bottom of the popped window
 Create a new volume in the same AZ with the VM. Disk type is ""Common""
 Go back to Attach Disk window, select this disk and click ""Confirm"" button
 Repeat this step to create 3 volumes, disk types are ""Common"",""High"",""Ultra-high"" I/0. Sizes are 50G, 1023G, 3000G
​​";"Can attach disk. 
 The volume is shown on portal
​​";;RedHatEnterpriseLinux7/RHEL7-99381
3192;;;;;;;;;3;"Login the VM and check the new disk properties.
 # fdisk -l 
​​";"There should be three new disks: sdc, sdd, sde, and the sizes should be 50G, 1023G, 3000G.
 * the bytes numbers in fdisk are correct. The GB numbers echo bytes numbers/10^9.";;RedHatEnterpriseLinux7/RHEL7-99381
3192;;;;;;;;;4;"Format the disk and mount.
 # fdisk /dev/sdc
 # mkfs.ext4 /dev/sdc1
 # mkdir /mnt/newdisk1
 # mount /dev/sdc1 /mnt/newdisk1

 # fdisk /dev/sdd
 # mkfs.ext3 /dev/sdd1
 # mkdir /mnt/newdisk2
 # mount /dev/sdd1 /mnt/newdisk2

 # fdisk /dev/sde
 # mkfs.xfs /dev/sde1
 # mkdir /mnt/newdisk3
 # mount /dev/sde1 /mnt/newdisk3";​​;;RedHatEnterpriseLinux7/RHEL7-99381
3192;;;;;;;;;5;"Check if the disk can read and write. For each disk, do the following manipulations.
 # cd /mnt/newdisk1
 # touch test
 # vi test
 # cat test
 # cp test test1
 # rm -rf test1";All the read and write manipulations work well.;;RedHatEnterpriseLinux7/RHEL7-99381
3193;RHEL7-99382;ALIYUN-TC: Online attach a new disk;ALIYUN-TC: Online attach a new disk;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Start the VM. Ensure the VM status is ""Running""
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99382
3193;;;;;;;;;2;"Attach a new disk
​​";"Can attach the new disk
​​";;RedHatEnterpriseLinux7/RHEL7-99382
3193;;;;;;;;;3;"Format the disk and mount. Check if the disk can read and write.
​​";All the read and write manipulations work well.;;RedHatEnterpriseLinux7/RHEL7-99382
3194;RHEL7-99383;ALIYUN-TC: Online attach an existing disk;ALIYUN-TC: Online attach an existing disk;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;"Start the VM. Ensure the VM status is ""Running""";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99383
3194;;;;;;;;;2;Attach an existing disk;​​;;RedHatEnterpriseLinux7/RHEL7-99383
3194;;;;;;;;;3;Format the disk and mount. Check if the disk can read and write.;All the read and write manipulations work well.;;RedHatEnterpriseLinux7/RHEL7-99383
3195;RHEL7-99384;ALIYUN-TC: Online detach a disk;ALIYUN-TC: Online detach a disk;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;" Start the VM. Ensure the VM status is ""Running""";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99384
3195;;;;;;;;;2;"Detach a disk
​​";"The disk is detached on portal
​​";;RedHatEnterpriseLinux7/RHEL7-99384
3195;;;;;;;;;3;Login the VM and check the disk properties.;"# fdisk -l /dev/sdc
 # fdisk: cannot open /dev/sdc: No such file or directory";;RedHatEnterpriseLinux7/RHEL7-99384
3196;RHEL7-99385;ALIYUN-TC: Attach 16 disks to VM;ALIYUN-TC: Attach 16 disks to VM;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99385
3197;RHEL7-99386;ALIYUN-TC: Start VM with 1 system EVS disk and 24 local data disk attached (only d1.8xlarge);ALIYUN-TC: Start VM with 1 system EVS disk and 24 local data disk attached ( only for disk-intensive ECS );Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;" Create an EVS of d1.8xlarge type
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99386
3197;;;;;;;;;2;"Login and check the disk properties.
 # fdisk -l
​​";"There're 24 disks
 All the read and write manipulations in these disks work well.";;RedHatEnterpriseLinux7/RHEL7-99386
3198;RHEL7-99389;ALIYUN-TC: Check timedrift inside the VM after repeated reboot;ALIYUN-TC: Check timedrift inside the VM after repeated reboot;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;" Prerequisite:
 # systemctl stop ntpd
 # systemctl disable ntpd
 # systemctl stop chronyd
 # systemctl disable chronyd
 # timedatectl set-ntp 0
 1. Check the system clock with ntp server. Get the offset
 ${offset_before_reboot}
 # ntpdate -q de.ntp.org.cn
 (Backup NTP server: 1.de.pool.ntp.org)";" The guest's clock should be accurate. There is no time drift or very slight drift.
 # ntpdate -q de.ntp.org.cn
 server 52.6.160.3, stratum 2, offset 0.038528, delay 0.02786
 server 69.164.202.202, stratum 3, offset 0.036582, delay 0.05830
 server 104.232.3.3, stratum 2, offset 0.034004, delay 0.07957
 server 67.18.187.111, stratum 3, offset 0.038833, delay 0.05818
 28 Dec 10:27:49 ntpdate[3107]: adjust time server 52.6.160.3 offset 0.038528 sec";Test Case;RedHatEnterpriseLinux7/RHEL7-99389
3198;;;;;;;;;2;"reboot the guest at least 3  times. (or execute"" sh reboot.sh"")";​​;;RedHatEnterpriseLinux7/RHEL7-99389
3198;;;;;;;;;3;"Start the guest. Compare the clock with ntp server.Get the offset
 ${offset_after_reboot}
 # ntpdate -q de.ntp.org.cn
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99389
3198;;;;;;;;;4;"Compute the time drift with the offset values in step1&3.
 ${time-drift}= ${offset_after_reboot}-${offset_before_reboot}";There is no time drift or very slight drift.;;RedHatEnterpriseLinux7/RHEL7-99389
3199;RHEL7-99390;ALIYUN-TC: Check timedrift inside the VM with high CPU load;ALIYUN-TC: Check timedrift inside the VM with high CPU load;Yuxin Sun (yuxisun);Medium;Positive;Not Automated;;1;" Prerequisite:
 # systemctl stop ntpd
 # systemctl disable ntpd
 # systemctl stop chronyd
 # systemctl disable chronyd
 # timedatectl set-ntp 0
 1.Check the system clock with ntp server. Get the offset
 ${offset_before_add_cpu_load}
 # ntpdate -q  de.ntp.org.cn";" The guest's clock should be accurate. There is no time drift or very slight
 drift.";Test Case;RedHatEnterpriseLinux7/RHEL7-99390
3199;;;;;;;;;2;"Run stress tool in the guest to give the high CPU load. And running the guest with 1 hour.
 # timeout 1h stress -c ${vCPU_number-1}";​​;;RedHatEnterpriseLinux7/RHEL7-99390
3199;;;;;;;;;3;"Compare the clock with ntp server.Get the offset
 ${offset_after_add_cpu_load_1_hour}
 # ntpdate -q  de.ntp.org.cn";​​;;RedHatEnterpriseLinux7/RHEL7-99390
3199;;;;;;;;;4;"Compute the time drift with the offset values in step1&amp;3.
 ${time-drift}=
 ${offset_after_add_cpu_load_1_hour}-${offset_before_add_cpu_load}";​​;;RedHatEnterpriseLinux7/RHEL7-99390
3200;RHEL7-99413;[attach-device][mtu] hotplug with malformed mtu size or to interface type not supported;check if there is any unexpected.;Yalan Zhang (yalzhang);Medium;Negative;Automated;;1;"use malformed mtu size
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99413
3200;;;;;;;;;2;"1. 'sdfg""
 # cat interface.xml
 <interface type='network'>
 <source network='default'/>
 <model type='virtio'/>
 <mtu size='sdfg'/>
 </interface>
 
 # virsh attach-device rhel7.4 interface.xml --persistent";"error: Failed to attach device from interface.xml
 error: XML error: malformed mtu size
​​";;RedHatEnterpriseLinux7/RHEL7-99413
3200;;;;;;;;;3;"2. ""-1""
 # cat interface.xml
 <interface type='network'>
 <source network='default'/>
 <model type='virtio'/>
 <mtu size='-1'/>
 </interface>
 
 # virsh attach-device rhel7.4 interface.xml";"error: Failed to attach device from interface.xml
 error: XML error: malformed mtu size";;RedHatEnterpriseLinux7/RHEL7-99413
3200;;;;;;;;;4;"3. ""99999999""
 # cat interface.xml
 <interface type='network'>
 <source network='default'/>
 <model type='virtio'/>
 <mtu size='99999999'/>
 </interface>
 
 # virsh attach-device rhel7.4  interface.xml";"error: Failed to attach device from interface.xml
 error: Cannot set interface MTU on 'vnet0': Invalid argument";;RedHatEnterpriseLinux7/RHEL7-99413
3200;;;;;;;;;5;"other interface type
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99413
3200;;;;;;;;;6;"1. # cat direct.xml
 <interface type='direct'>
 <source dev='enp0s25' mode='bridge'/>
 <model type='virtio'/>
 <mtu size='9000'/>
 </interface>
 
 # virsh attach-device rhel7.4  direct.xml
​​";"error: Failed to attach device from direct.xml
 error: unsupported configuration: setting MTU on interface type direct is not supported yet";;RedHatEnterpriseLinux7/RHEL7-99413
3200;;;;;;;;;7;"2.  # virsh net-dumpxml direct-macvtap
 <network>
   <name>direct-macvtap</name>
   <uuid>556d36b4-70e7-4dc9-8720-6e00f8d77c66</uuid>
   <forward dev='enp0s25' mode='bridge'>
     <interface dev='enp0s25'/>
   </forward>
 </network>
 
 # cat direct2.xml 
 <interface type='network'>
 <source network='direct-macvtap'/>
 <model type='virtio'/>
 <mtu size='9000'/>
 </interface>
 
 # virsh attach-device rhel7.4  direct2.xml
​​";"error: Failed to attach device from direct2.xml
 error: Cannot set interface MTU on 'macvtap0': Invalid argument";;RedHatEnterpriseLinux7/RHEL7-99413
3201;RHEL7-99415;ALIYUN-TC: NIC multi-queue(?);;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;Prepare a VM on aliyun with vCPU>=2;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99415
3201;;;;;;;;;2;"Check combined:
 # ethtool -l eth0";"# ethtool -l eth0
 Channel parameters for eth0:
 Pre-set maximums:
 RX: 0
 TX: 0
 Other: 0
 Combined: 1
 Current hardware settings:
 RX: 0
 TX: 0
 Other: 0
 Combined: 1";;RedHatEnterpriseLinux7/RHEL7-99415
3201;;;;;;;;;3;"Set multi-queue:
 # ethtool -L eth0 combined 2";​​;;RedHatEnterpriseLinux7/RHEL7-99415
3201;;;;;;;;;4;Send traffic, then check(?);​​;;RedHatEnterpriseLinux7/RHEL7-99415
3202;RHEL7-99416;ALIYUN-TC: Check cloud-init services status;ALIYUN-TC: Check cloud-init services status;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"Create a VM on aliyun. Check cloud-init services status:
 # systemctl status cloud-{init-local,init,config,final}";The services status are not failed.;Test Case;RedHatEnterpriseLinux7/RHEL7-99416
3203;RHEL7-99417;ALIYUN-TC: Data disk resize;;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"Prepare a running ECS. Attach an 20G Ultra disk to ECS. Resize the disk size to 30G. Restart ECS. Check data disk size
 # parted /dev/vdb print";The disk size is changed to the new size;Test Case;RedHatEnterpriseLinux7/RHEL7-99417
3203;;;;;;;;;2;"Attach an 20G SSD disk to DCS. Resize to 30G. Restart ECS. Check data disk size
 # parted /dev/vdc pint";The disk size is changed to the new size;;RedHatEnterpriseLinux7/RHEL7-99417
3204;RHEL7-99419;[update-device][bandwidth] update the QoS setting in interface by update-device with big value, negative value, or floor without setting qos in network - bug 1014198 , 1022293 ,1014503,1064770;"check for invalid value for bandwidth, and related negative scenarios.
";Yalan Zhang (yalzhang);Medium;Negative;Not Automated;;1;"1. Negative value of average element
 prepare a vm with below interface
 # virsh dumpxml r6 | grep /interface -B9
 <interface type='network'>
 <mac address='52:54:00:90:06:7a'/>
 <source network='default'/>
 <model type='virtio'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>

 # cat nic.xml
 <interface type='network'>
 <mac address='52:54:00:90:06:7a'/>
 <source network='default'/>
 <model type='virtio'/>
 <bandwidth>
 <inbound average='-1' peak='5000' burst='1024'/>
 </bandwidth>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
 # virsh update-device r6 nic.xml
";"error: Failed to update device from nic.xml
 error: internal error: cannot set bandwidth limits on vnet0";Test Case;RedHatEnterpriseLinux7/RHEL7-99419
3204;;;;;;;;;2;"2. Huge value of average element
 # cat nic.xml
 <interface type='network'>
 <mac address='52:54:00:90:06:7a'/>
 <source network='default'/>
 <model type='virtio'/>
 <bandwidth>
 <inbound average='10000000000000000' peak='5000' burst='1024'/>
 </bandwidth>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>

 # virsh update-device r6 nic.xml
";"error: Failed to update device from nic.xml
 error: internal error: cannot set bandwidth limits on vnet0";;RedHatEnterpriseLinux7/RHEL7-99419
3204;;;;;;;;;3;"3. Remove mandatory attribute average
 # cat nic.xml
 <interface type='network'>
 <mac address='52:54:00:90:06:7a'/>
 <source network='default'/>
 <model type='virtio'/>
 <bandwidth>
 <outbound peak='5000' burst='1024'/>
 </bandwidth>
 ...
 # virsh update-device r6 nic.xml
";"error: Failed to update device from nic.xml
 error: Missing mandatory average or floor attributes";;RedHatEnterpriseLinux7/RHEL7-99419
3204;;;;;;;;;4;"4. ensure the default network has no qos setting by # virsh net-dumpxml default
 # cat net
    <interface type='network'>
       <mac address='00:16:3e:77:e2:ed'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <alias name='net0'/>
 <model type='virtio'/>
  <bandwidth>
       <inbound average='1000' peak='5000' floor='200' burst='1024'/>
       <outbound average='128' peak='256' burst='256'/>
     </bandwidth>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel7.4 net";"error: Failed to update device from net
 error: Operation not supported: Invalid use of 'floor' on interface with MAC address 00:16:3e:77:e2:ed - network 'default' has no inbound QoS set";;RedHatEnterpriseLinux7/RHEL7-99419
3205;RHEL7-99420;"[update-device][driver] update virtio driver attributes ""tx_queue_size"", ""rx_queue_size"", and driver tune options (not support) - bug 1484230";driver attributes do not support update.;Yalan Zhang (yalzhang);High;Negative;Not Automated;;1; driver tune options;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99420
3205;;;;;;;;;2;"1. start a guest with below interface driver options
 # virsh dumpxml rhel7.4 | grep /interface -B8
     <interface type='network'>
       <mac address='52:54:00:96:85:1b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <driver name='vhost' txmode='iothread' ioeventfd='on' event_idx='off'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 # virsh start rhel7.4
 Domain rhel7.4 started";​​;;RedHatEnterpriseLinux7/RHEL7-99420
3205;;;;;;;;;3;"2. prepare a xml as below(change the driver name)
 # cat interface.xml
 <interface type='network'>
       <mac address='52:54:00:96:85:1b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <driver name='qemu' txmode='iothread' ioeventfd='on' event_idx='off'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel7.4 interface.xml";"error: Failed to update device from interface.xml
 error: Operation not supported: cannot modify virtio network device driver attributes";;RedHatEnterpriseLinux7/RHEL7-99420
3205;;;;;;;;;4;"3. prepare a xml with changed txmode='timer' and others do not change
 # cat timer.xml 
 <interface type='network'>
       <mac address='52:54:00:96:85:1b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <driver name='vhost' txmode='timer' ioeventfd='on' event_idx='off'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel7.4  timer.xml";"error: Failed to update device from timer.xml
 error: Operation not supported: cannot modify virtio network device driver attributes
​​";;RedHatEnterpriseLinux7/RHEL7-99420
3205;;;;;;;;;5;"4. with ioeventfd='off'
 # cat ioevent.xml 
 <interface type='network'>
       <mac address='52:54:00:96:85:1b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <driver name='vhost' txmode='iothread' ioeventfd='off' event_idx='off'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel7.4 ioevent.xml";"error: Failed to update device from ioevnet.xml
 error: Operation not supported: cannot modify virtio network device driver attributes
 
​​";;RedHatEnterpriseLinux7/RHEL7-99420
3205;;;;;;;;;6;"5. with event_idx='on'
 # cat idx.xml
 ...
 <driver name='vhost' txmode='iothread' ioeventfd='on' event_idx='off'/>
 ...
 # virsh update-device rhel7.4  idx.xml";"error: Failed to update device from idx.xml
 error: Operation not supported: cannot modify virtio network device driver attributes
 
​​";;RedHatEnterpriseLinux7/RHEL7-99420
3205;;;;;;;;;7;"6. try to delete the setting by xml without the attributes
 no driver setting
 # cat no_driver.xml 
 <interface type='network'>
       <mac address='52:54:00:96:85:1b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel7.4 no_driver.xml";"error: Failed to update device from no_driver.xml
 error: Operation not supported: cannot modify virtio network device driver attributes
 
​​";;RedHatEnterpriseLinux7/RHEL7-99420
3205;;;;;;;;;8;"tx_queue_size and rx_queue_size
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99420
3205;;;;;;;;;9;"live update rx_queue_size or tx_queue_size will report error.
 
 1. start a guest with rx_queue_size and tx_queue_size 
 
 # virsh dumpxml rhel7.4 | grep /interface -B8
     <interface type='vhostuser'>
       <mac address='52:54:00:93:51:db'/>
       <source type='unix' path='/var/run/openvswitch/vhost-user1' mode='client'/>
       <target dev='vhost-user1'/>
       <model type='virtio'/>
       <driver name='vhost' rx_queue_size='1024' tx_queue_size='512'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 prepare a xml with updated rx_queue_size
 # cat interface.xml
 <interface type='vhostuser'>
       <mac address='52:54:00:93:51:db'/>
       <source type='unix' path='/var/run/openvswitch/vhost-user1' mode='client'/>
       <target dev='vhost-user1'/>
       <model type='virtio'/>
       <driver name='vhost' rx_queue_size='512' tx_queue_size='512'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99420
3205;;;;;;;;;10;"2. # virsh update-device rhel7.4  interface.xml
​​";"error: Failed to update device from interface.xml
 error: Operation not supported: cannot modify virtio network device driver attributes";;RedHatEnterpriseLinux7/RHEL7-99420
3205;;;;;;;;;11;"3. # cat interface2.xml
 <interface type='vhostuser'>
       <mac address='52:54:00:93:51:db'/>
       <source type='unix' path='/var/run/openvswitch/vhost-user1' mode='client'/>
       <target dev='vhost-user1'/>
       <model type='virtio'/>
       <driver name='vhost' rx_queue_size='1024' tx_queue_size='1024'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel7.4  interface.xml";"error: Failed to update device from interface2.xml
 error: Operation not supported: cannot modify virtio network device driver attributes";;RedHatEnterpriseLinux7/RHEL7-99420
3206;RHEL7-99421;[update-device][source] update-device to update source network for network type interface;"support update the source network only for the one with linux bridge
";Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"1. prepare the networks as below
 
 the built-in nat network default
 # virsh net-dumpxml default
 <network>
   <name>default</name>
   <uuid>2ff1c458-d6df-46cf-a87d-79ab107813df</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:a8:54:bc'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
     </dhcp>
   </ip>
 </network>
 
 # virsh net-dumpxml host-bridge
 <network>
   <name>host-bridge</name>
   <uuid>599668d1-4fe5-4219-af2c-0805e81378e1</uuid>
   <forward mode='bridge'/>
   <bridge name='br0'/>
 </network>
 
 # virsh net-dumpxml route
 <network>
   <name>route</name>
   <uuid>d411fc4e-4e08-4589-bb3c-c39c2581f6d4</uuid>
   <forward mode='route'/>
   <bridge name='virbr1' stp='on' delay='0'/>
   <mac address='52:54:00:c2:92:60'/>
   <ip address='192.168.100.1'>
     <dhcp>
       <range start='192.168.100.100' end='192.168.100.254'/>
     </dhcp>
   </ip>
 </network>
 
 # virsh net-list 
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     no            yes
  host-bridge          active     no            yes
  route                active     no            yes
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99421
3206;;;;;;;;;2;"2. start a guest point to default network
 # virsh start rhel7.4
 Domain rhel7.4 started
 
 # virsh dumpxml rhel7.4 | grep /interface -B7
​​";"    <interface type='network'>
       <mac address='52:54:00:06:d2:d5'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-99421
3206;;;;;;;;;3;"3.  # brctl show
 
​​";"bridge name bridge id STP enabled interfaces
 br0 8000.1c6f6506bc81 no enp0s25
 virbr0 8000.525400a854bc yes virbr0-nic
 vnet0
 virbr1 8000.525400c29260 yes virbr1-nic";;RedHatEnterpriseLinux7/RHEL7-99421
3206;;;;;;;;;4;"4. update the source network 
 # cat net1.xml
 <interface type='network'>
           <mac address='52:54:00:06:d2:d5'/>
           <target dev='vnet0'/>
     <source network='host-bridge'/>
           <model type='rtl8139'/>
           <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
         </interface>
 
 # virsh update-device rhel7.4 net1.xml";Device updated successfully;;RedHatEnterpriseLinux7/RHEL7-99421
3206;;;;;;;;;5;5. # virsh dumpxml rhel7.4 | grep /interface -B7;"   <interface type='bridge'>
       <mac address='52:54:00:06:d2:d5'/>
       <source network='host-bridge' bridge='br0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-99421
3206;;;;;;;;;6;6. # brctl show;"bridge name bridge id STP enabled interfaces
 br0 8000.1c6f6506bc81 no enp0s25
 vnet0
 virbr0 8000.525400a854bc yes virbr0-nic
 virbr1 8000.525400c29260 yes virbr1-nic
​​";;RedHatEnterpriseLinux7/RHEL7-99421
3206;;;;;;;;;7;7. login guest and restart network service;the guest get public ip in the same range as the host's;;RedHatEnterpriseLinux7/RHEL7-99421
3206;;;;;;;;;8;"8. update source network to be route
 # cat net2.xml
 <interface type='network'>
           <mac address='52:54:00:06:d2:d5'/>
           <target dev='vnet0'/>
     <source network='route'/>
           <model type='rtl8139'/>
           <alias name='net0'/>
           <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
         </interface>
 
 # virsh update-device rhel7.4 net2.xml";Device updated successfully;;RedHatEnterpriseLinux7/RHEL7-99421
3206;;;;;;;;;9;9. # virsh dumpxml rhel7.4 | grep /interface -B7;" <interface type='network'>
       <mac address='52:54:00:06:d2:d5'/>
       <source network='route' bridge='virbr1'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-99421
3206;;;;;;;;;10;10. # brctl show;"bridge name bridge id STP enabled interfaces
 br0 8000.1c6f6506bc81 no enp0s25
 virbr0 8000.525400a854bc yes virbr0-nic
 virbr1 8000.525400c29260 yes virbr1-nic
 vnet0";;RedHatEnterpriseLinux7/RHEL7-99421
3206;;;;;;;;;11;11. login guest, and restart network service or dhclient to get ip address again;"guest get ip address in <range start='192.168.100.100' end='192.168.100.254'/>
 
​​";;RedHatEnterpriseLinux7/RHEL7-99421
3207;RHEL7-99422;[update-device] update an interface by update-device match by mac address, and mac & pci address together;update-device will match the interface first by mac address, then pci address if specified, do not check the interface type.;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"1. update-device by right mac with wrong pci address
 # virsh start rhel
 # virsh dumpxml rhel | grep /interface -B7
     <interface type='network'>
       <mac address='00:16:3e:77:e2:ed'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99422
3207;;;;;;;;;2;"2. prepare a xml with right mac and wrong pci address
 # cat net
    <interface type='network'>
       <mac address='00:16:3e:77:e2:ed'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <alias name='net0'/>
 <model type='virtio'/>
 <filterref filter='disallow-arp'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x1'/>
     </interface>
 # virsh update-device rhel7.4 net";"error: Failed to update device from net
 error: operation failed: no device matching mac address 00:16:3e:77:e2:ed found on 0000:00:03.1";;RedHatEnterpriseLinux7/RHEL7-99422
3207;;;;;;;;;3;"3. prepare a xml with right mac and no pci address
 # cat net1.xml
 <interface type='network'>
        <mac address='00:16:3e:77:e2:ed'/>
        <source network='default' bridge='virbr0'/>
        <target dev='vnet0'/>
        <alias name='net0'/>
  <model type='virtio'/>
 <filterref filter='disallow-arp'/>
      </interface>
 
 # virsh update-device rhel net1.xml
​​";Device updated successfully;;RedHatEnterpriseLinux7/RHEL7-99422
3207;;;;;;;;;4;4. # virsh dumpxml rhel | grep /interface -B8;"    <interface type='network'>
       <mac address='00:16:3e:77:e2:ed'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <filterref filter='disallow-arp'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";;RedHatEnterpriseLinux7/RHEL7-99422
3207;;;;;;;;;5;"5. prepare a network as below
 # virsh net-dumpxml route
 <network>
   <name>route</name>
   <uuid>d411fc4e-4e08-4589-bb3c-c39c2581f6d4</uuid>
   <forward mode='route'/>
   <bridge name='virbr1' stp='on' delay='0'/>
   <mac address='52:54:00:c2:92:60'/>
   <ip address='192.168.100.1'>
     <dhcp>
       <range start='192.168.100.100' end='192.168.100.254'/>
     </dhcp>
   </ip>
 </network>
 
 prepare xml below
 # cat net3.xml
 <interface type='bridge'>
   <mac address='00:16:3e:77:e2:ed'/>
     <source bridge='virbr1'/>
       <model type='virtio'/>
       <alias name='net0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99422
3207;;;;;;;;;6;6. # virsh update-device rhel net3.xml;Device updated successfully;;RedHatEnterpriseLinux7/RHEL7-99422
3207;;;;;;;;;7;"7. # virsh dumpxml rhel |grep /interface -B7
  
 
​​";"  <interface type='bridge'>
       <mac address='00:16:3e:77:e2:ed'/>
       <source bridge='virbr1'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 (the nwfilter is deleted, and the interface updated successfully)";;RedHatEnterpriseLinux7/RHEL7-99422
3208;RHEL7-99423;[update-device][filterref] update the filter for network type interface by update-device;Since libvirt-0.8.0, libvirt introduced network filtering extensions and enabled network traffic filtering for VMs using ebtables and iptables. update the filterref filter on the fly is supported on specified interface type.;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. start a vm with interface point to default network
 # virsh dumpxml rhel | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:68:c0:78'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 prepare an xml with the interface content above and add the filterref element.
 # cat net
    <interface type='network'>
        <mac address='52:54:00:68:c0:78'/>
        <source network='default'/>
       <filterref filter='clean-traffic'/>
     <model type='virtio'/>
    <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";filter can be updated;Test Case;RedHatEnterpriseLinux7/RHEL7-99423
3208;;;;;;;;;2;2. # virsh update-device rhel net;Device updated successfully;;RedHatEnterpriseLinux7/RHEL7-99423
3208;;;;;;;;;3;3. # virsh dumpxml rhel |grep /interface -B8;"    <interface type='network'>
       <mac address='52:54:00:68:c0:78'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <filterref filter='clean-traffic'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";;RedHatEnterpriseLinux7/RHEL7-99423
3208;;;;;;;;;4;"4. update the filter again
 # cat net1.xml
 <interface type='network'>
       <mac address='52:54:00:68:c0:78'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <filterref filter='disallow-arp'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel  net1.xml";Device updated successfully;;RedHatEnterpriseLinux7/RHEL7-99423
3208;;;;;;;;;5;"5. delete the filter
 # cat net2.xml
 <interface type='network'>
       <mac address='52:54:00:68:c0:78'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel net2.xml";Device updated successfully;;RedHatEnterpriseLinux7/RHEL7-99423
3208;;;;;;;;;6;6. # virsh dumpxml rhel | grep /interface -B7;"   <interface type='network'>
       <mac address='52:54:00:68:c0:78'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 (the filterref element is deleted)";;RedHatEnterpriseLinux7/RHEL7-99423
3209;RHEL7-99428;[update-device][source] update-device to update source network for macvtap or hostdev types (not support);support update the source network only for the one with linux bridge;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;nat to hostdev;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99428
3209;;;;;;;;;2;"1. on sriov host, prepare a hostdev vf pool network and the built-in nat network default
 # virsh net-list
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     no            yes
  hostdev              active     no            yes
 
 # virsh net-dumpxml hostdev
 <network>
   <name>hostdev</name>
   <uuid>e6ddbb96-5be5-494d-92f0-f7473e185876</uuid>
   <forward mode='hostdev' managed='yes'>
     <driver name='vfio'/>
     <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x0'/>
     <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x2'/>
     <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x4'/>
   </forward>
 </network>
 
 # virsh net-dumpxml default
 <network>
   <name>default</name>
   <uuid>6bd4ffe6-8535-4888-a002-0eb2bb243b87</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:98:11:0c'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
     </dhcp>
   </ip>
 </network>";​​;;RedHatEnterpriseLinux7/RHEL7-99428
3209;;;;;;;;;3;"2. start a guest with interface point to the vf pool
 # virsh dumpxml rhel | grep /interface -B5
     <interface type='network'>
       <mac address='52:54:00:6c:1e:cc'/>
       <source network='hostdev'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh start rhel
 Domain rhel started
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99428
3209;;;;;;;;;4;"3.  copy the output in step 2 and modify the source network to default, keep others unchanged,then update
 # cat net1.xml
 <interface type='network'>
       <mac address='52:54:00:6c:1e:cc'/>
       <source network='default'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel  net1.xml";"error: Failed to update device from net1.xml
 error: Operation not supported: cannot change config of 'hostdev' network type
 
​​";;RedHatEnterpriseLinux7/RHEL7-99428
3209;;;;;;;;;5;"4. start a guest with interface point to default then change it to point to a vf pool
 # virsh start rhel
 Domain rhel started
 
 # virsh dumpxml rhel | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:6c:1e:cc'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # cat net2.xml
 <interface type='network'>
       <mac address='52:54:00:6c:1e:cc'/>
       <source network='hostdev'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel net2.xml";"error: Failed to update device from net2.xml
 error: Operation not supported: cannot change network interface type to 'hostdev'
 
​​";;RedHatEnterpriseLinux7/RHEL7-99428
3209;;;;;;;;;6;nat to macvtap;​​;;RedHatEnterpriseLinux7/RHEL7-99428
3209;;;;;;;;;7;"1. prepare the macvtap interaface pool and built-in network default
 # virsh net-list
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     no            yes
  direct-macvtap       active     no            yes
 
 # virsh net-dumpxml default
 <network>
   <name>default</name>
   <uuid>6bd4ffe6-8535-4888-a002-0eb2bb243b87</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:98:11:0c'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
     </dhcp>
   </ip>
 </network>
 
 # virsh net-dumpxml direct-macvtap
 <network>
   <name>direct-macvtap</name>
   <uuid>1208929f-5875-4d6c-92c0-7c5c81d1b100</uuid>
   <forward dev='enp1s0' mode='bridge'>
     <interface dev='enp1s0'/>
   </forward>
 </network>";​​;;RedHatEnterpriseLinux7/RHEL7-99428
3209;;;;;;;;;8;"2. start a guest with nat network, then update the source network to direct-macvtap
 # virsh dumpxml rhel | grep /interface -B7
     <interface type='network'>
       <mac address='52:54:00:6c:1e:cc'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh start rhel
 Domain rhel started
 
 # cat net3.xml
 <interface type='network'>
       <mac address='52:54:00:6c:1e:cc'/>
       <source network='direct-macvtap'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel net3.xml";"error: Failed to update device from net3.xml
 error: Operation not supported: unable to change config on 'network' network type
 
​​";;RedHatEnterpriseLinux7/RHEL7-99428
3209;;;;;;;;;9;"3.  start a guest point to macvtap network and change to nat
 # virsh dumpxml rhel |grep /interface -B5
     <interface type='network'>
       <mac address='52:54:00:6c:1e:cc'/>
       <source network='direct-macvtap'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh start rhel
 Domain rhel started
 
 # cat net1.xml
 <interface type='network'>
       <mac address='52:54:00:6c:1e:cc'/>
       <source network='default'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel net1.xml";"error: Failed to update device from net1.xml
 error: Operation not supported: unable to change config on 'network' network type
 
​​";;RedHatEnterpriseLinux7/RHEL7-99428
3209;;;;;;;;;10;nat to bridge with ovs;​​;;RedHatEnterpriseLinux7/RHEL7-99428
3209;;;;;;;;;11;"1. prepare a network with ovs bridge
 (install openvswitch packet on host, then # systemctl start openvswitch; then # ovs-vsctl add-br ovsbr0; ovs-vsctl add-port ovsbr0 enp0s25;)
 
 # virsh net-dumpxml ovs_bridge
 <network>
   <name>ovs_bridge</name>
   <uuid>b93df569-0822-4b56-970b-602860256694</uuid>
   <forward mode='bridge'/>
  <bridge name='ovsbr0'/>
   <virtualport type='openvswitch'/>
 </network>
 
 # virsh net-dumpxml default
 <network>
   <name>default</name>
   <uuid>2ff1c458-d6df-46cf-a87d-79ab107813df</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:a8:54:bc'/>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
     </dhcp>
   </ip>
 </network>";​​;;RedHatEnterpriseLinux7/RHEL7-99428
3209;;;;;;;;;12;"2.  start a guest point to ovs bridge
 # virsh start rhel
 Domain rhel started
 
 # virsh dumpxml rhel |grep /interface -B10
 
​​";"   <interface type='bridge'>
       <mac address='52:54:00:68:c0:78'/>
       <source network='ovs_bridge' bridge='ovsbr0'/>
       <virtualport type='openvswitch'>
         <parameters interfaceid='f12aae14-60a3-46a7-9145-e33df530b208'/>
       </virtualport>
       <target dev='vnet1'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-99428
3209;;;;;;;;;13;"3.  prepare xml as below with source network is default and same mac with step 2 above
 
 # cat net4.xml
 <interface type='network'>
       <mac address='52:54:00:68:c0:78'/>
       <source network='default'/>
       <target dev='vnet1'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel net4.xml";"error: Failed to update device from net4.xml
 error: Operation not supported: unable to change config on 'network' network type
 
​​";;RedHatEnterpriseLinux7/RHEL7-99428
3209;;;;;;;;;14;"4. update from nat to ovs bridge
 start a guest with <
 
 source network='default'/>
 # cat net4.xml
 <interface type='network'>
       <mac address='52:54:00:68:c0:78'/>
       <source network='ovs_bridge'/>
       <target dev='vnet1'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 # virsh update-device rhel  net4.xml";"error: Failed to update device from net4.xml
 error: Operation not supported: unable to change config on 'network' network type";;RedHatEnterpriseLinux7/RHEL7-99428
3210;RHEL7-99431;[update-device][vlan tag] update the vlan tag by update-device (not supported);vlan tag is supported on macvtap with vf passthrough and vf pci passthrough, and bridge with ovs, but both of them do not support update-device to update interface on the fly.;Yalan Zhang (yalzhang);Medium;Negative;Not Automated;;1; sriov vf pci passthrough;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99431
3210;;;;;;;;;2;"1. start a guest with hostdev interface
 # virsh start rhel
 # virsh dumpxml rhel | grep /interface -B9
    <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:6c:1e:cc'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x0'/>
       </source>
       <model type='rtl8139'/>
       <alias name='hostdev0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-99431
3210;;;;;;;;;3;"2. prepare a xml with above content and add vlan
 # cat nic.xml
 <interface type='hostdev' managed='yes'>
       <mac address='52:54:00:6c:1e:cc'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x03' slot='0x10' function='0x0'/>
       </source>
   <vlan>
       <tag id='42'/>
     </vlan>
       <model type='rtl8139'/>
       <alias name='hostdev0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99431
3210;;;;;;;;;4;# virsh update-device rhel nic.xml;"error: Failed to update device from nic.xml
 error: Operation not supported: cannot change config of 'hostdev' network type";;RedHatEnterpriseLinux7/RHEL7-99431
3210;;;;;;;;;5;sriov vf with macvtap passthrough;​​;;RedHatEnterpriseLinux7/RHEL7-99431
3210;;;;;;;;;6;" 1.  start a guest with macvtap with vf passthrough mode
 # virsh start rhel
 Domain rhel started
 
 # virsh dumpxml rhel | grep /interface -B7
     <interface type='direct'>
       <mac address='52:54:00:8e:56:45'/>
       <source dev='enp3s16f4' mode='passthrough'/>
       <target dev='macvtap0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-99431
3210;;;;;;;;;7;"2. prepare xml with above content  with vlan tag
 # cat direct.xml
 <interface type='direct'>
       <mac address='52:54:00:8e:56:45'/>
       <source dev='enp3s16f4' mode='passthrough'/>
   <vlan>    
   <tag id='42'/>  
   </vlan>
 <target dev='macvtap0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-99431
3210;;;;;;;;;8;# virsh update-device rhel direct.xml;"error: Failed to update device from direct.xml
 error: Operation not supported: unable to change config on 'direct' network type";;RedHatEnterpriseLinux7/RHEL7-99431
3210;;;;;;;;;9;bridge with ovs;​​;;RedHatEnterpriseLinux7/RHEL7-99431
3210;;;;;;;;;10;"1. start a guest with interface point to a network bridged to ovs bridge.
 # virsh start rhel
 # virsh dumpxml rhel | grep /interface -B10
     <interface type='bridge'>
       <mac address='52:54:00:02:0a:7a'/>
       <source network='ovs_net' bridge='ovsbr0'/>
       <virtualport type='openvswitch'>
         <parameters interfaceid='3dcaf780-2678-4512-9d02-01564607db39'/>
       </virtualport>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 prepare xml with vlan tag
 # cat bridge.xml
     <interface type='bridge'>
   <mac address='52:54:00:02:0a:7a'/>
     <source network='ovs_net' bridge='ovsbr0'/>
   <virtualport type='openvswitch'>
    <parameters interfaceid='3dcaf780-2678-4512-9d02-01564607db39'/>
  </virtualport>
     <target dev='vnet0'/>
   <vlan>    
      <tag id='42'/> 
      </vlan>
   <model type='virtio'/>
  <alias name='net0'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
  </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99431
3210;;;;;;;;;11;2. # virsh update-device rhel bridge.xml;"error: Failed to update device from bridge.xml
 error: Operation not supported: unable to change config on 'bridge' network type";;RedHatEnterpriseLinux7/RHEL7-99431
3211;RHEL7-99432;[update-device][portgroup] update portgroup of the interface for macvtap or ovs related network (not support);use update-device to change the porgroup of the interface.;Yalan Zhang (yalzhang);Medium;Negative;Not Automated;;1;"1. define and start a network with ovs and portgroup
 
 # virsh net-dumpxml ovs-net
 <network>
   <name>ovs-net</name>
   <uuid>1546c287-e22f-41c5-8eef-12ccb8a54af6</uuid>
   <forward mode='bridge'/>
   <bridge name='ovsbr0'/>
   <vlan trunk='yes'>
     <tag id='42' nativeMode='untagged'/>
     <tag id='47'/>
   </vlan>
   <virtualport type='openvswitch'>
     <parameters interfaceid='09b11c53-8b5c-4eeb-8f00-d84eaa0aaa4f'/>
   </virtualport>
   <portgroup name='dontpanic'>
     <vlan>
       <tag id='42'/>
     </vlan>
   </portgroup>
 </network>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99432
3211;;;;;;;;;2;"2. start a guest connected to the the network
 # virsh dumpxml rhel --inactive | grep /interface -B5
     <interface type='network'>
       <mac address='52:54:00:ae:60:80'/>
       <source network='ovs-net'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh start rhel
 viDomain rhel started
 
 # virsh dumpxml rhel | grep /interface -B14";"   <interface type='bridge'>
       <mac address='52:54:00:ae:60:80'/>
       <source network='ovs-net' bridge='ovsbr0'/>
       <vlan trunk='yes'>
         <tag id='42' nativeMode='untagged'/>
         <tag id='47'/>
       </vlan>
       <virtualport type='openvswitch'>
         <parameters interfaceid='09b11c53-8b5c-4eeb-8f00-d84eaa0aaa4f'/>
       </virtualport>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-99432
3211;;;;;;;;;3;"3. update it with port group='dontpanic'
 # cat nic.xml
 <interface type='network' >
       <mac address='52:54:00:ae:60:80'/>
       <source network='ovs-net' portgroup='dontpanic'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel nic.xml
​​";"error: Failed to update device from nic.xml
 error: Operation not supported: unable to change config on 'network' network type
 
​​";;RedHatEnterpriseLinux7/RHEL7-99432
3211;;;;;;;;;4;for macvtap network;​​;;RedHatEnterpriseLinux7/RHEL7-99432
3211;;;;;;;;;5;"1. # virsh net-dumpxml private
 <network>
   <name>private</name>
   <uuid>8f43f538-3343-4f19-bfe2-54dbf3682800</uuid>
   <forward dev='ens1f0' mode='private'>
     <interface dev='ens1f0'/>
     <interface dev='enp1s0'/>
   </forward>
   <portgroup name='engineering'>
     <virtualport type='802.1Qbh'>
       <parameters profileid='test'/>
     </virtualport>
   </portgroup>
 </network>
 
 # virsh dumpxml rhel | grep /interface -B5
     <interface type='network'>
       <mac address='52:54:00:18:dc:15'/>
       <source network='private'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh start rhel
 Domain rhel started";​​;;RedHatEnterpriseLinux7/RHEL7-99432
3211;;;;;;;;;6;2. # virsh dumpxml rhel | grep /interface -B7;"   <interface type='direct'>
       <mac address='52:54:00:18:dc:15'/>
       <source network='private' dev='ens1f0' mode='private'/>
       <target dev='macvtap0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-99432
3211;;;;;;;;;7;"2. # cat nic.xml
 <interface type='network'>
       <mac address='52:54:00:18:dc:15'/>
       <source network='private' portgroup='engineering'/>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel  nic.xml";"error: Failed to update device from nic.xml
 error: Operation not supported: unable to change config on 'network' network type
 
​​";;RedHatEnterpriseLinux7/RHEL7-99432
3212;RHEL7-99433;[update-device][boot order] update boot order in interface with os/boot or duplicate order or invalid value - bug 1439991, bug 1546971;when update-device with <boot order>  in interface, libvirt should do the check if there is <boot device>  in <os> section, and the boot order already defined, and validate the value. For inactive domain, should do the same check.;Yalan Zhang (yalzhang);High;Negative;Not Automated;;1; Scenario 1: update boot order with os/boot dev;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;2;" 1. prepare a running domain with <boot dev> in <os> section
 # virsh dumpxml rhel7.4 
 ....
  <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.4.0'>hvm</type>
     <boot dev='hd'/>
   </os>
 ....
    <interface type='network'>
       <mac address='52:54:00:f8:a6:9b'/>
       <source network='default'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 ...";​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;3;"2. prepare a xml with interface section of the domain and edit it with <boot order>
 # cat net_with_order.xml 
 <interface type='network'>
       <mac address='52:54:00:f8:a6:9b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
 <boot order='1'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;4;"3. update-device to update the boot order
 # virsh update-device rhel7.4 net_with_order.xml
​​";"error: Failed to update device from net_with_order.xml
 error: unsupported configuration: per-device boot elements cannot be used together with os/boot elements
​​";;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;5;"4. check the xml no changes and domain still running
 # virsh list 
  Id    Name                           State
 ----------------------------------------------------
  1     rhel7.4                        running
 
  # virsh dumpxml rhel7.4 | grep /interface -B7";"(check no changes about boot order)
    <interface type='network'>
       <mac address='52:54:00:f8:a6:9b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;6;Scenario 2: update with duplicate order;​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;7;"1. prepare a running domain with
 # virsh dumpxml rhel7.4
 ...
   <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.4.0'>hvm</type>
   </os>   ===> no boot dev defined
 ...
     <disk type='file' device='disk'>
       <driver name='qemu' type='qcow2'/>
       <source file='/var/lib/libvirt/images/RHEL-7.5-x86_64-latest.qcow2.2'/>
       <backingStore/>
       <target dev='vda' bus='virtio'/>
       <boot order='1'/>   ==>  disk boot order=1
       <alias name='virtio-disk0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
     </disk>
 ...
     <interface type='network'>
       <mac address='52:54:00:f8:a6:9b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;8;"2. prepare the interface section xml with duplicate boot order
 # cat net_with_order.xml
 <interface type='network'>
       <mac address='52:54:00:f8:a6:9b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
 <boot order='1'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;9;"3. update
 # virsh update-device rhel7.4 net_with_order.xml";"error: Failed to update device from net_with_order.xml
 error: unsupported configuration: boot order 1 is already used by another device";;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;10;"4. check the xml no changes and domain still running
 # virsh list 
  Id    Name                           State
 ----------------------------------------------------
  2     rhel7.4                        running
 
 # virsh dumpxml rhel7.4 | grep /interface -B7
 
 
​​";"    <interface type='network'>
       <mac address='52:54:00:f8:a6:9b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 (no updates)";;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;11;Scenario 3: update with invalid value;​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;12;"1. prepare live domain with <boot order='1'/> for disk
 # cat net_with_order.xml 
 <interface type='network'>
       <mac address='52:54:00:f8:a6:9b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
 <boot order='0'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;13; # virsh update-device rhel7.4 net_with_order.xml;"error: Failed to update device from interface.xml
 error: internal error: incorrect boot order '0', expecting positive integer
​​";;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;14;"2. # cat net_with_order.xml 
 <interface type='network'>
       <mac address='52:54:00:f8:a6:9b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
 <boot order='s'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;15;# virsh update-device rhel7.4 net_with_order.xml;"error: Failed to update device from interface.xml
 error: internal error: incorrect boot order 's', expecting positive integer
​​";;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;16;"3. # cat net_with_order.xml 
 <interface type='network'>
       <mac address='52:54:00:f8:a6:9b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
 <boot order='-6'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;17;# virsh update-device rhel7.4 net_with_order.xml;"error: Failed to update device from interface.xml
 error: internal error: incorrect boot order '-6', expecting positive integer
​​";;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;18;scenario 4: live update boot order from none to 2 is not supported;​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;19;"1. prepare a running domain 
 # virsh dumpxml rhel7.4
 ...
  <os>
     <type arch='x86_64' machine='pc-i440fx-rhel7.4.0'>hvm</type>
   </os>  ===> no boot dev
 ...
     <disk type='file' device='disk'>
       <driver name='qemu' type='qcow2'/>
       <source file='/var/lib/libvirt/images/RHEL-7.5-x86_64-latest.qcow2.2'/>
       <target dev='vda' bus='virtio'/>
       <boot order='1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
     </disk>
 ...
     <interface type='network'>
       <mac address='52:54:00:f8:a6:9b'/>
       <source network='default'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 ...";​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;20;"2. prepare xml for interface section with boot order
 # cat interface_order2.xml 
 <interface type='network'>
       <mac address='52:54:00:f8:a6:9b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
 <boot order='2'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;21;"3. # virsh update-device rhel7.4 interface_order2.xml
​​";"error: Failed to update device from interface_order2.xml
 error: Operation not supported: cannot modify network device boot index setting";;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;22;scenario 5: live update boot order is not supported;​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;23;"1. start a guest with below xml
 # virsh dumpxml rhel 
   <interface type='network'>
       <mac address='52:54:00:f8:a6:9b'/>
       <source network='default'/>
       <model type='virtio'/>
 <boot order='2'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 prepare xml with different boot order with valid value
 # cat interface.xml
 <interface type='network'>
       <mac address='52:54:00:f8:a6:9b'/>
       <source network='default'/>
       <model type='virtio'/>
 <boot order='3'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;24;# virsh update-device rhel interface.xml;"error: Failed to update device from interface.xml
 error: Operation not supported: cannot modify network device boot index setting";;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;25;with inactive domain;the steps and expected results are all the same with live domain for scenario 1~3;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;26;Scenario 1: update boot order with os/boot dev;​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;27;# virsh update-device rhel7.4 net2.xml;"error: Failed to update device from net2.xml
 error: unsupported configuration: per-device boot elements cannot be used together with os/boot elements";;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;28;Scenario 2: update with duplicate order;​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;29;# virsh update-device rhel7.4 net2.xml;"error: Failed to update device from net2.xml
 error: unsupported configuration: boot order 1 is already used by another device";;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;30;Scenario 3: use invalid value;libvirtd should no crash, and should failed with clear error message;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;31;with <boot order='0'/>;​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;32;with <boot order='s'>;​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;33;with <boot order='-6'>;​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;34;scenario 4: update from none to 3 works for inactive domain;for inactive domain, it works if for valid value(not for duplicate, and not for the one with os/boot);;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;35;"# virsh dumpxml rhel7.4
 ...
   <disk type='file' device='disk'>
       <driver name='qemu' type='qcow2'/>
       <source file='/var/lib/libvirt/images/RHEL-7.5-x86_64-latest.qcow2.2'/>
       <target dev='vda' bus='virtio'/>
       <boot order='1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
     </disk>
 ...   
 <interface type='network'>
       <mac address='52:54:00:f8:a6:9b'/>
       <source network='default'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;36;"# cat interface_order2.xml 
 <interface type='network'>
       <mac address='52:54:00:f8:a6:9b'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
 <boot order='3'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;37;"# virsh update-device rhel7.4 interface_order2.xml
 Device updated successfully
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99433
3212;;;;;;;;;38;# virsh dumpxml rhel7.4;"  <disk type='file' device='disk'>
       <driver name='qemu' type='qcow2'/>
       <source file='/var/lib/libvirt/images/RHEL-7.5-x86_64-latest.qcow2.2'/>
       <target dev='vda' bus='virtio'/>
       <boot order='1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>
     </disk>
 
 ...
    <interface type='network'>
       <mac address='52:54:00:f8:a6:9b'/>
       <source network='default'/>
       <model type='virtio'/>
       <boot order='3'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";;RedHatEnterpriseLinux7/RHEL7-99433
3213;RHEL7-99440;[update-device][portgroup] update portgroup of the interface for nat network;live update the interface to point to another portgroup is supported.;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;for nat network;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99440
3213;;;;;;;;;2;"1. prepare a network with portgroup
 # virsh net-dumpxml net
 <network>
   <name>net</name>
   <uuid>a2ab8047-591e-4f95-80f6-ad47b518b9e0</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr1' stp='on' delay='0'/>
   <mac address='52:54:00:cf:11:a0'/>
   <ip address='192.168.100.1'>
     <dhcp>
       <range start='192.168.100.100' end='192.168.100.254'/>
     </dhcp>
   </ip>
   <portgroup name='sales' default='yes'>
     <bandwidth>
       <inbound average='1000' peak='5000' burst='5120'/>
       <outbound average='128' peak='256' burst='256'/>
     </bandwidth>
   </portgroup>
   <portgroup name='engineering'>
     <bandwidth>
       <inbound average='500' peak='1000' burst='1024'/>
       <outbound average='256' peak='128' burst='512'/>
     </bandwidth>
   </portgroup>
 </network>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99440
3213;;;;;;;;;3;"2. start a guest connected to this network
 # virsh dumpxml rhel | grep /interface -B7
 <interface type='network'>
 <source network='net'/>
 </interface>
 # virsh start rhel
 # virsh dumpxml rhel | grep /interface -B11";"   <interface type='network'>
       <mac address='52:54:00:18:dc:15'/>
       <source network='net' bridge='virbr1'/>
       <bandwidth>
         <inbound average='1000' peak='5000' burst='5120'/>
         <outbound average='128' peak='256' burst='256'/>
       </bandwidth>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-99440
3213;;;;;;;;;4;"3. update the portgroup
 # cat nic2.xml
 <interface type='network'>
       <mac address='52:54:00:18:dc:15'/>
       <source network='net' portgroup='engineering'/>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh update-device rhel nic2.xml";Device updated successfully;;RedHatEnterpriseLinux7/RHEL7-99440
3213;;;;;;;;;5;4. # virsh dumpxml rhel | grep /interface -B11;" <interface type='network'>
       <mac address='52:54:00:18:dc:15'/>
       <source network='net' portgroup='engineering' bridge='virbr1'/>
       <bandwidth>
         <inbound average='500' peak='1000' burst='1024'/>
         <outbound average='256' peak='128' burst='512'/>
       </bandwidth>
       <target dev='vnet0'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-99440
3214;RHEL7-99441;[update-device][tune] update sndbuf in interface by udpate-device (not support);sndbuf is backend specific options which can adjust the size of send buffer in the host, and it do not support live update.;Yalan Zhang (yalzhang);Low;Negative;Not Automated;;1;"1. start a guest with below interface
 # virsh dumpxml rhel | grep /interface -B12
     <interface type='network'>
       <mac address='52:54:00:51:4a:8f'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <driver name='vhost' txmode='iothread' ioeventfd='on' event_idx='off' queues='5'/>
       <backend tap='/dev/net/tun' vhost='/dev/vhost-net'/>
       <tune>
         <sndbuf>1600</sndbuf>
       </tune>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # cat nic7.xml 
 <interface type='network'>
       <mac address='52:54:00:51:4a:8f'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <driver name='vhost' txmode='iothread' ioeventfd='on' event_idx='off' queues='5'/>
       <backend tap='/dev/net/tun' vhost='/dev/vhost-net'/>
       <tune>
         <sndbuf>1800</sndbuf>
       </tune>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99441
3214;;;;;;;;;2;2. # virsh update-device rhel nic7.xml;"error: Failed to update device from nic7.xml
 error: Operation not supported: unable to change config on 'network' network type";;RedHatEnterpriseLinux7/RHEL7-99441
3215;RHEL7-99442;[migration][floor] migrate a vm with floor setting but no Qos setting in target host network;guest has floor setting(source host network has bandwidth setting), but target host network has no bandwidth setting. migration will fail;Yalan Zhang (yalzhang);Medium;Negative;Not Automated;;1;"1. on src host, start a guest with floor setting in Qos section
 # virsh net-dumpxml default
 <network>
   <name>default</name>
   <uuid>86a75bda-519c-40a6-a7a5-f0a4b21499c2</uuid>
   <forward mode='nat'>
     <nat>
       <port start='1024' end='65535'/>
     </nat>
   </forward>
   <bridge name='virbr0' stp='on' delay='0'/>
   <mac address='52:54:00:7c:ed:8e'/>
   <bandwidth>
     <inbound average='1000' peak='5000' burst='1024'/>
     <outbound average='128' peak='256' burst='256'/>
   </bandwidth>
   <ip address='192.168.122.1' netmask='255.255.255.0'>
     <dhcp>
       <range start='192.168.122.2' end='192.168.122.254'/>
     </dhcp>
   </ip>
 </network>
 
  # virsh dumpxml rhel7.4 | grep /interface -B9
     <interface type='network'>
       <mac address='52:54:00:30:e4:6a'/>
       <source network='default'/>
       <bandwidth>
         <inbound average='1000' peak='4000' floor='800' burst='1024'/>
       </bandwidth>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99442
3215;;;;;;;;;2;"2. on target host, the default network has no Qos set, check by 
 # virsh net-dumpxml default | grep bandwidth";no output;;RedHatEnterpriseLinux7/RHEL7-99442
3215;;;;;;;;;3;"3. # virsh migrate s1 --live qemu+ssh://server/system --verbose
 root@server's password: 
 error: Operation not supported: Invalid use of 'floor' on interface with MAC address 52:54:00:c3:56:73 - network 'default' has no inbound QoS set";migration failed;;RedHatEnterpriseLinux7/RHEL7-99442
3215;;;;;;;;;4;"Note: following steps are optinoal
 4. set Qos in default network on target host, then migrate";migrate succeed;;RedHatEnterpriseLinux7/RHEL7-99442
3215;;;;;;;;;5;5. check the xml and check the rules by tc;​​;;RedHatEnterpriseLinux7/RHEL7-99442
3215;;;;;;;;;6;"#  tc class show dev virbr0
 
 
​​";"class htb 1:1 root rate 8Mbit ceil 40Mbit burst 1600b cburst 1600b 
 class htb 1:2 parent 1:1 leaf 2: prio 0 rate 33600Kbit ceil 40Mbit burst 1591b cburst 1600b 
 class htb 1:3 parent 1:1 leaf 3: prio 0 rate 6400Kbit ceil 40Mbit burst 1600b cburst 1600b   ===> for the floor setting";;RedHatEnterpriseLinux7/RHEL7-99442
3215;;;;;;;;;7;"# tc class show dev vnet0
​​";class htb 1:1 root leaf 2: prio 0 rate 8Mbit ceil 32Mbit burst 1Mb cburst 1600b ;;RedHatEnterpriseLinux7/RHEL7-99442
3216;RHEL7-99444;[Network lifecycle] Edit a transient network - Bug 949908;Transient network can be edited. And edit a transient network will make it persistent.;Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;Edit transient network make it persistent;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99444
3216;;;;;;;;;2;"1. create a transient network
 # virsh net-list --all
 Name State Autostart Persistent
 ----------------------------------------------------------
 default active yes yes
 temp active no  no 
​​";"
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-99444
3216;;;;;;;;;3;"2. # virsh net-edit temp  (you can just add some blank space before a line, then save)
 Network temp XML configuration edited. ";​​;;RedHatEnterpriseLinux7/RHEL7-99444
3216;;;;;;;;;4;"3. the network become persistent one after editing.
 # virsh net-list --all
​​";"Name State Autostart Persistent
 ----------------------------------------------------------
 default active yes yes
 temp active no yes ";;RedHatEnterpriseLinux7/RHEL7-99444
3216;;;;;;;;;5;"4. check the libvirtd status
 # service libvirtd status
​​";"Redirecting to /bin/systemctl status libvirtd.service
 libvirtd.service - Virtualization daemon
 Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; enabled)
 Active: active (running) since 2013-05-16 14:43:31 CST; 1h 2min ago
 Main PID: 14451 (libvirtd)
 
 (the transient network become persistent after edit, during all the steps, the libvirtd not hang. Refer to: 
 libvirtd should not be hang after editing the transient network.--------bug 921777)";;RedHatEnterpriseLinux7/RHEL7-99444
3217;RHEL7-99445;[Network lifecycle] undefine  transient network (not support) - Bug 1315059 949487;Undefine a transient network is not valid, check the error message should be meaningful.;Yalan Zhang (yalzhang);High;Positive;Automated;;1;Undefine transient network is not valid;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99445
3217;;;;;;;;;2;"1. prepare a transient network
 # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     no            no
  definebr1            active     no            ** no **
 
 
 
​​";"
 
 
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-99445
3217;;;;;;;;;3;2. # virsh net-undefine definebr1;"error: Failed to undefine network definebr1 
 error: Requested operation is not valid: can't undefine transient network
 
 (After step 2, the error message should ** not ** like
 # virsh net-undefine definebr1
 error: Failed to undefine network definebr1
 ** error: cannot remove config file '/etc/libvirt/qemu/networks/definebr1.xml': No such file or directory ** Refer to: bug 1315059)";;RedHatEnterpriseLinux7/RHEL7-99445
3218;RHEL7-99446;[Network lifecycle] destroy transient network;destroy a transient network will make it gone;Yalan Zhang (yalzhang);High;Positive;Automated;;1;Destroy transient network will make it disappear;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99446
3218;;;;;;;;;2;"1. prepare a transient network
 # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
 definebr1            active     no           ** no **
 yes             definebr1-nic
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-99446
3218;;;;;;;;;3;"2. the bridge created
 # brctl show
     ";"bridge name     bridge id               STP enabled     interfaces
 definebr1               8000.525400de20b9";;RedHatEnterpriseLinux7/RHEL7-99446
3218;;;;;;;;;4;"2.# virsh net-destroy definebr1
 Network definebr1 destroyed
​​";"Transient network can be destroyed successfully.
​​";;RedHatEnterpriseLinux7/RHEL7-99446
3218;;;;;;;;;5;3. # virsh net-list --all | grep definebr1;no output, the network disappear;;RedHatEnterpriseLinux7/RHEL7-99446
3219;RHEL7-99447;[Network lifecycle] undefine a persistent network - bug 949908 949487;undefine an active persistent network will make it to be a transient network, and undefine a inactive persistent network will make it gone.;Yalan Zhang (yalzhang);High;Positive;Automated;;1; undefine active persistent network;will make it a transient network;Test Case;RedHatEnterpriseLinux7/RHEL7-99447
3219;;;;;;;;;2;"1. define a virtual network then start it
 # cat net.xml
 <network>
 <name>definebr1</name>
 <uuid>fb09e249-7cce-252e-2417-c47d6d60b3d6</uuid>
 <forward/>
 <bridge name='definebr1' stp='on' forwardDelay='0'/>
 <ip address='10.0.0.1' netmask='255.255.255.0'>
 <dhcp>
 <range start='10.0.0.2' end='10.0.0.254' />
 </dhcp>
 </ip>
 </network>
 
 # virsh net-define net.xml
 # virsh net-list --all";"Name State Autostart Persistent
 ----------------------------------------------------------
 default active yes yes
 definebr1 inactive no yes";;RedHatEnterpriseLinux7/RHEL7-99447
3219;;;;;;;;;3;"2, activate the newly-defined network
 # virsh net-start definebr1
 Network definebr1 started";​​;;RedHatEnterpriseLinux7/RHEL7-99447
3219;;;;;;;;;4;"3, # virsh net-list --all
 
​​";"Name State Autostart Persistent
 ---------------------------------------------------------
 default active yes yes
 definebr1 active no yes ";;RedHatEnterpriseLinux7/RHEL7-99447
3219;;;;;;;;;5;"4. Undefine an active persistent network will change it to a transient network 
 
 # virsh net-undefine definebr1
 Network definebr1 has been undefined
 
 # virsh net-list --all";"Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     yes            yes
  definebr1            active     no         **   no **
 
 (The persistent network will change to transient network after undefine refer to bug 949908)
​​";;RedHatEnterpriseLinux7/RHEL7-99447
3219;;;;;;;;;6;"undefine inactive persistent network
​​";will make it gone;;RedHatEnterpriseLinux7/RHEL7-99447
3219;;;;;;;;;7;"1.  prepare a network xml and define the network but not start it
 
 # cat local.xml
 <network>
   <name>local</name>
   <ip address=""192.168.152.1"" netmask=""255.255.255.0"">
     <dhcp>
       <range start=""192.168.152.2"" end=""192.168.152.254""/>
     </dhcp>
   </ip>
 </network>
 
 # virsh net-define local.xml
 Network local defined from local.xml
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99447
3219;;;;;;;;;8;2. # virsh net-list --inactive;" Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  local                inactive   no            yes";;RedHatEnterpriseLinux7/RHEL7-99447
3219;;;;;;;;;9;"3. # virsh net-undefine local
 Network local has been undefined";​​;;RedHatEnterpriseLinux7/RHEL7-99447
3219;;;;;;;;;10;4. # virsh net-list --all  | grep local;"no output
 (undefine inactive persistent network will make it gone)";;RedHatEnterpriseLinux7/RHEL7-99447
3220;RHEL7-99448;[Network lifecycle] destroy a persistent network;destroy an active persistent network will make it inactive.;Yalan Zhang (yalzhang);High;Positive;Automated;;1;"destroy active persistent network
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-99448
3220;;;;;;;;;2;"1. prepare a active persisent network
 # virsh net-define $net.xml
 # virsh net-start $net
 # virsh net-list --all
​​";"Name State Autostart Persistent
 ----------------------------------------------------------
 default active yes yes
 definebr1 active no yes";;RedHatEnterpriseLinux7/RHEL7-99448
3220;;;;;;;;;3;2. # virsh net-destroy definebr1;Network definebr1 destroyed;;RedHatEnterpriseLinux7/RHEL7-99448
3220;;;;;;;;;4;"3. # virsh net-list --all
 ";" Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     yes           yes
  definebr1            inactive   no            yes";;RedHatEnterpriseLinux7/RHEL7-99448
3220;;;;;;;;;5;"destroy inactive persistent network
​​";"check the error messages
​​";;RedHatEnterpriseLinux7/RHEL7-99448
3220;;;;;;;;;6;"1. prepare a inactive persistent network
 # virsh net-define $net.xml
 # virsh net-list --all";" Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              inactive   yes           yes";;RedHatEnterpriseLinux7/RHEL7-99448
3220;;;;;;;;;7;"2. # virsh net-destroy default
​​";"error: Failed to destroy network default
 error: Requested operation is not valid: network 'default' is not active";;RedHatEnterpriseLinux7/RHEL7-99448
3221;RHEL7-99450;[autostart] set autostart for network with additional options (not support); virsh net-autostart network [--disable] , do not support any options, and do not support transient network.;Yalan Zhang (yalzhang);Medium;Negative;Automated;;1;"1. additional arg,option
 # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     no            yes
  test1                active     no            no

 # virsh net-autostart default --test
";error: command 'net-autostart' doesn't support option --test;Test Case;RedHatEnterpriseLinux7/RHEL7-99450
3221;;;;;;;;;2;"2. none existing network
 # virsh net-autostart test2
";"error: failed to get network 'test2'
 error: Network not found: no network with matching name 'test2'";;RedHatEnterpriseLinux7/RHEL7-99450
3222;RHEL7-99451;[autostart] set autostart for transient network (not support);autostart can not be with transitent network;Yalan Zhang (yalzhang);High;Negative;Automated;;1;"1. # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     yes           yes";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99451
3222;;;;;;;;;2;"2. # virsh net-undefine default
 Network default has been undefined";​​;;RedHatEnterpriseLinux7/RHEL7-99451
3222;;;;;;;;;3;"3. # virsh net-list --all
 
 ==> check the autostart change to 'no'";" Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  default              active     no            no";;RedHatEnterpriseLinux7/RHEL7-99451
3222;;;;;;;;;4;"4. prepare a transient network, then try to set it to autostart
 # virsh net-list --all
  Name                 State      Autostart     Persistent
 ----------------------------------------------------------
  test1                active     no            no
 
 # virsh net-autostart test1";"error: failed to mark network test1 as autostarted
 error: Requested operation is not valid: cannot set autostart for transient network";;RedHatEnterpriseLinux7/RHEL7-99451
3223;RHEL7-99453;[Libvirt-rhos] Check openstack commands;Check openstack command;Jingjing Shao (jishao);Low;Positive;Not Automated;;1;"1. Get in RHOS env
 #  source keystonerc_admin 
 
​​";"Output:
 [root@sriov2 ~(keystone_admin)]# 
 [root@sriov2 ~(keystone_admin)]# 
 [root@sriov2 ~(keystone_admin)]#
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-99453
3223;;;;;;;;;2;"2. Check the help of openstack
 [root@sriov2 ~(keystone_admin)]#  openstack --help";"Output: 
 usage: openstack [--version] [-v | -q] [--log-file LOG_FILE] [-h] [--debug]
                  [--os-cloud <cloud-config-name>]
                  [--os-region-name <auth-region-name>]
                  [--os-cacert <ca-bundle-file>] [--os-cert <certificate-file>]
                  [--os-key <key-file>] [--verify | --insecure]
                  [--os-default-domain <auth-domain>]
                  [--os-interface <interface>] [--timing] [--os-beta-command]
                  [--os-profile hmac-key]
                  [--os-compute-api-version <compute-api-version>]
                  [--os-network-api-version <network-api-version>]
                  [--os-image-api-version <image-api-version>]
                  [--os-volume-api-version <volume-api-version>]
 ....
 Commands:
   access token create  Create an access token
   acl delete     Delete ACLs for a secret or container as identified by its href.
   acl get        Retrieve ACLs for a secret or container by providing its href.
   acl submit     Submit ACL on a secret or container as identified by its href.
   acl user add   Add ACL users to a secret or container as identified by its href.
   acl user remove  Remove ACL users from a secret or container as identified by its href.
 ......
   zone transfer request list  List Zone Transfer Requests
   zone transfer request set  Set a Zone Transfer Request
   zone transfer request show  Show Zone Transfer Request Details
​​";;RedHatEnterpriseLinux7/RHEL7-99453
3224;RHEL7-99456;[Libvirt-rhos] Create/delete the image in RHOS;"Create the image in Openstack: raw, qcow2
";Jingjing Shao (jishao);Medium;Positive;Automated;;1;"Click ""Project"" => ""compute"" => ""Images"" => Click ""Create Images"".
 Input Name: r7-qcow2, source: choose a image from the host,  Format: QCOW2, Minimum Disk (GB): 10, Minimum RAM (MB): 1024, Select Protected: no, Select visibility: Public, Click ""Create image"". The image STATUS will be ""queued"", then ""saving"", then ""Active"".";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99456
3224;;;;;;;;;2;" 1. Chekck the images
 # ll  /var/lib/libvirt/images
 t
​​";"Output:
 otal 10486784
 -rw-r--r--. 1 root root 5369757696 Aug 29 13:47 q.qcow2
 -rw-r--r--. 1 root root 5368709120 Aug 29 11:54 r.raw";;RedHatEnterpriseLinux7/RHEL7-99456
3224;;;;;;;;;3;"2. Check the image in openstack env
     # openstack image list
     #
     #
​​";"Output:
 no outputs";;RedHatEnterpriseLinux7/RHEL7-99456
3224;;;;;;;;;4;"3.  Create the qcow2  image.
 
 # openstack image create r7-qcow2  --disk-format qcow2  --container-format bare  --file /var/lib/libvirt/images/q.qcow2
​​";"Output: 
 +------------------+------------------------------------------------------+
 | Field            | Value                                                |
 +------------------+------------------------------------------------------+
 | checksum         | d01910b210b961fc9aeb14e695bbbd07                     |
 | container_format | bare                                                 |
 | created_at       | 2017-08-29T05:48:52Z                                 |
 | disk_format      | qcow2                                                |
 | file             | /v2/images/e4e51b59-7f71-4698-b0ee-fec937ad2afb/file |
 | id               | e4e51b59-7f71-4698-b0ee-fec937ad2afb                 |
 | min_disk         | 0                                                    |
 | min_ram          | 0                                                    |
 | name             | r7-qcow2                                             |
 | owner            | cb5a47ffa8244cd99f65d6ba712be336                     |
 | protected        | False                                                |
 | schema           | /v2/schemas/image                                    |
 | size             | 5369757696                                           |
 | status           | active                                               |
 | tags             |                                                      |
 | updated_at       | 2017-08-29T05:50:33Z                                 |
 | virtual_size     | None                                                 |
 | visibility       | shared                                               |
 +------------------+------------------------------------------------------+
 
​​";;RedHatEnterpriseLinux7/RHEL7-99456
3224;;;;;;;;;5;"4, Check the image list 
 # openstack image list
​​";"Output:
 +--------------------------------------+----------+--------+
 | ID                                   | Name     | Status |
 +--------------------------------------+----------+--------+
 | e4e51b59-7f71-4698-b0ee-fec937ad2afb | r7-qcow2 | active |
 +--------------------------------------+----------+--------+
​​";;RedHatEnterpriseLinux7/RHEL7-99456
3224;;;;;;;;;6;"5. Create the raw  image.
 # openstack image create r7-raw  --disk-format raw  --container-format bare  --file /var/lib/libvirt/images/r.raw
 
 
​​";"Output:
 +------------------+------------------------------------------------------+
 | Field            | Value                                                |
 +------------------+------------------------------------------------------+
 | checksum         | 6a7b1f65a890d354a0cd778e97689b0b                     |
 | container_format | bare                                                 |
 | created_at       | 2017-08-29T05:57:50Z                                 |
 | disk_format      | raw                                                  |
 | file             | /v2/images/91bb93c0-ed57-43a3-9659-c90175a2fd96/file |
 | id               | 91bb93c0-ed57-43a3-9659-c90175a2fd96                 |
 | min_disk         | 0                                                    |
 | min_ram          | 0                                                    |
 | name             | r7-raw                                               |
 | owner            | cb5a47ffa8244cd99f65d6ba712be336                     |
 | protected        | False                                                |
 | schema           | /v2/schemas/image                                    |
 | size             | 5368709120                                           |
 | status           | active                                               |
 | tags             |                                                      |
 | updated_at       | 2017-08-29T05:59:50Z                                 |
 | virtual_size     | None                                                 |
 | visibility       | shared                                               |
 +------------------+------------------------------------------------------+
 
​​";;RedHatEnterpriseLinux7/RHEL7-99456
3224;;;;;;;;;7;"6. Check the image list 
 # openstack image list
 
 
​​";"Output:
 +--------------------------------------+----------+--------+
 | ID                                   | Name     | Status |
 +--------------------------------------+----------+--------+
 | e4e51b59-7f71-4698-b0ee-fec937ad2afb | r7-qcow2 | active |
 | 91bb93c0-ed57-43a3-9659-c90175a2fd96 | r7-raw   | active |
 +--------------------------------------+----------+--------+";;RedHatEnterpriseLinux7/RHEL7-99456
3224;;;;;;;;;8;"7. Delete the image in rhos env 
 # openstack image delete r7-qcow2
  # openstack image delete r7-raw
 
​​";"Output:
 no outputs, the images are successfully deleted
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-99456
3225;RHEL7-99462;ALIYUN-TC: Resize rootfs and  grow partition;ALIYUN-TC: Resize rootfs and grow partition;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;Create a VM on Aliyun with SystemDataDIsk 50G;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99462
3225;;;;;;;;;2;"Login and check partition size
 # df -h";"# df -h
 Filesystem      Size  Used Avail Use% Mounted on
 /dev/vda1        50G  1.5G   46G   4% /
 ...";;RedHatEnterpriseLinux7/RHEL7-99462
3226;RHEL7-99468;[Libvirt-rhos] Create/delete the volume in RHOS;Create/delete the volume in Openstack;Jingjing Shao (jishao);Medium;Positive;Automated;;1;"Click ""Project"" =>Click ""compute"" => Click ""Images"" => Click the ""drop down box""  => ""create Volume"".
 Input Volume Name: r7-qcow2-vol,  Type:scsi, Size (GB):10, Availability Zone: nova, Click ""Create Volume"" button.   The volume STATUS will be ""creating"", ""downloading"",""Available"".
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99468
3226;;;;;;;;;2;"1. Check the image list 
 # openstack image list
 
 
  ";"Output:
 +--------------------------------------+----------+--------+
 | ID                                   | Name     | Status |
 +--------------------------------------+----------+--------+
 | 28891905-3b7f-47a4-9dce-318d1d4530b0 | r7-qcow2 | active |
 | 91bb93c0-ed57-43a3-9659-c90175a2fd96 | r7-raw   | active |
 +--------------------------------------+----------+--------+";;RedHatEnterpriseLinux7/RHEL7-99468
3226;;;;;;;;;3;"2. Create a volume
 # openstack volume create r7-raw-vol   --size 8 --image r7-raw
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99468
3226;;;;;;;;;4;"3.Check the volume  list 
 # openstack volume list
    
​​";"Output:
 +--------------------------------------+--------------+-------------+------+-------------+
 | ID                                   | Display Name | Status      | Size | Attached to |
 +--------------------------------------+--------------+-------------+------+-------------+
 | 29cb52d8-94b8-4a64-aa54-508fda33c575 | r7-raw-vol   | downloading |    8 |             |
 +--------------------------------------+--------------+-------------+------+-------------+
 
 
 +--------------------------------------+--------------+-----------+------+-------------+
 | ID                                   | Display Name | Status    | Size | Attached to |
 +--------------------------------------+--------------+-----------+------+-------------+
 | 29cb52d8-94b8-4a64-aa54-508fda33c575 | r7-raw-vol   | available |    8 |             |
 +--------------------------------------+--------------+-----------+------+-------------+
 
​​";;RedHatEnterpriseLinux7/RHEL7-99468
3226;;;;;;;;;5;"4. Delete the volume r7-raw-vol
 openstack volume delete r7-raw-vol
​​";The volume deleted successfully;;RedHatEnterpriseLinux7/RHEL7-99468
3226;;;;;;;;;6;"5. Choose the qcow2 image redo the step1-4
​​";"All the result are as expected
​​";;RedHatEnterpriseLinux7/RHEL7-99468
3227;RHEL7-99474;ALIYUN-TC: Enable kdump;ALIYUN-TC: Enable kdump;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"Prepare a VM, the memory > 1G
 Enable kdump service. Add ""crashkernel=auto"" into kernel parameters. Restart VM";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99474
3227;;;;;;;;;2;"Trigger crash: echo ""c"" > /proc/sysrq";​​;;RedHatEnterpriseLinux7/RHEL7-99474
3227;;;;;;;;;3;"Wait for the VM restart. Check if the core file is generated
 # ll /var/crash";"[root@xin-sharedcli74 ~]# ll /var/crash/127.0.0.1-2017-08-29-16\:36\:45/
 total 33060
 -rw------- 1 root root 33814520 Aug 29 16:36 vmcore
 -rw-r--r-- 1 root root    36847 Aug 29 16:36 vmcore-dmesg.txt";;RedHatEnterpriseLinux7/RHEL7-99474
3228;RHEL7-99480;ALIYUN-TC: Check kernel parameters;ALIYUN-TC: Check kernel parameters;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"Start a VM
 Check kernel parameters:
 # cat /proc/cmdline";"The ""crashkernel"" is not in parameters. 
 There's no strange parameters.";Test Case;RedHatEnterpriseLinux7/RHEL7-99480
3229;RHEL7-99481;[domifaddr] get undefined vm's address by domifaddr or use --agent while it is not start on guest;--source agent need the guest agent service running on the guest;Yalan Zhang (yalzhang);Medium;Negative;Not Automated;;1;"1. check address for inactive domain
 # virsh list --all
  Id    Name                           State
 ----------------------------------------------------
  5     rhel7.2                        running
  -     rh7.1                          shut off
 # virsh domifaddr rh7.1";"error: Failed to query for interfaces addresses
 error: Requested operation is not valid: domain is not running";Test Case;RedHatEnterpriseLinux7/RHEL7-99481
3229;;;;;;;;;2;"2. for not exists domain
 # virsh domifaddr test";"error: failed to get domain 'test'
 error: Domain not found: no domain with matching name 'test'";;RedHatEnterpriseLinux7/RHEL7-99481
3229;;;;;;;;;3;"3. stop guest agent, then use --source agent
 On the guest, stop the qemu-guest-ga service
 #systemctl stop qemu-guest-agent
 then on the host,
 # virsh domifaddr rhel7.2 --source agent";"error: Failed to query for interfaces addresses
 error: Guest agent is not responding: QEMU guest agent is not connected";;RedHatEnterpriseLinux7/RHEL7-99481
3229;;;;;;;;;4;"4. start guest agent, the --source agent works well
 
 On the guest, start the qemu-guest-ga service, then on the host
 # virsh domifaddr rhel7.2 --source agent";"Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  lo         00:00:00:00:00:00    ipv4         127.0.0.1/8
  -          -                    ipv6         ::1/128
  eth0       52:54:00:1b:6f:e5    ipv6         fe80::5054:ff:fe1b:6fe5/64
  eth1       52:54:00:b9:14:c7    ipv4         192.168.123.86/24
  virbr0     52:54:00:15:c8:e1    ipv4         192.168.124.1/24
  virbr0-nic 52:54:00:15:c8:e1    N/A          N/A";;RedHatEnterpriseLinux7/RHEL7-99481
3230;RHEL7-99484;[Sound devices][ich6] Start a guest with ich6 sound model - no specified codec;"Verify guest starts with correct qemu command line when sound model is set to ich6
";Fangge Jin (fjin);High;Positive;Automated;;1;"Edit or define a guest with ""ich6"" sound device and spice graphic";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99484
3230;;;;;;;;;2;"Check guest dumpxml:
 # virsh dumpxml rhel7";"Sound device has pci address.
 
 Output:
 ... 
      <sound model='ich6'>
       <alias name='ua-4c8b8b34-d2a8-4482-ab03-aa389e77cca7'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
     </sound>
     <video>
​​";;RedHatEnterpriseLinux7/RHEL7-99484
3230;;;;;;;;;3;"start guest:
 # virsh start rhel7";​​;;RedHatEnterpriseLinux7/RHEL7-99484
3230;;;;;;;;;4;"Check qemu command line:
 # ps e -C qemu-kvm|grep -E 'sound|AUDIO'";"The command line includes the following options, the address of intel-hda is same as what's got in dumpxml:

 -device intel-hda,id=ua-4c8b8b34-d2a8-4482-ab03-aa389e77cca7,bus=pci.0,addr=0x8 -device hda-duplex,id=ua-4c8b8b34-d2a8-4482-ab03-aa389e77cca7-codec0,bus=ua-4c8b8b34-d2a8-4482-ab03-aa389e77cca7.0,cad=0
 ...QEMU_AUDIO_DRV=spice";;RedHatEnterpriseLinux7/RHEL7-99484
3230;;;;;;;;;5;"The following steps are optional:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99484
3230;;;;;;;;;6;"4. login into it to check:
 # lspci | grep -i audio";"Output:
 00:04.0 Audio device: Intel Corporation 82801FB/FBM/FR/FW/FRW (ICH6 Family)
 High Definition Audio Controller (rev 01)";;RedHatEnterpriseLinux7/RHEL7-99484
3230;;;;;;;;;7;"5. In guest, play a multi-media file
";"Can hear sound.

 Note:
 The driver info: https://mirrorglass.englab.nay.redhat.com/XWiki/bin/view/RHEL
 6.1%20vdsm/spice%20integration
";;RedHatEnterpriseLinux7/RHEL7-99484
3231;RHEL7-99510;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Verifying ldb;Verifying ldb;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99510
3232;RHEL7-99511;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Get Valid LDAP Users; Get Valid LDAP Users;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99511
3233;RHEL7-99512;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Get Valid LDAP Groups;" Get Valid LDAP Groups

";Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99512
3234;RHEL7-99513;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Users uidNumbers below Minimum and above Maximum;Users uidNumbers below Minimum and above Maximum;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99513
3235;RHEL7-99514;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Groups gidNumbers below Minimum and above Maximum;Groups gidNumbers below Minimum and above Maximum;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99514
3236;RHEL7-99515;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Enumerating Non Posix User;Enumerating Non Posix User;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99515
3237;RHEL7-99516;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Enumerating Non Posix Group; Enumerating Non Posix Group;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99516
3238;RHEL7-99517;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Authentication LDAP User with Password Assigned;Authentication LDAP User with Password Assigned;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99517
3239;RHEL7-99518;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Change Password and Authenticate LDAP user with FQDN;Change LDAP User's Password and Authenticate;Amith Kumar Peethambaran (apeetham);Medium;Positive;Not Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99518
3240;RHEL7-99519;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Authentication LDAP User Without Password Assigned;Authentication LDAP User Without Password Assigned;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99519
3241;RHEL7-99520;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Authentication LDAP User with Incorrect Password;Authentication LDAP User with Incorrect Password;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99520
3242;RHEL7-99522;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Get Valid LDAP Groups Fully Qualified Names;"Get Valid LDAP Groups Fully Qualified Names

";Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99522
3243;RHEL7-99523;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Get Valid LDAP Users Fully Qualified Names; Get Valid LDAP Users Fully Qualified Names;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99523
3244;RHEL7-99524;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: LDAP User uidNumber not Within Allowed Range;LDAP User uidNumber not Within Allowed Range;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99524
3245;RHEL7-99525;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Group gidNumber not Within Allowed Range;Group gidNumber not Within Allowed Range;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99525
3246;RHEL7-99526;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: New LDAP User Added Cache Test; New LDAP User Added Cache Test;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99526
3247;RHEL7-99527;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: New LDAP Group Added Negative Cache Test;New LDAP Group Added Negative Cache Test;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99527
3248;RHEL7-99529;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Change LDAP Users Password and Authenticate;Change LDAP Users Password and Authenticate;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99529
3249;RHEL7-99531;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Get Valid LDAP Users LDAPS; Get Valid LDAP Users LDAPS;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99531
3250;RHEL7-99532;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Get valid LDAP Groups LDAPS;Get valid LDAP Groups LDAPS;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99532
3251;RHEL7-99533;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Authentication LDAP User with Passwd Assigned Require Cert Never;Authentication LDAP User with Passwd Assigned Require Cert Never;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99533
3252;RHEL7-99535;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Get Valid LDAP Users Require Cert Hard;Get Valid LDAP Users Require Cert Hard;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99535
3253;RHEL7-99536;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Get Valid LDAP Groups Require Cert Hard;" Get Valid LDAP Groups Require Cert Hard

";Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99536
3254;RHEL7-99537;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Authentication LDAP User with Password Assigned Require Cert Hard; Authentication LDAP User with Password Assigned Require Cert Hard;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99537
3255;RHEL7-99539;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Get Valid LDAP Users Bind DN;"Get Valid LDAP Users Bind DN

";Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99539
3256;RHEL7-99540;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Get Valid LDAP Groups Bind DN;"Get Valid LDAP Groups Bind DN

";Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99540
3257;RHEL7-99541;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: LDAP BE Unreachable; LDAP BE Unreachable;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99541
3258;RHEL7-99550;[Timer devices] Start a guest with rtc timer tracking guest time;Verify guest can start successfully with correct qemu command line when rtc timer tracks guest time;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit for define a guest with rtc timer tracking guest time
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-99550
3258;;;;;;;;;2;start the guest;​​;;RedHatEnterpriseLinux7/RHEL7-99550
3258;;;;;;;;;3;"Check the qemu command line
 # ps -aux | grep rhel6
​​";"qemu command line includes:
 
 -rtc base=utc,clock=vm";;RedHatEnterpriseLinux7/RHEL7-99550
3259;RHEL7-99551;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: id Command and Group Memberships; id Command and Group Memberships;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99551
3260;RHEL7-99553;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Verify Groups and Users same OU;Verify Groups and Users same OU;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99553
3261;RHEL7-99554;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Case Sensitive Group Memberships;Case Sensitive Group Memberships;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99554
3262;RHEL7-99555;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Change LDAP Domain User Passwd default chpass provider;Change LDAP Domain User Passwd default chpass provider;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99555
3263;RHEL7-99556;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Wrapping the value for ldap access filter in parentheses causes ldap search ext to fail bz600352;Wrapping the value for ldap access filter in parentheses causes ldap search ext to fail bz600352;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99556
3264;RHEL7-99557;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Multiple entries of ldap access filter and lower one wins;Multiple entries of ldap access filter and lower one wins;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99557
3265;RHEL7-99558;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: ldap access filter with a global character;ldap access filter with a global character;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99558
3266;RHEL7-99559;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: ldap access filter with memberOf option; ldap access filter with memberOf option;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99559
3267;RHEL7-99560;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: ldap access filter with long version of memberOf option; ldap access filter with long version of memberOf option;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99560
3268;RHEL7-99561;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Multiple entries of ldap search file and lower one wins offline;Multiple entries of ldap search file and lower one wins offline;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99561
3269;RHEL7-99562;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: ldap access filter with a global character offline; ldap access filter with a global character offline;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99562
3270;RHEL7-99563;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: ldap access filter with memberOf option offline;ldap access filter with memberOf option offline;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99563
3271;RHEL7-99564;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: ldap access filter with long version of memberOf option offline; ldap access filter with long version of memberOf option offline;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99564
3272;RHEL7-99565;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: ldap access allow attribute in cache LDAP ldb; ldap access allow attribute in cache LDAP ldb;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99565
3273;RHEL7-99566;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: SSSD segfaults when c ares is using tcp scokets; SSSD segfaults when c ares is using tcp scokets;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99566
3274;RHEL7-99568;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Authentication succeeds if user is in whitelist;Authentication succeeds if user is in whitelist;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99568
3275;RHEL7-99569;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Authentication fails if the user is not in whitelist;Authentication fails if the user is not in whitelist;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99569
3276;RHEL7-99570;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: getent returns both users; getent returns both users;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99570
3277;RHEL7-99572;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Authentication succeeds and connection closes if user is in blacklist;Authentication succeeds and connection closes if user is in blacklist;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99572
3278;RHEL7-99573;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: Authentication succeeds if the user is not in blacklist;Authentication succeeds if the user is not in blacklist;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99573
3279;RHEL7-99574;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: sssd with ldap backend throws error domain log bz1227685;sssd with ldap backend throws error domain log bz1227685;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99574
3280;RHEL7-99575;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: SSSD ldap ldap rfc2307bis test trac 595 620 621 626;SSSD ldap ldap rfc2307bis test trac 595 620 621 626;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99575
3281;RHEL7-99576;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: SSSD ldap ldap rfc2307 test trac 622 625;SSSD ldap ldap rfc2307 test trac 622 625;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99576
3282;RHEL7-99578;IDM-SSSD-TC: ldap_provider: ldap_id_ldap_auth: client idle timeout set to 30 bz827036;client idle timeout set to 30 bz827036;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99578
3283;RHEL7-99580;IDM-SSSD-TC: ldap_provider: non_default_ldap_attr: Verify BZ 750373;Verify BZ 750373;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99580
3284;RHEL7-99581;IDM-SSSD-TC: ldap_provider: non_default_ldap_attr: Verify BZ 748898 and BZ 748864;Verify BZ 748898 and BZ 748864;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99581
3285;RHEL7-99582;IDM-SSSD-TC: ldap_provider: non_default_ldap_attr: Verify BZ 801407;Verify BZ 801407;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99582
3286;RHEL7-99584;IDM-SSSD-TC: ldap_provider: non_default_ldap_attr: user password change; user password change;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99584
3287;RHEL7-99585;IDM-SSSD-TC: ldap_provider: non_default_ldap_attr: auth a user with incorrect password;auth a user with incorrect password;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99585
3288;RHEL7-99587;IDM-SSSD-TC: ldap_provider: non_default_ldap_attr: Enumerate user and group and then run auth; Enumerate user and group and then run auth;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99587
3289;RHEL7-99588;IDM-SSSD-TC: ldap_provider: non_default_ldap_attr: Enumerate rfc2307bis user and group and run auth bz748874;Enumerate rfc2307bis user and group and run auth bz748874;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99588
3290;RHEL7-99589;IDM-SSSD-TC: ldap_provider: non_default_ldap_attr: Test shadow attributes bz748873;Test shadow attributes bz748873;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99589
3291;RHEL7-99591;IDM-SSSD-TC: ldap_provider: non_default_ldap_attr: Verifying absence of Unknown user error message;Verifying absence of Unknown user error message;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99591
3292;RHEL7-99592;IDM-SSSD-TC: ldap_provider: non_default_ldap_attr: Verifying presence of Unknown user error message;Verifying presence of Unknown user error message;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99592
3293;RHEL7-99593;IDM-SSSD-TC: ldap_provider: non_default_ldap_attr: Authenticate SSSD user and verify presence of Unknown user error message;Authenticate SSSD user and verify presence of Unknown user error message;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99593
3294;RHEL7-99595;IDM-SSSD-TC: krb_provider: krb5_use_kdcinfo: Start krb5 use kdcinfo tests;Start krb5 use kdcinfo tests;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99595
3295;RHEL7-99597;IDM-SSSD-TC: krb_provider: krb_access_provider: k5login is an empty file;" k5login is an empty file

";Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99597
3296;RHEL7-99598;IDM-SSSD-TC: krb_provider: krb_access_provider: k5login has testuser3; k5login has testuser3;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99598
3297;RHEL7-99599;IDM-SSSD-TC: krb_provider: krb_access_provider: k5login has testuser3 and testuser4; k5login has testuser3 and testuser4;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99599
3298;RHEL7-99600;IDM-SSSD-TC: krb_provider: krb_access_provider: k5login has testuser3 and testuser4 and testuser3 is deleted; k5login has testuser3 and testuser4 and testuser3 is deleted;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99600
3299;RHEL7-99602;IDM-SSSD-TC: krb_provider: krb_credential_cache: Access provider is simple and sssd is in krb5 ccachedir; Access provider is simple and sssd is in krb5 ccachedir;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99602
3300;RHEL7-99603;IDM-SSSD-TC: krb_provider: krb_credential_cache: Check enumeration and file permissions after setting krb5 ccachedir;Check enumeration and file permissions after setting krb5 ccachedir;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99603
3301;RHEL7-99604;IDM-SSSD-TC: krb_provider: krb_credential_cache: Check enumeration and file permissions after setting krb5 ccachedir with percent u option;Check enumeration and file permissions after setting krb5 ccachedir with percent u option;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99604
3302;RHEL7-99605;IDM-SSSD-TC: krb_provider: krb_credential_cache: Check enumeration and file permissions after setting krb5 ccachedir with percent U option;Check enumeration and file permissions after setting krb5 ccachedir with percent U option;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99605
3303;RHEL7-99606;IDM-SSSD-TC: krb_provider: krb_credential_cache: Check enumeration and file permissions after setting krb5 ccachedir with percent p option;Check enumeration and file permissions after setting krb5 ccachedir with percent p option;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99606
3304;RHEL7-99607;IDM-SSSD-TC: krb_provider: krb_credential_cache: Check enumeration and file permissions after setting krb5 ccachedir with percent r option;Check enumeration and file permissions after setting krb5 ccachedir with percent r option;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99607
3305;RHEL7-99608;IDM-SSSD-TC: krb_provider: krb_credential_cache: Check enumeration and file permissions after setting krb5 ccachedir with percent h option;"Check enumeration and file permissions after setting krb5 ccachedir with percent h option
";Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99608
3306;RHEL7-99609;IDM-SSSD-TC: krb_provider: krb_credential_cache: Check enumeration and file permissions after setting krb5 ccachedir with percent d option;Check enumeration and file permissions after setting krb5 ccachedir with percent d option;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99609
3307;RHEL7-99610;IDM-SSSD-TC: krb_provider: krb_credential_cache: Check enumeration and file permissions after setting krb5 ccachedir with percent P option;Check enumeration and file permissions after setting krb5 ccachedir with percent P option;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99610
3308;RHEL7-99611;IDM-SSSD-TC: krb_provider: krb_credential_cache: Check enumeration and file permissions after setting krb5 ccachedir with double percent option;Check enumeration and file permissions after setting krb5 ccachedir with double percent option;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99611
3309;RHEL7-99612;IDM-SSSD-TC: krb_provider: krb_credential_cache: Creation of lastUpdate Attribute on First Save to Cache;Creation of lastUpdate Attribute on First Save to Cache;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99612
3310;RHEL7-99613;IDM-SSSD-TC: krb_provider: krb_credential_cache: krb5 validate is set in sssd conf bz548423;krb5 validate is set in sssd conf bz548423;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99613
3311;RHEL7-99614;IDM-SSSD-TC: krb_provider: krb_credential_cache: Set ldap krb5 ticket lifetime; krb_credential_cache: Set ldap krb5 ticket lifetime;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99614
3312;RHEL7-99615;IDM-SSSD-TC: krb_provider: krb_credential_cache: Set default krb5rcachedir bz732974;Set default krb5rcachedir bz732974;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99615
3313;RHEL7-99616;IDM-SSSD-TC: krb_provider: krb_credential_cache: Set krb5 rcache dir to var cache krb5rcache bz748867;Set krb5 rcache dir to var cache krb5rcache bz748867;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99616
3314;RHEL7-99617;IDM-SSSD-TC: krb_provider: krb_credential_cache: LDAP plus GSSAPI needs explicit Kerberos realm bz748860;LDAP plus GSSAPI needs explicit Kerberos realm bz748860;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99617
3315;RHEL7-99619;IDM-SSSD-TC: krb_provider: krb_fast_principal: valid principal;valid principal;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99619
3316;RHEL7-99620;IDM-SSSD-TC: krb_provider: krb_fast_principal: invalid principal;invalid principal;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99620
3317;RHEL7-99621;IDM-SSSD-TC: krb_provider: krb_fast_principal: principal at TEST COM; principal at TEST domain;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99621
3318;RHEL7-99622;IDM-SSSD-TC: krb_provider: krb_fast_principal: null principal; null principal;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99622
3319;RHEL7-99623;IDM-SSSD-TC: krb_provider: krb_fast_principal: valid principal and krb5 validate true;valid principal and krb5 validate to true;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99623
3320;RHEL7-99624;IDM-SSSD-TC: krb_provider: krb_fast_principal: invalid principal and krb5 validate true; invalid principal and krb5 validate to true;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99624
3321;RHEL7-99625;IDM-SSSD-TC: krb_provider: krb_fast_principal: principal at TEST COM and krb5 validate true; principal at TEST COM and krb5 validate to true;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99625
3322;RHEL7-99626;IDM-SSSD-TC: krb_provider: krb_fast_principal: null principal and krb5 validate true;"null principal and krb5 validate to true

";Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99626
3323;RHEL7-99628;[Timer devices] Start a guest with kvmclock timer disabled;"Verify guest can start successfully with correct qemu command line when kvmclock is disabled
 Bug 783921 - libvirt cannot disable kvmclock";Fangge Jin (fjin);High;Positive;Not Automated;;1;Edit or define a guest, set kvmclock present to no;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99628
3323;;;;;;;;;2;# virsh start guest;"
​​";;RedHatEnterpriseLinux7/RHEL7-99628
3323;;;;;;;;;3;# ps -ef |grep kvm;"qemu command line includes '-cpu xxxxxx,-kvmclock':
 
 -cpu ...,-kvmclock";;RedHatEnterpriseLinux7/RHEL7-99628
3323;;;;;;;;;4;"The following steps are optional:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99628
3323;;;;;;;;;5;"Also login the guest and check
 # cat /sys/devices/system/clocksource/clocksource0/current_clocksource
 
 
 
​​";"Output:
 tsc";;RedHatEnterpriseLinux7/RHEL7-99628
3323;;;;;;;;;6;"# dmesg |grep clock
​​";"The clocksource should be the same from sysfs and dmesg.

 Output:
 hpet clockevent registered
 Switching to clocksource hpet
 rtc_cmos 00:01: setting system clock to 2013-04-23 05:58:19 UTC (1366696699)
 Refined TSC clocksource calibration: 1999.897 MHz.
 Switching to clocksource tsc";;RedHatEnterpriseLinux7/RHEL7-99628
3324;RHEL7-99629;IDM-SSSD-TC: krb_provider: krb_ldap_connection: Default timeout;Default timeout;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99629
3325;RHEL7-99630;IDM-SSSD-TC: krb_provider: krb_ldap_connection: timeout set to 100;timeout set to 100;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99630
3326;RHEL7-99631;IDM-SSSD-TC: krb_provider: krb_ldap_connection: timeout set to INT MAX plus 1;timeout set to INT MAX plus 1;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99631
3327;RHEL7-99632;IDM-SSSD-TC: krb_provider: krb_ldap_connection: timeout set to minus 100;timeout set to minus 100;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99632
3328;RHEL7-99633;IDM-SSSD-TC: krb_provider: krb_ldap_connection: timeout set to 0;timeout set to 0;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99633
3329;RHEL7-99634;IDM-SSSD-TC: krb_provider: krb_ldap_connection: SASL and GSSAPI connection expire timeout set to TGT lifetime if it is a lesser value;SASL and GSSAPI connection expire timeout set to TGT lifetime if it is a lesser value;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99634
3330;RHEL7-99636;IDM-SSSD-TC: krb_provider: krb_minssf: ldap sasl minssf set to minus 1 Default settings; ldap sasl minssf set to minus 1 Default settings;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99636
3331;RHEL7-99637;IDM-SSSD-TC: krb_provider: krb_minssf: ldap sasl minssf set to 112;ldap sasl minssf set to 112;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99637
3332;RHEL7-99638;IDM-SSSD-TC: krb_provider: krb_minssf: ldap sasl minssf set to minus 1 and minssf in ldap conf;ldap sasl minssf set to minus 1 and minssf in ldap conf;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99638
3333;RHEL7-99639;IDM-SSSD-TC: krb_provider: krb_minssf: ldap sasl minssf set to 0;ldap sasl minssf set to 0;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99639
3334;RHEL7-99640;IDM-SSSD-TC: krb_provider: krb_minssf: ldap sasl minssf set to 56;ldap sasl minssf set to 56;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99640
3335;RHEL7-99644;IDM-SSSD-TC: krb_provider: krb_pwd_expire: default pwd expiration warning;default pwd expiration warning;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99644
3336;RHEL7-99645;IDM-SSSD-TC: krb_provider: krb_pwd_expire: pwd expiration warning set to 0; pwd expiration warning set to 0;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99645
3337;RHEL7-99646;IDM-SSSD-TC: krb_provider: krb_pwd_expire: pwd expiration warning set to 15; pwd expiration warning set to 15;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99646
3338;RHEL7-99647;IDM-SSSD-TC: krb_provider: krb_pwd_expire: Default pwd expiration warning and password will expire in 6 days on server;Default pwd expiration warning and password will expire in 6 days on server;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99647
3339;RHEL7-99648;IDM-SSSD-TC: krb_provider: krb_pwd_expire: pwd expiration warning set to 7;pwd expiration warning set to 7;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99648
3340;RHEL7-99649;IDM-SSSD-TC: krb_provider: krb_tgt_renewal: krb5 ccache file renewal on password change bz748846;" krb5 ccache file renewal on password change bz748846

";Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99649
3341;RHEL7-99650;IDM-SSSD-TC: krb_provider: krb_tgt_renewal: krb5 renewable lifetime with all valid suffixes; krb5 renewable lifetime with all valid suffixes;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99650
3342;RHEL7-99651;IDM-SSSD-TC: krb_provider: krb_tgt_renewal: krb5 lifetime with all valid suffixes; krb5 lifetime with all valid suffixes;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99651
3343;RHEL7-99652;IDM-SSSD-TC: krb_provider: krb_tgt_renewal: Checking for renewal messages; Checking for renewal messages;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99652
3344;RHEL7-99653;IDM-SSSD-TC: krb_provider: krb_tgt_renewal: Does not read renewable ccache at startup bz889168;Does not read renewable ccache at startup bz889168;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99653
3345;RHEL7-99654;IDM-SSSD-TC: krb_provider: krb_tgt_renewal: Checking for renewal messages after sssd comes back online without restart stimulating offline and online;Checking for renewal messages after sssd comes back online without restart stimulating offline and online;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99654
3346;RHEL7-99655;IDM-SSSD-TC: krb_provider: krb_tgt_renewal: Check for renewal after tgt is renewed;Check for renewal after tgt is renewed;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99655
3347;RHEL7-99658;[screenshot][spice] Take screenshot of a current domain console - one video, head>1;Verify screenshot can be taken successfully when RHEL guest has multiple displays;Fangge Jin (fjin);High;Positive;Manual Only;;1;Prepare a RHEL guest image;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99658
3347;;;;;;;;;2;"Edit or define the guest with such setting:
 1) with one video device and heads>1
 2) other configuration(including spicevmc, spice graphic), refer to: Configure Multiple Displays";​​;;RedHatEnterpriseLinux7/RHEL7-99658
3347;;;;;;;;;3;"#virsh start $guest
"; ;;RedHatEnterpriseLinux7/RHEL7-99658
3347;;;;;;;;;4;"Connect to guest by virt-viewer :
 #virt-viewer $guest
";"
​​";;RedHatEnterpriseLinux7/RHEL7-99658
3347;;;;;;;;;5;"Open all the displays:
      On the virt-viewer menu, view->displays->check on all the displays";"
​​";;RedHatEnterpriseLinux7/RHEL7-99658
3347;;;;;;;;;6;"Do some random operations in guest
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-99658
3347;;;;;;;;;7;"#virsh screenshot $guest --file /tmp/screen0.ppm --screen 0

";"Screen is saved successfully.

 Output:
 Screenshot saved to /tmp/screen0.ppm, with type of image/x
 -portable-pixmap
";;RedHatEnterpriseLinux7/RHEL7-99658
3347;;;;;;;;;8;#virsh screenshot $guest --file /tmp/screen1.ppm --screen 1;"Screen is saved successfully. 
​​";;RedHatEnterpriseLinux7/RHEL7-99658
3347;;;;;;;;;9;Check the above saved screen file;"1) The saved screen file includes the screen of all the displays, and looks same as what's seen in virt-viewer.
 2) screen 1 is same as screen 0
​​";;RedHatEnterpriseLinux7/RHEL7-99658
3348;RHEL7-99678;[vnc&spice] [ipv4] Start a guest with graphic listening on ipv4 wildcard;Verify guest can start and be connected successfully when set graphic listening on ipv4 wildcard in guest xml;Fangge Jin (fjin);Critical;Positive;Automated;;1;"Edit or define a guest with such setting:
 
* 1) set graphic listen address to ipv4 wildcard(0.0.0.0)
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99678
3348;;;;;;;;;2;start the guest;​​;;RedHatEnterpriseLinux7/RHEL7-99678
3348;;;;;;;;;3;"Check the listening ip:
 
* # netstat -tunap|grep 590
";"qemu-kvm listens on 0.0.0.0
 
 Output:
 tcp        0      0 0.0.0.0:5900          0.0.0.0:*               LISTEN      27315/qemu-kvm      ";;RedHatEnterpriseLinux7/RHEL7-99678
3348;;;;;;;;;4;"On client host, connect to guest by host public ip:
 
* #remote-viewer vnc://10.66.93.134:5905

 Note:
 
* 10.66.93.134 is the server host public ip
";Connect successfully;;RedHatEnterpriseLinux7/RHEL7-99678
3349;RHEL7-99679;[vnc&spice] [ipv6] Start a guest with graphic listening on ipv6 localhost;Verify guest can start and be connected successfully when set graphic listening on ipv6 localhost in guest xml;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) set graphic listen address to ipv6 localhost(::1)";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99679
3349;;;;;;;;;2;"start the guest
 #virsh start rhel7";​​;;RedHatEnterpriseLinux7/RHEL7-99679
3349;;;;;;;;;3;"Check display ip:
 # virsh dumpxml rhel7|grep gra
";"Display ip is ::1

 Output:
     <graphics type='vnc' port='5900' autoport='yes' listen='::1'>
     </graphics>";;RedHatEnterpriseLinux7/RHEL7-99679
3349;;;;;;;;;4;"Connect to guest by ipv4 address 127.0.0.1:
 #remote-viewer protocol://127.0.0.1:5900
 
 Note: 
 5900 is the port got in dumpxml
​​";"Connect failed
​​";;RedHatEnterpriseLinux7/RHEL7-99679
3349;;;;;;;;;5;"Connect to guest by ipv6 address ::1
 #remote-viewer protocol://[::1]:5900
​​";"Connect successfully
​​";;RedHatEnterpriseLinux7/RHEL7-99679
3350;RHEL7-99680;[vnc][vnc_listen] Start a guest with vnc listening on default vnc_listen address;"set listen type=address for vnc in guest xml but don't set address value and vnc_listen in qemu.conf, the default value for vnc_listen - 127.0.0.1 will take effect
";Fangge Jin (fjin);High;Positive;Not Automated;;1;Don't set vnc_listen in /etc/libvirt/qemu.conf;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99680
3350;;;;;;;;;2;"Edit or define a guest with such setting:
 1) with vnc graphic
 2) set vnc listen type to address, but don't set a specified address for vnc in domain xml";​​;;RedHatEnterpriseLinux7/RHEL7-99680
3350;;;;;;;;;3;" Start guest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99680
3350;;;;;;;;;4;"Dumpxml:
 # virsh dumpxml rhel7";"vnc listens on 127.0.0.1.
 
 Output:
 
     <graphics type='vnc' port='5900' autoport='yes' listen='127.0.0.1'>
       <listen type='address' address='127.0.0.1'/>
     </graphics>
​​";;RedHatEnterpriseLinux7/RHEL7-99680
3350;;;;;;;;;5;"Check qemu command line:
 
​​";"Qemu command line includes:
 
 -vnc 127.0.0.1:0
 
 Note:
 The number after "":"" is calculated by port-5900.
​​";;RedHatEnterpriseLinux7/RHEL7-99680
3350;;;;;;;;;6;"On local host, connect to guest by virt-viewer:
 #remote-viewer vnc://127.0.0.1:5900";"Connect successfully
​​";;RedHatEnterpriseLinux7/RHEL7-99680
3351;RHEL7-99681;[spice][spice_listen] start a guest with spice listening on default spice_listen address;set listen type=address for spice in guest xml but don't set address value and spice_listen in qemu.conf, the default value for spice_listen - 127.0.0.1 will take effect;Fangge Jin (fjin);High;Positive;Not Automated;;1;Don't set spice_listen in /etc/libvirt/qemu.conf;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99681
3351;;;;;;;;;2;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set spice listent type to address, but don't set a specified address for spice in domain xml";​​;;RedHatEnterpriseLinux7/RHEL7-99681
3351;;;;;;;;;3;" Start guest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99681
3351;;;;;;;;;4;"Dumpxml:
 # virsh dumpxml rhel7";"Spice listens on 127.0.0.1.
 
 Output:
 
     <graphics type='spice' port='5900' autoport='yes' listen='127.0.0.1'>
       <listen type='address' address='127.0.0.1'/>
     </graphics>
​​";;RedHatEnterpriseLinux7/RHEL7-99681
3351;;;;;;;;;5;"Check qemu command line:
 
​​";"Qemu command line includes:
 
 -spice port=5900,addr=127.0.0.1,disable-ticketing,seamless-migration=on 
​​";;RedHatEnterpriseLinux7/RHEL7-99681
3351;;;;;;;;;6;"On local host, connect to guest by virt-viewer:
 #remote-viewer spice://127.0.0.1:5900";"Connect successfully
​​";;RedHatEnterpriseLinux7/RHEL7-99681
3352;RHEL7-99682;[vnc&spice] Start a guest with graphic listening on hostname;Verify guest can start and be connected successfully when graphic listening to hostname in guest xml;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) set graphic listen address to hostname";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99682
3352;;;;;;;;;2;"Start guest
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99682
3352;;;;;;;;;3;"Check guest dumpxml:
 # virsh dumpxml rhel7
​​";"The listen address is the hostname, same as the setup.
 
 Output:
     <graphics type='spice' port='5900' autoport='yes' listen='fjin-4-152'>
       <listen type='address' address='fjin-4-152'/>
     </graphics> 
​​";;RedHatEnterpriseLinux7/RHEL7-99682
3352;;;;;;;;;4;"Check the tcp socket:
 # netstat -tunap|grep 5900
 
​​";"Output:
 Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    
 tcp        0         0          10.66.144.57:5900    0.0.0.0:*                      LISTEN      30483/qemu-kvm
 
 Note: 
 1) In ""Local Address"", 10.66.144.57 is the first ip retrieved by ""#hostname -i""; port is the port got in dumpxml
 2) If the above ip is ipv6 address, ""Proto"" will be tcp6; if the above ip is ipv4 address, ""Proto"" will be tcp.
​​";;RedHatEnterpriseLinux7/RHEL7-99682
3352;;;;;;;;;5;"On client host, connect to guest graphic by virt-viewer:
 # remote-viewer spice://10.66.144.57:5900
";"
​​";;RedHatEnterpriseLinux7/RHEL7-99682
3352;;;;;;;;;6;"Do some operation in the virt-viewer to verify the graphic works well, for example:
 # date";​​;;RedHatEnterpriseLinux7/RHEL7-99682
3353;RHEL7-99684;[vnc&spice][ipv4] Start a guest with graphic listening on the host's public IPv4 address;Verify guest can start and be connected successfully when graphic listening to host's public IPv4 address in guest xml;Fangge Jin (fjin);High;Positive;Automated;;1;"Edit or define a guest with such setting:
 1) set graphic listen address to host public IPv4 address";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99684
3353;;;;;;;;;2;# virsh start rhel;​​;;RedHatEnterpriseLinux7/RHEL7-99684
3353;;;;;;;;;3;"# ps aux|grep qemu
​​";"For spice, the qemu command line includes ""addr=10.66.144.57"" :
 -spice port=5900,addr=10.66.144.57,...
 
 For vnc, the qemu command line includes:
 -vnc 10.66.144.57:0
 
 Note:
 The vnc port in qemu command line is calculated by port-5900.";;RedHatEnterpriseLinux7/RHEL7-99684
3353;;;;;;;;;4;"# netstat -tunap | grep 5900
​​";"Output:
 Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    
 tcp     0           0           10.66.144.57:5900    0.0.0.0:*                      LISTEN   10470/qemu-kvm    
 
 Note:
 1) The ""Proto"" is tcp.
 2)In ""Local Address"", 10.66.144.57 is the server host public ipv4 address; 5900 is the port got in qemu command line.
​​";;RedHatEnterpriseLinux7/RHEL7-99684
3353;;;;;;;;;5;"On client host, connect guest by remote-viewer:
 # remote-viewer spice://10.66.144.57:5900
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99684
3354;RHEL7-99685;[vnc&spice][ipv6] Start a guest with graphic listening on the host's public IPv6 address;"Verify guest can start and be connected successfully when graphic listening to host's public IPv6 address in guest xml
";Fangge Jin (fjin);High;Positive;Automated;;1;"Edit or define a guest with such setting:
 1) set graphic listen address to host public IPv6 address";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99685
3354;;;;;;;;;2;# virsh start rhel;​​;;RedHatEnterpriseLinux7/RHEL7-99685
3354;;;;;;;;;3;"# ps aux|grep qemu
​​";"For spice, the qemu command line includes ""addr=20f8::2"" :
 -spice port=5900,addr=20f8::2,...
 
 For vnc, the qemu command line includes:
 -vnc [20f8::2]:0
 
 Note:
 The vnc port in qemu command line is calculated by port-5900.";;RedHatEnterpriseLinux7/RHEL7-99685
3354;;;;;;;;;4;"# netstat -tunap | grep 5900
​​";"Output:
 Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    
 tcp6   0           0           20f8::2:5900              :::*                               LISTEN   10470/qemu-kvm   
 
 Note:
 1) The ""Proto"" is tcp6.
 2)In ""Local Address"", 20f8::2 is the server host public ipv6 address; 5900 is the port got in qemu command line.
​​";;RedHatEnterpriseLinux7/RHEL7-99685
3354;;;;;;;;;5;"On client host, connect guest by remote-viewer:
 # remote-viewer spice://[20f8::2]:5905
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99685
3355;RHEL7-99690;[vnc] Start a guest with vnc port set to a valid value;Verify the port can take effect when set vnc port to a valid value. Cover these values: 5900, 65535;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with vnc graphic
 2) set vnc port to a valid value(according to the test matrix in descriptoin field)
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99690
3355;;;;;;;;;2;Start guest.;​​;;RedHatEnterpriseLinux7/RHEL7-99690
3355;;;;;;;;;3;"Check the guest's port in dumpxml:
 #virsh dumpxml rhel6
 
 
​​";"port is same as setting, autoport is no.
 
 Output:
 <graphics type='vnc' port='port' autoport='no' listen='0.0.0.0'>
     <listen type='address' address='0.0.0.0'/>
 </graphics>";;RedHatEnterpriseLinux7/RHEL7-99690
3355;;;;;;;;;4;"Check qemu command line:
 #ps -aef | grep kvm";"vnc port is 0 in qemu command line.
 
 -vnc 0.0.0.0:0

 Note:
 vnc port is calculated by port-5900 in qemu command line.
";;RedHatEnterpriseLinux7/RHEL7-99690
3355;;;;;;;;;5;"connect the guest on server host:
 #remote-viewer vnc://$ip_addr:$port_number
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99690
3355;;;;;;;;;6;"connect the guest on client host:
 #virt-viewer rhel6";​​;;RedHatEnterpriseLinux7/RHEL7-99690
3356;RHEL7-99691;[vnc] Start and connect to a guest with vnc autoport enabled;Verify a port will be auto-generated when set vnc autoport to yes;Fangge Jin (fjin);Critical;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with vnc graphic
 2) set vnc autoport=yes
 3) don't set vnc port";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99691
3356;;;;;;;;;2;Start guest.;​​;;RedHatEnterpriseLinux7/RHEL7-99691
3356;;;;;;;;;3;"Check the vnc port
 #virsh dumpxml rhel6
​​";"A port is auto-generated for vnc.
 
 Output:
 ...
 <graphics type='vnc' port='5901' autoport='yes' listen='0.0.0.0'>
     <listen type='address' address='0.0.0.0'/>
 </graphics>";;RedHatEnterpriseLinux7/RHEL7-99691
3356;;;;;;;;;4;"#ps -aef|grep kvm
 
​​";"vnc port is 1 in qemu command line. Output includes;
 
 -vnc 0.0.0.0:1

 Note:
 vnc port is calculated by port-5900 in qemu command line.";;RedHatEnterpriseLinux7/RHEL7-99691
3356;;;;;;;;;5;"connect the guest on server host:
 #remote-viewer vnc://$ip_addr:$port_number";"Both the remote-viewer and viewer should connect the guest successfully
​​";;RedHatEnterpriseLinux7/RHEL7-99691
3356;;;;;;;;;6;"connect the guest on client host:
 #virt-viewer rhel6";​​;;RedHatEnterpriseLinux7/RHEL7-99691
3357;RHEL7-99692;[spice] [tls] Start guest with spice   tlsPort=-1;"Verify that only tls-port will be generated when guest starts with spice autoport disabled and tlsPort=-1 and spice tls enabled in qemu.conf.
Note: tlsPort=-1 means that tlsport will be auto-generated.";Fangge Jin (fjin);High;Positive;Not Automated;;1;Set up spice tls env on host;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99692
3357;;;;;;;;;2;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set spice tlsPort='-1', autoport=no
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99692
3357;;;;;;;;;3;Start guest;​​;;RedHatEnterpriseLinux7/RHEL7-99692
3357;;;;;;;;;4;"Check qemu command line:
 # ps -aef|grep kvm";"should only get -spice tls-port=xxxx;
 shouldn't see the ""-spice port=0"" in the qemu command line";;RedHatEnterpriseLinux7/RHEL7-99692
3358;RHEL7-99693;[spice] Start guest with spice defaultMode=secure and spice tls disabled;Verify that guest will fail to start when spice tls is disabled, and set spice autoport=yes and defaultMode=secure;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set default mode to secure
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99693
3358;;;;;;;;;2;Start guest.;"guest fails to start.
 
 Output:
 error: Failed to start domain win7
 error: unsupported configuration: Auto allocation of spice TLS port requested
 but spice TLS is disabled in qemu.conf";;RedHatEnterpriseLinux7/RHEL7-99693
3359;RHEL7-99694;[spice] [tls] Start guest with spice defaultMode=secure and some insecure channels;"Verify that both port and tls-port will be generated when guest starts with spice autoport and tls enabled, and with defaultMode=secure and insecure channels
";Fangge Jin (fjin);High;Positive;Not Automated;;1;Set up spice tls env on host;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99694
3359;;;;;;;;;2;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set default mode to secure
 3) set some insecure channels";​​;;RedHatEnterpriseLinux7/RHEL7-99694
3359;;;;;;;;;3;Start guest.;​​;;RedHatEnterpriseLinux7/RHEL7-99694
3359;;;;;;;;;4;# ps -aef | grep kvm;should get -spice port=xxxx,tls-port=xxxx;;RedHatEnterpriseLinux7/RHEL7-99694
3360;RHEL7-99714;[spice] [tls] Start guest with spice  defaultMode=secure and all channels=insecure;"Verify that guest can start successfully when spice defaultMode=secure and all channels=insecure, and both port and tlsPort are generated
Bug 1143832 - [graphical buffers]start guest failed when graphics defaultMode='secure', meanwhile add eight different channels mode='insecure'";Fangge Jin (fjin);High;Positive;Not Automated;;1;Set up spice tls env on host;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99714
3360;;;;;;;;;2;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set default mode to secure, and all the eight channels to ""insecure""
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99714
3360;;;;;;;;;3;"Start guest
 # virsh start vm1
 Domain vm1 started";​​;;RedHatEnterpriseLinux7/RHEL7-99714
3360;;;;;;;;;4;"Check the display URI of guest.
 # virsh domdisplay vm1
​​";"There are both port and tlsPort for spice.
 
 Output:
 spice://localhost:5900?tls-port=5901";;RedHatEnterpriseLinux7/RHEL7-99714
3361;RHEL7-99715;[spice]  Start guest with spice  defaultMode=insecure and all channels=insecure;Verify that guest can start successfully when spice defaultMode=insecure and all channels=insecure;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set both default mode and all the eight channels to insecure.
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99715
3361;;;;;;;;;2;"Start the guest
 #virsh start win
​​";"
 
​​";;RedHatEnterpriseLinux7/RHEL7-99715
3361;;;;;;;;;3;"Check the qemu cmd
 #ps aux|grep win";"In qemu command line, both default channel and all the eight channels are in plaintext.
 
 Output:
 ...
 -spice port=5900,addr=0.0.0.0,disable-ticketing,plaintext-channel=default,plaintext-channel=main,plaintext-channel=display,plaintext-channel=inputs,plaintext-channel=cursor,plaintext-channel=playback,plaintext-channel=record,plaintext-channel=smartcard,plaintext-channel=usbredir,seamless-migration=on -k en-us";;RedHatEnterpriseLinux7/RHEL7-99715
3362;RHEL7-99716;[spice] [tls] Start guest with spice  defaultMode=secure and all channels=secure;Verify that guest can start successfully when spice defaultMode=secure and all channels=secure, and only tlsPort is generated.;Fangge Jin (fjin);High;Positive;Not Automated;;1;Set up spice tls env on host;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99716
3362;;;;;;;;;2;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set both default mode and all the eight channels to secure.
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99716
3362;;;;;;;;;3;"Start the guest
 #virsh start win
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99716
3362;;;;;;;;;4;"check the qemu cmd：
 #ps aux|grep win";"1) In qemu command line, there is only tls port for spice, no port.
 2) In qemu command line, both default channel and all the eight channels are in tls.
 
 Output:
 ...
 -spice tls-port=5900,addr=0.0.0.0,disable-ticketing,x509-dir=/etc/pki/libvirt-spice,tls-channel=default,tls-channel=main,tls-channel=display,tls-channel=inputs,tls-channel=cursor,tls-channel=playback,tls-channel=record,tls-channel=smartcard,tls-channel=usbredir,seamless-migration=on -k en-us";;RedHatEnterpriseLinux7/RHEL7-99716
3363;RHEL7-99717;[spice] Start guest with spice defaultMode=insecure;Verify that guest can start successfully when spice defaultMode=insecure;Fangge Jin (fjin);High;Positive;Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set defaultMode='insecure'";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99717
3363;;;;;;;;;2;"Start the guest 
 #virsh start win
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99717
3363;;;;;;;;;3;"Check the qemu cmd
 #ps aux|grep win";"the qemu cmd includes plaintext-channel=default.
 
 Output:
 ...
 -spice port=5900,addr=0.0.0.0,disable-ticketing,plaintext-channel=default,seamless-migration=on -k en-us";;RedHatEnterpriseLinux7/RHEL7-99717
3364;RHEL7-99720;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: bz773660 Kerberos errors should go to syslog; bz773660 Kerberos errors should go to syslog;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99720
3365;RHEL7-99721;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: bz869150 ldap child crashes when keytab file is missing;ldap child crashes when keytab file is missing;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99721
3366;RHEL7-99722;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: bz805281 Uses the wrong key when there a multiple realms in a single keytab;Uses the wrong key when there a multiple realms in a single keytab;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99722
3367;RHEL7-99723;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: bz847039 Auth fails if kpasswd cannot be resolved;Auth fails if kpasswd cannot be resolved;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99723
3368;RHEL7-99724;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: bz798655 Password logins failing due to a process with high UID;Password logins failing due to a process with high UID;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99724
3369;RHEL7-99725;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: verify trac ticket 677;verify trac ticket 677;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99725
3370;RHEL7-99726;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: Devel TRAC Ticket 754 DNS discovery should fall back to SSSD domain name;Devel TRAC Ticket 754 DNS discovery should fall back to SSSD domain name;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99726
3371;RHEL7-99727;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: bz700805 unknown domain in DNS service discovery;bz700805 unknown domain in DNS service discovery;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99727
3372;RHEL7-99728;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: BZ732935 Add LDAP provider option to set LDAP OPT X SASL NOCANON;BZ732935 Add LDAP provider option to set LDAP OPT X SASL NOCANON;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99728
3373;RHEL7-99729;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: BZ808458 Authconfig crashes when sets krb realm;BZ808458 Authconfig crashes when sets krb realm;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99729
3374;RHEL7-99730;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: BZ819057 sssd fails to use the last AD server if other AD servers are not reachable; BZ819057 sssd fails to use the last AD server if other AD servers are not reachable;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99730
3375;RHEL7-99731;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: BZ814414 System error when trying to sudo;"BZ814414 System error when trying to sudo

";Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99731
3376;RHEL7-99732;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: BZ836560 SSSD should move away unaccessible ccache files;BZ836560 SSSD should move away unaccessible ccache files;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99732
3377;RHEL7-99733;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: BZ861091 pam sss report System Error on wrong password;BZ861091 pam sss report System Error on wrong password;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99733
3378;RHEL7-99734;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: BZ861079 Collect Krb5 Trace on High Debug Levels;BZ861079 Collect Krb5 Trace on High Debug Levels;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99734
3379;RHEL7-99735;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: BZ810253 Invalid keytab path logged when using the default keytab;BZ810253 Invalid keytab path logged when using the default keytab;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99735
3380;RHEL7-99736;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: BZ1007447 Validate ccache name for multiple logins;BZ1007447 Validate ccache name for multiple logins;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99736
3381;RHEL7-99737;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: BZ889206 On clock skew sssd returns system error;BZ889206 On clock skew sssd returns system error;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99737
3382;RHEL7-99738;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: BZ917011 Empty Kerberos passwords handled incorrectly;BZ917011 Empty Kerberos passwords handled incorrectly;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99738
3383;RHEL7-99739;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: BZ1198478 and BZ1198477 ccache files are not removed on error;BZ1198478 and BZ1198477 ccache files are not removed on error;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99739
3384;RHEL7-99740;IDM-SSSD-TC: krb_provider: krb_misc_bugzilla: BZ803842 Unable to bind to LDAP server when minssf set;BZ803842 Unable to bind to LDAP server when minssf set;Amith Kumar Peethambaran (apeetham);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99740
3385;RHEL7-99812;[net-update][mtu] update network mtu (not support);"update network mtu is not implemented.
";Yalan Zhang (yalzhang);Medium;Negative;Automated;;1;"1. # virsh net-dumpxml default
 <network>
  <name>default</name>
  <uuid>9feee285-f4a5-491e-a68f-0d3ee4805921</uuid>
  <forward mode='nat'>
    <nat>
      <port start='1024' end='65535'/>
    </nat>
  </forward>
  <bridge name='virbr0' stp='on' delay='0'/>
  <mtu size='9000'/>
  <mac address='52:54:00:77:9a:74'/>
  <ip address='192.168.122.1' netmask='255.255.255.0'>
    <dhcp>
      <range start='192.168.122.2' end='192.168.122.254'/>
    </dhcp>
  </ip>
 </network>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99812
3385;;;;;;;;;2;"2. # virsh net-update default modify mtu ""<mtu size='6000'/>""
​​";"error: unrecognized section name 'mtu'
 
 (net-update to update mtu is not supported yet)";;RedHatEnterpriseLinux7/RHEL7-99812
3386;RHEL7-99813;[mtu] save / restore and managedsave with mtu set in interface;save/restore and manageddave will not impact the mtu setting in interface;Yalan Zhang (yalzhang);Medium;Positive;Automated;;1;"S1: save and restore with mtu setting
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99813
3386;;;;;;;;;2;"1.  guest is running with mtu setting
 # virsh dumpxml rhel7.4 | grep /interface -B8
     <interface type='network'>
       <mac address='52:54:00:11:0c:ff'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <mtu size='9000'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-99813
3386;;;;;;;;;3;2. # virsh save rhel7.4 rhel7.4.save;Domain rhel7.4 saved to rhel7.4.save;;RedHatEnterpriseLinux7/RHEL7-99813
3386;;;;;;;;;4;3. # virsh restore rhel7.4.save;Domain restored from rhel7.4.save;;RedHatEnterpriseLinux7/RHEL7-99813
3386;;;;;;;;;5;"4. # virsh list
  Id    Name                           State
 ----------------------------------------------------
  10    rhel7.4                        running
 
 # virsh dumpxml rhel7.4 | grep /interface -B8
  
​​";"output:
 <interface type='network'>
       <mac address='52:54:00:11:0c:ff'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <mtu size='9000'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 (after save and restore, the mtu setting still there)";;RedHatEnterpriseLinux7/RHEL7-99813
3386;;;;;;;;;6;"S2: managedsave
 
 1. guest managed save with mtu setting
 # virsh managedsave rhel7.4
 
 Domain rhel7.4 state saved by libvirt
​​";the guest can save successfully;;RedHatEnterpriseLinux7/RHEL7-99813
3386;;;;;;;;;7;"2. start the guest again and check mtu
 # virsh start rhel7.4
 virsh dumpxDomain rhel7.4 started";​​;;RedHatEnterpriseLinux7/RHEL7-99813
3386;;;;;;;;;8;"3. # ps aux | grep mtu
​​";... host_mtu=9000...;;RedHatEnterpriseLinux7/RHEL7-99813
3386;;;;;;;;;9;4. # ifconfig vnet0 | grep mtu;vnet0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 9000;;RedHatEnterpriseLinux7/RHEL7-99813
3387;RHEL7-99816;[driver][multiqueue] Test the boundry of queues for network and direct type interface - negative;start guest with settings out of the limitation, there should be no anomaly like host crash, libvirt crash, should error out when start.  ;Yalan Zhang (yalzhang);Medium;Negative;Not Automated;;1;"1. for bridge type or network type interface, try to start guest with queues='257'
 
 # virsh dumpxml r7 | grep -a2A2 queues
 <source network='default'/>
 <model type='virtio'/>
 <driver name='vhost' queues='257'/>
 <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
 </interface>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99816
3387;;;;;;;;;2;# virsh start r7;"error: Failed to start domain r7
 error: Unable to create tap device vnet0: Argument list too long";;RedHatEnterpriseLinux7/RHEL7-99816
3387;;;;;;;;;3;"2. set to < driver queues= '-1'>
 # virsh edit rhel7.4
   <interface type='network'>
       <mac address='52:54:00:3d:b6:26'/>
       <source network='default'/>
       <model type='virtio'/>
       <driver queues='-1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content
 
 Failed. Try again? [y,n,i,f,?]:  ==> press 'i'
 error: 'queues' attribute must be positive number: -1
 Failed. Try again? [y,n,f,?]: 
​​";validate failed;;RedHatEnterpriseLinux7/RHEL7-99816
3387;;;;;;;;;4;"3. set to 'sdf'
 # virsh edit rhel7.4
   <interface type='network'>
       <mac address='52:54:00:3d:b6:26'/>
       <source network='default'/>
       <model type='virtio'/>
       <driver queues='sdf'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 error: 'queues' attribute must be positive number: sdf
 Failed. Try again? [y,n,i,f,?]:  ===> press 'i'
 error: 'queues' attribute must be positive number: sdf
 Failed. Try again? [y,n,f,?]: ";validate failed;;RedHatEnterpriseLinux7/RHEL7-99816
3387;;;;;;;;;5;"4. set to '0'
 # virsh edit rhel7.4
  <interface type='network'>
       <mac address='52:54:00:3d:b6:26'/>
       <source network='default'/>
       <model type='virtio'/>
       <driver queues='0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content 
 Failed. Try again? [y,n,i,f,?]:  ===> press 'i'
 Domain rhel7.4 XML configuration edited.
 
 # virsh dumpxml rhel7.4 | grep /interface -B5";"output:
   <interface type='network'>
       <mac address='52:54:00:3d:b6:26'/>
       <source network='default'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 
 (when set to 0 and ignored, there will be no queues settting in xml, the ""queues=0"" will be ignored)";;RedHatEnterpriseLinux7/RHEL7-99816
3387;;;;;;;;;6;"5. set to '5.6'
 # virsh edit rhel7.4
    <interface type='network'>
       <mac address='52:54:00:3d:b6:26'/>
       <source network='default'/>
       <model type='virtio'/>
       <driver queues='5.6'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 error: 'queues' attribute must be positive number: 5.6
 Failed. Try again? [y,n,i,f,?]:  ===> press 'i'
 error: 'queues' attribute must be positive number: 5.6
 Failed. Try again? [y,n,f,?]: ";validate failed with 5.6;;RedHatEnterpriseLinux7/RHEL7-99816
3387;;;;;;;;;7;6. for direct type interface, max value is 16, set to '17' will cause the host crash, check bug 1484697;host should not crash, refer to bug 1484697;;RedHatEnterpriseLinux7/RHEL7-99816
3387;;;;;;;;;8;need update;​​;;RedHatEnterpriseLinux7/RHEL7-99816
3387;;;;;;;;;9;"7. for vhostuser interface, the max value we can set is 128
 set to 128, the guest start successfully";​​;;RedHatEnterpriseLinux7/RHEL7-99816
3387;;;;;;;;;10;set to 129, guest paused, refer to Bug 1512488 - Guest paused with vhostuser interface with 129 queues(closed as not a bug);the expected result is 'guest paused';;RedHatEnterpriseLinux7/RHEL7-99816
3388;RHEL7-99820;KN-TC: vlan/tier1/tier1_all;KN-TC: vlan/tier1/tier1_all;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99820
3389;RHEL7-99821;KN-TC: vnic/sriov FUNC=sriov-test-trusted-vf-promisc;KN-TC: vnic/sriov FUNC=sriov-test-trusted-vf-promisc;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99821
3390;RHEL7-99822;KN-TC: vnic/sriov FUNC=sriov-test-bz1445814;KN-TC: vnic/sriov FUNC=sriov-test-bz1445814;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99822
3391;RHEL7-99824;KN-TC: ethtool/Performance/multi_topo_offload FUNC=nic_vlan;KN-TC: ethtool/Performance/multi_topo_offload FUNC=nic_vlan;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99824
3392;RHEL7-99825;[hotplug][bridge] attach-device and attach-interface with multiple options or elements for bridge type interface;"hostdev type | attach-interface(options) | attach-device(elements)
support | --target, --model, --mac, --print-xml, --inbound, --outbound --live,--config, --current, --persistent | target, model, driver, rom, vlan(for ovs), source, type,Qos, backend, link state, mtu, coalesce,backend
not support | --managed --script(RHEL7-18679) |  nwfilter(ignore),boot order(should not support, wait for bug 1484697 ),";Yalan Zhang (yalzhang);High;Positive;Not Automated;;1;"1. start a guest, and prepare a linux bridge with pyhical interface connected
 
 # virsh start rhel
 Domain rhel started
 
 # brctl show
 bridge name bridge id STP enabled interfaces
 br0 8000.4437e66a7f29 no eno1";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99825
3392;;;;;;;;;2;"2. # virsh attach-interface rhel bridge br0 --target newtarget --model virtio --mac 52:54:00:16:36:70 --inbound 1000,2000,512 --outbound 500,1000,256 --live --print-xml
 
 
​​";"<interface type='bridge'>
   <source bridge='br0'/>
   <target dev='newtarget'/>
   <mac address='52:54:00:16:36:70'/>
   <model type='virtio'/>
   <bandwidth>
     <inbound average='1000' peak='2000' burst='512'/>
     <outbound average='500' peak='1000' burst='256'/>
   </bandwidth>
 </interface>";;RedHatEnterpriseLinux7/RHEL7-99825
3392;;;;;;;;;3;3.   # virsh attach-interface rhel bridge br0 --target newtarget --model virtio --mac 52:54:00:16:36:70 --inbound 1000,2000,512 --outbound 500,1000,256;Interface attached successfully;;RedHatEnterpriseLinux7/RHEL7-99825
3392;;;;;;;;;4;4. # virsh dumpxml rhel | grep /interface -B12;"   <interface type='bridge'>
       <mac address='52:54:00:16:36:70'/>
       <source bridge='br0'/>
       <bandwidth>
         <inbound average='1000' peak='2000' burst='512'/>
         <outbound average='500' peak='1000' burst='256'/>
       </bandwidth>
       <target dev='newtarget'/>
       <model type='virtio'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-99825
3392;;;;;;;;;5;attach-device;​​;;RedHatEnterpriseLinux7/RHEL7-99825
3392;;;;;;;;;6;"1. # cat br_inter.xml
 <interface type='bridge'>
       <mac address='52:54:00:16:36:71'/>
       <source bridge='br0'/>
       <bandwidth>
         <inbound average='2000' peak='2500' burst='1024'/>
         <outbound average='500' peak='1000' burst='256'/>
       </bandwidth>
       <target dev='test'/>
       <model type='virtio'/>
     <driver name='vhost' txmode='iothread' ioeventfd='on' event_idx='off' queues='5' rx_queue_size='256' tx_queue_size='256'>
       <host csum='off' gso='off' tso4='off' tso6='off' ecn='off' ufo='off' mrg_rxbuf='off'/>
       <guest csum='off' tso4='off' tso6='off' ecn='off' ufo='off'/>
     </driver>
 <backend tap='/dev/net/tun' vhost='/dev/vhost-net'/>
     <tune>
       <sndbuf>1600</sndbuf>
     </tune>
 <filterref filter='myfilter'>
     </filterref>
 <link state='down'/>
  <mtu size='1500'/>
     <coalesce>
       <rx>
         <frames max='7'/>
       </rx>
     </coalesce>
  <rom bar='on'/>      
 <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-99825
3392;;;;;;;;;7;# virsh attach-device rhel br_inter.xml;Device attached successfully;;RedHatEnterpriseLinux7/RHEL7-99825
3392;;;;;;;;;8;# virsh dumpxml rhel | grep /interface -B30;"   <interface type='bridge'>
       <mac address='52:54:00:16:36:71'/>
       <source bridge='br0'/>
       <bandwidth>
         <inbound average='2000' peak='2500' burst='1024'/>
         <outbound average='500' peak='1000' burst='256'/>
       </bandwidth>
       <target dev='test'/>
       <model type='virtio'/>
       <driver name='vhost' txmode='iothread' ioeventfd='on' event_idx='off' queues='5' rx_queue_size='256' tx_queue_size='256'>
         <host csum='off' gso='off' tso4='off' tso6='off' ecn='off' ufo='off' mrg_rxbuf='off'/>
         <guest csum='off' tso4='off' tso6='off' ecn='off' ufo='off'/>
       </driver>
       <backend tap='/dev/net/tun' vhost='/dev/vhost-net'/>
       <filterref filter='clean-traffic'/>
       <tune>
         <sndbuf>1600</sndbuf>
       </tune>
       <link state='down'/>
       <mtu size='1500'/>
       <coalesce>
         <rx>
           <frames max='7'/>
         </rx>
       </coalesce>
       <alias name='net1'/>
       <rom bar='on'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>";;RedHatEnterpriseLinux7/RHEL7-99825
3393;RHEL7-99828;KN-TC: vnic/sriov FUNC=sriov-test-bz1445814;KN-TC: vnic/sriov FUNC=sriov-test-bz1445814;Yuying Ma (yuma);Medium;Positive;Automated;;;;;Test Case;RedHatEnterpriseLinux7/RHEL7-99828
3394;RHEL7-99884;[migration][tcp] Migrate with tcp tunnel type interface;migrate the 2 guest server and client together, it should be succeed;Yalan Zhang (yalzhang);Low;Positive;Not Automated;;1;"1. start 2 guests, one the server, the other is client
 # virsh dumpxml rhel7.4 | grep /interface -B5
     <interface type='server'>
       <mac address='52:54:00:22:c9:42'/>
       <source address='127.0.0.1' port='5558'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh dumpxml rhel | grep /interface -B6
   <interface type='client'>
       <mac address='52:54:00:6b:d2:da'/>
       <source address='127.0.0.1' port='5558'/>
       <model type='rtl8139'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";the 2 guest should start successfully, no matter the sequence;Test Case;RedHatEnterpriseLinux7/RHEL7-99884
3394;;;;;;;;;2;"2. check the qemu command line for net part
 # ps aux |grep qemu-kvm";"for rhel(the server)
 -netdev socket,connect=127.0.0.1:5558,id=hostnet0 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:54:00:22:c9:42,bus=pci.0,addr=0x3
 
 for rhel7.4 (the client)
 -netdev socket,connect=127.0.0.1:5558,id=hostnet0 -device rtl8139,netdev=hostnet0,id=net0,mac=52:54:00:6b:d2:da,bus=pci.0,addr=0x3
​​";;RedHatEnterpriseLinux7/RHEL7-99884
3394;;;;;;;;;3;"2. login the 2 guests, and configure their ip address, then ping each other
 for rhel
 # ifconfig eth0 10.10.10.10/24 up
 for rhel7.4
 # ifconfig eth0 10.10.10.20/24 up";ping succeed;;RedHatEnterpriseLinux7/RHEL7-99884
3394;;;;;;;;;4;"3.  migrate the 2 guests to dst host
 # virsh migrate rhel --live qemu+ssh://test/system --verbose
 root@test's password: 
 Migration: [100 %]
 # virsh migrate rhel7.4 --live qemu+ssh://test/system --verbose
 root@test's password:
 Migration: [100 %]
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99884
3394;;;;;;;;;5;4. check the connectivity of the 2 guests;ping succeed;;RedHatEnterpriseLinux7/RHEL7-99884
3395;RHEL7-99886;[Node devices] Dettach node device from host with device driver;Dettach node device from host with device driver;Jingjing Shao (jishao);Critical;Positive;Automated;;1;" 1. Check the iommu enable or not
 # grep -irn ""iommu"" /var/log/messages

 or check the cmdline and make sure there is ""intel_iommu=on""
 # cat /proc/cmdline
 BOOT_IMAGE=/vmlinuz-3.10.0-889.el7.x86_64 root=/dev/mapper/rhel-root ro console=tty0 console=ttyS0,115200 reboot=pci crashkernel=auto rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap biosdevname=0 rhgb quiet intel_iommu=on";" # grep -irn ""iommu"" /var/log/messages
 21184:Jan 24 12:50:38 sriov2 kernel: [    0.000000] Kernel command line: BOOT_IMAGE=/vmlinuz-3.10.0-78.el7.x86_64 root=UUID=47dce99f-353c-45d2-9b91-88e1b9e54b71 ro vconsole.font=latarcyrheb-sun16 crashkernel=auto vconsole.keymap=us rhgb quiet intel_iommu=on
 21185:Jan 24 12:50:38 sriov2 kernel: [    0.000000] Intel-IOMMU: enabled
 ...(clipped)";Test Case;RedHatEnterpriseLinux7/RHEL7-99886
3395;;;;;;;;;2;"2.Check the network device
 # ethtool -i enp14s0f0";"# ethtool -i enp14s0f0
 driver: igb
 version: 5.3.0-k
 firmware-version: 1.2.1
 expansion-rom-version:
 bus-info: 0000:0e:00.0
 supports-statistics: yes
 supports-test: yes
 supports-eeprom-access: yes
 supports-register-dump: yes
 supports-priv-flags: no";;RedHatEnterpriseLinux7/RHEL7-99886
3395;;;;;;;;;3;"3. #virsh nodedev-dumpxml pci_0000_0e_00_0
";"#virsh nodedev-dumpxml pci_0000_0e_00_0
 <device>
   <name>pci_0000_0e_00_0</name>
   <path>/sys/devices/pci0000:00/0000:00:1c.6/0000:0c:00.0/0000:0d:02.0/0000:0e:00.0</path>
   <parent>pci_0000_0d_02_0</parent>
   <driver>
     <name>igb</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>14</bus>
     <slot>0</slot>
     <function>0</function>
     <product id='0x10e8'>82576 Gigabit Network Connection</product>
     <vendor id='0x8086'>Intel Corporation</vendor>
     <capability type='virt_functions' maxCount='7'/>
     <iommuGroup number='24'>
       <address domain='0x0000' bus='0x0d' slot='0x02' function='0x0'/>
       <address domain='0x0000' bus='0x0e' slot='0x00' function='0x0'/>
       <address domain='0x0000' bus='0x0e' slot='0x00' function='0x1'/>
     </iommuGroup>
     <pci-express>
       <link validity='cap' port='2' speed='2.5' width='4'/>
       <link validity='sta' speed='2.5' width='4'/>
     </pci-express>
   </capability>
 </device>
";;RedHatEnterpriseLinux7/RHEL7-99886
3395;;;;;;;;;4;"5.  # virsh nodedev-detach pci_0000_0e_00_0
";" Device pci_0000_0e_00_0 detached

 (detach successfully)";;RedHatEnterpriseLinux7/RHEL7-99886
3395;;;;;;;;;5;"6. # readlink -f   /sys/bus/pci/devices/0000:\0e:\00.0/driver/
";/sys/bus/pci/drivers/vfio-pci;;RedHatEnterpriseLinux7/RHEL7-99886
3395;;;;;;;;;6;"or check the driver by nodedev-dumpxml
 # virsh nodedev-dumpxml pci_0000_03_00_0";"<device>
   <name>pci_0000_03_00_0</name>
   <path>/sys/devices/pci0000:00/0000:00:01.0/0000:03:00.0</path>
   <parent>pci_0000_00_01_0</parent>
   <driver>
     <name>vfio-pci</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>3</bus>
     <slot>0</slot>
     <function>0</function>
     <product id='0x10c9'>82576 Gigabit Network Connection</product>
     <vendor id='0x8086'>Intel Corporation</vendor>
     <capability type='virt_functions' maxCount='7'/>
     <iommuGroup number='14'>
       <address domain='0x0000' bus='0x03' slot='0x00' function='0x0'/>
     </iommuGroup>
     <pci-express>
       <link validity='cap' port='0' speed='2.5' width='4'/>
       <link validity='sta' speed='2.5' width='4'/>
     </pci-express>
   </capability>
 </device>";;RedHatEnterpriseLinux7/RHEL7-99886
3396;RHEL7-99889;[Node devices]  Negative test of reset node device from host;Negative test of reset node device from host;Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;" 1.   # virsh nodedev-list --tree

   +- pci_0000_00_00_0
   ...
     +- pci_0000_80_01_0
   |   |
   |   +- pci_0000_86_00_0
   |   |   |
   |   |   +- net_ens2f0_90_e2_ba_30_79_5c
   |   |     
   |   +- pci_0000_86_00_1
   |       |
   |       +- net_ens2f1_90_e2_ba_30_79_5d
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99889
3396;;;;;;;;;2;Choose the nodedevice without the file reset;​​;;RedHatEnterpriseLinux7/RHEL7-99889
3396;;;;;;;;;3;2. # virsh nodedev-dumpxml pci_0000_00_00_0;"<device>
   <name>pci_0000_00_00_0</name>
   <path>/sys/devices/pci0000:00/0000:00:00.0</path>
   <parent>computer</parent>
   <capability type='pci'>
     <domain>0</domain>
     <bus>0</bus>
     <slot>0</slot>
     <function>0</function>
     <product id='0x3407'>5520/5500/X58 I/O Hub to ESI Port</product>
     <vendor id='0x8086'>Intel Corporation</vendor>
     <iommuGroup number='0'>
       <address domain='0x0000' bus='0x00' slot='0x00' function='0x0'/>
     </iommuGroup>
     <numa node='0'/>
   </capability>
 </device>";;RedHatEnterpriseLinux7/RHEL7-99889
3396;;;;;;;;;4;"3.# ll  /sys/devices/pci0000:00/0000:00:00.0/reset
";"ls: cannot access /sys/devices/pci0000:00/0000:00:00.0/reset: No such file or directory
 (the file not exists)";;RedHatEnterpriseLinux7/RHEL7-99889
3396;;;;;;;;;5;"4. # virsh nodedev-reset pci_0000_00_00_0


";"error: Failed to reset device pci_0000_00_00_0
 error: internal error: Unable to reset PCI device 0000:00:00.0: no FLR, PM reset or bus reset available";;RedHatEnterpriseLinux7/RHEL7-99889
3396;;;;;;;;;6;Choose the nodedevice which is not endpoint;​​;;RedHatEnterpriseLinux7/RHEL7-99889
3396;;;;;;;;;7;5.# virsh nodedev-dumpxml pci_0000_80_01_0;"<device>
   <name>pci_0000_80_01_0</name>
   <path>/sys/devices/pci0000:80/0000:80:01.0</path>
   <parent>computer</parent>
   <driver>
     <name>pcieport</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>128</bus>
     <slot>1</slot>
     <function>0</function>
     <product id='0x3408'>5520/5500/X58 I/O Hub PCI Express Root Port 1</product>
     <vendor id='0x8086'>Intel Corporation</vendor>
     <capability type='pci-bridge'/>
     <iommuGroup number='19'>
       <address domain='0x0000' bus='0x80' slot='0x01' function='0x0'/>
     </iommuGroup>
     <numa node='1'/>
     <pci-express>
       <link validity='cap' port='1' speed='5' width='4'/>
       <link validity='sta' speed='5' width='4'/>
     </pci-express>
   </capability>
 </device>
";;RedHatEnterpriseLinux7/RHEL7-99889
3396;;;;;;;;;8;6.  # ll /sys/devices/pci0000:80/0000:80:01.0/reset;ls: cannot access reset: No such file or directory;;RedHatEnterpriseLinux7/RHEL7-99889
3396;;;;;;;;;9;"7. # virsh nodedev-reset pci_0000_80_01_0


";" error: Failed to reset device pci_0000_80_01_0
 error: internal error: Invalid attempt to reset PCI device 0000:80:01.0. Only PCI endpoint devices can be reset";;RedHatEnterpriseLinux7/RHEL7-99889
3396;;;;;;;;;10;"# virsh nodedev-list --cap usb
 usb_1_0_1_0
 usb_2_0_1_0
 usb_3_0_1_0
 ...
 
 # virsh nodedev-reset usb_1_0_1_0
​​";"error: Failed to reset device usb_1_0_1_0
 error: invalid argument: device usb_1_0_1_0 is not a PCI device";;RedHatEnterpriseLinux7/RHEL7-99889
3397;RHEL7-99890;[migration][ethernet] migrate a guest with ethernet type interface;ethernet type interface support migration;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. start the guest with xml as below
 <interface type='ethernet'>
 <script path='/etc/qemu-ifup'/> 
 </interface>";guest can start;Test Case;RedHatEnterpriseLinux7/RHEL7-99890
3397;;;;;;;;;2;"2. checkt he script executed and a bridge is created, and vnet0 connected
 # brctl show";"bridge name bridge id STP enabled interfaces
 br0 8000.d8d3857e619b no enp1s0
 vnet0";;RedHatEnterpriseLinux7/RHEL7-99890
3397;;;;;;;;;3;"3. do migration
 virsh migrate rhel --live --verbose qemu+ssh://test/system
 root@test's password: 
 Migration: [100 %]";migration succeed;;RedHatEnterpriseLinux7/RHEL7-99890
3397;;;;;;;;;4;"4. check on the dst the script executed and a bridge created with the tap device:
 # brctl show";"bridge name bridge id STP enabled interfaces
 br0 8000.4437e66a7f29 no eno1
 vnet0";;RedHatEnterpriseLinux7/RHEL7-99890
3397;;;;;;;;;5;"5. check the network function on guest, if the dst and src hosts are in different subnet, need to restart the network service to get new ip address, then do 
 guest ping outside
 guest ping host";all ping succeed;;RedHatEnterpriseLinux7/RHEL7-99890
3398;RHEL7-99891;[migration][udp] migrate guests with udp tunnel type interface;tcp tunnel type interface also support migration;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. start 2 guest with tcp tunnel interface type
 # virsh dumpxml rhel | grep /interface -B7
     <interface type='udp'>
       <mac address='52:54:00:76:10:c1'/>
       <source address='127.0.0.1' port='5558'>
         <local address='127.0.0.1' port='6667'/>
       </source>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 
 # virsh dumpxml rhel7.4 | grep /interface -B7
     <interface type='udp'>
       <mac address='52:54:00:9a:86:cd'/>
       <source address='127.0.0.1' port='6667'>
         <local address='127.0.0.1' port='5558'/>
       </source>
       <model type='rtl8139'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99891
3398;;;;;;;;;2;"2.check qemu command line
​​";"-netdev socket,udp=127.0.0.1:5558,localaddr=127.0.0.1:6667,id=hostnet0
 
 -netdev socket,udp=127.0.0.1:6667,localaddr=127.0.0.1:5558,id=hostnet0 ";;RedHatEnterpriseLinux7/RHEL7-99891
3398;;;;;;;;;3;3. on the guest configure their ip and ping each other;​​;;RedHatEnterpriseLinux7/RHEL7-99891
3398;;;;;;;;;4;"4. migrate them to another host
 # virsh migrate rhel qemu+ssh://$(target host)/system --live --verbose
 # virsh migrate rhel7.4 qemu+ssh://$(target host)/system --live --verbose";migrate succeed;;RedHatEnterpriseLinux7/RHEL7-99891
3398;;;;;;;;;5;5. login guests, the ping continue run and succeed;​​;;RedHatEnterpriseLinux7/RHEL7-99891
3399;RHEL7-99892;[migration][mcast] migrate guests with mcast type interface;for mcast type interface, refer to RHEL7-18744 - [mcast] Check performance of mcast type interface ;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. prepare 2 guests, and install omping in both host and the 2 guests
 the 2 guests have below xml included
 # virsh dumpxml rhel | grep interface -A10
 <interface type='network'>
 <source network='default'/>
 </interface>
 <interface type='mcast'>
 <source address='230.144.17.1' port='5558'/>
 </interface>
 
 # virsh dumpxml rhel7.4 | grep interface -A10
 <interface type='network'>
 <source network='default'/>
 </interface>
 <interface type='mcast'>
 <source address='230.144.17.1' port='5558'/>
 </interface>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99892
3399;;;;;;;;;2;"2. start the 2 guests, and dhclient to get their ip address, see for rhel it is 192.168.122.10, for rhel7.4 it is 192.168.122.43
 on both guests and host, run below command at the same time
 # omping -m 230.144.17.1 192.168.122.{1,10,43}";"on both guests and host, can have response from other 2 machine, for host, it looks like:
 192.168.122.10 :   unicast, seq=10, size=69 bytes, dist=0, time=0.378ms
 192.168.122.43 :   unicast, seq=10, size=69 bytes, dist=0, time=0.374ms
 192.168.122.10 : multicast, seq=10, size=69 bytes, dist=0, time=0.449ms
 192.168.122.43 : multicast, seq=10, size=69 bytes, dist=0, time=0.441ms
 192.168.122.43 :   unicast, seq=11, size=69 bytes, dist=0, time=0.362ms
 192.168.122.10 :   unicast, seq=11, size=69 bytes, dist=0, time=0.420ms";;RedHatEnterpriseLinux7/RHEL7-99892
3399;;;;;;;;;3;"3. then migrate these 2 guest 1 by 1 to another host
 # virsh migrate rhel  --live --verbose qemu+ssh://test/system 
 root@test's password: 
 Migration: [100 %]
 
 # virsh migrate rhel7.4  --live --verbose qemu+ssh://test/system 
 root@test's password: 
 Migration: [100 %]";migrate succeed;;RedHatEnterpriseLinux7/RHEL7-99892
3399;;;;;;;;;4;4. run # omping -m 230.144.17.1 192.168.122.{1,10,43} on dst host, and check the output from both guests and host, they can get response from other 2 machines;"for guest with ip 192.168.122.10, the response looks like
 192.168.122.43 :   unicast, seq=690, size=69 bytes, dist=0, time=0.359ms
 192.168.122.43 : multicast, seq=690, size=69 bytes, dist=0, time=0.363ms
 192.168.122.1  :   unicast, seq=689, size=69 bytes, dist=0, time=0.265ms
 192.168.122.1  : multicast, seq=689, size=69 bytes, dist=0, time=0.271ms";;RedHatEnterpriseLinux7/RHEL7-99892
3400;RHEL7-99894;[nodedevice] wireless NIC : nodedev-detach / reattach / reset;"wireless NIC : nodedev-detach/reattach/reset 
";Jingjing Shao (jishao);Medium;Positive;Manual Only;;1;"Use the wireless NIC   do all the case as below
 
 virsh nodedev-dumpxml pci_0000_02_00_0
 <device>
 <name>pci_0000_02_00_0</name>
 <parent>pci_0000_00_1c_4</parent>
 <driver>
 <name>iwlagn</name>
 </driver>
 <capability type='pci'>
 <domain>0</domain>
 <bus>2</bus>
 <slot>0</slot>
 <function>0</function>
 <product id='0x4239'>Centrino Advanced-N 6200</product>
 <vendor id='0x8086'>Intel Corporation</vendor>
 </capability>
 </device>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99894
3400;;;;;;;;;2;" RHEL7-17990 - [Node devices] Dettach node device from host without device driver -- bug 1019387 1035188 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-99894
3400;;;;;;;;;3;RHEL7-99886 - [Node devices] Dettach node device from host with device driver ;​​;;RedHatEnterpriseLinux7/RHEL7-99894
3400;;;;;;;;;4;RHEL7-17993 - [Node devices] Reattach node device on host ;​​;;RedHatEnterpriseLinux7/RHEL7-99894
3400;;;;;;;;;5;RHEL7-17988 - [Node devices] Reset node device from host ;​​;;RedHatEnterpriseLinux7/RHEL7-99894
3401;RHEL7-99895;[nodedevice] multi-function NIC (share iommu group): nodedev-detach / reattach / reset;multi-function NIC : nodedev-detach/reattach/reset;Jingjing Shao (jishao);Medium;Positive;Manual Only;;1;" Use the multi-function NIC   do all the case as below
 # virsh nodedev-list --tree
 computer
   |   +- pci_0000_04_00_0
   |   |   |
   |   |   +- net_eno1_34_40_b5_b1_09_30
   |   |     
   |   +- pci_0000_04_00_1
   |       |
   |       +- net_eno2_34_40_b5_b1_09_32


 # virsh nodedev-dumpxml pci_0000_04_00_0
 <device>
   <name>pci_0000_04_00_0</name>
   <path>/sys/devices/pci0000:00/0000:00:01.0/0000:04:00.0</path>
   <parent>pci_0000_00_01_0</parent>
   <driver>
     <name>bnx2</name>
   </driver>
   <capability type='pci'>
     <domain>0</domain>
     <bus>4</bus>
     <slot>0</slot>
     <function>0</function>
     <product id='0x1639'>NetXtreme II BCM5709 Gigabit Ethernet</product>
     <vendor id='0x14e4'>Broadcom Limited</vendor>
     <iommuGroup number='15'>
       <address domain='0x0000' bus='0x04' slot='0x00' function='0x0'/>
       <address domain='0x0000' bus='0x04' slot='0x00' function='0x1'/>
     </iommuGroup>
     <numa node='0'/>
     <pci-express>
       <link validity='cap' port='0' speed='5' width='4'/>
       <link validity='sta' speed='5' width='4'/>
     </pci-express>
   </capability>
 </device>

";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99895
3401;;;;;;;;;2;"
 RHEL7-17988 - [Node devices] Reset node device from host ";​​;;RedHatEnterpriseLinux7/RHEL7-99895
3401;;;;;;;;;3;RHEL7-17990 - [Node devices] Dettach node device from host without device driver -- bug 1019387 1035188 ;​​;;RedHatEnterpriseLinux7/RHEL7-99895
3401;;;;;;;;;4;RHEL7-99886 - [Node devices] Dettach node device from host with device driver ;​​;;RedHatEnterpriseLinux7/RHEL7-99895
3401;;;;;;;;;5;RHEL7-17993 - [Node devices] Reattach node device on host ;​​;;RedHatEnterpriseLinux7/RHEL7-99895
3402;RHEL7-99953;[PXE][bridge] PXE boot with OVMF buildin driver for virtio-net with bridge type interface;"for virtio model type interface used on Q35 machine type, OVMF provides its built-in option rom, do not use the one provided by ipxe-roms-qemu. set 'rom bar=""off""' will do the track. ";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;" 1. # virsh edit rh7.2
 ......
  <os>
     <type arch='x86_64' machine='pc-q35-rhel7.3.0'>hvm</type>
  <loader readonly='yes' type='pflash'>/usr/share/OVMF/OVMF_CODE.secboot.fd</loader>
 <nvram template='/usr/share/OVMF/OVMF_VARS.fd'>/var/lib/libvirt/qemu/nvram/rh7.2_VARS.fd</nvram>
   </os>
  <interface type='bridge'>
       <mac address='52:54:00:67:07:df'/>
       <source bridge='br0'/>
       <model type='virtio'/>
        <rom bar='off'/>  *** this setting indicates to use the OVMF buildin driver for virtio-net
       <boot order='1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 ..........
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-99953
3402;;;;;;;;;2;2. # virsh start rh7.2;PXE boot and install the OS successfully.;;RedHatEnterpriseLinux7/RHEL7-99953
3403;RHEL7-99971;[Qos][virtual interface] set bandwidth in bridge type interface;"test the throughoutput when set bandwidth in direct / bridge type interface
The bridge type interface and direct type interface support bandwidth is not document somewhere, but it indeed support. check the performance.";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;bridge type with linux bridge; ;Test Case;RedHatEnterpriseLinux7/RHEL7-99971
3403;;;;;;;;;2;"1. prepare the host with a linux bridge with a physical interface connected, then start a guest with no interface
 # brctl show
 bridge name bridge id STP enabled interfaces
 br0 8000.4437e66a7f29 no eno1

 # virsh start rhel7
 Domain rhel7 started";​​;;RedHatEnterpriseLinux7/RHEL7-99971
3403;;;;;;;;;3;"2. hotplug an interface with bandwidth setting
 # virsh attach-interface rhel7 bridge br0 --model virtio --inbound 300,800,256 --outbound 200,500,256 
";"Interface attached successfully
";;RedHatEnterpriseLinux7/RHEL7-99971
3403;;;;;;;;;4;3. # virsh dumpxml rhel7 | sed -n '/interface/,/interface/p';"  <interface type='bridge'>
       <mac address='52:54:00:02:ab:b3'/>
       <source bridge='br0'/>
       <bandwidth>
         <inbound average='300' peak='800' burst='256'/>
         <outbound average='200' peak='500' burst='256'/>
       </bandwidth>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
";;RedHatEnterpriseLinux7/RHEL7-99971
3403;;;;;;;;;5;4.  # virsh domiftune rhel7 vnet0;"inbound.average: 300
 inbound.peak   : 800
 inbound.burst  : 256
 inbound.floor  : 0
 outbound.average: 200
 outbound.peak  : 500
 outbound.burst : 256
";;RedHatEnterpriseLinux7/RHEL7-99971
3403;;;;;;;;;6;"5. check inbound
 on host
 # tc -d class show dev vnet0

";"class htb 1:1 root leaf 2: prio 0 quantum 42 rate 2400Kbit ceil 6400Kbit burst 256Kb/1 mpu 0b overhead 0b cburst 1600b/1 mpu 0b overhead 0b level 0 
";;RedHatEnterpriseLinux7/RHEL7-99971
3403;;;;;;;;;7;"6. check outbount
 on host
 # tc -d filter show dev vnet0 parent ffff:";"filter protocol all pref 49152 u32 
 filter protocol all pref 49152 u32 fh 800: ht divisor 1 
 filter protocol all pref 49152 u32 fh 800::800 order 2048 key ht 800 bkt 0 flowid :1 
   match 00000000/00000000 at 0
  police 0x1 rate 1600Kbit burst 256Kb mtu 64Kb action drop overhead 0b 
 ref 1 bind 1

";;RedHatEnterpriseLinux7/RHEL7-99971
3403;;;;;;;;;8;"7. host and guest both install the netperf tool from https://pkgs.org/download/netperf 
";​​;;RedHatEnterpriseLinux7/RHEL7-99971
3403;;;;;;;;;9;"8. test outbound
 on host: 
 # netserver

 on guest:
 # netperf -H 10.66.71.67 -l 60  (10.66.71.67 is host's ip)
";"MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.66.71.67 () port 0 AF_INET
 Recv   Send    Send                          
 Socket Socket  Message  Elapsed              
 Size   Size    Size     Time     Throughput  
 bytes  bytes   bytes    secs.    10^6bits/sec  

  87380  16384  16384    60.63       1.60   

 (the throughout should <= 1.6 M)
";;RedHatEnterpriseLinux7/RHEL7-99971
3403;;;;;;;;;10;"9. test inbound
 kill the netserver on host
 on guest
 # netserver

 on host:
 # netperf -H 10.66.70.101  -l 60  (10.66.70.101 is host's ip)";"MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.66.70.211 () port 0 AF_INET
 Recv   Send    Send                          
 Socket Socket  Message  Elapsed              
 Size   Size    Size     Time     Throughput  
 bytes  bytes   bytes    secs.    10^6bits/sec  

  87380  16384  16384    61.50       2.32   

 (the throughout should <=2.4M)
";;RedHatEnterpriseLinux7/RHEL7-99971
3403;;;;;;;;;11;"10. on host
 # virsh domiftune rhel7 vnet0 200,500  100";​​;;RedHatEnterpriseLinux7/RHEL7-99971
3403;;;;;;;;;12;11. # virsh domiftune rhel7 vnet0;"inbound.average: 200
 inbound.peak   : 500
 inbound.burst  : 0
 inbound.floor  : 0
 outbound.average: 100
 outbound.peak  : 0
 outbound.burst : 0
";;RedHatEnterpriseLinux7/RHEL7-99971
3403;;;;;;;;;13;12. # tc -d class show dev vnet0;"class htb 1:1 root leaf 2: prio 0 quantum 17 rate 1600Kbit ceil 4000Kbit burst 1600b/1 mpu 0b overhead 0b cburst 1600b/1 mpu 0b overhead 0b level 0 
";;RedHatEnterpriseLinux7/RHEL7-99971
3403;;;;;;;;;14;13. # tc -d filter show dev vnet0 parent ffff:;"filter protocol all pref 49152 u32 
 filter protocol all pref 49152 u32 fh 800: ht divisor 1 
 filter protocol all pref 49152 u32 fh 800::800 order 2048 key ht 800 bkt 0 flowid :1 
   match 00000000/00000000 at 0
  police 0x6 rate 800000bit burst 100Kb mtu 64Kb action drop overhead 0b 
 ref 1 bind 1
";;RedHatEnterpriseLinux7/RHEL7-99971
3404;RHEL7-99977;[Qos][domiftune] set bandwidth in direct type interface;"test the throughoutput when set bandwidth in direct type interface
The bridge type interface and direct type interface support bandwidth is not document somewhere, for macvtap, if have no function";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;direct type interface bridge mode; ;Test Case;RedHatEnterpriseLinux7/RHEL7-99977
3404;;;;;;;;;2;"1. start a guest with direct type interface bridge mode
 # virsh start rhel7
 Domain rhel7 started

 # virsh dumpxml rhel7 | grep /interface -B11
     <interface type='direct'>
       <mac address='52:54:00:f1:9f:66'/>
       <source dev='eno1' mode='bridge'/>
       <bandwidth>
         <inbound average='100' peak='200' burst='128'/>
         <outbound average='50' peak='100' burst='128'/>
       </bandwidth>
       <target dev='macvtap0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
";​​;;RedHatEnterpriseLinux7/RHEL7-99977
3404;;;;;;;;;3;2. # virsh domiftune rhel7 macvtap0;"inbound.average: 100
 inbound.peak   : 200
 inbound.burst  : 128
 inbound.floor  : 0
 outbound.average: 50
 outbound.peak  : 100
 outbound.burst : 128
";;RedHatEnterpriseLinux7/RHEL7-99977
3404;;;;;;;;;4;"3. check on host
 # tc -d class show dev macvtap0

";"class htb 1:1 root leaf 2: prio 0 quantum 4 rate 400000bit ceil 800000bit burst 128Kb/1 mpu 0b overhead 0b cburst 1600b/1 mpu 0b overhead 0b level 0 

 (rate is for outbound.average:50, 50*8)
";;RedHatEnterpriseLinux7/RHEL7-99977
3404;;;;;;;;;5;"4. check on host
 # tc -d filter show dev macvtap0 parent ffff:";"filter protocol all pref 49152 u32 
 filter protocol all pref 49152 u32 fh 800: ht divisor 1 
 filter protocol all pref 49152 u32 fh 800::800 order 2048 key ht 800 bkt 0 flowid :1 
   match 00000000/00000000 at 0
  police 0xa rate 800000bit burst 128Kb mtu 64Kb action drop overhead 0b 
 ref 1 bind 1

 (rate 800000bit is for inbound.average 100*8Mbit)
";;RedHatEnterpriseLinux7/RHEL7-99977
3404;;;;;;;;;6;"5. test outbound for guest(correspond to inbound for macvtap0)
 on another machine which the guest can access and in the same subnet, not the host, see 10.66.5.24, install netperf both on the guest and the remote host

 another host: 10.66.5.24
 guest: 10.66.4.163

 on remote host:
 # netserver

 on guest:
 # netperf -H 10.66.5.24 -l 60  （netperf send and netserver receive）
";"MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.66.5.24 () port 0 AF_INET
 Recv   Send    Send                          
 Socket Socket  Message  Elapsed              
 Size   Size    Size     Time     Throughput  
 bytes  bytes   bytes    secs.    10^6bits/sec  

  87380  16384  16384    64.00       0.40   


 (check the bandwidth for guest outbound is 0.4Mbit/sec, just as what we set 50KByte, the auctual bandwidth should be less than the limitation we set)";;RedHatEnterpriseLinux7/RHEL7-99977
3404;;;;;;;;;7;"9. test inbound
 on guest:
 # netserver

 on another host:
 # netperf -H 10.66.4.163  -l 60

";"MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.66.4.163 () port 0 AF_INET
 Recv   Send    Send                          
 Socket Socket  Message  Elapsed              
 Size   Size    Size     Time     Throughput  
 bytes  bytes   bytes    secs.    10^6bits/sec  

  87380  16384  16384    12.26       0.87   

 (check the bandwidth is 0.87Mbit/sec, just nearly what we set 100KByte/s=0.8Mbit/s)
";;RedHatEnterpriseLinux7/RHEL7-99977
3404;;;;;;;;;8;"10. on host
  # virsh domiftune rhel7 macvtap0 200,500,256  100,200,128";​​;;RedHatEnterpriseLinux7/RHEL7-99977
3404;;;;;;;;;9;11. # virsh domiftune rhel7 macvtap0;"inbound.average: 200
 inbound.peak   : 500
 inbound.burst  : 256
 inbound.floor  : 0
 outbound.average: 100
 outbound.peak  : 200
 outbound.burst : 128
";;RedHatEnterpriseLinux7/RHEL7-99977
3404;;;;;;;;;10;"12.  test domiftune with more options
 # virsh domid rhel7
 33
 # virsh domuuid rhel7
 84f83c75-db81-4205-98dd-2105392ea488
 
 # virsh domiflist rhel7
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 macvtap0   direct     eno1       virtio      52:54:00:f1:9f:66
 
 # virsh domiftune 33 52:54:00:f1:9f:66
 
 # virsh domiftune 84f83c75-db81-4205-98dd-2105392ea488  52:54:00:f1:9f:66
 
 # virsh domiftune 84f83c75-db81-4205-98dd-2105392ea488  macvtap0";"the 3 commands all output as below:
 
 inbound.average: 200
 inbound.peak   : 500
 inbound.burst  : 256
 inbound.floor  : 0
 outbound.average: 100
 outbound.peak  : 200
 outbound.burst : 128
 
​​";;RedHatEnterpriseLinux7/RHEL7-99977
3404;;;;;;;;;11;13. # tc -d class show dev macvtap0;"class htb 1:1 root leaf 2: prio 0 quantum 8 rate 800000bit ceil 1600Kbit burst 128Kb/1 mpu 0b overhead 0b cburst 1600b/1 mpu 0b overhead 0b level 0 

 (rate 800000bit is for outbound average 100KByte, peak 200KByte  is for ceil 1600Kbit, )
";;RedHatEnterpriseLinux7/RHEL7-99977
3404;;;;;;;;;12;14. # tc -d filter show dev macvtap0 parent ffff:;"class htb 1:1 root leaf 2: prio 0 quantum 8 rate 800000bit ceil 1600Kbit burst 128Kb/1 mpu 0b overhead 0b cburst 1600b/1 mpu 0b overhead 0b level 0 
 [root@test ~]# tc -d filter show dev macvtap0 parent ffff:
 filter protocol all pref 49152 u32 
 filter protocol all pref 49152 u32 fh 800: ht divisor 1 
 filter protocol all pref 49152 u32 fh 800::800 order 2048 key ht 800 bkt 0 flowid :1 
   match 00000000/00000000 at 0
  police 0xc rate 1600Kbit burst 256Kb mtu 64Kb action drop overhead 0b 
 ref 1 bind 1
 (rate 1600Kbit is for inbound 200KByte, peak is ignored (as Linux ingress filters don't know it yet), burst is 256 as we set)
";;RedHatEnterpriseLinux7/RHEL7-99977
3405;RHEL7-100105;[virtual desktop input] Mouse/tablet operation;Validate basic events of virtual mouse/tablet are generated in guest;Zhiyi Guo (zhguo);High;Positive;Automated;;1;"1. Boot rhel 7 guest with a mouse and vnc display:
 
 For vmmouse: if vmport is active, qemu will use vmmouse as default
 For ps2 mouse: add option -machine vmport=off
 For usb-mouse/usb-tablet: -device ich9-usb-uhci6 -device usb-mouse/usb-tablet
 For virtio-mouse-pci/virtio-tablet-pci: -device virtio-mouse-pci/virtio-tablet-pci"; Guest can boot without error;Test Case;RedHatEnterpriseLinux7/RHEL7-100105
3405;;;;;;;;;2;"2. Use remote-viewer to connect to guest and check mouse function inside guest, mouse should have these buttons:
 
* left button
* right button
* middle buttion
* mouse movement
* scrollwheel up
* scollwheel down

 Use xinput to check guest is using target mouse to obtain events and all buttons are exist:
 For example, when using usb tablet, use command: xinput test `xinput list | grep mouse | sed 's/^.*id=//g' | sed 's/\[.*\]$//g'`
 and input buttons from client
 if use vmmouse, no need to use xinput as this is the only mouse inside guest, use the program ""mouse"" to check the events of buttons";When pressing buttons or moving mouse, their key events should prompt from the test program. Events should be different from each other;;RedHatEnterpriseLinux7/RHEL7-100105
3405;;;;;;;;;3;"3. Boot rhel7 guest with a mouse and spice display and repeat step 1 and 2.
 spice option used: 
 -device virtio-serial-pci,id=virtio-serial1 \
   -chardev spicevmc,id=charchannel0,name=vdagent \
   -device virtserialport,bus=virtio-serial1.0,nr=3,chardev=charchannel0,id=channel0,name=com.redhat.spice.0 \
   -spice port=5900,disable-ticketing,agent-mouse=off
 
 When using spice, also need to check spice-agent, just use agent-mouse=on to make guest use spice-agent as mouse";When pressing buttons or moving mouse, their key events should prompt from the test program. Events should be different from each other;;RedHatEnterpriseLinux7/RHEL7-100105
3406;RHEL7-100106;[virtual desktop input]multimedia keys check;Validate multimedia keys works in guest;Zhiyi Guo (zhguo);Medium;Positive;Automated;;1;"Boot rhel7 guest with a keyboard and vnc display:
 
 For ps2 keyboard:
 Without specify other keyboard devices, guest will use ps2 keyboard
 
 For usb-kbd:-device ich9-usb-uhci6 -device usb-kbd
 
 For virtio-keyboard-pci:
 -device virtio-keyboard-pci"; Guest can boot without error;Test Case;RedHatEnterpriseLinux7/RHEL7-100106
3406;;;;;;;;;2;"Use remote-viewer connect to guest and check guest is using the target keyboard. 
 For example, use command: xinput test `xinput list | grep usb | sed 's/^.*id=//g' | sed 's/\[.*\]$//g'` and input a ALT from client";Guest is using the target keyboard, input event of ALT key prompt;;RedHatEnterpriseLinux7/RHEL7-100106
3406;;;;;;;;;3;"use command from step 2 on both guest and host and compare the keyevents ouput for media keys.
 
 keys can check:
 volume up/volume down/audio next/audio previous/audio stop/audio play/mail/calculator/home keys";keyevents output are same for host and guest;;RedHatEnterpriseLinux7/RHEL7-100106
3406;;;;;;;;;4;Switch display to spice and recheck step 1-3;​​;;RedHatEnterpriseLinux7/RHEL7-100106
3407;RHEL7-100107;[virtual desktop input]Common keyboard layout check;Validate all keys of en-us(default kbd layout) plus some keys from Japanese keyboard are functional properly;Zhiyi Guo (zhguo);Critical;Positive;Automated;;1;Boot rhel 7 guest with a keyboard and vnc display.; Guest can boot normally;Test Case;RedHatEnterpriseLinux7/RHEL7-100107
3407;;;;;;;;;2;"Connect guest with remote-viewer, run command xev -event keyboard and type all keys on your us keyboard and then press HIRAGANA  and HENKAN key on japanese keyboard.
 Type sames keys on host and compare the output between host and guest";There should be no difference between guest keyboard output and host keyboard output;;RedHatEnterpriseLinux7/RHEL7-100107
3407;;;;;;;;;3;Switch display to spice and redo step 1-2;There should be no difference between guest keyboard output and host keyboard output;;RedHatEnterpriseLinux7/RHEL7-100107
3408;RHEL7-100108;[virtual desktop input][vnc]non-default keyboard layouts check;Validate all keys of non-default kbd layout are functional properly;Zhiyi Guo (zhguo);Medium;Positive;Automated;;1;"Boot rhel7 guest with a keyboard device and vnc display, also add locale option.
 locale option used in test:
 -k de
 -k fr"; Guest can boot without problem;Test Case;RedHatEnterpriseLinux7/RHEL7-100108
3408;;;;;;;;;2;Change both Client and guest language base on the locale. For example, if you test German, you should change the language of host that running remote-viewer to German, also the guest language.  ;​​;;RedHatEnterpriseLinux7/RHEL7-100108
3408;;;;;;;;;3;run command xev -event keyboard | grep keysym inside guest and type all keys from client. Run same command from host gnome-terminal and compare the result between guest and host;There should be no difference between guest result and host result;;RedHatEnterpriseLinux7/RHEL7-100108
3409;RHEL7-100110;[virtual desktop input][spice]Server/client mouse mode test;Absolute pointing devices will work in client mouse mode and relative pointing devices will work in server mouse mode;Zhiyi Guo (zhguo);Medium;Positive;Not Automated;;1;"Boot a rhel7 guest with absolute mouse device
 absolute mouse devices:
 vmmouse/usb-tablet/virtio-tablet-pci/spice-agent"; Guest can boot without error;Test Case;RedHatEnterpriseLinux7/RHEL7-100110
3409;;;;;;;;;2;"connect guest by remote-viewer, after guest boot to desktop, check spice is working in client mouse mode:
 {""execute"": ""qmp_capabilities""}
 {""execute"": ""query-spice""}";"{""return"": {""migrated"": false, ""enabled"": true, ""auth"": ""spice"", ""port"": 5900, ""compiled-version"": ""0.12.8"", ""host"": ""*"", ""channels"": [], ""mouse-mode"": ""client""}}
 
​​";;RedHatEnterpriseLinux7/RHEL7-100110
3409;;;;;;;;;3;"Boot a rhel7 guest with realtive mouse device.
 relative mouse devices:
 ps2/usb-mouse/virtio-mouse-pci";Guest can boot without error;;RedHatEnterpriseLinux7/RHEL7-100110
3409;;;;;;;;;4;"connect guest by remote-viewer, after guest boot to desktop, check spice is working in server mouse mode:
 {""execute"": ""qmp_capabilities""}
 {""execute"": ""query-spice""}";"{""return"": {""migrated"": false, ""enabled"": true, ""auth"": ""spice"", ""port"": 5900, ""compiled-version"": ""0.12.8"", ""host"": ""*"", ""channels"": [], ""mouse-mode"": ""server""}}
 
​​";;RedHatEnterpriseLinux7/RHEL7-100110
3410;RHEL7-100111;[virtual desktop input] Input devices hotplug/unplug;Verify input devices hotplug/unplug works well;Zhiyi Guo (zhguo);Medium;Positive;Manual Only;;1;1. Boot a rhel7 guest with default mouse and keyboard;Guest can boot without error;Test Case;RedHatEnterpriseLinux7/RHEL7-100111
3410;;;;;;;;;2;2. Hot plug a mouse like usb-mouse.;No calltrace happen from kernel;;RedHatEnterpriseLinux7/RHEL7-100111
3410;;;;;;;;;3;3. Hot plug a keyboard like usb-kbd.;No calltrace happen from kernel;;RedHatEnterpriseLinux7/RHEL7-100111
3410;;;;;;;;;4;4. Hot-unplug the input devices plugged in step 2,3;No calltrace happen from kernel;;RedHatEnterpriseLinux7/RHEL7-100111
3410;;;;;;;;;5;5. Repeat step2-4 for 5 times;​​;;RedHatEnterpriseLinux7/RHEL7-100111
3411;RHEL7-100112;[virtual desktop input] Input devices migration test;Verify that input devices work well after migration;Zhiyi Guo (zhguo);High;Positive;Manual Only;;1;"1. Boot up a rhel7 guest with a keyboard and a mouse, and also with vnc display.
 You can pair the mouse/kbd devices to test migration, like:
 usb-mouse/usb-tablet with usb-kbd
 virtio-mouse-pci/virtio-tablet-pci with virtio-tablet-pci"; Guest can boot up without error;Test Case;RedHatEnterpriseLinux7/RHEL7-100112
3411;;;;;;;;;2;"2. Connect to guest by remote-viewer.
 Move mouse inside guest and type some characters inside terminal";Mouse and keyboard work properly;;RedHatEnterpriseLinux7/RHEL7-100112
3411;;;;;;;;;3;3. Migrate guest to another host.;"Migration succeeds
​​";;RedHatEnterpriseLinux7/RHEL7-100112
3411;;;;;;;;;4;"4. After migration finish, redo step 2.
​​";Mouse and keyboard work properly after migration;;RedHatEnterpriseLinux7/RHEL7-100112
3412;RHEL7-100113;[macvtap] define macvtap network with duplicate interface name;define or create or edit the macvtap network with duplicate interface will fail;Yalan Zhang (yalzhang);Medium;Negative;Not Automated;;1;"1. macvtap network with duplicate interface dev will not be defined or created.Try bridge/vepa/private/passthrough mode, all the results is as expected.
 # cat macvtap.xml
  <network>
         <name>direct-macvtap</name>
         <forward mode=""bridge"">
           <interface dev=""ens1f0""/>
           <interface dev=""ens1f1""/>
           <interface dev=""ens1f1""/>
           <interface dev=""ens1f0""/>
         </forward>
       </network>";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-100113
3412;;;;;;;;;2;2. # virsh net-define macvtap.xml;"error: Failed to define network from macvtap.xml
 error: XML error: interface 'ens1f1' can only be listed once in network direct-macvtap";;RedHatEnterpriseLinux7/RHEL7-100113
3412;;;;;;;;;3;3. # virsh net-create macvtap.xml;"error: Failed to create network from macvtap.xml
 error: XML error: interface 'ens1f1' can only be listed once in network direct-macvtap";;RedHatEnterpriseLinux7/RHEL7-100113
3412;;;;;;;;;4;"4. net-edit will fail if add an duplicate interface dev in macvtap network.
 # virsh net-dumpxml direct-macvtap
 <network>
   <name>direct-macvtap</name>
   <uuid>f5ad443b-96bf-492e-9126-61a47aa1f9ff</uuid>
   <forward dev='ens1f0' mode='passthrough'>
     <interface dev='ens1f0'/>
     <interface dev='ens1f1'/>
   </forward>
 </network>
 
 # virsh net-edit direct-macvtap  ==> add 
 <interface dev='ens1f1'/> again";"error: XML error: interface 'ens1f1' can only be listed once in network direct-macvtap
 Failed. Try again? [y,n,f,?]:";;RedHatEnterpriseLinux7/RHEL7-100113
3413;RHEL7-100114;[Nodedevice] Destroy node device which is not a fibre channel HBA;Destroy node device which is not a fibre channel HBA;Jingjing Shao (jishao);Medium;Positive;Automated;;1;" 1. Choose a nodedevice which is not a fibre channel HBA， such as network device
 
   +- pci_0000_00_01_0
   |   |
   |   +- pci_0000_04_00_0
   |   |   |
   |   |   +- net_eno1_34_40_b5_b1_09_30
   |   |     
   |   +- pci_0000_04_00_1
   |       |
   |       +- net_eno2_34_40_b5_b1_09_32
   |         
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-100114
3413;;;;;;;;;2;# virsh nodedev-destroy pci_0000_04_00_1;"# virsh nodedev-destroy pci_0000_04_00_1
 error: Failed to destroy node device 'pci_0000_04_00_1'
 error: internal error: Device is not a fibre channel HBA
​​";;RedHatEnterpriseLinux7/RHEL7-100114
3414;RHEL7-100472;nodedev-event  --event lifecycle;"virsh nodedev-event --help
    --event <string>  which event type to wait for";Jingjing Shao (jishao);Critical;Positive;Automated;;1;" 1. # virsh nodedev-list --tree
 ...
   |   +- pci_0000_86_10_0
   |   |   |
   |   |   +- net_enp134s16_1a_a2_b0_9a_a2_a0
   |   |     
   |   +- pci_0000_86_10_1
   |   |   |
   |   |   +- net_enp134s16f1_0e_9d_68_fd_2c_6b
 .....
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-100472
3414;;;;;;;;;2;"2. In one terminal
 # virsh nodedev-event  --event lifecycle
​​";​​;;RedHatEnterpriseLinux7/RHEL7-100472
3414;;;;;;;;;3;"3.In another terminal
 # virsh nodedev-detach pci_0000_86_10_0
 Device pci_0000_86_10_0 detached
 
 # virsh nodedev-reattach pci_0000_86_10_0
 Device pci_0000_86_10_0 re-attached";​​;;RedHatEnterpriseLinux7/RHEL7-100472
3414;;;;;;;;;4;"4. Check the output  on first terminal 
​​";"Wait for a class of node device events to occur, and print appropriate details of events as they happen
 
 # virsh nodedev-event  --event lifecycle
 event 'lifecycle' for node device net_enp134s16_1a_a2_b0_9a_a2_a0: Deleted
 events received: 1
 
 By default, this command is one-shot, and returns success once an event occurs; you can send SIGINT (usually via ""Ctrl-C"") to quit immediately.";;RedHatEnterpriseLinux7/RHEL7-100472
3415;RHEL7-100473;[node device] nodedev-event  --loop;"nodedev-event 
 --loop   loop until timeout or interrupt, rather than one-shot";Jingjing Shao (jishao);Critical;Positive;Automated;;1;" 1.# virsh nodedev-list --tree
 ...
   |   +- pci_0000_86_10_0
   |   |   |
   |   |   +- net_enp134s16_1a_a2_b0_9a_a2_a0
   |   |     
   |   +- pci_0000_86_10_1
   |   |   |
   |   |   +- net_enp134s16f1_0e_9d_68_fd_2c_6b
 .....";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-100473
3415;;;;;;;;;2;"2. In one terminal
 # virsh nodedev-event  --event lifecycle --loop
";​​;;RedHatEnterpriseLinux7/RHEL7-100473
3415;;;;;;;;;3;"3. In another terminal
 # virsh nodedev-detach pci_0000_86_10_0
 Device pci_0000_86_10_0 detached

 # virsh nodedev-reattach pci_0000_86_10_0
 Device pci_0000_86_10_0 re-attached
";​​;;RedHatEnterpriseLinux7/RHEL7-100473
3415;;;;;;;;;4;"check the first terminal, it has catched all the events
 # virsh nodedev-event  --event lifecycle --loop";"With --loop, the command prints all events until a timeout or interrupt key.

 # virsh nodedev-event  --event lifecycle --loop
 event 'lifecycle' for node device net_enp134s16_1a_a2_b0_9a_a2_a0: Deleted
 event 'lifecycle' for node device net_enp134s16_1a_a2_b0_9a_a2_a0: Created
 ^Cevent loop interrupted
 events received: 2";;RedHatEnterpriseLinux7/RHEL7-100473
3415;;;;;;;;;5;"4. detach the device which is already detached
 on one terminal
 # virsh nodedev-event --event lifecycle --loop

 on another terminal
 # virsh nodedev-detach pci_0000_05_00_1
 Device pci_0000_05_00_1 detached
 # virsh nodedev-detach pci_0000_05_00_1
 Device pci_0000_05_00_1 detached
";"check the first terminal, only the first event is catched
 # virsh nodedev-event --event lifecycle --loop
 event 'lifecycle' for node device net_enp5s0f1_00_1b_21_55_b3_b9: Deleted
 
​​";;RedHatEnterpriseLinux7/RHEL7-100473
3415;;;;;;;;;6;"5. attach the device which is already attached
 continue with above
 rerun the cmd in termial 1:
 # virsh nodedev-event --event lifecycle --loop

 on the 2nd terminal, attach the device which is detached in step 4
 # virsh nodedev-reattach pci_0000_05_00_1
 Device pci_0000_05_00_1 re-attached
";"# virsh nodedev-event --event lifecycle --loop
 event 'lifecycle' for node device net_enp5s0f1_00_1b_21_55_b3_b9: Created";;RedHatEnterpriseLinux7/RHEL7-100473
3415;;;;;;;;;7;"attach again
 # virsh nodedev-reattach pci_0000_05_00_1
 Device pci_0000_05_00_1 re-attached
​​";"# virsh nodedev-event --event lifecycle --loop
 event 'lifecycle' for node device net_enp5s0f1_00_1b_21_55_b3_b9: Created << output from step 5
 
 event 'lifecycle' for node device net_enp5s0f1_00_1b_21_55_b3_b9: Deleted   
 event 'lifecycle' for node device net_enp5s0f1_00_1b_21_55_b3_b9: Created  
 ^^^^
 the output when attach again
​​";;RedHatEnterpriseLinux7/RHEL7-100473
3416;RHEL7-100474;[node device] nodedev-event  --timestamp;"nodedev-event  --timestamp
    --timestamp      show timestamp for each printed event";Jingjing Shao (jishao);Critical;Positive;Automated;;1;" 1.# virsh nodedev-list --tree
 ...
   |   +- pci_0000_86_10_0
   |   |   |
   |   |   +- net_enp134s16_1a_a2_b0_9a_a2_a0
   |   |     
   |   +- pci_0000_86_10_1
   |   |   |
   |   |   +-net_enp134s16f1_0e_9d_68_fd_2c_6b
 .....";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-100474
3416;;;;;;;;;2;"2. In one terminal
 # virsh nodedev-event  --event lifecycle --loop  --timestamp
​​";​​;;RedHatEnterpriseLinux7/RHEL7-100474
3416;;;;;;;;;3;"3.In another terminal, run cmd
 # virsh nodedev-detach pci_0000_86_10_0
 Device pci_0000_86_10_0 detached
 
 # virsh nodedev-reattach pci_0000_86_10_0
 Device pci_0000_86_10_0 re-attached
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-100474
3416;;;;;;;;;4;check the first terminal;"When --timestamp is used, a human-readable timestamp will be printed before the event.
 
 # virsh nodedev-event  --event lifecycle --loop  --timestamp
 2017-03-17 13:23:33.472+0000: event 'lifecycle' for node device net_enp134s16_1a_a2_b0_9a_a2_a0: Deleted
 2017-03-17 13:23:35.511+0000: event 'lifecycle' for node device net_enp134s16_1a_a2_b0_9a_a2_a0: Created
 ^Cevent loop interrupted";;RedHatEnterpriseLinux7/RHEL7-100474
3417;RHEL7-100475;[node device] nodedev-event   --timeout;"virsh nodedev-event --help
  --timeout <number>  timeout seconds";Jingjing Shao (jishao);Critical;Positive;Automated;;1;" 1. # virsh nodedev-event  --event lifecycle  --loop --timeout 20
 event loop timed out
 events received: 0
​​";" If --timeout is specified, the command gives up waiting for events after seconds have elapsed. 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-100475
3418;RHEL7-100476;[node device] nodedev-event  --device;"virsh nodedev-event --help
  --device <string>  filter by node device name";Jingjing Shao (jishao);Critical;Positive;Automated;;1;" 1.# virsh nodedev-list --tree
 ...
   |   +- pci_0000_86_10_0
   |   |   |
   |   |   +- net_enp134s16_1a_a2_b0_9a_a2_a0
   |   |     
   |   +- pci_0000_86_10_1
   |   |   |
   |   |   +- net_enp134s16f1_0e_9d_68_fd_2c_6b
 .....";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-100476
3418;;;;;;;;;2;"2. Add filter by node device name
 In one terminal
 #  virsh nodedev-event  --event lifecycle  --loop --device net_enp134s16_1a_a2_b0_9a_a2_a0
​​";​​;;RedHatEnterpriseLinux7/RHEL7-100476
3418;;;;;;;;;3;"3.   In another terminal
 # virsh nodedev-detach pci_0000_86_10_0
 Device pci_0000_86_10_0 detached
 
 # virsh nodedev-detach pci_0000_86_10_1
 Device pci_0000_86_10_1 detached
 
 # virsh nodedev-reattach pci_0000_86_10_0
 Device pci_0000_86_10_0 re-attached
 
 # virsh nodedev-reattach pci_0000_86_10_1
 Device pci_0000_86_10_1 re-attached";​​;;RedHatEnterpriseLinux7/RHEL7-100476
3418;;;;;;;;;4;"4.Check the first terminal output
​​";"#  virsh nodedev-event  --event lifecycle  --loop --device net_enp134s16_1a_a2_b0_9a_a2_a0
 event 'lifecycle' for node device net_enp134s16_1a_a2_b0_9a_a2_a0: Deleted
 event 'lifecycle' for node device net_enp134s16_1a_a2_b0_9a_a2_a0: Created
 ^Cevent loop interrupted
 events received: 2";;RedHatEnterpriseLinux7/RHEL7-100476
3419;RHEL7-100477;"[node device] Test ""nodedev-event  --event  update"" in vm  -- bug 1540002";"Update tyep: there are two ways to test  
(1) test with the vm 
(2) test with USB device
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1;test with the vm;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-100477
3419;;;;;;;;;2;" 1. Prepare a vm with xml as right
 .....
  <disk type='file' device='cdrom'>
       <driver name='qemu' type='qcow2'/>
       <source file='/var/lib/libvirt/images/cdrom1.img'/>
       <backingStore/>
       <target dev='hdc' bus='ide'/>
       <readonly/>
       <alias name='ide0-1-0'/>
       <address type='drive' controller='0' bus='1' target='0' unit='0'/>
     </disk>
 .....
​​";​​;;RedHatEnterpriseLinux7/RHEL7-100477
3419;;;;;;;;;3;"2. # cat disk.xml 
​​";" <disk type='file' device='cdrom'>
       <driver name='qemu' type='qcow2'/>
       <source file='/var/lib/libvirt/images/cdrom2.img'/>
       <backingStore/>
       <target dev='hdc' bus='ide'/>
       <readonly/>
       <alias name='ide0-1-0'/>
       <address type='drive' controller='0' bus='1' target='0' unit='0'/>
     </disk>";;RedHatEnterpriseLinux7/RHEL7-100477
3419;;;;;;;;;4;"3.# ll /var/lib/libvirt/images
​​";"# ll /var/lib/libvirt/images
 total 7516504
 -rw-r--r--. 1 qemu qemu      196624 Mar 17 19:28 cdrom1.img
 -rw-r--r--. 1 qemu qemu      196624 Mar 17 19:39 cdrom2.img";;RedHatEnterpriseLinux7/RHEL7-100477
3419;;;;;;;;;5;"4.# virsh start V
 Domain V started
 
 login the vm, run cmd in vm as below:
 # virsh nodedev-event --event update";​​;;RedHatEnterpriseLinux7/RHEL7-100477
3419;;;;;;;;;6;"5.  in host  
 # virsh update-device V disk.xml 
​​";"# virsh update-device V disk.xml 
 Device updated successfully";;RedHatEnterpriseLinux7/RHEL7-100477
3419;;;;;;;;;7;6.  Check the vm terminal;"# virsh nodedev-event --event update
 event 'update' for node device block_sr0_QEMU_DVD_ROM_QM00003
 events received: 1
​​";;RedHatEnterpriseLinux7/RHEL7-100477
3419;;;;;;;;;8;test with USB device;​​;;RedHatEnterpriseLinux7/RHEL7-100477
3419;;;;;;;;;9;"1.  In the terminal
 # virsh nodedev-event --event update";​​;;RedHatEnterpriseLinux7/RHEL7-100477
3419;;;;;;;;;10;"2. format this USB device
​​";​​;;RedHatEnterpriseLinux7/RHEL7-100477
3419;;;;;;;;;11;"3. Check the event info
​​";"# virsh nodedev-event --event update
 event 'update' for node device block_sdb_Kingston_DataTraveler_3_0_408D5CE4C204B090B9E53E00_0_0
 ^Cevent loop interrupted
 events received: 1";;RedHatEnterpriseLinux7/RHEL7-100477
3419;;;;;;;;;12;"4. repeat the step 1~3 
 login the vm
 virsh nodedev-event --event update  --loop 
 
​​";"# virsh nodedev-event --event update  --loop
 event 'update' for node device block_sr0_QEMU_DVD_ROM_QM00003
 event 'update' for node device block_sr0_QEMU_DVD_ROM_QM00003
 event 'update' for node device block_sr0_QEMU_DVD_ROM_QM00003
 event loop interrupted
 events received: 3";;RedHatEnterpriseLinux7/RHEL7-100477
3420;RHEL7-100478;[node device] negative test with nodedev-event;"negative test with nodedev-event
";Jingjing Shao (jishao);Medium;Positive;Automated;;1;" 1. # virsh nodedev-event --event lifecycle   --device unknow
​​";"# virsh nodedev-event --event lifecycle   --device unknow
 error: Could not find matching device 'unknow'
 error: Node device not found: no node device with matching name 'unknow' ";Test Case;RedHatEnterpriseLinux7/RHEL7-100478
3420;;;;;;;;;2;"2. # virsh nodedev-event --event unknow
​​";"# virsh nodedev-event --event unknow
 error: unknown event type unknow";;RedHatEnterpriseLinux7/RHEL7-100478
3420;;;;;;;;;3;3.# virsh nodedev-event --event lifecycle   --unknow;"# virsh nodedev-event --event lifecycle   --unknow
 error: command 'nodedev-event' doesn't support option --unknow
​​";;RedHatEnterpriseLinux7/RHEL7-100478
3421;RHEL7-100480;[Cisco] Cisco-VMFEX：Hotplug/unplug network device to guest;"Hotplug/unplug network device to guest 
";Jingjing Shao (jishao);Medium;Positive;Not Automated;;1; Attach the the interface to the guest with vmfex  by pass through;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-100480
3421;;;;;;;;;2;"(1)Prepare the interface.xml as below
 
    <interface type='hostdev' managed='yes'>
       <mac address='02:24:6b:89:bc:e9'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x06' slot='0x00' function='0x1'/>
       </source>
       <virtualport type='802.1Qbh'>
         <parameters profileid='qa-libv'/>
       </virtualport>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-100480
3421;;;;;;;;;3;"(2) Prepare a running guest 
      # virsh start V
​​";​​;;RedHatEnterpriseLinux7/RHEL7-100480
3421;;;;;;;;;4;"(3) #  virsh attach-device  V  interface.xml
​​";"#  virsh attach-device  V  interface.xml
 Device attached successfully";;RedHatEnterpriseLinux7/RHEL7-100480
3421;;;;;;;;;5;"(4) # # virsh dumpxml V  
​​";"# virsh dumpxml V
 <domain type='kvm' id='4'>
   <name>r7.1</name>
    .....
     <interface type='hostdev' managed='yes'>
       <mac address='02:24:6b:89:bc:e9'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x06' slot='0x00' function='0x1'/>
       </source>
       <virtualport type='802.1Qbh'>
         <parameters profileid='qa-libv'/>
       </virtualport>
       <alias name='hostdev0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
    .....
 </domain>";;RedHatEnterpriseLinux7/RHEL7-100480
3422;RHEL7-103609;ALIYUN-TC: Inject user data;ALIYUN-TC: Inject user data;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"Prepare a simple script, such as:
 # cat userdata.sh
 #!/bin/bash
 echo `date` >> /home/test.log
 Then base64 encrypt it:
 # cat userdata.sh | base64";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103609
3422;;;;;;;;;2;"Use aliyun cli to create an ECS and inject user data:
 # aliyuncli ecs CreateInstance --InstanceChargeType PostPaid --ImageId rhel_7_4_64_20G_alibase_20170917.vhd --InstanceType ecs.n1.tiny --InternetChargeType PayByTraffic --SecurityGroupId sg-rj9f46qhpa7q02u5jl2p --VSwitchId vsw-rj9mxj81k24a3erwqibza --KeyPairName yuxisun --SystemDiskCategory cloud_efficiency --HostName rhel74-20170917-userdata --InstanceName rhel74-20170917-userdata --InternetMaxBandwidthOut 5 --InternetMaxBandwidthIn 5 --RegionId us-west-1 --UserData IyEvYmluL2Jhc2gKZWNobyBgZGF0ZWAgPj4gL2hvbWUvdGVzdC5sb2cK
 Then allocate public IP and start instance.";​​;;RedHatEnterpriseLinux7/RHEL7-103609
3422;;;;;;;;;3;Login the VM and check if the script is executed;"The script is executed.
 # cat /home/test.log
 Fri Sep 8 19:09:25 CST 2017";;RedHatEnterpriseLinux7/RHEL7-103609
3423;RHEL7-103665;[qemu][config]Restart libvirtd with negative value for parameters which require positive integer in qemu.conf;"Check libvirt should disallow negative value for ""max_*"" in qemu.conf";Yan Fu (yafu);Medium;Negative;Manual Only;;1;" 1.set the followings parameters to negative value in /etc/libvirt/qemu.conf
 (Note: Set ONE parameter at one time).
 
 
* remote_websocket_port_min = -5702 
* remote_websocket_port_max = -65535 
* remote_display_port_min = -5900
* remote_display_port_max = -65535 
* migration_port_min = -49152 
* migration_port_max = -49215 
* max_processes = -5
* max_files = -5 
* max_queued = -3
* keepalive_count = -5
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103665
3423;;;;;;;;;2;"2.Restart libvirtd service
 
* #systemctl restart libvirtd
* # systemctl status libvirtd
";"2.libvirtd service restart without error info, but check the libvirtd status can see libvirtd status is dead.
 
 Output:
 #systemctl status libvirtd
 ● libvirtd.service - Virtualization daemon
    Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; enabled; vendor preset: enabled)
    Active: inactive (dead) since Wed 2015-10-28 14:06:29 CST; 3s ago
      Docs: man:libvirtd(8)
            http://libvirt.org
   Process: 14895 ExecReload=/bin/kill -HUP $MAINPID (code=exited, status=0/SUCCESS)
   Process: 23777 ExecStart=/usr/sbin/libvirtd $LIBVIRTD_ARGS (code=exited, status=0/SUCCESS)
  Main PID: 23777 (code=exited, status=0/SUCCESS)";;RedHatEnterpriseLinux7/RHEL7-103665
3424;RHEL7-103666;"[libvirtd][-t |--timeout] Test for option ""--timeout"" with running guests";"Negative test for option ""--timeout"" with virsh client";Yan Fu (yafu);Low;Positive;Manual Only;;1;" 1.Start a libvirtd process  with timeout option:
 $libvirtd --timeout 60";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103666
3424;;;;;;;;;2;"2.Start a guest:
 $virsh start rhel7.3";​​;;RedHatEnterpriseLinux7/RHEL7-103666
3424;;;;;;;;;3;3.$sleep 60 && pidof libvirtd;3.libvirtd not exited after timeout since timeout will not take effect if there are running guests or virsh client connected.;;RedHatEnterpriseLinux7/RHEL7-103666
3425;RHEL7-103670;Check mac address when do the VF pci assignment with vfio  --bug 1415609 1442040 1460082;"Check mac address when do the VF pci assignment with vfio,  test the 82576,82599, mlx, Emulex five type NICs with the scenario as above
";Jingjing Shao (jishao);High;Positive;Not Automated;;1;"1,  Check device list  and device mac address
 # ip l";" Output:
 41: enp134s16f1: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether 7e:a6:8f:e6:0a:12 brd ff:ff:ff:ff:ff:ff
 42: enp134s16f3: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether de:25:3b:42:ad:f1 brd ff:ff:ff:ff:ff:ff
 43: enp134s16f5: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether 5a:6c:10:b1:c6:32 brd ff:ff:ff:ff:ff:ff
 44: enp134s16f7: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether 56:c3:d3:35:81:c2 brd ff:ff:ff:ff:ff:ff
 45: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off

 (vf with random mac, admin mac is 0 after first initialize)";Test Case;RedHatEnterpriseLinux7/RHEL7-103670
3425;;;;;;;;;2;"2. Prepare a device xml and attach to guest
 # cat vf.xml
 <interface type='hostdev' managed='yes'>
 <mac address='02:24:6b:89:bc:e9'/>
 <source>
 <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x1'/>
 </source>
 </interface>

 # virsh attach-device q35-js vf.xml
 Device attached successfully
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-103670
3425;;;;;;;;;3;"3. Check device list  and device mac address
 # ip l";"Output:
 45: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 02:24:6b:89:bc:e9, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off

 (vf admin mac change to the guest's mac)
";;RedHatEnterpriseLinux7/RHEL7-103670
3425;;;;;;;;;4;"4. Check the device mac address in guest xml
 # virsh dumpxml q35-js | grep interface -A9
     <interface type='hostdev' managed='yes'>
       <mac address='02:24:6b:89:bc:e9'/>
       <driver name='vfio'/>
       <source>
         <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x1'/>
       </source>
       <alias name='hostdev0'/>
       <address type='pci' domain='0x0000' bus='0x05' slot='0x00' function='0x0'/>
     </interface>
​​";" 
";;RedHatEnterpriseLinux7/RHEL7-103670
3425;;;;;;;;;5;"5.Destroy guest and check device mac address
 # virsh destroy q35-js
 Domain q35-js destroyed

 # ip l
​​";"Output:
 45: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 7e:a6:8f:e6:0a:12, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
 48: enp134s16f1: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether 7e:a6:8f:e6:0a:12 brd ff:ff:ff:ff:ff:ff

 (after guest destroy, vf reattached to host, vf recover to its random mac in step 1, and vf admin mac change to this random mac too)
";;RedHatEnterpriseLinux7/RHEL7-103670
3425;;;;;;;;;6;"6. Start the guest and  attach the device  again
 
 # virsh start q35-js
 Domain q35-js started

 # virsh attach-device q35-js vf.xml
 Device attached successfully
​​"; ;;RedHatEnterpriseLinux7/RHEL7-103670
3425;;;;;;;;;7;"7. Check device list  and device mac address
 # ip l
​​";"Output:
 45: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 02:24:6b:89:bc:e9, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off

 (same as step 3)
";;RedHatEnterpriseLinux7/RHEL7-103670
3425;;;;;;;;;8;"8. Destroy guest and check device mac address 
 # virsh destroy q35-js
 Domain q35-js destroyed

 # ip l
​​";"Output:
 45: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 7e:a6:8f:e6:0a:12, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
 51: enp134s16f1: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether 7e:a6:8f:e6:0a:12 brd ff:ff:ff:ff:ff:ff

 (same as step 5)
";;RedHatEnterpriseLinux7/RHEL7-103670
3426;RHEL7-103676;Check mac address when do the macvtap passthrough with VF which never has been used in VF pci assignment with vfio --bug 1415609 1442040 1460082;test the 82576,82599, mlx, Emulex five type NICs with the scenario as above;Jingjing Shao (jishao);Critical;Positive;Not Automated;;1;"1,  Check device list  and device mac address
 # ip l";"Output:
 45: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 7e:a6:8f:e6:0a:12, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
 51: enp134s16f1: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether 7e:a6:8f:e6:0a:12 brd ff:ff:ff:ff:ff:ff
 59: enp134s16f3: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether de:25:3b:42:ad:f1 brd ff:ff:ff:ff:ff:ff";Test Case;RedHatEnterpriseLinux7/RHEL7-103676
3426;;;;;;;;;2;"2. Prepare a macvtap network
 # virsh net-dumpxml macvtap
​​";"Output:
 <network>
   <name>macvtap</name>
   <uuid>a53c4f33-58ea-4b2e-80b4-f9d103b7b0a3</uuid>
   <forward dev='enp134s16f3' mode='passthrough'>
     <interface dev='enp134s16f3'/>
   </forward>
 </network>";;RedHatEnterpriseLinux7/RHEL7-103676
3426;;;;;;;;;3;"3. Prepare a device as below and attach to guest
 # cat mac_vf.xml
 <interface type='network'>
 <mac address='52:54:00:2e:43:0a'/>
 <source network='macvtap'/>
 </interface>

 # virsh attach-device q35-js mac_vf.xml
​​";"Output:
 Device attached successfully
";;RedHatEnterpriseLinux7/RHEL7-103676
3426;;;;;;;;;4;"4. Check device list and check device mac address
 # ip l
​​";"Output:
 45: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 7e:a6:8f:e6:0a:12, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC 52:54:00:2e:43:0a, spoof checking on, link-state auto, trust off, query_rss off
     vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
 54: macvtap0@enp134s16f3: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 500
     link/ether 52:54:00:2e:43:0a brd ff:ff:ff:ff:ff:ff";;RedHatEnterpriseLinux7/RHEL7-103676
3426;;;;;;;;;5;"5.  Destroy guest and check the device mac address
 # virsh destroy q35-js
 Domain q35-js destroyed

 # ip l
​​";"Output:
 45: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 7e:a6:8f:e6:0a:12, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC 02:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
 51: enp134s16f1: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether 7e:a6:8f:e6:0a:12 brd ff:ff:ff:ff:ff:ff
 59: enp134s16f3: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether de:25:3b:42:ad:f1 brd ff:ff:ff:ff:ff:ff
";;RedHatEnterpriseLinux7/RHEL7-103676
3427;RHEL7-103688;Check mac address when do the VF pci assignment with vfio which has been used in macvtap passthrough with VF  -- bug 1415609 1442040 1460082;test the 82576,82599, mlx, Emulex five type NICs with the scenario as above;Jingjing Shao (jishao);Critical;Positive;Not Automated;;1;"1,  Check device list  and device mac address
 # ip l 
​​";"Output: 
 45: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 7e:a6:8f:e6:0a:12, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC 02:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
 51: enp134s16f1: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether 7e:a6:8f:e6:0a:12 brd ff:ff:ff:ff:ff:ff
 59: enp134s16f3: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether de:25:3b:42:ad:f1 brd ff:ff:ff:ff:ff:ff
 60: vnet0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast master vir state UNKNOWN mode DEFAULT qlen 1000
     link/ether fe:54:00:ee:67:31 brd ff:ff:ff:ff:ff:ff";Test Case;RedHatEnterpriseLinux7/RHEL7-103688
3427;;;;;;;;;2;"2. Prepare the device xml and attach to guest  
 # cat vf.xml 
 <interface type='hostdev' managed='yes'>
 <mac address='02:24:6b:89:bc:e9'/>
 <source>
 <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x3'/>
 </source>
 </interface>
 
 # virsh attach-device q35-js vf.xml
​​";"Output:
 Device attached successfully";;RedHatEnterpriseLinux7/RHEL7-103688
3427;;;;;;;;;3;"3. Check the device list and mac address
 # ip l
​​";"Output:
 45: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 7e:a6:8f:e6:0a:12, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC 02:24:6b:89:bc:e9, spoof checking on, link-state auto, trust off, query_rss off
     vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off";;RedHatEnterpriseLinux7/RHEL7-103688
3427;;;;;;;;;4;"4. Destroy guest and check device mac address
 # virsh destroy q35-js
 Domain q35-js destroyed
 
 # ip l
​​";"Output:
 45: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 7e:a6:8f:e6:0a:12, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC de:25:3b:42:ad:f1, spoof checking on, link-state auto, trust off, query_rss off
     vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
 51: enp134s16f1: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether 7e:a6:8f:e6:0a:12 brd ff:ff:ff:ff:ff:ff
 61: enp134s16f3: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether de:25:3b:42:ad:f1 brd ff:ff:ff:ff:ff:ff
​​";;RedHatEnterpriseLinux7/RHEL7-103688
3428;RHEL7-103690;Check mac address when do the macvtap passthrough with VF which has been used in VF pci assignment with vfio  -- bug 1415609 1442040 1460082;"
test the 82576,82599, mlx, Emulex five type NICs with the scenario as above";Jingjing Shao (jishao);Critical;Positive;Not Automated;;1;"1,  Check device list  and device mac address
 # ip l";"Output:
     link/ether 56:c3:d3:35:81:c2 brd ff:ff:ff:ff:ff:ff
 45: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 7e:a6:8f:e6:0a:12, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC de:25:3b:42:ad:f1, spoof checking on, link-state auto, trust off, query_rss off
     vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
 51: enp134s16f1: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether 7e:a6:8f:e6:0a:12 brd ff:ff:ff:ff:ff:ff
 61: enp134s16f3: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether de:25:3b:42:ad:f1 brd ff:ff:ff:ff:ff:ff";Test Case;RedHatEnterpriseLinux7/RHEL7-103690
3428;;;;;;;;;2;"2. Prepare a network as below  
 # virsh net-dumpxml macvtap
​​";"Output:
 <network>
   <name>macvtap</name>
   <uuid>a53c4f33-58ea-4b2e-80b4-f9d103b7b0a3</uuid>
   <forward dev='enp134s16f1' mode='passthrough'>
     <interface dev='enp134s16f1'/>
   </forward>
 </network>";;RedHatEnterpriseLinux7/RHEL7-103690
3428;;;;;;;;;3;"3. Prepare a device xml as below and attach to guest 
 # cat mac_vf.xml 
 <interface type='network'>
 <mac address='52:54:00:2e:43:0a'/>
 <source network='macvtap'/>
 </interface>
 
 # virsh attach-device q35-js mac_vf.xml
​​";"Output:
 Device attached successfully";;RedHatEnterpriseLinux7/RHEL7-103690
3428;;;;;;;;;4;"4,  Check device list  and device mac address
 # ip l";"Output:
 45: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 52:54:00:2e:43:0a, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC de:25:3b:42:ad:f1, spoof checking on, link-state auto, trust off, query_rss off
     vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
 61: enp134s16f3: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether de:25:3b:42:ad:f1 brd ff:ff:ff:ff:ff:ff
 62: vnet0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast master vir state UNKNOWN mode DEFAULT qlen 1000
     link/ether fe:54:00:ee:67:31 brd ff:ff:ff:ff:ff:ff
 63: enp134s16f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 52:54:00:2e:43:0a brd ff:ff:ff:ff:ff:ff
 64: macvtap0@enp134s16f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 500
     link/ether 52:54:00:2e:43:0a brd ff:ff:ff:ff:ff:ff";;RedHatEnterpriseLinux7/RHEL7-103690
3428;;;;;;;;;5;"5.Destroy guest and check device mac address
 
 # virsh destroy q35-js
 Domain q35-js destroyed
 
 # ip l
​​";"Output:
 45: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 7e:a6:8f:e6:0a:12, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC de:25:3b:42:ad:f1, spoof checking on, link-state auto, trust off, query_rss off
     vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
 61: enp134s16f3: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether de:25:3b:42:ad:f1 brd ff:ff:ff:ff:ff:ff
 65: enp134s16f1: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
     link/ether 7e:a6:8f:e6:0a:12 brd ff:ff:ff:ff:ff:ff
​​";;RedHatEnterpriseLinux7/RHEL7-103690
3429;RHEL7-103694;[migration][NFV] migrate a guest with vhostuser interface with multiqueue use ovs+dpdk - bug 1285611;migrate a guest with vhostuser interface configured with ovs+dpdk is supported, test multiqueue and tx_queue_size, rx_queue_size parameters;Yalan Zhang (yalzhang);Critical;Positive;Not Automated;;1;" 1. check both on src and dst hosts to make sure the ovs+dpdk env is ready
 # ovs-vsctl show";" f9604d06-65ff-4f0e-bd2d-8fdfea1e02da
     Bridge ""ovsbr0""
         Port ""vhost-user1""
             Interface ""vhost-user1""
                 type: dpdkvhostuser
                 options: {n_rxq=""4""}
         Port ""ovsbr0""
             Interface ""ovsbr0""
                 type: internal
         Port ""vhost-user2""
             Interface ""vhost-user2""
                 type: dpdkvhostuser
                 options: {n_rxq=""4""}
";Test Case;RedHatEnterpriseLinux7/RHEL7-103694
3429;;;;;;;;;2;"2. start the guest on src host
 # virsh dumpxml vhost1
 ...
   <memory unit='KiB'>1048576</memory>
   <currentMemory unit='KiB'>1048576</currentMemory>
   <memoryBacking>
     <hugepages>
       <page size='2048' unit='KiB'/>
     </hugepages>
   </memoryBacking>
   <vcpu placement='static'>24</vcpu>
 ...
  <cpu>
     <numa>
       <cell id='0' cpus='0-23' memory='1048576' unit='KiB' memAccess='shared'/>
     </numa>
   </cpu>
 ...
  <devices>
 ...
     <interface type='vhostuser'>
       <mac address='52:54:00:93:51:db'/>
       <source type='unix' path='/var/run/openvswitch/vhost-user1' mode='client'>
 <reconnect enabled='yes' timeout='20'/>
 </source>
       <target dev='vhost-user1'/>
       <model type='virtio'/>
       <driver name='vhost' txmode='iothread' ioeventfd='on' event_idx='off' queues='4' rx_queue_size='512' tx_queue_size='1024'>
         <host csum='off' gso='off' tso4='off' tso6='off' ecn='off' ufo='off' mrg_rxbuf='off'/>
         <guest csum='off' tso4='off' tso6='off' ecn='off' ufo='off'/>
       </driver>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 ...
 </devices>
 ...

 # virsh start vhost1
 Domain vhost1 started
";​​;;RedHatEnterpriseLinux7/RHEL7-103694
3429;;;;;;;;;3;"3. on src host, start another guest vhost2
 # virsh dumpxml vhost2
 ...
   <memory unit='KiB'>1048576</memory>
   <currentMemory unit='KiB'>1048576</currentMemory>
   <memoryBacking>
     <hugepages>
       <page size='2048' unit='KiB'/>
     </hugepages>
   </memoryBacking>
   <vcpu placement='static'>24</vcpu>
 ...
  <cpu>
     <numa>
       <cell id='0' cpus='0-23' memory='1048576' unit='KiB' memAccess='shared'/>
     </numa>
   </cpu>
 ...
  <devices>
 ...
     <interface type='vhostuser'>
       <mac address='52:54:00:93:51:db'/>
       <source type='unix' path='/var/run/openvswitch/vhost-user2' mode='client'>
 <reconnect enabled='yes' timeout='20'/>
 </source>
       <model type='virtio'/>
     <driver queues='4'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
 ...
 </devices>
 ...
 
 # virsh start vhost2
 Domain vhost2 started";​​;;RedHatEnterpriseLinux7/RHEL7-103694
3429;;;;;;;;;4;"4. on dst host,  the 2 guests still can ping each other.
 on vhost1: # nmcli con modify eth0 ipv4.addresses 10.10.10.10/24 ipv4.method manual; ping 10.10.10.20
 on vhost2: # nmcli con modify eth0 ipv4.addresses 10.10.10.20/24 ipv4.method manual; ping 10.10.10.10";​​;;RedHatEnterpriseLinux7/RHEL7-103694
3429;;;;;;;;;5;"5. migrate to dst host
 # virsh migrate vhost1 qemu+ssh://10.73.8.21/system --live --verbose
 root@10.73.8.21's password: 
 Migration: [100 %]
 # virsh migrate vhost2 qemu+ssh://10.73.8.21/system --verbose --live
 root@10.73.8.21's password: 
 Migration: [100 %]";migration succeed;;RedHatEnterpriseLinux7/RHEL7-103694
3429;;;;;;;;;6;"6. on target host, check the guest
 # virsh list
  Id    Name                           State
 ----------------------------------------------------
  7     vhost1                         running
  8     vhost2                         running  

 # virsh dumpxml vhost1  | grep /interface -B11";"   <interface type='vhostuser'>
       <mac address='52:54:00:93:51:db'/>
       <source type='unix' path='/var/run/openvswitch/vhost-user1' mode='client'>
 <reconnect enabled='yes' timeout='20'/>
 </source>
       <target dev='vhost-user1'/>
       <model type='virtio'/>
       <driver name='vhost' txmode='iothread' ioeventfd='on' event_idx='off' queues='4' rx_queue_size='512' tx_queue_size='1024'>
         <host csum='off' gso='off' tso4='off' tso6='off' ecn='off' ufo='off' mrg_rxbuf='off'/>
         <guest csum='off' tso4='off' tso6='off' ecn='off' ufo='off'/>
       </driver>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>

 (the xml no change)";;RedHatEnterpriseLinux7/RHEL7-103694
3429;;;;;;;;;7;7. login guest vhost1 and vhost2, the ping still working and the they are still connected;​​;;RedHatEnterpriseLinux7/RHEL7-103694
3429;;;;;;;;;8;"8. on guest vhost1 to check the setting still there (for tx/tx queue size)
 # ethtool -g eth0";"Ring parameters for eth0:
 Pre-set maximums:
 RX: 512
 RX Mini: 0
 RX Jumbo: 0
 TX: 1024
 Current hardware settings:
 RX: 512
 RX Mini: 0
 RX Jumbo: 0
 TX: 1024
";;RedHatEnterpriseLinux7/RHEL7-103694
3429;;;;;;;;;9;"9. confirm the setting is still there (for multiqueue)
 # ethtool -l eth0";"Channel parameters for eth0:
 Pre-set maximums:
 RX: 0
 TX: 0
 Other: 0
 Combined: 4
 Current hardware settings:
 RX: 0
 TX: 0
 Other: 0
 Combined: 4
";;RedHatEnterpriseLinux7/RHEL7-103694
3430;RHEL7-103720;[Video devices] [QXL] [vram64] Define a guest with qxl vram64 values set to an integer out of range;"Verify guest xml will fail to validate when vram 64 is set to an integer out of range. 
Note: valid range: (0, 4294967296)";Fangge Jin (fjin);Medium;Negative;Automated;;1;"Define guest xml, set vram64 to an integer out of range:
 
 #virsh edit rhel7.2
    ...
       <video>
      <model type='qxl' vram64='4294967297' heads='1'/> 
 </video>
      ...";"Fail to edit. Got such error in the terminal:
 
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content

 Failed. Try again? [y,n,i,f,?]:";Test Case;RedHatEnterpriseLinux7/RHEL7-103720
3431;RHEL7-103721;[Video devices] [QXL] [vram64] Define a guest with qxl vram64 values set to a non-numeric value;Verify guest xml will fail to validate when vram 64 is set to a non-numeric value.;Fangge Jin (fjin);Medium;Negative;Automated;;1;"Define guest xml, set vram64 to non-numeric value:
 
 #virsh edit rhel7.2
   ..
     <video>
      <model type='qxl' vram64='aaa' heads='1'/> 
 </video>
    ...";"Fail to edit. Got such error in the terminal:
 
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content

 Failed. Try again? [y,n,i,f,?]:";Test Case;RedHatEnterpriseLinux7/RHEL7-103721
3432;RHEL7-103722;[Video devices] [QXL] [vram64] Define a guest with  qxl vram64 values set to a float value;Verify guest xml will fail to validate when vram 64 is set to a float value.;Fangge Jin (fjin);Medium;Negative;Automated;;1;"Define guest xml, set vram64 to float value:
 #virsh edit rhel7.2
   ...
 <video>
       <model type='qxl' vram64='102.4' heads='1'/> 
 </video>
    ...";"Fail to edit. Got such error in the terminal:
 
 error: XML document failed to validate against schema: Unable to validate doc against /usr/share/libvirt/schemas/domain.rng
 Extra element devices in interleave
 Element domain failed to validate content

 Failed. Try again? [y,n,i,f,?]:";Test Case;RedHatEnterpriseLinux7/RHEL7-103722
3433;RHEL7-103727;[vnc&spice] Delete graphic password lively;Verify that guest graphic password can't be deleted lively.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with graphic
 2) set graphic password to a non-empty string";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103727
3433;;;;;;;;;2;Start the domain.;​​;;RedHatEnterpriseLinux7/RHEL7-103727
3433;;;;;;;;;3;"Delete graphic password on the fly
 (It means no passwd attribute for graphic device in update.xml).
 
 # cat update.xml
    <graphics type='vnc' port='0' autoport='yes' listen='127.0.0.1' keymap='en-us'/>
 
 # virsh update-device winxp update.xml
    Device updated successfully";"update-device successfully.
​​";;RedHatEnterpriseLinux7/RHEL7-103727
3433;;;;;;;;;4;"Connect guest window, and input the original password:
 # virt-viewer <guestname>";Open guest graphic successfully ;;RedHatEnterpriseLinux7/RHEL7-103727
3433;;;;;;;;;5;"Destroy and start the guest.
 # virsh destroy ${domain_name}
 # virsh start ${domain_name}";​​;;RedHatEnterpriseLinux7/RHEL7-103727
3433;;;;;;;;;6;"Connect guest window, and input the original password:
 # virt-viewer <guestname>";Open guest graphic successfully ;;RedHatEnterpriseLinux7/RHEL7-103727
3434;RHEL7-103728;[vnc&spice] Add graphic password lively;Verify that guest graphic password can't added lively;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Edit or define a guest with such setting:
 1) with graphic
 2) don't set graphic password ";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103728
3434;;;;;;;;;2;Start the domain.;​​;;RedHatEnterpriseLinux7/RHEL7-103728
3434;;;;;;;;;3;"Change graphic password on the fly.
 # cat update.xml
    <graphics type='vnc' port='0' autoport='yes' listen='127.0.0.1' keymap='en-us' passwd='111111'/>
 
 # virsh update-device winxp update.xml
    Device updated successfully";"update-device fails.
 
 Output:
 error: Failed to update device from /tmp/spice.xml
 error: internal error: unable to execute QEMU command 'set_password': Could not set password
​​";;RedHatEnterpriseLinux7/RHEL7-103728
3434;;;;;;;;;4;"Connect guest window
 # virt-viewer <guestname>";No need to input graphic password, open guest graphic directly ;;RedHatEnterpriseLinux7/RHEL7-103728
3434;;;;;;;;;5;"Destroy and start the guest.
 # virsh destroy ${domain_name}
 # virsh start ${domain_name}";​​;;RedHatEnterpriseLinux7/RHEL7-103728
3434;;;;;;;;;6;"Connect guest window
 # virt-viewer ${domain_name}\";No need to input graphic password, open guest graphic directly ;;RedHatEnterpriseLinux7/RHEL7-103728
3435;RHEL7-103729;[vnc&spice] Delete graphic password persistently;Verify that guest graphic password can't be deleted persistently.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Test the steps in RHEL7-103727. The difference is that:
 
 1) Add option --persistent for command update-device
 
 2) No need to input graphic password after guest restarts, guest graphic can be connected directly.";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103729
3436;RHEL7-103730;[vnc&spice] Add graphic password persistently;Verify that guest graphic password can't added persistently;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Test the steps in RHEL7-103728. The difference is that:
 
 1) Add option --persistent for command update-device";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103730
3437;RHEL7-103731;[vnc&spice] Update graphic password lively - from non-empty string to empty string;"Verify that guest graphic password can be updated from non-empty string to empty string lively. 
Note: There is no way to log into guest graphic when password is empty string";Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" Test the steps in RHEL7-13173. The difference is that:
 
 1) The new password is empty string: passwd=''
 
 Note:
 1) No need to input anything for the empty password, press enter directly
 
 2) Guest can't be logged in successfully with empty password(this is expected)";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103731
3438;RHEL7-103732;[vnc&spice] Update graphic password lively - from empty string to non-empty string;Verify that guest graphic password can be updated from empty string to non-empty string lively. ;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;" Test the steps in RHEL7-13173. The difference is that:
 
 1) The original password is empty string: passwd=''
 
 Note:
 1) No need to input anything for the empty password, press enter directly
 
 2) Guest can't be logged in successfully with empty password(this is expected)";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103732
3439;RHEL7-103733;[vnc&spice] Update graphic password persistently - from non-empty string to empty string;Verify that guest graphic password can be updated from non-empty string to empty string persistently;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Test the steps in RHEL7-103731. The difference is that:
 
 1) Add option --persistent for command update-device
 
 2) New password still takes effect after guest restarts ";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103733
3440;RHEL7-103734;[vnc&spice] Update graphic password persistently - from empty string to non-empty string;Verify that guest graphic password can be updated from empty string to non-empty string persistently. ;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Test the steps in RHEL7-103732. The difference is that:
 
 1) Add option --persistent for command update-device
 
 2) New password still takes effect after guest restarts ";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103734
3441;RHEL7-103742;"[vnc&spice] Update graphic passwd with ""connected""=keep";"Verify that previous client connection can be kept when update graphic passwd with ""connected"" = keep. ";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set graphic password to a non-empty string
​​";"
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-103742
3441;;;;;;;;;2;Start guest;​​;;RedHatEnterpriseLinux7/RHEL7-103742
3441;;;;;;;;;3;"Connect to guest graphic by graphic client, for example:
 # virt-viewer $guest";​​;;RedHatEnterpriseLinux7/RHEL7-103742
3441;;;;;;;;;4;"Prepare a update.xml with connected=keep and new password for graphic:
 
 # cat update.xml
 <graphics type='spice' port='5900' tlsPort='5901' autoport='yes'
 listen='127.0.0.1' passwd='cccddd' connected='keep'/>";​​;;RedHatEnterpriseLinux7/RHEL7-103742
3441;;;;;;;;;5;" # virsh update-device update.xml
​​"; Device updated successfully;;RedHatEnterpriseLinux7/RHEL7-103742
3441;;;;;;;;;6;Check client connection;The previous client connection is kept;;RedHatEnterpriseLinux7/RHEL7-103742
3441;;;;;;;;;7;"Check guest xml:
 # virsh dumpxml --security-info |grep gra
​​";"The password changes. Output:
 
   <graphics type='spice' port='5900' tlsPort='5901' autoport='yes'
 listen='0.0.0.0' passwd='cccddd' connected='keep'/>";;RedHatEnterpriseLinux7/RHEL7-103742
3442;RHEL7-103743;"[spice] Update graphic passwd with ""connected""=fail  when a client is already connected";"Verify that update graphic passwd with ""connected"" = fail will fail when a client is already connected
 Bug 852675 - [Graphical framebuffer] update device with connected parameter ""fail"", guest's xml changed";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set graphic password to a non-empty string";"
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-103743
3442;;;;;;;;;2;Start guest;​​;;RedHatEnterpriseLinux7/RHEL7-103743
3442;;;;;;;;;3;"Connect to guest graphic by graphic client, for example:
 # virt-viewer $guest";​​;;RedHatEnterpriseLinux7/RHEL7-103743
3442;;;;;;;;;4;"Prepare a update.xml with connected=fail and new password for graphic:
 
 #cat update.xml
 ...
 <graphics type='spice' autoport='yes' listen='127.0.0.1' passwd= 'cccddd' connected= 'fail'/>";​​;;RedHatEnterpriseLinux7/RHEL7-103743
3442;;;;;;;;;5;"# virsh update-device spice update.xml
​​";"Update failed
 
 Output:
 error: Failed to update device from spice-new.xml
 error: internal error unable to execute QEMU command '__com.redhat_set_password': Could not set password";;RedHatEnterpriseLinux7/RHEL7-103743
3442;;;;;;;;;6;"Check guest xml:
 # virsh dumpxml --security-info |grep gra
​​";"The password doesn't change. Output:
 
   <graphics type='spice' port='5900' tlsPort='5901' autoport='yes'
 listen='0.0.0.0' passwd='aaabbb' connected='disconnect'/>";;RedHatEnterpriseLinux7/RHEL7-103743
3443;RHEL7-103744;"[spice]Update graphic passwd with ""connected""=fail when no client is  connected";"Verify that update graphic passwd with ""connected"" = fail will succeed when no client is connected";Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set graphic password to a non-empty string
​​";"
 
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-103744
3443;;;;;;;;;2;Start guest;​​;;RedHatEnterpriseLinux7/RHEL7-103744
3443;;;;;;;;;3;"Prepare a update.xml with connected=fail and new password for graphic:
 
 #cat update.xml
 <graphics type='spice' autoport='yes' listen='127.0.0.1' passwd= 'cccddd' connected= 'fail'/>";​​;;RedHatEnterpriseLinux7/RHEL7-103744
3443;;;;;;;;;4;"# virsh update-device spice update.xml
​​"; Device updated successfully;;RedHatEnterpriseLinux7/RHEL7-103744
3443;;;;;;;;;5;"Check guest xml:
 # virsh dumpxml --security-info |grep gra
​​";"The password changes. Output:
 
   <graphics type='spice' port='5900' tlsPort='5901' autoport='yes'
 listen='0.0.0.0' passwd='cccddd' connected='fail'/>";;RedHatEnterpriseLinux7/RHEL7-103744
3444;RHEL7-103774;[vnc] Start guest with vnc sharePolicy=ignore;Verify that when set vnc sharepolicy to ignore, multiple vncviewers can be connected at same time no matter whether with -share option;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting: 
 1) with vnc graphic 
 2) set sharepolicy to """"ignore""
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103774
3444;;;;;;;;;2;"start the guest 
 #virsh start rhel6
 
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-103774
3444;;;;;;;;;3;"check the vnc sharepolicy in dumpxml
 #virsh dumpxml rhel6";"sharePolicy=ignore in dumpxml.
 
 Output:
 <graphics type='vnc' port='5900' autoport='yes' listen='10.66.83.195' sharePolicy='ignore'>
    <listen type='address' address='10.66.83.195'/>
 </graphics>";;RedHatEnterpriseLinux7/RHEL7-103774
3444;;;;;;;;;4;"Check sharepolicy in qemu command line:
 #ps -ef | grep kvm";"Output:
 ... -vnc 10.66.83.195:0,share=ignore";;RedHatEnterpriseLinux7/RHEL7-103774
3444;;;;;;;;;5;"Open several terminals , then connect the guest with the vncviewer without -share
 T1#vncviewer 10.66.83.195:5900
 T2#vncviewer 10.66.83.195:5900
 T3#vncviewer 10.66.83.195:5900";All connections should be successful and they share the same connection;;RedHatEnterpriseLinux7/RHEL7-103774
3444;;;;;;;;;6;Disconnect the three connection;​​;;RedHatEnterpriseLinux7/RHEL7-103774
3444;;;;;;;;;7;"Reconnect the guest in three terminals with -share
 T1#vncviewer 10.66.83.195:5900 -share
 T2#vncviewer 10.66.83.195:5900 -share
 T3#vncviewer 10.66.83.195:5900 -share";All connections should be successful and they share the same connection;;RedHatEnterpriseLinux7/RHEL7-103774
3445;RHEL7-103775;[vnc] Start guest with vnc sharePolicy=force-shared;Verify that when set vnc sharepolicy to force-shared, vncviewer can be connected only when started with -share.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting: 
 1) with vnc graphic 
 2) set sharepolicy to """"force-shared""";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103775
3445;;;;;;;;;2;Start the guest;"
​​";;RedHatEnterpriseLinux7/RHEL7-103775
3445;;;;;;;;;3;"Check the vnc sharepolicy in dumpxml
 #virsh dumpxml rhel6";"Output:
 ...
 <graphics type='vnc' port='5900' autoport='yes' listen='10.66.83.195' sharePolicy='force-shared'>
 <listen type='address' address='10.66.83.195'/>
 </graphics>
  ";;RedHatEnterpriseLinux7/RHEL7-103775
3445;;;;;;;;;4;"Check the vnc sharepolicy in qemu command line:
 #ps -ef | grep kvm";"Output:
 -vnc 10.66.83.195:0,share=force-shared
​​";;RedHatEnterpriseLinux7/RHEL7-103775
3445;;;;;;;;;5;"Connect the guest without the -shared option
 #vncviewer 10.66.83.195:5900";fail to connect the guest;;RedHatEnterpriseLinux7/RHEL7-103775
3445;;;;;;;;;6;"Open several terminals , then reconnect the guest with the vncviewer with -share
 T1#vncviewer 10.66.83.195:5900 -share
 T2#vncviewer 10.66.83.195:5900 -share
 T3#vncviewer 10.66.83.195:5900 -share";All connections should be successful and they share the same connection;;RedHatEnterpriseLinux7/RHEL7-103775
3446;RHEL7-103776;[vnc] Start guest with fips enabled and with vnc password;Verify that guest will fail to start when vnc password is set and fips is enabled on host;Fangge Jin (fjin);High;Negative;Not Automated;;1;Enable FIPs mode on host;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103776
3446;;;;;;;;;2;"Edit or define a guest with such setting: 
 1) with vnc graphic 
 2) set password for vnc
";​​;;RedHatEnterpriseLinux7/RHEL7-103776
3446;;;;;;;;;3;"Start the guest.
 # virsh start $vm
";"The guest cannot start, and should get error:

 Output:
 error: Failed to start domain $vm
 error: internal error: qemu unexpectedly closed the monitor: 2018-08-09T02:55:03.750047Z qemu-kvm: -vnc 127.0.0.1:0,password: Failed to start VNC server: VNC password auth disabled due to FIPS mode, consider using the VeNCrypt or SASL authentication methods as an alternative
";;RedHatEnterpriseLinux7/RHEL7-103776
3447;RHEL7-103777;[vnc] Start guest with fips disabled and without vnc password;Verify that guest can start successfully with correct qemu command line when no vnc password is set and fips is disabled on host;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;Disable FIPs mode on host.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103777
3447;;;;;;;;;2;"Edit or define a guest with such setting: 
 1) with vnc graphic 
 2) don't set password for vnc ";​​;;RedHatEnterpriseLinux7/RHEL7-103777
3447;;;;;;;;;3;Start guest;"The guest can start successfully.
​​";;RedHatEnterpriseLinux7/RHEL7-103777
3447;;;;;;;;;4;"Check the qemu cmdline
 #ps -ef | grep $vm | grep fips";cannot find '-enable-fips' in qemu cmdline;;RedHatEnterpriseLinux7/RHEL7-103777
3448;RHEL7-103778;[vnc] Start guest with fips disabled and with vnc password;Verify that guest can start successfully with correct qemu command line when vnc password is set and fips is disabled on host;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;Disable FIPs mode on host.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103778
3448;;;;;;;;;2;"Edit or define a guest with such setting: 
 1) with vnc graphic 
 2) set password for vnc ";​​;;RedHatEnterpriseLinux7/RHEL7-103778
3448;;;;;;;;;3;Start guest;"the guest can start successfully.
​​";;RedHatEnterpriseLinux7/RHEL7-103778
3448;;;;;;;;;4;"Check the qemu cmdline
 #ps -ef | grep $vm | grep fips";cannot find '-enable-fips' in qemu cmdline;;RedHatEnterpriseLinux7/RHEL7-103778
3449;RHEL7-103779;virtio Disk & virtio scsi controller:  Config Qemu to use IOMMU for Virtio   --bug 1463163 1467811 1597482;"Disk part : Config Qemu to use IOMMU for Virtio
Bug 1463163 - Guest OS will down when disk enable the IOMMU for Virtio
 Bug 1467811 - Guest OS will down when disk enable the IOMMU for virtio-scsi";Jingjing Shao (jishao);High;Positive;Not Automated;;1;"1. Prepare  a q35 guest  which OS is rhel7.4 or higher version
 add the xml as below in the guest
 .....
   <features>
    <ioapic driver='qemu'/>
  </features>
  ...
   <iommu model='intel'>
      <driver intremap='on'  iotlb='on'/>
   </iommu>
 ...
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103779
3449;;;;;;;;;2;"2. start the guest and check the qemu command line
 # virsh start q35-js
 Domain q35-js started
 
 #  ps -ef | grep qemu
​​";"Check the qemu command line as below:   
 .....-device intel-iommu,intremap=on, device-iotlb=on.....";;RedHatEnterpriseLinux7/RHEL7-103779
3449;;;;;;;;;3;"Scenario 1: disk with virtio bus
​​";​​;;RedHatEnterpriseLinux7/RHEL7-103779
3449;;;;;;;;;4;"3. Add the  iommu='on' ats='on' to disk xml part 
 <disk type='file' device='disk'>
    <driver name='qemu' type='qcow2' cache='none' iommu='on' ats='on' />
     <source file='/nfs/rhel7.3-q35.qcow2'/>
     <target dev='vda' bus='virtio'/>
     <address type='pci' domain='0x0000' bus='0x01' slot='0x00' function='0x0'/>
 </disk>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-103779
3449;;;;;;;;;5;"4.  Start the guest , check the qemu command line and  check the basic function
 # virsh start q35-js
 Domain q35-js started

 # ps -ef | grep iommu

 login in the guest and touch a file
 # touch file";"Check the qemu command line as below:   
 # ps -ef | grep iommu
 -device virtio-blk-pci,scsi=off,bus=pci.4,addr=0x0,drive=drive-virtio-disk0,id=virtio-disk0,bootindex=1,iommu_platform=on,ats=on....

 In the guest， the file can be touched successfully";;RedHatEnterpriseLinux7/RHEL7-103779
3449;;;;;;;;;6;Scenario 2: Disk with SCSI bus attached to virtio SCSI controller;​​;;RedHatEnterpriseLinux7/RHEL7-103779
3449;;;;;;;;;7;"5.  Add the  iommu='on' ats='on' to scsi xml part

      <controller type='scsi' index='0' model='virtio-scsi'>
        <driver iommu='on' ats='on'/>
        <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
      </controller>

    <disk type='file' device='disk'>
       <driver name='qemu' type='qcow2' cache='none'/>
       <source file='/nfs/rhel7.3-q35.qcow2'/>
       <target dev='vda' bus='scsi'/>
     </disk>   
 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-103779
3449;;;;;;;;;8;"6.  Start the guest , check the qemu command line and  check the basic function
 # virsh start q35-js
 Domain q35-js started

 # ps -ef | grep iommu

 login in the guest and touch a file
 # touch file";"Check the qemu command line as below:  
 
 # ps -ef | grep qemu | grep iommu
 -device virtio-scsi-pci,iommu_platform=on,ats=on,id=scsi0,bus=pci.1,addr=0x0


 In the guest， the file can be touched successfully";;RedHatEnterpriseLinux7/RHEL7-103779
3450;RHEL7-103780;virtio serial controller : Config Qemu to use IOMMU for Virtio;virtio-serial part : Config Qemu to use IOMMU for Virtio;Jingjing Shao (jishao);High;Positive;Not Automated;;1;" 1. Prepare  a q35 guest  which OS is rhel7.4 or higher version
 add the xml as below in the guest
 .....
   <features>
    <ioapic driver='qemu'/>
  </features>
  ...
   <iommu model='intel'>
      <driver intremap='on'  iotlb='on'/>
   </iommu>
 ...";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103780
3450;;;;;;;;;2;"2. Add the  iommu='on' ats='on' to virtio-serial  xml part 
      <controller type='virtio-serial' index='0'>
        <driver iommu='on' ats='on'/>
        <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
      </controller>";​​;;RedHatEnterpriseLinux7/RHEL7-103780
3450;;;;;;;;;3;"3. Start the guest , check the qemu command line and  check the basic function
 # virsh start q35-js
 Domain q35-js started

 # ps -ef | grep iommu";"Check the qemu command line as below:   
 # ps -ef | grep iommu
 -device virtio-serial-pci,id=virtio-serial0,iommu_platform=on,ats=on,bus=pci.1,addr=0x0
";;RedHatEnterpriseLinux7/RHEL7-103780
3450;;;;;;;;;4;4.  login in the guest  and check virtual-serial device;"login in guest 
 Check the virtual-serial device and check basic function 
 # lspci | grep serial
 01:00.0 Communication controller: Red Hat, Inc Virtio console (rev 01)";;RedHatEnterpriseLinux7/RHEL7-103780
3451;RHEL7-103783;virtio memballoon : Config Qemu to use IOMMU for Virtio;memory device part : Config Qemu to use IOMMU for Virtio;Jingjing Shao (jishao);High;Positive;Not Automated;;1;" 1. Prepare  a q35 guest  which OS is rhel7.4 or higher version
 add the xml as below in the guest
 .....
   <features>
    <ioapic driver='qemu'/>
  </features>
  ...
   <iommu model='intel'>
      <driver intremap='on'  iotlb='on'/>
   </iommu>
 ...
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103783
3451;;;;;;;;;2;"2. Add the  iommu='on' ats='on' to memballoon  xml part 
     <memballoon model='virtio'>
        <driver iommu='on' ats='on'/>
        <address type='pci' domain='0x0000' bus='0x00' slot='0x08' function='0x0'/>
      </memballoon>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-103783
3451;;;;;;;;;3;"3. Start the guest , check the qemu command line and  check the basic function
 # virsh start q35-js
 Domain q35-js started

 # ps -ef | grep iommu
​​";"Check the qemu command line as below:  

 # ps -ef | grep qemu | grep iommu
 -device virtio-balloon-pci,id=balloon0,bus=pci.1,addr=0x0,iommu_platform=on,ats=on -msg timestamp=on

";;RedHatEnterpriseLinux7/RHEL7-103783
3451;;;;;;;;;4;"4. Login in guest,  check the virtual-serial device and check basic function
 # lspci | grep memballoon
​​";01:00.0 Unclassified device [00ff]: Red Hat, Inc Virtio memory balloon (rev 01);;RedHatEnterpriseLinux7/RHEL7-103783
3451;;;;;;;;;5;"Back to host, change the memory to check the memory device is useful
​​";​​;;RedHatEnterpriseLinux7/RHEL7-103783
3451;;;;;;;;;6;"5.  Check the memory of guest
 # virsh dumpxml q35-js  | grep memory -A3
 
​​";".....
   <memory unit='KiB'>1048576</memory>
   <currentMemory unit='KiB'>1048576</currentMemory>
 .....
​​";;RedHatEnterpriseLinux7/RHEL7-103783
3451;;;;;;;;;7;"6. Set the memory of guest 
 # virsh setmem  q35-js   528288
​​";​​;;RedHatEnterpriseLinux7/RHEL7-103783
3451;;;;;;;;;8;"7. Check the memory of guest 
 # virsh dumpxml q35-js  | grep memory -A3
​​";".....
   <memory unit='KiB'>528288</memory>
   <currentMemory unit='KiB'>528288</currentMemory>
 .....";;RedHatEnterpriseLinux7/RHEL7-103783
3452;RHEL7-103784;virtio rng : Config Qemu to use IOMMU for Virtio;Rng part : Config Qemu to use IOMMU for Virtio;Jingjing Shao (jishao);High;Positive;Not Automated;;1;"1. Prepare  a q35 guest  which OS is rhel7.4 or higher version
 add the xml as below in the guest
 .....
   <features>
    <ioapic driver='qemu'/>
  </features>
  ...
   <iommu model='intel'>
      <driver intremap='on'  iotlb='on'/>
   </iommu>
 ...
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103784
3452;;;;;;;;;2;"2. Add the  iommu='on' ats='on' to  rng  xml part 
    <rng model='virtio'>
       <backend model='random'>/dev/random</backend>
       <driver iommu='on' ats='on'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x0d' function='0x0'/>
     </rng>
";​​;;RedHatEnterpriseLinux7/RHEL7-103784
3452;;;;;;;;;3;"3. Start the guest , check the qemu command line and  check the basic function
 # virsh start q35-js
 Domain q35-js started
 # ps -ef | grep qemu | grep iommu";"Output:
 -device virtio-balloon-pci,id=balloon0,bus=pci.1,addr=0x0,iommu_platform=on,ats=on -msg";;RedHatEnterpriseLinux7/RHEL7-103784
3452;;;;;;;;;4;"4. login in guest, Check the virtual-serial device and check basic function
 # lspci | grep memballoon
​​";"Output:
 01:00.0 Unclassified device [00ff]: Red Hat, Inc Virtio memory balloon (rev 01)";;RedHatEnterpriseLinux7/RHEL7-103784
3452;;;;;;;;;5;"5. In guest, check rng devices and read data
 # ls /dev/hwrng
 
​​";"Output:
 /dev/hwrng

";;RedHatEnterpriseLinux7/RHEL7-103784
3452;;;;;;;;;6;"6.  In guest, read data  by rng devices
 # cat /dev/hwrng
​​";"Output:
 ****date*********";;RedHatEnterpriseLinux7/RHEL7-103784
3453;RHEL7-103785;virtio interface: Config Qemu to use IOMMU for Virtio - bug 1467887 1520806;Network part : Config Qemu to use IOMMU for Virtio;Jingjing Shao (jishao);High;Positive;Not Automated;;1;" 1. Prepare  a q35 guest  which OS is rhel7.4 or higher version
 add the xml as below in the guest
 .....
   <features>
    <ioapic driver='qemu'/>
  </features>
  ...
   <iommu model='intel'>
      <driver intremap='on'  iotlb='on'/>
   </iommu>
 ...";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103785
3453;;;;;;;;;2;"2.  Add the  iommu='on' ats='on' to interface  xml part
  <interface type='network'>
       <mac address='52:54:00:ee:67:31'/>
       <source network='default'/>
        <driver iommu='on' ats='on'/>
       <model type='virtio'/>
       <address type='pci' domain='0x0000' bus='0x04' slot='0x00' function='0x0'/>
     </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-103785
3453;;;;;;;;;3;"3. Start the guest , check the qemu command line
 # virsh start q35-js
 Domain q35-js started

 # ps -ef | grep qemu | grep iommu
​​";"Output: 
 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:54:00:ee:67:31,bus=pci.4,addr=0x0,iommu_platform=on,ats=on -chardev pty,id=charserial0";;RedHatEnterpriseLinux7/RHEL7-103785
3453;;;;;;;;;4;4. login in the guest and check the device and  check the basic function;"Output:
 Check the device, and get the ip address, and ping host successfully
 need update the info when the bug as below is verfied
 https://bugzilla.redhat.com/show_bug.cgi?id=1467887 
​​";;RedHatEnterpriseLinux7/RHEL7-103785
3454;RHEL7-103786;[domifstat] [domiflist] domiflist, domifstat for bridge and network type interface - bug 1497396;"test the virsh command, they should be full supported for bridge type interface 
domiflist domain [--inactive]
domifstat domain interface-device
domiflist with --source agent will return all the interface on the guest's POV, no matter the what type the interface is. 
domiflist with --source lease will return all interface from host's POV";Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"start a guest with bridge and network type interface
 # virsh start rhel7
 Domain rhel7 started

 # virsh dumpxml rhel7 | grep /interface -B7
     <interface type='bridge'>
       <mac address='52:54:00:c0:ff:fe'/>
       <source bridge='br0'/>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>
     <interface type='network'>
       <mac address='52:54:00:76:82:b1'/>
       <source network='default' bridge='virbr0'/>
       <target dev='vnet1'/>
       <model type='virtio'/>
       <alias name='net1'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>

 # brctl show
 bridge name bridge id STP enabled interfaces
 br0 8000.52540091ce0c no eno1
 vnet0
 virbr0 8000.5254005b50d9 yes virbr0-nic
 vnet1
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103786
3454;;;;;;;;;2;"login guest to ensure the 2 interface both get ip address
 (if do not get ip, use dhclient to apply one)
 # ifconfig";"eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 10.66.5.77  netmask 255.255.252.0  broadcast 10.66.7.255
         inet6 fe80::5054:ff:fec0:fffe  prefixlen 64  scopeid 0x20<link>
         ether 52:54:00:c0:ff:fe  txqueuelen 1000  (Ethernet)
         RX packets 279  bytes 23585 (23.0 KiB)
         RX errors 0  dropped 43  overruns 0  frame 0
         TX packets 8  bytes 1632 (1.5 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

 eth1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 192.168.122.216  netmask 255.255.255.0  broadcast 192.168.122.255
         inet6 fe80::5054:ff:fe76:82b1  prefixlen 64  scopeid 0x20<link>
         ether 52:54:00:76:82:b1  txqueuelen 1000  (Ethernet)
         RX packets 77  bytes 6535 (6.3 KiB)
         RX errors 0  dropped 5  overruns 0  frame 0
         TX packets 68  bytes 6894 (6.7 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0";;RedHatEnterpriseLinux7/RHEL7-103786
3454;;;;;;;;;3;domiflist;​​;;RedHatEnterpriseLinux7/RHEL7-103786
3454;;;;;;;;;4;"1.on host
 # virsh domiflist rhel7";"Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet0      bridge     br0        virtio      52:54:00:c0:ff:fe
 vnet1      network    default    virtio      52:54:00:76:82:b1

 (check the each item with step 1, the interface and info can list out)
";;RedHatEnterpriseLinux7/RHEL7-103786
3454;;;;;;;;;5;"2. attach an interface to inactive xml, then check with --inactive
 # virsh attach-interface rhel7 bridge br0 --config --mac 52:54:00:c0:ff:66 --model e1000e --target new_target
 Interface attached successfully

 # virsh domiflist rhel7 --inactive";"Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 -          bridge     br0        virtio      52:54:00:c0:ff:fe
 -          network    default    virtio      52:54:00:76:82:b1
 new_target bridge     br0        e1000e      52:54:00:c0:ff:66";;RedHatEnterpriseLinux7/RHEL7-103786
3454;;;;;;;;;6;3. # virsh domiflist rhel7;"Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet0      bridge     br0        virtio      52:54:00:c0:ff:fe
 vnet1      network    default    virtio      52:54:00:76:82:b1

 (no impact for live vm)";;RedHatEnterpriseLinux7/RHEL7-103786
3454;;;;;;;;;7;"4. check other options for domiflist, check by id
 
 # virsh domuuid rhel7
 84f83c75-db81-4205-98dd-2105392ea488
 
 # virsh domid rhel7
 30
 
 # virsh domiflist 30
​​";"
 output: 
 Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet0      bridge     br0        virtio      52:54:00:c0:ff:fe
 vnet1      network    default    virtio      52:54:00:76:82:b1
 
 (check by uuid or id also works)";;RedHatEnterpriseLinux7/RHEL7-103786
3454;;;;;;;;;8;"5.  by id with --inactive
 # virsh domiflist 30 --inactive";"Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 -          bridge     br0        virtio      52:54:00:c0:ff:fe
 -          network    default    virtio      52:54:00:76:82:b1";;RedHatEnterpriseLinux7/RHEL7-103786
3454;;;;;;;;;9;"6. by uuid
 # virsh domiflist 84f83c75-db81-4205-98dd-2105392ea488
 
 
​​";"Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet0      bridge     br0        virtio      52:54:00:c0:ff:fe
 vnet1      network    default    virtio      52:54:00:76:82:b1";;RedHatEnterpriseLinux7/RHEL7-103786
3454;;;;;;;;;10;"7. check by uuid with --inactive
 # virsh domiflist 84f83c75-db81-4205-98dd-2105392ea488 --inactive";"Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 -          bridge     br0        virtio      52:54:00:c0:ff:fe
 -          network    default    virtio      52:54:00:76:82:b1";;RedHatEnterpriseLinux7/RHEL7-103786
3454;;;;;;;;;11;domifstat;​​;;RedHatEnterpriseLinux7/RHEL7-103786
3454;;;;;;;;;12;"continue with the vm
 1. on guest, check the network interface statistics, at the same time on host on another terminal, check by domifstat

 for bridge type interface
 on guest:
 # ifconfig eth0
 eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 10.66.5.77  netmask 255.255.252.0  broadcast 10.66.7.255
         inet6 fe80::5054:ff:fec0:fffe  prefixlen 64  scopeid 0x20<link>
         ether 52:54:00:c0:ff:fe  txqueuelen 1000  (Ethernet)
         RX packets 1577  bytes 118880 (116.0 KiB)
         RX errors 0  dropped 43  overruns 0  frame 0
         TX packets 15  bytes 2142 (2.0 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

 on host:
 # virsh domifstat rhel7.2 vnet0";"




 output:
 vnet0 rx_bytes 118970
 vnet0 rx_packets 1578
 vnet0 rx_errs 0
 vnet0 rx_drop 0
 vnet0 tx_bytes 2184
 vnet0 tx_packets 16
 vnet0 tx_errs 0
 vnet0 tx_drop 0

 check all the statistics should be nearly the same
 (why drop can not be catched? will ask the devel)
";;RedHatEnterpriseLinux7/RHEL7-103786
3454;;;;;;;;;13;"2. for network interface
 on guest:
 # ifconfig eth1
 eth1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 192.168.122.216  netmask 255.255.255.0  broadcast 192.168.122.255
         inet6 fe80::5054:ff:fe76:82b1  prefixlen 64  scopeid 0x20<link>
         ether 52:54:00:76:82:b1  txqueuelen 1000  (Ethernet)
         RX packets 472  bytes 29363 (28.6 KiB)
         RX errors 0  dropped 5  overruns 0  frame 0
         TX packets 120  bytes 10854 (10.5 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

 on host:
 # virsh domifstat rhel7.4 vnet1";"domifstat output:

 vnet1 rx_bytes 29453
 vnet1 rx_packets 473
 vnet1 rx_errs 0
 vnet1 rx_drop 0
 vnet1 tx_bytes 10896
 vnet1 tx_packets 121
 vnet1 tx_errs 0
 vnet1 tx_drop 0

 (check all the statistics should be nearly the same)";;RedHatEnterpriseLinux7/RHEL7-103786
3454;;;;;;;;;14;3. check other options for domifstat;"should accept domid, domuuid, domname
 should accept mac as well as target name";;RedHatEnterpriseLinux7/RHEL7-103786
3454;;;;;;;;;15;"domid + mac for bridge type
 
 # virsh domifstat 30 52:54:00:c0:ff:fe
​​";" 52:54:00:c0:ff:fe rx_bytes 135919
 52:54:00:c0:ff:fe rx_packets 1837
 52:54:00:c0:ff:fe rx_errs 0
 52:54:00:c0:ff:fe rx_drop 0
 52:54:00:c0:ff:fe tx_bytes 0
 52:54:00:c0:ff:fe tx_packets 0
 52:54:00:c0:ff:fe tx_errs 0
 52:54:00:c0:ff:fe tx_drop 0";;RedHatEnterpriseLinux7/RHEL7-103786
3454;;;;;;;;;16;"domuuid + mac for network type
 # virsh domifstat 84f83c75-db81-4205-98dd-";"2105392ea488 52:54:00:76:82:b1
 52:54:00:76:82:b1 rx_bytes 29351
 52:54:00:76:82:b1 rx_packets 534
 52:54:00:76:82:b1 rx_errs 0
 52:54:00:76:82:b1 rx_drop 0
 52:54:00:76:82:b1 tx_bytes 6838
 52:54:00:76:82:b1 tx_packets 78
 52:54:00:76:82:b1 tx_errs 0
 52:54:00:76:82:b1 tx_drop 0";;RedHatEnterpriseLinux7/RHEL7-103786
3455;RHEL7-103788;virtio Video: Config Qemu to use IOMMU for Virtio; video device : Config Qemu to use IOMMU for Virtio;Jingjing Shao (jishao);High;Positive;Not Automated;;1;"1. Prepare  a q35 guest  which OS is rhel7.4 or higher version
 add the xml as below in the guest
 .....
   <features>
    <ioapic driver='qemu'/>
  </features>
  ...
   <iommu model='intel'>
      <driver intremap='on'  iotlb='on'/>
   </iommu>
 ...
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103788
3455;;;;;;;;;2;"2.  Add the  iommu='on' ats='on' to  videodevice, this needs the guest with GUI 
   <video>
        <driver iommu='on' ats='on'/>
        <model type='virtio' heads='1' primary='yes'>
          <acceleration accel3d='yes'/>
        </model>
        <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x0'/>
      </video>";​​;;RedHatEnterpriseLinux7/RHEL7-103788
3455;;;;;;;;;3;"3. Start the guest , check the qemu command line and  check the basic function
 # ps -ef | grep qemu | grep iommu
​​";"Output:
 -device virtio-vga,id=video0,bus=pcie.0,addr=0x1,iommu_platform=on,ats=on";;RedHatEnterpriseLinux7/RHEL7-103788
3455;;;;;;;;;4;"4. login in the guest
 # lspci | grep video
 play a video or open a image  for basic check
​​";"Output:
 ...
 01:00.0 VGA compatible controller: Red Hat, Inc Virtio GPU (rev 01)
 ....

 the video and image can show as expected.";;RedHatEnterpriseLinux7/RHEL7-103788
3456;RHEL7-103790;[spice] Start guest with spice clipboard enabled and spice tls disabled;Verify that guest can start successfully with correct qemu command line when spice clipboard is enabled and tls is disabled.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set clipboard copypaste to yes
​​";"
 
 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-103790
3456;;;;;;;;;2;"Start the guest
 #virsh start rhel7";​​;;RedHatEnterpriseLinux7/RHEL7-103790
3456;;;;;;;;;3;"Check qemu command line:
 #ps -ef | grep kvm";"NO disable-copy-paste in the qemu comand line
 
 Output:
 --
 -spice port=5900,addr=::1,agent-mouse=off,disable-ticketing,seamless-migration=on -k en-us";;RedHatEnterpriseLinux7/RHEL7-103790
3457;RHEL7-103791;[spice][tls] Start guest with spice clipboard disabled and spice tls enabled;Verify that guest can start successfully with correct qemu command line when spice clipboard is disabled and tls is enabled.;Fangge Jin (fjin);High;Positive;Not Automated;;1;Set up spice tls env on host;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103791
3457;;;;;;;;;2;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set clipboard copypaste to no
​​";"
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-103791
3457;;;;;;;;;3;"Start the guest
 #virsh start rhel7";​​;;RedHatEnterpriseLinux7/RHEL7-103791
3457;;;;;;;;;4;"Check qemu command line:
 #ps -ef | grep kvm | grep copy";"""disable-copy-paste"" is in qemu command line

 Output:
 --
 -spice port=5900,tls-port=5901,addr=::1,disable-ticketing,x509-dir=/etc/pki/libvirt-spice,disable-copy-paste,  seamless-migration=on -k en-us";;RedHatEnterpriseLinux7/RHEL7-103791
3458;RHEL7-103792;[spice][tls] Start guest with spice clipboard enabled and spice tls enabled;Verify that guest can start successfully with correct qemu command line when spice clipboard and tls are enabled.;Fangge Jin (fjin);High;Positive;Not Automated;;1;Set up spice tls env on host;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103792
3458;;;;;;;;;2;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set clipboard copypaste to yes
​​";"
 
 
​​";;RedHatEnterpriseLinux7/RHEL7-103792
3458;;;;;;;;;3;"Start the guest
 #virsh start rhel7";​​;;RedHatEnterpriseLinux7/RHEL7-103792
3458;;;;;;;;;4;"Check qemu command line:
 #ps -ef | grep kvm";"NO disable-cope-paste in the qemu comand line
 
 Output:
 ... -spice port=5900,tls-port=5901,addr=::1,disable-ticketing,x509-dir=/etc/pki/libvirt-spice,seamless-migration=on -k en-us";;RedHatEnterpriseLinux7/RHEL7-103792
3459;RHEL7-103793;[domifstat] domiflist, domifstat, domifaddr for bridge  type interface using ovs;test bridge type interface connected to a ovs with the virsh commands;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"start a guest with bridge type interface connected to ovs

 # virsh start rhel7
 virsh Domain rhel7 started

 # virsh dumpxml rhel7 | grep /interface -B10
     <interface type='bridge'>
       <mac address='52:54:00:e8:83:93'/>
       <source bridge='ovsbr0'/>
       <virtualport type='openvswitch'>
         <parameters interfaceid='798bdd97-bfb8-4e5f-ad67-fa8b44a8d3ee'/>
       </virtualport>
       <target dev='vnet0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x09' function='0x0'/>
     </interface>"; ;Test Case;RedHatEnterpriseLinux7/RHEL7-103793
3459;;;;;;;;;2;"1. # virsh domiflist rhel7 
";"Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 vnet0      bridge     ovsbr0     virtio      52:54:00:e8:83:93";;RedHatEnterpriseLinux7/RHEL7-103793
3459;;;;;;;;;3;2. # virsh domifaddr rhel7  --source agent;" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  lo         00:00:00:00:00:00    ipv4         127.0.0.1/8
  -          -                    ipv6         ::1/128
  eth0       52:54:00:e8:83:93    ipv4         10.66.4.205/22
  -          -                    ipv6         fe80::5054:ff:fee8:8393/64

 (all the interface will list out as the guest POV)
";;RedHatEnterpriseLinux7/RHEL7-103793
3459;;;;;;;;;4;"3. on guest, check the network interface statistics, at the same time on host on another terminal, check by domifstat

 ON GUEST:
 # ifconfig eth0
 eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 10.66.4.205  netmask 255.255.252.0  broadcast 10.66.7.255
         inet6 fe80::5054:ff:fee8:8393  prefixlen 64  scopeid 0x20<link>
         ether 52:54:00:e8:83:93  txqueuelen 1000  (Ethernet)
         RX packets 437  bytes 36822 (35.9 KiB)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 73  bytes 7216 (7.0 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0


 ON HOST
 # virsh domifstat rhel7  vnet0";"vnet0 rx_bytes 37196
 vnet0 rx_packets 441
 vnet0 rx_errs 0
 vnet0 rx_drop 0
 vnet0 tx_bytes 7306
 vnet0 tx_packets 74
 vnet0 tx_errs 0
 vnet0 tx_drop 0


 (check the value should nearly the same, tx, rx)
";;RedHatEnterpriseLinux7/RHEL7-103793
3460;RHEL7-103794;[domifstat] domiflist, domifstat, domifaddr for direct type interface - bug 1497410;Test domiflist, domifstat, domifaddr for direct type interface;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;" 1. start a guest with direct type interface
 # virsh dumpxml rhel7 | grep /interface -B7
     <interface type='direct'>
       <mac address='52:54:00:96:14:78'/>
       <source dev='eno1' mode='vepa'/>
       <target dev='macvtap0'/>
       <model type='virtio'/>
       <alias name='net0'/>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
     </interface>"; ;Test Case;RedHatEnterpriseLinux7/RHEL7-103794
3460;;;;;;;;;2;"2.# virsh domiflist rhel7
";"Interface  Type       Source     Model       MAC
 -------------------------------------------------------
 macvtap0   direct     eno1       virtio      52:54:00:96:14:78";;RedHatEnterpriseLinux7/RHEL7-103794
3460;;;;;;;;;3;3. # virsh domifaddr rhel7 --source agent;" Name       MAC address          Protocol     Address
 -------------------------------------------------------------------------------
  lo         00:00:00:00:00:00    ipv4         127.0.0.1/8
  -          -                    ipv6         ::1/128
  eth0       52:54:00:96:14:78    ipv4         10.66.70.101/23
  -          -                    ipv6         2620:52:0:4246:5054:ff:fe96:1478/64
  -          -                    ipv6         fe80::5054:ff:fe96:1478/64
  virbr0     52:54:00:b5:29:91    ipv4         192.168.122.1/24
  virbr0-nic 52:54:00:b5:29:91    N/A          N/A
";;RedHatEnterpriseLinux7/RHEL7-103794
3460;;;;;;;;;4;"4. In one terminal on guest check the interface statistics by ifconfig, in another terminal at the same time check the interface statistics by domifstat, the value should be nearly the same both for RX and TX

 IN GUEST
 # ifconfig eth0
 eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
         inet 10.66.4.175  netmask 255.255.252.0  broadcast 10.66.7.255
         inet6 fe80::5054:ff:fe96:1478  prefixlen 64  scopeid 0x20<link>
         ether 52:54:00:96:14:78  txqueuelen 1000  (Ethernet)
         RX packets 128  bytes 12340 (12.0 KiB)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 65  bytes 6566 (6.4 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

 IN HOST
 # virsh domifstat rhel7 macvtap0";"

 output:
 macvtap0 rx_bytes 12400
 macvtap0 rx_packets 129
 macvtap0 rx_errs 0
 macvtap0 rx_drop 0
 macvtap0 tx_bytes 7372
 macvtap0 tx_packets 75
 macvtap0 tx_errs 0
 macvtap0 tx_drop 0


";;RedHatEnterpriseLinux7/RHEL7-103794
3461;RHEL7-103795;[spice] Start guest with spice mouse mode=client;Verify qemu command line is correct when spice mouse mode=client;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set mouse mode to client.
";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103795
3461;;;;;;;;;2;Start guest;​​;;RedHatEnterpriseLinux7/RHEL7-103795
3461;;;;;;;;;3;"check qemu command:
 #ps -ef | grep kvm
";"agent-mouse=on in qemu command line.
 
 Output:
 .......spice port=5902,tls-port=5903,addr=0.0.0.0,agent-mouse=on
​​";;RedHatEnterpriseLinux7/RHEL7-103795
3461;;;;;;;;;4;"The following two steps are optional:
​​";​​;;RedHatEnterpriseLinux7/RHEL7-103795
3461;;;;;;;;;5;"use virt-viewer to connect the guest
 #virt-viewer $guestname

 or
 #remote-viewer spice://$ip:$port";​​;;RedHatEnterpriseLinux7/RHEL7-103795
3461;;;;;;;;;6;"Note:
 For how server/client mouse works, Refer to KVM test case: RHEL7-6632 - [virtual desktop][spice]Server/client mouse mode test";​​;;RedHatEnterpriseLinux7/RHEL7-103795
3462;RHEL7-103796;[spice][tls] Start guest with spice filetransfer enabled and spice tls enabled;Verify file can be dragged between guest and host when spice filetransfer and tls are enabled;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set filetransfer to enabled.
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103796
3462;;;;;;;;;2;"Start the guest
 #virsh start rhel6";​​;;RedHatEnterpriseLinux7/RHEL7-103796
3462;;;;;;;;;3;"Check qemu command line:
 # ps -ef |grep qemu
​​";"1) NO disable-agent-file-xfer in the qemu command line.
 
 2) There is tlsPort in qemu command line.
 
 Output:
 ... -spice port=5900,tls-port=5901,addr=::1,disable-ticketing,x509-dir=/etc/pki/libvirt-spice,seamless-migration=on -k en-us
​​";;RedHatEnterpriseLinux7/RHEL7-103796
3463;RHEL7-103797;[spice][tls] Start guest with usb redirection device by spice and spice tls enabled.;Verify that usb device can be redirected to guest by spice when tls is enabled.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) with usb device redirection configuration";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103797
3463;;;;;;;;;2;Start guest;​​;;RedHatEnterpriseLinux7/RHEL7-103797
3463;;;;;;;;;3;"Check qemu command line
 #ps -ef | grep win7
​​";"can find ""tls-channel=usbredir"" in qemu command line";;RedHatEnterpriseLinux7/RHEL7-103797
3463;;;;;;;;;4;"Connect to guest
 # virt-viewer win7
 Or cp ca-cert to a client host and connect by:
 remote-viewer spice://$server_ip/?tls-port=5901 --spice-host-subject=""C=IL,L=Raanana,O=Red Hat,CN=redhat"" --spice-ca-file='/etc/pki/libvirt-spice/ca-cert.pem'";​​;;RedHatEnterpriseLinux7/RHEL7-103797
3463;;;;;;;;;5;"On menu bar of virt-viewer window, click File->USB device selection.

 Note:
 For windows guset, if USB device selection is grey, make sure rhev-guest-tools-iso is properly installed on guest.";​​;;RedHatEnterpriseLinux7/RHEL7-103797
3463;;;;;;;;;6;"Select a usb device, for example keyboard or a general usb device.
 (e.g. can see usb disk /dev/sdb in #lsblk on host)
";"Then you will find the keyboard/usb is only available in the guest.
 (eg. can only see /dev/sdb in guest, not exists on host anymore)";;RedHatEnterpriseLinux7/RHEL7-103797
3464;RHEL7-103830;CLOUDINIT-TC: VM can successfully login after provisioning(with password authentication);Test cloudinit can successfully create user account and correctly set ssh login authentication;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;1.Create a VM with only paasword authentication;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103830
3464;;;;;;;;;2;2.Login the VM by password ;Successfully create user account with sudo privilege & login with the password;;RedHatEnterpriseLinux7/RHEL7-103830
3464;;;;;;;;;3;"3.Check /var/log/cloud-init.log
​​";"No error logs
​​";;RedHatEnterpriseLinux7/RHEL7-103830
3464;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-103830
3465;RHEL7-103831;CLOUDINIT-TC: VM can successfully login after provisioning(with public key authentication);Test cloudinit can successfully create user account and correctly set ssh login authentication;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;1.Create a VM with only public key authentication;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103831
3465;;;;;;;;;2;2.Login the VM without password;Successfully create user account with sudo privilege & login with public key  ;;RedHatEnterpriseLinux7/RHEL7-103831
3465;;;;;;;;;3;3.Check /var/log/cloud-init.log;"No error logs
​​";;RedHatEnterpriseLinux7/RHEL7-103831
3465;;;;;;;;;4;"#How to generate public key
 RHEL7-41622 - WALA-TC: [General] Access the VM with the ssh key";​​;;RedHatEnterpriseLinux7/RHEL7-103831
3466;RHEL7-103832;CLOUDINIT-TC: VM can successfully login after provisioning(with password and public key authentication at the same time );Test cloudinit can successfully create user account and correctly set ssh login authentication;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;1.Create a VM withwith password and public key authentication at the same time(can only create by Azure CLI);​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103832
3466;;;;;;;;;2;2.Login the VM with password or without password;Successfully create user account with sudo provilege & login with public key or password  ;;RedHatEnterpriseLinux7/RHEL7-103832
3466;;;;;;;;;3;"#How to generate public key
 RHEL7-41622 - WALA-TC: [General] Access the VM with the ssh key";​​;;RedHatEnterpriseLinux7/RHEL7-103832
3467;RHEL7-103833;CLOUDINIT-TC: Successfully set VM hostname;Test cloudinit can correctly set VM hostname;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;1.Create a VM and Login the VM;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103833
3467;;;;;;;;;2;"2.Check the VM hostname
 
 #hostname
 # cat /etc/sysconfig/network-scripts/ifcfg-eth0 | grep DHCP
 #nmcli  general hostname
 #hostnamectl | grep Static";"1.VM hostname is the same as you set
 #Now the hostname is [hostname.localdomain]
 #It contains a postfix "".localdomain"".This is a little different with WALA mechanism.
 
​​";;RedHatEnterpriseLinux7/RHEL7-103833
3467;;;;;;;;;3;config;​​;;RedHatEnterpriseLinux7/RHEL7-103833
3468;RHEL7-103834;CLOUDINIT-TC: Create ovf-env.xml under /var/lib/waagent folder;Test cloudinit can successfully create ovf-env.xml under /var/lib/waagent folder.(This file is used when WALA do deprovision process.);Yuxin Sun (yuxisun);;Positive;Manual Only;;1;1.Create a VM and Login the VM;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103834
3468;;;;;;;;;2;"2.Check file ""/var/lib/waagent/ovf-env.xml"" whether or not exist
 # ll /var/lib/waagent/ovf-env.xml";"The ovf-env.xml file is exists
 
 ## ll /var/lib/waagent/ovf-env.xml
 -rw-------. 1 root root 1122 Mar 27 09:08 /var/lib/waagent/ovf-env.xml
​​";;RedHatEnterpriseLinux7/RHEL7-103834
3468;;;;;;;;;3;config;​​;;RedHatEnterpriseLinux7/RHEL7-103834
3469;RHEL7-103835;CLOUDINIT-TC: Publish VM hostname to DNS server;Test cloudinit can publish hostname to DNS server;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;1.Create a VM and Login the VM;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103835
3469;;;;;;;;;2;"2.Get FQDN hostname
 
 # hostname -f
​​";"Successfully get FQDN hostname(FQDN: ${hostname}.${domainname})
 
 #hostname -f walayjg29th.myrvnrqh02je1jpi5wyuibplng.ix.internal.cloudapp.net";;RedHatEnterpriseLinux7/RHEL7-103835
3469;;;;;;;;;3;"3.Check FQDN name whether or not can resolve by DNS server
 
 #nslookup  walayjg29th.myrvnrqh02je1jpi5wyuibplng.ix.internal.cloudapp.net";"DNS server successfully resolve the hostname
 
 # nslookup walayjg29th.myrvnrqh02je1jpi5wyuibplng.ix.internal.cloudapp.net
 
 Server: 168.63.129.16
 Address: 168.63.129.16#53
 
 Name: walayjg29th.myrvnrqh02je1jpi5wyuibplng.ix.internal.cloudapp.net
 Address: 172.19.13.4
 
​​";;RedHatEnterpriseLinux7/RHEL7-103835
3469;;;;;;;;;4;config;​​;;RedHatEnterpriseLinux7/RHEL7-103835
3470;RHEL7-103836;CLOUDINIT-TC: Regenerate sshd keypairs;Test cloudinit can regenerate sshd keypairs;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;1.Create a VM and Login the VM;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103836
3470;;;;;;;;;2;"2.WALA do deprovision operation && restart ssh service
 
 #waagent -deprovision+user -force && systemctl restart sshd
​​";"Successfully do deprovision and sshd service successfully restart(generate ssh keypairs under /etc/ssh/ folder)
 
 # ls /etc/ssh/ssh_host*
 /etc/ssh/ssh_host_ecdsa_key      /etc/ssh/ssh_host_ed25519_key      /etc/ssh/ssh_host_rsa_key
 /etc/ssh/ssh_host_ecdsa_key.pub  /etc/ssh/ssh_host_ed25519_key.pub  /etc/ssh/ssh_host_rsa_key.pub
 
 Normally,there will be 3 types keyparis.
​​";;RedHatEnterpriseLinux7/RHEL7-103836
3470;;;;;;;;;3;"3.Backup all keypairs
 
 # cp /etc/ssh/ssh_host* /root ";"
 
​​";;RedHatEnterpriseLinux7/RHEL7-103836
3470;;;;;;;;;4;"4.Configure cloudinit to support regenerate sshd keypairs
 Modify cloudinit configuration file(/etc/cloud/cloud.cfg)
 modify 
 ssh_deletekeys:   1
 (1 on behalf of true,0 on behalf of false)
​​";"cat /etc/cloud/cloud.cfg | grep 'ssh_deletekeys'
 ssh_deletekeys:   1
​​";;RedHatEnterpriseLinux7/RHEL7-103836
3470;;;;;;;;;5;"5.Remove cloudinit files
 
 # rm /var/lib/cloud/* -rf";​​;;RedHatEnterpriseLinux7/RHEL7-103836
3470;;;;;;;;;6;"6.Create a new VM based on this VM
 For ASM:
    Capture this VM as a generalized image,and Create a VM     with the image
 For ARM:
     Use Azure CLI can directly use the disk file to create a new VM
    ";​​;;RedHatEnterpriseLinux7/RHEL7-103836
3470;;;;;;;;;7;"7.Login the VM && Check whether or not regenerate sshd keypairs
 
 # md5sum /root/ssh_host_rsa_key /etc/ssh/ssh_host_rsa_key";"2 files md5 value are different
 
 # md5sum ssh_host_rsa_key /root/ssh_host_rsa_key 
 9c2fd39ccf83a7a7695517012c5c6701  ssh_host_rsa_key
 7316b7d868ed446bda7ced5d69965054  /root/ssh_host_rsa_key
​​";;RedHatEnterpriseLinux7/RHEL7-103836
3470;;;;;;;;;8;config;​​;;RedHatEnterpriseLinux7/RHEL7-103836
3471;RHEL7-103837;CLOUDINIT-TC: Save and handle customdata;Test cloudinit can successfully handle customdata from ovf-env.xml;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"1.Create a VM and Login the VM(Can only create by Azure CLI)
 For ASM & ARM:
    azure command with parameter
                  ""--custom-data <custom-data-file> ""
                  i.e.    --custom-data ""/root/echo_date.sh""
    cat /root/echo_date.sh
​​";"# cat /root/echo_date.sh
 #!/bin/bash
 date -R >> /var/log/date_yujiang


 ### For cloud-init config file,it must be a yaml formatted file.
 ###Note: must contain the magic number""#!"".This magic number is the filter for cloud-init.

 e.g. If you want to transmit a python script to VM,you should use ""#!/bin/python"" in first line.
 And ""#cloud-config"" for cloud-init configuration file.";Test Case;RedHatEnterpriseLinux7/RHEL7-103837
3471;;;;;;;;;2;"2.Login VM and Check customdata whether transmit to the VM
 # cat ovf-env.xml | grep -i ""CustomData""
 
​​";"the xml file contains a ""CustomData"" label and the customdata content is encoded by base64";;RedHatEnterpriseLinux7/RHEL7-103837
3471;;;;;;;;;3;"3.Check customdata whether correctly decode and save 
 
 # cat /var/lib/cloud/instance/user-data.txt";" customdata correctly decode(the content is the same as the source file,'/root/echo_date.sh')
  ";;RedHatEnterpriseLinux7/RHEL7-103837
3471;;;;;;;;;4;"4.Check custom whether correctly handle
 customdata maybe bash shell script,python script,and include file,etc.
 In this case,I use a bash shell and content is:
 #!/bin/bash
 date -R >> /var/log/date_yujiang
 
 # cat /var/log/date_yujiang";"customdata correctly handle
 
 in this case:
 
 # cat /var/log/date_yujiang 
 Wed, 29 Mar 2017 07:48:24 +0000
​​";;RedHatEnterpriseLinux7/RHEL7-103837
3471;;;;;;;;;5;config;​​;;RedHatEnterpriseLinux7/RHEL7-103837
3472;RHEL7-103838;CLOUDINIT-TC: Save and handle customdata(cloud-init configuration);Test cloudinit can successfully handle customdata from ovf-env.xml;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"1.Create a VM and Login the VM(Can only create by Azure CLI)
 For ASM & ARM:
    azure command with parameter 
                  ""--custom-data <custom-data-file> ""
                  i.e.    --custom-data ""/root/yujiang_demo.conf""
    cat /root/yujiang_demo.conf
​​";"# cat /root/yujiang_demo.conf
 #cloud-config
 cloud_config_modules:
  - mounts
  - locale
  - set-passwords
  - yum-add-repo
  - disable-ec2-metadata
  - runcmd

 ### For cloud-init config file,it must be a yaml formatted file.
 ###Note: must contain the magic number""#!"".This magic number is the filter for cloud-init.

 e.g. If you want to transmit a python script to VM,you should use ""#!/bin/python"" in first line.
 And ""#cloud-config"" for cloud-init configuration file.";Test Case;RedHatEnterpriseLinux7/RHEL7-103838
3472;;;;;;;;;2;"2.Login VM and Check customdata whether transmit to the VM
 # cat ovf-env.xml | grep -i ""CustomData""
 
​​";"the xml file contains a ""CustomData"" label and the customdata content is encoded by base64";;RedHatEnterpriseLinux7/RHEL7-103838
3472;;;;;;;;;3;"3.Check customdata whether correctly decode and save 
 
 # cat /var/lib/cloud/instance/user-data.txt";" customdata correctly decode(the content is the same as the source file,'/root/yujiang_demo.conf')
  ";;RedHatEnterpriseLinux7/RHEL7-103838
3472;;;;;;;;;4;"4.Check cloud-init whether correctly handle
 customdata maybe bash shell script,python script,and include file,etc.
 In this case,I use cloud-init configuration file and content is:
 cat /root/yujiang_demo.conf
 #cloud-config
 cloud_config_modules:
  - mounts
  - locale
  - set-passwords
  - yum-add-repo
  - disable-ec2-metadata
  - runcmd";"customdata correctly handle
 
 in this case:
 I change cloud-init configuration file,modify cloud-init 3rd stage(cloud-config) to run 6 modules.
 
 Check cloud-init log file(/var/log/cloud-init.log)
 # grep ""running modules for config"" /var/log/cloud-init.log -B 4
 
 2017-05-17 13:31:48,447 - main.py[DEBUG]: Ran 6 modules with 0 failures
 2017-05-17 13:31:48,447 - util.py[DEBUG]: Reading from /proc/uptime (quiet=False)
 2017-05-17 13:31:48,448 - util.py[DEBUG]: Read 17 bytes from /proc/uptime
 2017-05-17 13:31:48,448 - util.py[DEBUG]: cloud-init mode 'modules' took 0.305 seconds (0.30)
 2017-05-17 13:31:48,448 - handlers.py[DEBUG]: finish: modules-config: SUCCESS: running modules for config
 
 According above log file, we can see this stage have ran 6 modules.Quantity is equal to the quantity what we have set. ";;RedHatEnterpriseLinux7/RHEL7-103838
3472;;;;;;;;;5;config;​​;;RedHatEnterpriseLinux7/RHEL7-103838
3473;RHEL7-103839;CLOUDINIT-TC: Auto extend root partition and filesystem;Test cloudinit can correctly extend root partition and filesystem.This feature depends on  cloud-init 【growpart,resizefs】 2 modules.;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;1.Prepare an ARM VM and install cloud-init  ;Note:the VM root partition shouldn't use LVM.Because cloud-init doesn't support extending lvm partition,now;Test Case;RedHatEnterpriseLinux7/RHEL7-103839
3473;;;;;;;;;2;"2.Start the VM and login.Check present os disk capacity and filesystem capacity.
 # lsblk
 #df -h";"# lsblk
 NAME          MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
 fd0      2:0    1    4K  0 disk 
 sda      8:0    0   32G  0 disk 
 ├─sda1   8:1    0  500M  0 part /boot
 └─sda2   8:2    0 31.5G  0 part /
 sdb      8:16   0  135G  0 disk 
 └─sdb1   8:17   0  135G  0 part /mnt/resource



 #  df -h
 Filesystem      Size  Used Avail Use% Mounted on
 /dev/sda2        32G  3.6G   28G  12% /
 devtmpfs        1.6G     0  1.6G   0% /dev
 tmpfs           1.7G     0  1.7G   0% /dev/shm
 tmpfs           1.7G  8.3M  1.6G   1% /run
 tmpfs           1.7G     0  1.7G   0% /sys/fs/cgroup
 /dev/sda1       497M  117M  381M  24% /boot
 /dev/sdb1       133G  2.1G  124G   2% /mnt/resource
 tmpfs           328M     0  328M   0% /run/user/1000


";;RedHatEnterpriseLinux7/RHEL7-103839
3473;;;;;;;;;3;3.Extend OS disk capacity by Azure web portal;​​;;RedHatEnterpriseLinux7/RHEL7-103839
3473;;;;;;;;;4;"4.Reboot the VM and after reboot finished,check present os disk capacity and filesystem capacity.
 # lsblk 
 # df -h";"# lsblk
 NAME          MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
 fd0      2:0    1    4K  0 disk 
 sda      8:0    0   100G  0 disk 
 ├─sda1   8:1    0  500M  0 part /boot
 └─sda2   8:2    0 99.5G  0 part /
 sdb      8:16   0  135G  0 disk 
 └─sdb1   8:17   0  135G  0 part /mnt/resource

 # df -h
 Filesystem      Size  Used Avail Use% Mounted on
 /dev/sda2        100G  3.6G   96G  12% /
 devtmpfs        1.6G     0  1.6G   0% /dev
 tmpfs           1.7G     0  1.7G   0% /dev/shm
 tmpfs           1.7G  8.3M  1.6G   1% /run
 tmpfs           1.7G     0  1.7G   0% /sys/fs/cgroup
 /dev/sda1       497M  117M  381M  24% /boot
 /dev/sdb1       133G  2.1G  124G   2% /mnt/resource
 tmpfs           328M     0  328M   0% /run/user/1000";;RedHatEnterpriseLinux7/RHEL7-103839
3473;;;;;;;;;5;config;​​;;RedHatEnterpriseLinux7/RHEL7-103839
3474;RHEL7-103840;CLOUDINIT-TC: waagent -deprovision+user with cloud-init enabled;waagent -deprovision+user should remove cloud-init sudoers file. If not +user, should not remove this file;Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"1. Prepare a VM with wala and cloud-init installed. Enable cloud-init related services. Edit /etc/waagent.conf:
 Provisioning.Enabled=n
 Provisioning.UseCloudInit=y
 Deprovision this VM, shutdown, capture it as an image";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103840
3474;;;;;;;;;2;"2. Create a new VM base on this image.
 Check if /etc/sudoers.d/90-cloud-init-users exists";"# ll /etc/sudoers.d/90-cloud-init-users
 -r--r-----. 1 root root 129 Jun 27 14:25 90-cloud-init-users";;RedHatEnterpriseLinux7/RHEL7-103840
3474;;;;;;;;;3;"3. Do not remove user account
 # waagent -deprovision -force
 Check if /etc/sudoers.d/90-cloud-init-users is not removed";"# ll /etc/sudoers.d/90-cloud-init-users
 -r--r-----. 1 root root 129 Jun 27 14:25 90-cloud-init-users";;RedHatEnterpriseLinux7/RHEL7-103840
3474;;;;;;;;;4;"4. Remove the VM. Repeat step2 to create new one. 
 Login. Remove user account
 # waagent -deprovision+user -force
 Check if /etc/sudoers.d/90-cloud-init-users is removed";"# ll /etc/sudoers.d/90-cloud-init-users
 No such file or directory";;RedHatEnterpriseLinux7/RHEL7-103840
3474;;;;;;;;;5;config;​​;;RedHatEnterpriseLinux7/RHEL7-103840
3475;RHEL7-103841;CLOUDINIT-TC: Upgrade cloud-init;"Update cloud-init, then check if it works well
";Yuxin Sun (yuxisun);;Positive;Manual Only;;1;"1. Prepare a VM with wala and old version cloud-init installed. 
 /etc/waagent.conf:
 Provisioning.Enabled=n
 Provisioning.UseCloudInit=y
 Update cloud-init to the newest version
 Deprovision this VM, shutdown, capture it as an image, create a new VM base on this image.
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103841
3475;;;;;;;;;2;"2. Check if cloud-init works well:
 /var/log/cloud-init.log
​​";"There's no error logs in /var/log/cloud-init.log
​​";;RedHatEnterpriseLinux7/RHEL7-103841
3475;;;;;;;;;3;"3. General check:
 # hostname
 # nslookup `hostname`
 # /etc/sudoers.d/90-cloud-init-users
​​";"All these items are correct.
​​";;RedHatEnterpriseLinux7/RHEL7-103841
3475;;;;;;;;;4;"config 
​​";​​;;RedHatEnterpriseLinux7/RHEL7-103841
3476;RHEL7-103842;[SR-IOV] Attach VF in direct passthrough mode with PF is down;[SR-IOV] Attach VF with macvtap mode without up PF;Jingjing Shao (jishao);Medium;Negative;Not Automated;;1;" 1. Check the device
 # lspci | grep 82599
 86:00.0 Ethernet controller: Intel Corporation 82599ES 10-Gigabit SFI/SFP+ Network Connection (rev 01)
 86:00.1 Ethernet controller: Intel Corporation 82599ES 10-Gigabit SFI/SFP+ Network Connection (rev 01)
 86:10.0 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)
 86:10.1 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)
 86:10.2 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)
 86:10.3 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)";" 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-103842
3476;;;;;;;;;2;"2, Check the device state
 # ip l
 19: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 02:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-103842
3476;;;;;;;;;3;"3. Set pf state to down then check again 
 # ip l set ens2f1 down
 # ip l";"Output:
     19: ens2f1: <BROADCAST,MULTICAST> mtu 1500 qdisc mq state DOWN mode DEFAULT group default qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 02:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off";;RedHatEnterpriseLinux7/RHEL7-103842
3476;;;;;;;;;4;"4.  Define the network with the following xml info
 <network>
 <name>macvtap-passthrough</name>
 <uuid>a53c4f33-58ea-4b2e-80b4-f9d103b7b0a3</uuid>
 <forward dev='ens1f0' mode='passthrough'>
 <interface dev='ens1f0'/>
 <interface dev='ens1f1'/>
 </forward>
 </network>";​​;;RedHatEnterpriseLinux7/RHEL7-103842
3476;;;;;;;;;5;"5. Hotplug this network device to guest
 # cat if-hostdev.xml   
 <interface type='network'> 
 <source network='macvtap-passthrough'/> 
 </interface>
 
 # virsh attach-device r7 if.xml
​​";"Output:
 error: Failed to attach device from if.xml error: internal error: Unable to configure VF 1 of PF 'ens1f0' because the PF is not online.";;RedHatEnterpriseLinux7/RHEL7-103842
3476;;;;;;;;;6;"6.Set pf state to up then check again 
 # ip l set ens2f1  up
 # ip l
 19: ens2f1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
     link/ether 90:e2:ba:30:79:5d brd ff:ff:ff:ff:ff:ff
     vf 0 MAC 02:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
     vf 1 MAC 00:00:00:00:00:00, spoof checking on, link-state auto, trust off, query_rss off
​​";​​;;RedHatEnterpriseLinux7/RHEL7-103842
3476;;;;;;;;;7;"7. attach when the PF is up
 # virsh attach-device r7 if.xml";Device attached successfully;;RedHatEnterpriseLinux7/RHEL7-103842
3477;RHEL7-103862;[Network] Define and start the VF Pool with physical function - Bug 971325;Define the VF Pool with physical function;Jingjing Shao (jishao);Critical;Positive;Automated;;1;"enable VFs under PF ens2f1 and make sure ens2f1 is up

 1. Prepare the network xml as below.
 # cat hostdev.xml
 <network> 
 <name>hostnet</name> 
 <uuid>6b49be3c-bb91-c16d-b475-2929678720f4</uuid>
 <forward mode='hostdev' managed='yes'> 
 <pf dev='ens2f1'/> 
 </forward> 
 </network>";" 
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-103862
3477;;;;;;;;;2;"2. Define the network
 # virsh net-define hostnet.xml
 Network hostnet defined from hostnet.xml
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-103862
3477;;;;;;;;;3;"3. Check the network xml
 # virsh net-dumpxml hostnet";"
 <network> 
 <name>hostnet</name>
 <uuid>6b49be3c-bb91-c16d-b475-2929678720f4</uuid> 
 <forward mode='hostdev' managed='yes'> 
 <pf dev='ens2f1'/>
 </forward>
 </network>";;RedHatEnterpriseLinux7/RHEL7-103862
3477;;;;;;;;;4;"4. Start the network
 # virsh net-start hostnet
 Network hostnet started
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-103862
3477;;;;;;;;;5;"5. Check the network xml
 # virsh net-dumpxml hostnet";"Output:
 <network> 
 <name>hostnet</name>
 <uuid>6b49be3c-bb91-c16d-b475-2929678720f4</uuid>
 <forward mode='hostdev' managed='yes'> 
 <pf dev='ens2f1'/> 
 <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x1'/>
 <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x3'/>
 <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x5'/>
 <address type='pci' domain='0x0000' bus='0x86' slot='0x10' function='0x7'/>
 </forward> 
 </network>
 
 (all the VFs enabled under this PF is exposed by ip addresses, check by 
 # virsh nodedev-dumpxml pci_0000_86_00_0)";;RedHatEnterpriseLinux7/RHEL7-103862
3477;;;;;;;;;6;"6. Destroy the network
 # virsh net-destroy hostnet
 Network hostnet destroyed";"
​​";;RedHatEnterpriseLinux7/RHEL7-103862
3477;;;;;;;;;7;"7.Check the network xml
 # virsh net-dumpxml hostnet";"
 <network> 
 <name>hostnet</name>
 <uuid>6b49be3c-bb91-c16d-b475-2929678720f4</uuid> 
 <forward mode='hostdev' managed='yes'> 
 <pf dev='ens2f1'/>
 </forward> 
 </network>
 
 (the VFs pci addresses disappeared)";;RedHatEnterpriseLinux7/RHEL7-103862
3478;RHEL7-103868;[Guest agent] hot-unplug guest agent char device with auto-generated source path;Verify that guest agent char device can be hot-unplugged from guest successfully.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Start guest that has no specified source path for guest agent.
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103868
3478;;;;;;;;;2;"Save the guest agent part into a file:
 
 # virsh dumpxml rhel7f
 ...
 <channel type='unix'>
    <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/rhel7f.org.qemu.guest_agent.0'/>
    <target type='virtio' name='org.qemu.guest_agent.0' state='connected'/>
    <alias name='channel1'/>
    <address type='virtio-serial' controller='0' bus='0' port='2'/>
 </channel>
 ...
 
 
 # cat agent.xml
 <channel type='unix'>
    <source mode='bind' path='/var/lib/libvirt/qemu/channel/target/rhel7f.org.qemu.guest_agent.0'/>
    <target type='virtio' name='org.qemu.guest_agent.0' state='connected'/>
    <alias name='channel1'/>
    <address type='virtio-serial' controller='0' bus='0' port='2'/>
 </channel>";​​;;RedHatEnterpriseLinux7/RHEL7-103868
3478;;;;;;;;;3;"hot-unplug the guest agent from the guest
 #virsh detach-device rhel7f agent.xml
 
 
​​";"
​​";;RedHatEnterpriseLinux7/RHEL7-103868
3478;;;;;;;;;4;"check the guest's xml and the corresponding virsh cmd relies on guest agent
 #virsh dumpxml rhel7f |grep agent
​​";"we couldn't find the guest agent content in the guest's xml anymore
 
 
";;RedHatEnterpriseLinux7/RHEL7-103868
3478;;;;;;;;;5;"Run a random virsh command that relies on guest agent.
 #virsh domtime rhel7f --pretty";"all commands relies on guest agent can't work anymore.

 Output:
 error: argument unsupported: QEMU guest agent is not configured";;RedHatEnterpriseLinux7/RHEL7-103868
3479;RHEL7-103993;[audit log] Set audit level=1 and enable auditing on host;Verify that libvirt can start successfully and new audit log will be generated when set audit level=1 and enable auditing on host.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Make sure auditd is running on host:
 # systemctl status auditd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103993
3479;;;;;;;;;2;"Set libvirt audit level to 1:
 
 #vi /etc/libvirt/libvirtd.conf
 audit_level = 1
";"
​​";;RedHatEnterpriseLinux7/RHEL7-103993
3479;;;;;;;;;3;"Clear the audit log on host:
 # > /var/log/audit/audit.log
 # > /var/log/audit/audit.log.1
 # > /var/log/audit/audit.log.2
 # > /var/log/audit/audit.log.3
 # > /var/log/audit/audit.log.4";​​;;RedHatEnterpriseLinux7/RHEL7-103993
3479;;;;;;;;;4;"Restart the libvirtd service
 #systemctl restart libvirtd";​​;;RedHatEnterpriseLinux7/RHEL7-103993
3479;;;;;;;;;5;"Start the guest
 #virsh start rhel7";​​;;RedHatEnterpriseLinux7/RHEL7-103993
3479;;;;;;;;;6;"Check the audit.log about VIRT_CONTROL:
 # ausearch -m VIRT_CONTROL -ts recent
​​";"There is new audit log generated by the guest start.

 Output:
 time->Wed Aug 17 11:26:41 2016
 type=VIRT_CONTROL msg=audit(1471404401.585:173): pid=4091 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm op=start reason=booted vm=""usrvm"" uuid=9797f4d5-175d-403d-a664-f2ed1f231d84 vm-pid=4189 exe=""/usr/sbin/libvirtd"" hostname=? addr=? terminal=? res=success'";;RedHatEnterpriseLinux7/RHEL7-103993
3479;;;;;;;;;7;"Check the audit.log about VIRT_MACHINE_ID:
 # ausearch -m VIRT_MACHINE_ID -ts recent";"There is new audit log generated by the guest start.

 Output:
 time->Wed Aug 17 11:26:41 2016
 type=VIRT_MACHINE_ID msg=audit(1471404401.081:155): pid=4091 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm vm=""usrvm"" uuid=9797f4d5-175d-403d-a664-f2ed1f231d84 vm-ctx=system_u:system_r:svirt_t:s0:c88,c953 img-ctx=system_u:object_r:svirt_image_t:s0:c88,c953 model=selinux exe=""/usr/sbin/libvirtd"" hostname=? addr=? terminal=? res=success'
 ......";;RedHatEnterpriseLinux7/RHEL7-103993
3479;;;;;;;;;8;"Check the audit.log about VIRT_RESOURCE:
 # ausearch -m VIRT_RESOURCE";"There is new audit log generated by the guest start.

 Output:
 time->Wed Aug 17 11:26:41 2016
 type=VIRT_RESOURCE msg=audit(1471404401.201:158): pid=4091 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm resrc=net reason=open vm=""usrvm"" uuid=9797f4d5-175d-403d-a664-f2ed1f231d84 net=52:54:00:0b:85:fd path=""/dev/net/tun"" rdev=0A:C8 exe=""/usr/sbin/libvirtd"" hostname=? addr=? terminal=? res=success'
 ......";;RedHatEnterpriseLinux7/RHEL7-103993
3480;RHEL7-103994;[audit log] Set audit level=2 and enable auditing on host;Verify that libvirt can start successfully and new audit log will be generated when set audit level=2 and enable auditing on host.;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Refer to the steps of RHEL7-103993, the only difference is that:
 
 1) set audit_level to 2 ";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103994
3481;RHEL7-103995;[audit log] Set audit level=2 and disable auditing on host;"Verify that libvirt can't start successfully when set audit level=2 and disable auditing on host.

https://bugzilla.redhat.com/show_bug.cgi?id=1596119 ";Fangge Jin (fjin);High;Positive;Not Automated;;1;Disable auditing on host.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-103995
3481;;;;;;;;;2;"Set libvirt audit level to 2:

 # vim /etc/libvirt/libvirtd.conf
 audit_level = 2";​​;;RedHatEnterpriseLinux7/RHEL7-103995
3481;;;;;;;;;3;"Restart libvirtd
 # systemctl restart libvirtd";​​;;RedHatEnterpriseLinux7/RHEL7-103995
3481;;;;;;;;;4;"Check libvirtd status:
 # systemctl status libvirtd";libvirtd is in failed status;;RedHatEnterpriseLinux7/RHEL7-103995
3481;;;;;;;;;5;"Check libvirtd log:
 # cat /var/log/libvirt/libvirtd.log";"There is such log:
 
 Apr  6 03:42:52 intel-5205-32-1 libvirtd: 2017-04-06 07:42:52.856+0000: 4384: error : virAuditOpen:62 : Unable to initialize audit layer: Protocol not supported";;RedHatEnterpriseLinux7/RHEL7-103995
3482;RHEL7-104154;[audit log] Audit log related to macvtap guest network interface;Check audit log related to macvtap guest network interface;Fangge Jin (fjin);Low;Positive;Not Automated;;1;Start a guest with macvtap network interface.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-104154
3482;;;;;;;;;2;"Check audit log:
 #  ausearch --start recent -m VIRT_RESOURCE -i | grep macvtap";"Output:
 type=VIRT_RESOURCE msg=audit(08/19/2016 14:10:35.108:333) : pid=1303 uid=root auid=unset ses=unset subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm resrc=net reason=open vm=test1 uuid=613ad5ce-0c53-45df-8505-6ec16175fd89 net=54:52:00:54:9e:f4 path=macvtap0 rdev=? exe=/usr/sbin/libvirtd hostname=? addr=? terminal=? res=success'";;RedHatEnterpriseLinux7/RHEL7-104154
3483;RHEL7-104155;[audit log] Audit log related to console devices;Check audit log related to console devices;Fangge Jin (fjin);Low;Positive;Not Automated;;1;Start a guest with console device.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-104155
3483;;;;;;;;;2;"Check audit log:
 #  ausearch --start recent -m VIRT_RESOURCE -i | grep chardev";"Output:
 
 type=VIRT_RESOURCE msg=audit(1417157551.023:31773): pid=18461 uid=0 
 auid=4294967295 ses=4294967295 subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 
 msg='virt=kvm resrc=chardev reason=start vm=""test3"" 
 uuid=7347d748-f7ce-448f-8d49-3d29c9bcac30 old-chardev=""?"" 
 new-chardev=""/var/lib/libvirt/qemu/foo"" exe=""/usr/sbin/libvirtd"" hostname=? 
 addr=? terminal=? res=success'";;RedHatEnterpriseLinux7/RHEL7-104155
3484;RHEL7-104156;[audit log] Audit log related to serial devices;Check audit log related to serial devices;Fangge Jin (fjin);Low;Positive;Not Automated;;1;Start a guest with serial device.;​​;Test Case;RedHatEnterpriseLinux7/RHEL7-104156
3484;;;;;;;;;2;"Check audit log:
 #  ausearch --start recent -m VIRT_RESOURCE -i | grep chardev";"Output:
 
 type=VIRT_RESOURCE msg=audit(1417157971.668:31841): 
 pid=18461 uid=0 auid=4294967295 ses=4294967295 
 subj=system_u:system_r:virtd_t:s0-s0:c0.c1023 msg='virt=kvm resrc=chardev 
 reason=start vm=""test3"" uuid=7347d748-f7ce-448f-8d49-3d29c9bcac30 old-chardev=""?"" 
 new-chardev=""/dev/pts/7"" exe=""/usr/sbin/libvirtd"" hostname=? addr=? 
 terminal=? res=success'";;RedHatEnterpriseLinux7/RHEL7-104156
3485;RHEL7-104157;[audit log] Audit log related to the RNG device - model=egd, type=unix;Check audit log related to RNG devices - model=egd, type=unix;Fangge Jin (fjin);Low;Positive;Not Automated;;1;"Start a guest with virtio-rng device of egd model and unix type:
 # virsh start aa
​​";"Start failed, output:
 
 error: Failed to start domain aa
 error: internal error Process exited while reading console log output: char device redirected to /dev/pts/6
 qemu-kvm: -chardev socket,id=charrng0,path=/tmp/mypipe: socket connect failed: Permission denied
 qemu-kvm: -chardev socket,id=charrng0,path=/tmp/mypipe: chardev: opening backend ""socket"" failed";Test Case;RedHatEnterpriseLinux7/RHEL7-104157
3485;;;;;;;;;2;"Check audit log:
 #  ausearch --start recent -m VIRT_RESOURCE -i | grep rng";"Outputs:
 
 type=VIRT_RESOURCE msg=audit(1401357856.470:995): user pid=2850 uid=0
 auid=4294967295 ses=4294967295 subj=system_u:system_r:virtd_t:s0-s0:c0.c1023
 msg='virt=kvm resrc=rng reason=start vm=""sound"" uuid=31df9b0e-1883-758a-
 118e-72590803ed12 old-rng=""?"" new-rng=""/tmp/mypipe""
 exe=""/usr/sbin/libvirtd"" hostname=? addr=? terminal=? res=success'";;RedHatEnterpriseLinux7/RHEL7-104157
3486;RHEL7-104174;Check the log directory for lxc;Verify that the guest log file will be in directory /var/log/libvirt/lxc when hypervisor is lxc;Fangge Jin (fjin);High;Positive;Not Automated;;1;"Connect to lxc hypervisor:
 # virsh -c lxc:///
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-104174
3486;;;;;;;;;2;"Define and start the lxc guest;
 virsh # define lxc.xml
 
 virsh # start application";​​;;RedHatEnterpriseLinux7/RHEL7-104174
3486;;;;;;;;;3;"Check the log directory for lxc hypervisor:
 # ls /var/log/libvirt/lxc/ -d
​​";"The directory exists.
 
 Output:
 /var/log/libvirt/lxc/";;RedHatEnterpriseLinux7/RHEL7-104174
3486;;;;;;;;;4;"Check the log file for lxc guest:
 # ls /var/log/libvirt/lxc/";"The log file for guest exists.
 
 Output:
 application.log";;RedHatEnterpriseLinux7/RHEL7-104174
3487;RHEL7-104185;[virtlogd]Check qemu log when destroy guest while virtlogd is not active;If virtlogd is not active when destroy a guest, it will be activated and new log can be recorded in qemu log file successfully.;Fangge Jin (fjin);Medium;Positive;Not Automated;;1;"Set virtlogd as the log handler:
 
 a) Keep the default setting for stdio_handler in /etc/libvirt/qemu.conf.
 
 or 
 b) set stdio_handler=logd:
 # vi /etc/libvirt/qemu.conf
 stdio_handler=logd 
 
 (Re)start libvirtd:
 # systemctl restart libvirtd";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-104185
3487;;;;;;;;;2;Start a guest;​​;;RedHatEnterpriseLinux7/RHEL7-104185
3487;;;;;;;;;3;"Stop virtlogd service:
 # systemctl stop virtlogd";​​;;RedHatEnterpriseLinux7/RHEL7-104185
3487;;;;;;;;;4;"Track qemu log file:
 # tailf /var/log/libvirt/qemu/$guest.log";​​;;RedHatEnterpriseLinux7/RHEL7-104185
3487;;;;;;;;;5;"Destroy the guest and check qemu log:
 1) # virsh destroy $guest
 2) Check the output of tailf
​​";"1) Destroy successfully.
 2) ""Guest destroy log"" is recorded in $guest.log file. 

 Output:
 2017-04-19 05:47:43.771+0000: shutting down, reason=destroyed
";;RedHatEnterpriseLinux7/RHEL7-104185
3487;;;;;;;;;6;"Check virtlogd service status
 # systemctl status virtlogd
​​";virtlogd is active;;RedHatEnterpriseLinux7/RHEL7-104185
3488;RHEL7-109804;[spice] Start guest with spice defaultMode=secure but without spice tlsPort;Verify that guest will fail to start when spice defaultMode=secure, but spice tlsPort is not available;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set default mode to secure
 3) set autoport=no and port='-1'";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-109804
3488;;;;;;;;;2;"Start guest.
 # virsh start vm2";"guest fails to start.
 
 Output:
 error: Failed to start domain vm2
 error: unsupported configuration: spice defaultMode secure requested in XML configuration, but TLS connection is not available";;RedHatEnterpriseLinux7/RHEL7-109804
3489;RHEL7-109805;[spice] Start guest with some secure spice channels but without spice tlsPort;Verify that guest will fail to start when some spice channels are secure, but spice tlsPort is not available;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set some channels to secure mode
 3) set autoport=no and port='-1'";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-109805
3489;;;;;;;;;2;"Start guest.
 # virsh start vm2";"guest fails to start.
 
 Output:
 error: Failed to start domain vm2
 error: unsupported configuration: spice secure channels set in XML configuration, but TLS connection is not available";;RedHatEnterpriseLinux7/RHEL7-109805
3490;RHEL7-109806;[spice]  Start guest with spice tlsPort=-1 and spice tls disabled;Verify that guest will fail to start when spice autoport disabled and tlsPort=-1, but spice tls is disabled in qemu.conf;Fangge Jin (fjin);Medium;Negative;Not Automated;;1;"Don't enable spice_tls in /etc/libvirt/qemu.conf:
 
 # spice_tls = 1";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-109806
3490;;;;;;;;;2;"Edit or define a guest with such setting:
 1) with spice graphic
 2) set spice tlsPort='-1', autoport=no
​​";​​;;RedHatEnterpriseLinux7/RHEL7-109806
3490;;;;;;;;;3;"Start guest.
 # virsh start vm2
​​";"Guest fails to start. 
 
 Output:
 error: Failed to start domain vm2
 error: unsupported configuration: Auto allocation of spice TLS port requested but spice TLS is disabled in qemu.conf";;RedHatEnterpriseLinux7/RHEL7-109806
3491;RHEL7-110066;[Video devices] [virtio] [head] Start a guest with heads set for one virtio video;"Verify guest can start successfully with correct qemu command line when set only one virtio video and 4>=heads>=1.
Test matrix: heads=1, 4>=heads>1";Fangge Jin (fjin);High;Positive;Automated;;1;"Refer to the steps of RHEL7-59766, except that:
 
 1)  In step 1, prepare guest with virtio video instead of qxl video
 
 2) The qemu command line for video video is like:
 ... -device virtio-vga,id=video0,max_outputs=3,bus=pci.0,addr=0x2";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-110066
3492;RHEL7-110068;[Video devices] [virtio] [head] Start a guest with heads set for multiple qxl videos;Verify guest can start successfully with correct qemu command line when set multiple virtio videos and 4>=heads>=1;Fangge Jin (fjin);Medium;Positive;Automated;;1;"Refer to the steps of RHEL7-98598, except that:
 
 1)  In step 1, prepare guest with virtio video instead of qxl video
 
 2) The qemu command line for video video is like:
 ...  -device virtio-vga,id=video0,max_outputs=3,bus=pci.0,addr=0x2 -device virtio-gpu-pci,id=video1,max_outputs=4,bus=pci.0,addr=0xb";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-110068
3493;RHEL7-110604;[dump][guest memory dump] Perform virsh dump of guest(linux guest only);[dump][guest{comment:33}{comment:35} memory dump] Perform a virsh dump of guest;Yilin Zhang (yilzhang);Medium;Positive;Manual Only;;1;" 1. Boot up one KVM guest via virsh , x86 will add vmcoreinfo

example:
<domain type='kvm'>
  <name>rhel75</name>
  <memory unit='KiB'>25165824</memory>
  <currentMemory unit='KiB'>25165824</currentMemory>
  <vcpu placement='static'>24</vcpu>
  <os>
    <type arch='x86_64'>hvm</type>
    <boot dev='hd'/>
  </os>
  <features>
    <acpi/>
    <apic/>
    <pae/>
    <vmcoreinfo/>           <----on
  </features>
  <clock offset='utc'/>
  <on_poweroff>destroy</on_poweroff>
  <on_reboot>restart</on_reboot>
  <on_crash>coredump-restart</on_crash>
   <devices>
   <emulator>/usr/libexec/qemu-kvm</emulator>
    <disk type='file' device='disk'>
      <driver name='qemu' type='qcow2'/>
      <source file='/home/rhel74-64-virtio-scsi.qcow2'/>
      <target dev='vda' bus='virtio'/>
    </disk>
    <graphics type='vnc' port='1' autoport='yes' listen='0.0.0.0'>
      <listen type='address' address='0.0.0.0'/>
    </graphics>
  </devices>
</domain>

# virsh define guest.xml
 # virsh start guest";  Guest is started successfully;Test Case;RedHatEnterpriseLinux7/RHEL7-110604
3493;;;;;;;;;2;"2. Perform virsh dump of guest
 # virsh dump guest /home/vm.core";Domain guest is dumped to /home/vm.core successfully;;RedHatEnterpriseLinux7/RHEL7-110604
3493;;;;;;;;;3;"3.  Perform a second virsh dump of guest with ""--memory-only"" option
# virsh dump --memory-only guest /home/newdump.core";/home/newdump.core  is generated on host;;RedHatEnterpriseLinux7/RHEL7-110604
3493;;;;;;;;;4;"4. Use ""crash"" tool to process the dump file in step3
# crash /usr/lib/debug/lib/modules/4.11.0-22.el7a.ppc64le/vmlinux  /home/newdump.core";"Crash tool can parse the dump file successfully
 Note:  crash can only read files generated with ""--memory-only"" option for virsh dump";;RedHatEnterpriseLinux7/RHEL7-110604
3494;RHEL7-110729;[cpu model]Support EPYC cpu model;"support cpu model: -cpu EPYC
";Zhiyi Guo (zhguo);Critical;Positive;Not Automated;;1;Boot guest with -cpu EPYC,enforce ...; Guest can boot, qemu won't complain;Test Case;RedHatEnterpriseLinux7/RHEL7-110729
3494;;;;;;;;;2;"Check cpu information inside guest.
 Use lscpu for rhel guest and x86info fro windows guest.";"A example of cpu information on rhel guest:
 Architecture:          x86_64
 CPU op-mode(s):        32-bit, 64-bit
 Byte Order:            Little Endian
 CPU(s):                4
 On-line CPU(s) list:   0-3
 Thread(s) per core:    1
 Core(s) per socket:    1
 Socket(s):             4
 NUMA node(s):          1
 Vendor ID:             AuthenticAMD
 CPU family:            23
 Model:                 1
 Model name:            AMD EPYC Processor
 Stepping:              2
 CPU MHz:               3493.436
 BogoMIPS:              6986.87
 Hypervisor vendor:     KVM
 Virtualization type:   full
 L1d cache:             64K
 L1i cache:             64K
 L2 cache:              512K
 L3 cache:              16384K
 NUMA node0 CPU(s):     0-3
 Flags:                 fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm rep_good nop
 l cpuid extd_apicid pni pclmulqdq ssse3 fma cx16 sse4_1 sse4_2 x2apic movbe popcnt aes xsave avx f16c rdrand hypervisor lahf_lm cr8_legacy abm sse4a misalignsse 3dnowprefetch osv
 w vmmcall fsgsbase bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni xsaveopt xsavec xgetbv1 arat

 On either platform(rhel & win guest) make sure:
 Model is 1
 CPU family is 23
 stepping is 2
 movbe,rdrand,rdtscp,fxsr_opt,cr8_legacy,osvw,fsgsbase,bmi1,avx2,smep,bmi2,rdseed,adx, smap,clflushopt,sha_ni,xsaveopt,xsavec,xgetbv1,arat won't lose
 tbm,fma4,xop won't exist in guest.
";;RedHatEnterpriseLinux7/RHEL7-110729
3495;RHEL7-110730;[cpu mode]Support Skylake-Server cpu model;"support cpu model: -cpu Skylake-Server
";Zhiyi Guo (zhguo);Critical;Positive;Not Automated;;1;Boot guest with -cpu Skylake-Server,enforce ...; Guest can boot, qemu won't complain;Test Case;RedHatEnterpriseLinux7/RHEL7-110730
3495;;;;;;;;;2;"Check cpu information inside guest.
 Use lscpu for rhel guest and x86info fro windows guest.";"A example of cpu information on rhel guest:
 Architecture:          x86_64
 CPU op-mode(s):        32-bit, 64-bit
 Byte Order:            Little Endian
 CPU(s):                4
 On-line CPU(s) list:   0-3
 Thread(s) per core:    1
 Core(s) per socket:    1
 Socket(s):             4
 NUMA node(s):          1
 Vendor ID:             GenuineIntel
 CPU family:            6
 Model:                 85
 Model name:            Intel Xeon Processor (Skylake)
 Stepping:              4
 CPU MHz:               2194.842
 BogoMIPS:              4389.68
 Hypervisor vendor:     KVM
 Virtualization type:   full
 L1d cache:             32K
 L1i cache:             32K
 L2 cache:              4096K
 L3 cache:              16384K
 NUMA node0 CPU(s):     0-3
 Flags:                 fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 syscall nx pdpe1gb rdtscp lm constant_tsc rep_good nopl x
 topology eagerfpu pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch fsgsbase b
 mi1 hle avx2 smep bmi2 erms invpcid rtm mpx avx512f avx512dq rdseed adx smap clwb avx512cd avx512bw avx512vl xsaveopt xsavec xgetbv1 arat
 
 On either platform(rhel & win guest) make sure:
 model is 85
 stepping is 4
 pdpe1gb, clwb, avx512f, avx512dq, avx512bw, avx512cd, avx512vl won't missing";;RedHatEnterpriseLinux7/RHEL7-110730
3496;RHEL7-110819;[iface-undefine][Negative test] Undefine an non-exist interface with mac/name- bug 956112;"Undefine an non-exist interface with mac/name
";Jingjing Shao (jishao);Medium;Negative;Not Automated;;1;" 1.Check the interface list
 # virsh iface-list --all
​​";"Output:  
 Name                 State      MAC Address
 --------------------------------------------
 eth0                 active     10:60:4b:5c:b9:a6
 eth1                 active     00:15:17:62:ae:e8
 lo                   active     00:00:00:00:00:00
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-110819
3496;;;;;;;;;2;"2. Undefine a non-exist interface with name
 # virsh iface-undefine eth2  
​​";"Output:
 error: failed to get interface 'eth2'
 error: Interface not found: couldn't find interface named 'eth2'";;RedHatEnterpriseLinux7/RHEL7-110819
3496;;;;;;;;;3;"3. Undefine a non-exist interface with mac address
 # virsh iface-undefine 00:15:17:62:ae:e9
​​";"Output: 
 error: failed to get interface '00:15:17:62:ae:e9'
 error: Interface not found: couldn't find interface with MAC address '00:15:17:62:ae:e9'
​​";;RedHatEnterpriseLinux7/RHEL7-110819
3497;RHEL7-110831;[attach-device][boot order] hotplug an interface with boot order - bug 1439991;with plug an interface with boot order, libvirt should check the value and check the domain xml.;Yalan Zhang (yalzhang);High;Negative;Not Automated;;1;"1. attach interface with boot order to the guest with os/boot:
 # cat net.xml
 <interface type='network'>
 <source network='default' bridge='virbr0'/>
 <mac address='00:16:3e:77:e2:ed'/>
  <boot order='1'/>
  <model type='virtio'/>
    </interface>
 # virsh dumpxml rhel
 ...
 <os>
    <type arch='x86_64' machine='pc-i440fx-rhel7.4.0'>hvm</type>
    <boot dev='hd'/>
  </os>
 ...
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-110831
3497;;;;;;;;;2;"# virsh attach-device rhel7.4 net.xml
​​";"error: Failed to attach device from net.xml
 error: unsupported configuration: per-device boot elements cannot be used together with os/boot elements";;RedHatEnterpriseLinux7/RHEL7-110831
3497;;;;;;;;;3;"2. attach interface with <boot order='1'/> to the guest with <boot order='1'/> in <disk/>:
 # virsh attach-device rhel7.4 net.xml
​​";"error: Failed to attach device from net.xml
 error: unsupported configuration: boot order 1 is already used by another device";;RedHatEnterpriseLinux7/RHEL7-110831
3497;;;;;;;;;4;"4. cold plug with guest have os/boot
 # virsh attach-device rhel7.4 net.xml --persistent
​​";"error: Failed to attach device from net.xml
 error: unsupported configuration: per-device boot elements cannot be used together with os/boot elements";;RedHatEnterpriseLinux7/RHEL7-110831
3497;;;;;;;;;5;"5. cold plug with <boot order='1'/> while <boot order='1'/> already defined
 # virsh attach-device rhel7.4 net.xml --persistent
​​";"error: Failed to attach device from net.xml
 error: unsupported configuration: boot order 1 is already used by another device";;RedHatEnterpriseLinux7/RHEL7-110831
3497;;;;;;;;;6;"6. use negative number or string:
 # cat net2.xml
 <interface type='network'>
 <source network='default' bridge='virbr0'/>
 <mac address='00:16:3e:77:e2:ed'/>
  <boot order='-1'/>
  <model type='virtio'/>
    </interface>";"# virsh attach-device rhel net2.xml
 error: Failed to attach device from net2.xml
 error: internal error: incorrect boot order '-1', expecting positive integer
 
​​";;RedHatEnterpriseLinux7/RHEL7-110831
3497;;;;;;;;;7;"# cat net3.xml
 <interface type='network'>
 <source network='default' bridge='virbr0'/>
 <mac address='00:16:3e:77:e2:ed'/>
  <boot order='ss'/>
  <model type='virtio'/>
    </interface>";"# virsh attach-device rhel net3.xml
 error: Failed to attach device from net3.xml
 error: internal error: incorrect boot order 'ss', expecting positive integer
 
​​";;RedHatEnterpriseLinux7/RHEL7-110831
3497;;;;;;;;;8;"7. use negative number or string for inactive domain:
 # cat net2.xml
 <interface type='network'>
 <source network='default' bridge='virbr0'/>
 <mac address='00:16:3e:77:e2:ed'/>
  <boot order='-1'/>
  <model type='virtio'/>
    </interface>
​​";"# virsh attach-device rhel net2.xml --config
 error: Failed to attach device from net2.xml
 error: internal error: incorrect boot order '-1', expecting positive integer
 
​​";;RedHatEnterpriseLinux7/RHEL7-110831
3497;;;;;;;;;9;"# cat net3.xml
 <interface type='network'>
 <source network='default' bridge='virbr0'/>
 <mac address='00:16:3e:77:e2:ed'/>
  <boot order='ss'/>
  <model type='virtio'/>
    </interface>
​​";"# virsh attach-device rhel net3.xml --config
 error: Failed to attach device from net3.xml
 error: internal error: incorrect boot order 'ss', expecting positive integer
 
​​";;RedHatEnterpriseLinux7/RHEL7-110831
3498;RHEL7-110937;[user] configure ip address for user type interface - bug 1147238   1075520;if not set, when there a more than one user type interfaces on the guest, the 2 interfaces will get the same ip address;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"Scenario 1: ignore prefix
​​";"Ignore the prefix, will got ipv4 prefix as 8, will get:
 ip: x.0.2.15; 
 gw: x.0.2.2;
 name server: x.0.2.3;";Test Case;RedHatEnterpriseLinux7/RHEL7-110937
3498;;;;;;;;;2;"1. ignore the prefix
 # virsh dumpxml rhel7.4 | grep /interface -B7
    <interface type='user'>
      <mac address='52:54:00:01:55:fe'/>
  <ip address='100.100.100.20' family='ipv4'/>
      <ip address='2001:db8:ac10:fd01::' family='ipv6'/>
      <model type='rtl8139'/>
      <alias name='net0'/>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
    </interface>";​​;;RedHatEnterpriseLinux7/RHEL7-110937
3498;;;;;;;;;3;"2. on guest, check ip
 # ifconfig ens3
​​";"ens3: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
 inet 100.0.2.15  netmask 255.0.0.0 broadcast 100.255.255.255
 inet6 fe80::5054:ff:fe01:55fe  prefixlen 64  scopeid 0x20<link>
        inet6 2001:db8:ac10:fd01:5054:ff:fe01:55fe  prefixlen 64  scopeid 0x0<global>
 ...";;RedHatEnterpriseLinux7/RHEL7-110937
3498;;;;;;;;;4;"3. on guest, check name server
 # cat /etc/resolv.conf";100.0.2.3;;RedHatEnterpriseLinux7/RHEL7-110937
3498;;;;;;;;;5;"4. on guest, check default gateway
 # netstat -rn";"Check the gateway of  the Destination:   0.0.0.0
 100.0.2.2";;RedHatEnterpriseLinux7/RHEL7-110937
3498;;;;;;;;;6;scenario 2: Set prefix as 24 for ipv4 and 64 for ipv6;Set prefix as 4~27 is valid;;RedHatEnterpriseLinux7/RHEL7-110937
3498;;;;;;;;;7;"1. Set prefix as 24 for ipv4 and 64 for ipv6
 # virsh dumpxml rhel7.4 | grep /interface -B7
    <interface type='user'>
      <mac address='52:54:00:01:55:fe'/>
      <ip address='100.100.100.20' family='ipv4' prefix='24'/>
      <ip address='2001:db8:ac10:fd01::' family='ipv6' prefix='64'/>
      <model type='rtl8139'/>
      <alias name='net0'/>
      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>
    </interface>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-110937
3498;;;;;;;;;8;"2. on guest, check ip 
 # ifconfig
​​";"ens3: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
    inet 100.100.100.15  netmask 255.255.255.0  broadcast 100.100.100.255
        inet6 fe80::5054:ff:fe01:55fe  prefixlen 64  scopeid 0x20<link>
        inet6 2001:db8:ac10:fd01:5054:ff:fe01:55fe  prefixlen 64  scopeid 0x0<global>";;RedHatEnterpriseLinux7/RHEL7-110937
3498;;;;;;;;;9;3. on guest, check name server;"# cat /etc/resolv.conf
 # Generated by NetworkManager
 nameserver 100.100.100.3
​​";;RedHatEnterpriseLinux7/RHEL7-110937
3498;;;;;;;;;10;4. on guest, check default gateway;"# route -n
 Kernel IP routing table
 Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
 0.0.0.0         100.100.100.2   0.0.0.0         UG    100    0        0 ens10
 100.100.100.0   0.0.0.0         255.255.255.0   U     100    0        0 ens10
​​";;RedHatEnterpriseLinux7/RHEL7-110937
3499;RHEL7-110994;[setvcpu] check the vcpu order when hot-unplug specific vcpu - bug 1451983;the order will begin with '1', and whenever the online vcpu changes, the order will be refined.;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. prepare an inactive domain with below content
 ... 
 <vcpu placement='static' current='1'>8</vcpu>
   <vcpus>
     <vcpu id='0' enabled='yes' hotpluggable='no'/>
     <vcpu id='1' enabled='no' hotpluggable='yes'/>
     <vcpu id='2' enabled='no' hotpluggable='yes'/>
     <vcpu id='3' enabled='no' hotpluggable='yes'/>
     <vcpu id='4' enabled='no' hotpluggable='yes'/>
     <vcpu id='5' enabled='no' hotpluggable='yes'/>
     <vcpu id='6' enabled='no' hotpluggable='yes'/>
     <vcpu id='7' enabled='no' hotpluggable='yes'/>
   </vcpus>
 ...";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-110994
3499;;;;;;;;;2;"2. start the vm, then check the vcpu0 will order from '1'
 # virsh dumpxml rhel7.4 | grep /vcpus -B10";" <vcpu placement='static' current='1'>8</vcpu>
  <vcpus>
    <vcpu id='0' enabled='yes' hotpluggable='no' order='1'/>
    <vcpu id='1' enabled='no' hotpluggable='yes'/>
    <vcpu id='2' enabled='no' hotpluggable='yes'/>
    <vcpu id='3' enabled='no' hotpluggable='yes'/>
    <vcpu id='4' enabled='no' hotpluggable='yes'/>
    <vcpu id='5' enabled='no' hotpluggable='yes'/>
    <vcpu id='6' enabled='no' hotpluggable='yes'/>
    <vcpu id='7' enabled='no' hotpluggable='yes'/>
  </vcpus>";;RedHatEnterpriseLinux7/RHEL7-110994
3499;;;;;;;;;3;"3. vcpu3 will get if as '2' when enabled
 # virsh setvcpu rhel7.4 '2-3,^2' --enable
 # virsh dumpxml rhel7.4 | grep /vcpus -B10";" <vcpu placement='static' current='2'>8</vcpu>
  <vcpus>
    <vcpu id='0' enabled='yes' hotpluggable='no' order='1'/>
    <vcpu id='1' enabled='no' hotpluggable='yes'/>
    <vcpu id='2' enabled='no' hotpluggable='yes'/>
    <vcpu id='3' enabled='yes' hotpluggable='yes' order='2'/>
    <vcpu id='4' enabled='no' hotpluggable='yes'/>
    <vcpu id='5' enabled='no' hotpluggable='yes'/>
    <vcpu id='6' enabled='no' hotpluggable='yes'/>
    <vcpu id='7' enabled='no' hotpluggable='yes'/>
  </vcpus>";;RedHatEnterpriseLinux7/RHEL7-110994
3499;;;;;;;;;4;"4. vcpu 1 is the 3rd cpu to be enabled and get order of '3'
 # virsh setvcpu rhel7.4 1 --enable
 # virsh dumpxml rhel7.4 | grep /vcpus -B10 
   ";"<vcpu placement='static' current='3'>8</vcpu>
  <vcpus>
    <vcpu id='0' enabled='yes' hotpluggable='no' order='1'/>
    <vcpu id='1' enabled='yes' hotpluggable='yes' order='3'/>
    <vcpu id='2' enabled='no' hotpluggable='yes'/>
    <vcpu id='3' enabled='yes' hotpluggable='yes' order='2'/>
    <vcpu id='4' enabled='no' hotpluggable='yes'/>
    <vcpu id='5' enabled='no' hotpluggable='yes'/>
    <vcpu id='6' enabled='no' hotpluggable='yes'/>
    <vcpu id='7' enabled='no' hotpluggable='yes'/>
  </vcpus>
​​";;RedHatEnterpriseLinux7/RHEL7-110994
3499;;;;;;;;;5;"5. Set the order 2 cpu as disable, the order will be re-ordered. 
 # virsh setvcpu rhel7.4 3 --disable
 
 # virsh dumpxml rhel7.4 | grep /vcpus -B10 
​​";" <vcpu placement='static' current='2'>8</vcpu>
  <vcpus>
    <vcpu id='0' enabled='yes' hotpluggable='no' order='1'/>
    <vcpu id='1' enabled='yes' hotpluggable='yes' order='2'/>
    <vcpu id='2' enabled='no' hotpluggable='yes'/>
    <vcpu id='3' enabled='no' hotpluggable='yes'/>
    <vcpu id='4' enabled='no' hotpluggable='yes'/>
    <vcpu id='5' enabled='no' hotpluggable='yes'/>
    <vcpu id='6' enabled='no' hotpluggable='yes'/>
    <vcpu id='7' enabled='no' hotpluggable='yes'/>
  </vcpus>";;RedHatEnterpriseLinux7/RHEL7-110994
3500;RHEL7-111002;[setvcpu] enable/ disable vcpu0 when vm is inactive or active (vcpu0 can not be modified) - bug 1459785;vcpu0 can not be modified wether the domain is active or inactive;Yalan Zhang (yalzhang);Medium;Positive;Not Automated;;1;"1. prepare a inactive vm rhel7.4
 # virsh dumpxml rhel7.4 | grep /vcpus -B10
  <vcpu placement='static' current='1'>8</vcpu>
  <vcpus>
    <vcpu id='0' enabled='yes' hotpluggable='no'/>
    <vcpu id='1' enabled='no' hotpluggable='yes'/>
    <vcpu id='2' enabled='no' hotpluggable='yes'/>
    <vcpu id='3' enabled='no' hotpluggable='yes'/>
    <vcpu id='4' enabled='no' hotpluggable='yes'/>
    <vcpu id='5' enabled='no' hotpluggable='yes'/>
    <vcpu id='6' enabled='no' hotpluggable='yes'/>
    <vcpu id='7' enabled='no' hotpluggable='yes'/>
  </vcpus>
​​";​​;Test Case;RedHatEnterpriseLinux7/RHEL7-111002
3500;;;;;;;;;2;"2. # virsh setvcpu rhel7.4 0 --enable
​​";error: invalid argument: vCPU '0' can't be modified;;RedHatEnterpriseLinux7/RHEL7-111002
3500;;;;;;;;;3;# virsh dumpxml rhel7.4 | grep /vcpus -B10;" <vcpu placement='static' current='1'>8</vcpu>
  <vcpus>
    <vcpu id='0' enabled='yes' hotpluggable='no'/>
    <vcpu id='1' enabled='no' hotpluggable='yes'/>
 ...
  </vcpus>";;RedHatEnterpriseLinux7/RHEL7-111002
3500;;;;;;;;;4;# grep error /var/log/libvirt/libvirtd.log;2017-10-18 07:39:21.758+0000: 8057: error : qemuDomainVcpuValidateConfig:5961 : invalid argument: vCPU '0' can't be modified;;RedHatEnterpriseLinux7/RHEL7-111002
3500;;;;;;;;;5;"3. # virsh setvcpu rhel7.4 0 --disable
​​";error: invalid argument: vCPU '0' can't be modified;;RedHatEnterpriseLinux7/RHEL7-111002
3500;;;;;;;;;6;# grep error /var/log/libvirt/libvirtd.log;"2017-10-18 07:39:21.758+0000: 8057: error : qemuDomainVcpuValidateConfig:5961 : invalid argument: vCPU '0' can't be modified
 2017-10-18 07:39:48.797+0000: 8056: error : qemuDomainVcpuValidateConfig:5961 : invalid argument: vCPU '0' can't be modified";;RedHatEnterpriseLinux7/RHEL7-111002
3500;;;;;;;;;7;"# systemctl restart libvirtd
 # virsh dumpxml rhel7.4 | grep /vcpus -B10";" <vcpu placement='static' current='1'>8</vcpu>
  <vcpus>
    <vcpu id='0' enabled='yes' hotpluggable='no'/>
    <vcpu id='1' enabled='no' hotpluggable='yes'/>
 ...
  </vcpus>";;RedHatEnterpriseLinux7/RHEL7-111002
3500;;;;;;;;;8;"4. for running vm:
 # virsh dumpxml rhel7.4 | grep /vcpus -B10
  <vcpu placement='static' current='1'>8</vcpu>
  <vcpus>
    <vcpu id='0' enabled='yes' hotpluggable='no' order='1'/>
    <vcpu id='1' enabled='no' hotpluggable='yes'/>
 ...
  </vcpus>
​​";​​;;RedHatEnterpriseLinux7/RHEL7-111002
3500;;;;;;;;;9;# virsh setvcpu rhel7.4 0 --disable;error: Operation not supported: vcpu '0' can't be unplugged;;RedHatEnterpriseLinux7/RHEL7-111002
3500;;;;;;;;;10;# virsh setvcpu rhel7.4 0 --enable;error: invalid argument: vcpu '0' is already in requested state;;RedHatEnterpriseLinux7/RHEL7-111002
3500;;;;;;;;;11;# grep error /var/log/libvirt/libvirtd.log;"2017-10-18 07:40:31.830+0000: 8055: error : qemuDomainHotplugDelVcpu:5470 : Operation not supported: vcpu '0' can't be unplugged
 2017-10-18 07:40:45.684+0000: 8053: error : qemuDomainFilterHotplugVcpuEntities:5899 : invalid argument: vcpu '0' is already in requested state";;RedHatEnterpriseLinux7/RHEL7-111002
3501;RHEL7-111013;[libvirtd][config]Check the prefix of libvirtd.conf in /usr/lib/sysctl.d/; Check libvirtd.conf in /usr/lib/sysctl.d/ starting with number;Yan Fu (yafu);High;Positive;Not Automated;;1; 1.# ll /usr/lib/sysctl.d/;"1.libvirtd.conf start with number and the number is larger than the value of system.conf/default.conf:
 -rw-r--r--. 1 root root  293 Sep 16 19:59 00-system.conf
 -rw-r--r--. 1 root root 1205 Oct 12 20:39 50-default.conf
 -rw-r--r--. 1 root root  499 Oct  8 21:14 60-libvirtd.conf
​​";Test Case;RedHatEnterpriseLinux7/RHEL7-111013
3502;RHEL7-111019;"[vnc&spice]Start a guest with ""="" in domain name and graphics listening on auto-generated unix socket";"Verify that guest can start and be connected successfully when guest name contains ""="" and graphics listen on auto-generated unix socket";Fangge Jin (fjin);High;Positive;Not Automated;;1;" 1.Edit or define a guest with such setting:
 1) with ""="" in domain name
 2) graphic listen type=socket"; ;Test Case;RedHatEnterpriseLinux7/RHEL7-111019
3502;;;;;;;;;2;2. Start guest;Guest starts successfully;;RedHatEnterpriseLinux7/RHEL7-111019
3502;;;;;;;;;3;"3. Check qemu command line:
 # ps aux|grep qemu |grep foo|grep unix";"The qemu command line includes correct unix socket path. The path format is: ""/var/lib/libvirt/qemu/domain-{domain id}-{domain name}/vnc.sock

 1) For spice:
 -spice unix,addr=/var/lib/libvirt/qemu/domain-7-foo=1/spice.sock,disable-ticketing,seamless-migration=on

 2) For vnc:
 Since RHEL7.5:
 -vnc vnc=unix:/var/lib/libvirt/qemu/domain-7-foo=1/vnc.sock

 Before RHEL7.5:
 -vnc unix:/var/lib/libvirt/qemu/domain-7-foo=1/vnc.sock
";;RedHatEnterpriseLinux7/RHEL7-111019
3502;;;;;;;;;4;"4. Connect to guest by virt-viewer:
 # virt-viewer rhel7.4";Connect successfully;;RedHatEnterpriseLinux7/RHEL7-111019
3502;;;;;;;;;5;"Do some operation in the virt-viewer to verify the graphic works well, for example:
 # date";​​;;RedHatEnterpriseLinux7/RHEL7-111019
